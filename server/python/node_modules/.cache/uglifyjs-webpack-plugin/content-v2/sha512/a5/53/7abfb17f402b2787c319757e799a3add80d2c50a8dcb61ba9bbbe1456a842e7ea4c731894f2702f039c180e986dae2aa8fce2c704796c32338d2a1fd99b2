{"code":"!function(t,e){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error(\"jQuery requires a window with a document\");return e(t)}:e(t)}(\"undefined\"!=typeof window?window:this,function(t,e){\"use strict\";var r=[],n=t.document,i=Object.getPrototypeOf,o=r.slice,s=r.concat,a=r.push,u=r.indexOf,c={},l=c.toString,h=c.hasOwnProperty,f=h.toString,d=f.call(Object),p={},m=function(t){return\"function\"==typeof t&&\"number\"!=typeof t.nodeType},g=function(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function y(t,e,r){var i,o=(e=e||n).createElement(\"script\");if(o.text=t,r)for(i in v)r[i]&&(o[i]=r[i]);e.head.appendChild(o).parentNode.removeChild(o)}function w(t){return null==t?t+\"\":\"object\"==typeof t||\"function\"==typeof t?c[l.call(t)]||\"object\":typeof t}var x=function(t,e){return new x.fn.init(t,e)},b=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;function _(t){var e=!!t&&\"length\"in t&&t.length,r=w(t);return!m(t)&&!g(t)&&(\"array\"===r||0===e||\"number\"==typeof e&&e>0&&e-1 in t)}x.fn=x.prototype={jquery:\"3.3.1\",constructor:x,length:0,toArray:function(){return o.call(this)},get:function(t){return null==t?o.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=x.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return x.each(this,t)},map:function(t){return this.pushStack(x.map(this,function(e,r){return t.call(e,r,e)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,r=+t+(t<0?e:0);return this.pushStack(r>=0&&r<e?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:r.sort,splice:r.splice},x.extend=x.fn.extend=function(){var t,e,r,n,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for(\"boolean\"==typeof s&&(c=s,s=arguments[a]||{},a++),\"object\"==typeof s||m(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(t=arguments[a]))for(e in t)r=s[e],s!==(n=t[e])&&(c&&n&&(x.isPlainObject(n)||(i=Array.isArray(n)))?(i?(i=!1,o=r&&Array.isArray(r)?r:[]):o=r&&x.isPlainObject(r)?r:{},s[e]=x.extend(c,o,n)):void 0!==n&&(s[e]=n));return s},x.extend({expando:\"jQuery\"+(\"3.3.1\"+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,r;return!(!t||\"[object Object]\"!==l.call(t)||(e=i(t))&&(\"function\"!=typeof(r=h.call(e,\"constructor\")&&e.constructor)||f.call(r)!==d))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){y(t)},each:function(t,e){var r,n=0;if(_(t))for(r=t.length;n<r&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?\"\":(t+\"\").replace(b,\"\")},makeArray:function(t,e){var r=e||[];return null!=t&&(_(Object(t))?x.merge(r,\"string\"==typeof t?[t]:t):a.call(r,t)),r},inArray:function(t,e,r){return null==e?-1:u.call(e,t,r)},merge:function(t,e){for(var r=+e.length,n=0,i=t.length;n<r;n++)t[i++]=e[n];return t.length=i,t},grep:function(t,e,r){for(var n=[],i=0,o=t.length,s=!r;i<o;i++)!e(t[i],i)!==s&&n.push(t[i]);return n},map:function(t,e,r){var n,i,o=0,a=[];if(_(t))for(n=t.length;o<n;o++)null!=(i=e(t[o],o,r))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,r))&&a.push(i);return s.apply([],a)},guid:1,support:p}),\"function\"==typeof Symbol&&(x.fn[Symbol.iterator]=r[Symbol.iterator]),x.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(t,e){c[\"[object \"+e+\"]\"]=e.toLowerCase()});var M=function(t){var e,r,n,i,o,s,a,u,c,l,h,f,d,p,m,g,v,y,w,x=\"sizzle\"+1*new Date,b=t.document,_=0,M=0,S=st(),E=st(),T=st(),A=function(t,e){return t===e&&(h=!0),0},R={}.hasOwnProperty,k=[],C=k.pop,L=k.push,P=k.push,D=k.slice,O=function(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},N=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",I=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",F=\"(?:\\\\\\\\.|[\\\\w-]|[^\\0-\\\\xa0])+\",z=\"\\\\[\"+I+\"*(\"+F+\")(?:\"+I+\"*([*^$|!~]?=)\"+I+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+F+\"))|)\"+I+\"*\\\\]\",U=\":(\"+F+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+z+\")*)|.*)\\\\)|)\",j=new RegExp(I+\"+\",\"g\"),V=new RegExp(\"^\"+I+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+I+\"+$\",\"g\"),B=new RegExp(\"^\"+I+\"*,\"+I+\"*\"),H=new RegExp(\"^\"+I+\"*([>+~]|\"+I+\")\"+I+\"*\"),G=new RegExp(\"=\"+I+\"*([^\\\\]'\\\"]*?)\"+I+\"*\\\\]\",\"g\"),W=new RegExp(U),q=new RegExp(\"^\"+F+\"$\"),Y={ID:new RegExp(\"^#(\"+F+\")\"),CLASS:new RegExp(\"^\\\\.(\"+F+\")\"),TAG:new RegExp(\"^(\"+F+\"|[*])\"),ATTR:new RegExp(\"^\"+z),PSEUDO:new RegExp(\"^\"+U),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+I+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+I+\"*(?:([+-]|)\"+I+\"*(\\\\d+)|))\"+I+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+N+\")$\",\"i\"),needsContext:new RegExp(\"^\"+I+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+I+\"*((?:-\\\\d)?\\\\d*)\"+I+\"*\\\\)|)(?=[^-]|$)\",\"i\")},X=/^(?:input|select|textarea|button)$/i,$=/^h\\d$/i,J=/^[^{]+\\{\\s*\\[native \\w/,Z=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,Q=/[+~]/,K=new RegExp(\"\\\\\\\\([\\\\da-f]{1,6}\"+I+\"?|(\"+I+\")|.)\",\"ig\"),tt=function(t,e,r){var n=\"0x\"+e-65536;return n!=n||r?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},et=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,rt=function(t,e){return e?\"\\0\"===t?\"\\ufffd\":t.slice(0,-1)+\"\\\\\"+t.charCodeAt(t.length-1).toString(16)+\" \":\"\\\\\"+t},nt=function(){f()},it=yt(function(t){return!0===t.disabled&&(\"form\"in t||\"label\"in t)},{dir:\"parentNode\",next:\"legend\"});try{P.apply(k=D.call(b.childNodes),b.childNodes)}catch(t){P={apply:k.length?function(t,e){L.apply(t,D.call(e))}:function(t,e){for(var r=t.length,n=0;t[r++]=e[n++];);t.length=r-1}}}function ot(t,e,n,i){var o,a,c,l,h,p,v,y=e&&e.ownerDocument,_=e?e.nodeType:9;if(n=n||[],\"string\"!=typeof t||!t||1!==_&&9!==_&&11!==_)return n;if(!i&&((e?e.ownerDocument||e:b)!==d&&f(e),e=e||d,m)){if(11!==_&&(h=Z.exec(t)))if(o=h[1]){if(9===_){if(!(c=e.getElementById(o)))return n;if(c.id===o)return n.push(c),n}else if(y&&(c=y.getElementById(o))&&w(e,c)&&c.id===o)return n.push(c),n}else{if(h[2])return P.apply(n,e.getElementsByTagName(t)),n;if((o=h[3])&&r.getElementsByClassName&&e.getElementsByClassName)return P.apply(n,e.getElementsByClassName(o)),n}if(r.qsa&&!T[t+\" \"]&&(!g||!g.test(t))){if(1!==_)y=e,v=t;else if(\"object\"!==e.nodeName.toLowerCase()){for((l=e.getAttribute(\"id\"))?l=l.replace(et,rt):e.setAttribute(\"id\",l=x),a=(p=s(t)).length;a--;)p[a]=\"#\"+l+\" \"+vt(p[a]);v=p.join(\",\"),y=Q.test(t)&&mt(e.parentNode)||e}if(v)try{return P.apply(n,y.querySelectorAll(v)),n}catch(t){}finally{l===x&&e.removeAttribute(\"id\")}}}return u(t.replace(V,\"$1\"),e,n,i)}function st(){var t=[];return function e(r,i){return t.push(r+\" \")>n.cacheLength&&delete e[t.shift()],e[r+\" \"]=i}}function at(t){return t[x]=!0,t}function ut(t){var e=d.createElement(\"fieldset\");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var r=t.split(\"|\"),i=r.length;i--;)n.attrHandle[r[i]]=e}function lt(t,e){var r=e&&t,n=r&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===e)return-1;return t?1:-1}function ht(t){return function(e){return\"input\"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var r=e.nodeName.toLowerCase();return(\"input\"===r||\"button\"===r)&&e.type===t}}function dt(t){return function(e){return\"form\"in e?e.parentNode&&!1===e.disabled?\"label\"in e?\"label\"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&it(e)===t:e.disabled===t:\"label\"in e&&e.disabled===t}}function pt(t){return at(function(e){return e=+e,at(function(r,n){for(var i,o=t([],r.length,e),s=o.length;s--;)r[i=o[s]]&&(r[i]=!(n[i]=r[i]))})})}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in r=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&\"HTML\"!==e.nodeName},f=ot.setDocument=function(t){var e,i,s=t?t.ownerDocument||t:b;return s!==d&&9===s.nodeType&&s.documentElement?(p=(d=s).documentElement,m=!o(d),b!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener(\"unload\",nt,!1):i.attachEvent&&i.attachEvent(\"onunload\",nt)),r.attributes=ut(function(t){return t.className=\"i\",!t.getAttribute(\"className\")}),r.getElementsByTagName=ut(function(t){return t.appendChild(d.createComment(\"\")),!t.getElementsByTagName(\"*\").length}),r.getElementsByClassName=J.test(d.getElementsByClassName),r.getById=ut(function(t){return p.appendChild(t).id=x,!d.getElementsByName||!d.getElementsByName(x).length}),r.getById?(n.filter.ID=function(t){var e=t.replace(K,tt);return function(t){return t.getAttribute(\"id\")===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var r=e.getElementById(t);return r?[r]:[]}}):(n.filter.ID=function(t){var e=t.replace(K,tt);return function(t){var r=void 0!==t.getAttributeNode&&t.getAttributeNode(\"id\");return r&&r.value===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var r,n,i,o=e.getElementById(t);if(o){if((r=o.getAttributeNode(\"id\"))&&r.value===t)return[o];for(i=e.getElementsByName(t),n=0;o=i[n++];)if((r=o.getAttributeNode(\"id\"))&&r.value===t)return[o]}return[]}}),n.find.TAG=r.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):r.qsa?e.querySelectorAll(t):void 0}:function(t,e){var r,n=[],i=0,o=e.getElementsByTagName(t);if(\"*\"===t){for(;r=o[i++];)1===r.nodeType&&n.push(r);return n}return o},n.find.CLASS=r.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},v=[],g=[],(r.qsa=J.test(d.querySelectorAll))&&(ut(function(t){p.appendChild(t).innerHTML=\"<a id='\"+x+\"'></a><select id='\"+x+\"-\\r\\\\' msallowcapture=''><option selected=''></option></select>\",t.querySelectorAll(\"[msallowcapture^='']\").length&&g.push(\"[*^$]=\"+I+\"*(?:''|\\\"\\\")\"),t.querySelectorAll(\"[selected]\").length||g.push(\"\\\\[\"+I+\"*(?:value|\"+N+\")\"),t.querySelectorAll(\"[id~=\"+x+\"-]\").length||g.push(\"~=\"),t.querySelectorAll(\":checked\").length||g.push(\":checked\"),t.querySelectorAll(\"a#\"+x+\"+*\").length||g.push(\".#.+[+~]\")}),ut(function(t){t.innerHTML=\"<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>\";var e=d.createElement(\"input\");e.setAttribute(\"type\",\"hidden\"),t.appendChild(e).setAttribute(\"name\",\"D\"),t.querySelectorAll(\"[name=d]\").length&&g.push(\"name\"+I+\"*[*^$|!~]?=\"),2!==t.querySelectorAll(\":enabled\").length&&g.push(\":enabled\",\":disabled\"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(\":disabled\").length&&g.push(\":enabled\",\":disabled\"),t.querySelectorAll(\"*,:x\"),g.push(\",.*:\")})),(r.matchesSelector=J.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ut(function(t){r.disconnectedMatch=y.call(t,\"*\"),y.call(t,\"[s!='']:x\"),v.push(\"!=\",U)}),g=g.length&&new RegExp(g.join(\"|\")),v=v.length&&new RegExp(v.join(\"|\")),e=J.test(p.compareDocumentPosition),w=e||J.test(p.contains)?function(t,e){var r=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return h=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!r.sortDetached&&e.compareDocumentPosition(t)===n?t===d||t.ownerDocument===b&&w(b,t)?-1:e===d||e.ownerDocument===b&&w(b,e)?1:l?O(l,t)-O(l,e):0:4&n?-1:1)}:function(t,e){if(t===e)return h=!0,0;var r,n=0,i=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!i||!o)return t===d?-1:e===d?1:i?-1:o?1:l?O(l,t)-O(l,e):0;if(i===o)return lt(t,e);for(r=t;r=r.parentNode;)s.unshift(r);for(r=e;r=r.parentNode;)a.unshift(r);for(;s[n]===a[n];)n++;return n?lt(s[n],a[n]):s[n]===b?-1:a[n]===b?1:0},d):d},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==d&&f(t),e=e.replace(G,\"='$1']\"),r.matchesSelector&&m&&!T[e+\" \"]&&(!v||!v.test(e))&&(!g||!g.test(e)))try{var n=y.call(t,e);if(n||r.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return ot(e,d,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==d&&f(t),w(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==d&&f(t);var i=n.attrHandle[e.toLowerCase()],o=i&&R.call(n.attrHandle,e.toLowerCase())?i(t,e,!m):void 0;return void 0!==o?o:r.attributes||!m?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ot.escape=function(t){return(t+\"\").replace(et,rt)},ot.error=function(t){throw new Error(\"Syntax error, unrecognized expression: \"+t)},ot.uniqueSort=function(t){var e,n=[],i=0,o=0;if(h=!r.detectDuplicates,l=!r.sortStable&&t.slice(0),t.sort(A),h){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return l=null,t},i=ot.getText=function(t){var e,r=\"\",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if(\"string\"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)r+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)r+=i(e);return r},(n=ot.selectors={cacheLength:50,createPseudo:at,match:Y,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(K,tt),t[3]=(t[3]||t[4]||t[5]||\"\").replace(K,tt),\"~=\"===t[2]&&(t[3]=\" \"+t[3]+\" \"),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),\"nth\"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*(\"even\"===t[3]||\"odd\"===t[3])),t[5]=+(t[7]+t[8]||\"odd\"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,r=!t[6]&&t[2];return Y.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||\"\":r&&W.test(r)&&(e=s(r,!0))&&(e=r.indexOf(\")\",r.length-e)-r.length)&&(t[0]=t[0].slice(0,e),t[2]=r.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(K,tt).toLowerCase();return\"*\"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+\" \"];return e||(e=new RegExp(\"(^|\"+I+\")\"+t+\"(\"+I+\"|$)\"))&&S(t,function(t){return e.test(\"string\"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute(\"class\")||\"\")})},ATTR:function(t,e,r){return function(n){var i=ot.attr(n,t);return null==i?\"!=\"===e:!e||(i+=\"\",\"=\"===e?i===r:\"!=\"===e?i!==r:\"^=\"===e?r&&0===i.indexOf(r):\"*=\"===e?r&&i.indexOf(r)>-1:\"$=\"===e?r&&i.slice(-r.length)===r:\"~=\"===e?(\" \"+i.replace(j,\" \")+\" \").indexOf(r)>-1:\"|=\"===e&&(i===r||i.slice(0,r.length+1)===r+\"-\"))}},CHILD:function(t,e,r,n,i){var o=\"nth\"!==t.slice(0,3),s=\"last\"!==t.slice(-4),a=\"of-type\"===e;return 1===n&&0===i?function(t){return!!t.parentNode}:function(e,r,u){var c,l,h,f,d,p,m=o!==s?\"nextSibling\":\"previousSibling\",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!u&&!a,w=!1;if(g){if(o){for(;m;){for(f=e;f=f[m];)if(a?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=m=\"only\"===t&&!p&&\"nextSibling\"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&y){for(w=(d=(c=(l=(h=(f=g)[x]||(f[x]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]||[])[0]===_&&c[1])&&c[2],f=d&&g.childNodes[d];f=++d&&f&&f[m]||(w=d=0)||p.pop();)if(1===f.nodeType&&++w&&f===e){l[t]=[_,d,w];break}}else if(y&&(w=d=(c=(l=(h=(f=e)[x]||(f[x]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]||[])[0]===_&&c[1]),!1===w)for(;(f=++d&&f&&f[m]||(w=d=0)||p.pop())&&((a?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++w||(y&&((l=(h=f[x]||(f[x]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]=[_,w]),f!==e)););return(w-=i)===n||w%n==0&&w/n>=0}}},PSEUDO:function(t,e){var r,i=n.pseudos[t]||n.setFilters[t.toLowerCase()]||ot.error(\"unsupported pseudo: \"+t);return i[x]?i(e):i.length>1?(r=[t,t,\"\",e],n.setFilters.hasOwnProperty(t.toLowerCase())?at(function(t,r){for(var n,o=i(t,e),s=o.length;s--;)t[n=O(t,o[s])]=!(r[n]=o[s])}):function(t){return i(t,0,r)}):i}},pseudos:{not:at(function(t){var e=[],r=[],n=a(t.replace(V,\"$1\"));return n[x]?at(function(t,e,r,i){for(var o,s=n(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,i,o){return e[0]=t,n(e,null,o,r),e[0]=null,!r.pop()}}),has:at(function(t){return function(e){return ot(t,e).length>0}}),contains:at(function(t){return t=t.replace(K,tt),function(e){return(e.textContent||e.innerText||i(e)).indexOf(t)>-1}}),lang:at(function(t){return q.test(t||\"\")||ot.error(\"unsupported lang: \"+t),t=t.replace(K,tt).toLowerCase(),function(e){var r;do{if(r=m?e.lang:e.getAttribute(\"xml:lang\")||e.getAttribute(\"lang\"))return(r=r.toLowerCase())===t||0===r.indexOf(t+\"-\")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var r=t.location&&t.location.hash;return r&&r.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:dt(!1),disabled:dt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return\"input\"===e&&!!t.checked||\"option\"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return\"input\"===e&&\"button\"===t.type||\"button\"===e},text:function(t){var e;return\"input\"===t.nodeName.toLowerCase()&&\"text\"===t.type&&(null==(e=t.getAttribute(\"type\"))||\"text\"===e.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,r){return[r<0?r+e:r]}),even:pt(function(t,e){for(var r=0;r<e;r+=2)t.push(r);return t}),odd:pt(function(t,e){for(var r=1;r<e;r+=2)t.push(r);return t}),lt:pt(function(t,e,r){for(var n=r<0?r+e:r;--n>=0;)t.push(n);return t}),gt:pt(function(t,e,r){for(var n=r<0?r+e:r;++n<e;)t.push(n);return t})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=ft(e);function gt(){}function vt(t){for(var e=0,r=t.length,n=\"\";e<r;e++)n+=t[e].value;return n}function yt(t,e,r){var n=e.dir,i=e.next,o=i||n,s=r&&\"parentNode\"===o,a=M++;return e.first?function(e,r,i){for(;e=e[n];)if(1===e.nodeType||s)return t(e,r,i);return!1}:function(e,r,u){var c,l,h,f=[_,a];if(u){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,r,u))return!0}else for(;e=e[n];)if(1===e.nodeType||s)if(l=(h=e[x]||(e[x]={}))[e.uniqueID]||(h[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[n]||e;else{if((c=l[o])&&c[0]===_&&c[1]===a)return f[2]=c[2];if(l[o]=f,f[2]=t(e,r,u))return!0}return!1}}function wt(t){return t.length>1?function(e,r,n){for(var i=t.length;i--;)if(!t[i](e,r,n))return!1;return!0}:t[0]}function xt(t,e,r,n,i){for(var o,s=[],a=0,u=t.length,c=null!=e;a<u;a++)(o=t[a])&&(r&&!r(o,n,i)||(s.push(o),c&&e.push(a)));return s}function bt(t,e,r,n,i,o){return n&&!n[x]&&(n=bt(n)),i&&!i[x]&&(i=bt(i,o)),at(function(o,s,a,u){var c,l,h,f=[],d=[],p=s.length,m=o||function(t,e,r){for(var n=0,i=e.length;n<i;n++)ot(t,e[n],r);return r}(e||\"*\",a.nodeType?[a]:a,[]),g=!t||!o&&e?m:xt(m,f,t,a,u),v=r?i||(o?t:p||n)?[]:s:g;if(r&&r(g,v,a,u),n)for(c=xt(v,d),n(c,[],a,u),l=c.length;l--;)(h=c[l])&&(v[d[l]]=!(g[d[l]]=h));if(o){if(i||t){if(i){for(c=[],l=v.length;l--;)(h=v[l])&&c.push(g[l]=h);i(null,v=[],c,u)}for(l=v.length;l--;)(h=v[l])&&(c=i?O(o,h):f[l])>-1&&(o[c]=!(s[c]=h))}}else v=xt(v===s?v.splice(p,v.length):v),i?i(null,s,v,u):P.apply(s,v)})}function _t(t){for(var e,r,i,o=t.length,s=n.relative[t[0].type],a=s||n.relative[\" \"],u=s?1:0,l=yt(function(t){return t===e},a,!0),h=yt(function(t){return O(e,t)>-1},a,!0),f=[function(t,r,n){var i=!s&&(n||r!==c)||((e=r).nodeType?l(t,r,n):h(t,r,n));return e=null,i}];u<o;u++)if(r=n.relative[t[u].type])f=[yt(wt(f),r)];else{if((r=n.filter[t[u].type].apply(null,t[u].matches))[x]){for(i=++u;i<o&&!n.relative[t[i].type];i++);return bt(u>1&&wt(f),u>1&&vt(t.slice(0,u-1).concat({value:\" \"===t[u-2].type?\"*\":\"\"})).replace(V,\"$1\"),r,u<i&&_t(t.slice(u,i)),i<o&&_t(t=t.slice(i)),i<o&&vt(t))}f.push(r)}return wt(f)}return gt.prototype=n.filters=n.pseudos,n.setFilters=new gt,s=ot.tokenize=function(t,e){var r,i,o,s,a,u,c,l=E[t+\" \"];if(l)return e?0:l.slice(0);for(a=t,u=[],c=n.preFilter;a;){for(s in r&&!(i=B.exec(a))||(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=H.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(V,\" \")}),a=a.slice(r.length)),n.filter)!(i=Y[s].exec(a))||c[s]&&!(i=c[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return e?a.length:a?ot.error(t):E(t,u).slice(0)},a=ot.compile=function(t,e){var r,i=[],o=[],a=T[t+\" \"];if(!a){for(e||(e=s(t)),r=e.length;r--;)(a=_t(e[r]))[x]?i.push(a):o.push(a);(a=T(t,function(t,e){var r=e.length>0,i=t.length>0,o=function(o,s,a,u,l){var h,p,g,v=0,y=\"0\",w=o&&[],x=[],b=c,M=o||i&&n.find.TAG(\"*\",l),S=_+=null==b?1:Math.random()||.1,E=M.length;for(l&&(c=s===d||s||l);y!==E&&null!=(h=M[y]);y++){if(i&&h){for(p=0,s||h.ownerDocument===d||(f(h),a=!m);g=t[p++];)if(g(h,s||d,a)){u.push(h);break}l&&(_=S)}r&&((h=!g&&h)&&v--,o&&w.push(h))}if(v+=y,r&&y!==v){for(p=0;g=e[p++];)g(w,x,s,a);if(o){if(v>0)for(;y--;)w[y]||x[y]||(x[y]=C.call(u));x=xt(x)}P.apply(u,x),l&&!o&&x.length>0&&v+e.length>1&&ot.uniqueSort(u)}return l&&(_=S,c=b),w};return r?at(o):o}(o,i))).selector=t}return a},u=ot.select=function(t,e,r,i){var o,u,c,l,h,f=\"function\"==typeof t&&t,d=!i&&s(t=f.selector||t);if(r=r||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&\"ID\"===(c=u[0]).type&&9===e.nodeType&&m&&n.relative[u[1].type]){if(!(e=(n.find.ID(c.matches[0].replace(K,tt),e)||[])[0]))return r;f&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(o=Y.needsContext.test(t)?0:u.length;o--&&!n.relative[l=(c=u[o]).type];)if((h=n.find[l])&&(i=h(c.matches[0].replace(K,tt),Q.test(u[0].type)&&mt(e.parentNode)||e))){if(u.splice(o,1),!(t=i.length&&vt(u)))return P.apply(r,i),r;break}}return(f||a(t,d))(i,e,!m,r,!e||Q.test(t)&&mt(e.parentNode)||e),r},r.sortStable=x.split(\"\").sort(A).join(\"\")===x,r.detectDuplicates=!!h,f(),r.sortDetached=ut(function(t){return 1&t.compareDocumentPosition(d.createElement(\"fieldset\"))}),ut(function(t){return t.innerHTML=\"<a href='#'></a>\",\"#\"===t.firstChild.getAttribute(\"href\")})||ct(\"type|href|height|width\",function(t,e,r){if(!r)return t.getAttribute(e,\"type\"===e.toLowerCase()?1:2)}),r.attributes&&ut(function(t){return t.innerHTML=\"<input/>\",t.firstChild.setAttribute(\"value\",\"\"),\"\"===t.firstChild.getAttribute(\"value\")})||ct(\"value\",function(t,e,r){if(!r&&\"input\"===t.nodeName.toLowerCase())return t.defaultValue}),ut(function(t){return null==t.getAttribute(\"disabled\")})||ct(N,function(t,e,r){var n;if(!r)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),ot}(t);x.find=M,x.expr=M.selectors,x.expr[\":\"]=x.expr.pseudos,x.uniqueSort=x.unique=M.uniqueSort,x.text=M.getText,x.isXMLDoc=M.isXML,x.contains=M.contains,x.escapeSelector=M.escape;var S=function(t,e,r){for(var n=[],i=void 0!==r;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&x(t).is(r))break;n.push(t)}return n},E=function(t,e){for(var r=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&r.push(t);return r},T=x.expr.match.needsContext;function A(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var R=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function k(t,e,r){return m(e)?x.grep(t,function(t,n){return!!e.call(t,n,t)!==r}):e.nodeType?x.grep(t,function(t){return t===e!==r}):\"string\"!=typeof e?x.grep(t,function(t){return u.call(e,t)>-1!==r}):x.filter(e,t,r)}x.filter=function(t,e,r){var n=e[0];return r&&(t=\":not(\"+t+\")\"),1===e.length&&1===n.nodeType?x.find.matchesSelector(n,t)?[n]:[]:x.find.matches(t,x.grep(e,function(t){return 1===t.nodeType}))},x.fn.extend({find:function(t){var e,r,n=this.length,i=this;if(\"string\"!=typeof t)return this.pushStack(x(t).filter(function(){for(e=0;e<n;e++)if(x.contains(i[e],this))return!0}));for(r=this.pushStack([]),e=0;e<n;e++)x.find(t,i[e],r);return n>1?x.uniqueSort(r):r},filter:function(t){return this.pushStack(k(this,t||[],!1))},not:function(t){return this.pushStack(k(this,t||[],!0))},is:function(t){return!!k(this,\"string\"==typeof t&&T.test(t)?x(t):t||[],!1).length}});var C,L=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/;(x.fn.init=function(t,e,r){var i,o;if(!t)return this;if(r=r||C,\"string\"==typeof t){if(!(i=\"<\"===t[0]&&\">\"===t[t.length-1]&&t.length>=3?[null,t,null]:L.exec(t))||!i[1]&&e)return!e||e.jquery?(e||r).find(t):this.constructor(e).find(t);if(i[1]){if(x.merge(this,x.parseHTML(i[1],(e=e instanceof x?e[0]:e)&&e.nodeType?e.ownerDocument||e:n,!0)),R.test(i[1])&&x.isPlainObject(e))for(i in e)m(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(o=n.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==r.ready?r.ready(t):t(x):x.makeArray(t,this)}).prototype=x.fn,C=x(n);var P=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function O(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}x.fn.extend({has:function(t){var e=x(t,this),r=e.length;return this.filter(function(){for(var t=0;t<r;t++)if(x.contains(this,e[t]))return!0})},closest:function(t,e){var r,n=0,i=this.length,o=[],s=\"string\"!=typeof t&&x(t);if(!T.test(t))for(;n<i;n++)for(r=this[n];r&&r!==e;r=r.parentNode)if(r.nodeType<11&&(s?s.index(r)>-1:1===r.nodeType&&x.find.matchesSelector(r,t))){o.push(r);break}return this.pushStack(o.length>1?x.uniqueSort(o):o)},index:function(t){return t?\"string\"==typeof t?u.call(x(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),x.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return S(t,\"parentNode\")},parentsUntil:function(t,e,r){return S(t,\"parentNode\",r)},next:function(t){return O(t,\"nextSibling\")},prev:function(t){return O(t,\"previousSibling\")},nextAll:function(t){return S(t,\"nextSibling\")},prevAll:function(t){return S(t,\"previousSibling\")},nextUntil:function(t,e,r){return S(t,\"nextSibling\",r)},prevUntil:function(t,e,r){return S(t,\"previousSibling\",r)},siblings:function(t){return E((t.parentNode||{}).firstChild,t)},children:function(t){return E(t.firstChild)},contents:function(t){return A(t,\"iframe\")?t.contentDocument:(A(t,\"template\")&&(t=t.content||t),x.merge([],t.childNodes))}},function(t,e){x.fn[t]=function(r,n){var i=x.map(this,e,r);return\"Until\"!==t.slice(-5)&&(n=r),n&&\"string\"==typeof n&&(i=x.filter(n,i)),this.length>1&&(D[t]||x.uniqueSort(i),P.test(t)&&i.reverse()),this.pushStack(i)}});var N=/[^\\x20\\t\\r\\n\\f]+/g;function I(t){return t}function F(t){throw t}function z(t,e,r,n){var i;try{t&&m(i=t.promise)?i.call(t).done(e).fail(r):t&&m(i=t.then)?i.call(t,e,r):e.apply(void 0,[t].slice(n))}catch(t){r.apply(void 0,[t])}}x.Callbacks=function(t){t=\"string\"==typeof t?function(t){var e={};return x.each(t.match(N)||[],function(t,r){e[r]=!0}),e}(t):x.extend({},t);var e,r,n,i,o=[],s=[],a=-1,u=function(){for(i=i||t.once,n=e=!0;s.length;a=-1)for(r=s.shift();++a<o.length;)!1===o[a].apply(r[0],r[1])&&t.stopOnFalse&&(a=o.length,r=!1);t.memory||(r=!1),e=!1,i&&(o=r?[]:\"\")},c={add:function(){return o&&(r&&!e&&(a=o.length-1,s.push(r)),function e(r){x.each(r,function(r,n){m(n)?t.unique&&c.has(n)||o.push(n):n&&n.length&&\"string\"!==w(n)&&e(n)})}(arguments),r&&!e&&u()),this},remove:function(){return x.each(arguments,function(t,e){for(var r;(r=x.inArray(e,o,r))>-1;)o.splice(r,1),r<=a&&a--}),this},has:function(t){return t?x.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=r=\"\",this},disabled:function(){return!o},lock:function(){return i=s=[],r||e||(o=r=\"\"),this},locked:function(){return!!i},fireWith:function(t,r){return i||(r=[t,(r=r||[]).slice?r.slice():r],s.push(r),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},x.extend({Deferred:function(e){var r=[[\"notify\",\"progress\",x.Callbacks(\"memory\"),x.Callbacks(\"memory\"),2],[\"resolve\",\"done\",x.Callbacks(\"once memory\"),x.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",x.Callbacks(\"once memory\"),x.Callbacks(\"once memory\"),1,\"rejected\"]],n=\"pending\",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return x.Deferred(function(e){x.each(r,function(r,n){var i=m(t[n[4]])&&t[n[4]];o[n[1]](function(){var t=i&&i.apply(this,arguments);t&&m(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[n[0]+\"With\"](this,i?[t]:arguments)})}),t=null}).promise()},then:function(e,n,i){var o=0;function s(e,r,n,i){return function(){var a=this,u=arguments,c=function(){var t,c;if(!(e<o)){if((t=n.apply(a,u))===r.promise())throw new TypeError(\"Thenable self-resolution\");m(c=t&&(\"object\"==typeof t||\"function\"==typeof t)&&t.then)?i?c.call(t,s(o,r,I,i),s(o,r,F,i)):c.call(t,s(++o,r,I,i),s(o,r,F,i),s(o,r,I,r.notifyWith)):(n!==I&&(a=void 0,u=[t]),(i||r.resolveWith)(a,u))}},l=i?c:function(){try{c()}catch(t){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(t,l.stackTrace),e+1>=o&&(n!==F&&(a=void 0,u=[t]),r.rejectWith(a,u))}};e?l():(x.Deferred.getStackHook&&(l.stackTrace=x.Deferred.getStackHook()),t.setTimeout(l))}}return x.Deferred(function(t){r[0][3].add(s(0,t,m(i)?i:I,t.notifyWith)),r[1][3].add(s(0,t,m(e)?e:I)),r[2][3].add(s(0,t,m(n)?n:F))}).promise()},promise:function(t){return null!=t?x.extend(t,i):i}},o={};return x.each(r,function(t,e){var s=e[2],a=e[5];i[e[1]]=s.add,a&&s.add(function(){n=a},r[3-t][2].disable,r[3-t][3].disable,r[0][2].lock,r[0][3].lock),s.add(e[3].fire),o[e[0]]=function(){return o[e[0]+\"With\"](this===o?void 0:this,arguments),this},o[e[0]+\"With\"]=s.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,r=e,n=Array(r),i=o.call(arguments),s=x.Deferred(),a=function(t){return function(r){n[t]=this,i[t]=arguments.length>1?o.call(arguments):r,--e||s.resolveWith(n,i)}};if(e<=1&&(z(t,s.done(a(r)).resolve,s.reject,!e),\"pending\"===s.state()||m(i[r]&&i[r].then)))return s.then();for(;r--;)z(i[r],a(r),s.reject);return s.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,r){t.console&&t.console.warn&&e&&U.test(e.name)&&t.console.warn(\"jQuery.Deferred exception: \"+e.message,e.stack,r)},x.readyException=function(e){t.setTimeout(function(){throw e})};var j=x.Deferred();function V(){n.removeEventListener(\"DOMContentLoaded\",V),t.removeEventListener(\"load\",V),x.ready()}x.fn.ready=function(t){return j.then(t).catch(function(t){x.readyException(t)}),this},x.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==t&&--x.readyWait>0||j.resolveWith(n,[x]))}}),x.ready.then=j.then,\"complete\"===n.readyState||\"loading\"!==n.readyState&&!n.documentElement.doScroll?t.setTimeout(x.ready):(n.addEventListener(\"DOMContentLoaded\",V),t.addEventListener(\"load\",V));var B=function(t,e,r,n,i,o,s){var a=0,u=t.length,c=null==r;if(\"object\"===w(r))for(a in i=!0,r)B(t,e,a,r[a],!0,o,s);else if(void 0!==n&&(i=!0,m(n)||(s=!0),c&&(s?(e.call(t,n),e=null):(c=e,e=function(t,e,r){return c.call(x(t),r)})),e))for(;a<u;a++)e(t[a],r,s?n:n.call(t[a],a,e(t[a],r)));return i?t:c?e.call(t):u?e(t[0],r):o},H=/^-ms-/,G=/-([a-z])/g;function W(t,e){return e.toUpperCase()}function q(t){return t.replace(H,\"ms-\").replace(G,W)}var Y=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function X(){this.expando=x.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Y(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,r){var n,i=this.cache(t);if(\"string\"==typeof e)i[q(e)]=r;else for(n in e)i[q(n)]=e[n];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][q(e)]},access:function(t,e,r){return void 0===e||e&&\"string\"==typeof e&&void 0===r?this.get(t,e):(this.set(t,e,r),void 0!==r?r:e)},remove:function(t,e){var r,n=t[this.expando];if(void 0!==n){if(void 0!==e){r=(e=Array.isArray(e)?e.map(q):(e=q(e))in n?[e]:e.match(N)||[]).length;for(;r--;)delete n[e[r]]}(void 0===e||x.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!x.isEmptyObject(e)}};var $=new X,J=new X,Z=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,Q=/[A-Z]/g;function K(t,e,r){var n;if(void 0===r&&1===t.nodeType)if(n=\"data-\"+e.replace(Q,\"-$&\").toLowerCase(),\"string\"==typeof(r=t.getAttribute(n))){try{r=function(t){return\"true\"===t||\"false\"!==t&&(\"null\"===t?null:t===+t+\"\"?+t:Z.test(t)?JSON.parse(t):t)}(r)}catch(t){}J.set(t,e,r)}else r=void 0;return r}x.extend({hasData:function(t){return J.hasData(t)||$.hasData(t)},data:function(t,e,r){return J.access(t,e,r)},removeData:function(t,e){J.remove(t,e)},_data:function(t,e,r){return $.access(t,e,r)},_removeData:function(t,e){$.remove(t,e)}}),x.fn.extend({data:function(t,e){var r,n,i,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(i=J.get(o),1===o.nodeType&&!$.get(o,\"hasDataAttrs\"))){for(r=s.length;r--;)s[r]&&0===(n=s[r].name).indexOf(\"data-\")&&(n=q(n.slice(5)),K(o,n,i[n]));$.set(o,\"hasDataAttrs\",!0)}return i}return\"object\"==typeof t?this.each(function(){J.set(this,t)}):B(this,function(e){var r;if(o&&void 0===e)return void 0!==(r=J.get(o,t))?r:void 0!==(r=K(o,t))?r:void 0;this.each(function(){J.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){J.remove(this,t)})}}),x.extend({queue:function(t,e,r){var n;if(t)return n=$.get(t,e=(e||\"fx\")+\"queue\"),r&&(!n||Array.isArray(r)?n=$.access(t,e,x.makeArray(r)):n.push(r)),n||[]},dequeue:function(t,e){var r=x.queue(t,e=e||\"fx\"),n=r.length,i=r.shift(),o=x._queueHooks(t,e);\"inprogress\"===i&&(i=r.shift(),n--),i&&(\"fx\"===e&&r.unshift(\"inprogress\"),delete o.stop,i.call(t,function(){x.dequeue(t,e)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var r=e+\"queueHooks\";return $.get(t,r)||$.access(t,r,{empty:x.Callbacks(\"once memory\").add(function(){$.remove(t,[e+\"queue\",r])})})}}),x.fn.extend({queue:function(t,e){var r=2;return\"string\"!=typeof t&&(e=t,t=\"fx\",r--),arguments.length<r?x.queue(this[0],t):void 0===e?this:this.each(function(){var r=x.queue(this,t,e);x._queueHooks(this,t),\"fx\"===t&&\"inprogress\"!==r[0]&&x.dequeue(this,t)})},dequeue:function(t){return this.each(function(){x.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||\"fx\",[])},promise:function(t,e){var r,n=1,i=x.Deferred(),o=this,s=this.length,a=function(){--n||i.resolveWith(o,[o])};for(\"string\"!=typeof t&&(e=t,t=void 0),t=t||\"fx\";s--;)(r=$.get(o[s],t+\"queueHooks\"))&&r.empty&&(n++,r.empty.add(a));return a(),i.promise(e)}});var tt=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,et=new RegExp(\"^(?:([+-])=|)(\"+tt+\")([a-z%]*)$\",\"i\"),rt=[\"Top\",\"Right\",\"Bottom\",\"Left\"],nt=function(t,e){return\"none\"===(t=e||t).style.display||\"\"===t.style.display&&x.contains(t.ownerDocument,t)&&\"none\"===x.css(t,\"display\")},it=function(t,e,r,n){var i,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];for(o in i=r.apply(t,n||[]),e)t.style[o]=s[o];return i};function ot(t,e,r,n){var i,o,s=20,a=n?function(){return n.cur()}:function(){return x.css(t,e,\"\")},u=a(),c=r&&r[3]||(x.cssNumber[e]?\"\":\"px\"),l=(x.cssNumber[e]||\"px\"!==c&&+u)&&et.exec(x.css(t,e));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;s--;)x.style(t,e,l+c),(1-o)*(1-(o=a()/u||.5))<=0&&(s=0),l/=o;x.style(t,e,(l*=2)+c),r=r||[]}return r&&(l=+l||+u||0,i=r[1]?l+(r[1]+1)*r[2]:+r[2],n&&(n.unit=c,n.start=l,n.end=i)),i}var st={};function at(t){var e,r=t.ownerDocument,n=t.nodeName,i=st[n];return i||(e=r.body.appendChild(r.createElement(n)),i=x.css(e,\"display\"),e.parentNode.removeChild(e),\"none\"===i&&(i=\"block\"),st[n]=i,i)}function ut(t,e){for(var r,n,i=[],o=0,s=t.length;o<s;o++)(n=t[o]).style&&(r=n.style.display,e?(\"none\"===r&&(i[o]=$.get(n,\"display\")||null,i[o]||(n.style.display=\"\")),\"\"===n.style.display&&nt(n)&&(i[o]=at(n))):\"none\"!==r&&(i[o]=\"none\",$.set(n,\"display\",r)));for(o=0;o<s;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}x.fn.extend({show:function(){return ut(this,!0)},hide:function(){return ut(this)},toggle:function(t){return\"boolean\"==typeof t?t?this.show():this.hide():this.each(function(){nt(this)?x(this).show():x(this).hide()})}});var ct=/^(?:checkbox|radio)$/i,lt=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]+)/i,ht=/^$|^module$|\\/(?:java|ecma)script/i,ft={option:[1,\"<select multiple='multiple'>\",\"</select>\"],thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};function dt(t,e){var r;return r=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||\"*\"):void 0!==t.querySelectorAll?t.querySelectorAll(e||\"*\"):[],void 0===e||e&&A(t,e)?x.merge([t],r):r}function pt(t,e){for(var r=0,n=t.length;r<n;r++)$.set(t[r],\"globalEval\",!e||$.get(e[r],\"globalEval\"))}ft.optgroup=ft.option,ft.tbody=ft.tfoot=ft.colgroup=ft.caption=ft.thead,ft.th=ft.td;var mt,gt,vt=/<|&#?\\w+;/;function yt(t,e,r,n,i){for(var o,s,a,u,c,l,h=e.createDocumentFragment(),f=[],d=0,p=t.length;d<p;d++)if((o=t[d])||0===o)if(\"object\"===w(o))x.merge(f,o.nodeType?[o]:o);else if(vt.test(o)){for(s=s||h.appendChild(e.createElement(\"div\")),a=(lt.exec(o)||[\"\",\"\"])[1].toLowerCase(),s.innerHTML=(u=ft[a]||ft._default)[1]+x.htmlPrefilter(o)+u[2],l=u[0];l--;)s=s.lastChild;x.merge(f,s.childNodes),(s=h.firstChild).textContent=\"\"}else f.push(e.createTextNode(o));for(h.textContent=\"\",d=0;o=f[d++];)if(n&&x.inArray(o,n)>-1)i&&i.push(o);else if(c=x.contains(o.ownerDocument,o),s=dt(h.appendChild(o),\"script\"),c&&pt(s),r)for(l=0;o=s[l++];)ht.test(o.type||\"\")&&r.push(o);return h}mt=n.createDocumentFragment().appendChild(n.createElement(\"div\")),(gt=n.createElement(\"input\")).setAttribute(\"type\",\"radio\"),gt.setAttribute(\"checked\",\"checked\"),gt.setAttribute(\"name\",\"t\"),mt.appendChild(gt),p.checkClone=mt.cloneNode(!0).cloneNode(!0).lastChild.checked,mt.innerHTML=\"<textarea>x</textarea>\",p.noCloneChecked=!!mt.cloneNode(!0).lastChild.defaultValue;var wt=n.documentElement,xt=/^key/,bt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_t=/^([^.]*)(?:\\.(.+)|)/;function Mt(){return!0}function St(){return!1}function Et(){try{return n.activeElement}catch(t){}}function Tt(t,e,r,n,i,o){var s,a;if(\"object\"==typeof e){for(a in\"string\"!=typeof r&&(n=n||r,r=void 0),e)Tt(t,a,r,n,e[a],o);return t}if(null==n&&null==i?(i=r,n=r=void 0):null==i&&(\"string\"==typeof r?(i=n,n=void 0):(i=n,n=r,r=void 0)),!1===i)i=St;else if(!i)return t;return 1===o&&(s=i,(i=function(t){return x().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=x.guid++)),t.each(function(){x.event.add(this,e,i,n,r)})}x.event={global:{},add:function(t,e,r,n,i){var o,s,a,u,c,l,h,f,d,p,m,g=$.get(t);if(g)for(r.handler&&(r=(o=r).handler,i=o.selector),i&&x.find.matchesSelector(wt,i),r.guid||(r.guid=x.guid++),(u=g.events)||(u=g.events={}),(s=g.handle)||(s=g.handle=function(e){return void 0!==x&&x.event.triggered!==e.type?x.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||\"\").match(N)||[\"\"]).length;c--;)d=m=(a=_t.exec(e[c])||[])[1],p=(a[2]||\"\").split(\".\").sort(),d&&(h=x.event.special[d]||{},h=x.event.special[d=(i?h.delegateType:h.bindType)||d]||{},l=x.extend({type:d,origType:m,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&x.expr.match.needsContext.test(i),namespace:p.join(\".\")},o),(f=u[d])||((f=u[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,n,p,s)||t.addEventListener&&t.addEventListener(d,s)),h.add&&(h.add.call(t,l),l.handler.guid||(l.handler.guid=r.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),x.event.global[d]=!0)},remove:function(t,e,r,n,i){var o,s,a,u,c,l,h,f,d,p,m,g=$.hasData(t)&&$.get(t);if(g&&(u=g.events)){for(c=(e=(e||\"\").match(N)||[\"\"]).length;c--;)if(d=m=(a=_t.exec(e[c])||[])[1],p=(a[2]||\"\").split(\".\").sort(),d){for(h=x.event.special[d]||{},f=u[d=(n?h.delegateType:h.bindType)||d]||[],a=a[2]&&new RegExp(\"(^|\\\\.)\"+p.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),s=o=f.length;o--;)l=f[o],!i&&m!==l.origType||r&&r.guid!==l.guid||a&&!a.test(l.namespace)||n&&n!==l.selector&&(\"**\"!==n||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(t,l));s&&!f.length&&(h.teardown&&!1!==h.teardown.call(t,p,g.handle)||x.removeEvent(t,d,g.handle),delete u[d])}else for(d in u)x.event.remove(t,d+e[c],r,n,!0);x.isEmptyObject(u)&&$.remove(t,\"handle events\")}},dispatch:function(t){var e,r,n,i,o,s,a=x.event.fix(t),u=new Array(arguments.length),c=($.get(this,\"events\")||{})[a.type]||[],l=x.event.special[a.type]||{};for(u[0]=a,e=1;e<arguments.length;e++)u[e]=arguments[e];if(a.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,a)){for(s=x.event.handlers.call(this,a,c),e=0;(i=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=i.elem,r=0;(o=i.handlers[r++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(n=((x.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(a.result=n)&&(a.preventDefault(),a.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,a),a.result}},handlers:function(t,e){var r,n,i,o,s,a=[],u=e.delegateCount,c=t.target;if(u&&c.nodeType&&!(\"click\"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&(\"click\"!==t.type||!0!==c.disabled)){for(o=[],s={},r=0;r<u;r++)void 0===s[i=(n=e[r]).selector+\" \"]&&(s[i]=n.needsContext?x(i,this).index(c)>-1:x.find(i,this,null,[c]).length),s[i]&&o.push(n);o.length&&a.push({elem:c,handlers:o})}return c=this,u<e.length&&a.push({elem:c,handlers:e.slice(u)}),a},addProp:function(t,e){Object.defineProperty(x.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[x.expando]?t:new x.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Et()&&this.focus)return this.focus(),!1},delegateType:\"focusin\"},blur:{trigger:function(){if(this===Et()&&this.blur)return this.blur(),!1},delegateType:\"focusout\"},click:{trigger:function(){if(\"checkbox\"===this.type&&this.click&&A(this,\"input\"))return this.click(),!1},_default:function(t){return A(t.target,\"a\")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},x.removeEvent=function(t,e,r){t.removeEventListener&&t.removeEventListener(e,r)},x.Event=function(t,e){if(!(this instanceof x.Event))return new x.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Mt:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&x.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Mt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Mt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Mt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&xt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&bt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},x.event.addProp),x.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(t,e){x.event.special[t]={delegateType:e,bindType:e,handle:function(t){var r,n=t.relatedTarget,i=t.handleObj;return n&&(n===this||x.contains(this,n))||(t.type=i.origType,r=i.handler.apply(this,arguments),t.type=e),r}}}),x.fn.extend({on:function(t,e,r,n){return Tt(this,t,e,r,n)},one:function(t,e,r,n){return Tt(this,t,e,r,n,1)},off:function(t,e,r){var n,i;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,x(t.delegateTarget).off(n.namespace?n.origType+\".\"+n.namespace:n.origType,n.selector,n.handler),this;if(\"object\"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&\"function\"!=typeof e||(r=e,e=void 0),!1===r&&(r=St),this.each(function(){x.event.remove(this,t,r,e)})}});var At=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)[^>]*)\\/>/gi,Rt=/<script|<style|<link/i,kt=/checked\\s*(?:[^=]|=\\s*.checked.)/i,Ct=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;function Lt(t,e){return A(t,\"table\")&&A(11!==e.nodeType?e:e.firstChild,\"tr\")&&x(t).children(\"tbody\")[0]||t}function Pt(t){return t.type=(null!==t.getAttribute(\"type\"))+\"/\"+t.type,t}function Dt(t){return\"true/\"===(t.type||\"\").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute(\"type\"),t}function Ot(t,e){var r,n,i,o,s,a,u,c;if(1===e.nodeType){if($.hasData(t)&&(o=$.access(t),s=$.set(e,o),c=o.events))for(i in delete s.handle,s.events={},c)for(r=0,n=c[i].length;r<n;r++)x.event.add(e,i,c[i][r]);J.hasData(t)&&(a=J.access(t),u=x.extend({},a),J.set(e,u))}}function Nt(t,e,r,n){e=s.apply([],e);var i,o,a,u,c,l,h=0,f=t.length,d=f-1,g=e[0],v=m(g);if(v||f>1&&\"string\"==typeof g&&!p.checkClone&&kt.test(g))return t.each(function(i){var o=t.eq(i);v&&(e[0]=g.call(this,i,o.html())),Nt(o,e,r,n)});if(f&&(o=(i=yt(e,t[0].ownerDocument,!1,t,n)).firstChild,1===i.childNodes.length&&(i=o),o||n)){for(u=(a=x.map(dt(i,\"script\"),Pt)).length;h<f;h++)c=i,h!==d&&(c=x.clone(c,!0,!0),u&&x.merge(a,dt(c,\"script\"))),r.call(t[h],c,h);if(u)for(l=a[a.length-1].ownerDocument,x.map(a,Dt),h=0;h<u;h++)ht.test((c=a[h]).type||\"\")&&!$.access(c,\"globalEval\")&&x.contains(l,c)&&(c.src&&\"module\"!==(c.type||\"\").toLowerCase()?x._evalUrl&&x._evalUrl(c.src):y(c.textContent.replace(Ct,\"\"),l,c))}return t}function It(t,e,r){for(var n,i=e?x.filter(e,t):t,o=0;null!=(n=i[o]);o++)r||1!==n.nodeType||x.cleanData(dt(n)),n.parentNode&&(r&&x.contains(n.ownerDocument,n)&&pt(dt(n,\"script\")),n.parentNode.removeChild(n));return t}x.extend({htmlPrefilter:function(t){return t.replace(At,\"<$1></$2>\")},clone:function(t,e,r){var n,i,o,s,a,u,c,l=t.cloneNode(!0),h=x.contains(t.ownerDocument,t);if(!(p.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||x.isXMLDoc(t)))for(s=dt(l),n=0,i=(o=dt(t)).length;n<i;n++)a=o[n],\"input\"===(c=(u=s[n]).nodeName.toLowerCase())&&ct.test(a.type)?u.checked=a.checked:\"input\"!==c&&\"textarea\"!==c||(u.defaultValue=a.defaultValue);if(e)if(r)for(o=o||dt(t),s=s||dt(l),n=0,i=o.length;n<i;n++)Ot(o[n],s[n]);else Ot(t,l);return(s=dt(l,\"script\")).length>0&&pt(s,!h&&dt(t,\"script\")),l},cleanData:function(t){for(var e,r,n,i=x.event.special,o=0;void 0!==(r=t[o]);o++)if(Y(r)){if(e=r[$.expando]){if(e.events)for(n in e.events)i[n]?x.event.remove(r,n):x.removeEvent(r,n,e.handle);r[$.expando]=void 0}r[J.expando]&&(r[J.expando]=void 0)}}}),x.fn.extend({detach:function(t){return It(this,t,!0)},remove:function(t){return It(this,t)},text:function(t){return B(this,function(t){return void 0===t?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Nt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Lt(this,t).appendChild(t)})},prepend:function(){return Nt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Lt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Nt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Nt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(x.cleanData(dt(t,!1)),t.textContent=\"\");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return x.clone(this,t,e)})},html:function(t){return B(this,function(t){var e=this[0]||{},r=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if(\"string\"==typeof t&&!Rt.test(t)&&!ft[(lt.exec(t)||[\"\",\"\"])[1].toLowerCase()]){t=x.htmlPrefilter(t);try{for(;r<n;r++)1===(e=this[r]||{}).nodeType&&(x.cleanData(dt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Nt(this,arguments,function(e){var r=this.parentNode;x.inArray(this,t)<0&&(x.cleanData(dt(this)),r&&r.replaceChild(e,this))},t)}}),x.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(t,e){x.fn[t]=function(t){for(var r,n=[],i=x(t),o=i.length-1,s=0;s<=o;s++)r=s===o?this:this.clone(!0),x(i[s])[e](r),a.apply(n,r.get());return this.pushStack(n)}});var Ft=new RegExp(\"^(\"+tt+\")(?!px)[a-z%]+$\",\"i\"),zt=function(e){var r=e.ownerDocument.defaultView;return r&&r.opener||(r=t),r.getComputedStyle(e)},Ut=new RegExp(rt.join(\"|\"),\"i\");function jt(t,e,r){var n,i,o,s,a=t.style;return(r=r||zt(t))&&(\"\"!==(s=r.getPropertyValue(e)||r[e])||x.contains(t.ownerDocument,t)||(s=x.style(t,e)),!p.pixelBoxStyles()&&Ft.test(s)&&Ut.test(e)&&(n=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=r.width,a.width=n,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+\"\":s}function Vt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){c.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",l.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",wt.appendChild(c).appendChild(l);var e=t.getComputedStyle(l);i=\"1%\"!==e.top,u=12===r(e.marginLeft),l.style.right=\"60%\",a=36===r(e.right),o=36===r(e.width),l.style.position=\"absolute\",s=36===l.offsetWidth||\"absolute\",wt.removeChild(c),l=null}}function r(t){return Math.round(parseFloat(t))}var i,o,s,a,u,c=n.createElement(\"div\"),l=n.createElement(\"div\");l.style&&(l.style.backgroundClip=\"content-box\",l.cloneNode(!0).style.backgroundClip=\"\",p.clearCloneStyle=\"content-box\"===l.style.backgroundClip,x.extend(p,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),s}}))}();var Bt=/^(none|table(?!-c[ea]).+)/,Ht=/^--/,Gt={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Wt={letterSpacing:\"0\",fontWeight:\"400\"},qt=[\"Webkit\",\"Moz\",\"ms\"],Yt=n.createElement(\"div\").style;function Xt(t){var e=x.cssProps[t];return e||(e=x.cssProps[t]=function(t){if(t in Yt)return t;for(var e=t[0].toUpperCase()+t.slice(1),r=qt.length;r--;)if((t=qt[r]+e)in Yt)return t}(t)||t),e}function $t(t,e,r){var n=et.exec(e);return n?Math.max(0,n[2]-(r||0))+(n[3]||\"px\"):e}function Jt(t,e,r,n,i,o){var s=\"width\"===e?1:0,a=0,u=0;if(r===(n?\"border\":\"content\"))return 0;for(;s<4;s+=2)\"margin\"===r&&(u+=x.css(t,r+rt[s],!0,i)),n?(\"content\"===r&&(u-=x.css(t,\"padding\"+rt[s],!0,i)),\"margin\"!==r&&(u-=x.css(t,\"border\"+rt[s]+\"Width\",!0,i))):(u+=x.css(t,\"padding\"+rt[s],!0,i),\"padding\"!==r?u+=x.css(t,\"border\"+rt[s]+\"Width\",!0,i):a+=x.css(t,\"border\"+rt[s]+\"Width\",!0,i));return!n&&o>=0&&(u+=Math.max(0,Math.ceil(t[\"offset\"+e[0].toUpperCase()+e.slice(1)]-o-u-a-.5))),u}function Zt(t,e,r){var n=zt(t),i=jt(t,e,n),o=\"border-box\"===x.css(t,\"boxSizing\",!1,n),s=o;if(Ft.test(i)){if(!r)return i;i=\"auto\"}return s=s&&(p.boxSizingReliable()||i===t.style[e]),(\"auto\"===i||!parseFloat(i)&&\"inline\"===x.css(t,\"display\",!1,n))&&(i=t[\"offset\"+e[0].toUpperCase()+e.slice(1)],s=!0),(i=parseFloat(i)||0)+Jt(t,e,r||(o?\"border\":\"content\"),s,n,i)+\"px\"}function Qt(t,e,r,n,i){return new Qt.prototype.init(t,e,r,n,i)}x.extend({cssHooks:{opacity:{get:function(t,e){if(e){var r=jt(t,\"opacity\");return\"\"===r?\"1\":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,r,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=q(e),u=Ht.test(e),c=t.style;if(u||(e=Xt(a)),s=x.cssHooks[e]||x.cssHooks[a],void 0===r)return s&&\"get\"in s&&void 0!==(i=s.get(t,!1,n))?i:c[e];\"string\"==(o=typeof r)&&(i=et.exec(r))&&i[1]&&(r=ot(t,e,i),o=\"number\"),null!=r&&r==r&&(\"number\"===o&&(r+=i&&i[3]||(x.cssNumber[a]?\"\":\"px\")),p.clearCloneStyle||\"\"!==r||0!==e.indexOf(\"background\")||(c[e]=\"inherit\"),s&&\"set\"in s&&void 0===(r=s.set(t,r,n))||(u?c.setProperty(e,r):c[e]=r))}},css:function(t,e,r,n){var i,o,s,a=q(e);return Ht.test(e)||(e=Xt(a)),(s=x.cssHooks[e]||x.cssHooks[a])&&\"get\"in s&&(i=s.get(t,!0,r)),void 0===i&&(i=jt(t,e,n)),\"normal\"===i&&e in Wt&&(i=Wt[e]),\"\"===r||r?(o=parseFloat(i),!0===r||isFinite(o)?o||0:i):i}}),x.each([\"height\",\"width\"],function(t,e){x.cssHooks[e]={get:function(t,r,n){if(r)return!Bt.test(x.css(t,\"display\"))||t.getClientRects().length&&t.getBoundingClientRect().width?Zt(t,e,n):it(t,Gt,function(){return Zt(t,e,n)})},set:function(t,r,n){var i,o=zt(t),s=\"border-box\"===x.css(t,\"boxSizing\",!1,o),a=n&&Jt(t,e,n,s,o);return s&&p.scrollboxSize()===o.position&&(a-=Math.ceil(t[\"offset\"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-Jt(t,e,\"border\",!1,o)-.5)),a&&(i=et.exec(r))&&\"px\"!==(i[3]||\"px\")&&(t.style[e]=r,r=x.css(t,e)),$t(0,r,a)}}}),x.cssHooks.marginLeft=Vt(p.reliableMarginLeft,function(t,e){if(e)return(parseFloat(jt(t,\"marginLeft\"))||t.getBoundingClientRect().left-it(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+\"px\"}),x.each({margin:\"\",padding:\"\",border:\"Width\"},function(t,e){x.cssHooks[t+e]={expand:function(r){for(var n=0,i={},o=\"string\"==typeof r?r.split(\" \"):[r];n<4;n++)i[t+rt[n]+e]=o[n]||o[n-2]||o[0];return i}},\"margin\"!==t&&(x.cssHooks[t+e].set=$t)}),x.fn.extend({css:function(t,e){return B(this,function(t,e,r){var n,i,o={},s=0;if(Array.isArray(e)){for(n=zt(t),i=e.length;s<i;s++)o[e[s]]=x.css(t,e[s],!1,n);return o}return void 0!==r?x.style(t,e,r):x.css(t,e)},t,e,arguments.length>1)}}),x.Tween=Qt,(Qt.prototype={constructor:Qt,init:function(t,e,r,n,i,o){this.elem=t,this.prop=r,this.easing=i||x.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(x.cssNumber[r]?\"\":\"px\")},cur:function(){var t=Qt.propHooks[this.prop];return t&&t.get?t.get(this):Qt.propHooks._default.get(this)},run:function(t){var e,r=Qt.propHooks[this.prop];return this.pos=e=this.options.duration?x.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Qt.propHooks._default.set(this),this}}).init.prototype=Qt.prototype,(Qt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=x.css(t.elem,t.prop,\"\"))&&\"auto\"!==e?e:0},set:function(t){x.fx.step[t.prop]?x.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[x.cssProps[t.prop]]&&!x.cssHooks[t.prop]?t.elem[t.prop]=t.now:x.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=Qt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},x.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:\"swing\"},x.fx=Qt.prototype.init,x.fx.step={};var Kt,te,ee=/^(?:toggle|show|hide)$/,re=/queueHooks$/;function ne(){te&&(!1===n.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(ne):t.setTimeout(ne,x.fx.interval),x.fx.tick())}function ie(){return t.setTimeout(function(){Kt=void 0}),Kt=Date.now()}function oe(t,e){var r,n=0,i={height:t};for(e=e?1:0;n<4;n+=2-e)i[\"margin\"+(r=rt[n])]=i[\"padding\"+r]=t;return e&&(i.opacity=i.width=t),i}function se(t,e,r){for(var n,i=(ae.tweeners[e]||[]).concat(ae.tweeners[\"*\"]),o=0,s=i.length;o<s;o++)if(n=i[o].call(r,e,t))return n}function ae(t,e,r){var n,i,o=0,s=ae.prefilters.length,a=x.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=Kt||ie(),r=Math.max(0,c.startTime+c.duration-e),n=1-(r/c.duration||0),o=0,s=c.tweens.length;o<s;o++)c.tweens[o].run(n);return a.notifyWith(t,[c,n,r]),n<1&&s?r:(s||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:x.extend({},e),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},r),originalProperties:e,originalOptions:r,startTime:Kt||ie(),duration:r.duration,tweens:[],createTween:function(e,r){var n=x.Tween(t,c.opts,e,r,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var r=0,n=e?c.tweens.length:0;if(i)return this;for(i=!0;r<n;r++)c.tweens[r].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),l=c.props;for(function(t,e){var r,n,i,o,s;for(r in t)if(i=e[n=q(r)],o=t[r],Array.isArray(o)&&(i=o[1],o=t[r]=o[0]),r!==n&&(t[n]=o,delete t[r]),(s=x.cssHooks[n])&&\"expand\"in s)for(r in o=s.expand(o),delete t[n],o)r in t||(t[r]=o[r],e[r]=i);else e[n]=i}(l,c.opts.specialEasing);o<s;o++)if(n=ae.prefilters[o].call(c,t,l,c.opts))return m(n.stop)&&(x._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return x.map(l,se,c),m(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),x.fx.timer(x.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c}x.Animation=x.extend(ae,{tweeners:{\"*\":[function(t,e){var r=this.createTween(t,e);return ot(r.elem,t,et.exec(e),r),r}]},tweener:function(t,e){m(t)?(e=t,t=[\"*\"]):t=t.match(N);for(var r,n=0,i=t.length;n<i;n++)(ae.tweeners[r=t[n]]=ae.tweeners[r]||[]).unshift(e)},prefilters:[function(t,e,r){var n,i,o,s,a,u,c,l,h=\"width\"in e||\"height\"in e,f=this,d={},p=t.style,m=t.nodeType&&nt(t),g=$.get(t,\"fxshow\");for(n in r.queue||(null==(s=x._queueHooks(t,\"fx\")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,x.queue(t,\"fx\").length||s.empty.fire()})})),e)if(ee.test(i=e[n])){if(delete e[n],o=o||\"toggle\"===i,i===(m?\"hide\":\"show\")){if(\"show\"!==i||!g||void 0===g[n])continue;m=!0}d[n]=g&&g[n]||x.style(t,n)}if((u=!x.isEmptyObject(e))||!x.isEmptyObject(d))for(n in h&&1===t.nodeType&&(r.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=g&&g.display)&&(c=$.get(t,\"display\")),\"none\"===(l=x.css(t,\"display\"))&&(c?l=c:(ut([t],!0),c=t.style.display||c,l=x.css(t,\"display\"),ut([t]))),(\"inline\"===l||\"inline-block\"===l&&null!=c)&&\"none\"===x.css(t,\"float\")&&(u||(f.done(function(){p.display=c}),null==c&&(c=\"none\"===(l=p.display)?\"\":l)),p.display=\"inline-block\")),r.overflow&&(p.overflow=\"hidden\",f.always(function(){p.overflow=r.overflow[0],p.overflowX=r.overflow[1],p.overflowY=r.overflow[2]})),u=!1,d)u||(g?\"hidden\"in g&&(m=g.hidden):g=$.access(t,\"fxshow\",{display:c}),o&&(g.hidden=!m),m&&ut([t],!0),f.done(function(){for(n in m||ut([t]),$.remove(t,\"fxshow\"),d)x.style(t,n,d[n])})),u=se(m?g[n]:0,n,f),n in g||(g[n]=u.start,m&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?ae.prefilters.unshift(t):ae.prefilters.push(t)}}),x.speed=function(t,e,r){var n=t&&\"object\"==typeof t?x.extend({},t):{complete:r||!r&&e||m(t)&&t,duration:t,easing:r&&e||e&&!m(e)&&e};return x.fx.off?n.duration=0:\"number\"!=typeof n.duration&&(n.duration=n.duration in x.fx.speeds?x.fx.speeds[n.duration]:x.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue=\"fx\"),n.old=n.complete,n.complete=function(){m(n.old)&&n.old.call(this),n.queue&&x.dequeue(this,n.queue)},n},x.fn.extend({fadeTo:function(t,e,r,n){return this.filter(nt).css(\"opacity\",0).show().end().animate({opacity:e},t,r,n)},animate:function(t,e,r,n){var i=x.isEmptyObject(t),o=x.speed(e,r,n),s=function(){var e=ae(this,x.extend({},t),o);(i||$.get(this,\"finish\"))&&e.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,r){var n=function(t){var e=t.stop;delete t.stop,e(r)};return\"string\"!=typeof t&&(r=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||\"fx\",[]),this.each(function(){var e=!0,i=null!=t&&t+\"queueHooks\",o=x.timers,s=$.get(this);if(i)s[i]&&s[i].stop&&n(s[i]);else for(i in s)s[i]&&s[i].stop&&re.test(i)&&n(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(r),e=!1,o.splice(i,1));!e&&r||x.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||\"fx\"),this.each(function(){var e,r=$.get(this),n=r[t+\"queue\"],i=r[t+\"queueHooks\"],o=x.timers,s=n?n.length:0;for(r.finish=!0,x.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete r.finish})}}),x.each([\"toggle\",\"show\",\"hide\"],function(t,e){var r=x.fn[e];x.fn[e]=function(t,n,i){return null==t||\"boolean\"==typeof t?r.apply(this,arguments):this.animate(oe(e,!0),t,n,i)}}),x.each({slideDown:oe(\"show\"),slideUp:oe(\"hide\"),slideToggle:oe(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(t,e){x.fn[t]=function(t,r,n){return this.animate(e,t,r,n)}}),x.timers=[],x.fx.tick=function(){var t,e=0,r=x.timers;for(Kt=Date.now();e<r.length;e++)(t=r[e])()||r[e]!==t||r.splice(e--,1);r.length||x.fx.stop(),Kt=void 0},x.fx.timer=function(t){x.timers.push(t),x.fx.start()},x.fx.interval=13,x.fx.start=function(){te||(te=!0,ne())},x.fx.stop=function(){te=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(e,r){return e=x.fx&&x.fx.speeds[e]||e,this.queue(r=r||\"fx\",function(r,n){var i=t.setTimeout(r,e);n.stop=function(){t.clearTimeout(i)}})},function(){var t=n.createElement(\"input\"),e=n.createElement(\"select\").appendChild(n.createElement(\"option\"));t.type=\"checkbox\",p.checkOn=\"\"!==t.value,p.optSelected=e.selected,(t=n.createElement(\"input\")).value=\"t\",t.type=\"radio\",p.radioValue=\"t\"===t.value}();var ue,ce=x.expr.attrHandle;x.fn.extend({attr:function(t,e){return B(this,x.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){x.removeAttr(this,t)})}}),x.extend({attr:function(t,e,r){var n,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?x.prop(t,e,r):(1===o&&x.isXMLDoc(t)||(i=x.attrHooks[e.toLowerCase()]||(x.expr.match.bool.test(e)?ue:void 0)),void 0!==r?null===r?void x.removeAttr(t,e):i&&\"set\"in i&&void 0!==(n=i.set(t,r,e))?n:(t.setAttribute(e,r+\"\"),r):i&&\"get\"in i&&null!==(n=i.get(t,e))?n:null==(n=x.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&\"radio\"===e&&A(t,\"input\")){var r=t.value;return t.setAttribute(\"type\",e),r&&(t.value=r),e}}}},removeAttr:function(t,e){var r,n=0,i=e&&e.match(N);if(i&&1===t.nodeType)for(;r=i[n++];)t.removeAttribute(r)}}),ue={set:function(t,e,r){return!1===e?x.removeAttr(t,r):t.setAttribute(r,r),r}},x.each(x.expr.match.bool.source.match(/\\w+/g),function(t,e){var r=ce[e]||x.find.attr;ce[e]=function(t,e,n){var i,o,s=e.toLowerCase();return n||(o=ce[s],ce[s]=i,i=null!=r(t,e,n)?s:null,ce[s]=o),i}});var le=/^(?:input|select|textarea|button)$/i,he=/^(?:a|area)$/i;function fe(t){return(t.match(N)||[]).join(\" \")}function de(t){return t.getAttribute&&t.getAttribute(\"class\")||\"\"}function pe(t){return Array.isArray(t)?t:\"string\"==typeof t&&t.match(N)||[]}x.fn.extend({prop:function(t,e){return B(this,x.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[x.propFix[t]||t]})}}),x.extend({prop:function(t,e,r){var n,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&x.isXMLDoc(t)||(i=x.propHooks[e=x.propFix[e]||e]),void 0!==r?i&&\"set\"in i&&void 0!==(n=i.set(t,r,e))?n:t[e]=r:i&&\"get\"in i&&null!==(n=i.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=x.find.attr(t,\"tabindex\");return e?parseInt(e,10):le.test(t.nodeName)||he.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:\"htmlFor\",class:\"className\"}}),p.optSelected||(x.propHooks.selected={get:function(t){return null},set:function(t){}}),x.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(t){var e,r,n,i,o,s,a,u=0;if(m(t))return this.each(function(e){x(this).addClass(t.call(this,e,de(this)))});if((e=pe(t)).length)for(;r=this[u++];)if(i=de(r),n=1===r.nodeType&&\" \"+fe(i)+\" \"){for(s=0;o=e[s++];)n.indexOf(\" \"+o+\" \")<0&&(n+=o+\" \");i!==(a=fe(n))&&r.setAttribute(\"class\",a)}return this},removeClass:function(t){var e,r,n,i,o,s,a,u=0;if(m(t))return this.each(function(e){x(this).removeClass(t.call(this,e,de(this)))});if(!arguments.length)return this.attr(\"class\",\"\");if((e=pe(t)).length)for(;r=this[u++];)if(i=de(r),n=1===r.nodeType&&\" \"+fe(i)+\" \"){for(s=0;o=e[s++];)for(;n.indexOf(\" \"+o+\" \")>-1;)n=n.replace(\" \"+o+\" \",\" \");i!==(a=fe(n))&&r.setAttribute(\"class\",a)}return this},toggleClass:function(t,e){var r=typeof t,n=\"string\"===r||Array.isArray(t);return\"boolean\"==typeof e&&n?e?this.addClass(t):this.removeClass(t):m(t)?this.each(function(r){x(this).toggleClass(t.call(this,r,de(this),e),e)}):this.each(function(){var e,i,o,s;if(n)for(i=0,o=x(this),s=pe(t);e=s[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&\"boolean\"!==r||((e=de(this))&&$.set(this,\"__className__\",e),this.setAttribute&&this.setAttribute(\"class\",e||!1===t?\"\":$.get(this,\"__className__\")||\"\"))})},hasClass:function(t){var e,r,n=0;for(e=\" \"+t+\" \";r=this[n++];)if(1===r.nodeType&&(\" \"+fe(de(r))+\" \").indexOf(e)>-1)return!0;return!1}});var me=/\\r/g;x.fn.extend({val:function(t){var e,r,n,i=this[0];return arguments.length?(n=m(t),this.each(function(r){var i;1===this.nodeType&&(null==(i=n?t.call(this,r,x(this).val()):t)?i=\"\":\"number\"==typeof i?i+=\"\":Array.isArray(i)&&(i=x.map(i,function(t){return null==t?\"\":t+\"\"})),(e=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&\"set\"in e&&void 0!==e.set(this,i,\"value\")||(this.value=i))})):i?(e=x.valHooks[i.type]||x.valHooks[i.nodeName.toLowerCase()])&&\"get\"in e&&void 0!==(r=e.get(i,\"value\"))?r:\"string\"==typeof(r=i.value)?r.replace(me,\"\"):null==r?\"\":r:void 0}}),x.extend({valHooks:{option:{get:function(t){var e=x.find.attr(t,\"value\");return null!=e?e:fe(x.text(t))}},select:{get:function(t){var e,r,n,i=t.options,o=t.selectedIndex,s=\"select-one\"===t.type,a=s?null:[],u=s?o+1:i.length;for(n=o<0?u:s?o:0;n<u;n++)if(((r=i[n]).selected||n===o)&&!r.disabled&&(!r.parentNode.disabled||!A(r.parentNode,\"optgroup\"))){if(e=x(r).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var r,n,i=t.options,o=x.makeArray(e),s=i.length;s--;)((n=i[s]).selected=x.inArray(x.valHooks.option.get(n),o)>-1)&&(r=!0);return r||(t.selectedIndex=-1),o}}}}),x.each([\"radio\",\"checkbox\"],function(){x.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=x.inArray(x(t).val(),e)>-1}},p.checkOn||(x.valHooks[this].get=function(t){return null===t.getAttribute(\"value\")?\"on\":t.value})}),p.focusin=\"onfocusin\"in t;var ge=/^(?:focusinfocus|focusoutblur)$/,ve=function(t){t.stopPropagation()};x.extend(x.event,{trigger:function(e,r,i,o){var s,a,u,c,l,f,d,p,v=[i||n],y=h.call(e,\"type\")?e.type:e,w=h.call(e,\"namespace\")?e.namespace.split(\".\"):[];if(a=p=u=i=i||n,3!==i.nodeType&&8!==i.nodeType&&!ge.test(y+x.event.triggered)&&(y.indexOf(\".\")>-1&&(y=(w=y.split(\".\")).shift(),w.sort()),l=y.indexOf(\":\")<0&&\"on\"+y,(e=e[x.expando]?e:new x.Event(y,\"object\"==typeof e&&e)).isTrigger=o?2:3,e.namespace=w.join(\".\"),e.rnamespace=e.namespace?new RegExp(\"(^|\\\\.)\"+w.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,e.result=void 0,e.target||(e.target=i),r=null==r?[e]:x.makeArray(r,[e]),d=x.event.special[y]||{},o||!d.trigger||!1!==d.trigger.apply(i,r))){if(!o&&!d.noBubble&&!g(i)){for(ge.test((c=d.delegateType||y)+y)||(a=a.parentNode);a;a=a.parentNode)v.push(a),u=a;u===(i.ownerDocument||n)&&v.push(u.defaultView||u.parentWindow||t)}for(s=0;(a=v[s++])&&!e.isPropagationStopped();)p=a,e.type=s>1?c:d.bindType||y,(f=($.get(a,\"events\")||{})[e.type]&&$.get(a,\"handle\"))&&f.apply(a,r),(f=l&&a[l])&&f.apply&&Y(a)&&(e.result=f.apply(a,r),!1===e.result&&e.preventDefault());return e.type=y,o||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),r)||!Y(i)||l&&m(i[y])&&!g(i)&&((u=i[l])&&(i[l]=null),x.event.triggered=y,e.isPropagationStopped()&&p.addEventListener(y,ve),i[y](),e.isPropagationStopped()&&p.removeEventListener(y,ve),x.event.triggered=void 0,u&&(i[l]=u)),e.result}},simulate:function(t,e,r){var n=x.extend(new x.Event,r,{type:t,isSimulated:!0});x.event.trigger(n,null,e)}}),x.fn.extend({trigger:function(t,e){return this.each(function(){x.event.trigger(t,e,this)})},triggerHandler:function(t,e){var r=this[0];if(r)return x.event.trigger(t,e,r,!0)}}),p.focusin||x.each({focus:\"focusin\",blur:\"focusout\"},function(t,e){var r=function(t){x.event.simulate(e,t.target,x.event.fix(t))};x.event.special[e]={setup:function(){var n=this.ownerDocument||this,i=$.access(n,e);i||n.addEventListener(t,r,!0),$.access(n,e,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=$.access(n,e)-1;i?$.access(n,e,i):(n.removeEventListener(t,r,!0),$.remove(n,e))}}});var ye=t.location,we=Date.now(),xe=/\\?/;x.parseXML=function(e){var r;if(!e||\"string\"!=typeof e)return null;try{r=(new t.DOMParser).parseFromString(e,\"text/xml\")}catch(t){r=void 0}return r&&!r.getElementsByTagName(\"parsererror\").length||x.error(\"Invalid XML: \"+e),r};var be=/\\[\\]$/,_e=/\\r?\\n/g,Me=/^(?:submit|button|image|reset|file)$/i,Se=/^(?:input|select|textarea|keygen)/i;function Ee(t,e,r,n){var i;if(Array.isArray(e))x.each(e,function(e,i){r||be.test(t)?n(t,i):Ee(t+\"[\"+(\"object\"==typeof i&&null!=i?e:\"\")+\"]\",i,r,n)});else if(r||\"object\"!==w(e))n(t,e);else for(i in e)Ee(t+\"[\"+i+\"]\",e[i],r,n)}x.param=function(t,e){var r,n=[],i=function(t,e){var r=m(e)?e():e;n[n.length]=encodeURIComponent(t)+\"=\"+encodeURIComponent(null==r?\"\":r)};if(Array.isArray(t)||t.jquery&&!x.isPlainObject(t))x.each(t,function(){i(this.name,this.value)});else for(r in t)Ee(r,t[r],e,i);return n.join(\"&\")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=x.prop(this,\"elements\");return t?x.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!x(this).is(\":disabled\")&&Se.test(this.nodeName)&&!Me.test(t)&&(this.checked||!ct.test(t))}).map(function(t,e){var r=x(this).val();return null==r?null:Array.isArray(r)?x.map(r,function(t){return{name:e.name,value:t.replace(_e,\"\\r\\n\")}}):{name:e.name,value:r.replace(_e,\"\\r\\n\")}}).get()}});var Te=/%20/g,Ae=/#.*$/,Re=/([?&])_=[^&]*/,ke=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,Ce=/^(?:GET|HEAD)$/,Le=/^\\/\\//,Pe={},De={},Oe=\"*/\".concat(\"*\"),Ne=n.createElement(\"a\");function Ie(t){return function(e,r){\"string\"!=typeof e&&(r=e,e=\"*\");var n,i=0,o=e.toLowerCase().match(N)||[];if(m(r))for(;n=o[i++];)\"+\"===n[0]?(n=n.slice(1)||\"*\",(t[n]=t[n]||[]).unshift(r)):(t[n]=t[n]||[]).push(r)}}function Fe(t,e,r,n){var i={},o=t===De;function s(a){var u;return i[a]=!0,x.each(t[a]||[],function(t,a){var c=a(e,r,n);return\"string\"!=typeof c||o||i[c]?o?!(u=c):void 0:(e.dataTypes.unshift(c),s(c),!1)}),u}return s(e.dataTypes[0])||!i[\"*\"]&&s(\"*\")}function ze(t,e){var r,n,i=x.ajaxSettings.flatOptions||{};for(r in e)void 0!==e[r]&&((i[r]?t:n||(n={}))[r]=e[r]);return n&&x.extend(!0,t,n),t}Ne.href=ye.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ye.href,type:\"GET\",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ye.protocol),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":Oe,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":JSON.parse,\"text xml\":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ze(ze(t,x.ajaxSettings),e):ze(x.ajaxSettings,t)},ajaxPrefilter:Ie(Pe),ajaxTransport:Ie(De),ajax:function(e,r){\"object\"==typeof e&&(r=e,e=void 0);var i,o,s,a,u,c,l,h,f,d,p=x.ajaxSetup({},r=r||{}),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?x(m):x.event,v=x.Deferred(),y=x.Callbacks(\"once memory\"),w=p.statusCode||{},b={},_={},M=\"canceled\",S={readyState:0,getResponseHeader:function(t){var e;if(l){if(!a)for(a={};e=ke.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return l?s:null},setRequestHeader:function(t,e){return null==l&&(t=_[t.toLowerCase()]=_[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==l&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)S.always(t[S.status]);else for(e in t)w[e]=[w[e],t[e]];return this},abort:function(t){var e=t||M;return i&&i.abort(e),E(0,e),this}};if(v.promise(S),p.url=((e||p.url||ye.href)+\"\").replace(Le,ye.protocol+\"//\"),p.type=r.method||r.type||p.method||p.type,p.dataTypes=(p.dataType||\"*\").toLowerCase().match(N)||[\"\"],null==p.crossDomain){c=n.createElement(\"a\");try{c.href=p.url,c.href=c.href,p.crossDomain=Ne.protocol+\"//\"+Ne.host!=c.protocol+\"//\"+c.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&\"string\"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),Fe(Pe,p,r,S),l)return S;for(f in(h=x.event&&p.global)&&0==x.active++&&x.event.trigger(\"ajaxStart\"),p.type=p.type.toUpperCase(),p.hasContent=!Ce.test(p.type),o=p.url.replace(Ae,\"\"),p.hasContent?p.data&&p.processData&&0===(p.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&(p.data=p.data.replace(Te,\"+\")):(d=p.url.slice(o.length),p.data&&(p.processData||\"string\"==typeof p.data)&&(o+=(xe.test(o)?\"&\":\"?\")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Re,\"$1\"),d=(xe.test(o)?\"&\":\"?\")+\"_=\"+we+++d),p.url=o+d),p.ifModified&&(x.lastModified[o]&&S.setRequestHeader(\"If-Modified-Since\",x.lastModified[o]),x.etag[o]&&S.setRequestHeader(\"If-None-Match\",x.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||r.contentType)&&S.setRequestHeader(\"Content-Type\",p.contentType),S.setRequestHeader(\"Accept\",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(\"*\"!==p.dataTypes[0]?\", \"+Oe+\"; q=0.01\":\"\"):p.accepts[\"*\"]),p.headers)S.setRequestHeader(f,p.headers[f]);if(p.beforeSend&&(!1===p.beforeSend.call(m,S,p)||l))return S.abort();if(M=\"abort\",y.add(p.complete),S.done(p.success),S.fail(p.error),i=Fe(De,p,r,S)){if(S.readyState=1,h&&g.trigger(\"ajaxSend\",[S,p]),l)return S;p.async&&p.timeout>0&&(u=t.setTimeout(function(){S.abort(\"timeout\")},p.timeout));try{l=!1,i.send(b,E)}catch(t){if(l)throw t;E(-1,t)}}else E(-1,\"No Transport\");function E(e,r,n,a){var c,f,d,b,_,M=r;l||(l=!0,u&&t.clearTimeout(u),i=void 0,s=a||\"\",S.readyState=e>0?4:0,c=e>=200&&e<300||304===e,n&&(b=function(t,e,r){for(var n,i,o,s,a=t.contents,u=t.dataTypes;\"*\"===u[0];)u.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader(\"Content-Type\"));if(n)for(i in a)if(a[i]&&a[i].test(n)){u.unshift(i);break}if(u[0]in r)o=u[0];else{for(i in r){if(!u[0]||t.converters[i+\" \"+u[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==u[0]&&u.unshift(o),r[o]}(p,S,n)),b=function(t,e,r,n){var i,o,s,a,u,c={},l=t.dataTypes.slice();if(l[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=l.shift();o;)if(t.responseFields[o]&&(r[t.responseFields[o]]=e),!u&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if(\"*\"===o)o=u;else if(\"*\"!==u&&u!==o){if(!(s=c[u+\" \"+o]||c[\"* \"+o]))for(i in c)if((a=i.split(\" \"))[1]===o&&(s=c[u+\" \"+a[0]]||c[\"* \"+a[0]])){!0===s?s=c[i]:!0!==c[i]&&(o=a[0],l.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:\"parsererror\",error:s?t:\"No conversion from \"+u+\" to \"+o}}}return{state:\"success\",data:e}}(p,b,S,c),c?(p.ifModified&&((_=S.getResponseHeader(\"Last-Modified\"))&&(x.lastModified[o]=_),(_=S.getResponseHeader(\"etag\"))&&(x.etag[o]=_)),204===e||\"HEAD\"===p.type?M=\"nocontent\":304===e?M=\"notmodified\":(M=b.state,f=b.data,c=!(d=b.error))):(d=M,!e&&M||(M=\"error\",e<0&&(e=0))),S.status=e,S.statusText=(r||M)+\"\",c?v.resolveWith(m,[f,M,S]):v.rejectWith(m,[S,M,d]),S.statusCode(w),w=void 0,h&&g.trigger(c?\"ajaxSuccess\":\"ajaxError\",[S,p,c?f:d]),y.fireWith(m,[S,M]),h&&(g.trigger(\"ajaxComplete\",[S,p]),--x.active||x.event.trigger(\"ajaxStop\")))}return S},getJSON:function(t,e,r){return x.get(t,e,r,\"json\")},getScript:function(t,e){return x.get(t,void 0,e,\"script\")}}),x.each([\"get\",\"post\"],function(t,e){x[e]=function(t,r,n,i){return m(r)&&(i=i||n,n=r,r=void 0),x.ajax(x.extend({url:t,type:e,dataType:i,data:r,success:n},x.isPlainObject(t)&&t))}}),x._evalUrl=function(t){return x.ajax({url:t,type:\"GET\",dataType:\"script\",cache:!0,async:!1,global:!1,throws:!0})},x.fn.extend({wrapAll:function(t){var e;return this[0]&&(m(t)&&(t=t.call(this[0])),e=x(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return m(t)?this.each(function(e){x(this).wrapInner(t.call(this,e))}):this.each(function(){var e=x(this),r=e.contents();r.length?r.wrapAll(t):e.append(t)})},wrap:function(t){var e=m(t);return this.each(function(r){x(this).wrapAll(e?t.call(this,r):t)})},unwrap:function(t){return this.parent(t).not(\"body\").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(t){return!x.expr.pseudos.visible(t)},x.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Ue={0:200,1223:204},je=x.ajaxSettings.xhr();p.cors=!!je&&\"withCredentials\"in je,p.ajax=je=!!je,x.ajaxTransport(function(e){var r,n;if(p.cors||je&&!e.crossDomain)return{send:function(i,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i[\"X-Requested-With\"]||(i[\"X-Requested-With\"]=\"XMLHttpRequest\"),i)a.setRequestHeader(s,i[s]);r=function(t){return function(){r&&(r=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,\"abort\"===t?a.abort():\"error\"===t?\"number\"!=typeof a.status?o(0,\"error\"):o(a.status,a.statusText):o(Ue[a.status]||a.status,a.statusText,\"text\"!==(a.responseType||\"text\")||\"string\"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=r(),n=a.onerror=a.ontimeout=r(\"error\"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){r&&n()})},r=r(\"abort\");try{a.send(e.hasContent&&e.data||null)}catch(t){if(r)throw t}},abort:function(){r&&r()}}}),x.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),x.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{\"text script\":function(t){return x.globalEval(t),t}}}),x.ajaxPrefilter(\"script\",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type=\"GET\")}),x.ajaxTransport(\"script\",function(t){var e,r;if(t.crossDomain)return{send:function(i,o){e=x(\"<script>\").prop({charset:t.scriptCharset,src:t.url}).on(\"load error\",r=function(t){e.remove(),r=null,t&&o(\"error\"===t.type?404:200,t.type)}),n.head.appendChild(e[0])},abort:function(){r&&r()}}});var Ve,Be=[],He=/(=)\\?(?=&|$)|\\?\\?/;x.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var t=Be.pop()||x.expando+\"_\"+we++;return this[t]=!0,t}}),x.ajaxPrefilter(\"json jsonp\",function(e,r,n){var i,o,s,a=!1!==e.jsonp&&(He.test(e.url)?\"url\":\"string\"==typeof e.data&&0===(e.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&He.test(e.data)&&\"data\");if(a||\"jsonp\"===e.dataTypes[0])return i=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(He,\"$1\"+i):!1!==e.jsonp&&(e.url+=(xe.test(e.url)?\"&\":\"?\")+e.jsonp+\"=\"+i),e.converters[\"script json\"]=function(){return s||x.error(i+\" was not called\"),s[0]},e.dataTypes[0]=\"json\",o=t[i],t[i]=function(){s=arguments},n.always(function(){void 0===o?x(t).removeProp(i):t[i]=o,e[i]&&(e.jsonpCallback=r.jsonpCallback,Be.push(i)),s&&m(o)&&o(s[0]),s=o=void 0}),\"script\"}),p.createHTMLDocument=((Ve=n.implementation.createHTMLDocument(\"\").body).innerHTML=\"<form></form><form></form>\",2===Ve.childNodes.length),x.parseHTML=function(t,e,r){return\"string\"!=typeof t?[]:(\"boolean\"==typeof e&&(r=e,e=!1),e||(p.createHTMLDocument?((i=(e=n.implementation.createHTMLDocument(\"\")).createElement(\"base\")).href=n.location.href,e.head.appendChild(i)):e=n),o=R.exec(t),s=!r&&[],o?[e.createElement(o[1])]:(o=yt([t],e,s),s&&s.length&&x(s).remove(),x.merge([],o.childNodes)));var i,o,s},x.fn.load=function(t,e,r){var n,i,o,s=this,a=t.indexOf(\" \");return a>-1&&(n=fe(t.slice(a)),t=t.slice(0,a)),m(e)?(r=e,e=void 0):e&&\"object\"==typeof e&&(i=\"POST\"),s.length>0&&x.ajax({url:t,type:i||\"GET\",dataType:\"html\",data:e}).done(function(t){o=arguments,s.html(n?x(\"<div>\").append(x.parseHTML(t)).find(n):t)}).always(r&&function(t,e){s.each(function(){r.apply(this,o||[t.responseText,e,t])})}),this},x.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(t,e){x.fn[e]=function(t){return this.on(e,t)}}),x.expr.pseudos.animated=function(t){return x.grep(x.timers,function(e){return t===e.elem}).length},x.offset={setOffset:function(t,e,r){var n,i,o,s,a,u,c=x.css(t,\"position\"),l=x(t),h={};\"static\"===c&&(t.style.position=\"relative\"),a=l.offset(),o=x.css(t,\"top\"),u=x.css(t,\"left\"),(\"absolute\"===c||\"fixed\"===c)&&(o+u).indexOf(\"auto\")>-1?(s=(n=l.position()).top,i=n.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),m(e)&&(e=e.call(t,r,x.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+i),\"using\"in e?e.using.call(t,h):l.css(h)}},x.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){x.offset.setOffset(this,t,e)});var e,r,n=this[0];return n?n.getClientRects().length?{top:(e=n.getBoundingClientRect()).top+(r=n.ownerDocument.defaultView).pageYOffset,left:e.left+r.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,r,n=this[0],i={top:0,left:0};if(\"fixed\"===x.css(n,\"position\"))e=n.getBoundingClientRect();else{for(e=this.offset(),r=n.ownerDocument,t=n.offsetParent||r.documentElement;t&&(t===r.body||t===r.documentElement)&&\"static\"===x.css(t,\"position\");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((i=x(t).offset()).top+=x.css(t,\"borderTopWidth\",!0),i.left+=x.css(t,\"borderLeftWidth\",!0))}return{top:e.top-i.top-x.css(n,\"marginTop\",!0),left:e.left-i.left-x.css(n,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&\"static\"===x.css(t,\"position\");)t=t.offsetParent;return t||wt})}}),x.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(t,e){var r=\"pageYOffset\"===e;x.fn[t]=function(n){return B(this,function(t,n,i){var o;if(g(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[n];o?o.scrollTo(r?o.pageXOffset:i,r?i:o.pageYOffset):t[n]=i},t,n,arguments.length)}}),x.each([\"top\",\"left\"],function(t,e){x.cssHooks[e]=Vt(p.pixelPosition,function(t,r){if(r)return r=jt(t,e),Ft.test(r)?x(t).position()[e]+\"px\":r})}),x.each({Height:\"height\",Width:\"width\"},function(t,e){x.each({padding:\"inner\"+t,content:e,\"\":\"outer\"+t},function(r,n){x.fn[n]=function(i,o){var s=arguments.length&&(r||\"boolean\"!=typeof i),a=r||(!0===i||!0===o?\"margin\":\"border\");return B(this,function(e,r,i){var o;return g(e)?0===n.indexOf(\"outer\")?e[\"inner\"+t]:e.document.documentElement[\"client\"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body[\"scroll\"+t],o[\"scroll\"+t],e.body[\"offset\"+t],o[\"offset\"+t],o[\"client\"+t])):void 0===i?x.css(e,r,a):x.style(e,r,i,a)},e,s?i:void 0,s)}})}),x.each(\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\".split(\" \"),function(t,e){x.fn[e]=function(t,r){return arguments.length>0?this.on(e,null,t,r):this.trigger(e)}}),x.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),x.fn.extend({bind:function(t,e,r){return this.on(t,null,e,r)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,r,n){return this.on(e,t,r,n)},undelegate:function(t,e,r){return 1===arguments.length?this.off(t,\"**\"):this.off(e,t||\"**\",r)}}),x.proxy=function(t,e){var r,n,i;if(\"string\"==typeof e&&(r=t[e],e=t,t=r),m(t))return n=o.call(arguments,2),(i=function(){return t.apply(e||this,n.concat(o.call(arguments)))}).guid=t.guid=t.guid||x.guid++,i},x.holdReady=function(t){t?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=A,x.isFunction=m,x.isWindow=g,x.camelCase=q,x.type=w,x.now=Date.now,x.isNumeric=function(t){var e=x.type(t);return(\"number\"===e||\"string\"===e)&&!isNaN(t-parseFloat(t))},\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return x});var Ge=t.jQuery,We=t.$;return x.noConflict=function(e){return t.$===x&&(t.$=We),e&&t.jQuery===x&&(t.jQuery=Ge),x},e||(t.jQuery=t.$=x),x}),function(t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).numbro=t()}(function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u=\"function\"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error(\"Cannot find module '\"+s+\"'\");throw c.code=\"MODULE_NOT_FOUND\",c}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){return i(e[s][1][t]||t)},l,l.exports,t,e,r,n)}return r[s].exports}for(var o=\"function\"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){!function(t){\"use strict\";function r(t){var e=0|t;return t>0||t===e?e:e-1}function n(t){for(var e,r,n=1,i=t.length,o=t[0]+\"\";n<i;){for(e=t[n++]+\"\",r=x-e.length;r--;e=\"0\"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function i(t,e){var r,n,i=t.c,o=e.c,s=t.s,a=e.s,u=t.e,c=e.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=u==c,!i||!o)return n?0:!i^r?1:-1;if(!n)return u>c^r?1:-1;for(a=(u=i.length)<(c=o.length)?u:c,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return u==c?0:u>c^r?1:-1}function o(t,e,r){return(t=l(t))>=e&&t<=r}function s(t){return\"[object Array]\"==Object.prototype.toString.call(t)}function a(t,e,r){for(var n,i,o=[0],s=0,a=t.length;s<a;){for(i=o.length;i--;o[i]*=e);for(o[n=0]+=y.indexOf(t.charAt(s++));n<o.length;n++)o[n]>r-1&&(null==o[n+1]&&(o[n+1]=0),o[n+1]+=o[n]/r|0,o[n]%=r)}return o.reverse()}function u(t,e){return(t.length>1?t.charAt(0)+\".\"+t.slice(1):t)+(e<0?\"e\":\"e+\")+e}function c(t,e){var r,n;if(e<0){for(n=\"0.\";++e;n+=\"0\");t=n+t}else if(++e>(r=t.length)){for(n=\"0\",e-=r;--e;n+=\"0\");t+=n}else e<r&&(t=t.slice(0,e)+\".\"+t.slice(e));return t}function l(t){return(t=parseFloat(t))<0?d(t):p(t)}var h,f=/^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i,d=Math.ceil,p=Math.floor,m=\" not a boolean or binary digit\",g=\"rounding mode\",v=\"number type has more than 15 significant digits\",y=\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_\",w=1e14,x=14,b=9007199254740991,_=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],M=1e7,S=1e9;(h=function t(e){function h(t,e){var r,n,i,o,s,a,u=this;if(!(u instanceof h))return H&&C(26,\"constructor call without new\",t),new h(t,e);if(null!=e&&G(e,2,64,O,\"base\")){if(a=t+\"\",10==(e|=0))return L(u=new h(t instanceof h?t:a),F+u.e+1,z);if((o=\"number\"==typeof t)&&0*t!=0||!new RegExp(\"^-?\"+(r=\"[\"+y.slice(0,e)+\"]+\")+\"(?:\\\\.\"+r+\")?$\",e<37?\"i\":\"\").test(a))return D(u,a,o,e);o?(u.s=1/t<0?(a=a.slice(1),-1):1,H&&a.replace(/^0\\.0*|\\./,\"\").length>15&&C(O,v,t),o=!1):u.s=45===a.charCodeAt(0)?(a=a.slice(1),-1):1,a=E(a,10,e,u.s)}else{if(t instanceof h)return u.s=t.s,u.e=t.e,u.c=(t=t.c)?t.slice():t,void(O=0);if((o=\"number\"==typeof t)&&0*t==0){if(u.s=1/t<0?(t=-t,-1):1,t===~~t){for(n=0,i=t;i>=10;i/=10,n++);return u.e=n,u.c=[t],void(O=0)}a=t+\"\"}else{if(!f.test(a=t+\"\"))return D(u,a,o);u.s=45===a.charCodeAt(0)?(a=a.slice(1),-1):1}}for((n=a.indexOf(\".\"))>-1&&(a=a.replace(\".\",\"\")),(i=a.search(/e/i))>0?(n<0&&(n=i),n+=+a.slice(i+1),a=a.substring(0,i)):n<0&&(n=a.length),i=0;48===a.charCodeAt(i);i++);for(s=a.length;48===a.charCodeAt(--s););if(a=a.slice(i,s+1))if(s=a.length,o&&H&&s>15&&(t>b||t!==p(t))&&C(O,v,u.s*t),(n=n-i-1)>B)u.c=u.e=null;else if(n<V)u.c=[u.e=0];else{if(u.e=n,u.c=[],i=(n+1)%x,n<0&&(i+=x),i<s){for(i&&u.c.push(+a.slice(0,i)),s-=x;i<s;)u.c.push(+a.slice(i,i+=x));a=a.slice(i),i=x-a.length}else i-=s;for(;i--;a+=\"0\");u.c.push(+a)}else u.c=[u.e=0];O=0}function E(t,e,r,i){var o,s,u,l,f,d,p,m=t.indexOf(\".\"),g=F,v=z;for(r<37&&(t=t.toLowerCase()),m>=0&&(u=Y,Y=0,t=t.replace(\".\",\"\"),f=(p=new h(r)).pow(t.length-m),Y=u,p.c=a(c(n(f.c),f.e),10,e),p.e=p.c.length),s=u=(d=a(t,r,e)).length;0==d[--u];d.pop());if(!d[0])return\"0\";if(m<0?--s:(f.c=d,f.e=s,f.s=i,d=(f=P(f,p,g,v,e)).c,l=f.r,s=f.e),m=d[o=s+g+1],u=e/2,l=l||o<0||null!=d[o+1],l=v<4?(null!=m||l)&&(0==v||v==(f.s<0?3:2)):m>u||m==u&&(4==v||l||6==v&&1&d[o-1]||v==(f.s<0?8:7)),o<1||!d[0])t=l?c(\"1\",-g):\"0\";else{if(d.length=o,l)for(--e;++d[--o]>e;)d[o]=0,o||(++s,d=[1].concat(d));for(u=d.length;!d[--u];);for(m=0,t=\"\";m<=u;t+=y.charAt(d[m++]));t=c(t,s)}return t}function T(t,e,r,i){var o,s,a,l,f;if(r=null!=r&&G(r,0,8,i,g)?0|r:z,!t.c)return t.toString();if(o=t.c[0],a=t.e,null==e)f=n(t.c),f=19==i||24==i&&a<=U?u(f,a):c(f,a);else if(s=(t=L(new h(t),e,r)).e,l=(f=n(t.c)).length,19==i||24==i&&(e<=s||s<=U)){for(;l<e;f+=\"0\",l++);f=u(f,s)}else if(e-=a,f=c(f,s),s+1>l){if(--e>0)for(f+=\".\";e--;f+=\"0\");}else if((e+=s-l)>0)for(s+1==l&&(f+=\".\");e--;f+=\"0\");return t.s<0&&o?\"-\"+f:f}function A(t,e){var r,n,i=0;for(s(t[0])&&(t=t[0]),r=new h(t[0]);++i<t.length;){if(!(n=new h(t[i])).s){r=n;break}e.call(r,n)&&(r=n)}return r}function R(t,e,r,n,i){return(t<e||t>r||t!=l(t))&&C(n,(i||\"decimal places\")+(t<e||t>r?\" out of range\":\" not an integer\"),t),!0}function k(t,e,r){for(var n=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,n++);return(r=n+r*x-1)>B?t.c=t.e=null:r<V?t.c=[t.e=0]:(t.e=r,t.c=e),t}function C(t,e,r){var n=new Error([\"new BigNumber\",\"cmp\",\"config\",\"div\",\"divToInt\",\"eq\",\"gt\",\"gte\",\"lt\",\"lte\",\"minus\",\"mod\",\"plus\",\"precision\",\"random\",\"round\",\"shift\",\"times\",\"toDigits\",\"toExponential\",\"toFixed\",\"toFormat\",\"toFraction\",\"pow\",\"toPrecision\",\"toString\",\"BigNumber\"][t]+\"() \"+e+\": \"+r);throw n.name=\"BigNumber Error\",O=0,n}function L(t,e,r,n){var i,o,s,a,u,c,l,h=t.c,f=_;if(h){t:{for(i=1,a=h[0];a>=10;a/=10,i++);if((o=e-i)<0)o+=x,l=(u=h[c=0])/f[i-(s=e)-1]%10|0;else if((c=d((o+1)/x))>=h.length){if(!n)break t;for(;h.length<=c;h.push(0));u=l=0,i=1,s=(o%=x)-x+1}else{for(u=a=h[c],i=1;a>=10;a/=10,i++);l=(s=(o%=x)-x+i)<0?0:u/f[i-s-1]%10|0}if(n=n||e<0||null!=h[c+1]||(s<0?u:u%f[i-s-1]),n=r<4?(l||n)&&(0==r||r==(t.s<0?3:2)):l>5||5==l&&(4==r||n||6==r&&(o>0?s>0?u/f[i-s]:0:h[c-1])%10&1||r==(t.s<0?8:7)),e<1||!h[0])return h.length=0,n?(h[0]=f[(x-(e-=t.e+1)%x)%x],t.e=-e||0):h[0]=t.e=0,t;if(0==o?(h.length=c,a=1,c--):(h.length=c+1,a=f[x-o],h[c]=s>0?p(u/f[i-s]%f[s])*a:0),n)for(;;){if(0==c){for(o=1,s=h[0];s>=10;s/=10,o++);for(s=h[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(t.e++,h[0]==w&&(h[0]=1));break}if(h[c]+=a,h[c]!=w)break;h[c--]=0,a=1}for(o=h.length;0===h[--o];h.pop());}t.e>B?t.c=t.e=null:t.e<V&&(t.c=[t.e=0])}return t}var P,D,O=0,N=h.prototype,I=new h(1),F=20,z=4,U=-7,j=21,V=-1e7,B=1e7,H=!0,G=R,W=!1,q=1,Y=0,X={decimalSeparator:\".\",groupSeparator:\",\",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:\"\\xa0\",fractionGroupSize:0};return h.another=t,h.ROUND_UP=0,h.ROUND_DOWN=1,h.ROUND_CEIL=2,h.ROUND_FLOOR=3,h.ROUND_HALF_UP=4,h.ROUND_HALF_DOWN=5,h.ROUND_HALF_EVEN=6,h.ROUND_HALF_CEIL=7,h.ROUND_HALF_FLOOR=8,h.EUCLID=9,h.config=h.set=function(){var t,e,r=0,n={},i=arguments,a=i[0],u=a&&\"object\"==typeof a?function(){if(a.hasOwnProperty(e))return null!=(t=a[e])}:function(){if(i.length>r)return null!=(t=i[r++])};return u(e=\"DECIMAL_PLACES\")&&G(t,0,S,2,e)&&(F=0|t),n[e]=F,u(e=\"ROUNDING_MODE\")&&G(t,0,8,2,e)&&(z=0|t),n[e]=z,u(e=\"EXPONENTIAL_AT\")&&(s(t)?G(t[0],-S,0,2,e)&&G(t[1],0,S,2,e)&&(U=0|t[0],j=0|t[1]):G(t,-S,S,2,e)&&(U=-(j=0|(t<0?-t:t)))),n[e]=[U,j],u(e=\"RANGE\")&&(s(t)?G(t[0],-S,-1,2,e)&&G(t[1],1,S,2,e)&&(V=0|t[0],B=0|t[1]):G(t,-S,S,2,e)&&(0|t?V=-(B=0|(t<0?-t:t)):H&&C(2,e+\" cannot be zero\",t))),n[e]=[V,B],u(e=\"ERRORS\")&&(t===!!t||1===t||0===t?(O=0,G=(H=!!t)?R:o):H&&C(2,e+m,t)),n[e]=H,u(e=\"CRYPTO\")&&(!0===t||!1===t||1===t||0===t?t?!(t=\"undefined\"==typeof crypto)&&crypto&&(crypto.getRandomValues||crypto.randomBytes)?W=!0:H?C(2,\"crypto unavailable\",t?void 0:crypto):W=!1:W=!1:H&&C(2,e+m,t)),n[e]=W,u(e=\"MODULO_MODE\")&&G(t,0,9,2,e)&&(q=0|t),n[e]=q,u(e=\"POW_PRECISION\")&&G(t,0,S,2,e)&&(Y=0|t),n[e]=Y,u(e=\"FORMAT\")&&(\"object\"==typeof t?X=t:H&&C(2,e+\" not an object\",t)),n[e]=X,n},h.max=function(){return A(arguments,N.lt)},h.min=function(){return A(arguments,N.gt)},h.random=function(){var t=9007199254740992*Math.random()&2097151?function(){return p(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(e){var r,n,i,o,s,a=0,u=[],c=new h(I);if(e=null!=e&&G(e,0,S,14)?0|e:F,o=d(e/x),W)if(crypto.getRandomValues){for(r=crypto.getRandomValues(new Uint32Array(o*=2));a<o;)(s=131072*r[a]+(r[a+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),r[a]=n[0],r[a+1]=n[1]):(u.push(s%1e14),a+=2);a=o/2}else if(crypto.randomBytes){for(r=crypto.randomBytes(o*=7);a<o;)(s=281474976710656*(31&r[a])+1099511627776*r[a+1]+4294967296*r[a+2]+16777216*r[a+3]+(r[a+4]<<16)+(r[a+5]<<8)+r[a+6])>=9e15?crypto.randomBytes(7).copy(r,a):(u.push(s%1e14),a+=7);a=o/7}else W=!1,H&&C(14,\"crypto unavailable\",crypto);if(!W)for(;a<o;)(s=t())<9e15&&(u[a++]=s%1e14);for(o=u[--a],e%=x,o&&e&&(u[a]=p(o/(s=_[x-e]))*s);0===u[a];u.pop(),a--);if(a<0)u=[i=0];else{for(i=-1;0===u[0];u.splice(0,1),i-=x);for(a=1,s=u[0];s>=10;s/=10,a++);a<x&&(i-=x-a)}return c.e=i,c.c=u,c}}(),P=function(){function t(t,e,r){var n,i,o,s,a=0,u=t.length,c=e%M,l=e/M|0;for(t=t.slice();u--;)a=((i=c*(o=t[u]%M)+(n=l*o+(s=t[u]/M|0)*c)%M*M+a)/r|0)+(n/M|0)+l*s,t[u]=i%r;return a&&(t=[a].concat(t)),t}function e(t,e,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,r,n){for(var i=0;r--;)t[r]-=i,t[r]=(i=t[r]<e[r]?1:0)*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(i,o,s,a,u){var c,l,f,d,m,g,v,y,b,_,M,S,E,T,A,R,k,C=i.s==o.s?1:-1,P=i.c,D=o.c;if(!(P&&P[0]&&D&&D[0]))return new h(i.s&&o.s&&(P?!D||P[0]!=D[0]:D)?P&&0==P[0]||!D?0*C:C/0:NaN);for(b=(y=new h(C)).c=[],C=s+(l=i.e-o.e)+1,u||(u=w,l=r(i.e/x)-r(o.e/x),C=C/x|0),f=0;D[f]==(P[f]||0);f++);if(D[f]>(P[f]||0)&&l--,C<0)b.push(1),d=!0;else{for(T=P.length,R=D.length,f=0,C+=2,(m=p(u/(D[0]+1)))>1&&(D=t(D,m,u),P=t(P,m,u),R=D.length,T=P.length),E=R,M=(_=P.slice(0,R)).length;M<R;_[M++]=0);k=D.slice(),k=[0].concat(k),A=D[0],D[1]>=u/2&&A++;do{if(m=0,(c=e(D,_,R,M))<0){if(S=_[0],R!=M&&(S=S*u+(_[1]||0)),(m=p(S/A))>1)for(m>=u&&(m=u-1),v=(g=t(D,m,u)).length,M=_.length;1==e(g,_,v,M);)m--,n(g,R<v?k:D,v,u),v=g.length,c=1;else 0==m&&(c=m=1),v=(g=D.slice()).length;if(v<M&&(g=[0].concat(g)),n(_,g,M,u),M=_.length,-1==c)for(;e(D,_,R,M)<1;)m++,n(_,R<M?k:D,M,u),M=_.length}else 0===c&&(m++,_=[0]);b[f++]=m,_[0]?_[M++]=P[E]||0:(_=[P[E]],M=1)}while((E++<T||null!=_[0])&&C--);d=null!=_[0],b[0]||b.splice(0,1)}if(u==w){for(f=1,C=b[0];C>=10;C/=10,f++);L(y,s+(y.e=f+l*x-1)+1,a,d)}else y.e=l,y.r=+d;return y}}(),D=function(){var t=/^(-?)0([xbo])(?=\\w[\\w.]*$)/i,e=/^([^.]+)\\.$/,r=/^\\.([^.]+)$/,n=/^-?(Infinity|NaN)$/,i=/^\\s*\\+(?=[\\w.])|^\\s+|\\s+$/g;return function(o,s,a,u){var c,l=a?s:s.replace(i,\"\");if(n.test(l))o.s=isNaN(l)?null:l<0?-1:1;else{if(!a&&(l=l.replace(t,function(t,e,r){return c=\"x\"==(r=r.toLowerCase())?16:\"b\"==r?2:8,u&&u!=c?t:e}),u&&(c=u,l=l.replace(e,\"$1\").replace(r,\"0.$1\")),s!=l))return new h(l,c);H&&C(O,\"not a\"+(u?\" base \"+u:\"\")+\" number\",s),o.s=null}o.c=o.e=null,O=0}}(),N.absoluteValue=N.abs=function(){var t=new h(this);return t.s<0&&(t.s=1),t},N.ceil=function(){return L(new h(this),this.e+1,2)},N.comparedTo=N.cmp=function(t,e){return O=1,i(this,new h(t,e))},N.decimalPlaces=N.dp=function(){var t,e,n=this.c;if(!n)return null;if(t=((e=n.length-1)-r(this.e/x))*x,e=n[e])for(;e%10==0;e/=10,t--);return t<0&&(t=0),t},N.dividedBy=N.div=function(t,e){return O=3,P(this,new h(t,e),F,z)},N.dividedToIntegerBy=N.divToInt=function(t,e){return O=4,P(this,new h(t,e),0,1)},N.equals=N.eq=function(t,e){return O=5,0===i(this,new h(t,e))},N.floor=function(){return L(new h(this),this.e+1,3)},N.greaterThan=N.gt=function(t,e){return O=6,i(this,new h(t,e))>0},N.greaterThanOrEqualTo=N.gte=function(t,e){return O=7,1===(e=i(this,new h(t,e)))||0===e},N.isFinite=function(){return!!this.c},N.isInteger=N.isInt=function(){return!!this.c&&r(this.e/x)>this.c.length-2},N.isNaN=function(){return!this.s},N.isNegative=N.isNeg=function(){return this.s<0},N.isZero=function(){return!!this.c&&0==this.c[0]},N.lessThan=N.lt=function(t,e){return O=8,i(this,new h(t,e))<0},N.lessThanOrEqualTo=N.lte=function(t,e){return O=9,-1===(e=i(this,new h(t,e)))||0===e},N.minus=N.sub=function(t,e){var n,i,o,s,a=this,u=a.s;if(O=10,e=(t=new h(t,e)).s,!u||!e)return new h(NaN);if(u!=e)return t.s=-e,a.plus(t);var c=a.e/x,l=t.e/x,f=a.c,d=t.c;if(!c||!l){if(!f||!d)return f?(t.s=-e,t):new h(d?a:NaN);if(!f[0]||!d[0])return d[0]?(t.s=-e,t):new h(f[0]?a:3==z?-0:0)}if(c=r(c),l=r(l),f=f.slice(),u=c-l){for((s=u<0)?(u=-u,o=f):(l=c,o=d),o.reverse(),e=u;e--;o.push(0));o.reverse()}else for(i=(s=(u=f.length)<(e=d.length))?u:e,u=e=0;e<i;e++)if(f[e]!=d[e]){s=f[e]<d[e];break}if(s&&(o=f,f=d,d=o,t.s=-t.s),(e=(i=d.length)-(n=f.length))>0)for(;e--;f[n++]=0);for(e=w-1;i>u;){if(f[--i]<d[i]){for(n=i;n&&!f[--n];f[n]=e);--f[n],f[i]+=w}f[i]-=d[i]}for(;0==f[0];f.splice(0,1),--l);return f[0]?k(t,f,l):(t.s=3==z?-1:1,t.c=[t.e=0],t)},N.modulo=N.mod=function(t,e){var r,n,i=this;return O=11,t=new h(t,e),!i.c||!t.s||t.c&&!t.c[0]?new h(NaN):!t.c||i.c&&!i.c[0]?new h(i):(9==q?(n=t.s,t.s=1,r=P(i,t,0,3),t.s=n,r.s*=n):r=P(i,t,0,q),i.minus(r.times(t)))},N.negated=N.neg=function(){var t=new h(this);return t.s=-t.s||null,t},N.plus=N.add=function(t,e){var n,i=this,o=i.s;if(O=12,e=(t=new h(t,e)).s,!o||!e)return new h(NaN);if(o!=e)return t.s=-e,i.minus(t);var s=i.e/x,a=t.e/x,u=i.c,c=t.c;if(!s||!a){if(!u||!c)return new h(o/0);if(!u[0]||!c[0])return c[0]?t:new h(u[0]?i:0*o)}if(s=r(s),a=r(a),u=u.slice(),o=s-a){for(o>0?(a=s,n=c):(o=-o,n=u),n.reverse();o--;n.push(0));n.reverse()}for((o=u.length)-(e=c.length)<0&&(n=c,c=u,u=n,e=o),o=0;e;)o=(u[--e]=u[e]+c[e]+o)/w|0,u[e]=w===u[e]?0:u[e]%w;return o&&(u=[o].concat(u),++a),k(t,u,a)},N.precision=N.sd=function(t){var e,r,n=this,i=n.c;if(null!=t&&t!==!!t&&1!==t&&0!==t&&(H&&C(13,\"argument\"+m,t),t!=!!t&&(t=null)),!i)return null;if(e=(r=i.length-1)*x+1,r=i[r]){for(;r%10==0;r/=10,e--);for(r=i[0];r>=10;r/=10,e++);}return t&&n.e+1>e&&(e=n.e+1),e},N.round=function(t,e){var r=new h(this);return(null==t||G(t,0,S,15))&&L(r,~~t+this.e+1,null!=e&&G(e,0,8,15,g)?0|e:z),r},N.shift=function(t){var e=this;return G(t,-b,b,16,\"argument\")?e.times(\"1e\"+l(t)):new h(e.c&&e.c[0]&&(t<-b||t>b)?e.s*(t<0?0:1/0):e)},N.squareRoot=N.sqrt=function(){var t,e,i,o,s,a=this,u=a.c,c=a.s,l=a.e,f=F+4,d=new h(\"0.5\");if(1!==c||!u||!u[0])return new h(!c||c<0&&(!u||u[0])?NaN:u?a:1/0);if(0==(c=Math.sqrt(+a))||c==1/0?(((e=n(u)).length+l)%2==0&&(e+=\"0\"),c=Math.sqrt(e),l=r((l+1)/2)-(l<0||l%2),i=new h(e=c==1/0?\"1e\"+l:(e=c.toExponential()).slice(0,e.indexOf(\"e\")+1)+l)):i=new h(c+\"\"),i.c[0])for((c=(l=i.e)+f)<3&&(c=0);;)if(i=d.times((s=i).plus(P(a,s,f,1))),n(s.c).slice(0,c)===(e=n(i.c)).slice(0,c)){if(i.e<l&&--c,\"9999\"!=(e=e.slice(c-3,c+1))&&(o||\"4999\"!=e)){+e&&(+e.slice(1)||\"5\"!=e.charAt(0))||(L(i,i.e+F+2,1),t=!i.times(i).eq(a));break}if(!o&&(L(s,s.e+F+2,0),s.times(s).eq(a))){i=s;break}f+=4,c+=4,o=1}return L(i,i.e+F+1,z,t)},N.times=N.mul=function(t,e){var n,i,o,s,a,u,c,l,f,d,p,m,g,v,y,b=this,_=b.c,S=(O=17,t=new h(t,e)).c;if(!(_&&S&&_[0]&&S[0]))return!b.s||!t.s||_&&!_[0]&&!S||S&&!S[0]&&!_?t.c=t.e=t.s=null:(t.s*=b.s,_&&S?(t.c=[0],t.e=0):t.c=t.e=null),t;for(i=r(b.e/x)+r(t.e/x),t.s*=b.s,(c=_.length)<(d=S.length)&&(g=_,_=S,S=g,o=c,c=d,d=o),o=c+d,g=[];o--;g.push(0));for(v=w,y=M,o=d;--o>=0;){for(n=0,p=S[o]%y,m=S[o]/y|0,s=o+(a=c);s>o;)n=((l=p*(l=_[--a]%y)+(u=m*l+(f=_[a]/y|0)*p)%y*y+g[s]+n)/v|0)+(u/y|0)+m*f,g[s--]=l%v;g[s]=n}return n?++i:g.splice(0,1),k(t,g,i)},N.toDigits=function(t,e){var r=new h(this);return t=null!=t&&G(t,1,S,18,\"precision\")?0|t:null,e=null!=e&&G(e,0,8,18,g)?0|e:z,t?L(r,t,e):r},N.toExponential=function(t,e){return T(this,null!=t&&G(t,0,S,19)?1+~~t:null,e,19)},N.toFixed=function(t,e){return T(this,null!=t&&G(t,0,S,20)?~~t+this.e+1:null,e,20)},N.toFormat=function(t,e){var r=T(this,null!=t&&G(t,0,S,21)?~~t+this.e+1:null,e,21);if(this.c){var n,i=r.split(\".\"),o=+X.groupSize,s=+X.secondaryGroupSize,a=X.groupSeparator,u=i[0],c=i[1],l=this.s<0,h=l?u.slice(1):u,f=h.length;if(s&&(n=o,o=s,s=n,f-=n),o>0&&f>0){for(u=h.substr(0,n=f%o||o);n<f;n+=o)u+=a+h.substr(n,o);s>0&&(u+=a+h.slice(n)),l&&(u=\"-\"+u)}r=c?u+X.decimalSeparator+((s=+X.fractionGroupSize)?c.replace(new RegExp(\"\\\\d{\"+s+\"}\\\\B\",\"g\"),\"$&\"+X.fractionGroupSeparator):c):u}return r},N.toFraction=function(t){var e,r,i,o,s,a,u,c,l,f=H,d=this,p=d.c,m=new h(I),g=r=new h(I),v=u=new h(I);if(null!=t&&(H=!1,a=new h(t),H=f,(f=a.isInt())&&!a.lt(I)||(H&&C(22,\"max denominator \"+(f?\"out of range\":\"not an integer\"),t),t=!f&&a.c&&L(a,a.e+1,1).gte(I)?a:null)),!p)return d.toString();for(l=n(p),o=m.e=l.length-d.e-1,m.c[0]=_[(s=o%x)<0?x+s:s],t=!t||a.cmp(m)>0?o>0?m:g:a,s=B,B=1/0,a=new h(l),u.c[0]=0;c=P(a,m,0,1),1!=(i=r.plus(c.times(v))).cmp(t);)r=v,v=i,g=u.plus(c.times(i=g)),u=i,m=a.minus(c.times(i=m)),a=i;return i=P(t.minus(r),v,0,1),u=u.plus(i.times(g)),r=r.plus(i.times(v)),u.s=g.s=d.s,e=P(g,v,o*=2,z).minus(d).abs().cmp(P(u,r,o,z).minus(d).abs())<1?[g.toString(),v.toString()]:[u.toString(),r.toString()],B=s,e},N.toNumber=function(){return+this},N.toPower=N.pow=function(t,e){var r,n,i,o=p(t<0?-t:+t),s=this;if(null!=e&&(O=23,e=new h(e)),!G(t,-b,b,23,\"exponent\")&&(!isFinite(t)||o>b&&(t/=0)||parseFloat(t)!=t&&!(t=NaN))||0==t)return r=Math.pow(+s,t),new h(e?r%e:r);for(e?t>1&&s.gt(I)&&s.isInt()&&e.gt(I)&&e.isInt()?s=s.mod(e):(i=e,e=null):Y&&(r=d(Y/x+2)),n=new h(I);;){if(o%2){if(!(n=n.times(s)).c)break;r?n.c.length>r&&(n.c.length=r):e&&(n=n.mod(e))}if(!(o=p(o/2)))break;s=s.times(s),r?s.c&&s.c.length>r&&(s.c.length=r):e&&(s=s.mod(e))}return e?n:(t<0&&(n=I.div(n)),i?n.mod(i):r?L(n,Y,z):n)},N.toPrecision=function(t,e){return T(this,null!=t&&G(t,1,S,24,\"precision\")?0|t:null,e,24)},N.toString=function(t){var e,r=this,i=r.s,o=r.e;return null===o?i?(e=\"Infinity\",i<0&&(e=\"-\"+e)):e=\"NaN\":(e=n(r.c),e=null!=t&&G(t,2,64,25,\"base\")?E(c(e,o),0|t,10,i):o<=U||o>=j?u(e,o):c(e,o),i<0&&r.c[0]&&(e=\"-\"+e)),e},N.truncated=N.trunc=function(){return L(new h(this),this.e+1,1)},N.valueOf=N.toJSON=function(){var t,e=this,r=e.e;return null===r?e.toString():(t=n(e.c),t=r<=U||r>=j?u(t,r):c(t,r),e.s<0?\"-\"+t:t)},N.isBigNumber=!0,null!=e&&h.config(e),h}()).default=h.BigNumber=h,void 0!==e&&e.exports?e.exports=h:(t||(t=\"undefined\"!=typeof self?self:Function(\"return this\")()),t.BigNumber=h)}(this)},{}],2:[function(t,e,r){\"use strict\";e.exports={languageTag:\"en-US\",delimiters:{thousands:\",\",decimal:\".\"},abbreviations:{thousand:\"k\",million:\"m\",billion:\"b\",trillion:\"t\"},spaceSeparated:!1,ordinal:function(t){var e=t%10;return 1==~~(t%100/10)?\"th\":1===e?\"st\":2===e?\"nd\":3===e?\"rd\":\"th\"},currency:{symbol:\"$\",position:\"prefix\",code:\"USD\"},currencyFormat:{thousandSeparated:!0,totalLength:4,spaceSeparated:!0},formats:{fourDigits:{totalLength:4,spaceSeparated:!0},fullWithTwoDecimals:{output:\"currency\",thousandSeparated:!0,mantissa:2},fullWithTwoDecimalsNoCurrency:{thousandSeparated:!0,mantissa:2},fullWithNoDecimals:{output:\"currency\",thousandSeparated:!0,mantissa:0}}}},{}],3:[function(t,e,r){\"use strict\";function n(t,e,r){var n=e[0],i=Math.abs(t);if(i>=r){for(var o=1;o<e.length;++o){var s=Math.pow(r,o),a=Math.pow(r,o+1);if(i>=s&&i<a){n=e[o],t/=s;break}}n===e[0]&&(t/=Math.pow(r,e.length-1),n=e[e.length-1])}return{value:t,suffix:n}}function i(t){var e=t.characteristicPrecision,r=void 0===e?0:e,n=t.value.toExponential().split(\"e\"),i=l(n,2),o=i[1],s=+i[0];return r?(1<r&&(s*=Math.pow(10,r-1),o=(o=+o-(r-1))>=0?\"+\"+o:o),{value:s,abbreviation:\"e\"+o}):{value:s,abbreviation:\"e\"+o}}function o(t){for(var e=\"\",r=0;r<t;r++)e+=\"0\";return e}function s(t,e,r,n){if(-1===n)return t;var i=function(t,e){return-1!==t.toString().indexOf(\"e\")?function(t,e){var r=t.toString(),n=r.split(\"e\"),i=l(n,2),s=i[1],a=i[0].split(\".\"),u=l(a,2),c=u[0],h=u[1],f=void 0===h?\"\":h;if(+s>0)r=c+f+o(s-f.length);else{var d=\".\";d=+c<0?\"-0\"+d:\"0\"+d;var p=(o(-s-1)+Math.abs(c)+f).substr(0,e);p.length<e&&(p+=o(e-p.length)),r=d+p}return+s>0&&e>0&&(r+=\".\"+o(e)),r}(t,e):(Math.round(+(t+\"e+\"+e))/Math.pow(10,e)).toFixed(e)}(e,n),s=i.toString().split(\".\"),a=l(s,2),u=a[0],c=a[1];return(void 0===c?\"\":c).match(/^0+$/)&&r?u:i.toString()}function a(t,e,r,n){var i=t,o=i.toString().split(\".\"),s=l(o,2),a=s[0],u=s[1];if(a.match(/^-?0$/)&&r)return u?a.replace(\"0\",\"\")+\".\"+u:a.replace(\"0\",\"\");if(a.length<n)for(var c=n-a.length,h=0;h<c;h++)i=\"0\"+i;return i.toString()}function u(t){var e=t.instance,r=t.providedFormat,n=t.state,o=void 0===n?h:n,u=t.decimalSeparator,c=t.defaults,l=void 0===c?o.currentDefaults():c,f=e._value;if(0===f&&o.hasZeroFormat())return o.getZeroFormat();if(!isFinite(f))return f.toString();var d=Object.assign({},g,l,r),p=d.totalLength,m=p?0:d.characteristic,v=d.optionalCharacteristic,y=d.forceAverage,w=!!p||!!y||d.average,x=p?-1:w&&void 0===r.mantissa?0:d.mantissa,b=!p&&(void 0===r.optionalMantissa?-1===x:d.optionalMantissa),_=d.thousandSeparated,M=d.spaceSeparated,S=d.negative,E=d.forceSign,T=d.exponential,A=\"\";if(w){var R=function(t){var e=t.value,r=t.forceAverage,n=t.abbreviations,i=t.spaceSeparated,o=void 0!==i&&i,s=t.totalLength,a=void 0===s?0:s,u=\"\",c=Math.abs(e),l=-1;if(c>=Math.pow(10,12)&&!r||\"trillion\"===r?(u=n.trillion,e/=Math.pow(10,12)):c<Math.pow(10,12)&&c>=Math.pow(10,9)&&!r||\"billion\"===r?(u=n.billion,e/=Math.pow(10,9)):c<Math.pow(10,9)&&c>=Math.pow(10,6)&&!r||\"million\"===r?(u=n.million,e/=Math.pow(10,6)):(c<Math.pow(10,6)&&c>=Math.pow(10,3)&&!r||\"thousand\"===r)&&(u=n.thousand,e/=Math.pow(10,3)),u&&(u=(o?\" \":\"\")+u),a){var h=e.toString().split(\".\")[0];l=Math.max(a-h.length,0)}return{value:e,abbreviation:u,mantissaPrecision:l}}({value:f,forceAverage:y,abbreviations:o.currentAbbreviations(),spaceSeparated:M,totalLength:p});f=R.value,A+=R.abbreviation,p&&(x=R.mantissaPrecision)}if(T){var k=i({value:f,characteristicPrecision:m});f=k.value,A=k.abbreviation+A}var C=s(f.toString(),f,b,x);return C=function(t,e,r,n,i){var o=n.currentDelimiters(),s=o.thousands;i=i||o.decimal;var a=o.thousandsSize||3,u=t.toString(),c=u.split(\".\")[0],l=u.split(\".\")[1];return r&&(e<0&&(c=c.slice(1)),function(t,e){for(var r=[],n=0,i=c.length;i>0;i--)n===e&&(r.unshift(i),n=0),n++;return r}(0,a).forEach(function(t,e){c=c.slice(0,t+e)+s+c.slice(t+e)}),e<0&&(c=\"-\"+c)),l?c+i+l:c}(C=a(C,0,v,m),f,_,o,u),(w||T)&&(C+=A),(E||f<0)&&(C=function(t,e,r){return 0===e?t:0==+t?t.replace(\"-\",\"\"):e>0?\"+\"+t:\"sign\"===r?t:\"(\"+t.replace(\"-\",\"\")+\")\"}(C,f,S)),C}function c(t,e){if(!t)return e;var r=Object.keys(t);return 1===r.length&&\"output\"===r[0]?e:t}var l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},h=t(\"./globalState\"),f=t(\"./validating\"),d=t(\"./parsing\"),p=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\",\"PB\",\"EB\",\"ZB\",\"YB\"],m={general:{scale:1024,suffixes:p,marker:\"bd\"},binary:{scale:1024,suffixes:[\"B\",\"KiB\",\"MiB\",\"GiB\",\"TiB\",\"PiB\",\"EiB\",\"ZiB\",\"YiB\"],marker:\"b\"},decimal:{scale:1e3,suffixes:p,marker:\"d\"}},g={totalLength:0,characteristic:0,forceAverage:!1,average:!1,mantissa:-1,optionalMantissa:!0,thousandSeparated:!1,spaceSeparated:!1,negative:\"sign\",forceSign:!1};e.exports=function(t){return{format:function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];if(\"string\"==typeof e&&(e=d.parseFormat(e)),!f.validateFormat(e))return\"ERROR: invalid format\";var i=e.prefix||\"\",o=e.postfix||\"\",s=function(t,e,r){switch(e.output){case\"currency\":return function(t,e,r){var n=r.currentCurrency(),i=Object.assign({},g,e),o=void 0,s=\"\",a=!!i.totalLength||!!i.forceAverage||i.average,c=e.currencyPosition||n.position,l=e.currencySymbol||n.symbol;i.spaceSeparated&&(s=\" \"),\"infix\"===c&&(o=s+l+s);var h=u({instance:t,providedFormat:e,state:r,decimalSeparator:o});return\"prefix\"===c&&(h=t._value<0&&\"sign\"===i.negative?\"-\"+s+l+h.slice(1):l+s+h),c&&\"postfix\"!==c||(h=h+(s=a?\"\":s)+l),h}(t,e=c(e,h.currentCurrencyDefaultFormat()),h);case\"percent\":return function(t,e,r,n){var i=e.prefixSymbol,o=u({instance:n(100*t._value),providedFormat:e,state:r}),s=Object.assign({},g,e);return i?\"%\"+(s.spaceSeparated?\" \":\"\")+o:o+(s.spaceSeparated?\" \":\"\")+\"%\"}(t,e=c(e,h.currentPercentageDefaultFormat()),h,r);case\"byte\":return function(t,e,r,i){var o=m[e.base||\"binary\"],s=n(t._value,o.suffixes,o.scale),a=s.suffix;return u({instance:i(s.value),providedFormat:e,state:r,defaults:r.currentByteDefaultFormat()})+(r.currentAbbreviations().spaced?\" \":\"\")+a}(t,e=c(e,h.currentByteDefaultFormat()),h,r);case\"time\":return e=c(e,h.currentTimeDefaultFormat()),function(t){var e=Math.floor(t._value/60/60),r=Math.floor((t._value-60*e*60)/60),n=Math.round(t._value-60*e*60-60*r);return e+\":\"+(r<10?\"0\":\"\")+r+\":\"+(n<10?\"0\":\"\")+n}(t);case\"ordinal\":return function(t,e,r){var n=r.currentOrdinal(),i=Object.assign({},g,e),o=u({instance:t,providedFormat:e,state:r}),s=n(t._value);return o+(i.spaceSeparated?\" \":\"\")+s}(t,e=c(e,h.currentOrdinalDefaultFormat()),h);case\"number\":default:return u({instance:t,providedFormat:e,numbro:r})}}(t,e,r);return(s=i+s)+o}).apply(void 0,r.concat([t]))},getByteUnit:function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return(function(t){var e=m.general;return n(t._value,e.suffixes,e.scale).suffix}).apply(void 0,r.concat([t]))},getBinaryByteUnit:function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return(function(t){var e=m.binary;return n(t._value,e.suffixes,e.scale).suffix}).apply(void 0,r.concat([t]))},getDecimalByteUnit:function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return(function(t){var e=m.decimal;return n(t._value,e.suffixes,e.scale).suffix}).apply(void 0,r.concat([t]))},formatOrDefault:c}}},{\"./globalState\":4,\"./parsing\":8,\"./validating\":10}],4:[function(t,e,r){\"use strict\";function n(t){c=t}function i(){return l[c]}var o=t(\"./en-US\"),s=t(\"./validating\"),a=t(\"./parsing\"),u={},c=void 0,l={},h=null,f={};u.languages=function(){return Object.assign({},l)},u.currentLanguage=function(){return c},u.currentCurrency=function(){return i().currency},u.currentAbbreviations=function(){return i().abbreviations},u.currentDelimiters=function(){return i().delimiters},u.currentOrdinal=function(){return i().ordinal},u.currentDefaults=function(){return Object.assign({},i().defaults,f)},u.currentOrdinalDefaultFormat=function(){return Object.assign({},u.currentDefaults(),i().ordinalFormat)},u.currentByteDefaultFormat=function(){return Object.assign({},u.currentDefaults(),i().byteFormat)},u.currentPercentageDefaultFormat=function(){return Object.assign({},u.currentDefaults(),i().percentageFormat)},u.currentCurrencyDefaultFormat=function(){return Object.assign({},u.currentDefaults(),i().currencyFormat)},u.currentTimeDefaultFormat=function(){return Object.assign({},u.currentDefaults(),i().timeFormat)},u.setDefaults=function(t){t=a.parseFormat(t),s.validateFormat(t)&&(f=t)},u.getZeroFormat=function(){return h},u.setZeroFormat=function(t){return h=\"string\"==typeof t?t:null},u.hasZeroFormat=function(){return null!==h},u.languageData=function(t){if(t){if(l[t])return l[t];throw new Error('Unknown tag \"'+t+'\"')}return i()},u.registerLanguage=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!s.validateLanguage(t))throw new Error(\"Invalid language data\");l[t.languageTag]=t,e&&n(t.languageTag)},u.setLanguage=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.languageTag;if(!l[t]){var r=t.split(\"-\")[0],i=Object.keys(l).find(function(t){return t.split(\"-\")[0]===r});if(!l[i])return void n(e);n(i)}n(t)},u.registerLanguage(o),c=o.languageTag,e.exports=u},{\"./en-US\":2,\"./parsing\":8,\"./validating\":10}],5:[function(t,e,r){\"use strict\";function n(e,r){e.forEach(function(e){var n=void 0;try{n=t(\"../languages/\"+e)}catch(t){console.error('Unable to load \"'+e+'\". No matching language file found.')}n&&r.registerLanguage(n)})}e.exports=function(t){return{loadLanguagesInNode:function(e){return n(e,t)}}}},{}],6:[function(t,e,r){\"use strict\";function n(t,e,r){var n=new i(t._value),o=e;return r.isNumbro(e)&&(o=e._value),o=new i(o),t._value=n.minus(o).toNumber(),t}var i=t(\"bignumber.js\");e.exports=function(t){return{add:function(e,r){return function(t,e,r){var n=new i(t._value),o=e;return r.isNumbro(e)&&(o=e._value),o=new i(o),t._value=n.add(o).toNumber(),t}(e,r,t)},subtract:function(e,r){return n(e,r,t)},multiply:function(e,r){return function(t,e,r){var n=new i(t._value),o=e;return r.isNumbro(e)&&(o=e._value),o=new i(o),t._value=n.times(o).toNumber(),t}(e,r,t)},divide:function(e,r){return function(t,e,r){var n=new i(t._value),o=e;return r.isNumbro(e)&&(o=e._value),o=new i(o),t._value=n.dividedBy(o).toNumber(),t}(e,r,t)},set:function(e,r){return function(t,e,r){var n=e;return r.isNumbro(e)&&(n=e._value),t._value=n,t}(e,r,t)},difference:function(e,r){return function(t,e,r){var i=r(t._value);return n(i,e,r),Math.abs(i._value)}(e,r,t)}}}},{\"bignumber.js\":1}],7:[function(t,e,r){\"use strict\";function n(t){var e=t;return i.isNumbro(t)?e=t._value:\"string\"==typeof t?e=i.unformat(t):isNaN(t)&&(e=NaN),e}function i(t){return new d(n(t))}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t(\"./globalState\"),a=t(\"./validating\"),u=t(\"./loading\")(i),c=t(\"./unformatting\"),l=t(\"./formatting\")(i),h=t(\"./manipulating\")(i),f=t(\"./parsing\"),d=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")})(this,t),this._value=e}return o(t,[{key:\"clone\",value:function(){return i(this._value)}},{key:\"format\",value:function(){return l.format(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},{key:\"formatCurrency\",value:function(t){return\"string\"==typeof t&&(t=f.parseFormat(t)),(t=l.formatOrDefault(t,s.currentCurrencyDefaultFormat())).output=\"currency\",l.format(this,t)}},{key:\"formatTime\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.output=\"time\",l.format(this,t)}},{key:\"binaryByteUnits\",value:function(){return l.getBinaryByteUnit(this)}},{key:\"decimalByteUnits\",value:function(){return l.getDecimalByteUnit(this)}},{key:\"byteUnits\",value:function(){return l.getByteUnit(this)}},{key:\"difference\",value:function(t){return h.difference(this,t)}},{key:\"add\",value:function(t){return h.add(this,t)}},{key:\"subtract\",value:function(t){return h.subtract(this,t)}},{key:\"multiply\",value:function(t){return h.multiply(this,t)}},{key:\"divide\",value:function(t){return h.divide(this,t)}},{key:\"set\",value:function(t){return h.set(this,n(t))}},{key:\"value\",value:function(){return this._value}},{key:\"valueOf\",value:function(){return this._value}}]),t}();i.version=\"2.0.6\",i.isNumbro=function(t){return t instanceof d},i.language=s.currentLanguage,i.registerLanguage=s.registerLanguage,i.setLanguage=s.setLanguage,i.languages=s.languages,i.languageData=s.languageData,i.zeroFormat=s.setZeroFormat,i.defaultFormat=s.currentDefaults,i.setDefaults=s.setDefaults,i.defaultCurrencyFormat=s.currentCurrencyDefaultFormat,i.validate=a.validate,i.loadLanguagesInNode=u.loadLanguagesInNode,i.unformat=c.unformat,e.exports=i},{\"./formatting\":3,\"./globalState\":4,\"./loading\":5,\"./manipulating\":6,\"./parsing\":8,\"./unformatting\":9,\"./validating\":10}],8:[function(t,e,r){\"use strict\";e.exports={parseFormat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return\"string\"!=typeof t?t:(function(t,e){if(-1===t.indexOf(\"$\")){if(-1===t.indexOf(\"%\"))return-1!==t.indexOf(\"bd\")?(e.output=\"byte\",void(e.base=\"general\")):-1!==t.indexOf(\"b\")?(e.output=\"byte\",void(e.base=\"binary\")):-1!==t.indexOf(\"d\")?(e.output=\"byte\",void(e.base=\"decimal\")):void(-1===t.indexOf(\":\")?-1!==t.indexOf(\"o\")&&(e.output=\"ordinal\"):e.output=\"time\");e.output=\"percent\"}else e.output=\"currency\"}(t=function(t,e){var r=t.match(/{([^}]*)}$/);return r?(e.postfix=r[1],t.slice(0,-r[0].length)):t}(t=function(t,e){var r=t.match(/^{([^}]*)}/);return r?(e.prefix=r[1],t.slice(r[0].length)):t}(t,e),e),e),function(t,e){var r=t.match(/[1-9]+[0-9]*/);r&&(e.totalLength=+r[0])}(t,e),function(t,e){var r=t.split(\".\")[0].match(/0+/);r&&(e.characteristic=r[0].length)}(t,e),function(t,e){if(-1!==t.indexOf(\".\")){var r=t.split(\".\")[0];e.optionalCharacteristic=-1===r.indexOf(\"0\")}}(t,e),function(t,e){-1!==t.indexOf(\"a\")&&(e.average=!0)}(t,e),function(t,e){-1!==t.indexOf(\"K\")?e.forceAverage=\"thousand\":-1!==t.indexOf(\"M\")?e.forceAverage=\"million\":-1!==t.indexOf(\"B\")?e.forceAverage=\"billion\":-1!==t.indexOf(\"T\")&&(e.forceAverage=\"trillion\")}(t,e),function(t,e){var r=t.split(\".\")[1];if(r){var n=r.match(/0+/);n&&(e.mantissa=n[0].length)}}(t,e),function(t,e){t.match(/\\[\\.]/)?e.optionalMantissa=!0:t.match(/\\./)&&(e.optionalMantissa=!1)}(t,e),function(t,e){-1!==t.indexOf(\",\")&&(e.thousandSeparated=!0)}(t,e),function(t,e){-1!==t.indexOf(\" \")&&(e.spaceSeparated=!0)}(t,e),function(t,e){t.match(/^\\+?\\([^)]*\\)$/)&&(e.negative=\"parenthesis\"),t.match(/^\\+?-/)&&(e.negative=\"sign\")}(t,e),function(t,e){t.match(/^\\+/)&&(e.forceSign=!0)}(t,e),e)}}},{}],9:[function(t,e,r){\"use strict\";function n(t){return t.replace(/[-/\\\\^$*+?.()|[\\]{}]/g,\"\\\\$&\")}function i(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"\",o=arguments[3],s=arguments[4],u=arguments[5],c=arguments[6];if(!isNaN(+t))return+t;var l=\"\",h=t.replace(/(^[^(]*)\\((.*)\\)([^)]*$)/,\"$1$2$3\");if(h!==t)return-1*i(h,e,r,o,s,u,c);for(var f=0;f<a.length;f++){var d=a[f];if((l=t.replace(d.key,\"\"))!==t)return i(l,e,r,o,s,u,c)*d.factor}if((l=t.replace(\"%\",\"\"))!==t)return i(l,e,r,o,s,u,c)/100;var p=parseFloat(t);if(!isNaN(p)){var m=o(p);if(m&&\".\"!==m&&(l=t.replace(new RegExp(n(m)+\"$\"),\"\"))!==t)return i(l,e,r,o,s,u,c);var g={};Object.keys(u).forEach(function(t){g[u[t]]=t});for(var v=Object.keys(g).sort().reverse(),y=v.length,w=0;w<y;w++){var x=v[w],b=g[x];if((l=t.replace(x,\"\"))!==t){var _=void 0;switch(b){case\"thousand\":_=Math.pow(10,3);break;case\"million\":_=Math.pow(10,6);break;case\"billion\":_=Math.pow(10,9);break;case\"trillion\":_=Math.pow(10,12)}return i(l,e,r,o,s,u,c)*_}}}}function o(t,e){var r=t.replace(arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"\",\"\");return(r=r.replace(new RegExp(\"([0-9])\"+n(e.thousands)+\"([0-9])\",\"g\"),\"$1$2\")).replace(e.decimal,\".\")}function s(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"\",n=arguments[3],s=arguments[4],a=arguments[5],u=arguments[6];if(\"\"!==t)return isNaN(+t)?t===s?0:i(o(t,e,r),e,r,n,s,a,u):+t}var a=[{key:\"ZiB\",factor:Math.pow(1024,7)},{key:\"ZB\",factor:Math.pow(1e3,7)},{key:\"YiB\",factor:Math.pow(1024,8)},{key:\"YB\",factor:Math.pow(1e3,8)},{key:\"TiB\",factor:Math.pow(1024,4)},{key:\"TB\",factor:Math.pow(1e3,4)},{key:\"PiB\",factor:Math.pow(1024,5)},{key:\"PB\",factor:Math.pow(1e3,5)},{key:\"MiB\",factor:Math.pow(1024,2)},{key:\"MB\",factor:Math.pow(1e3,2)},{key:\"KiB\",factor:Math.pow(1024,1)},{key:\"KB\",factor:Math.pow(1e3,1)},{key:\"GiB\",factor:Math.pow(1024,3)},{key:\"GB\",factor:Math.pow(1e3,3)},{key:\"EiB\",factor:Math.pow(1024,6)},{key:\"EB\",factor:Math.pow(1e3,6)},{key:\"B\",factor:1}];e.exports={unformat:function(e,r){var n=t(\"./globalState\"),i=n.currentDelimiters(),o=n.currentCurrency().symbol,a=n.currentOrdinal(),u=n.getZeroFormat(),c=n.currentAbbreviations(),l=void 0;if(\"string\"==typeof e)l=function(t,e){if(!t.indexOf(\":\")||\":\"===e.thousands)return!1;var r=t.split(\":\");if(3!==r.length)return!1;var n=+r[1],i=+r[2];return!isNaN(+r[0])&&!isNaN(n)&&!isNaN(i)}(e,i)?function(t){var e=t.split(\":\");return+e[2]+60*+e[1]+3600*+e[0]}(e):s(e,i,o,a,u,c,r);else{if(\"number\"!=typeof e)return;l=e}if(void 0!==l)return l}}},{\"./globalState\":4}],10:[function(t,e,r){\"use strict\";function n(t){return!!a.unformat(t)}function i(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Object.keys(t).map(function(n){if(!e[n])return console.error(r+\" Invalid key: \"+n),!1;var o=t[n],a=e[n];if(\"string\"==typeof a&&(a={type:a}),\"format\"===a.type){if(!i(o,c,\"[Validate \"+n+\"]\",!0))return!1}else if((void 0===o?\"undefined\":s(o))!==a.type)return console.error(r+\" \"+n+' type mismatched: \"'+a.type+'\" expected, \"'+(void 0===o?\"undefined\":s(o))+'\" provided'),!1;if(a.restrictions&&a.restrictions.length)for(var u=a.restrictions.length,l=0;l<u;l++){var h=a.restrictions[l],f=h.message;if(!(0,h.restriction)(o,t))return console.error(r+\" \"+n+\" invalid value: \"+f),!1}return a.restriction&&!a.restriction(o,t)?(console.error(r+\" \"+n+\" invalid value: \"+a.message),!1):a.validValues&&-1===a.validValues.indexOf(o)?(console.error(r+\" \"+n+\" invalid value: must be among \"+JSON.stringify(a.validValues)+', \"'+o+'\" provided'),!1):!(a.children&&!i(o,a.children,\"[Validate \"+n+\"]\"))});return n||o.push.apply(o,function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(Object.keys(e).map(function(n){var i=e[n];if(\"string\"==typeof i&&(i={type:i}),i.mandatory){var o=i.mandatory;if(\"function\"==typeof o&&(o=o(t)),o&&void 0===t[n])return console.error(r+' Missing mandatory key \"'+n+'\"'),!1}return!0}))),o.reduce(function(t,e){return t&&e},!0)}function o(t){return i(t,c,\"[Validate format]\")}var s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},a=t(\"./unformatting\"),u=/^[a-z]{2,3}(-[a-zA-Z]{4})?(-([A-Z]{2}|[0-9]{3}))?$/,c={output:{type:\"string\",validValues:[\"currency\",\"percent\",\"byte\",\"time\",\"ordinal\",\"number\"]},base:{type:\"string\",validValues:[\"decimal\",\"binary\",\"general\"],restriction:function(t,e){return\"byte\"===e.output},message:\"`base` must be provided only when the output is `byte`\",mandatory:function(t){return\"byte\"===t.output}},characteristic:{type:\"number\",restriction:function(t){return t>=0},message:\"value must be positive\"},prefix:\"string\",postfix:\"string\",forceAverage:{type:\"string\",validValues:[\"trillion\",\"billion\",\"million\",\"thousand\"]},average:\"boolean\",currencyPosition:{type:\"string\",validValues:[\"prefix\",\"infix\",\"postfix\"]},currencySymbol:\"string\",totalLength:{type:\"number\",restrictions:[{restriction:function(t){return t>=0},message:\"value must be positive\"},{restriction:function(t,e){return!e.exponential},message:\"`totalLength` is incompatible with `exponential`\"}]},mantissa:{type:\"number\",restriction:function(t){return t>=0},message:\"value must be positive\"},optionalMantissa:\"boolean\",optionalCharacteristic:\"boolean\",thousandSeparated:\"boolean\",spaceSeparated:\"boolean\",abbreviations:{type:\"object\",children:{thousand:\"string\",million:\"string\",billion:\"string\",trillion:\"string\"}},negative:{type:\"string\",validValues:[\"sign\",\"parenthesis\"]},forceSign:\"boolean\",exponential:{type:\"boolean\"},prefixSymbol:{type:\"boolean\",restriction:function(t,e){return\"percent\"===e.output},message:\"`prefixSymbol` can be provided only when the output is `percent`\"}},l={languageTag:{type:\"string\",mandatory:!0,restriction:function(t){return t.match(u)},message:\"the language tag must follow the BCP 47 specification (see https://tools.ieft.org/html/bcp47)\"},delimiters:{type:\"object\",children:{thousands:\"string\",decimal:\"string\",thousandsSize:\"number\"},mandatory:!0},abbreviations:{type:\"object\",children:{thousand:{type:\"string\",mandatory:!0},million:{type:\"string\",mandatory:!0},billion:{type:\"string\",mandatory:!0},trillion:{type:\"string\",mandatory:!0}},mandatory:!0},spaceSeparated:\"boolean\",ordinal:{type:\"function\",mandatory:!0},currency:{type:\"object\",children:{symbol:\"string\",position:\"string\",code:\"string\"},mandatory:!0},defaults:\"format\",ordinalFormat:\"format\",byteFormat:\"format\",percentageFormat:\"format\",currencyFormat:\"format\",timeDefaults:\"format\",formats:{type:\"object\",children:{fourDigits:{type:\"format\",mandatory:!0},fullWithTwoDecimals:{type:\"format\",mandatory:!0},fullWithTwoDecimalsNoCurrency:{type:\"format\",mandatory:!0},fullWithNoDecimals:{type:\"format\",mandatory:!0}}}};e.exports={validate:function(t,e){var r=n(t),i=o(e);return r&&i},validateFormat:o,validateInput:n,validateLanguage:function(t){return i(t,l,\"[Validate language]\")}}},{\"./unformatting\":9}]},{},[7])(7)}),function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){\"use strict\";var t,e;function r(){return t.apply(null,arguments)}function n(t){return t instanceof Array||\"[object Array]\"===Object.prototype.toString.call(t)}function i(t){return null!=t&&\"[object Object]\"===Object.prototype.toString.call(t)}function o(t){return void 0===t}function s(t){return\"number\"==typeof t||\"[object Number]\"===Object.prototype.toString.call(t)}function a(t){return t instanceof Date||\"[object Date]\"===Object.prototype.toString.call(t)}function u(t,e){var r,n=[];for(r=0;r<t.length;++r)n.push(e(t[r],r));return n}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l(t,e){for(var r in e)c(e,r)&&(t[r]=e[r]);return c(e,\"toString\")&&(t.toString=e.toString),c(e,\"valueOf\")&&(t.valueOf=e.valueOf),t}function h(t,e,r,n){return Ee(t,e,r,n,!0).utc()}function f(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function d(t){if(null==t._isValid){var r=f(t),n=e.call(r.parsedDateParts,function(t){return null!=t}),i=!isNaN(t._d.getTime())&&r.overflow<0&&!r.empty&&!r.invalidMonth&&!r.invalidWeekday&&!r.weekdayMismatch&&!r.nullInput&&!r.invalidFormat&&!r.userInvalidated&&(!r.meridiem||r.meridiem&&n);if(t._strict&&(i=i&&0===r.charsLeftOver&&0===r.unusedTokens.length&&void 0===r.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function p(t){var e=h(NaN);return null!=t?l(f(e),t):f(e).userInvalidated=!0,e}e=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),r=e.length>>>0,n=0;n<r;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var m=r.momentProperties=[];function g(t,e){var r,n,i;if(o(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),o(e._i)||(t._i=e._i),o(e._f)||(t._f=e._f),o(e._l)||(t._l=e._l),o(e._strict)||(t._strict=e._strict),o(e._tzm)||(t._tzm=e._tzm),o(e._isUTC)||(t._isUTC=e._isUTC),o(e._offset)||(t._offset=e._offset),o(e._pf)||(t._pf=f(e)),o(e._locale)||(t._locale=e._locale),0<m.length)for(r=0;r<m.length;r++)o(i=e[n=m[r]])||(t[n]=i);return t}var v=!1;function y(t){g(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===v&&(v=!0,r.updateOffset(this),v=!1)}function w(t){return t instanceof y||null!=t&&null!=t._isAMomentObject}function x(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function b(t){var e=+t,r=0;return 0!==e&&isFinite(e)&&(r=x(e)),r}function _(t,e,r){var n,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0;for(n=0;n<i;n++)(r&&t[n]!==e[n]||!r&&b(t[n])!==b(e[n]))&&s++;return s+o}function M(t){!1===r.suppressDeprecationWarnings&&\"undefined\"!=typeof console&&console.warn&&console.warn(\"Deprecation warning: \"+t)}function S(t,e){var n=!0;return l(function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),n){for(var i,o=[],s=0;s<arguments.length;s++){if(i=\"\",\"object\"==typeof arguments[s]){for(var a in i+=\"\\n[\"+s+\"] \",arguments[0])i+=a+\": \"+arguments[0][a]+\", \";i=i.slice(0,-2)}else i=arguments[s];o.push(i)}M(t+\"\\nArguments: \"+Array.prototype.slice.call(o).join(\"\")+\"\\n\"+(new Error).stack),n=!1}return e.apply(this,arguments)},e)}var E,T={};function A(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),T[t]||(M(e),T[t]=!0)}function R(t){return t instanceof Function||\"[object Function]\"===Object.prototype.toString.call(t)}function k(t,e){var r,n=l({},t);for(r in e)c(e,r)&&(i(t[r])&&i(e[r])?(n[r]={},l(n[r],t[r]),l(n[r],e[r])):null!=e[r]?n[r]=e[r]:delete n[r]);for(r in t)c(t,r)&&!c(e,r)&&i(t[r])&&(n[r]=l({},n[r]));return n}function C(t){null!=t&&this.set(t)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,E=Object.keys?Object.keys:function(t){var e,r=[];for(e in t)c(t,e)&&r.push(e);return r};var L={};function P(t,e){var r=t.toLowerCase();L[r]=L[r+\"s\"]=L[e]=t}function D(t){return\"string\"==typeof t?L[t]||L[t.toLowerCase()]:void 0}function O(t){var e,r,n={};for(r in t)c(t,r)&&(e=D(r))&&(n[e]=t[r]);return n}var N={};function I(t,e){N[t]=e}function F(t,e,r){var n=\"\"+Math.abs(t);return(0<=t?r?\"+\":\"\":\"-\")+Math.pow(10,Math.max(0,e-n.length)).toString().substr(1)+n}var z=/(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,U=/(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g,j={},V={};function B(t,e,r,n){var i=n;\"string\"==typeof n&&(i=function(){return this[n]()}),t&&(V[t]=i),e&&(V[e[0]]=function(){return F(i.apply(this,arguments),e[1],e[2])}),r&&(V[r]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function H(t,e){return t.isValid()?(e=G(e,t.localeData()),j[e]=j[e]||function(t){var e,r,n,i=t.match(z);for(e=0,r=i.length;e<r;e++)i[e]=V[i[e]]?V[i[e]]:(n=i[e]).match(/\\[[\\s\\S]/)?n.replace(/^\\[|\\]$/g,\"\"):n.replace(/\\\\/g,\"\");return function(e){var n,o=\"\";for(n=0;n<r;n++)o+=R(i[n])?i[n].call(e,t):i[n];return o}}(e),j[e](t)):t.localeData().invalidDate()}function G(t,e){var r=5;function n(t){return e.longDateFormat(t)||t}for(U.lastIndex=0;0<=r&&U.test(t);)t=t.replace(U,n),U.lastIndex=0,r-=1;return t}var W=/\\d/,q=/\\d\\d/,Y=/\\d{3}/,X=/\\d{4}/,$=/[+-]?\\d{6}/,J=/\\d\\d?/,Z=/\\d\\d\\d\\d?/,Q=/\\d\\d\\d\\d\\d\\d?/,K=/\\d{1,3}/,tt=/\\d{1,4}/,et=/[+-]?\\d{1,6}/,rt=/\\d+/,nt=/[+-]?\\d+/,it=/Z|[+-]\\d\\d:?\\d\\d/gi,ot=/Z|[+-]\\d\\d(?::?\\d\\d)?/gi,st=/[0-9]{0,256}['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFF07\\uFF10-\\uFFEF]{1,256}|[\\u0600-\\u06FF\\/]{1,256}(\\s*?[\\u0600-\\u06FF]{1,256}){1,2}/i,at={};function ut(t,e,r){at[t]=R(e)?e:function(t,n){return t&&r?r:e}}function ct(t,e){return c(at,t)?at[t](e._strict,e._locale):new RegExp(lt(t.replace(\"\\\\\",\"\").replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g,function(t,e,r,n,i){return e||r||n||i})))}function lt(t){return t.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g,\"\\\\$&\")}var ht={};function ft(t,e){var r,n=e;for(\"string\"==typeof t&&(t=[t]),s(e)&&(n=function(t,r){r[e]=b(t)}),r=0;r<t.length;r++)ht[t[r]]=n}function dt(t,e){ft(t,function(t,r,n,i){n._w=n._w||{},e(t,n._w,n,i)})}var pt=0,mt=1,gt=2,vt=3,yt=4,wt=5,xt=6,bt=7,_t=8;function Mt(t){return St(t)?366:365}function St(t){return t%4==0&&t%100!=0||t%400==0}B(\"Y\",0,0,function(){var t=this.year();return t<=9999?\"\"+t:\"+\"+t}),B(0,[\"YY\",2],0,function(){return this.year()%100}),B(0,[\"YYYY\",4],0,\"year\"),B(0,[\"YYYYY\",5],0,\"year\"),B(0,[\"YYYYYY\",6,!0],0,\"year\"),P(\"year\",\"y\"),I(\"year\",1),ut(\"Y\",nt),ut(\"YY\",J,q),ut(\"YYYY\",tt,X),ut(\"YYYYY\",et,$),ut(\"YYYYYY\",et,$),ft([\"YYYYY\",\"YYYYYY\"],pt),ft(\"YYYY\",function(t,e){e[pt]=2===t.length?r.parseTwoDigitYear(t):b(t)}),ft(\"YY\",function(t,e){e[pt]=r.parseTwoDigitYear(t)}),ft(\"Y\",function(t,e){e[pt]=parseInt(t,10)}),r.parseTwoDigitYear=function(t){return b(t)+(68<b(t)?1900:2e3)};var Et,Tt=At(\"FullYear\",!0);function At(t,e){return function(n){return null!=n?(kt(this,t,n),r.updateOffset(this,e),this):Rt(this,t)}}function Rt(t,e){return t.isValid()?t._d[\"get\"+(t._isUTC?\"UTC\":\"\")+e]():NaN}function kt(t,e,r){t.isValid()&&!isNaN(r)&&(\"FullYear\"===e&&St(t.year())&&1===t.month()&&29===t.date()?t._d[\"set\"+(t._isUTC?\"UTC\":\"\")+e](r,t.month(),Ct(r,t.month())):t._d[\"set\"+(t._isUTC?\"UTC\":\"\")+e](r))}function Ct(t,e){if(isNaN(t)||isNaN(e))return NaN;var r=(e%12+12)%12;return t+=(e-r)/12,1===r?St(t)?29:28:31-r%7%2}Et=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},B(\"M\",[\"MM\",2],\"Mo\",function(){return this.month()+1}),B(\"MMM\",0,0,function(t){return this.localeData().monthsShort(this,t)}),B(\"MMMM\",0,0,function(t){return this.localeData().months(this,t)}),P(\"month\",\"M\"),I(\"month\",8),ut(\"M\",J),ut(\"MM\",J,q),ut(\"MMM\",function(t,e){return e.monthsShortRegex(t)}),ut(\"MMMM\",function(t,e){return e.monthsRegex(t)}),ft([\"M\",\"MM\"],function(t,e){e[mt]=b(t)-1}),ft([\"MMM\",\"MMMM\"],function(t,e,r,n){var i=r._locale.monthsParse(t,n,r._strict);null!=i?e[mt]=i:f(r).invalidMonth=t});var Lt=/D[oD]?(\\[[^\\[\\]]*\\]|\\s)+MMMM?/,Pt=\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),Dt=\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\".split(\"_\");function Ot(t,e){var r;if(!t.isValid())return t;if(\"string\"==typeof e)if(/^\\d+$/.test(e))e=b(e);else if(!s(e=t.localeData().monthsParse(e)))return t;return r=Math.min(t.date(),Ct(t.year(),e)),t._d[\"set\"+(t._isUTC?\"UTC\":\"\")+\"Month\"](e,r),t}function Nt(t){return null!=t?(Ot(this,t),r.updateOffset(this,!0),this):Rt(this,\"Month\")}var It=st,Ft=st;function zt(){function t(t,e){return e.length-t.length}var e,r,n=[],i=[],o=[];for(e=0;e<12;e++)r=h([2e3,e]),n.push(this.monthsShort(r,\"\")),i.push(this.months(r,\"\")),o.push(this.months(r,\"\")),o.push(this.monthsShort(r,\"\"));for(n.sort(t),i.sort(t),o.sort(t),e=0;e<12;e++)n[e]=lt(n[e]),i[e]=lt(i[e]);for(e=0;e<24;e++)o[e]=lt(o[e]);this._monthsRegex=new RegExp(\"^(\"+o.join(\"|\")+\")\",\"i\"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp(\"^(\"+i.join(\"|\")+\")\",\"i\"),this._monthsShortStrictRegex=new RegExp(\"^(\"+n.join(\"|\")+\")\",\"i\")}function Ut(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&0<=t&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function jt(t,e,r){var n=7+e-r;return-(7+Ut(t,0,n).getUTCDay()-e)%7+n-1}function Vt(t,e,r,n,i){var o,s,a=1+7*(e-1)+(7+r-n)%7+jt(t,n,i);return a<=0?s=Mt(o=t-1)+a:a>Mt(t)?(o=t+1,s=a-Mt(t)):(o=t,s=a),{year:o,dayOfYear:s}}function Bt(t,e,r){var n,i,o=jt(t.year(),e,r),s=Math.floor((t.dayOfYear()-o-1)/7)+1;return s<1?n=s+Ht(i=t.year()-1,e,r):s>Ht(t.year(),e,r)?(n=s-Ht(t.year(),e,r),i=t.year()+1):(i=t.year(),n=s),{week:n,year:i}}function Ht(t,e,r){var n=jt(t,e,r),i=jt(t+1,e,r);return(Mt(t)-n+i)/7}B(\"w\",[\"ww\",2],\"wo\",\"week\"),B(\"W\",[\"WW\",2],\"Wo\",\"isoWeek\"),P(\"week\",\"w\"),P(\"isoWeek\",\"W\"),I(\"week\",5),I(\"isoWeek\",5),ut(\"w\",J),ut(\"ww\",J,q),ut(\"W\",J),ut(\"WW\",J,q),dt([\"w\",\"ww\",\"W\",\"WW\"],function(t,e,r,n){e[n.substr(0,1)]=b(t)}),B(\"d\",0,\"do\",\"day\"),B(\"dd\",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),B(\"ddd\",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),B(\"dddd\",0,0,function(t){return this.localeData().weekdays(this,t)}),B(\"e\",0,0,\"weekday\"),B(\"E\",0,0,\"isoWeekday\"),P(\"day\",\"d\"),P(\"weekday\",\"e\"),P(\"isoWeekday\",\"E\"),I(\"day\",11),I(\"weekday\",11),I(\"isoWeekday\",11),ut(\"d\",J),ut(\"e\",J),ut(\"E\",J),ut(\"dd\",function(t,e){return e.weekdaysMinRegex(t)}),ut(\"ddd\",function(t,e){return e.weekdaysShortRegex(t)}),ut(\"dddd\",function(t,e){return e.weekdaysRegex(t)}),dt([\"dd\",\"ddd\",\"dddd\"],function(t,e,r,n){var i=r._locale.weekdaysParse(t,n,r._strict);null!=i?e.d=i:f(r).invalidWeekday=t}),dt([\"d\",\"e\",\"E\"],function(t,e,r,n){e[n]=b(t)});var Gt=\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),Wt=\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\".split(\"_\"),qt=\"Su_Mo_Tu_We_Th_Fr_Sa\".split(\"_\"),Yt=st,Xt=st,$t=st;function Jt(){function t(t,e){return e.length-t.length}var e,r,n,i,o,s=[],a=[],u=[],c=[];for(e=0;e<7;e++)r=h([2e3,1]).day(e),n=this.weekdaysMin(r,\"\"),i=this.weekdaysShort(r,\"\"),o=this.weekdays(r,\"\"),s.push(n),a.push(i),u.push(o),c.push(n),c.push(i),c.push(o);for(s.sort(t),a.sort(t),u.sort(t),c.sort(t),e=0;e<7;e++)a[e]=lt(a[e]),u[e]=lt(u[e]),c[e]=lt(c[e]);this._weekdaysRegex=new RegExp(\"^(\"+c.join(\"|\")+\")\",\"i\"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp(\"^(\"+u.join(\"|\")+\")\",\"i\"),this._weekdaysShortStrictRegex=new RegExp(\"^(\"+a.join(\"|\")+\")\",\"i\"),this._weekdaysMinStrictRegex=new RegExp(\"^(\"+s.join(\"|\")+\")\",\"i\")}function Zt(){return this.hours()%12||12}function Qt(t,e){B(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Kt(t,e){return e._meridiemParse}B(\"H\",[\"HH\",2],0,\"hour\"),B(\"h\",[\"hh\",2],0,Zt),B(\"k\",[\"kk\",2],0,function(){return this.hours()||24}),B(\"hmm\",0,0,function(){return\"\"+Zt.apply(this)+F(this.minutes(),2)}),B(\"hmmss\",0,0,function(){return\"\"+Zt.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)}),B(\"Hmm\",0,0,function(){return\"\"+this.hours()+F(this.minutes(),2)}),B(\"Hmmss\",0,0,function(){return\"\"+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)}),Qt(\"a\",!0),Qt(\"A\",!1),P(\"hour\",\"h\"),I(\"hour\",13),ut(\"a\",Kt),ut(\"A\",Kt),ut(\"H\",J),ut(\"h\",J),ut(\"k\",J),ut(\"HH\",J,q),ut(\"hh\",J,q),ut(\"kk\",J,q),ut(\"hmm\",Z),ut(\"hmmss\",Q),ut(\"Hmm\",Z),ut(\"Hmmss\",Q),ft([\"H\",\"HH\"],vt),ft([\"k\",\"kk\"],function(t,e,r){var n=b(t);e[vt]=24===n?0:n}),ft([\"a\",\"A\"],function(t,e,r){r._isPm=r._locale.isPM(t),r._meridiem=t}),ft([\"h\",\"hh\"],function(t,e,r){e[vt]=b(t),f(r).bigHour=!0}),ft(\"hmm\",function(t,e,r){var n=t.length-2;e[vt]=b(t.substr(0,n)),e[yt]=b(t.substr(n)),f(r).bigHour=!0}),ft(\"hmmss\",function(t,e,r){var n=t.length-4,i=t.length-2;e[vt]=b(t.substr(0,n)),e[yt]=b(t.substr(n,2)),e[wt]=b(t.substr(i)),f(r).bigHour=!0}),ft(\"Hmm\",function(t,e,r){var n=t.length-2;e[vt]=b(t.substr(0,n)),e[yt]=b(t.substr(n))}),ft(\"Hmmss\",function(t,e,r){var n=t.length-4,i=t.length-2;e[vt]=b(t.substr(0,n)),e[yt]=b(t.substr(n,2)),e[wt]=b(t.substr(i))});var te,ee=At(\"Hours\",!0),re={calendar:{sameDay:\"[Today at] LT\",nextDay:\"[Tomorrow at] LT\",nextWeek:\"dddd [at] LT\",lastDay:\"[Yesterday at] LT\",lastWeek:\"[Last] dddd [at] LT\",sameElse:\"L\"},longDateFormat:{LTS:\"h:mm:ss A\",LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"},invalidDate:\"Invalid date\",ordinal:\"%d\",dayOfMonthOrdinalParse:/\\d{1,2}/,relativeTime:{future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",ss:\"%d seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"},months:Pt,monthsShort:Dt,week:{dow:0,doy:6},weekdays:Gt,weekdaysMin:qt,weekdaysShort:Wt,meridiemParse:/[ap]\\.?m?\\.?/i},ne={},ie={};function oe(t){return t?t.toLowerCase().replace(\"_\",\"-\"):t}function se(t){var e=null;if(!ne[t]&&\"undefined\"!=typeof module&&module&&module.exports)try{e=te._abbr,require(\"./locale/\"+t),ae(e)}catch(t){}return ne[t]}function ae(t,e){var r;return t&&((r=o(e)?ce(t):ue(t,e))?te=r:\"undefined\"!=typeof console&&console.warn&&console.warn(\"Locale \"+t+\" not found. Did you forget to load it?\")),te._abbr}function ue(t,e){if(null!==e){var r,n=re;if(e.abbr=t,null!=ne[t])A(\"defineLocaleOverride\",\"use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info.\"),n=ne[t]._config;else if(null!=e.parentLocale)if(null!=ne[e.parentLocale])n=ne[e.parentLocale]._config;else{if(null==(r=se(e.parentLocale)))return ie[e.parentLocale]||(ie[e.parentLocale]=[]),ie[e.parentLocale].push({name:t,config:e}),null;n=r._config}return ne[t]=new C(k(n,e)),ie[t]&&ie[t].forEach(function(t){ue(t.name,t.config)}),ae(t),ne[t]}return delete ne[t],null}function ce(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return te;if(!n(t)){if(e=se(t))return e;t=[t]}return function(t){for(var e,r,n,i,o=0;o<t.length;){for(e=(i=oe(t[o]).split(\"-\")).length,r=(r=oe(t[o+1]))?r.split(\"-\"):null;0<e;){if(n=se(i.slice(0,e).join(\"-\")))return n;if(r&&r.length>=e&&_(i,r,!0)>=e-1)break;e--}o++}return te}(t)}function le(t){var e,r=t._a;return r&&-2===f(t).overflow&&(e=r[mt]<0||11<r[mt]?mt:r[gt]<1||r[gt]>Ct(r[pt],r[mt])?gt:r[vt]<0||24<r[vt]||24===r[vt]&&(0!==r[yt]||0!==r[wt]||0!==r[xt])?vt:r[yt]<0||59<r[yt]?yt:r[wt]<0||59<r[wt]?wt:r[xt]<0||999<r[xt]?xt:-1,f(t)._overflowDayOfYear&&(e<pt||gt<e)&&(e=gt),f(t)._overflowWeeks&&-1===e&&(e=bt),f(t)._overflowWeekday&&-1===e&&(e=_t),f(t).overflow=e),t}function he(t,e,r){return null!=t?t:null!=e?e:r}function fe(t){var e,n,i,o,s,a=[];if(!t._d){var u,c;for(u=t,c=new Date(r.now()),i=u._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()],t._w&&null==t._a[gt]&&null==t._a[mt]&&function(t){var e,r,n,i,o,s,a,u;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)o=1,s=4,r=he(e.GG,t._a[pt],Bt(Te(),1,4).year),n=he(e.W,1),((i=he(e.E,1))<1||7<i)&&(u=!0);else{o=t._locale._week.dow,s=t._locale._week.doy;var c=Bt(Te(),o,s);r=he(e.gg,t._a[pt],c.year),n=he(e.w,c.week),null!=e.d?((i=e.d)<0||6<i)&&(u=!0):null!=e.e?(i=e.e+o,(e.e<0||6<e.e)&&(u=!0)):i=o}n<1||n>Ht(r,o,s)?f(t)._overflowWeeks=!0:null!=u?f(t)._overflowWeekday=!0:(a=Vt(r,n,i,o,s),t._a[pt]=a.year,t._dayOfYear=a.dayOfYear)}(t),null!=t._dayOfYear&&(s=he(t._a[pt],i[pt]),(t._dayOfYear>Mt(s)||0===t._dayOfYear)&&(f(t)._overflowDayOfYear=!0),n=Ut(s,0,t._dayOfYear),t._a[mt]=n.getUTCMonth(),t._a[gt]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=i[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[vt]&&0===t._a[yt]&&0===t._a[wt]&&0===t._a[xt]&&(t._nextDay=!0,t._a[vt]=0),t._d=(t._useUTC?Ut:function(t,e,r,n,i,o,s){var a=new Date(t,e,r,n,i,o,s);return t<100&&0<=t&&isFinite(a.getFullYear())&&a.setFullYear(t),a}).apply(null,a),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[vt]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(f(t).weekdayMismatch=!0)}}var de=/^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,pe=/^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,me=/Z|[+-]\\d\\d(?::?\\d\\d)?/,ge=[[\"YYYYYY-MM-DD\",/[+-]\\d{6}-\\d\\d-\\d\\d/],[\"YYYY-MM-DD\",/\\d{4}-\\d\\d-\\d\\d/],[\"GGGG-[W]WW-E\",/\\d{4}-W\\d\\d-\\d/],[\"GGGG-[W]WW\",/\\d{4}-W\\d\\d/,!1],[\"YYYY-DDD\",/\\d{4}-\\d{3}/],[\"YYYY-MM\",/\\d{4}-\\d\\d/,!1],[\"YYYYYYMMDD\",/[+-]\\d{10}/],[\"YYYYMMDD\",/\\d{8}/],[\"GGGG[W]WWE\",/\\d{4}W\\d{3}/],[\"GGGG[W]WW\",/\\d{4}W\\d{2}/,!1],[\"YYYYDDD\",/\\d{7}/]],ve=[[\"HH:mm:ss.SSSS\",/\\d\\d:\\d\\d:\\d\\d\\.\\d+/],[\"HH:mm:ss,SSSS\",/\\d\\d:\\d\\d:\\d\\d,\\d+/],[\"HH:mm:ss\",/\\d\\d:\\d\\d:\\d\\d/],[\"HH:mm\",/\\d\\d:\\d\\d/],[\"HHmmss.SSSS\",/\\d\\d\\d\\d\\d\\d\\.\\d+/],[\"HHmmss,SSSS\",/\\d\\d\\d\\d\\d\\d,\\d+/],[\"HHmmss\",/\\d\\d\\d\\d\\d\\d/],[\"HHmm\",/\\d\\d\\d\\d/],[\"HH\",/\\d\\d/]],ye=/^\\/?Date\\((\\-?\\d+)/i;function we(t){var e,r,n,i,o,s,a=t._i,u=de.exec(a)||pe.exec(a);if(u){for(f(t).iso=!0,e=0,r=ge.length;e<r;e++)if(ge[e][1].exec(u[1])){i=ge[e][0],n=!1!==ge[e][2];break}if(null==i)return void(t._isValid=!1);if(u[3]){for(e=0,r=ve.length;e<r;e++)if(ve[e][1].exec(u[3])){o=(u[2]||\" \")+ve[e][0];break}if(null==o)return void(t._isValid=!1)}if(!n&&null!=o)return void(t._isValid=!1);if(u[4]){if(!me.exec(u[4]))return void(t._isValid=!1);s=\"Z\"}t._f=i+(o||\"\")+(s||\"\"),Me(t)}else t._isValid=!1}var xe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\\s)?(\\d{1,2})\\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s(\\d{2,4})\\s(\\d\\d):(\\d\\d)(?::(\\d\\d))?\\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\\d{4}))$/,be={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function _e(t){var e,r,n,i=xe.exec(t._i.replace(/\\([^)]*\\)|[\\n\\t]/g,\" \").replace(/(\\s\\s+)/g,\" \").trim());if(i){var o=function(t,e,r,n,i,o){var s=[function(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}(t),Dt.indexOf(e),parseInt(r,10),parseInt(n,10),parseInt(i,10)];return o&&s.push(parseInt(o,10)),s}(i[4],i[3],i[2],i[5],i[6],i[7]);if(r=o,n=t,(e=i[1])&&Wt.indexOf(e)!==new Date(r[0],r[1],r[2]).getDay()&&(f(n).weekdayMismatch=!0,!(n._isValid=!1)))return;t._a=o,t._tzm=function(t,e,r){if(t)return be[t];if(e)return 0;var n=parseInt(r,10),i=n%100;return(n-i)/100*60+i}(i[8],i[9],i[10]),t._d=Ut.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),f(t).rfc2822=!0}else t._isValid=!1}function Me(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],f(t).empty=!0;var e,n,i,o,s,a,u,l,h=\"\"+t._i,d=h.length,p=0;for(i=G(t._f,t._locale).match(z)||[],e=0;e<i.length;e++)(n=(h.match(ct(o=i[e],t))||[])[0])&&(0<(s=h.substr(0,h.indexOf(n))).length&&f(t).unusedInput.push(s),h=h.slice(h.indexOf(n)+n.length),p+=n.length),V[o]?(n?f(t).empty=!1:f(t).unusedTokens.push(o),a=o,l=t,null!=(u=n)&&c(ht,a)&&ht[a](u,l._a,l,a)):t._strict&&!n&&f(t).unusedTokens.push(o);f(t).charsLeftOver=d-p,0<h.length&&f(t).unusedInput.push(h),t._a[vt]<=12&&!0===f(t).bigHour&&0<t._a[vt]&&(f(t).bigHour=void 0),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[vt]=function(t,e,r){var n;return null==r?e:null!=t.meridiemHour?t.meridiemHour(e,r):(null!=t.isPM&&((n=t.isPM(r))&&e<12&&(e+=12),n||12!==e||(e=0)),e)}(t._locale,t._a[vt],t._meridiem),fe(t),le(t)}else _e(t);else we(t)}function Se(t){var e,c,h,m,v=t._i,x=t._f;return t._locale=t._locale||ce(t._l),null===v||void 0===x&&\"\"===v?p({nullInput:!0}):(\"string\"==typeof v&&(t._i=v=t._locale.preparse(v)),w(v)?new y(le(v)):(a(v)?t._d=v:n(x)?function(t){var e,r,n,i,o;if(0===t._f.length)return f(t).invalidFormat=!0,t._d=new Date(NaN);for(i=0;i<t._f.length;i++)o=0,e=g({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],Me(e),d(e)&&(o+=f(e).charsLeftOver,o+=10*f(e).unusedTokens.length,f(e).score=o,(null==n||o<n)&&(n=o,r=e));l(t,r||e)}(t):x?Me(t):o(c=(e=t)._i)?e._d=new Date(r.now()):a(c)?e._d=new Date(c.valueOf()):\"string\"==typeof c?null===(m=ye.exec((h=e)._i))?(we(h),!1===h._isValid&&(delete h._isValid,_e(h),!1===h._isValid&&(delete h._isValid,r.createFromInputFallback(h)))):h._d=new Date(+m[1]):n(c)?(e._a=u(c.slice(0),function(t){return parseInt(t,10)}),fe(e)):i(c)?function(t){if(!t._d){var e=O(t._i);t._a=u([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),fe(t)}}(e):s(c)?e._d=new Date(c):r.createFromInputFallback(e),d(t)||(t._d=null),t))}function Ee(t,e,r,o,s){var a,u={};return!0!==r&&!1!==r||(o=r,r=void 0),(i(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||n(t)&&0===t.length)&&(t=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=r,u._i=t,u._f=e,u._strict=o,(a=new y(le(Se(u))))._nextDay&&(a.add(1,\"d\"),a._nextDay=void 0),a}function Te(t,e,r,n){return Ee(t,e,r,n,!1)}r.createFromInputFallback=S(\"value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.\",function(t){t._d=new Date(t._i+(t._useUTC?\" UTC\":\"\"))}),r.ISO_8601=function(){},r.RFC_2822=function(){};var Ae=S(\"moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/\",function(){var t=Te.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:p()}),Re=S(\"moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/\",function(){var t=Te.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:p()});function ke(t,e){var r,i;if(1===e.length&&n(e[0])&&(e=e[0]),!e.length)return Te();for(r=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](r)||(r=e[i]);return r}var Ce=[\"year\",\"quarter\",\"month\",\"week\",\"day\",\"hour\",\"minute\",\"second\",\"millisecond\"];function Le(t){var e=O(t),r=e.year||0,n=e.quarter||0,i=e.month||0,o=e.week||0,s=e.day||0,a=e.hour||0,u=e.minute||0,c=e.second||0,l=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===Et.call(Ce,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var r=!1,n=0;n<Ce.length;++n)if(t[Ce[n]]){if(r)return!1;parseFloat(t[Ce[n]])!==b(t[Ce[n]])&&(r=!0)}return!0}(e),this._milliseconds=+l+1e3*c+6e4*u+1e3*a*60*60,this._days=+s+7*o,this._months=+i+3*n+12*r,this._data={},this._locale=ce(),this._bubble()}function Pe(t){return t instanceof Le}function De(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Oe(t,e){B(t,0,0,function(){var t=this.utcOffset(),r=\"+\";return t<0&&(t=-t,r=\"-\"),r+F(~~(t/60),2)+e+F(~~t%60,2)})}Oe(\"Z\",\":\"),Oe(\"ZZ\",\"\"),ut(\"Z\",ot),ut(\"ZZ\",ot),ft([\"Z\",\"ZZ\"],function(t,e,r){r._useUTC=!0,r._tzm=Ie(ot,t)});var Ne=/([\\+\\-]|\\d\\d)/gi;function Ie(t,e){var r=(e||\"\").match(t);if(null===r)return null;var n=((r[r.length-1]||[])+\"\").match(Ne)||[\"-\",0,0],i=60*n[1]+b(n[2]);return 0===i?0:\"+\"===n[0]?i:-i}function Fe(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(w(t)||a(t)?t.valueOf():Te(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Te(t).local()}function ze(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Ue(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var je=/^(\\-|\\+)?(?:(\\d*)[. ])?(\\d+)\\:(\\d+)(?:\\:(\\d+)(\\.\\d*)?)?$/,Ve=/^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Be(t,e){var r,n,i,o=t,a=null;return Pe(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:s(t)?(o={},e?o[e]=t:o.milliseconds=t):(a=je.exec(t))?(r=\"-\"===a[1]?-1:1,o={y:0,d:b(a[gt])*r,h:b(a[vt])*r,m:b(a[yt])*r,s:b(a[wt])*r,ms:b(De(1e3*a[xt]))*r}):(a=Ve.exec(t))?o={y:He(a[2],r=\"-\"===a[1]?-1:1),M:He(a[3],r),w:He(a[4],r),d:He(a[5],r),h:He(a[6],r),m:He(a[7],r),s:He(a[8],r)}:null==o?o={}:\"object\"==typeof o&&(\"from\"in o||\"to\"in o)&&(i=function(t,e){var r;return t.isValid()&&e.isValid()?(e=Fe(e,t),t.isBefore(e)?r=Ge(t,e):((r=Ge(e,t)).milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}(Te(o.from),Te(o.to)),(o={}).ms=i.milliseconds,o.M=i.months),n=new Le(o),Pe(t)&&c(t,\"_locale\")&&(n._locale=t._locale),n}function He(t,e){var r=t&&parseFloat(t.replace(\",\",\".\"));return(isNaN(r)?0:r)*e}function Ge(t,e){var r={milliseconds:0,months:0};return r.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(r.months,\"M\").isAfter(e)&&--r.months,r.milliseconds=+e-+t.clone().add(r.months,\"M\"),r}function We(t,e){return function(r,n){var i;return null===n||isNaN(+n)||(A(e,\"moment().\"+e+\"(period, number) is deprecated. Please use moment().\"+e+\"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.\"),i=r,r=n,n=i),qe(this,Be(r=\"string\"==typeof r?+r:r,n),t),this}}function qe(t,e,n,i){var o=e._milliseconds,s=De(e._days),a=De(e._months);t.isValid()&&(i=null==i||i,a&&Ot(t,Rt(t,\"Month\")+a*n),s&&kt(t,\"Date\",Rt(t,\"Date\")+s*n),o&&t._d.setTime(t._d.valueOf()+o*n),i&&r.updateOffset(t,s||a))}Be.fn=Le.prototype,Be.invalid=function(){return Be(NaN)};var Ye=We(1,\"add\"),Xe=We(-1,\"subtract\");function $e(t,e){var r=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(r,\"months\");return-(r+(e-n<0?(e-n)/(n-t.clone().add(r-1,\"months\")):(e-n)/(t.clone().add(r+1,\"months\")-n)))||0}function Je(t){var e;return void 0===t?this._locale._abbr:(null!=(e=ce(t))&&(this._locale=e),this)}r.defaultFormat=\"YYYY-MM-DDTHH:mm:ssZ\",r.defaultFormatUtc=\"YYYY-MM-DDTHH:mm:ss[Z]\";var Ze=S(\"moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.\",function(t){return void 0===t?this.localeData():this.locale(t)});function Qe(){return this._locale}function Ke(t,e){B(0,[t,t.length],0,e)}function tr(t,e,r,n,i){var o;return null==t?Bt(this,n,i).year:((o=Ht(t,n,i))<e&&(e=o),(function(t,e,r,n,i){var o=Vt(t,e,r,n,i),s=Ut(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}).call(this,t,e,r,n,i))}B(0,[\"gg\",2],0,function(){return this.weekYear()%100}),B(0,[\"GG\",2],0,function(){return this.isoWeekYear()%100}),Ke(\"gggg\",\"weekYear\"),Ke(\"ggggg\",\"weekYear\"),Ke(\"GGGG\",\"isoWeekYear\"),Ke(\"GGGGG\",\"isoWeekYear\"),P(\"weekYear\",\"gg\"),P(\"isoWeekYear\",\"GG\"),I(\"weekYear\",1),I(\"isoWeekYear\",1),ut(\"G\",nt),ut(\"g\",nt),ut(\"GG\",J,q),ut(\"gg\",J,q),ut(\"GGGG\",tt,X),ut(\"gggg\",tt,X),ut(\"GGGGG\",et,$),ut(\"ggggg\",et,$),dt([\"gggg\",\"ggggg\",\"GGGG\",\"GGGGG\"],function(t,e,r,n){e[n.substr(0,2)]=b(t)}),dt([\"gg\",\"GG\"],function(t,e,n,i){e[i]=r.parseTwoDigitYear(t)}),B(\"Q\",0,\"Qo\",\"quarter\"),P(\"quarter\",\"Q\"),I(\"quarter\",7),ut(\"Q\",W),ft(\"Q\",function(t,e){e[mt]=3*(b(t)-1)}),B(\"D\",[\"DD\",2],\"Do\",\"date\"),P(\"date\",\"D\"),I(\"date\",9),ut(\"D\",J),ut(\"DD\",J,q),ut(\"Do\",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),ft([\"D\",\"DD\"],gt),ft(\"Do\",function(t,e){e[gt]=b(t.match(J)[0])});var er=At(\"Date\",!0);B(\"DDD\",[\"DDDD\",3],\"DDDo\",\"dayOfYear\"),P(\"dayOfYear\",\"DDD\"),I(\"dayOfYear\",4),ut(\"DDD\",K),ut(\"DDDD\",Y),ft([\"DDD\",\"DDDD\"],function(t,e,r){r._dayOfYear=b(t)}),B(\"m\",[\"mm\",2],0,\"minute\"),P(\"minute\",\"m\"),I(\"minute\",14),ut(\"m\",J),ut(\"mm\",J,q),ft([\"m\",\"mm\"],yt);var rr=At(\"Minutes\",!1);B(\"s\",[\"ss\",2],0,\"second\"),P(\"second\",\"s\"),I(\"second\",15),ut(\"s\",J),ut(\"ss\",J,q),ft([\"s\",\"ss\"],wt);var nr,ir=At(\"Seconds\",!1);for(B(\"S\",0,0,function(){return~~(this.millisecond()/100)}),B(0,[\"SS\",2],0,function(){return~~(this.millisecond()/10)}),B(0,[\"SSS\",3],0,\"millisecond\"),B(0,[\"SSSS\",4],0,function(){return 10*this.millisecond()}),B(0,[\"SSSSS\",5],0,function(){return 100*this.millisecond()}),B(0,[\"SSSSSS\",6],0,function(){return 1e3*this.millisecond()}),B(0,[\"SSSSSSS\",7],0,function(){return 1e4*this.millisecond()}),B(0,[\"SSSSSSSS\",8],0,function(){return 1e5*this.millisecond()}),B(0,[\"SSSSSSSSS\",9],0,function(){return 1e6*this.millisecond()}),P(\"millisecond\",\"ms\"),I(\"millisecond\",16),ut(\"S\",K,W),ut(\"SS\",K,q),ut(\"SSS\",K,Y),nr=\"SSSS\";nr.length<=9;nr+=\"S\")ut(nr,rt);function or(t,e){e[xt]=b(1e3*(\"0.\"+t))}for(nr=\"S\";nr.length<=9;nr+=\"S\")ft(nr,or);var sr=At(\"Milliseconds\",!1);B(\"z\",0,0,\"zoneAbbr\"),B(\"zz\",0,0,\"zoneName\");var ar=y.prototype;function ur(t){return t}ar.add=Ye,ar.calendar=function(t,e){var n=t||Te(),i=Fe(n,this).startOf(\"day\"),o=r.calendarFormat(this,i)||\"sameElse\",s=e&&(R(e[o])?e[o].call(this,n):e[o]);return this.format(s||this.localeData().calendar(o,this,Te(n)))},ar.clone=function(){return new y(this)},ar.diff=function(t,e,r){var n,i,o;if(!this.isValid())return NaN;if(!(n=Fe(t,this)).isValid())return NaN;switch(i=6e4*(n.utcOffset()-this.utcOffset()),e=D(e)){case\"year\":o=$e(this,n)/12;break;case\"month\":o=$e(this,n);break;case\"quarter\":o=$e(this,n)/3;break;case\"second\":o=(this-n)/1e3;break;case\"minute\":o=(this-n)/6e4;break;case\"hour\":o=(this-n)/36e5;break;case\"day\":o=(this-n-i)/864e5;break;case\"week\":o=(this-n-i)/6048e5;break;default:o=this-n}return r?o:x(o)},ar.endOf=function(t){return void 0===(t=D(t))||\"millisecond\"===t?this:(\"date\"===t&&(t=\"day\"),this.startOf(t).add(1,\"isoWeek\"===t?\"week\":t).subtract(1,\"ms\"))},ar.format=function(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=H(this,t);return this.localeData().postformat(e)},ar.from=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||Te(t).isValid())?Be({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},ar.fromNow=function(t){return this.from(Te(),t)},ar.to=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||Te(t).isValid())?Be({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},ar.toNow=function(t){return this.to(Te(),t)},ar.get=function(t){return R(this[t=D(t)])?this[t]():this},ar.invalidAt=function(){return f(this).overflow},ar.isAfter=function(t,e){var r=w(t)?t:Te(t);return!(!this.isValid()||!r.isValid())&&(\"millisecond\"===(e=D(o(e)?\"millisecond\":e))?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(e).valueOf())},ar.isBefore=function(t,e){var r=w(t)?t:Te(t);return!(!this.isValid()||!r.isValid())&&(\"millisecond\"===(e=D(o(e)?\"millisecond\":e))?this.valueOf()<r.valueOf():this.clone().endOf(e).valueOf()<r.valueOf())},ar.isBetween=function(t,e,r,n){return(\"(\"===(n=n||\"()\")[0]?this.isAfter(t,r):!this.isBefore(t,r))&&(\")\"===n[1]?this.isBefore(e,r):!this.isAfter(e,r))},ar.isSame=function(t,e){var r,n=w(t)?t:Te(t);return!(!this.isValid()||!n.isValid())&&(\"millisecond\"===(e=D(e||\"millisecond\"))?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf()))},ar.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},ar.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},ar.isValid=function(){return d(this)},ar.lang=Ze,ar.locale=Je,ar.localeData=Qe,ar.max=Re,ar.min=Ae,ar.parsingFlags=function(){return l({},f(this))},ar.set=function(t,e){if(\"object\"==typeof t)for(var r=function(t){var e=[];for(var r in t)e.push({unit:r,priority:N[r]});return e.sort(function(t,e){return t.priority-e.priority}),e}(t=O(t)),n=0;n<r.length;n++)this[r[n].unit](t[r[n].unit]);else if(R(this[t=D(t)]))return this[t](e);return this},ar.startOf=function(t){switch(t=D(t)){case\"year\":this.month(0);case\"quarter\":case\"month\":this.date(1);case\"week\":case\"isoWeek\":case\"day\":case\"date\":this.hours(0);case\"hour\":this.minutes(0);case\"minute\":this.seconds(0);case\"second\":this.milliseconds(0)}return\"week\"===t&&this.weekday(0),\"isoWeek\"===t&&this.isoWeekday(1),\"quarter\"===t&&this.month(3*Math.floor(this.month()/3)),this},ar.subtract=Xe,ar.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},ar.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},ar.toDate=function(){return new Date(this.valueOf())},ar.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,r=e?this.clone().utc():this;return r.year()<0||9999<r.year()?H(r,e?\"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]\":\"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ\"):R(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace(\"Z\",H(r,\"Z\")):H(r,e?\"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]\":\"YYYY-MM-DD[T]HH:mm:ss.SSSZ\")},ar.inspect=function(){if(!this.isValid())return\"moment.invalid(/* \"+this._i+\" */)\";var t=\"moment\",e=\"\";this.isLocal()||(t=0===this.utcOffset()?\"moment.utc\":\"moment.parseZone\",e=\"Z\");var r=\"[\"+t+'(\"]',n=0<=this.year()&&this.year()<=9999?\"YYYY\":\"YYYYYY\";return this.format(r+n+\"-MM-DD[T]HH:mm:ss.SSS\"+e+'[\")]')},ar.toJSON=function(){return this.isValid()?this.toISOString():null},ar.toString=function(){return this.clone().locale(\"en\").format(\"ddd MMM DD YYYY HH:mm:ss [GMT]ZZ\")},ar.unix=function(){return Math.floor(this.valueOf()/1e3)},ar.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ar.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ar.year=Tt,ar.isLeapYear=function(){return St(this.year())},ar.weekYear=function(t){return tr.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ar.isoWeekYear=function(t){return tr.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},ar.quarter=ar.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},ar.month=Nt,ar.daysInMonth=function(){return Ct(this.year(),this.month())},ar.week=ar.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),\"d\")},ar.isoWeek=ar.isoWeeks=function(t){var e=Bt(this,1,4).week;return null==t?e:this.add(7*(t-e),\"d\")},ar.weeksInYear=function(){var t=this.localeData()._week;return Ht(this.year(),t.dow,t.doy)},ar.isoWeeksInYear=function(){return Ht(this.year(),1,4)},ar.date=er,ar.day=ar.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e,r,n=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(e=t,r=this.localeData(),t=\"string\"!=typeof e?e:isNaN(e)?\"number\"==typeof(e=r.weekdaysParse(e))?e:null:parseInt(e,10),this.add(t-n,\"d\")):n},ar.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,\"d\")},ar.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=(r=t,n=this.localeData(),\"string\"==typeof r?n.weekdaysParse(r)%7||7:isNaN(r)?null:r);return this.day(this.day()%7?e:e-7)}return this.day()||7;var r,n},ar.dayOfYear=function(t){var e=Math.round((this.clone().startOf(\"day\")-this.clone().startOf(\"year\"))/864e5)+1;return null==t?e:this.add(t-e,\"d\")},ar.hour=ar.hours=ee,ar.minute=ar.minutes=rr,ar.second=ar.seconds=ir,ar.millisecond=ar.milliseconds=sr,ar.utcOffset=function(t,e,n){var i,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if(\"string\"==typeof t){if(null===(t=Ie(ot,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=ze(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,\"m\"),o!==t&&(!e||this._changeInProgress?qe(this,Be(t-o,\"m\"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:ze(this)},ar.utc=function(t){return this.utcOffset(0,t)},ar.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(ze(this),\"m\")),this},ar.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if(\"string\"==typeof this._i){var t=Ie(it,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},ar.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Te(t).utcOffset():0,(this.utcOffset()-t)%60==0)},ar.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ar.isLocal=function(){return!!this.isValid()&&!this._isUTC},ar.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ar.isUtc=Ue,ar.isUTC=Ue,ar.zoneAbbr=function(){return this._isUTC?\"UTC\":\"\"},ar.zoneName=function(){return this._isUTC?\"Coordinated Universal Time\":\"\"},ar.dates=S(\"dates accessor is deprecated. Use date instead.\",er),ar.months=S(\"months accessor is deprecated. Use month instead\",Nt),ar.years=S(\"years accessor is deprecated. Use year instead\",Tt),ar.zone=S(\"moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/\",function(t,e){return null!=t?(\"string\"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),ar.isDSTShifted=S(\"isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information\",function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var t={};if(g(t,this),(t=Se(t))._a){var e=t._isUTC?h(t._a):Te(t._a);this._isDSTShifted=this.isValid()&&0<_(t._a,e.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var cr=C.prototype;function lr(t,e,r,n){var i=ce(),o=h().set(n,e);return i[r](o,t)}function hr(t,e,r){if(s(t)&&(e=t,t=void 0),t=t||\"\",null!=e)return lr(t,e,r,\"month\");var n,i=[];for(n=0;n<12;n++)i[n]=lr(t,n,r,\"month\");return i}function fr(t,e,r,n){\"boolean\"==typeof t?s(e)&&(r=e,e=void 0):(e=t,t=!1,s(r=e)&&(r=e,e=void 0)),e=e||\"\";var i,o=ce(),a=t?o._week.dow:0;if(null!=r)return lr(e,(r+a)%7,n,\"day\");var u=[];for(i=0;i<7;i++)u[i]=lr(e,(i+a)%7,n,\"day\");return u}cr.calendar=function(t,e,r){var n=this._calendar[t]||this._calendar.sameElse;return R(n)?n.call(e,r):n},cr.longDateFormat=function(t){var e=this._longDateFormat[t],r=this._longDateFormat[t.toUpperCase()];return e||!r?e:(this._longDateFormat[t]=r.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])},cr.invalidDate=function(){return this._invalidDate},cr.ordinal=function(t){return this._ordinal.replace(\"%d\",t)},cr.preparse=ur,cr.postformat=ur,cr.relativeTime=function(t,e,r,n){var i=this._relativeTime[r];return R(i)?i(t,e,r,n):i.replace(/%d/i,t)},cr.pastFuture=function(t,e){var r=this._relativeTime[0<t?\"future\":\"past\"];return R(r)?r(e):r.replace(/%s/i,e)},cr.set=function(t){var e,r;for(r in t)R(e=t[r])?this[r]=e:this[\"_\"+r]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+\"|\"+/\\d{1,2}/.source)},cr.months=function(t,e){return t?n(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Lt).test(e)?\"format\":\"standalone\"][t.month()]:n(this._months)?this._months:this._months.standalone},cr.monthsShort=function(t,e){return t?n(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Lt.test(e)?\"format\":\"standalone\"][t.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},cr.monthsParse=function(t,e,r){var n,i,o;if(this._monthsParseExact)return(function(t,e,r){var n,i,o,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)o=h([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,\"\").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,\"\").toLocaleLowerCase();return r?\"MMM\"===e?-1!==(i=Et.call(this._shortMonthsParse,s))?i:null:-1!==(i=Et.call(this._longMonthsParse,s))?i:null:\"MMM\"===e?-1!==(i=Et.call(this._shortMonthsParse,s))?i:-1!==(i=Et.call(this._longMonthsParse,s))?i:null:-1!==(i=Et.call(this._longMonthsParse,s))?i:-1!==(i=Et.call(this._shortMonthsParse,s))?i:null}).call(this,t,e,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(i=h([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp(\"^\"+this.months(i,\"\").replace(\".\",\"\")+\"$\",\"i\"),this._shortMonthsParse[n]=new RegExp(\"^\"+this.monthsShort(i,\"\").replace(\".\",\"\")+\"$\",\"i\")),r||this._monthsParse[n]||(o=\"^\"+this.months(i,\"\")+\"|^\"+this.monthsShort(i,\"\"),this._monthsParse[n]=new RegExp(o.replace(\".\",\"\"),\"i\")),r&&\"MMMM\"===e&&this._longMonthsParse[n].test(t))return n;if(r&&\"MMM\"===e&&this._shortMonthsParse[n].test(t))return n;if(!r&&this._monthsParse[n].test(t))return n}},cr.monthsRegex=function(t){return this._monthsParseExact?(c(this,\"_monthsRegex\")||zt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(c(this,\"_monthsRegex\")||(this._monthsRegex=Ft),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},cr.monthsShortRegex=function(t){return this._monthsParseExact?(c(this,\"_monthsRegex\")||zt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,\"_monthsShortRegex\")||(this._monthsShortRegex=It),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},cr.week=function(t){return Bt(t,this._week.dow,this._week.doy).week},cr.firstDayOfYear=function(){return this._week.doy},cr.firstDayOfWeek=function(){return this._week.dow},cr.weekdays=function(t,e){return t?n(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?\"format\":\"standalone\"][t.day()]:n(this._weekdays)?this._weekdays:this._weekdays.standalone},cr.weekdaysMin=function(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin},cr.weekdaysShort=function(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort},cr.weekdaysParse=function(t,e,r){var n,i,o;if(this._weekdaysParseExact)return(function(t,e,r){var n,i,o,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)o=h([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,\"\").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,\"\").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,\"\").toLocaleLowerCase();return r?\"dddd\"===e?-1!==(i=Et.call(this._weekdaysParse,s))?i:null:\"ddd\"===e?-1!==(i=Et.call(this._shortWeekdaysParse,s))?i:null:-1!==(i=Et.call(this._minWeekdaysParse,s))?i:null:\"dddd\"===e?-1!==(i=Et.call(this._weekdaysParse,s))?i:-1!==(i=Et.call(this._shortWeekdaysParse,s))?i:-1!==(i=Et.call(this._minWeekdaysParse,s))?i:null:\"ddd\"===e?-1!==(i=Et.call(this._shortWeekdaysParse,s))?i:-1!==(i=Et.call(this._weekdaysParse,s))?i:-1!==(i=Et.call(this._minWeekdaysParse,s))?i:null:-1!==(i=Et.call(this._minWeekdaysParse,s))?i:-1!==(i=Et.call(this._weekdaysParse,s))?i:-1!==(i=Et.call(this._shortWeekdaysParse,s))?i:null}).call(this,t,e,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(i=h([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp(\"^\"+this.weekdays(i,\"\").replace(\".\",\".?\")+\"$\",\"i\"),this._shortWeekdaysParse[n]=new RegExp(\"^\"+this.weekdaysShort(i,\"\").replace(\".\",\".?\")+\"$\",\"i\"),this._minWeekdaysParse[n]=new RegExp(\"^\"+this.weekdaysMin(i,\"\").replace(\".\",\".?\")+\"$\",\"i\")),this._weekdaysParse[n]||(o=\"^\"+this.weekdays(i,\"\")+\"|^\"+this.weekdaysShort(i,\"\")+\"|^\"+this.weekdaysMin(i,\"\"),this._weekdaysParse[n]=new RegExp(o.replace(\".\",\"\"),\"i\")),r&&\"dddd\"===e&&this._fullWeekdaysParse[n].test(t))return n;if(r&&\"ddd\"===e&&this._shortWeekdaysParse[n].test(t))return n;if(r&&\"dd\"===e&&this._minWeekdaysParse[n].test(t))return n;if(!r&&this._weekdaysParse[n].test(t))return n}},cr.weekdaysRegex=function(t){return this._weekdaysParseExact?(c(this,\"_weekdaysRegex\")||Jt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,\"_weekdaysRegex\")||(this._weekdaysRegex=Yt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},cr.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(c(this,\"_weekdaysRegex\")||Jt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,\"_weekdaysShortRegex\")||(this._weekdaysShortRegex=Xt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},cr.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(c(this,\"_weekdaysRegex\")||Jt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,\"_weekdaysMinRegex\")||(this._weekdaysMinRegex=$t),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},cr.isPM=function(t){return\"p\"===(t+\"\").toLowerCase().charAt(0)},cr.meridiem=function(t,e,r){return 11<t?r?\"pm\":\"PM\":r?\"am\":\"AM\"},ae(\"en\",{dayOfMonthOrdinalParse:/\\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===b(t%100/10)?\"th\":1===e?\"st\":2===e?\"nd\":3===e?\"rd\":\"th\")}}),r.lang=S(\"moment.lang is deprecated. Use moment.locale instead.\",ae),r.langData=S(\"moment.langData is deprecated. Use moment.localeData instead.\",ce);var dr=Math.abs;function pr(t,e,r,n){var i=Be(e,r);return t._milliseconds+=n*i._milliseconds,t._days+=n*i._days,t._months+=n*i._months,t._bubble()}function mr(t){return t<0?Math.floor(t):Math.ceil(t)}function gr(t){return 4800*t/146097}function vr(t){return 146097*t/4800}function yr(t){return function(){return this.as(t)}}var wr=yr(\"ms\"),xr=yr(\"s\"),br=yr(\"m\"),_r=yr(\"h\"),Mr=yr(\"d\"),Sr=yr(\"w\"),Er=yr(\"M\"),Tr=yr(\"y\");function Ar(t){return function(){return this.isValid()?this._data[t]:NaN}}var Rr=Ar(\"milliseconds\"),kr=Ar(\"seconds\"),Cr=Ar(\"minutes\"),Lr=Ar(\"hours\"),Pr=Ar(\"days\"),Dr=Ar(\"months\"),Or=Ar(\"years\"),Nr=Math.round,Ir={ss:44,s:45,m:45,h:22,d:26,M:11},Fr=Math.abs;function zr(t){return(0<t)-(t<0)||+t}function Ur(){if(!this.isValid())return this.localeData().invalidDate();var t,e,r=Fr(this._milliseconds)/1e3,n=Fr(this._days),i=Fr(this._months);e=x((t=x(r/60))/60),r%=60,t%=60;var o=x(i/12),s=i%=12,a=n,u=e,c=t,l=r?r.toFixed(3).replace(/\\.?0+$/,\"\"):\"\",h=this.asSeconds();if(!h)return\"P0D\";var f=h<0?\"-\":\"\",d=zr(this._months)!==zr(h)?\"-\":\"\",p=zr(this._days)!==zr(h)?\"-\":\"\",m=zr(this._milliseconds)!==zr(h)?\"-\":\"\";return f+\"P\"+(o?d+o+\"Y\":\"\")+(s?d+s+\"M\":\"\")+(a?p+a+\"D\":\"\")+(u||c||l?\"T\":\"\")+(u?m+u+\"H\":\"\")+(c?m+c+\"M\":\"\")+(l?m+l+\"S\":\"\")}var jr=Le.prototype;return jr.isValid=function(){return this._isValid},jr.abs=function(){var t=this._data;return this._milliseconds=dr(this._milliseconds),this._days=dr(this._days),this._months=dr(this._months),t.milliseconds=dr(t.milliseconds),t.seconds=dr(t.seconds),t.minutes=dr(t.minutes),t.hours=dr(t.hours),t.months=dr(t.months),t.years=dr(t.years),this},jr.add=function(t,e){return pr(this,t,e,1)},jr.subtract=function(t,e){return pr(this,t,e,-1)},jr.as=function(t){if(!this.isValid())return NaN;var e,r,n=this._milliseconds;if(\"month\"===(t=D(t))||\"year\"===t)return r=this._months+gr(e=this._days+n/864e5),\"month\"===t?r:r/12;switch(e=this._days+Math.round(vr(this._months)),t){case\"week\":return e/7+n/6048e5;case\"day\":return e+n/864e5;case\"hour\":return 24*e+n/36e5;case\"minute\":return 1440*e+n/6e4;case\"second\":return 86400*e+n/1e3;case\"millisecond\":return Math.floor(864e5*e)+n;default:throw new Error(\"Unknown unit \"+t)}},jr.asMilliseconds=wr,jr.asSeconds=xr,jr.asMinutes=br,jr.asHours=_r,jr.asDays=Mr,jr.asWeeks=Sr,jr.asMonths=Er,jr.asYears=Tr,jr.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12):NaN},jr._bubble=function(){var t,e,r,n,i,o=this._milliseconds,s=this._days,a=this._months,u=this._data;return 0<=o&&0<=s&&0<=a||o<=0&&s<=0&&a<=0||(o+=864e5*mr(vr(a)+s),a=s=0),u.milliseconds=o%1e3,t=x(o/1e3),u.seconds=t%60,e=x(t/60),u.minutes=e%60,r=x(e/60),u.hours=r%24,a+=i=x(gr(s+=x(r/24))),s-=mr(vr(i)),n=x(a/12),a%=12,u.days=s,u.months=a,u.years=n,this},jr.clone=function(){return Be(this)},jr.get=function(t){return t=D(t),this.isValid()?this[t+\"s\"]():NaN},jr.milliseconds=Rr,jr.seconds=kr,jr.minutes=Cr,jr.hours=Lr,jr.days=Pr,jr.weeks=function(){return x(this.days()/7)},jr.months=Dr,jr.years=Or,jr.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e,r,n,i,o,s,a,u,c,l,h=this.localeData(),f=(e=!t,r=h,n=Be(this).abs(),i=Nr(n.as(\"s\")),o=Nr(n.as(\"m\")),s=Nr(n.as(\"h\")),a=Nr(n.as(\"d\")),u=Nr(n.as(\"M\")),c=Nr(n.as(\"y\")),(l=i<=Ir.ss&&[\"s\",i]||i<Ir.s&&[\"ss\",i]||o<=1&&[\"m\"]||o<Ir.m&&[\"mm\",o]||s<=1&&[\"h\"]||s<Ir.h&&[\"hh\",s]||a<=1&&[\"d\"]||a<Ir.d&&[\"dd\",a]||u<=1&&[\"M\"]||u<Ir.M&&[\"MM\",u]||c<=1&&[\"y\"]||[\"yy\",c])[2]=e,l[3]=0<+this,l[4]=r,(function(t,e,r,n,i){return i.relativeTime(e||1,!!r,t,n)}).apply(null,l));return t&&(f=h.pastFuture(+this,f)),h.postformat(f)},jr.toISOString=Ur,jr.toString=Ur,jr.toJSON=Ur,jr.locale=Je,jr.localeData=Qe,jr.toIsoString=S(\"toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)\",Ur),jr.lang=Ze,B(\"X\",0,0,\"unix\"),B(\"x\",0,0,\"valueOf\"),ut(\"x\",nt),ut(\"X\",/[+-]?\\d+(\\.\\d{1,3})?/),ft(\"X\",function(t,e,r){r._d=new Date(1e3*parseFloat(t,10))}),ft(\"x\",function(t,e,r){r._d=new Date(b(t))}),r.version=\"2.22.1\",t=Te,r.fn=ar,r.min=function(){return ke(\"isBefore\",[].slice.call(arguments,0))},r.max=function(){return ke(\"isAfter\",[].slice.call(arguments,0))},r.now=function(){return Date.now?Date.now():+new Date},r.utc=h,r.unix=function(t){return Te(1e3*t)},r.months=function(t,e){return hr(t,e,\"months\")},r.isDate=a,r.locale=ae,r.invalid=p,r.duration=Be,r.isMoment=w,r.weekdays=function(t,e,r){return fr(t,e,r,\"weekdays\")},r.parseZone=function(){return Te.apply(null,arguments).parseZone()},r.localeData=ce,r.isDuration=Pe,r.monthsShort=function(t,e){return hr(t,e,\"monthsShort\")},r.weekdaysMin=function(t,e,r){return fr(t,e,r,\"weekdaysMin\")},r.defineLocale=ue,r.updateLocale=function(t,e){if(null!=e){var r,n,i=re;null!=(n=se(t))&&(i=n._config),(r=new C(e=k(i,e))).parentLocale=ne[t],ne[t]=r,ae(t)}else null!=ne[t]&&(null!=ne[t].parentLocale?ne[t]=ne[t].parentLocale:null!=ne[t]&&delete ne[t]);return ne[t]},r.locales=function(){return E(ne)},r.weekdaysShort=function(t,e,r){return fr(t,e,r,\"weekdaysShort\")},r.normalizeUnits=D,r.relativeTimeRounding=function(t){return void 0===t?Nr:\"function\"==typeof t&&(Nr=t,!0)},r.relativeTimeThreshold=function(t,e){return void 0!==Ir[t]&&(void 0===e?Ir[t]:(Ir[t]=e,\"s\"===t&&(Ir.ss=e-1),!0))},r.calendarFormat=function(t,e){var r=t.diff(e,\"days\",!0);return r<-6?\"sameElse\":r<-1?\"lastWeek\":r<0?\"lastDay\":r<1?\"sameDay\":r<2?\"nextDay\":r<7?\"nextWeek\":\"sameElse\"},r.prototype=ar,r.HTML5_FMT={DATETIME_LOCAL:\"YYYY-MM-DDTHH:mm\",DATETIME_LOCAL_SECONDS:\"YYYY-MM-DDTHH:mm:ss\",DATETIME_LOCAL_MS:\"YYYY-MM-DDTHH:mm:ss.SSS\",DATE:\"YYYY-MM-DD\",TIME:\"HH:mm\",TIME_SECONDS:\"HH:mm:ss\",TIME_MS:\"HH:mm:ss.SSS\",WEEK:\"YYYY-[W]WW\",MONTH:\"YYYY-MM\"},r}),function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e(t.THREE={})}(this,function(t){function e(){}function r(t,e){this.x=t||0,this.y=e||0}function n(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error(\"THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.\")}function i(t,e,r,n){this._x=t||0,this._y=e||0,this._z=r||0,this._w=void 0!==n?n:1}function o(t,e,r){this.x=t||0,this.y=e||0,this.z=r||0}function s(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error(\"THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.\")}function a(t,e,n,i,o,u,c,l,h,f){Object.defineProperty(this,\"id\",{value:Ei++}),this.uuid=Si.generateUUID(),this.name=\"\",this.image=void 0!==t?t:a.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:a.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:1001,this.wrapT=void 0!==i?i:1001,this.magFilter=void 0!==o?o:1006,this.minFilter=void 0!==u?u:1008,this.anisotropy=void 0!==h?h:1,this.format=void 0!==c?c:1023,this.type=void 0!==l?l:1009,this.offset=new r(0,0),this.repeat=new r(1,1),this.center=new r(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new s,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==f?f:3e3,this.version=0,this.onUpdate=null}function u(t,e,r,n){this.x=t||0,this.y=e||0,this.z=r||0,this.w=void 0!==n?n:1}function c(t,e,r){this.width=t,this.height=e,this.scissor=new u(0,0,t,e),this.scissorTest=!1,this.viewport=new u(0,0,t,e),void 0===(r=r||{}).minFilter&&(r.minFilter=1006),this.texture=new a(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function l(t,e,r){c.call(this,t,e,r),this.activeMipMapLevel=this.activeCubeFace=0}function h(t,e,r,n,i,o,s,u,c,l,h,f){a.call(this,null,o,s,u,c,l,n,i,h,f),this.image={data:t,width:e,height:r},this.magFilter=void 0!==c?c:1003,this.minFilter=void 0!==l?l:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function f(t,e){this.min=void 0!==t?t:new o(1/0,1/0,1/0),this.max=void 0!==e?e:new o(-1/0,-1/0,-1/0)}function d(t,e){this.center=void 0!==t?t:new o,this.radius=void 0!==e?e:0}function p(t,e){this.normal=void 0!==t?t:new o(1,0,0),this.constant=void 0!==e?e:0}function m(t,e,r,n,i,o){this.planes=[void 0!==t?t:new p,void 0!==e?e:new p,void 0!==r?r:new p,void 0!==n?n:new p,void 0!==i?i:new p,void 0!==o?o:new p]}function g(t,e,r){return void 0===e&&void 0===r?this.set(t):this.setRGB(t,e,r)}function v(t,e,r,n){this._x=t||0,this._y=e||0,this._z=r||0,this._order=n||v.DefaultOrder}function y(){this.mask=1}function w(){Object.defineProperty(this,\"id\",{value:Li++}),this.uuid=Si.generateUUID(),this.name=\"\",this.type=\"Object3D\",this.parent=null,this.children=[],this.up=w.DefaultUp.clone();var t=new o,e=new v,r=new i,a=new o(1,1,1);e.onChange(function(){r.setFromEuler(e,!1)}),r.onChange(function(){e.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:a},modelViewMatrix:{value:new n},normalMatrix:{value:new s}}),this.matrix=new n,this.matrixWorld=new n,this.matrixAutoUpdate=w.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new y,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function x(){w.call(this),this.type=\"Camera\",this.matrixWorldInverse=new n,this.projectionMatrix=new n}function b(t,e,r,n,i,o){x.call(this),this.type=\"OrthographicCamera\",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=r,this.bottom=n,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function _(t,e,r,n,i,s){this.a=t,this.b=e,this.c=r,this.normal=n&&n.isVector3?n:new o,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new g,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==s?s:0}function M(){Object.defineProperty(this,\"id\",{value:Pi+=2}),this.uuid=Si.generateUUID(),this.name=\"\",this.type=\"Geometry\",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function S(t,e,r){if(Array.isArray(t))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.name=\"\",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function E(t,e,r){S.call(this,new Int8Array(t),e,r)}function T(t,e,r){S.call(this,new Uint8Array(t),e,r)}function A(t,e,r){S.call(this,new Uint8ClampedArray(t),e,r)}function R(t,e,r){S.call(this,new Int16Array(t),e,r)}function k(t,e,r){S.call(this,new Uint16Array(t),e,r)}function C(t,e,r){S.call(this,new Int32Array(t),e,r)}function L(t,e,r){S.call(this,new Uint32Array(t),e,r)}function P(t,e,r){S.call(this,new Float32Array(t),e,r)}function D(t,e,r){S.call(this,new Float64Array(t),e,r)}function O(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function N(t){if(0===t.length)return-1/0;for(var e=t[0],r=1,n=t.length;r<n;++r)t[r]>e&&(e=t[r]);return e}function I(){Object.defineProperty(this,\"id\",{value:Di+=2}),this.uuid=Si.generateUUID(),this.name=\"\",this.type=\"BufferGeometry\",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0}}function F(t,e,r,n,i,o){M.call(this),this.type=\"BoxGeometry\",this.parameters={width:t,height:e,depth:r,widthSegments:n,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new z(t,e,r,n,i,o)),this.mergeVertices()}function z(t,e,r,n,i,s){function a(t,e,r,n,i,s,a,m,g,v,y){var w=s/g,x=a/v,b=s/2,_=a/2,M=m/2;a=g+1;var S,E,T=v+1,A=s=0,R=new o;for(E=0;E<T;E++){var k=E*x-_;for(S=0;S<a;S++)R[t]=(S*w-b)*n,R[e]=k*i,R[r]=M,l.push(R.x,R.y,R.z),R[t]=0,R[e]=0,R[r]=0<m?1:-1,h.push(R.x,R.y,R.z),f.push(S/g),f.push(1-E/v),s+=1}for(E=0;E<v;E++)for(S=0;S<g;S++)e=d+(S+1)+a*(E+1),c.push(d+S+a*E,t=d+S+a*(E+1),r=d+(S+1)+a*E),c.push(t,e,r),A+=6;u.addGroup(p,A,y),p+=A,d+=s}I.call(this),this.type=\"BoxBufferGeometry\",this.parameters={width:t,height:e,depth:r,widthSegments:n,heightSegments:i,depthSegments:s};var u=this;t=t||1,e=e||1,r=r||1,n=Math.floor(n)||1,i=Math.floor(i)||1;var c=[],l=[],h=[],f=[],d=0,p=0;a(\"z\",\"y\",\"x\",-1,-1,r,e,t,s=Math.floor(s)||1,i,0),a(\"z\",\"y\",\"x\",1,-1,r,e,-t,s,i,1),a(\"x\",\"z\",\"y\",1,1,t,r,e,n,s,2),a(\"x\",\"z\",\"y\",1,-1,t,r,-e,n,s,3),a(\"x\",\"y\",\"z\",1,-1,t,e,r,n,i,4),a(\"x\",\"y\",\"z\",-1,-1,t,e,-r,n,i,5),this.setIndex(c),this.addAttribute(\"position\",new P(l,3)),this.addAttribute(\"normal\",new P(h,3)),this.addAttribute(\"uv\",new P(f,2))}function U(t,e,r,n){M.call(this),this.type=\"PlaneGeometry\",this.parameters={width:t,height:e,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new j(t,e,r,n)),this.mergeVertices()}function j(t,e,r,n){I.call(this),this.type=\"PlaneBufferGeometry\",this.parameters={width:t,height:e,widthSegments:r,heightSegments:n};var i=(t=t||1)/2,o=(e=e||1)/2,s=(r=Math.floor(r)||1)+1,a=(n=Math.floor(n)||1)+1,u=t/r,c=e/n,l=[],h=[],f=[],d=[];for(t=0;t<a;t++){var p=t*c-o;for(e=0;e<s;e++)h.push(e*u-i,-p,0),f.push(0,0,1),d.push(e/r),d.push(1-t/n)}for(t=0;t<n;t++)for(e=0;e<r;e++)o=e+1+s*(t+1),l.push(e+s*t,i=e+s*(t+1),a=e+1+s*t),l.push(i,o,a);this.setIndex(l),this.addAttribute(\"position\",new P(h,3)),this.addAttribute(\"normal\",new P(f,3)),this.addAttribute(\"uv\",new P(d,2))}function V(){Object.defineProperty(this,\"id\",{value:Oi++}),this.uuid=Si.generateUUID(),this.name=\"\",this.type=\"Material\",this.lights=this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function B(t){V.call(this),this.type=\"MeshBasicMaterial\",this.color=new g(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap=\"round\",this.lights=this.morphTargets=this.skinning=!1,this.setValues(t)}function H(t){V.call(this),this.type=\"ShaderMaterial\",this.defines={},this.uniforms={},this.vertexShader=\"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\",this.fragmentShader=\"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error(\"THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.\"),this.setValues(t))}function G(t,e){this.origin=void 0!==t?t:new o,this.direction=void 0!==e?e:new o}function W(t,e){this.start=void 0!==t?t:new o,this.end=void 0!==e?e:new o}function q(t,e,r){this.a=void 0!==t?t:new o,this.b=void 0!==e?e:new o,this.c=void 0!==r?r:new o}function Y(t,e){w.call(this),this.type=\"Mesh\",this.geometry=void 0!==t?t:new I,this.material=void 0!==e?e:new B({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function X(t,e,r,n){function i(t,r){e.buffers.color.setClear(t.r,t.g,t.b,r,n)}var o,s,a,u=new g(0),c=0;return{getClearColor:function(){return u},setClearColor:function(t,e){u.set(t),i(u,c=void 0!==e?e:1)},getClearAlpha:function(){return c},setClearAlpha:function(t){i(u,c=t)},render:function(e,n,l,h){null===(n=n.background)?i(u,c):n&&n.isColor&&(i(n,1),h=!0),(t.autoClear||h)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),n&&n.isCubeTexture?(void 0===a&&((a=new Y(new z(1,1,1),new H({uniforms:Ci.cube.uniforms,vertexShader:Ci.cube.vertexShader,fragmentShader:Ci.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute(\"normal\"),a.geometry.removeAttribute(\"uv\"),a.onBeforeRender=function(t,e,r){this.matrixWorld.copyPosition(r.matrixWorld)},r.update(a.geometry)),a.material.uniforms.tCube.value=n,e.push(a,a.geometry,a.material,0,null)):n&&n.isTexture&&(void 0===o&&(o=new b(-1,1,1,-1,0,1),s=new Y(new j(2,2),new B({depthTest:!1,depthWrite:!1,fog:!1})),r.update(s.geometry)),s.material.map=n,t.renderBufferDirect(o,null,s.geometry,s.material,s,null))}}}function $(){function t(){l.value!==n&&(l.value=n,l.needsUpdate=0<i),r.numPlanes=i,r.numIntersection=0}function e(t,e,n,i){var o=null!==t?t.length:0,s=null;if(0!==o){if(s=l.value,!0!==i||null===s)for(i=n+4*o,c.getNormalMatrix(e=e.matrixWorldInverse),(null===s||s.length<i)&&(s=new Float32Array(i)),i=0;i!==o;++i,n+=4)u.copy(t[i]).applyMatrix4(e,c),u.normal.toArray(s,n),s[n+3]=u.constant;l.value=s,l.needsUpdate=!0}return r.numPlanes=o,s}var r=this,n=null,i=0,o=!1,a=!1,u=new p,c=new s,l={value:null,needsUpdate:!1};this.uniform=l,this.numIntersection=this.numPlanes=0,this.init=function(t,r,s){var a=0!==t.length||r||0!==i||o;return o=r,n=e(t,s,0),i=t.length,a},this.beginShadows=function(){a=!0,e(null)},this.endShadows=function(){a=!1,t()},this.setState=function(r,s,u,c,h,f){if(!o||null===r||0===r.length||a&&!u)a?e(null):t();else{var d=4*(u=a?0:i),p=h.clippingState||null;for(l.value=p,p=e(r,c,d,f),r=0;r!==d;++r)p[r]=n[r];h.clippingState=p,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=u}}}function J(t,e,r){function n(t){var s=i[(t=t.target).id];for(var a in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[a]);t.removeEventListener(\"dispose\",n),delete i[t.id],(a=o[t.id])&&(e.remove(a),delete o[t.id]),(a=o[s.id])&&(e.remove(a),delete o[s.id]),r.memory.geometries--}var i={},o={};return{get:function(t,e){var o=i[e.id];return o||(e.addEventListener(\"dispose\",n),e.isBufferGeometry?o=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new I).setFromObject(t)),o=e._bufferGeometry),i[e.id]=o,r.memory.geometries++,o)},update:function(r){var n=r.index,i=r.attributes;for(var o in null!==n&&e.update(n,t.ELEMENT_ARRAY_BUFFER),i)e.update(i[o],t.ARRAY_BUFFER);for(o in r=r.morphAttributes){i=0;for(var s=(n=r[o]).length;i<s;i++)e.update(n[i],t.ARRAY_BUFFER)}},getWireframeAttribute:function(r){var n=o[r.id];if(n)return n;n=[];var i=r.index,s=r.attributes;if(null!==i){s=0;for(var a=(i=i.array).length;s<a;s+=3){var u=i[s+0],c=i[s+1],l=i[s+2];n.push(u,c,c,l,l,u)}}else for(i=s.position.array,s=0,a=i.length/3-1;s<a;s+=3)n.push(u=s+0,c=s+1,c,l=s+2,l,u);return n=new(65535<N(n)?L:k)(n,1),e.update(n,t.ELEMENT_ARRAY_BUFFER),o[r.id]=n}}}function Z(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Q(t,e,r,n,i,o,s,u,c,l){a.call(this,t=void 0!==t?t:[],void 0!==e?e:301,r,n,i,o,s,u,c,l),this.flipY=!1}function K(t,e,r){var n=t[0];if(0>=n||0<n)return t;var i=e*r,o=Fi[i];if(void 0===o&&(o=new Float32Array(i),Fi[i]=o),0!==e)for(n.toArray(o,0),n=1,i=0;n!==e;++n)t[n].toArray(o,i+=r);return o}function tt(t,e){var r=zi[e];void 0===r&&(r=new Int32Array(e),zi[e]=r);for(var n=0;n!==e;++n)r[n]=t.allocTextureUnit();return r}function et(t,e){t.uniform1f(this.addr,e)}function rt(t,e){t.uniform1i(this.addr,e)}function nt(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function it(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function ot(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function st(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function at(t,e){void 0===e.elements?t.uniformMatrix3fv(this.addr,!1,e):(ji.set(e.elements),t.uniformMatrix3fv(this.addr,!1,ji))}function ut(t,e){void 0===e.elements?t.uniformMatrix4fv(this.addr,!1,e):(Ui.set(e.elements),t.uniformMatrix4fv(this.addr,!1,Ui))}function ct(t,e,r){var n=r.allocTextureUnit();t.uniform1i(this.addr,n),r.setTexture2D(e||Ni,n)}function lt(t,e,r){var n=r.allocTextureUnit();t.uniform1i(this.addr,n),r.setTextureCube(e||Ii,n)}function ht(t,e){t.uniform2iv(this.addr,e)}function ft(t,e){t.uniform3iv(this.addr,e)}function dt(t,e){t.uniform4iv(this.addr,e)}function pt(t,e){t.uniform1fv(this.addr,e)}function mt(t,e){t.uniform1iv(this.addr,e)}function gt(t,e){t.uniform2fv(this.addr,K(e,this.size,2))}function vt(t,e){t.uniform3fv(this.addr,K(e,this.size,3))}function yt(t,e){t.uniform4fv(this.addr,K(e,this.size,4))}function wt(t,e){t.uniformMatrix2fv(this.addr,!1,K(e,this.size,4))}function xt(t,e){t.uniformMatrix3fv(this.addr,!1,K(e,this.size,9))}function bt(t,e){t.uniformMatrix4fv(this.addr,!1,K(e,this.size,16))}function _t(t,e,r){var n=e.length,i=tt(r,n);for(t.uniform1iv(this.addr,i),t=0;t!==n;++t)r.setTexture2D(e[t]||Ni,i[t])}function Mt(t,e,r){var n=e.length,i=tt(r,n);for(t.uniform1iv(this.addr,i),t=0;t!==n;++t)r.setTextureCube(e[t]||Ii,i[t])}function St(t,e,r){this.id=t,this.addr=r,this.setValue=function(t){switch(e.type){case 5126:return et;case 35664:return nt;case 35665:return it;case 35666:return ot;case 35674:return st;case 35675:return at;case 35676:return ut;case 35678:case 36198:return ct;case 35680:return lt;case 5124:case 35670:return rt;case 35667:case 35671:return ht;case 35668:case 35672:return ft;case 35669:case 35673:return dt}}()}function Et(t,e,r){this.id=t,this.addr=r,this.size=e.size,this.setValue=function(t){switch(e.type){case 5126:return pt;case 35664:return gt;case 35665:return vt;case 35666:return yt;case 35674:return wt;case 35675:return xt;case 35676:return bt;case 35678:return _t;case 35680:return Mt;case 5124:case 35670:return mt;case 35667:case 35671:return ht;case 35668:case 35672:return ft;case 35669:case 35673:return dt}}()}function Tt(t){this.id=t,this.seq=[],this.map={}}function At(t,e,r){this.seq=[],this.map={},this.renderer=r,r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(var n=0;n<r;++n){var i=t.getActiveUniform(e,n),o=t.getUniformLocation(e,i.name),s=this,a=i.name,u=a.length;for(Vi.lastIndex=0;;){var c=Vi.exec(a),l=c[1],h=c[3];if(\"]\"===c[2]&&(l|=0),void 0===h||\"[\"===h&&Vi.lastIndex+2===u){a=s,i=void 0===h?new St(l,i,o):new Et(l,i,o),a.seq.push(i),a.map[i.id]=i;break}void 0===(h=s.map[l])&&(h=new Tt(l),(l=s).seq.push(s=h),l.map[s.id]=s),s=h}}}function Rt(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),!1===t.getShaderParameter(n,t.COMPILE_STATUS)&&console.error(\"THREE.WebGLShader: Shader couldn't compile.\"),\"\"!==t.getShaderInfoLog(n)&&console.warn(\"THREE.WebGLShader: gl.getShaderInfoLog()\",e===t.VERTEX_SHADER?\"vertex\":\"fragment\",t.getShaderInfoLog(n),function(t){t=t.split(\"\\n\");for(var e=0;e<t.length;e++)t[e]=e+1+\": \"+t[e];return t.join(\"\\n\")}(r)),n}function kt(t){switch(t){case 3e3:return[\"Linear\",\"( value )\"];case 3001:return[\"sRGB\",\"( value )\"];case 3002:return[\"RGBE\",\"( value )\"];case 3004:return[\"RGBM\",\"( value, 7.0 )\"];case 3005:return[\"RGBM\",\"( value, 16.0 )\"];case 3006:return[\"RGBD\",\"( value, 256.0 )\"];case 3007:return[\"Gamma\",\"( value, float( GAMMA_FACTOR ) )\"];default:throw Error(\"unsupported encoding: \"+t)}}function Ct(t,e){return\"vec4 \"+t+\"( vec4 value ) { return \"+(e=kt(e))[0]+\"ToLinear\"+e[1]+\"; }\"}function Lt(t){return\"\"!==t}function Pt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Dt(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function Ot(t){return t.replace(/^[ \\t]*#include +<([\\w\\d.]+)>/gm,function(t,e){if(void 0===(t=Ti[e]))throw Error(\"Can not resolve #include <\"+e+\">\");return Ot(t)})}function Nt(t){return t.replace(/#pragma unroll_loop[\\s]+?for \\( int i = (\\d+); i < (\\d+); i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g,function(t,e,r,n){for(t=\"\",e=parseInt(e);e<parseInt(r);e++)t+=n.replace(/\\[ i \\]/g,\"[ \"+e+\" ]\");return t})}function It(t,e,r,n,i,o){var s=t.context,a=n.defines,u=i.vertexShader,c=i.fragmentShader,l=\"SHADOWMAP_TYPE_BASIC\";1===o.shadowMapType?l=\"SHADOWMAP_TYPE_PCF\":2===o.shadowMapType&&(l=\"SHADOWMAP_TYPE_PCF_SOFT\");var h=\"ENVMAP_TYPE_CUBE\",f=\"ENVMAP_MODE_REFLECTION\",d=\"ENVMAP_BLENDING_MULTIPLY\";if(o.envMap){switch(n.envMap.mapping){case 301:case 302:h=\"ENVMAP_TYPE_CUBE\";break;case 306:case 307:h=\"ENVMAP_TYPE_CUBE_UV\";break;case 303:case 304:h=\"ENVMAP_TYPE_EQUIREC\";break;case 305:h=\"ENVMAP_TYPE_SPHERE\"}switch(n.envMap.mapping){case 302:case 304:f=\"ENVMAP_MODE_REFRACTION\"}switch(n.combine){case 0:d=\"ENVMAP_BLENDING_MULTIPLY\";break;case 1:d=\"ENVMAP_BLENDING_MIX\";break;case 2:d=\"ENVMAP_BLENDING_ADD\"}}var p,m,g=0<t.gammaFactor?t.gammaFactor:1,v=function(t,e,r){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?\"#extension GL_OES_standard_derivatives : enable\":\"\",(t.fragDepth||e.logarithmicDepthBuffer)&&r.get(\"EXT_frag_depth\")?\"#extension GL_EXT_frag_depth : enable\":\"\",t.drawBuffers&&r.get(\"WEBGL_draw_buffers\")?\"#extension GL_EXT_draw_buffers : require\":\"\",(t.shaderTextureLOD||e.envMap)&&r.get(\"EXT_shader_texture_lod\")?\"#extension GL_EXT_shader_texture_lod : enable\":\"\"].filter(Lt).join(\"\\n\")}(n.extensions,o,e),y=function(t){var e,r=[];for(e in t){var n=t[e];!1!==n&&r.push(\"#define \"+e+\" \"+n)}return r.join(\"\\n\")}(a),w=s.createProgram();return n.isRawShaderMaterial?(0<(a=[y].filter(Lt).join(\"\\n\")).length&&(a+=\"\\n\"),0<(e=[v,y].filter(Lt).join(\"\\n\")).length&&(e+=\"\\n\")):(a=[\"precision \"+o.precision+\" float;\",\"precision \"+o.precision+\" int;\",\"#define SHADER_NAME \"+i.name,y,o.supportsVertexTextures?\"#define VERTEX_TEXTURES\":\"\",\"#define GAMMA_FACTOR \"+g,\"#define MAX_BONES \"+o.maxBones,o.useFog&&o.fog?\"#define USE_FOG\":\"\",o.useFog&&o.fogExp?\"#define FOG_EXP2\":\"\",o.map?\"#define USE_MAP\":\"\",o.envMap?\"#define USE_ENVMAP\":\"\",o.envMap?\"#define \"+f:\"\",o.lightMap?\"#define USE_LIGHTMAP\":\"\",o.aoMap?\"#define USE_AOMAP\":\"\",o.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",o.bumpMap?\"#define USE_BUMPMAP\":\"\",o.normalMap?\"#define USE_NORMALMAP\":\"\",o.displacementMap&&o.supportsVertexTextures?\"#define USE_DISPLACEMENTMAP\":\"\",o.specularMap?\"#define USE_SPECULARMAP\":\"\",o.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",o.metalnessMap?\"#define USE_METALNESSMAP\":\"\",o.alphaMap?\"#define USE_ALPHAMAP\":\"\",o.vertexColors?\"#define USE_COLOR\":\"\",o.flatShading?\"#define FLAT_SHADED\":\"\",o.skinning?\"#define USE_SKINNING\":\"\",o.useVertexTexture?\"#define BONE_TEXTURE\":\"\",o.morphTargets?\"#define USE_MORPHTARGETS\":\"\",o.morphNormals&&!1===o.flatShading?\"#define USE_MORPHNORMALS\":\"\",o.doubleSided?\"#define DOUBLE_SIDED\":\"\",o.flipSided?\"#define FLIP_SIDED\":\"\",o.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",o.shadowMapEnabled?\"#define \"+l:\"\",o.sizeAttenuation?\"#define USE_SIZEATTENUATION\":\"\",o.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",o.logarithmicDepthBuffer&&e.get(\"EXT_frag_depth\")?\"#define USE_LOGDEPTHBUF_EXT\":\"\",\"uniform mat4 modelMatrix;\",\"uniform mat4 modelViewMatrix;\",\"uniform mat4 projectionMatrix;\",\"uniform mat4 viewMatrix;\",\"uniform mat3 normalMatrix;\",\"uniform vec3 cameraPosition;\",\"attribute vec3 position;\",\"attribute vec3 normal;\",\"attribute vec2 uv;\",\"#ifdef USE_COLOR\",\"\\tattribute vec3 color;\",\"#endif\",\"#ifdef USE_MORPHTARGETS\",\"\\tattribute vec3 morphTarget0;\",\"\\tattribute vec3 morphTarget1;\",\"\\tattribute vec3 morphTarget2;\",\"\\tattribute vec3 morphTarget3;\",\"\\t#ifdef USE_MORPHNORMALS\",\"\\t\\tattribute vec3 morphNormal0;\",\"\\t\\tattribute vec3 morphNormal1;\",\"\\t\\tattribute vec3 morphNormal2;\",\"\\t\\tattribute vec3 morphNormal3;\",\"\\t#else\",\"\\t\\tattribute vec3 morphTarget4;\",\"\\t\\tattribute vec3 morphTarget5;\",\"\\t\\tattribute vec3 morphTarget6;\",\"\\t\\tattribute vec3 morphTarget7;\",\"\\t#endif\",\"#endif\",\"#ifdef USE_SKINNING\",\"\\tattribute vec4 skinIndex;\",\"\\tattribute vec4 skinWeight;\",\"#endif\",\"\\n\"].filter(Lt).join(\"\\n\"),e=[v,\"precision \"+o.precision+\" float;\",\"precision \"+o.precision+\" int;\",\"#define SHADER_NAME \"+i.name,y,o.alphaTest?\"#define ALPHATEST \"+o.alphaTest:\"\",\"#define GAMMA_FACTOR \"+g,o.useFog&&o.fog?\"#define USE_FOG\":\"\",o.useFog&&o.fogExp?\"#define FOG_EXP2\":\"\",o.map?\"#define USE_MAP\":\"\",o.envMap?\"#define USE_ENVMAP\":\"\",o.envMap?\"#define \"+h:\"\",o.envMap?\"#define \"+f:\"\",o.envMap?\"#define \"+d:\"\",o.lightMap?\"#define USE_LIGHTMAP\":\"\",o.aoMap?\"#define USE_AOMAP\":\"\",o.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",o.bumpMap?\"#define USE_BUMPMAP\":\"\",o.normalMap?\"#define USE_NORMALMAP\":\"\",o.specularMap?\"#define USE_SPECULARMAP\":\"\",o.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",o.metalnessMap?\"#define USE_METALNESSMAP\":\"\",o.alphaMap?\"#define USE_ALPHAMAP\":\"\",o.vertexColors?\"#define USE_COLOR\":\"\",o.gradientMap?\"#define USE_GRADIENTMAP\":\"\",o.flatShading?\"#define FLAT_SHADED\":\"\",o.doubleSided?\"#define DOUBLE_SIDED\":\"\",o.flipSided?\"#define FLIP_SIDED\":\"\",o.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",o.shadowMapEnabled?\"#define \"+l:\"\",o.premultipliedAlpha?\"#define PREMULTIPLIED_ALPHA\":\"\",o.physicallyCorrectLights?\"#define PHYSICALLY_CORRECT_LIGHTS\":\"\",o.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",o.logarithmicDepthBuffer&&e.get(\"EXT_frag_depth\")?\"#define USE_LOGDEPTHBUF_EXT\":\"\",o.envMap&&e.get(\"EXT_shader_texture_lod\")?\"#define TEXTURE_LOD_EXT\":\"\",\"uniform mat4 viewMatrix;\",\"uniform vec3 cameraPosition;\",0!==o.toneMapping?\"#define TONE_MAPPING\":\"\",0!==o.toneMapping?Ti.tonemapping_pars_fragment:\"\",0!==o.toneMapping?function(t,e){switch(e){case 1:e=\"Linear\";break;case 2:e=\"Reinhard\";break;case 3:e=\"Uncharted2\";break;case 4:e=\"OptimizedCineon\";break;default:throw Error(\"unsupported toneMapping: \"+e)}return\"vec3 toneMapping( vec3 color ) { return \"+e+\"ToneMapping( color ); }\"}(0,o.toneMapping):\"\",o.dithering?\"#define DITHERING\":\"\",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Ti.encodings_pars_fragment:\"\",o.mapEncoding?Ct(\"mapTexelToLinear\",o.mapEncoding):\"\",o.envMapEncoding?Ct(\"envMapTexelToLinear\",o.envMapEncoding):\"\",o.emissiveMapEncoding?Ct(\"emissiveMapTexelToLinear\",o.emissiveMapEncoding):\"\",o.outputEncoding?function(t,e){return\"vec4 linearToOutputTexel( vec4 value ) { return LinearTo\"+(e=kt(e))[0]+e[1]+\"; }\"}(0,o.outputEncoding):\"\",o.depthPacking?\"#define DEPTH_PACKING \"+n.depthPacking:\"\",\"\\n\"].filter(Lt).join(\"\\n\")),u=Dt(u=Pt(u=Ot(u),o),o),c=Dt(c=Pt(c=Ot(c),o),o),u=Nt(u),c=e+(c=Nt(c)),u=Rt(s,s.VERTEX_SHADER,a+u),c=Rt(s,s.FRAGMENT_SHADER,c),s.attachShader(w,u),s.attachShader(w,c),void 0!==n.index0AttributeName?s.bindAttribLocation(w,0,n.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(w,0,\"position\"),s.linkProgram(w),o=s.getProgramInfoLog(w).trim(),l=s.getShaderInfoLog(u).trim(),h=s.getShaderInfoLog(c).trim(),d=f=!0,!1===s.getProgramParameter(w,s.LINK_STATUS)?(f=!1,console.error(\"THREE.WebGLProgram: shader error: \",s.getError(),\"gl.VALIDATE_STATUS\",s.getProgramParameter(w,s.VALIDATE_STATUS),\"gl.getProgramInfoLog\",o,l,h)):\"\"!==o?console.warn(\"THREE.WebGLProgram: gl.getProgramInfoLog()\",o):\"\"!==l&&\"\"!==h||(d=!1),d&&(this.diagnostics={runnable:f,material:n,programLog:o,vertexShader:{log:l,prefix:a},fragmentShader:{log:h,prefix:e}}),s.deleteShader(u),s.deleteShader(c),this.getUniforms=function(){return void 0===p&&(p=new At(s,w,t)),p},this.getAttributes=function(){if(void 0===m){for(var t={},e=s.getProgramParameter(w,s.ACTIVE_ATTRIBUTES),r=0;r<e;r++){var n=s.getActiveAttrib(w,r).name;t[n]=s.getAttribLocation(w,n)}m=t}return m},this.destroy=function(){s.deleteProgram(w),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn(\"THREE.WebGLProgram: .uniforms is now .getUniforms().\"),this.getUniforms()}},attributes:{get:function(){return console.warn(\"THREE.WebGLProgram: .attributes is now .getAttributes().\"),this.getAttributes()}}}),this.name=i.name,this.id=Bi++,this.code=r,this.usedTimes=1,this.program=w,this.vertexShader=u,this.fragmentShader=c,this}function Ft(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function zt(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Ut(){var t={};return{get:function(e,i){return void 0===(i=t[e=e.id+\",\"+i.id])&&(i=new function(){var t=new function(){var t=new function(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];switch(e.type){case\"DirectionalLight\":var n={direction:new o,color:new g,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case\"SpotLight\":n={position:new o,direction:new o,color:new g,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case\"PointLight\":n={position:new o,color:new g,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r,shadowCameraNear:1,shadowCameraFar:1e3};break;case\"HemisphereLight\":n={direction:new o,skyColor:new g,groundColor:new g};break;case\"RectAreaLight\":n={color:new g,position:new o,halfWidth:new o,halfHeight:new o}}return t[e.id]=n}}},e={id:Hi++,hash:\"\",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=new o,s=new n,a=new n;return{setup:function(r,n,o){var u=0,c=0,l=0,h=0,f=0,d=0,p=0,m=0;o=o.matrixWorldInverse;for(var g=0,v=r.length;g<v;g++){var y=r[g],w=y.color,x=y.intensity,b=y.distance,_=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)u+=w.r*x,c+=w.g*x,l+=w.b*x;else if(y.isDirectionalLight){var M=t.get(y);M.color.copy(y.color).multiplyScalar(y.intensity),M.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),M.direction.sub(i),M.direction.transformDirection(o),(M.shadow=y.castShadow)&&(M.shadowBias=(w=y.shadow).bias,M.shadowRadius=w.radius,M.shadowMapSize=w.mapSize),e.directionalShadowMap[h]=_,e.directionalShadowMatrix[h]=y.shadow.matrix,e.directional[h]=M,h++}else y.isSpotLight?((M=t.get(y)).position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(o),M.color.copy(w).multiplyScalar(x),M.distance=b,M.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),M.direction.sub(i),M.direction.transformDirection(o),M.coneCos=Math.cos(y.angle),M.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),M.decay=0===y.distance?0:y.decay,(M.shadow=y.castShadow)&&(M.shadowBias=(w=y.shadow).bias,M.shadowRadius=w.radius,M.shadowMapSize=w.mapSize),e.spotShadowMap[d]=_,e.spotShadowMatrix[d]=y.shadow.matrix,e.spot[d]=M,d++):y.isRectAreaLight?((M=t.get(y)).color.copy(w).multiplyScalar(x),M.position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(o),a.identity(),s.copy(y.matrixWorld),s.premultiply(o),a.extractRotation(s),M.halfWidth.set(.5*y.width,0,0),M.halfHeight.set(0,.5*y.height,0),M.halfWidth.applyMatrix4(a),M.halfHeight.applyMatrix4(a),e.rectArea[p]=M,p++):y.isPointLight?((M=t.get(y)).position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(o),M.color.copy(y.color).multiplyScalar(y.intensity),M.distance=y.distance,M.decay=0===y.distance?0:y.decay,(M.shadow=y.castShadow)&&(M.shadowBias=(w=y.shadow).bias,M.shadowRadius=w.radius,M.shadowMapSize=w.mapSize,M.shadowCameraNear=w.camera.near,M.shadowCameraFar=w.camera.far),e.pointShadowMap[f]=_,e.pointShadowMatrix[f]=y.shadow.matrix,e.point[f]=M,f++):y.isHemisphereLight&&((M=t.get(y)).direction.setFromMatrixPosition(y.matrixWorld),M.direction.transformDirection(o),M.direction.normalize(),M.skyColor.copy(y.color).multiplyScalar(x),M.groundColor.copy(y.groundColor).multiplyScalar(x),e.hemi[m]=M,m++)}e.ambient[0]=u,e.ambient[1]=c,e.ambient[2]=l,e.directional.length=h,e.spot.length=d,e.rectArea.length=p,e.point.length=f,e.hemi.length=m,e.hash=e.id+\",\"+h+\",\"+f+\",\"+d+\",\"+p+\",\"+m+\",\"+n.length},state:e}},e=[],i=[],s=[];return{init:function(){e.length=0,i.length=0,s.length=0},state:{lightsArray:e,shadowsArray:i,spritesArray:s,lights:t},setupLights:function(r){t.setup(e,i,r)},pushLight:function(t){e.push(t)},pushShadow:function(t){i.push(t)},pushSprite:function(t){s.push(t)}}},t[e]=i),i},dispose:function(){t={}}}}function jt(t){V.call(this),this.type=\"MeshDepthMaterial\",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(t)}function Vt(t){V.call(this),this.type=\"MeshDistanceMaterial\",this.referencePosition=new o,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.lights=this.fog=!1,this.setValues(t)}function Bt(t,e,i){function s(e,r,n,i,o,s){var a=e.geometry,u=v,c=e.customDepthMaterial;return n&&(u=y,c=e.customDistanceMaterial),c?u=c:(c=!1,r.morphTargets&&(a&&a.isBufferGeometry?c=a.morphAttributes&&a.morphAttributes.position&&0<a.morphAttributes.position.length:a&&a.isGeometry&&(c=a.morphTargets&&0<a.morphTargets.length)),e.isSkinnedMesh&&!1===r.skinning&&console.warn(\"THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:\",e),e=e.isSkinnedMesh&&r.skinning,a=0,c&&(a|=1),e&&(a|=2),u=u[a]),t.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length&&(c=r.uuid,void 0===(e=w[a=u.uuid])&&(w[a]=e={}),void 0===(a=e[c])&&(a=u.clone(),e[c]=a),u=a),u.visible=r.visible,u.wireframe=r.wireframe,u.side=null!=r.shadowSide?r.shadowSide:x[r.side],u.clipShadows=r.clipShadows,u.clippingPlanes=r.clippingPlanes,u.clipIntersection=r.clipIntersection,u.wireframeLinewidth=r.wireframeLinewidth,u.linewidth=r.linewidth,n&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(i),u.nearDistance=o,u.farDistance=s),u}function a(r,n,i,o){if(!1!==r.visible){if(r.layers.test(n.layers)&&(r.isMesh||r.isLine||r.isPoints)&&r.castShadow&&(!r.frustumCulled||l.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,r.matrixWorld);var u=e.update(r),c=r.material;if(Array.isArray(c))for(var h=u.groups,f=0,d=h.length;f<d;f++){var p=h[f],m=c[p.materialIndex];m&&m.visible&&(m=s(r,m,o,g,i.near,i.far),t.renderBufferDirect(i,null,u,m,r,p))}else c.visible&&(m=s(r,c,o,g,i.near,i.far),t.renderBufferDirect(i,null,u,m,r,null))}for(u=0,c=(r=r.children).length;u<c;u++)a(r[u],n,i,o)}}var l=new m,h=new n,f=new r,d=new r(i,i),p=new o,g=new o,v=Array(4),y=Array(4),w={},x={0:1,1:0,2:2},b=[new o(1,0,0),new o(-1,0,0),new o(0,0,1),new o(0,0,-1),new o(0,1,0),new o(0,-1,0)],_=[new o(0,1,0),new o(0,1,0),new o(0,1,0),new o(0,1,0),new o(0,0,1),new o(0,0,-1)],M=[new u,new u,new u,new u,new u,new u];for(i=0;4!==i;++i){var S=0!=(1&i),E=0!=(2&i),T=new jt({depthPacking:3201,morphTargets:S,skinning:E});v[i]=T,S=new Vt({morphTargets:S,skinning:E}),y[i]=S}var A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,r,n){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==e.length){var i=t.state;i.disable(t.context.BLEND),i.buffers.color.setClear(1,1,1,1),i.buffers.depth.setTest(!0),i.setScissorTest(!1);for(var o,s=0,u=e.length;s<u;s++){var m=e[s];o=m.shadow;var v=m&&m.isPointLight;if(void 0===o)console.warn(\"THREE.WebGLShadowMap:\",m,\"has no shadow.\");else{var y=o.camera;if(f.copy(o.mapSize),f.min(d),v){var w=f.x,x=f.y;M[0].set(2*w,x,w,x),M[1].set(0,x,w,x),M[2].set(3*w,x,w,x),M[3].set(w,x,w,x),M[4].set(3*w,0,w,x),M[5].set(w,0,w,x),f.x*=4,f.y*=2}for(null===o.map&&(o.map=new c(f.x,f.y,{minFilter:1003,magFilter:1003,format:1023}),o.map.texture.name=m.name+\".shadowMap\",y.updateProjectionMatrix()),o.isSpotLightShadow&&o.update(m),w=o.map,x=o.matrix,g.setFromMatrixPosition(m.matrixWorld),y.position.copy(g),v?(o=6,x.makeTranslation(-g.x,-g.y,-g.z)):(o=1,p.setFromMatrixPosition(m.target.matrixWorld),y.lookAt(p),y.updateMatrixWorld(),x.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),x.multiply(y.projectionMatrix),x.multiply(y.matrixWorldInverse)),t.setRenderTarget(w),t.clear(),m=0;m<o;m++)v&&(p.copy(y.position),p.add(b[m]),y.up.copy(_[m]),y.lookAt(p),y.updateMatrixWorld(),i.viewport(M[m])),h.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),l.setFromMatrix(h),a(r,n,y,v)}}A.needsUpdate=!1}}}function Ht(t,e,r,n,i,o,s,u,c){a.call(this,t,e,r,n,i,o,s,u,c),this.needsUpdate=!0}function Gt(t,e,r,n,s){var a,u,c,l,h,f,d,p,m,g,v,y,w,x,b,_,M,S;function E(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var T,A,R,k,C=new o,L=new i,P=new o;this.render=function(i,o,D){if(0!==i.length){if(void 0===R){var O=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),N=new Uint16Array([0,1,2,0,2,3]);T=e.createBuffer(),A=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,T),e.bufferData(e.ARRAY_BUFFER,O,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,A),e.bufferData(e.ELEMENT_ARRAY_BUFFER,N,e.STATIC_DRAW),O=e.createProgram(),N=e.createShader(e.VERTEX_SHADER);var I=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(N,[\"precision \"+s.precision+\" float;\",\"#define SHADER_NAME SpriteMaterial\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float rotation;\\nuniform vec2 center;\\nuniform vec2 scale;\\nuniform vec2 uvOffset;\\nuniform vec2 uvScale;\\nattribute vec2 position;\\nattribute vec2 uv;\\nvarying vec2 vUV;\\nvarying float fogDepth;\\nvoid main() {\\n\\tvUV = uvOffset + uv * uvScale;\\n\\tvec2 alignedPosition = ( position - center ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tvec4 mvPosition;\\n\\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\tfogDepth = - mvPosition.z;\\n}\"].join(\"\\n\")),e.shaderSource(I,[\"precision \"+s.precision+\" float;\",\"#define SHADER_NAME SpriteMaterial\\nuniform vec3 color;\\nuniform sampler2D map;\\nuniform float opacity;\\nuniform int fogType;\\nuniform vec3 fogColor;\\nuniform float fogDensity;\\nuniform float fogNear;\\nuniform float fogFar;\\nuniform float alphaTest;\\nvarying vec2 vUV;\\nvarying float fogDepth;\\nvoid main() {\\n\\tvec4 texture = texture2D( map, vUV );\\n\\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\\n\\tif ( gl_FragColor.a < alphaTest ) discard;\\n\\tif ( fogType > 0 ) {\\n\\t\\tfloat fogFactor = 0.0;\\n\\t\\tif ( fogType == 1 ) {\\n\\t\\t\\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t\\t} else {\\n\\t\\t\\tconst float LOG2 = 1.442695;\\n\\t\\t\\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\\n\\t\\t\\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\\n\\t\\t}\\n\\t\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n\\t}\\n}\"].join(\"\\n\")),e.compileShader(N),e.compileShader(I),e.attachShader(O,N),e.attachShader(O,I),e.linkProgram(O),M=e.getAttribLocation(R=O,\"position\"),S=e.getAttribLocation(R,\"uv\"),a=e.getUniformLocation(R,\"uvOffset\"),u=e.getUniformLocation(R,\"uvScale\"),c=e.getUniformLocation(R,\"rotation\"),l=e.getUniformLocation(R,\"center\"),h=e.getUniformLocation(R,\"scale\"),f=e.getUniformLocation(R,\"color\"),d=e.getUniformLocation(R,\"map\"),p=e.getUniformLocation(R,\"opacity\"),m=e.getUniformLocation(R,\"modelViewMatrix\"),g=e.getUniformLocation(R,\"projectionMatrix\"),v=e.getUniformLocation(R,\"fogType\"),y=e.getUniformLocation(R,\"fogDensity\"),w=e.getUniformLocation(R,\"fogNear\"),x=e.getUniformLocation(R,\"fogFar\"),b=e.getUniformLocation(R,\"fogColor\"),e.getUniformLocation(R,\"fogDepth\"),_=e.getUniformLocation(R,\"alphaTest\"),(O=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\")).width=8,O.height=8,(N=O.getContext(\"2d\")).fillStyle=\"white\",N.fillRect(0,0,8,8),k=new Ht(O)}r.useProgram(R),r.initAttributes(),r.enableAttribute(M),r.enableAttribute(S),r.disableUnusedAttributes(),r.disable(e.CULL_FACE),r.enable(e.BLEND),e.bindBuffer(e.ARRAY_BUFFER,T),e.vertexAttribPointer(M,2,e.FLOAT,!1,16,0),e.vertexAttribPointer(S,2,e.FLOAT,!1,16,8),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,A),e.uniformMatrix4fv(g,!1,D.projectionMatrix.elements),r.activeTexture(e.TEXTURE0),e.uniform1i(d,0),N=O=0,(I=o.fog)?(e.uniform3f(b,I.color.r,I.color.g,I.color.b),I.isFog?(e.uniform1f(w,I.near),e.uniform1f(x,I.far),e.uniform1i(v,1),N=O=1):I.isFogExp2&&(e.uniform1f(y,I.density),e.uniform1i(v,2),N=O=2)):(e.uniform1i(v,0),N=O=0),I=0;for(var F=i.length;I<F;I++){var z=i[I];z.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,z.matrixWorld),z.z=-z.modelViewMatrix.elements[14]}i.sort(E);var U=[],j=[];for(I=0,F=i.length;I<F;I++){var V=(z=i[I]).material;if(!1!==V.visible){z.onBeforeRender(t,o,D,void 0,V,void 0),e.uniform1f(_,V.alphaTest),e.uniformMatrix4fv(m,!1,z.modelViewMatrix.elements),z.matrixWorld.decompose(C,L,P),U[0]=P.x,U[1]=P.y,j[0]=z.center.x-.5,j[1]=z.center.y-.5;var B=0;o.fog&&V.fog&&(B=N),O!==B&&(e.uniform1i(v,B),O=B),null!==V.map?(e.uniform2f(a,V.map.offset.x,V.map.offset.y),e.uniform2f(u,V.map.repeat.x,V.map.repeat.y)):(e.uniform2f(a,0,0),e.uniform2f(u,1,1)),e.uniform1f(p,V.opacity),e.uniform3f(f,V.color.r,V.color.g,V.color.b),e.uniform1f(c,V.rotation),e.uniform2fv(l,j),e.uniform2fv(h,U),r.setBlending(V.blending,V.blendEquation,V.blendSrc,V.blendDst,V.blendEquationAlpha,V.blendSrcAlpha,V.blendDstAlpha,V.premultipliedAlpha),r.buffers.depth.setTest(V.depthTest),r.buffers.depth.setMask(V.depthWrite),r.buffers.color.setMask(V.colorWrite),n.setTexture2D(V.map||k,0),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),z.onAfterRender(t,o,D,void 0,V,void 0)}}r.enable(e.CULL_FACE),r.reset()}}}function Wt(t,e){return{convert:function(r){if(1e3===r)return t.REPEAT;if(1001===r)return t.CLAMP_TO_EDGE;if(1002===r)return t.MIRRORED_REPEAT;if(1003===r)return t.NEAREST;if(1004===r)return t.NEAREST_MIPMAP_NEAREST;if(1005===r)return t.NEAREST_MIPMAP_LINEAR;if(1006===r)return t.LINEAR;if(1007===r)return t.LINEAR_MIPMAP_NEAREST;if(1008===r)return t.LINEAR_MIPMAP_LINEAR;if(1009===r)return t.UNSIGNED_BYTE;if(1017===r)return t.UNSIGNED_SHORT_4_4_4_4;if(1018===r)return t.UNSIGNED_SHORT_5_5_5_1;if(1019===r)return t.UNSIGNED_SHORT_5_6_5;if(1010===r)return t.BYTE;if(1011===r)return t.SHORT;if(1012===r)return t.UNSIGNED_SHORT;if(1013===r)return t.INT;if(1014===r)return t.UNSIGNED_INT;if(1015===r)return t.FLOAT;if(1016===r){var n=e.get(\"OES_texture_half_float\");if(null!==n)return n.HALF_FLOAT_OES}if(1021===r)return t.ALPHA;if(1022===r)return t.RGB;if(1023===r)return t.RGBA;if(1024===r)return t.LUMINANCE;if(1025===r)return t.LUMINANCE_ALPHA;if(1026===r)return t.DEPTH_COMPONENT;if(1027===r)return t.DEPTH_STENCIL;if(100===r)return t.FUNC_ADD;if(101===r)return t.FUNC_SUBTRACT;if(102===r)return t.FUNC_REVERSE_SUBTRACT;if(200===r)return t.ZERO;if(201===r)return t.ONE;if(202===r)return t.SRC_COLOR;if(203===r)return t.ONE_MINUS_SRC_COLOR;if(204===r)return t.SRC_ALPHA;if(205===r)return t.ONE_MINUS_SRC_ALPHA;if(206===r)return t.DST_ALPHA;if(207===r)return t.ONE_MINUS_DST_ALPHA;if(208===r)return t.DST_COLOR;if(209===r)return t.ONE_MINUS_DST_COLOR;if(210===r)return t.SRC_ALPHA_SATURATE;if((33776===r||33777===r||33778===r||33779===r)&&null!==(n=e.get(\"WEBGL_compressed_texture_s3tc\"))){if(33776===r)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===r)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===r)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===r)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===r||35841===r||35842===r||35843===r)&&null!==(n=e.get(\"WEBGL_compressed_texture_pvrtc\"))){if(35840===r)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===r)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===r)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===r)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===r&&null!==(n=e.get(\"WEBGL_compressed_texture_etc1\")))return n.COMPRESSED_RGB_ETC1_WEBGL;if((37808===r||37809===r||37810===r||37811===r||37812===r||37813===r||37814===r||37815===r||37816===r||37817===r||37818===r||37819===r||37820===r||37821===r)&&null!==(n=e.get(\"WEBGL_compressed_texture_astc\")))return r;if((103===r||104===r)&&null!==(n=e.get(\"EXT_blend_minmax\"))){if(103===r)return n.MIN_EXT;if(104===r)return n.MAX_EXT}return 1020===r&&null!==(n=e.get(\"WEBGL_depth_texture\"))?n.UNSIGNED_INT_24_8_WEBGL:0}}}function qt(t,e,r,n){x.call(this),this.type=\"PerspectiveCamera\",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Yt(t){qt.call(this),this.cameras=t||[]}function Xt(t){function e(){if(null!==s&&!0===s.isPresenting){var e=s.getEyeParameters(\"left\"),n=e.renderWidth;e=e.renderHeight,y=t.getPixelRatio(),v=t.getSize(),t.setDrawingBufferSize(2*n,e,1)}else r.enabled&&t.setDrawingBufferSize(v.width,v.height,y)}var r=this,s=null,a=null,c=null,l=new n,h=new n;\"undefined\"!=typeof window&&\"VRFrameData\"in window&&(a=new window.VRFrameData,window.addEventListener(\"vrdisplaypresentchange\",e,!1));var f=new n,d=new i,p=new o,m=new qt;m.bounds=new u(0,0,.5,1),m.layers.enable(1);var g=new qt;g.bounds=new u(.5,0,.5,1),g.layers.enable(2);var v,y,w=new Yt([m,g]);w.layers.enable(1),w.layers.enable(2),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return s},this.setDevice=function(t){void 0!==t&&(s=t)},this.setPoseTarget=function(t){void 0!==t&&(c=t)},this.getCamera=function(t){if(null===s)return t;s.depthNear=t.near,s.depthFar=t.far,s.getFrameData(a);var e=s.stageParameters;e?l.fromArray(e.sittingToStandingTransform):l.makeTranslation(0,r.userHeight,0),e=a.pose;var n=null!==c?c:t;return n.matrix.copy(l),n.matrix.decompose(n.position,n.quaternion,n.scale),null!==e.orientation&&(d.fromArray(e.orientation),n.quaternion.multiply(d)),null!==e.position&&(d.setFromRotationMatrix(l),p.fromArray(e.position),p.applyQuaternion(d),n.position.add(p)),n.updateMatrixWorld(),!1===s.isPresenting?t:(m.near=t.near,g.near=t.near,m.far=t.far,g.far=t.far,w.matrixWorld.copy(t.matrixWorld),w.matrixWorldInverse.copy(t.matrixWorldInverse),m.matrixWorldInverse.fromArray(a.leftViewMatrix),g.matrixWorldInverse.fromArray(a.rightViewMatrix),h.getInverse(l),m.matrixWorldInverse.multiply(h),g.matrixWorldInverse.multiply(h),null!==(t=n.parent)&&(f.getInverse(t.matrixWorld),m.matrixWorldInverse.multiply(f),g.matrixWorldInverse.multiply(f)),m.matrixWorld.getInverse(m.matrixWorldInverse),g.matrixWorld.getInverse(g.matrixWorldInverse),m.projectionMatrix.fromArray(a.leftProjectionMatrix),g.projectionMatrix.fromArray(a.rightProjectionMatrix),w.projectionMatrix.copy(m.projectionMatrix),(t=s.getLayers()).length&&(null!==(t=t[0]).leftBounds&&4===t.leftBounds.length&&m.bounds.fromArray(t.leftBounds),null!==t.rightBounds&&4===t.rightBounds.length&&g.bounds.fromArray(t.rightBounds)),w)},this.getStandingMatrix=function(){return l},this.submitFrame=function(){null!==s&&!0===s.isPresenting&&s.submitFrame()},this.dispose=function(){\"undefined\"!=typeof window&&window.removeEventListener(\"vrdisplaypresentchange\",e)}}function $t(t){function e(){(C=new function(t){var e={};return{get:function(r){if(void 0!==e[r])return e[r];switch(r){case\"WEBGL_depth_texture\":var n=t.getExtension(\"WEBGL_depth_texture\")||t.getExtension(\"MOZ_WEBGL_depth_texture\")||t.getExtension(\"WEBKIT_WEBGL_depth_texture\");break;case\"EXT_texture_filter_anisotropic\":n=t.getExtension(\"EXT_texture_filter_anisotropic\")||t.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||t.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");break;case\"WEBGL_compressed_texture_s3tc\":n=t.getExtension(\"WEBGL_compressed_texture_s3tc\")||t.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\")||t.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");break;case\"WEBGL_compressed_texture_pvrtc\":n=t.getExtension(\"WEBGL_compressed_texture_pvrtc\")||t.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");break;default:n=t.getExtension(r)}return null===n&&console.warn(\"THREE.WebGLRenderer: \"+r+\" extension not supported.\"),e[r]=n}}}(_t)).get(\"WEBGL_depth_texture\"),C.get(\"OES_texture_float\"),C.get(\"OES_texture_float_linear\"),C.get(\"OES_texture_half_float\"),C.get(\"OES_texture_half_float_linear\"),C.get(\"OES_standard_derivatives\"),C.get(\"OES_element_index_uint\"),C.get(\"ANGLE_instanced_arrays\"),Y=new Wt(_t,C),L=new function(t,e,r){function n(e){if(\"highp\"===e){if(0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision)return\"highp\";e=\"mediump\"}return\"mediump\"===e&&0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision?\"mediump\":\"lowp\"}var i,o=void 0!==r.precision?r.precision:\"highp\",s=n(o);s!==o&&(console.warn(\"THREE.WebGLRenderer:\",o,\"not supported, using\",s,\"instead.\"),o=s),r=!0===r.logarithmicDepthBuffer,s=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);var a=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_TEXTURE_SIZE),c=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),l=t.getParameter(t.MAX_VERTEX_ATTRIBS),h=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),f=t.getParameter(t.MAX_VARYING_VECTORS),d=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),p=0<a,m=!!e.get(\"OES_texture_float\");return{getMaxAnisotropy:function(){if(void 0!==i)return i;var r=e.get(\"EXT_texture_filter_anisotropic\");return i=null!==r?t.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:o,logarithmicDepthBuffer:r,maxTextures:s,maxVertexTextures:a,maxTextureSize:u,maxCubemapSize:c,maxAttributes:l,maxVertexUniforms:h,maxVaryings:f,maxFragmentUniforms:d,vertexTextures:p,floatFragmentTextures:m,floatVertexTextures:p&&m}}(_t,C,t),(P=new function(t,e,r){function n(e,r,n){var i=new Uint8Array(4),o=t.createTexture();for(t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST),e=0;e<n;e++)t.texImage2D(r+e,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,i);return o}function i(e){!0!==w[e]&&(t.enable(e),w[e]=!0)}function o(e){!1!==w[e]&&(t.disable(e),w[e]=!1)}function s(e,n,s,a,u,c,l,h){if(0!==e?i(t.BLEND):o(t.BLEND),5!==e){if(e!==_||h!==k)switch(e){case 2:h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE));break;case 3:h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR));break;case 4:h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR));break;default:h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA))}R=A=T=E=S=M=null}else u=u||n,c=c||s,l=l||a,n===M&&u===T||(t.blendEquationSeparate(r.convert(n),r.convert(u)),M=n,T=u),s===S&&a===E&&c===A&&l===R||(t.blendFuncSeparate(r.convert(s),r.convert(a),r.convert(c),r.convert(l)),S=s,E=a,A=c,R=l);_=e,k=h}function a(e){C!==e&&(t.frontFace(e?t.CW:t.CCW),C=e)}function c(e){0!==e?(i(t.CULL_FACE),e!==L&&t.cullFace(1===e?t.BACK:2===e?t.FRONT:t.FRONT_AND_BACK)):o(t.CULL_FACE),L=e}function l(e,r,n){e?(i(t.POLYGON_OFFSET_FILL),(D!==r||O!==n)&&(t.polygonOffset(r,n),D=r,O=n)):o(t.POLYGON_OFFSET_FILL)}function h(e){void 0===e&&(e=t.TEXTURE0+N-1),F!==e&&(t.activeTexture(e),F=e)}var f=new function(){var e=!1,r=new u,n=null,i=new u(0,0,0,0);return{setMask:function(r){n===r||e||(t.colorMask(r,r,r,r),n=r)},setLocked:function(t){e=t},setClear:function(e,n,o,s,a){!0===a&&(e*=s,n*=s,o*=s),r.set(e,n,o,s),!1===i.equals(r)&&(t.clearColor(e,n,o,s),i.copy(r))},reset:function(){e=!1,n=null,i.set(-1,0,0,0)}}},d=new function(){var e=!1,r=null,n=null,s=null;return{setTest:function(e){e?i(t.DEPTH_TEST):o(t.DEPTH_TEST)},setMask:function(n){r===n||e||(t.depthMask(n),r=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case 0:t.depthFunc(t.NEVER);break;case 1:t.depthFunc(t.ALWAYS);break;case 2:t.depthFunc(t.LESS);break;case 3:t.depthFunc(t.LEQUAL);break;case 4:t.depthFunc(t.EQUAL);break;case 5:t.depthFunc(t.GEQUAL);break;case 6:t.depthFunc(t.GREATER);break;case 7:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);n=e}},setLocked:function(t){e=t},setClear:function(e){s!==e&&(t.clearDepth(e),s=e)},reset:function(){e=!1,s=n=r=null}}},p=new function(){var e=!1,r=null,n=null,s=null,a=null,u=null,c=null,l=null,h=null;return{setTest:function(e){e?i(t.STENCIL_TEST):o(t.STENCIL_TEST)},setMask:function(n){r===n||e||(t.stencilMask(n),r=n)},setFunc:function(e,r,i){n===e&&s===r&&a===i||(t.stencilFunc(e,r,i),n=e,s=r,a=i)},setOp:function(e,r,n){u===e&&c===r&&l===n||(t.stencilOp(e,r,n),u=e,c=r,l=n)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,h=l=c=u=a=s=n=r=null}}},m=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=new Uint8Array(m),v=new Uint8Array(m),y=new Uint8Array(m),w={},x=null,b=null,_=null,M=null,S=null,E=null,T=null,A=null,R=null,k=!1,C=null,L=null,P=null,D=null,O=null,N=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),I=!1;m=0,-1!==(m=t.getParameter(t.VERSION)).indexOf(\"WebGL\")?(m=parseFloat(/^WebGL ([0-9])/.exec(m)[1]),I=1<=m):-1!==m.indexOf(\"OpenGL ES\")&&(m=parseFloat(/^OpenGL ES ([0-9])/.exec(m)[1]),I=2<=m);var F=null,z={},U=new u,j=new u,V={};return V[t.TEXTURE_2D]=n(t.TEXTURE_2D,t.TEXTURE_2D,1),V[t.TEXTURE_CUBE_MAP]=n(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),f.setClear(0,0,0,1),d.setClear(1),p.setClear(0),i(t.DEPTH_TEST),d.setFunc(3),a(!1),c(1),i(t.CULL_FACE),i(t.BLEND),s(1),{buffers:{color:f,depth:d,stencil:p},initAttributes:function(){for(var t=0,e=g.length;t<e;t++)g[t]=0},enableAttribute:function(r){g[r]=1,0===v[r]&&(t.enableVertexAttribArray(r),v[r]=1),0!==y[r]&&(e.get(\"ANGLE_instanced_arrays\").vertexAttribDivisorANGLE(r,0),y[r]=0)},enableAttributeAndDivisor:function(r,n){g[r]=1,0===v[r]&&(t.enableVertexAttribArray(r),v[r]=1),y[r]!==n&&(e.get(\"ANGLE_instanced_arrays\").vertexAttribDivisorANGLE(r,n),y[r]=n)},disableUnusedAttributes:function(){for(var e=0,r=v.length;e!==r;++e)v[e]!==g[e]&&(t.disableVertexAttribArray(e),v[e]=0)},enable:i,disable:o,getCompressedTextureFormats:function(){if(null===x&&(x=[],e.get(\"WEBGL_compressed_texture_pvrtc\")||e.get(\"WEBGL_compressed_texture_s3tc\")||e.get(\"WEBGL_compressed_texture_etc1\")||e.get(\"WEBGL_compressed_texture_astc\")))for(var r=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),n=0;n<r.length;n++)x.push(r[n]);return x},useProgram:function(e){return b!==e&&(t.useProgram(e),b=e,!0)},setBlending:s,setMaterial:function(e,r){2===e.side?o(t.CULL_FACE):i(t.CULL_FACE);var n=1===e.side;r&&(n=!n),a(n),!0===e.transparent?s(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):s(0),d.setFunc(e.depthFunc),d.setTest(e.depthTest),d.setMask(e.depthWrite),f.setMask(e.colorWrite),l(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:a,setCullFace:c,setLineWidth:function(e){e!==P&&(I&&t.lineWidth(e),P=e)},setPolygonOffset:l,setScissorTest:function(e){e?i(t.SCISSOR_TEST):o(t.SCISSOR_TEST)},activeTexture:h,bindTexture:function(e,r){null===F&&h();var n=z[F];void 0===n&&(z[F]=n={type:void 0,texture:void 0}),n.type===e&&n.texture===r||(t.bindTexture(e,r||V[e]),n.type=e,n.texture=r)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error(\"THREE.WebGLState:\",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error(\"THREE.WebGLState:\",t)}},scissor:function(e){!1===U.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),U.copy(e))},viewport:function(e){!1===j.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),j.copy(e))},reset:function(){for(var e=0;e<v.length;e++)1===v[e]&&(t.disableVertexAttribArray(e),v[e]=0);w={},F=x=null,z={},L=C=_=b=null,f.reset(),d.reset(),p.reset()}}}(_t,C,Y)).scissor(at.copy(pt).multiplyScalar(ft)),P.viewport(st.copy(dt).multiplyScalar(ft)),D=new function(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(r,n,i){switch(i=i||1,e.calls++,n){case t.TRIANGLES:e.triangles+=r/3*i;break;case t.TRIANGLE_STRIP:case t.TRIANGLE_FAN:e.triangles+=i*(r-2);break;case t.LINES:e.lines+=r/2*i;break;case t.LINE_STRIP:e.lines+=i*(r-1);break;case t.LINE_LOOP:e.lines+=i*r;break;case t.POINTS:e.points+=i*r;break;default:console.error(\"THREE.WebGLInfo: Unknown draw mode:\",n)}}}}(_t),O=new function(){var t=new WeakMap;return{get:function(e){var r=t.get(e);return void 0===r&&t.set(e,r={}),r},remove:function(e){t.delete(e)},update:function(e,r,n){t.get(e)[r]=n},dispose:function(){t=new WeakMap}}},N=new function(t,e,r,n,i,o,s){function a(t,e){if(t.width>e||t.height>e){if(\"data\"in t)return void console.warn(\"THREE.WebGLRenderer: image in DataTexture is too big (\"+t.width+\"x\"+t.height+\").\");e/=Math.max(t.width,t.height);var r=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");return r.width=Math.floor(t.width*e),r.height=Math.floor(t.height*e),r.getContext(\"2d\").drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height),console.warn(\"THREE.WebGLRenderer: image is too big (\"+t.width+\"x\"+t.height+\"). Resized to \"+r.width+\"x\"+r.height,t),r}return t}function u(t){return Si.isPowerOfTwo(t.width)&&Si.isPowerOfTwo(t.height)}function c(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function l(e,r,i,o){t.generateMipmap(e),n.get(r).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function h(e){return 1003===e||1004===e||1005===e?t.NEAREST:t.LINEAR}function f(e){(e=e.target).removeEventListener(\"dispose\",f);t:{var r=n.get(e);if(e.image&&r.__image__webglTextureCube)t.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)break t;t.deleteTexture(r.__webglTexture)}n.remove(e)}e.isVideoTexture&&delete x[e.id],s.memory.textures--}function d(e){(e=e.target).removeEventListener(\"dispose\",d);var r=n.get(e),i=n.get(e.texture);if(e){if(void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(i=0;6>i;i++)t.deleteFramebuffer(r.__webglFramebuffer[i]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[i]);else t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer);n.remove(e.texture),n.remove(e)}s.memory.textures--}function p(e,h){var d=n.get(e);if(e.isVideoTexture){var p=e.id,g=s.render.frame;x[p]!==g&&(x[p]=g,e.update())}if(0<e.version&&d.__version!==e.version)if(void 0===(p=e.image))console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is undefined\",e);else{if(!1!==p.complete){void 0===d.__webglInit&&(d.__webglInit=!0,e.addEventListener(\"dispose\",f),d.__webglTexture=t.createTexture(),s.memory.textures++),r.activeTexture(t.TEXTURE0+h),r.bindTexture(t.TEXTURE_2D,d.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,e.unpackAlignment),h=a(e.image,i.maxTextureSize),(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)&&!1===u(h)&&(h instanceof HTMLImageElement||h instanceof HTMLCanvasElement||h instanceof ImageBitmap)&&(void 0===y&&(y=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\")),y.width=Si.floorPowerOfTwo(h.width),y.height=Si.floorPowerOfTwo(h.height),y.getContext(\"2d\").drawImage(h,0,0,y.width,y.height),console.warn(\"THREE.WebGLRenderer: image is not power of two (\"+h.width+\"x\"+h.height+\"). Resized to \"+y.width+\"x\"+y.height,h),h=y),p=u(h),g=o.convert(e.format);var v=o.convert(e.type);m(t.TEXTURE_2D,e,p);var b=e.mipmaps;if(e.isDepthTexture){var _=t.DEPTH_COMPONENT;if(1015===e.type){if(!w)throw Error(\"Float Depth Texture only supported in WebGL2.0\");_=t.DEPTH_COMPONENT32F}else w&&(_=t.DEPTH_COMPONENT16);1026===e.format&&_===t.DEPTH_COMPONENT&&1012!==e.type&&1014!==e.type&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.\"),e.type=1012,v=o.convert(e.type)),1027===e.format&&(_=t.DEPTH_STENCIL,1020!==e.type&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.\"),e.type=1020,v=o.convert(e.type))),r.texImage2D(t.TEXTURE_2D,0,_,h.width,h.height,0,g,v,null)}else if(e.isDataTexture)if(0<b.length&&p){for(var M=0,S=b.length;M<S;M++)r.texImage2D(t.TEXTURE_2D,M,g,(_=b[M]).width,_.height,0,g,v,_.data);e.generateMipmaps=!1,d.__maxMipLevel=b.length-1}else r.texImage2D(t.TEXTURE_2D,0,g,h.width,h.height,0,g,v,h.data),d.__maxMipLevel=0;else if(e.isCompressedTexture){for(M=0,S=b.length;M<S;M++)_=b[M],1023!==e.format&&1022!==e.format?-1<r.getCompressedTextureFormats().indexOf(g)?r.compressedTexImage2D(t.TEXTURE_2D,M,g,_.width,_.height,0,_.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\"):r.texImage2D(t.TEXTURE_2D,M,g,_.width,_.height,0,g,v,_.data);d.__maxMipLevel=b.length-1}else if(0<b.length&&p){for(M=0,S=b.length;M<S;M++)r.texImage2D(t.TEXTURE_2D,M,g,g,v,_=b[M]);e.generateMipmaps=!1,d.__maxMipLevel=b.length-1}else r.texImage2D(t.TEXTURE_2D,0,g,g,v,h),d.__maxMipLevel=0;return c(e,p)&&l(t.TEXTURE_2D,e,h.width,h.height),d.__version=e.version,void(e.onUpdate&&e.onUpdate(e))}console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is incomplete\",e)}r.activeTexture(t.TEXTURE0+h),r.bindTexture(t.TEXTURE_2D,d.__webglTexture)}function m(r,s,a){a?(t.texParameteri(r,t.TEXTURE_WRAP_S,o.convert(s.wrapS)),t.texParameteri(r,t.TEXTURE_WRAP_T,o.convert(s.wrapT)),t.texParameteri(r,t.TEXTURE_MAG_FILTER,o.convert(s.magFilter)),t.texParameteri(r,t.TEXTURE_MIN_FILTER,o.convert(s.minFilter))):(t.texParameteri(r,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(r,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),1001===s.wrapS&&1001===s.wrapT||console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.\",s),t.texParameteri(r,t.TEXTURE_MAG_FILTER,h(s.magFilter)),t.texParameteri(r,t.TEXTURE_MIN_FILTER,h(s.minFilter)),1003!==s.minFilter&&1006!==s.minFilter&&console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.\",s)),!(a=e.get(\"EXT_texture_filter_anisotropic\"))||1015===s.type&&null===e.get(\"OES_texture_float_linear\")||1016===s.type&&null===e.get(\"OES_texture_half_float_linear\")||!(1<s.anisotropy||n.get(s).__currentAnisotropy)||(t.texParameterf(r,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,i.getMaxAnisotropy())),n.get(s).__currentAnisotropy=s.anisotropy)}function g(e,i,s,a){var u=o.convert(i.texture.format),c=o.convert(i.texture.type);r.texImage2D(a,0,u,i.width,i.height,0,u,c,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,s,a,n.get(i.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function v(e,r){t.bindRenderbuffer(t.RENDERBUFFER,e),r.depthBuffer&&!r.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,r.width,r.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):r.depthBuffer&&r.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,r.width,r.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,r.width,r.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}var y,w=\"undefined\"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,x={};this.setTexture2D=p,this.setTextureCube=function(e,h){var d=n.get(e);if(6===e.image.length)if(0<e.version&&d.__version!==e.version){d.__image__webglTextureCube||(e.addEventListener(\"dispose\",f),d.__image__webglTextureCube=t.createTexture(),s.memory.textures++),r.activeTexture(t.TEXTURE0+h),r.bindTexture(t.TEXTURE_CUBE_MAP,d.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY),h=e&&e.isCompressedTexture;for(var p=e.image[0]&&e.image[0].isDataTexture,g=[],v=0;6>v;v++)g[v]=h||p?p?e.image[v].image:e.image[v]:a(e.image[v],i.maxCubemapSize);var y=g[0],w=u(y),x=o.convert(e.format),b=o.convert(e.type);for(m(t.TEXTURE_CUBE_MAP,e,w),v=0;6>v;v++)if(h)for(var _,M=g[v].mipmaps,S=0,E=M.length;S<E;S++)_=M[S],1023!==e.format&&1022!==e.format?-1<r.getCompressedTextureFormats().indexOf(x)?r.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,S,x,_.width,_.height,0,_.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\"):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,S,x,_.width,_.height,0,x,b,_.data);else p?r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,x,g[v].width,g[v].height,0,x,b,g[v].data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,x,x,b,g[v]);d.__maxMipLevel=h?M.length-1:0,c(e,w)&&l(t.TEXTURE_CUBE_MAP,e,y.width,y.height),d.__version=e.version,e.onUpdate&&e.onUpdate(e)}else r.activeTexture(t.TEXTURE0+h),r.bindTexture(t.TEXTURE_CUBE_MAP,d.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,i){r.activeTexture(t.TEXTURE0+i),r.bindTexture(t.TEXTURE_CUBE_MAP,n.get(e).__webglTexture)},this.setupRenderTarget=function(e){var i=n.get(e),o=n.get(e.texture);e.addEventListener(\"dispose\",d),o.__webglTexture=t.createTexture(),s.memory.textures++;var a=!0===e.isWebGLRenderTargetCube,h=u(e);if(a){i.__webglFramebuffer=[];for(var f=0;6>f;f++)i.__webglFramebuffer[f]=t.createFramebuffer()}else i.__webglFramebuffer=t.createFramebuffer();if(a){for(r.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture),m(t.TEXTURE_CUBE_MAP,e.texture,h),f=0;6>f;f++)g(i.__webglFramebuffer[f],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+f);c(e.texture,h)&&l(t.TEXTURE_CUBE_MAP,e.texture,e.width,e.height),r.bindTexture(t.TEXTURE_CUBE_MAP,null)}else r.bindTexture(t.TEXTURE_2D,o.__webglTexture),m(t.TEXTURE_2D,e.texture,h),g(i.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),c(e.texture,h)&&l(t.TEXTURE_2D,e.texture,e.width,e.height),r.bindTexture(t.TEXTURE_2D,null);if(e.depthBuffer){if(i=n.get(e),o=!0===e.isWebGLRenderTargetCube,e.depthTexture){if(o)throw Error(\"target.depthTexture not supported in Cube render targets\");if(e&&e.isWebGLRenderTargetCube)throw Error(\"Depth Texture with cube render targets is not supported\");if(t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),!e.depthTexture||!e.depthTexture.isDepthTexture)throw Error(\"renderTarget.depthTexture must be an instance of THREE.DepthTexture\");if(n.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),p(e.depthTexture,0),i=n.get(e.depthTexture).__webglTexture,1026===e.depthTexture.format)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,i,0);else{if(1027!==e.depthTexture.format)throw Error(\"Unknown depthTexture format\");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,i,0)}}else if(o)for(i.__webglDepthbuffer=[],o=0;6>o;o++)t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=t.createRenderbuffer(),v(i.__webglDepthbuffer[o],e);else t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),v(i.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}},this.updateRenderTargetMipmap=function(e){var i=e.texture,o=u(e);if(c(i,o)){o=e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D;var s=n.get(i).__webglTexture;r.bindTexture(o,s),l(o,i,e.width,e.height),r.bindTexture(o,null)}}}(_t,C,P,O,L,Y,D),I=new function(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(r){r.isInterleavedBufferAttribute&&(r=r.data);var n=e.get(r);n&&(t.deleteBuffer(n.buffer),e.delete(r))},update:function(r,n){r.isInterleavedBufferAttribute&&(r=r.data);var i=e.get(r);if(void 0===i)e.set(r,function(e,r){var n=e.array,i=e.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,o=t.createBuffer();return t.bindBuffer(r,o),t.bufferData(r,n,i),e.onUploadCallback(),r=t.FLOAT,n instanceof Float32Array?r=t.FLOAT:n instanceof Float64Array?console.warn(\"THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.\"):n instanceof Uint16Array?r=t.UNSIGNED_SHORT:n instanceof Int16Array?r=t.SHORT:n instanceof Uint32Array?r=t.UNSIGNED_INT:n instanceof Int32Array?r=t.INT:n instanceof Int8Array?r=t.BYTE:n instanceof Uint8Array&&(r=t.UNSIGNED_BYTE),{buffer:o,type:r,bytesPerElement:n.BYTES_PER_ELEMENT,version:e.version}}(r,n));else if(i.version<r.version){var o=r,s=o.array,a=o.updateRange;t.bindBuffer(n,i.buffer),!1===o.dynamic?t.bufferData(n,s,t.STATIC_DRAW):-1===a.count?t.bufferSubData(n,0,s):0===a.count?console.error(\"THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.\"):(t.bufferSubData(n,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1),i.version=r.version}}}}(_t),F=new J(_t,I,D),z=new function(t,e){var r={};return{update:function(n){var i=e.render.frame,o=n.geometry,s=t.get(n,o);return r[s.id]!==i&&(o.isGeometry&&s.updateFromObject(n),t.update(s),r[s.id]=i),s},dispose:function(){r={}}}}(F,D),H=new function(t){var e={},r=new Float32Array(8);return{update:function(n,i,o,s){var a=n.morphTargetInfluences,u=a.length;if(void 0===(n=e[i.id])){n=[];for(var c=0;c<u;c++)n[c]=[c,0];e[i.id]=n}var l=o.morphTargets&&i.morphAttributes.position;for(o=o.morphNormals&&i.morphAttributes.normal,c=0;c<u;c++){var h=n[c];0!==h[1]&&(l&&i.removeAttribute(\"morphTarget\"+c),o&&i.removeAttribute(\"morphNormal\"+c))}for(c=0;c<u;c++)(h=n[c])[0]=c,h[1]=a[c];for(n.sort(Z),c=0;8>c;c++)(h=n[c])&&(a=h[0],u=h[1])?(l&&i.addAttribute(\"morphTarget\"+c,l[a]),o&&i.addAttribute(\"morphNormal\"+c,o[a]),r[c]=u):r[c]=0;s.getUniforms().setValue(t,\"morphTargetInfluences\",r)}}}(_t),U=new function(t,e,r){function n(t,e){if(t)t.isTexture?r=t.encoding:t.isWebGLRenderTarget&&(console.warn(\"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\"),r=t.texture.encoding);else var r=3e3;return 3e3===r&&e&&(r=3007),r}var i=[],o={MeshDepthMaterial:\"depth\",MeshDistanceMaterial:\"distanceRGBA\",MeshNormalMaterial:\"normal\",MeshBasicMaterial:\"basic\",MeshLambertMaterial:\"lambert\",MeshPhongMaterial:\"phong\",MeshToonMaterial:\"phong\",MeshStandardMaterial:\"physical\",MeshPhysicalMaterial:\"physical\",LineBasicMaterial:\"basic\",LineDashedMaterial:\"dashed\",PointsMaterial:\"points\",ShadowMaterial:\"shadow\"},s=\"precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering\".split(\" \");this.getParameters=function(e,i,s,a,u,c,l){var h=o[e.type];if(l.isSkinnedMesh){var f=l.skeleton.bones;if(r.floatVertexTextures)f=1024;else{var d=Math.min(Math.floor((r.maxVertexUniforms-20)/4),f.length);d<f.length?(console.warn(\"THREE.WebGLRenderer: Skeleton has \"+f.length+\" bones. This GPU supports \"+d+\".\"),f=0):f=d}}else f=0;d=r.precision,null!==e.precision&&(d=r.getMaxPrecision(e.precision))!==e.precision&&console.warn(\"THREE.WebGLProgram.getParameters:\",e.precision,\"not supported, using\",d,\"instead.\");var p=t.getRenderTarget();return{shaderID:h,precision:d,supportsVertexTextures:r.vertexTextures,outputEncoding:n(p?p.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:n(e.map,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:n(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(306===e.envMap.mapping||307===e.envMap.mapping),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:n(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!a,useFog:e.fog,fogExp:a&&a.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:r.logarithmicDepthBuffer,skinning:e.skinning&&0<f,maxBones:f,useVertexTexture:r.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:u,numClipIntersection:c,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&l.receiveShadow&&0<s.length,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:2===e.side,flipSided:1===e.side,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,r){var n=[];if(r.shaderID?n.push(r.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)n.push(i),n.push(e.defines[i]);for(i=0;i<s.length;i++)n.push(r[s[i]]);return n.push(e.onBeforeCompile.toString()),n.push(t.gammaOutput),n.join()},this.acquireProgram=function(r,n,o,s){for(var a,u=0,c=i.length;u<c;u++){var l=i[u];if(l.code===s){++(a=l).usedTimes;break}}return void 0===a&&(a=new It(t,e,s,r,n,o),i.push(a)),a},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=i.indexOf(t);i[e]=i[i.length-1],i.pop(),t.destroy()}},this.programs=i}(Q,C,L),j=new function(){var t={};return{get:function(e,r){return void 0===(r=t[e=e.id+\",\"+r.id])&&(r=new function(){var t=[],e=0,r=[],n=[];return{opaque:r,transparent:n,init:function(){e=0,r.length=0,n.length=0},push:function(i,o,s,a,u){var c=t[e];void 0===c?t[e]=c={id:i.id,object:i,geometry:o,material:s,program:s.program,renderOrder:i.renderOrder,z:a,group:u}:(c.id=i.id,c.object=i,c.geometry=o,c.material=s,c.program=s.program,c.renderOrder=i.renderOrder,c.z=a,c.group=u),(!0===s.transparent?n:r).push(c),e++},sort:function(){1<r.length&&r.sort(Ft),1<n.length&&n.sort(zt)}}},t[e]=r),r},dispose:function(){t={}}}},V=new Ut,B=new X(Q,P,F,E),G=new function(t,e,r){var n;this.setMode=function(t){n=t},this.render=function(e,i){t.drawArrays(n,e,i),r.update(i,n)},this.renderInstances=function(t,i,o){var s=e.get(\"ANGLE_instanced_arrays\");if(null===s)console.error(\"THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");else{var a=t.attributes.position;a.isInterleavedBufferAttribute?s.drawArraysInstancedANGLE(n,0,o=a.data.count,t.maxInstancedCount):s.drawArraysInstancedANGLE(n,i,o,t.maxInstancedCount),r.update(o,n,t.maxInstancedCount)}}}(_t,C,D),W=new function(t,e,r){var n,i,o;this.setMode=function(t){n=t},this.setIndex=function(t){i=t.type,o=t.bytesPerElement},this.render=function(e,s){t.drawElements(n,s,i,e*o),r.update(s,n)},this.renderInstances=function(t,s,a){var u=e.get(\"ANGLE_instanced_arrays\");null===u?console.error(\"THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\"):(u.drawElementsInstancedANGLE(n,a,i,s*o,t.maxInstancedCount),r.update(a,n,t.maxInstancedCount))}}(_t,C,D),q=new Gt(Q,_t,P,N,L),D.programs=U.programs,Q.context=_t,Q.capabilities=L,Q.extensions=C,Q.properties=O,Q.renderLists=j,Q.state=P,Q.info=D}function r(t){t.preventDefault(),console.log(\"THREE.WebGLRenderer: Context Lost.\"),K=!0}function i(){console.log(\"THREE.WebGLRenderer: Context Restored.\"),K=!1,e()}function s(t){(t=t.target).removeEventListener(\"dispose\",s),a(t),O.remove(t)}function a(t){var e=O.get(t).program;t.program=void 0,void 0!==e&&U.releaseProgram(e)}function c(){var t=Mt.getDevice();t&&t.isPresenting?t.requestAnimationFrame(l):window.requestAnimationFrame(l)}function l(t){!1!==Et&&(Tt(t),c())}function f(t,e,r,n){for(var i=0,o=t.length;i<o;i++){var s=t[i],a=s.object,u=s.geometry,c=void 0===n?s.material:n;if(s=s.group,r.isArrayCamera){ot=r;for(var l=r.cameras,h=0,f=l.length;h<f;h++){var p=l[h];if(a.layers.test(p.layers)){var m=p.bounds;P.viewport(st.set(m.x*lt,m.y*ht,m.z*lt,m.w*ht).multiplyScalar(ft)),d(a,e,p,u,c,s)}}}else ot=null,d(a,e,r,u,c,s)}}function d(t,e,r,n,i,o){if(t.onBeforeRender(Q,e,r,n,i,o),k=V.get(e,ot||r),t.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var s=t.isMesh&&0>t.matrixWorld.determinant();P.setMaterial(i,s),s=g(r,e.fog,i,t),nt=\"\",function(t,e,r){t.render(function(t){Q.renderBufferImmediate(t,e,r)})}(t,s,i)}else Q.renderBufferDirect(r,e.fog,n,i,t,o);t.onAfterRender(Q,e,r,n,i,o),k=V.get(e,ot||r)}function p(t,e,r){var n=O.get(t),i=k.state.lights;r=U.getParameters(t,i.state,k.state.shadowsArray,e,vt.numPlanes,vt.numIntersection,r);var o=U.getProgramCode(t,r),u=n.program,c=!0;if(void 0===u)t.addEventListener(\"dispose\",s);else if(u.code!==o)a(t);else{if(n.lightsHash!==i.state.hash)O.update(t,\"lightsHash\",i.state.hash);else if(void 0!==r.shaderID)return;c=!1}if(c&&(n.shader=r.shaderID?{name:t.type,uniforms:Ai.clone((u=Ci[r.shaderID]).uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}:{name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader},t.onBeforeCompile(n.shader,Q),u=U.acquireProgram(t,n.shader,r,o),n.program=u,t.program=u),r=u.getAttributes(),t.morphTargets)for(o=t.numSupportedMorphTargets=0;o<Q.maxMorphTargets;o++)0<=r[\"morphTarget\"+o]&&t.numSupportedMorphTargets++;if(t.morphNormals)for(o=t.numSupportedMorphNormals=0;o<Q.maxMorphNormals;o++)0<=r[\"morphNormal\"+o]&&t.numSupportedMorphNormals++;r=n.shader.uniforms,(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=vt.numPlanes,n.numIntersection=vt.numIntersection,r.clippingPlanes=vt.uniform),n.fog=e,n.lightsHash=i.state.hash,t.lights&&(r.ambientLightColor.value=i.state.ambient,r.directionalLights.value=i.state.directional,r.spotLights.value=i.state.spot,r.rectAreaLights.value=i.state.rectArea,r.pointLights.value=i.state.point,r.hemisphereLights.value=i.state.hemi,r.directionalShadowMap.value=i.state.directionalShadowMap,r.directionalShadowMatrix.value=i.state.directionalShadowMatrix,r.spotShadowMap.value=i.state.spotShadowMap,r.spotShadowMatrix.value=i.state.spotShadowMatrix,r.pointShadowMap.value=i.state.pointShadowMap,r.pointShadowMatrix.value=i.state.pointShadowMatrix),t=n.program.getUniforms(),t=At.seqWithValue(t.seq,r),n.uniformsList=t}function g(t,e,r,n){ct=0;var i=O.get(r),o=k.state.lights;yt&&(wt||t!==it)&&vt.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,t,i,t===it&&r.id===rt),!1===r.needsUpdate&&(void 0===i.program?r.needsUpdate=!0:r.fog&&i.fog!==e?r.needsUpdate=!0:r.lights&&i.lightsHash!==o.state.hash?r.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===vt.numPlanes&&i.numIntersection===vt.numIntersection||(r.needsUpdate=!0)),r.needsUpdate&&(p(r,e,n),r.needsUpdate=!1);var s=!1,a=!1,u=!1,c=(o=i.program).getUniforms(),l=i.shader.uniforms;if(P.useProgram(o.program)&&(u=a=s=!0),r.id!==rt&&(rt=r.id,a=!0),(s||t!==it)&&(c.setValue(_t,\"projectionMatrix\",t.projectionMatrix),L.logarithmicDepthBuffer&&c.setValue(_t,\"logDepthBufFC\",2/(Math.log(t.far+1)/Math.LN2)),it!==(ot||t)&&(it=ot||t,u=a=!0),(r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap)&&void 0!==(s=c.map.cameraPosition)&&s.setValue(_t,bt.setFromMatrixPosition(t.matrixWorld)),(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&c.setValue(_t,\"viewMatrix\",t.matrixWorldInverse)),r.skinning&&(c.setOptional(_t,n,\"bindMatrix\"),c.setOptional(_t,n,\"bindMatrixInverse\"),t=n.skeleton))if(s=t.bones,L.floatVertexTextures){if(void 0===t.boneTexture){s=Math.sqrt(4*s.length),s=Si.ceilPowerOfTwo(s),s=Math.max(s,4);var f=new Float32Array(s*s*4);f.set(t.boneMatrices);var d=new h(f,s,s,1023,1015);d.needsUpdate=!0,t.boneMatrices=f,t.boneTexture=d,t.boneTextureSize=s}c.setValue(_t,\"boneTexture\",t.boneTexture),c.setValue(_t,\"boneTextureSize\",t.boneTextureSize)}else c.setOptional(_t,t,\"boneMatrices\");return a&&(c.setValue(_t,\"toneMappingExposure\",Q.toneMappingExposure),c.setValue(_t,\"toneMappingWhitePoint\",Q.toneMappingWhitePoint),r.lights&&(l.ambientLightColor.needsUpdate=a=u,l.directionalLights.needsUpdate=a,l.pointLights.needsUpdate=a,l.spotLights.needsUpdate=a,l.rectAreaLights.needsUpdate=a,l.hemisphereLights.needsUpdate=a),e&&r.fog&&(l.fogColor.value=e.color,e.isFog?(l.fogNear.value=e.near,l.fogFar.value=e.far):e.isFogExp2&&(l.fogDensity.value=e.density)),r.isMeshBasicMaterial?v(l,r):r.isMeshLambertMaterial?(v(l,r),r.emissiveMap&&(l.emissiveMap.value=r.emissiveMap)):r.isMeshPhongMaterial?(v(l,r),r.isMeshToonMaterial?(y(l,r),r.gradientMap&&(l.gradientMap.value=r.gradientMap)):y(l,r)):r.isMeshStandardMaterial?(v(l,r),r.isMeshPhysicalMaterial&&(l.clearCoat.value=r.clearCoat,l.clearCoatRoughness.value=r.clearCoatRoughness),l.roughness.value=r.roughness,l.metalness.value=r.metalness,r.roughnessMap&&(l.roughnessMap.value=r.roughnessMap),r.metalnessMap&&(l.metalnessMap.value=r.metalnessMap),r.emissiveMap&&(l.emissiveMap.value=r.emissiveMap),r.bumpMap&&(l.bumpMap.value=r.bumpMap,l.bumpScale.value=r.bumpScale),r.normalMap&&(l.normalMap.value=r.normalMap,l.normalScale.value.copy(r.normalScale)),r.displacementMap&&(l.displacementMap.value=r.displacementMap,l.displacementScale.value=r.displacementScale,l.displacementBias.value=r.displacementBias),r.envMap&&(l.envMapIntensity.value=r.envMapIntensity)):r.isMeshDepthMaterial?(v(l,r),r.displacementMap&&(l.displacementMap.value=r.displacementMap,l.displacementScale.value=r.displacementScale,l.displacementBias.value=r.displacementBias)):r.isMeshDistanceMaterial?(v(l,r),r.displacementMap&&(l.displacementMap.value=r.displacementMap,l.displacementScale.value=r.displacementScale,l.displacementBias.value=r.displacementBias),l.referencePosition.value.copy(r.referencePosition),l.nearDistance.value=r.nearDistance,l.farDistance.value=r.farDistance):r.isMeshNormalMaterial?(v(l,r),r.bumpMap&&(l.bumpMap.value=r.bumpMap,l.bumpScale.value=r.bumpScale),r.normalMap&&(l.normalMap.value=r.normalMap,l.normalScale.value.copy(r.normalScale)),r.displacementMap&&(l.displacementMap.value=r.displacementMap,l.displacementScale.value=r.displacementScale,l.displacementBias.value=r.displacementBias)):r.isLineBasicMaterial?(l.diffuse.value=r.color,l.opacity.value=r.opacity,r.isLineDashedMaterial&&(l.dashSize.value=r.dashSize,l.totalSize.value=r.dashSize+r.gapSize,l.scale.value=r.scale)):r.isPointsMaterial?(l.diffuse.value=r.color,l.opacity.value=r.opacity,l.size.value=r.size*ft,l.scale.value=.5*ht,l.map.value=r.map,null!==r.map&&(!0===r.map.matrixAutoUpdate&&r.map.updateMatrix(),l.uvTransform.value.copy(r.map.matrix))):r.isShadowMaterial&&(l.color.value=r.color,l.opacity.value=r.opacity),void 0!==l.ltc_1&&(l.ltc_1.value=ki.LTC_1),void 0!==l.ltc_2&&(l.ltc_2.value=ki.LTC_2),At.upload(_t,i.uniformsList,l,Q)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(At.upload(_t,i.uniformsList,l,Q),r.uniformsNeedUpdate=!1),c.setValue(_t,\"modelViewMatrix\",n.modelViewMatrix),c.setValue(_t,\"normalMatrix\",n.normalMatrix),c.setValue(_t,\"modelMatrix\",n.matrixWorld),o}function v(t,e){if(t.opacity.value=e.opacity,e.color&&(t.diffuse.value=e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=O.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map)var r=e.map;else e.specularMap?r=e.specularMap:e.displacementMap?r=e.displacementMap:e.normalMap?r=e.normalMap:e.bumpMap?r=e.bumpMap:e.roughnessMap?r=e.roughnessMap:e.metalnessMap?r=e.metalnessMap:e.alphaMap?r=e.alphaMap:e.emissiveMap&&(r=e.emissiveMap);void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}function y(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}console.log(\"THREE.WebGLRenderer\",\"92\");var w=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\"),x=void 0!==t.context?t.context:null,b=void 0!==t.alpha&&t.alpha,_=void 0===t.depth||t.depth,M=void 0===t.stencil||t.stencil,S=void 0!==t.antialias&&t.antialias,E=void 0===t.premultipliedAlpha||t.premultipliedAlpha,T=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,A=void 0!==t.powerPreference?t.powerPreference:\"default\",R=null,k=null;this.domElement=w,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var C,L,P,D,O,N,I,F,z,U,j,V,B,H,G,W,q,Y,Q=this,K=!1,tt=null,et=null,rt=-1,nt=\"\",it=null,ot=null,st=new u,at=new u,ut=null,ct=0,lt=w.width,ht=w.height,ft=1,dt=new u(0,0,lt,ht),pt=new u(0,0,lt,ht),mt=!1,gt=new m,vt=new $,yt=!1,wt=!1,xt=new n,bt=new o;try{b={alpha:b,depth:_,stencil:M,antialias:S,premultipliedAlpha:E,preserveDrawingBuffer:T,powerPreference:A},w.addEventListener(\"webglcontextlost\",r,!1),w.addEventListener(\"webglcontextrestored\",i,!1);var _t=x||w.getContext(\"webgl\",b)||w.getContext(\"experimental-webgl\",b);if(null===_t){if(null!==w.getContext(\"webgl\"))throw Error(\"Error creating WebGL context with your selected attributes.\");throw Error(\"Error creating WebGL context.\")}void 0===_t.getShaderPrecisionFormat&&(_t.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){console.error(\"THREE.WebGLRenderer: \"+t.message)}e();var Mt=new Xt(Q);this.vr=Mt;var St=new Bt(Q,z,L.maxTextureSize);this.shadowMap=St,this.getContext=function(){return _t},this.getContextAttributes=function(){return _t.getContextAttributes()},this.forceContextLoss=function(){var t=C.get(\"WEBGL_lose_context\");t&&t.loseContext()},this.forceContextRestore=function(){var t=C.get(\"WEBGL_lose_context\");t&&t.restoreContext()},this.getPixelRatio=function(){return ft},this.setPixelRatio=function(t){void 0!==t&&(ft=t,this.setSize(lt,ht,!1))},this.getSize=function(){return{width:lt,height:ht}},this.setSize=function(t,e,r){var n=Mt.getDevice();n&&n.isPresenting?console.warn(\"THREE.WebGLRenderer: Can't change size while VR device is presenting.\"):(lt=t,ht=e,w.width=t*ft,w.height=e*ft,!1!==r&&(w.style.width=t+\"px\",w.style.height=e+\"px\"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(){return{width:lt*ft,height:ht*ft}},this.setDrawingBufferSize=function(t,e,r){lt=t,ht=e,ft=r,w.width=t*r,w.height=e*r,this.setViewport(0,0,t,e)},this.getCurrentViewport=function(){return st},this.setViewport=function(t,e,r,n){dt.set(t,ht-e-n,r,n),P.viewport(st.copy(dt).multiplyScalar(ft))},this.setScissor=function(t,e,r,n){pt.set(t,ht-e-n,r,n),P.scissor(at.copy(pt).multiplyScalar(ft))},this.setScissorTest=function(t){P.setScissorTest(mt=t)},this.getClearColor=function(){return B.getClearColor()},this.setClearColor=function(){B.setClearColor.apply(B,arguments)},this.getClearAlpha=function(){return B.getClearAlpha()},this.setClearAlpha=function(){B.setClearAlpha.apply(B,arguments)},this.clear=function(t,e,r){var n=0;(void 0===t||t)&&(n|=_t.COLOR_BUFFER_BIT),(void 0===e||e)&&(n|=_t.DEPTH_BUFFER_BIT),(void 0===r||r)&&(n|=_t.STENCIL_BUFFER_BIT),_t.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,r,n){this.setRenderTarget(t),this.clear(e,r,n)},this.dispose=function(){w.removeEventListener(\"webglcontextlost\",r,!1),w.removeEventListener(\"webglcontextrestored\",i,!1),j.dispose(),V.dispose(),O.dispose(),z.dispose(),Mt.dispose(),Et=!1},this.renderBufferImmediate=function(t,e,r){P.initAttributes();var n=O.get(t);if(t.hasPositions&&!n.position&&(n.position=_t.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=_t.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=_t.createBuffer()),t.hasColors&&!n.color&&(n.color=_t.createBuffer()),e=e.getAttributes(),t.hasPositions&&(_t.bindBuffer(_t.ARRAY_BUFFER,n.position),_t.bufferData(_t.ARRAY_BUFFER,t.positionArray,_t.DYNAMIC_DRAW),P.enableAttribute(e.position),_t.vertexAttribPointer(e.position,3,_t.FLOAT,!1,0,0)),t.hasNormals){if(_t.bindBuffer(_t.ARRAY_BUFFER,n.normal),!r.isMeshPhongMaterial&&!r.isMeshStandardMaterial&&!r.isMeshNormalMaterial&&!0===r.flatShading)for(var i=0,o=3*t.count;i<o;i+=9){var s=t.normalArray,a=(s[i+0]+s[i+3]+s[i+6])/3,u=(s[i+1]+s[i+4]+s[i+7])/3,c=(s[i+2]+s[i+5]+s[i+8])/3;s[i+0]=a,s[i+1]=u,s[i+2]=c,s[i+3]=a,s[i+4]=u,s[i+5]=c,s[i+6]=a,s[i+7]=u,s[i+8]=c}_t.bufferData(_t.ARRAY_BUFFER,t.normalArray,_t.DYNAMIC_DRAW),P.enableAttribute(e.normal),_t.vertexAttribPointer(e.normal,3,_t.FLOAT,!1,0,0)}t.hasUvs&&r.map&&(_t.bindBuffer(_t.ARRAY_BUFFER,n.uv),_t.bufferData(_t.ARRAY_BUFFER,t.uvArray,_t.DYNAMIC_DRAW),P.enableAttribute(e.uv),_t.vertexAttribPointer(e.uv,2,_t.FLOAT,!1,0,0)),t.hasColors&&0!==r.vertexColors&&(_t.bindBuffer(_t.ARRAY_BUFFER,n.color),_t.bufferData(_t.ARRAY_BUFFER,t.colorArray,_t.DYNAMIC_DRAW),P.enableAttribute(e.color),_t.vertexAttribPointer(e.color,3,_t.FLOAT,!1,0,0)),P.disableUnusedAttributes(),_t.drawArrays(_t.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,r,n,i,o){var s=i.isMesh&&0>i.matrixWorld.determinant();P.setMaterial(n,s);var a=g(t,e,n,i),u=!1;(t=r.id+\"_\"+a.id+\"_\"+(!0===n.wireframe))!==nt&&(nt=t,u=!0),i.morphTargetInfluences&&(H.update(i,r,n,a),u=!0),s=r.index;var c=r.attributes.position;if(e=1,!0===n.wireframe&&(s=F.getWireframeAttribute(r),e=2),t=G,null!==s){var l=I.get(s);(t=W).setIndex(l)}if(u){if(r&&r.isInstancedBufferGeometry&&null===C.get(\"ANGLE_instanced_arrays\"))console.error(\"THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");else{P.initAttributes(),u=r.attributes,a=a.getAttributes();var h=n.defaultAttributeValues;for(_ in a){var f=a[_];if(0<=f){var d=u[_];if(void 0!==d){var p=d.normalized,m=d.itemSize,v=I.get(d);if(void 0!==v){var y=v.buffer,w=v.type;if(v=v.bytesPerElement,d.isInterleavedBufferAttribute){var x=d.data,b=x.stride;d=d.offset,x&&x.isInstancedInterleavedBuffer?(P.enableAttributeAndDivisor(f,x.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=x.meshPerAttribute*x.count)):P.enableAttribute(f),_t.bindBuffer(_t.ARRAY_BUFFER,y),_t.vertexAttribPointer(f,m,w,p,b*v,d*v)}else d.isInstancedBufferAttribute?(P.enableAttributeAndDivisor(f,d.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=d.meshPerAttribute*d.count)):P.enableAttribute(f),_t.bindBuffer(_t.ARRAY_BUFFER,y),_t.vertexAttribPointer(f,m,w,p,0,0)}}else if(void 0!==h&&void 0!==(p=h[_]))switch(p.length){case 2:_t.vertexAttrib2fv(f,p);break;case 3:_t.vertexAttrib3fv(f,p);break;case 4:_t.vertexAttrib4fv(f,p);break;default:_t.vertexAttrib1fv(f,p)}}}P.disableUnusedAttributes()}null!==s&&_t.bindBuffer(_t.ELEMENT_ARRAY_BUFFER,l.buffer)}l=1/0,null!==s?l=s.count:void 0!==c&&(l=c.count),s=r.drawRange.start*e,c=null!==o?o.start*e:0;var _=Math.max(s,c);if(0!==(o=Math.max(0,Math.min(l,s+r.drawRange.count*e,c+(null!==o?o.count*e:1/0))-1-_+1))){if(i.isMesh)if(!0===n.wireframe)P.setLineWidth(n.wireframeLinewidth*(null===tt?ft:1)),t.setMode(_t.LINES);else switch(i.drawMode){case 0:t.setMode(_t.TRIANGLES);break;case 1:t.setMode(_t.TRIANGLE_STRIP);break;case 2:t.setMode(_t.TRIANGLE_FAN)}else i.isLine?(void 0===(n=n.linewidth)&&(n=1),P.setLineWidth(n*(null===tt?ft:1)),t.setMode(i.isLineSegments?_t.LINES:i.isLineLoop?_t.LINE_LOOP:_t.LINE_STRIP)):i.isPoints&&t.setMode(_t.POINTS);r&&r.isInstancedBufferGeometry?0<r.maxInstancedCount&&t.renderInstances(r,_,o):t.render(_,o)}},this.compile=function(t,e){(k=V.get(t,e)).init(),t.traverse(function(t){t.isLight&&(k.pushLight(t),t.castShadow&&k.pushShadow(t))}),k.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var r=0;r<e.material.length;r++)p(e.material[r],t.fog,e);else p(e.material,t.fog,e)})};var Et=!1,Tt=null;this.animate=function(t){null!==(Tt=t)?Et||(c(),Et=!0):Et=!1},this.render=function(t,e,r,n){if(e&&e.isCamera){if(!K){nt=\"\",rt=-1,it=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),Mt.enabled&&(e=Mt.getCamera(e)),(k=V.get(t,e)).init(),t.onBeforeRender(Q,t,e,r),xt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),gt.setFromMatrix(xt),yt=vt.init(this.clippingPlanes,wt=this.localClippingEnabled,e),(R=j.get(t,e)).init(),function t(e,r,n){if(!1!==e.visible){if(e.layers.test(r.layers))if(e.isLight)k.pushLight(e),e.castShadow&&k.pushShadow(e);else if(e.isSprite)e.frustumCulled&&!gt.intersectsSprite(e)||k.pushSprite(e);else if(e.isImmediateRenderObject)n&&bt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(xt),R.push(e,null,e.material,bt.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||gt.intersectsObject(e))){n&&bt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(xt);var i=z.update(e),o=e.material;if(Array.isArray(o))for(var s=i.groups,a=0,u=s.length;a<u;a++){var c=s[a],l=o[c.materialIndex];l&&l.visible&&R.push(e,i,l,bt.z,c)}else o.visible&&R.push(e,i,o,bt.z,null)}for(a=0,u=(e=e.children).length;a<u;a++)t(e[a],r,n)}}(t,e,Q.sortObjects),!0===Q.sortObjects&&R.sort(),yt&&vt.beginShadows(),St.render(k.state.shadowsArray,t,e),k.setupLights(e),yt&&vt.endShadows(),this.info.autoReset&&this.info.reset(),void 0===r&&(r=null),this.setRenderTarget(r),B.render(R,t,e,n),n=R.opaque;var i=R.transparent;if(t.overrideMaterial){var o=t.overrideMaterial;n.length&&f(n,t,e,o),i.length&&f(i,t,e,o)}else n.length&&f(n,t,e),i.length&&f(i,t,e);q.render(k.state.spritesArray,t,e),r&&N.updateRenderTargetMipmap(r),P.buffers.depth.setTest(!0),P.buffers.depth.setMask(!0),P.buffers.color.setMask(!0),P.setPolygonOffset(!1),t.onAfterRender(Q,t,e),Mt.enabled&&Mt.submitFrame(),k=R=null}}else console.error(\"THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.\")},this.allocTextureUnit=function(){var t=ct;return t>=L.maxTextures&&console.warn(\"THREE.WebGLRenderer: Trying to use \"+t+\" texture units while this GPU supports only \"+L.maxTextures),ct+=1,t},this.setTexture2D=function(){var t=!1;return function(e,r){e&&e.isWebGLRenderTarget&&(t||(console.warn(\"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\"),t=!0),e=e.texture),N.setTexture2D(e,r)}}(),this.setTexture=function(){var t=!1;return function(e,r){t||(console.warn(\"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\"),t=!0),N.setTexture2D(e,r)}}(),this.setTextureCube=function(){var t=!1;return function(e,r){e&&e.isWebGLRenderTargetCube&&(t||(console.warn(\"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\"),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?N.setTextureCube(e,r):N.setTextureCubeDynamic(e,r)}}(),this.getRenderTarget=function(){return tt},this.setRenderTarget=function(t){(tt=t)&&void 0===O.get(t).__webglFramebuffer&&N.setupRenderTarget(t);var e=null,r=!1;t?(e=O.get(t).__webglFramebuffer,t.isWebGLRenderTargetCube&&(e=e[t.activeCubeFace],r=!0),st.copy(t.viewport),at.copy(t.scissor),ut=t.scissorTest):(st.copy(dt).multiplyScalar(ft),at.copy(pt).multiplyScalar(ft),ut=mt),et!==e&&(_t.bindFramebuffer(_t.FRAMEBUFFER,e),et=e),P.viewport(st),P.scissor(at),P.setScissorTest(ut),r&&(r=O.get(t.texture),_t.framebufferTexture2D(_t.FRAMEBUFFER,_t.COLOR_ATTACHMENT0,_t.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,r.__webglTexture,t.activeMipMapLevel))},this.readRenderTargetPixels=function(t,e,r,n,i,o){if(t&&t.isWebGLRenderTarget){var s=O.get(t).__webglFramebuffer;if(s){var a=!1;s!==et&&(_t.bindFramebuffer(_t.FRAMEBUFFER,s),a=!0);try{var u=t.texture,c=u.format,l=u.type;1023!==c&&Y.convert(c)!==_t.getParameter(_t.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.\"):1009===l||Y.convert(l)===_t.getParameter(_t.IMPLEMENTATION_COLOR_READ_TYPE)||1015===l&&(C.get(\"OES_texture_float\")||C.get(\"WEBGL_color_buffer_float\"))||1016===l&&C.get(\"EXT_color_buffer_half_float\")?_t.checkFramebufferStatus(_t.FRAMEBUFFER)===_t.FRAMEBUFFER_COMPLETE?0<=e&&e<=t.width-n&&0<=r&&r<=t.height-i&&_t.readPixels(e,r,n,i,Y.convert(c),Y.convert(l),o):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.\"):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.\")}finally{a&&_t.bindFramebuffer(_t.FRAMEBUFFER,et)}}}else console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.\")},this.copyFramebufferToTexture=function(t,e,r){var n=e.image.width,i=e.image.height,o=Y.convert(e.format);this.setTexture2D(e,0),_t.copyTexImage2D(_t.TEXTURE_2D,r||0,o,t.x,t.y,n,i,0)},this.copyTextureToTexture=function(t,e,r,n){var i=e.image.width,o=e.image.height,s=Y.convert(r.format),a=Y.convert(r.type);e=e.isDataTexture?e.image.data:e.image,this.setTexture2D(r,0),_t.texSubImage2D(_t.TEXTURE_2D,n||0,t.x,t.y,i,o,s,a,e)}}function Jt(t,e){this.name=\"\",this.color=new g(t),this.density=void 0!==e?e:25e-5}function Zt(t,e,r){this.name=\"\",this.color=new g(t),this.near=void 0!==e?e:1,this.far=void 0!==r?r:1e3}function Qt(){w.call(this),this.type=\"Scene\",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0}function Kt(t){V.call(this),this.type=\"SpriteMaterial\",this.color=new g(16777215),this.map=null,this.rotation=0,this.lights=this.fog=!1,this.setValues(t)}function te(t){w.call(this),this.type=\"Sprite\",this.material=void 0!==t?t:new Kt,this.center=new r(.5,.5)}function ee(){w.call(this),this.type=\"LOD\",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function re(t,e){if(this.bones=(t=t||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(console.warn(\"THREE.Skeleton boneInverses is the wrong length.\"),this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new n)}function ne(){w.call(this),this.type=\"Bone\"}function ie(t,e){Y.call(this,t,e),this.type=\"SkinnedMesh\",this.bindMode=\"attached\",this.bindMatrix=new n,this.bindMatrixInverse=new n,t=new re(t=this.initBones()),this.bind(t,this.matrixWorld),this.normalizeSkinWeights()}function oe(t){V.call(this),this.type=\"LineBasicMaterial\",this.color=new g(16777215),this.linewidth=1,this.linejoin=this.linecap=\"round\",this.lights=!1,this.setValues(t)}function se(t,e,r){if(1===r)return console.warn(\"THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.\"),new ae(t,e);w.call(this),this.type=\"Line\",this.geometry=void 0!==t?t:new I,this.material=void 0!==e?e:new oe({color:16777215*Math.random()})}function ae(t,e){se.call(this,t,e),this.type=\"LineSegments\"}function ue(t,e){se.call(this,t,e),this.type=\"LineLoop\"}function ce(t){V.call(this),this.type=\"PointsMaterial\",this.color=new g(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function le(t,e){w.call(this),this.type=\"Points\",this.geometry=void 0!==t?t:new I,this.material=void 0!==e?e:new ce({color:16777215*Math.random()})}function he(){w.call(this),this.type=\"Group\"}function fe(t,e,r,n,i,o,s,u,c){a.call(this,t,e,r,n,i,o,s,u,c),this.generateMipmaps=!1}function de(t,e,r,n,i,o,s,u,c,l,h,f){a.call(this,null,o,s,u,c,l,n,i,h,f),this.image={width:e,height:r},this.mipmaps=t,this.generateMipmaps=this.flipY=!1}function pe(t,e,r,n,i,o,s,u,c,l){if(1026!==(l=void 0!==l?l:1026)&&1027!==l)throw Error(\"DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat\");void 0===r&&1026===l&&(r=1012),void 0===r&&1027===l&&(r=1020),a.call(this,null,n,i,o,s,u,l,r,c),this.image={width:t,height:e},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==u?u:1003,this.generateMipmaps=this.flipY=!1}function me(t){I.call(this),this.type=\"WireframeGeometry\";var e,r,n,i=[],s=[0,0],a={},u=[\"a\",\"b\",\"c\"];if(t&&t.isGeometry){var c=t.faces,l=0;for(r=c.length;l<r;l++){var h=c[l];for(e=0;3>e;e++){var f=h[u[e]],d=h[u[(e+1)%3]];s[0]=Math.min(f,d),s[1]=Math.max(f,d),void 0===a[f=s[0]+\",\"+s[1]]&&(a[f]={index1:s[0],index2:s[1]})}}for(f in a)i.push((u=t.vertices[(l=a[f]).index1]).x,u.y,u.z),i.push((u=t.vertices[l.index2]).x,u.y,u.z)}else if(t&&t.isBufferGeometry)if(u=new o,null!==t.index){c=t.attributes.position,h=t.index;var p=t.groups;for(0===p.length&&(p=[{start:0,count:h.count,materialIndex:0}]),t=0,n=p.length;t<n;++t)for(r=(l=p[t]).count,l=e=l.start,r=e+r;l<r;l+=3)for(e=0;3>e;e++)f=h.getX(l+e),d=h.getX(l+(e+1)%3),s[0]=Math.min(f,d),s[1]=Math.max(f,d),void 0===a[f=s[0]+\",\"+s[1]]&&(a[f]={index1:s[0],index2:s[1]});for(f in a)u.fromBufferAttribute(c,(l=a[f]).index1),i.push(u.x,u.y,u.z),u.fromBufferAttribute(c,l.index2),i.push(u.x,u.y,u.z)}else for(l=0,r=(c=t.attributes.position).count/3;l<r;l++)for(e=0;3>e;e++)u.fromBufferAttribute(c,a=3*l+e),i.push(u.x,u.y,u.z),u.fromBufferAttribute(c,a=3*l+(e+1)%3),i.push(u.x,u.y,u.z);this.addAttribute(\"position\",new P(i,3))}function ge(t,e,r){M.call(this),this.type=\"ParametricGeometry\",this.parameters={func:t,slices:e,stacks:r},this.fromBufferGeometry(new ve(t,e,r)),this.mergeVertices()}function ve(t,e,r){I.call(this),this.type=\"ParametricBufferGeometry\",this.parameters={func:t,slices:e,stacks:r};var n,i,s=[],a=[],u=[],c=[],l=new o,h=new o,f=new o,d=new o,p=new o,m=e+1;for(n=0;n<=r;n++){var g=n/r;for(i=0;i<=e;i++){var v=i/e;t(v,g,h),a.push(h.x,h.y,h.z),0<=v-1e-5?(t(v-1e-5,g,f),d.subVectors(h,f)):(t(v+1e-5,g,f),d.subVectors(f,h)),0<=g-1e-5?(t(v,g-1e-5,f),p.subVectors(h,f)):(t(v,g+1e-5,f),p.subVectors(f,h)),l.crossVectors(d,p).normalize(),u.push(l.x,l.y,l.z),c.push(v,g)}}for(n=0;n<r;n++)for(i=0;i<e;i++)l=(n+1)*m+i+1,s.push(n*m+i,t=n*m+i+1,h=(n+1)*m+i),s.push(t,l,h);this.setIndex(s),this.addAttribute(\"position\",new P(a,3)),this.addAttribute(\"normal\",new P(u,3)),this.addAttribute(\"uv\",new P(c,2))}function ye(t,e,r,n){M.call(this),this.type=\"PolyhedronGeometry\",this.parameters={vertices:t,indices:e,radius:r,detail:n},this.fromBufferGeometry(new we(t,e,r,n)),this.mergeVertices()}function we(t,e,n,i){function s(t){c.push(t.x,t.y,t.z)}function a(e,r){r.x=t[0+(e*=3)],r.y=t[e+1],r.z=t[e+2]}function u(t,e,r,n){0>n&&1===t.x&&(l[e]=t.x-1),0===r.x&&0===r.z&&(l[e]=n/2/Math.PI+.5)}I.call(this),this.type=\"PolyhedronBufferGeometry\",this.parameters={vertices:t,indices:e,radius:n,detail:i},n=n||1;var c=[],l=[];!function(t){for(var r=new o,n=new o,i=new o,u=0;u<e.length;u+=3){a(e[u+0],r),a(e[u+1],n),a(e[u+2],i);var c,l,h=r,f=n,d=i,p=Math.pow(2,t),m=[];for(l=0;l<=p;l++){m[l]=[];var g=h.clone().lerp(d,l/p),v=f.clone().lerp(d,l/p),y=p-l;for(c=0;c<=y;c++)m[l][c]=0===c&&l===p?g:g.clone().lerp(v,c/y)}for(l=0;l<p;l++)for(c=0;c<2*(p-l)-1;c++)h=Math.floor(c/2),0==c%2?(s(m[l][h+1]),s(m[l+1][h]),s(m[l][h])):(s(m[l][h+1]),s(m[l+1][h+1]),s(m[l+1][h]))}}(i=i||0),function(t){for(var e=new o,r=0;r<c.length;r+=3)e.x=c[r+0],e.y=c[r+1],e.z=c[r+2],e.normalize().multiplyScalar(t),c[r+0]=e.x,c[r+1]=e.y,c[r+2]=e.z}(n),function(){for(var t=new o,e=0;e<c.length;e+=3)t.x=c[e+0],t.y=c[e+1],t.z=c[e+2],l.push(Math.atan2(t.z,-t.x)/2/Math.PI+.5,1-(Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5));t=new o,e=new o;for(var n=new o,i=new o,s=new r,a=new r,h=new r,f=0,d=0;f<c.length;f+=9,d+=6){t.set(c[f+0],c[f+1],c[f+2]),e.set(c[f+3],c[f+4],c[f+5]),n.set(c[f+6],c[f+7],c[f+8]),s.set(l[d+0],l[d+1]),a.set(l[d+2],l[d+3]),h.set(l[d+4],l[d+5]),i.copy(t).add(e).add(n).divideScalar(3);var p=Math.atan2(i.z,-i.x);u(s,d+0,t,p),u(a,d+2,e,p),u(h,d+4,n,p)}for(t=0;t<l.length;t+=6)e=l[t+0],n=l[t+2],i=l[t+4],s=Math.min(e,n,i),.9<Math.max(e,n,i)&&.1>s&&(.2>e&&(l[t+0]+=1),.2>n&&(l[t+2]+=1),.2>i&&(l[t+4]+=1))}(),this.addAttribute(\"position\",new P(c,3)),this.addAttribute(\"normal\",new P(c.slice(),3)),this.addAttribute(\"uv\",new P(l,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function xe(t,e){M.call(this),this.type=\"TetrahedronGeometry\",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new be(t,e)),this.mergeVertices()}function be(t,e){we.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type=\"TetrahedronBufferGeometry\",this.parameters={radius:t,detail:e}}function _e(t,e){M.call(this),this.type=\"OctahedronGeometry\",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Me(t,e)),this.mergeVertices()}function Me(t,e){we.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type=\"OctahedronBufferGeometry\",this.parameters={radius:t,detail:e}}function Se(t,e){M.call(this),this.type=\"IcosahedronGeometry\",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ee(t,e)),this.mergeVertices()}function Ee(t,e){var r=(1+Math.sqrt(5))/2;we.call(this,[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type=\"IcosahedronBufferGeometry\",this.parameters={radius:t,detail:e}}function Te(t,e){M.call(this),this.type=\"DodecahedronGeometry\",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ae(t,e)),this.mergeVertices()}function Ae(t,e){var r=(1+Math.sqrt(5))/2,n=1/r;we.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type=\"DodecahedronBufferGeometry\",this.parameters={radius:t,detail:e}}function Re(t,e,r,n,i,o){M.call(this),this.type=\"TubeGeometry\",this.parameters={path:t,tubularSegments:e,radius:r,radialSegments:n,closed:i},void 0!==o&&console.warn(\"THREE.TubeGeometry: taper has been removed.\"),t=new ke(t,e,r,n,i),this.tangents=t.tangents,this.normals=t.normals,this.binormals=t.binormals,this.fromBufferGeometry(t),this.mergeVertices()}function ke(t,e,n,i,s){function a(r){p=t.getPointAt(r/e,p);var o=u.normals[r];for(r=u.binormals[r],l=0;l<=i;l++){var s=l/i*Math.PI*2,a=Math.sin(s);s=-Math.cos(s),f.x=s*o.x+a*r.x,f.y=s*o.y+a*r.y,f.z=s*o.z+a*r.z,f.normalize(),g.push(f.x,f.y,f.z),h.x=p.x+n*f.x,h.y=p.y+n*f.y,h.z=p.z+n*f.z,m.push(h.x,h.y,h.z)}}I.call(this),this.type=\"TubeBufferGeometry\",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:s},e=e||64,n=n||1,i=i||8;var u=t.computeFrenetFrames(e,s=s||!1);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;var c,l,h=new o,f=new o,d=new r,p=new o,m=[],g=[],v=[],y=[];for(c=0;c<e;c++)a(c);for(a(!1===s?e:0),c=0;c<=e;c++)for(l=0;l<=i;l++)d.x=c/e,d.y=l/i,v.push(d.x,d.y);!function(){for(l=1;l<=e;l++)for(c=1;c<=i;c++){var t=(i+1)*l+(c-1),r=(i+1)*l+c,n=(i+1)*(l-1)+c;y.push((i+1)*(l-1)+(c-1),t,n),y.push(t,r,n)}}(),this.setIndex(y),this.addAttribute(\"position\",new P(m,3)),this.addAttribute(\"normal\",new P(g,3)),this.addAttribute(\"uv\",new P(v,2))}function Ce(t,e,r,n,i,o,s){M.call(this),this.type=\"TorusKnotGeometry\",this.parameters={radius:t,tube:e,tubularSegments:r,radialSegments:n,p:i,q:o},void 0!==s&&console.warn(\"THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.\"),this.fromBufferGeometry(new Le(t,e,r,n,i,o)),this.mergeVertices()}function Le(t,e,r,n,i,s){function a(t,e,r,n,i){var o=Math.sin(t);e=r/e*t,r=Math.cos(e),i.x=n*(2+r)*.5*Math.cos(t),i.y=n*(2+r)*o*.5,i.z=n*Math.sin(e)*.5}I.call(this),this.type=\"TorusKnotBufferGeometry\",this.parameters={radius:t,tube:e,tubularSegments:r,radialSegments:n,p:i,q:s},t=t||1,e=e||.4,r=Math.floor(r)||64,n=Math.floor(n)||8,i=i||2,s=s||3;var u,c=[],l=[],h=[],f=[],d=new o,p=new o,m=new o,g=new o,v=new o,y=new o,w=new o;for(u=0;u<=r;++u){var x=u/r*i*Math.PI*2;for(a(x,i,s,t,m),a(x+.01,i,s,t,g),y.subVectors(g,m),w.addVectors(g,m),v.crossVectors(y,w),w.crossVectors(v,y),v.normalize(),w.normalize(),x=0;x<=n;++x){var b=x/n*Math.PI*2,_=-e*Math.cos(b);b=e*Math.sin(b),d.x=m.x+(_*w.x+b*v.x),d.y=m.y+(_*w.y+b*v.y),d.z=m.z+(_*w.z+b*v.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),h.push(p.x,p.y,p.z),f.push(u/r),f.push(x/n)}}for(x=1;x<=r;x++)for(u=1;u<=n;u++)e=(n+1)*x+u,c.push((n+1)*(x-1)+(u-1),t=(n+1)*x+(u-1),i=(n+1)*(x-1)+u),c.push(t,e,i);this.setIndex(c),this.addAttribute(\"position\",new P(l,3)),this.addAttribute(\"normal\",new P(h,3)),this.addAttribute(\"uv\",new P(f,2))}function Pe(t,e,r,n,i){M.call(this),this.type=\"TorusGeometry\",this.parameters={radius:t,tube:e,radialSegments:r,tubularSegments:n,arc:i},this.fromBufferGeometry(new De(t,e,r,n,i)),this.mergeVertices()}function De(t,e,r,n,i){I.call(this),this.type=\"TorusBufferGeometry\",this.parameters={radius:t,tube:e,radialSegments:r,tubularSegments:n,arc:i},t=t||1,e=e||.4,r=Math.floor(r)||8,n=Math.floor(n)||6,i=i||2*Math.PI;var s,a,u=[],c=[],l=[],h=[],f=new o,d=new o,p=new o;for(s=0;s<=r;s++)for(a=0;a<=n;a++){var m=a/n*i,g=s/r*Math.PI*2;d.x=(t+e*Math.cos(g))*Math.cos(m),d.y=(t+e*Math.cos(g))*Math.sin(m),d.z=e*Math.sin(g),c.push(d.x,d.y,d.z),f.x=t*Math.cos(m),f.y=t*Math.sin(m),p.subVectors(d,f).normalize(),l.push(p.x,p.y,p.z),h.push(a/n),h.push(s/r)}for(s=1;s<=r;s++)for(a=1;a<=n;a++)e=(n+1)*(s-1)+a,u.push((n+1)*s+a-1,t=(n+1)*(s-1)+a-1,i=(n+1)*s+a),u.push(t,e,i);this.setIndex(u),this.addAttribute(\"position\",new P(c,3)),this.addAttribute(\"normal\",new P(l,3)),this.addAttribute(\"uv\",new P(h,2))}function Oe(t,e,r,n,i){for(var o,s=0,a=e,u=r-n;a<r;a+=n)s+=(t[u]-t[a])*(t[a+1]+t[u+1]),u=a;if(i===0<s)for(i=e;i<r;i+=n)o=qe(i,t[i],t[i+1],o);else for(i=r-n;i>=e;i-=n)o=qe(i,t[i],t[i+1],o);return o&&Be(o,o.next)&&(Ye(o),o=o.next),o}function Ne(t,e){if(!t)return t;e||(e=t);do{var r=!1;if(t.steiner||!Be(t,t.next)&&0!==Ve(t.prev,t,t.next))t=t.next;else{if(Ye(t),(t=e=t.prev)===t.next)break;r=!0}}while(r||t!==e);return e}function Ie(t,e){return t.x-e.x}function Fe(t,e){var r=e,n=t.x,i=t.y,o=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>o){if(o=s,s===n){if(i===r.y)return r;if(i===r.next.y)return r.next}var a=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!a)return null;if(n===o)return a.prev;e=a,s=a.x;var u=a.y,c=1/0;for(r=a.next;r!==e;){if(n>=r.x&&r.x>=s&&n!==r.x&&je(i<u?n:o,i,s,u,i<u?o:n,i,r.x,r.y)){var l=Math.abs(i-r.y)/(n-r.x);(l<c||l===c&&r.x>a.x)&&Ge(r,t)&&(a=r,c=l)}r=r.next}return a}function ze(t,e,r,n,i){return 1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1)|(1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ue(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function je(t,e,r,n,i,o,s,a){return 0<=(i-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(n-a)-(r-s)*(e-a)&&0<=(r-s)*(o-a)-(i-s)*(n-a)}function Ve(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Be(t,e){return t.x===e.x&&t.y===e.y}function He(t,e,r,n){return!!(Be(t,e)&&Be(r,n)||Be(t,n)&&Be(r,e))||0<Ve(t,e,r)!=0<Ve(t,e,n)&&0<Ve(r,n,t)!=0<Ve(r,n,e)}function Ge(t,e){return 0>Ve(t.prev,t,t.next)?0<=Ve(t,e,t.next)&&0<=Ve(t,t.prev,e):0>Ve(t,e,t.prev)||0>Ve(t,t.next,e)}function We(t,e){var r=new Xe(t.i,t.x,t.y),n=new Xe(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function qe(t,e,r,n){return t=new Xe(t,e,r),n?(t.next=n.next,t.prev=n,n.next.prev=t,n.next=t):(t.prev=t,t.next=t),t}function Ye(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Xe(t,e,r){this.i=t,this.x=e,this.y=r,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function $e(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function Je(t,e){for(var r=0;r<e.length;r++)t.push(e[r].x),t.push(e[r].y)}function Ze(t,e){M.call(this),this.type=\"ExtrudeGeometry\",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Qe(t,e)),this.mergeVertices()}function Qe(t,e){function n(t){function n(t,e,r){return e||console.error(\"THREE.ExtrudeGeometry: vec does not exist\"),e.clone().multiplyScalar(r).add(t)}function u(t,e,n){var i=t.x-e.x,o=t.y-e.y,s=n.x-t.x,a=n.y-t.y,u=i*i+o*o;if(Math.abs(i*a-o*s)>Number.EPSILON){var c=Math.sqrt(u),l=Math.sqrt(s*s+a*a);if(2>=(o=(s=(u=e.x-o/c)+i*(a=((n.x-a/l-u)*a-(n.y+s/l-(e=e.y+i/c))*s)/(i*a-o*s))-t.x)*s+(i=e+o*a-t.y)*i))return new r(s,i);o=Math.sqrt(o/2)}else t=!1,i>Number.EPSILON?s>Number.EPSILON&&(t=!0):i<-Number.EPSILON?s<-Number.EPSILON&&(t=!0):Math.sign(o)===Math.sign(a)&&(t=!0),t?(s=-o,o=Math.sqrt(u)):(s=i,i=o,o=Math.sqrt(u/2));return new r(s/o,i/o)}function c(t,e){for(j=t.length;0<=--j;){var r=j,n=j-1;0>n&&(n=t.length-1);var o,a=v+2*_;for(o=0;o<a;o++){var u=z*o,c=z*(o+1),l=e+n+u,h=e+n+c;c=e+r+c,f(e+r+u),f(l),f(c),f(l),f(h),f(c),d((u=S.generateSideWallUV(i,s,(u=s.length/3)-6,u-3,u-2,u-1))[0]),d(u[1]),d(u[3]),d(u[1]),d(u[2]),d(u[3])}}}function l(t,e,r){m.push(t),m.push(e),m.push(r)}function h(t,e,r){f(t),f(e),f(r),d((t=S.generateTopUV(i,s,(t=s.length/3)-3,t-2,t-1))[0]),d(t[1]),d(t[2])}function f(t){s.push(m[3*t]),s.push(m[3*t+1]),s.push(m[3*t+2])}function d(t){a.push(t.x),a.push(t.y)}var p,m=[],g=void 0!==e.curveSegments?e.curveSegments:12,v=void 0!==e.steps?e.steps:1,y=void 0!==e.amount?e.amount:100,w=void 0===e.bevelEnabled||e.bevelEnabled,x=void 0!==e.bevelThickness?e.bevelThickness:6,b=void 0!==e.bevelSize?e.bevelSize:x-2,_=void 0!==e.bevelSegments?e.bevelSegments:3,M=e.extrudePath,S=void 0!==e.UVGenerator?e.UVGenerator:Wi,E=!1;if(M){var T=M.getSpacedPoints(v);E=!0,w=!1;var A=M.computeFrenetFrames(v,!1),R=new o,k=new o,C=new o}w||(b=x=_=0);var L=(g=t.extractPoints(g)).holes;if(!Gi.isClockWise(t=g.shape)){t=t.reverse();var P=0;for(p=L.length;P<p;P++){var D=L[P];Gi.isClockWise(D)&&(L[P]=D.reverse())}}var O=Gi.triangulateShape(t,L),N=t;for(P=0,p=L.length;P<p;P++)t=t.concat(D=L[P]);var I,F,z=t.length,U=O.length;g=[];var j=0,V=N.length,B=V-1;for(I=j+1;j<V;j++,B++,I++)B===V&&(B=0),I===V&&(I=0),g[j]=u(N[j],N[B],N[I]);M=[];var H=g.concat();for(P=0,p=L.length;P<p;P++){var G=[];for(B=(V=(D=L[P]).length)-1,I=1+(j=0);j<V;j++,B++,I++)B===V&&(B=0),I===V&&(I=0),G[j]=u(D[j],D[B],D[I]);M.push(G),H=H.concat(G)}for(B=0;B<_;B++){V=B/_;var W=x*Math.cos(V*Math.PI/2);for(I=b*Math.sin(V*Math.PI/2),j=0,V=N.length;j<V;j++){var q=n(N[j],g[j],I);l(q.x,q.y,-W)}for(P=0,p=L.length;P<p;P++)for(G=M[P],j=0,V=(D=L[P]).length;j<V;j++)l((q=n(D[j],G[j],I)).x,q.y,-W)}for(I=b,j=0;j<z;j++)q=w?n(t[j],H[j],I):t[j],E?(k.copy(A.normals[0]).multiplyScalar(q.x),R.copy(A.binormals[0]).multiplyScalar(q.y),C.copy(T[0]).add(k).add(R),l(C.x,C.y,C.z)):l(q.x,q.y,0);for(V=1;V<=v;V++)for(j=0;j<z;j++)q=w?n(t[j],H[j],I):t[j],E?(k.copy(A.normals[V]).multiplyScalar(q.x),R.copy(A.binormals[V]).multiplyScalar(q.y),C.copy(T[V]).add(k).add(R),l(C.x,C.y,C.z)):l(q.x,q.y,y/v*V);for(B=_-1;0<=B;B--){for(V=B/_,W=x*Math.cos(V*Math.PI/2),I=b*Math.sin(V*Math.PI/2),j=0,V=N.length;j<V;j++)l((q=n(N[j],g[j],I)).x,q.y,y+W);for(P=0,p=L.length;P<p;P++)for(G=M[P],j=0,V=(D=L[P]).length;j<V;j++)q=n(D[j],G[j],I),E?l(q.x,q.y+T[v-1].y,T[v-1].x+W):l(q.x,q.y,y+W)}!function(){var t=s.length/3;if(w){var e=0*z;for(j=0;j<U;j++)h((F=O[j])[2]+e,F[1]+e,F[0]+e);for(e=z*(v+2*_),j=0;j<U;j++)h((F=O[j])[0]+e,F[1]+e,F[2]+e)}else{for(j=0;j<U;j++)h((F=O[j])[2],F[1],F[0]);for(j=0;j<U;j++)h((F=O[j])[0]+z*v,F[1]+z*v,F[2]+z*v)}i.addGroup(t,s.length/3-t,0)}(),function(){var t=s.length/3,e=0;for(c(N,e),e+=N.length,P=0,p=L.length;P<p;P++)c(D=L[P],e),e+=D.length;i.addGroup(t,s.length/3-t,1)}()}I.call(this),this.type=\"ExtrudeBufferGeometry\",this.parameters={shapes:t,options:e};for(var i=this,s=[],a=[],u=0,c=(t=Array.isArray(t)?t:[t]).length;u<c;u++)n(t[u]);this.addAttribute(\"position\",new P(s,3)),this.addAttribute(\"uv\",new P(a,2)),this.computeVertexNormals()}function Ke(t,e){M.call(this),this.type=\"TextGeometry\",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new tr(t,e)),this.mergeVertices()}function tr(t,e){var r=(e=e||{}).font;if(!r||!r.isFont)return console.error(\"THREE.TextGeometry: font parameter is not an instance of THREE.Font.\"),new M;t=r.generateShapes(t,e.size,e.curveSegments),e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Qe.call(this,t,e),this.type=\"TextBufferGeometry\"}function er(t,e,r,n,i,o,s){M.call(this),this.type=\"SphereGeometry\",this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new rr(t,e,r,n,i,o,s)),this.mergeVertices()}function rr(t,e,r,n,i,s,a){I.call(this),this.type=\"SphereBufferGeometry\",this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:n,phiLength:i,thetaStart:s,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),r=Math.max(2,Math.floor(r)||6),n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var u,c,l=(s=void 0!==s?s:0)+(a=void 0!==a?a:Math.PI),h=0,f=[],d=new o,p=new o,m=[],g=[],v=[],y=[];for(c=0;c<=r;c++){var w=[],x=c/r;for(u=0;u<=e;u++){var b=u/e;d.x=-t*Math.cos(n+b*i)*Math.sin(s+x*a),d.y=t*Math.cos(s+x*a),d.z=t*Math.sin(n+b*i)*Math.sin(s+x*a),g.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),v.push(p.x,p.y,p.z),y.push(b,1-x),w.push(h++)}f.push(w)}for(c=0;c<r;c++)for(u=0;u<e;u++)t=f[c][u+1],n=f[c][u],i=f[c+1][u],a=f[c+1][u+1],(0!==c||0<s)&&m.push(t,n,a),(c!==r-1||l<Math.PI)&&m.push(n,i,a);this.setIndex(m),this.addAttribute(\"position\",new P(g,3)),this.addAttribute(\"normal\",new P(v,3)),this.addAttribute(\"uv\",new P(y,2))}function nr(t,e,r,n,i,o){M.call(this),this.type=\"RingGeometry\",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new ir(t,e,r,n,i,o)),this.mergeVertices()}function ir(t,e,n,i,s,a){I.call(this),this.type=\"RingBufferGeometry\",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:a},t=t||.5,e=e||1,s=void 0!==s?s:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var u,c,l=[],h=[],f=[],d=[],p=t,m=(e-t)/(i=void 0!==i?Math.max(1,i):1),g=new o,v=new r;for(u=0;u<=i;u++){for(c=0;c<=n;c++)t=s+c/n*a,g.x=p*Math.cos(t),g.y=p*Math.sin(t),h.push(g.x,g.y,g.z),f.push(0,0,1),v.x=(g.x/e+1)/2,v.y=(g.y/e+1)/2,d.push(v.x,v.y);p+=m}for(u=0;u<i;u++)for(e=u*(n+1),c=0;c<n;c++)a=(t=c+e)+n+2,l.push(t,s=t+n+1,p=t+1),l.push(s,a,p);this.setIndex(l),this.addAttribute(\"position\",new P(h,3)),this.addAttribute(\"normal\",new P(f,3)),this.addAttribute(\"uv\",new P(d,2))}function or(t,e,r,n){M.call(this),this.type=\"LatheGeometry\",this.parameters={points:t,segments:e,phiStart:r,phiLength:n},this.fromBufferGeometry(new sr(t,e,r,n)),this.mergeVertices()}function sr(t,e,n,i){I.call(this),this.type=\"LatheBufferGeometry\",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e)||12,n=n||0,i=i||2*Math.PI,i=Si.clamp(i,0,2*Math.PI);var s,a=[],u=[],c=[],l=1/e,h=new o,f=new r;for(s=0;s<=e;s++){var d=n+s*l*i,p=Math.sin(d),m=Math.cos(d);for(d=0;d<=t.length-1;d++)h.x=t[d].x*p,h.y=t[d].y,h.z=t[d].x*m,u.push(h.x,h.y,h.z),f.x=s/e,f.y=d/(t.length-1),c.push(f.x,f.y)}for(s=0;s<e;s++)for(d=0;d<t.length-1;d++)h=(n=d+s*t.length)+t.length+1,a.push(n,l=n+t.length,f=n+1),a.push(l,h,f);if(this.setIndex(a),this.addAttribute(\"position\",new P(u,3)),this.addAttribute(\"uv\",new P(c,2)),this.computeVertexNormals(),i===2*Math.PI)for(i=this.attributes.normal.array,a=new o,u=new o,c=new o,n=e*t.length*3,d=s=0;s<t.length;s++,d+=3)a.x=i[d+0],a.y=i[d+1],a.z=i[d+2],u.x=i[n+d+0],u.y=i[n+d+1],u.z=i[n+d+2],c.addVectors(a,u).normalize(),i[d+0]=i[n+d+0]=c.x,i[d+1]=i[n+d+1]=c.y,i[d+2]=i[n+d+2]=c.z}function ar(t,e){M.call(this),this.type=\"ShapeGeometry\",\"object\"==typeof e&&(console.warn(\"THREE.ShapeGeometry: Options parameter has been removed.\"),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new ur(t,e)),this.mergeVertices()}function ur(t,e){function r(t){var r,a=i.length/3,c=(t=t.extractPoints(e)).shape,l=t.holes;if(!1===Gi.isClockWise(c))for(c=c.reverse(),t=0,r=l.length;t<r;t++){var h=l[t];!0===Gi.isClockWise(h)&&(l[t]=h.reverse())}var f=Gi.triangulateShape(c,l);for(t=0,r=l.length;t<r;t++)c=c.concat(h=l[t]);for(t=0,r=c.length;t<r;t++)i.push((h=c[t]).x,h.y,0),o.push(0,0,1),s.push(h.x,h.y);for(t=0,r=f.length;t<r;t++)n.push((c=f[t])[0]+a,c[1]+a,c[2]+a),u+=3}I.call(this),this.type=\"ShapeBufferGeometry\",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],i=[],o=[],s=[],a=0,u=0;if(!1===Array.isArray(t))r(t);else for(var c=0;c<t.length;c++)r(t[c]),this.addGroup(a,u,c),a+=u,u=0;this.setIndex(n),this.addAttribute(\"position\",new P(i,3)),this.addAttribute(\"normal\",new P(o,3)),this.addAttribute(\"uv\",new P(s,2))}function cr(t,e){if(e.shapes=[],Array.isArray(t))for(var r=0,n=t.length;r<n;r++)e.shapes.push(t[r].uuid);else e.shapes.push(t.uuid);return e}function lr(t,e){I.call(this),this.type=\"EdgesGeometry\",this.parameters={thresholdAngle:e};var r=[];e=Math.cos(Si.DEG2RAD*(void 0!==e?e:1));var n=[0,0],i={},o=[\"a\",\"b\",\"c\"];if(t.isBufferGeometry){var s=new M;s.fromBufferGeometry(t)}else s=t.clone();s.mergeVertices(),s.computeFaceNormals(),t=s.vertices;for(var a=0,u=(s=s.faces).length;a<u;a++)for(var c=s[a],l=0;3>l;l++){var h=c[o[l]],f=c[o[(l+1)%3]];n[0]=Math.min(h,f),n[1]=Math.max(h,f),void 0===i[h=n[0]+\",\"+n[1]]?i[h]={index1:n[0],index2:n[1],face1:a,face2:void 0}:i[h].face2=a}for(h in i)(void 0===(n=i[h]).face2||s[n.face1].normal.dot(s[n.face2].normal)<=e)&&(r.push((o=t[n.index1]).x,o.y,o.z),r.push((o=t[n.index2]).x,o.y,o.z));this.addAttribute(\"position\",new P(r,3))}function hr(t,e,r,n,i,o,s,a){M.call(this),this.type=\"CylinderGeometry\",this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new fr(t,e,r,n,i,o,s,a)),this.mergeVertices()}function fr(t,e,n,i,s,a,u,c){function l(n){var s,a=new r,l=new o,v=0,x=!0===n?t:e,b=!0===n?1:-1,_=g;for(s=1;s<=i;s++)d.push(0,y*b,0),p.push(0,b,0),m.push(.5,.5),g++;var M=g;for(s=0;s<=i;s++){var S=s/i*c+u,E=Math.cos(S);S=Math.sin(S),l.x=x*S,l.y=y*b,l.z=x*E,d.push(l.x,l.y,l.z),p.push(0,b,0),a.x=.5*E+.5,a.y=.5*S*b+.5,m.push(a.x,a.y),g++}for(s=0;s<i;s++)a=_+s,l=M+s,!0===n?f.push(l,l+1,a):f.push(l+1,l,a),v+=3;h.addGroup(w,v,!0===n?1:2),w+=v}I.call(this),this.type=\"CylinderBufferGeometry\",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:u,thetaLength:c};var h=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,i=Math.floor(i)||8,s=Math.floor(s)||1,a=void 0!==a&&a,u=void 0!==u?u:0,c=void 0!==c?c:2*Math.PI;var f=[],d=[],p=[],m=[],g=0,v=[],y=n/2,w=0;!function(){var r,a,l=new o,x=new o,b=0,_=(e-t)/n;for(a=0;a<=s;a++){var M=[],S=a/s,E=S*(e-t)+t;for(r=0;r<=i;r++){var T=r/i,A=T*c+u,R=Math.sin(A);A=Math.cos(A),x.x=E*R,x.y=-S*n+y,x.z=E*A,d.push(x.x,x.y,x.z),l.set(R,_,A).normalize(),p.push(l.x,l.y,l.z),m.push(T,1-S),M.push(g++)}v.push(M)}for(r=0;r<i;r++)for(a=0;a<s;a++)x=v[a+1][r+1],f.push(v[a][r],l=v[a+1][r],_=v[a][r+1]),f.push(l,x,_),b+=6;h.addGroup(w,b,0),w+=b}(),!1===a&&(0<t&&l(!0),0<e&&l(!1)),this.setIndex(f),this.addAttribute(\"position\",new P(d,3)),this.addAttribute(\"normal\",new P(p,3)),this.addAttribute(\"uv\",new P(m,2))}function dr(t,e,r,n,i,o,s){hr.call(this,0,t,e,r,n,i,o,s),this.type=\"ConeGeometry\",this.parameters={radius:t,height:e,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:s}}function pr(t,e,r,n,i,o,s){fr.call(this,0,t,e,r,n,i,o,s),this.type=\"ConeBufferGeometry\",this.parameters={radius:t,height:e,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:s}}function mr(t,e,r,n){M.call(this),this.type=\"CircleGeometry\",this.parameters={radius:t,segments:e,thetaStart:r,thetaLength:n},this.fromBufferGeometry(new gr(t,e,r,n)),this.mergeVertices()}function gr(t,e,n,i){I.call(this),this.type=\"CircleBufferGeometry\",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var s,a=[],u=[],c=[],l=[],h=new o,f=new r;u.push(0,0,0),c.push(0,0,1),l.push(.5,.5);var d=0;for(s=3;d<=e;d++,s+=3){var p=n+d/e*i;h.x=t*Math.cos(p),h.y=t*Math.sin(p),u.push(h.x,h.y,h.z),c.push(0,0,1),f.x=(u[s]/t+1)/2,f.y=(u[s+1]/t+1)/2,l.push(f.x,f.y)}for(s=1;s<=e;s++)a.push(s,s+1,0);this.setIndex(a),this.addAttribute(\"position\",new P(u,3)),this.addAttribute(\"normal\",new P(c,3)),this.addAttribute(\"uv\",new P(l,2))}function vr(t){V.call(this),this.type=\"ShadowMaterial\",this.color=new g(0),this.transparent=!0,this.setValues(t)}function yr(t){H.call(this,t),this.type=\"RawShaderMaterial\"}function wr(t){V.call(this),this.defines={STANDARD:\"\"},this.type=\"MeshStandardMaterial\",this.color=new g(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new g(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap=\"round\",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function xr(t){wr.call(this),this.defines={PHYSICAL:\"\"},this.type=\"MeshPhysicalMaterial\",this.reflectivity=.5,this.clearCoatRoughness=this.clearCoat=0,this.setValues(t)}function br(t){V.call(this),this.type=\"MeshPhongMaterial\",this.color=new g(16777215),this.specular=new g(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new g(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap=\"round\",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function _r(t){br.call(this),this.defines={TOON:\"\"},this.type=\"MeshToonMaterial\",this.gradientMap=null,this.setValues(t)}function Mr(t){V.call(this),this.type=\"MeshNormalMaterial\",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(t)}function Sr(t){V.call(this),this.type=\"MeshLambertMaterial\",this.color=new g(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new g(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap=\"round\",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function Er(t){oe.call(this),this.type=\"LineDashedMaterial\",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function Tr(t,e,r){var n=this,i=!1,o=0,s=0,a=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=r,this.itemStart=function(t){s++,!1===i&&void 0!==n.onStart&&n.onStart(t,o,s),i=!0},this.itemEnd=function(t){o++,void 0!==n.onProgress&&n.onProgress(t,o,s),o===s&&(i=!1,void 0!==n.onLoad)&&n.onLoad()},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return a?a(t):t},this.setURLModifier=function(t){return a=t,this}}function Ar(t){this.manager=void 0!==t?t:$i}function Rr(t){this.manager=void 0!==t?t:$i,this._parser=null}function kr(t){this.manager=void 0!==t?t:$i,this._parser=null}function Cr(t){this.manager=void 0!==t?t:$i}function Lr(t){this.manager=void 0!==t?t:$i}function Pr(t){this.manager=void 0!==t?t:$i}function Dr(){this.type=\"Curve\",this.arcLengthDivisions=200}function Or(t,e,r,n,i,o,s,a){Dr.call(this),this.type=\"EllipseCurve\",this.aX=t||0,this.aY=e||0,this.xRadius=r||1,this.yRadius=n||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=s||!1,this.aRotation=a||0}function Nr(t,e,r,n,i,o){Or.call(this,t,e,r,r,n,i,o),this.type=\"ArcCurve\"}function Ir(){var t=0,e=0,r=0,n=0;return{initCatmullRom:function(i,o,s,a,u){t=o,e=i=u*(s-i),r=-3*o+3*s-2*i-(a=u*(a-o)),n=2*o-2*s+i+a},initNonuniformCatmullRom:function(i,o,s,a,u,c,l){t=o,e=i=((o-i)/u-(s-i)/(u+c)+(s-o)/c)*c,r=-3*o+3*s-2*i-(a=((s-o)/c-(a-o)/(c+l)+(a-s)/l)*c),n=2*o-2*s+i+a},calc:function(i){var o=i*i;return t+e*i+r*o+n*o*i}}}function Fr(t,e,r,n){Dr.call(this),this.type=\"CatmullRomCurve3\",this.points=t||[],this.closed=e||!1,this.curveType=r||\"centripetal\",this.tension=n||.5}function zr(t,e,r,n,i){var o=t*t;return(2*r-2*n+(e=.5*(n-e))+(i=.5*(i-r)))*t*o+(-3*r+3*n-2*e-i)*o+e*t+r}function Ur(t,e,r,n){var i=1-t;return i*i*e+2*(1-t)*t*r+t*t*n}function jr(t,e,r,n,i){var o=1-t,s=1-t;return o*o*o*e+3*s*s*t*r+3*(1-t)*t*t*n+t*t*t*i}function Vr(t,e,n,i){Dr.call(this),this.type=\"CubicBezierCurve\",this.v0=t||new r,this.v1=e||new r,this.v2=n||new r,this.v3=i||new r}function Br(t,e,r,n){Dr.call(this),this.type=\"CubicBezierCurve3\",this.v0=t||new o,this.v1=e||new o,this.v2=r||new o,this.v3=n||new o}function Hr(t,e){Dr.call(this),this.type=\"LineCurve\",this.v1=t||new r,this.v2=e||new r}function Gr(t,e){Dr.call(this),this.type=\"LineCurve3\",this.v1=t||new o,this.v2=e||new o}function Wr(t,e,n){Dr.call(this),this.type=\"QuadraticBezierCurve\",this.v0=t||new r,this.v1=e||new r,this.v2=n||new r}function qr(t,e,r){Dr.call(this),this.type=\"QuadraticBezierCurve3\",this.v0=t||new o,this.v1=e||new o,this.v2=r||new o}function Yr(t){Dr.call(this),this.type=\"SplineCurve\",this.points=t||[]}function Xr(){Dr.call(this),this.type=\"CurvePath\",this.curves=[],this.autoClose=!1}function $r(t){Xr.call(this),this.type=\"Path\",this.currentPoint=new r,t&&this.setFromPoints(t)}function Jr(t){$r.call(this,t),this.uuid=Si.generateUUID(),this.type=\"Shape\",this.holes=[]}function Zr(t,e){w.call(this),this.type=\"Light\",this.color=new g(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Qr(t,e,r){Zr.call(this,t,r),this.type=\"HemisphereLight\",this.castShadow=void 0,this.position.copy(w.DefaultUp),this.updateMatrix(),this.groundColor=new g(e)}function Kr(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new r(512,512),this.map=null,this.matrix=new n}function tn(){Kr.call(this,new qt(50,1,.5,500))}function en(t,e,r,n,i,o){Zr.call(this,t,e),this.type=\"SpotLight\",this.position.copy(w.DefaultUp),this.updateMatrix(),this.target=new w,Object.defineProperty(this,\"power\",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new tn}function rn(t,e,r,n){Zr.call(this,t,e),this.type=\"PointLight\",Object.defineProperty(this,\"power\",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==n?n:1,this.shadow=new Kr(new qt(90,1,.5,500))}function nn(){Kr.call(this,new b(-5,5,5,-5,.5,500))}function on(t,e){Zr.call(this,t,e),this.type=\"DirectionalLight\",this.position.copy(w.DefaultUp),this.updateMatrix(),this.target=new w,this.shadow=new nn}function sn(t,e){Zr.call(this,t,e),this.type=\"AmbientLight\",this.castShadow=void 0}function an(t,e,r,n){Zr.call(this,t,e),this.type=\"RectAreaLight\",this.width=void 0!==r?r:10,this.height=void 0!==n?n:10}function un(t,e,r,n){yn.call(this,t,e,r,n)}function cn(t,e,r){yn.call(this,t,e,r)}function ln(t,e,r,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(r),this.sampleValues=e,this.valueSize=r}function hn(t,e,r,n){ln.call(this,t,e,r,n)}function fn(t,e,r,n){yn.call(this,t,e,r,n)}function dn(t,e,r,n){yn.call(this,t,e,r,n)}function pn(t,e,r,n){yn.call(this,t,e,r,n)}function mn(t,e,r,n){ln.call(this,t,e,r,n),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function gn(t,e,r,n){ln.call(this,t,e,r,n)}function vn(t,e,r,n){ln.call(this,t,e,r,n)}function yn(t,e,r,n){if(void 0===t)throw Error(\"THREE.KeyframeTrack: track name is undefined\");if(void 0===e||0===e.length)throw Error(\"THREE.KeyframeTrack: no keyframes in track named \"+t);this.name=t,this.times=ro.convertArray(e,this.TimeBufferType),this.values=ro.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function wn(t,e,r,n){yn.call(this,t,e,r,n)}function xn(t,e,r){this.name=t,this.tracks=r,this.duration=void 0!==e?e:-1,this.uuid=Si.generateUUID(),0>this.duration&&this.resetDuration(),this.optimize()}function bn(t){this.manager=void 0!==t?t:$i,this.textures={}}function _n(t){this.manager=void 0!==t?t:$i}function Mn(){}function Sn(t){\"boolean\"==typeof t&&(console.warn(\"THREE.JSONLoader: showStatus parameter has been removed from constructor.\"),t=void 0),this.manager=void 0!==t?t:$i,this.withCredentials=!1}function En(t){this.manager=void 0!==t?t:$i,this.texturePath=\"\"}function Tn(t){\"undefined\"==typeof createImageBitmap&&console.warn(\"THREE.ImageBitmapLoader: createImageBitmap() not supported.\"),\"undefined\"==typeof fetch&&console.warn(\"THREE.ImageBitmapLoader: fetch() not supported.\"),this.manager=void 0!==t?t:$i,this.options=void 0}function An(){this.type=\"ShapePath\",this.color=new g,this.subPaths=[],this.currentPath=null}function Rn(t){this.type=\"Font\",this.data=t}function kn(t){this.manager=void 0!==t?t:$i}function Cn(t){this.manager=void 0!==t?t:$i}function Ln(){this.type=\"StereoCamera\",this.aspect=1,this.eyeSep=.064,this.cameraL=new qt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new qt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Pn(t,e,r){w.call(this),this.type=\"CubeCamera\";var n=new qt(90,1,t,e);n.up.set(0,-1,0),n.lookAt(new o(1,0,0)),this.add(n);var i=new qt(90,1,t,e);i.up.set(0,-1,0),i.lookAt(new o(-1,0,0)),this.add(i);var s=new qt(90,1,t,e);s.up.set(0,0,1),s.lookAt(new o(0,1,0)),this.add(s);var a=new qt(90,1,t,e);a.up.set(0,0,-1),a.lookAt(new o(0,-1,0)),this.add(a);var u=new qt(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new o(0,0,1)),this.add(u);var c=new qt(90,1,t,e);c.up.set(0,-1,0),c.lookAt(new o(0,0,-1)),this.add(c),this.renderTarget=new l(r,r,{format:1022,magFilter:1006,minFilter:1006}),this.renderTarget.texture.name=\"CubeCamera\",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var r=this.renderTarget,o=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,r.activeCubeFace=0,t.render(e,n,r),r.activeCubeFace=1,t.render(e,i,r),r.activeCubeFace=2,t.render(e,s,r),r.activeCubeFace=3,t.render(e,a,r),r.activeCubeFace=4,t.render(e,u,r),r.texture.generateMipmaps=o,r.activeCubeFace=5,t.render(e,c,r),t.setRenderTarget(null)},this.clear=function(t,e,r,n){for(var i=this.renderTarget,o=0;6>o;o++)i.activeCubeFace=o,t.setRenderTarget(i),t.clear(e,r,n);t.setRenderTarget(null)}}function Dn(){w.call(this),this.type=\"AudioListener\",this.context=ho.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function On(t){w.call(this),this.type=\"Audio\",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.offset=this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType=\"empty\",this.filters=[]}function Nn(t){On.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function In(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Fn(t,e,r){switch(this.binding=t,this.valueSize=r,t=Float64Array,e){case\"quaternion\":e=this._slerp;break;case\"string\":case\"bool\":t=Array,e=this._select;break;default:e=this._lerp}this.buffer=new t(4*r),this._mixBufferRegion=e,this.referenceCount=this.useCount=this.cumulativeWeight=0}function zn(t,e,r){r=r||Un.parseTrackName(e),this._targetGroup=t,this._bindings=t.subscribe_(e,r)}function Un(t,e,r){this.path=e,this.parsedPath=r||Un.parseTrackName(e),this.node=Un.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function jn(){this.uuid=Si.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,r=arguments.length;e!==r;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function Vn(t,e,r){this._mixer=t,this._clip=e,this._localRoot=r||null,e=(t=e.tracks).length,r=Array(e);for(var n={endingStart:2400,endingEnd:2400},i=0;i!==e;++i){var o=t[i].createInterpolant(null);r[i]=o,o.settings=n}this._interpolantSettings=n,this._interpolants=r,this._propertyBindings=Array(e),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function Bn(t){this._root=t,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function Hn(t,e){\"string\"==typeof t&&(console.warn(\"THREE.Uniform: Type parameter is no longer needed.\"),t=e),this.value=t}function Gn(){I.call(this),this.type=\"InstancedBufferGeometry\",this.maxInstancedCount=void 0}function Wn(t,e,r,n){this.data=t,this.itemSize=e,this.offset=r,this.normalized=!0===n}function qn(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Yn(t,e,r){qn.call(this,t,e),this.meshPerAttribute=r||1}function Xn(t,e,r){S.call(this,t,e),this.meshPerAttribute=r||1}function $n(t,e,r,n){this.ray=new G(t,e),this.near=r||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn(\"THREE.Raycaster: params.PointCloud has been renamed to params.Points.\"),this.Points}}})}function Jn(t,e){return t.distance-e.distance}function Zn(t,e,r,n){if(!1!==t.visible&&(t.raycast(e,r),!0===n)){n=0;for(var i=(t=t.children).length;n<i;n++)Zn(t[n],e,r,!0)}}function Qn(t){this.autoStart=void 0===t||t,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function Kn(t,e,r){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==r?r:0,this}function ti(t,e,r){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==r?r:0,this}function ei(t,e){this.min=void 0!==t?t:new r(1/0,1/0),this.max=void 0!==e?e:new r(-1/0,-1/0)}function ri(t){w.call(this),this.material=t,this.render=function(){}}function ni(t,e,r,n){this.object=t,this.size=void 0!==e?e:1,t=void 0!==r?r:16711680,n=void 0!==n?n:1,e=0,(r=this.object.geometry)&&r.isGeometry?e=3*r.faces.length:r&&r.isBufferGeometry&&(e=r.attributes.normal.count),r=new I,e=new P(6*e,3),r.addAttribute(\"position\",e),ae.call(this,r,new oe({color:t,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function ii(t,e){w.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,t=new I,e=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var r=0,n=1;32>r;r++,n++){var i=r/32*Math.PI*2,o=n/32*Math.PI*2;e.push(Math.cos(i),Math.sin(i),1,Math.cos(o),Math.sin(o),1)}t.addAttribute(\"position\",new P(e,3)),e=new oe({fog:!1}),this.cone=new ae(t,e),this.add(this.cone),this.update()}function oi(t){for(var e=function t(e){var r=[];e&&e.isBone&&r.push(e);for(var n=0;n<e.children.length;n++)r.push.apply(r,t(e.children[n]));return r}(t),r=new I,n=[],i=[],o=new g(0,0,1),s=new g(0,1,0),a=0;a<e.length;a++){var u=e[a];u.parent&&u.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),i.push(o.r,o.g,o.b),i.push(s.r,s.g,s.b))}r.addAttribute(\"position\",new P(n,3)),r.addAttribute(\"color\",new P(i,3)),n=new oe({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),ae.call(this,r,n),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function si(t,e,r){this.light=t,this.light.updateMatrixWorld(),this.color=r,t=new rr(e,4,2),e=new B({wireframe:!0,fog:!1}),Y.call(this,t,e),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ai(t,e){w.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,t=new oe({fog:!1}),(e=new I).addAttribute(\"position\",new S(new Float32Array(15),3)),this.line=new se(e,t),this.add(this.line),this.update()}function ui(t,e,r){w.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,(t=new Me(e)).rotateY(.5*Math.PI),this.material=new B({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2),e=t.getAttribute(\"position\"),e=new Float32Array(3*e.count),t.addAttribute(\"color\",new S(e,3)),this.add(new Y(t,this.material)),this.update()}function ci(t,e,r,n){t=t||10,e=e||10,r=new g(void 0!==r?r:4473924),n=new g(void 0!==n?n:8947848);var i=e/2,o=t/e,s=t/2;t=[];for(var a=[],u=0,c=0,l=-s;u<=e;u++,l+=o){t.push(-s,0,l,s,0,l),t.push(l,0,-s,l,0,s);var h=u===i?r:n;h.toArray(a,c),h.toArray(a,c+=3),h.toArray(a,c+=3),h.toArray(a,c+=3),c+=3}(e=new I).addAttribute(\"position\",new P(t,3)),e.addAttribute(\"color\",new P(a,3)),r=new oe({vertexColors:2}),ae.call(this,e,r)}function li(t,e,r,n,i,o){t=t||10,e=e||16,r=r||8,n=n||64,i=new g(void 0!==i?i:4473924),o=new g(void 0!==o?o:8947848);var s,a=[],u=[];for(s=0;s<=e;s++){var c=s/e*2*Math.PI,l=Math.sin(c)*t;c=Math.cos(c)*t,a.push(0,0,0),a.push(l,0,c);var h=1&s?i:o;u.push(h.r,h.g,h.b),u.push(h.r,h.g,h.b)}for(s=0;s<=r;s++){h=1&s?i:o;var f=t-t/r*s;for(e=0;e<n;e++)c=e/n*2*Math.PI,l=Math.sin(c)*f,c=Math.cos(c)*f,a.push(l,0,c),u.push(h.r,h.g,h.b),c=(e+1)/n*2*Math.PI,l=Math.sin(c)*f,c=Math.cos(c)*f,a.push(l,0,c),u.push(h.r,h.g,h.b)}(t=new I).addAttribute(\"position\",new P(a,3)),t.addAttribute(\"color\",new P(u,3)),a=new oe({vertexColors:2}),ae.call(this,t,a)}function hi(t,e,r,n){this.object=t,this.size=void 0!==e?e:1,t=void 0!==r?r:16776960,n=void 0!==n?n:1,e=0,(r=this.object.geometry)&&r.isGeometry?e=r.faces.length:console.warn(\"THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.\"),r=new I,e=new P(6*e,3),r.addAttribute(\"position\",e),ae.call(this,r,new oe({color:t,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function fi(t,e,r){w.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,void 0===e&&(e=1),(t=new I).addAttribute(\"position\",new P([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3)),e=new oe({fog:!1}),this.lightPlane=new se(t,e),this.add(this.lightPlane),(t=new I).addAttribute(\"position\",new P([0,0,0,0,0,1],3)),this.targetLine=new se(t,e),this.add(this.targetLine),this.update()}function di(t){function e(t,e,n){r(t,n),r(e,n)}function r(t,e){o.push(0,0,0),s.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(o.length/3-1)}var n=new I,i=new oe({color:16777215,vertexColors:1}),o=[],s=[],a={},u=new g(16755200),c=new g(16711680),l=new g(43775),h=new g(16777215),f=new g(3355443);e(\"n1\",\"n2\",u),e(\"n2\",\"n4\",u),e(\"n4\",\"n3\",u),e(\"n3\",\"n1\",u),e(\"f1\",\"f2\",u),e(\"f2\",\"f4\",u),e(\"f4\",\"f3\",u),e(\"f3\",\"f1\",u),e(\"n1\",\"f1\",u),e(\"n2\",\"f2\",u),e(\"n3\",\"f3\",u),e(\"n4\",\"f4\",u),e(\"p\",\"n1\",c),e(\"p\",\"n2\",c),e(\"p\",\"n3\",c),e(\"p\",\"n4\",c),e(\"u1\",\"u2\",l),e(\"u2\",\"u3\",l),e(\"u3\",\"u1\",l),e(\"c\",\"t\",h),e(\"p\",\"c\",f),e(\"cn1\",\"cn2\",f),e(\"cn3\",\"cn4\",f),e(\"cf1\",\"cf2\",f),e(\"cf3\",\"cf4\",f),n.addAttribute(\"position\",new P(o,3)),n.addAttribute(\"color\",new P(s,3)),ae.call(this,n,i),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function pi(t,e){this.object=t,void 0===e&&(e=16776960),t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var r=new Float32Array(24),n=new I;n.setIndex(new S(t,1)),n.addAttribute(\"position\",new S(r,3)),ae.call(this,n,new oe({color:e})),this.matrixAutoUpdate=!1,this.update()}function mi(t,e){this.type=\"Box3Helper\",this.box=t,t=void 0!==e?e:16776960,e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var r=new I;r.setIndex(new S(e,1)),r.addAttribute(\"position\",new P([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),ae.call(this,r,new oe({color:t})),this.geometry.computeBoundingSphere()}function gi(t,e,r){this.type=\"PlaneHelper\",this.plane=t,this.size=void 0===e?1:e,t=void 0!==r?r:16776960,(e=new I).addAttribute(\"position\",new P([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),e.computeBoundingSphere(),se.call(this,e,new oe({color:t})),(e=new I).addAttribute(\"position\",new P([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),e.computeBoundingSphere(),this.add(new Y(e,new B({color:t,opacity:.2,transparent:!0,depthWrite:!1})))}function vi(t,e,r,n,i,o){w.call(this),void 0===n&&(n=16776960),void 0===r&&(r=1),void 0===i&&(i=.2*r),void 0===o&&(o=.2*i),void 0===co&&((co=new I).addAttribute(\"position\",new P([0,0,0,0,1,0],3)),(lo=new fr(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new se(co,new oe({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Y(lo,new B({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(r,i,o)}function yi(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t];(t=new I).addAttribute(\"position\",new P(e,3)),t.addAttribute(\"color\",new P([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),e=new oe({vertexColors:2}),ae.call(this,t,e)}function wi(t){console.warn(\"THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.\"),Fr.call(this,t),this.type=\"catmullrom\",this.closed=!0}function xi(t){console.warn(\"THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.\"),Fr.call(this,t),this.type=\"catmullrom\"}function bi(t){console.warn(\"THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.\"),Fr.call(this,t),this.type=\"catmullrom\"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return\"number\"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return 0>t?-1:0<t?1:+t}),0==\"name\"in Function.prototype&&Object.defineProperty(Function.prototype,\"name\",{get:function(){return this.toString().match(/^\\s*function\\s*([^\\(\\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError(\"Cannot convert undefined or null to object\");for(var e=Object(t),r=1;r<arguments.length;r++){var n=arguments[r];if(void 0!==n&&null!==n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(e)&&r[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[t]&&-1!==r[t].indexOf(e)},removeEventListener:function(t,e){void 0!==this._listeners&&void 0!==(t=this._listeners[t])&&-1!==(e=t.indexOf(e))&&t.splice(e,1)},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var r=0,n=(e=e.slice(0)).length;r<n;r++)e[r].call(this,t)}}}});var _i,Mi,Si={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;256>e;e++)t[e]=(16>e?\"0\":\"\")+e.toString(16);return function(){var e=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+\"-\"+t[255&r]+t[r>>8&255]+\"-\"+t[r>>16&15|64]+t[r>>24&255]+\"-\"+t[63&n|128]+t[n>>8&255]+\"-\"+t[n>>16&255]+t[n>>24&255]+t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]).toUpperCase()}}(),clamp:function(t,e,r){return Math.max(e,Math.min(r,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,r,n,i){return n+(t-e)*(i-n)/(r-e)},lerp:function(t,e,r){return(1-r)*t+r*e},smoothstep:function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e))*t*(3-2*t)},smootherstep:function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Si.DEG2RAD},radToDeg:function(t){return t*Si.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};Object.defineProperties(r.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(r.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error(\"index is out of range: \"+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error(\"index is out of range: \"+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,r=this.y;return this.x=(t=t.elements)[0]*e+t[3]*r+t[6],this.y=t[1]*e+t[4]*r+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:(_i=new r,Mi=new r,function(t,e){return _i.set(t,t),Mi.set(e,e),this.clamp(_i,Mi)}),clampLength:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return 0>t&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,r){return void 0!==r&&console.warn(\"THREE.Vector2: offset has been removed from .fromBufferAttribute().\"),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var r=Math.cos(e);e=Math.sin(e);var n=this.x-t.x,i=this.y-t.y;return this.x=n*r-i*e+t.x,this.y=n*e+i*r+t.y,this}}),Object.assign(n.prototype,{isMatrix4:!0,set:function(t,e,r,n,i,o,s,a,u,c,l,h,f,d,p,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=r,g[12]=n,g[1]=i,g[5]=o,g[9]=s,g[13]=a,g[2]=u,g[6]=c,g[10]=l,g[14]=h,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new n).fromArray(this.elements)},copy:function(t){var e=this.elements;return e[0]=(t=t.elements)[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(t){var e=this.elements;return e[12]=(t=t.elements)[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,r){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,r){return this.set(t.x,e.x,r.x,0,t.y,e.y,r.y,0,t.z,e.z,r.z,0,0,0,0,1),this},extractRotation:function(){var t=new o;return function(e){var r=this.elements,n=e.elements,i=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length();return e=1/t.setFromMatrixColumn(e,2).length(),r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[4]=n[4]*o,r[5]=n[5]*o,r[6]=n[6]*o,r[8]=n[8]*e,r[9]=n[9]*e,r[10]=n[10]*e,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error(\"THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.\");var e=this.elements,r=t.x,n=t.y,i=t.z,o=Math.cos(r);r=Math.sin(r);var s=Math.cos(n);n=Math.sin(n);var a=Math.cos(i);if(i=Math.sin(i),\"XYZ\"===t.order){t=o*a;var u=o*i,c=r*a,l=r*i;e[0]=s*a,e[4]=-s*i,e[8]=n,e[1]=u+c*n,e[5]=t-l*n,e[9]=-r*s,e[2]=l-t*n,e[6]=c+u*n,e[10]=o*s}else\"YXZ\"===t.order?(u=s*i,c=n*a,e[0]=(t=s*a)+(l=n*i)*r,e[4]=c*r-u,e[8]=o*n,e[1]=o*i,e[5]=o*a,e[9]=-r,e[2]=u*r-c,e[6]=l+t*r,e[10]=o*s):\"ZXY\"===t.order?(u=s*i,c=n*a,e[0]=(t=s*a)-(l=n*i)*r,e[4]=-o*i,e[8]=c+u*r,e[1]=u+c*r,e[5]=o*a,e[9]=l-t*r,e[2]=-o*n,e[6]=r,e[10]=o*s):\"ZYX\"===t.order?(t=o*a,u=o*i,c=r*a,l=r*i,e[0]=s*a,e[4]=c*n-u,e[8]=t*n+l,e[1]=s*i,e[5]=l*n+t,e[9]=u*n-c,e[2]=-n,e[6]=r*s,e[10]=o*s):\"YZX\"===t.order?(t=o*s,u=o*n,c=r*s,l=r*n,e[0]=s*a,e[4]=l-t*i,e[8]=c*i+u,e[1]=i,e[5]=o*a,e[9]=-r*a,e[2]=-n*a,e[6]=u*i+c,e[10]=t-l*i):\"XZY\"===t.order&&(t=o*s,u=o*n,c=r*s,l=r*n,e[0]=s*a,e[4]=-i,e[8]=n*a,e[1]=t*i+l,e[5]=o*a,e[9]=u*i-c,e[2]=c*i-u,e[6]=r*a,e[10]=l*i+t);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,r=t._x,n=t._y,i=t._z,o=t._w,s=r+r,a=n+n,u=i+i;t=r*s;var c=r*a;r*=u;var l=n*a;return n*=u,s*=o,a*=o,o*=u,e[0]=1-(l+(i*=u)),e[4]=c-o,e[8]=r+a,e[1]=c+o,e[5]=1-(t+i),e[9]=n-s,e[2]=r-a,e[6]=n+s,e[10]=1-(t+l),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t=new o,e=new o,r=new o;return function(n,i,o){var s=this.elements;return r.subVectors(n,i),0===r.lengthSq()&&(r.z=1),r.normalize(),t.crossVectors(o,r),0===t.lengthSq()&&(1===Math.abs(o.z)?r.x+=1e-4:r.z+=1e-4,r.normalize(),t.crossVectors(o,r)),t.normalize(),e.crossVectors(r,t),s[0]=t.x,s[4]=e.x,s[8]=r.x,s[1]=t.y,s[5]=e.y,s[9]=r.y,s[2]=t.z,s[6]=e.z,s[10]=r.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn(\"THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.\"),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.elements,n=e.elements;t=r[0];var i=r[4],o=r[8],s=r[12],a=r[1],u=r[5],c=r[9],l=r[13],h=r[2],f=r[6],d=r[10],p=r[14],m=r[3],g=r[7],v=r[11];r=r[15];var y=n[0],w=n[4],x=n[8],b=n[12],_=n[1],M=n[5],S=n[9],E=n[13],T=n[2],A=n[6],R=n[10],k=n[14],C=n[3],L=n[7],P=n[11];return n=n[15],(e=this.elements)[0]=t*y+i*_+o*T+s*C,e[4]=t*w+i*M+o*A+s*L,e[8]=t*x+i*S+o*R+s*P,e[12]=t*b+i*E+o*k+s*n,e[1]=a*y+u*_+c*T+l*C,e[5]=a*w+u*M+c*A+l*L,e[9]=a*x+u*S+c*R+l*P,e[13]=a*b+u*E+c*k+l*n,e[2]=h*y+f*_+d*T+p*C,e[6]=h*w+f*M+d*A+p*L,e[10]=h*x+f*S+d*R+p*P,e[14]=h*b+f*E+d*k+p*n,e[3]=m*y+g*_+v*T+r*C,e[7]=m*w+g*M+v*A+r*L,e[11]=m*x+g*S+v*R+r*P,e[15]=m*b+g*E+v*k+r*n,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new o;return function(e){for(var r=0,n=e.count;r<n;r++)t.x=e.getX(r),t.y=e.getY(r),t.z=e.getZ(r),t.applyMatrix4(this),e.setXYZ(r,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],r=t[4],n=t[8],i=t[12],o=t[1],s=t[5],a=t[9],u=t[13],c=t[2],l=t[6],h=t[10],f=t[14];return t[3]*(+i*a*l-n*u*l-i*s*h+r*u*h+n*s*f-r*a*f)+t[7]*(+e*a*f-e*u*h+i*o*h-n*o*f+n*u*c-i*a*c)+t[11]*(+e*u*l-e*s*f-i*o*l+r*o*f+i*s*c-r*u*c)+t[15]*(-n*s*c-e*a*l+e*s*h+n*o*l-r*o*h+r*a*c)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var r=this.elements,n=t.elements;t=n[0];var i=n[1],o=n[2],s=n[3],a=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=f*v*l-g*d*l+g*c*p-u*v*p-f*c*(n=n[15])+u*d*n,w=m*d*l-h*v*l-m*c*p+a*v*p+h*c*n-a*d*n,x=h*g*l-m*f*l+m*u*p-a*g*p-h*u*n+a*f*n,b=m*f*c-h*g*c-m*u*d+a*g*d+h*u*v-a*f*v,_=t*y+i*w+o*x+s*b;if(0===_){if(!0===e)throw Error(\"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\");return console.warn(\"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\"),this.identity()}return r[0]=y*(e=1/_),r[1]=(g*d*s-f*v*s-g*o*p+i*v*p+f*o*n-i*d*n)*e,r[2]=(u*v*s-g*c*s+g*o*l-i*v*l-u*o*n+i*c*n)*e,r[3]=(f*c*s-u*d*s-f*o*l+i*d*l+u*o*p-i*c*p)*e,r[4]=w*e,r[5]=(h*v*s-m*d*s+m*o*p-t*v*p-h*o*n+t*d*n)*e,r[6]=(m*c*s-a*v*s-m*o*l+t*v*l+a*o*n-t*c*n)*e,r[7]=(a*d*s-h*c*s+h*o*l-t*d*l-a*o*p+t*c*p)*e,r[8]=x*e,r[9]=(m*f*s-h*g*s-m*i*p+t*g*p+h*i*n-t*f*n)*e,r[10]=(a*g*s-m*u*s+m*i*l-t*g*l-a*i*n+t*u*n)*e,r[11]=(h*u*s-a*f*s-h*i*l+t*f*l+a*i*p-t*u*p)*e,r[12]=b*e,r[13]=(h*g*o-m*f*o+m*i*d-t*g*d-h*i*v+t*f*v)*e,r[14]=(m*u*o-a*g*o-m*i*c+t*g*c+a*i*v-t*u*v)*e,r[15]=(a*f*o-h*u*o+h*i*c-t*f*c-a*i*d+t*u*d)*e,this},scale:function(t){var e=this.elements,r=t.x,n=t.y;return t=t.z,e[0]*=r,e[4]*=n,e[8]*=t,e[1]*=r,e[5]*=n,e[9]*=t,e[2]*=r,e[6]*=n,e[10]*=t,e[3]*=r,e[7]*=n,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,r){return this.set(1,0,0,t,0,1,0,e,0,0,1,r,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var r=Math.cos(e);e=Math.sin(e);var n=1-r,i=t.x,o=t.y,s=n*i,a=n*o;return this.set(s*i+r,s*o-e*(t=t.z),s*t+e*o,0,s*o+e*t,a*o+r,a*t-e*i,0,s*t-e*o,a*t+e*i,n*t*t+r,0,0,0,0,1),this},makeScale:function(t,e,r){return this.set(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(t,e,r){return this.set(1,e,r,0,t,1,r,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,r){return this.makeRotationFromQuaternion(e),this.scale(r),this.setPosition(t),this},decompose:function(){var t=new o,e=new n;return function(r,n,i){var o=this.elements,s=t.set(o[0],o[1],o[2]).length(),a=t.set(o[4],o[5],o[6]).length(),u=t.set(o[8],o[9],o[10]).length();0>this.determinant()&&(s=-s),r.x=o[12],r.y=o[13],r.z=o[14],e.copy(this),o=1/a;var c=1/u;return e.elements[0]*=r=1/s,e.elements[1]*=r,e.elements[2]*=r,e.elements[4]*=o,e.elements[5]*=o,e.elements[6]*=o,e.elements[8]*=c,e.elements[9]*=c,e.elements[10]*=c,n.setFromRotationMatrix(e),i.x=s,i.y=a,i.z=u,this}}(),makePerspective:function(t,e,r,n,i,o){void 0===o&&console.warn(\"THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.\");var s=this.elements;return s[0]=2*i/(e-t),s[4]=0,s[8]=(e+t)/(e-t),s[12]=0,s[1]=0,s[5]=2*i/(r-n),s[9]=(r+n)/(r-n),s[13]=0,s[2]=0,s[6]=0,s[10]=-(o+i)/(o-i),s[14]=-2*o*i/(o-i),s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(t,e,r,n,i,o){var s=this.elements,a=1/(e-t),u=1/(r-n),c=1/(o-i);return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-(e+t)*a,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-(r+n)*u,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-(o+i)*c,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){var e=this.elements;t=t.elements;for(var r=0;16>r;r++)if(e[r]!==t[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var r=0;16>r;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],t}}),Object.assign(i,{slerp:function(t,e,r,n){return r.copy(t).slerp(e,n)},slerpFlat:function(t,e,r,n,i,o,s){var a=r[n+0],u=r[n+1],c=r[n+2];r=r[n+3],n=i[o+0];var l=i[o+1],h=i[o+2];if(r!==(i=i[o+3])||a!==n||u!==l||c!==h){o=1-s;var f=a*n+u*l+c*h+r*i,d=0<=f?1:-1,p=1-f*f;p>Number.EPSILON&&(p=Math.sqrt(p),f=Math.atan2(p,f*d),o=Math.sin(o*f)/p,s=Math.sin(s*f)/p),a=a*o+n*(d*=s),u=u*o+l*d,c=c*o+h*d,r=r*o+i*d,o===1-s&&(a*=s=1/Math.sqrt(a*a+u*u+c*c+r*r),u*=s,c*=s,r*=s)}t[e]=a,t[e+1]=u,t[e+2]=c,t[e+3]=r}}),Object.defineProperties(i.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(i.prototype,{set:function(t,e,r,n){return this._x=t,this._y=e,this._z=r,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw Error(\"THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.\");var r=t._x,n=t._y,i=t._z;t=t.order;var o=Math.cos,s=Math.sin,a=o(r/2),u=o(n/2);return o=o(i/2),r=s(r/2),n=s(n/2),i=s(i/2),\"XYZ\"===t?(this._x=r*u*o+a*n*i,this._y=a*n*o-r*u*i,this._z=a*u*i+r*n*o,this._w=a*u*o-r*n*i):\"YXZ\"===t?(this._x=r*u*o+a*n*i,this._y=a*n*o-r*u*i,this._z=a*u*i-r*n*o,this._w=a*u*o+r*n*i):\"ZXY\"===t?(this._x=r*u*o-a*n*i,this._y=a*n*o+r*u*i,this._z=a*u*i+r*n*o,this._w=a*u*o-r*n*i):\"ZYX\"===t?(this._x=r*u*o-a*n*i,this._y=a*n*o+r*u*i,this._z=a*u*i-r*n*o,this._w=a*u*o+r*n*i):\"YZX\"===t?(this._x=r*u*o+a*n*i,this._y=a*n*o+r*u*i,this._z=a*u*i-r*n*o,this._w=a*u*o-r*n*i):\"XZY\"===t&&(this._x=r*u*o-a*n*i,this._y=a*n*o-r*u*i,this._z=a*u*i+r*n*o,this._w=a*u*o+r*n*i),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){e/=2;var r=Math.sin(e);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(e),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,r=e[0];t=e[4];var n=e[8],i=e[1],o=e[5],s=e[9],a=e[2],u=e[6],c=r+o+(e=e[10]);return 0<c?(r=.5/Math.sqrt(c+1),this._w=.25/r,this._x=(u-s)*r,this._y=(n-a)*r,this._z=(i-t)*r):r>o&&r>e?(r=2*Math.sqrt(1+r-o-e),this._w=(u-s)/r,this._x=.25*r,this._y=(t+i)/r,this._z=(n+a)/r):o>e?(r=2*Math.sqrt(1+o-r-e),this._w=(n-a)/r,this._x=(t+i)/r,this._y=.25*r,this._z=(s+u)/r):(r=2*Math.sqrt(1+e-r-o),this._w=(i-t)/r,this._x=(n+a)/r,this._y=(s+u)/r,this._z=.25*r),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new o;return function(r,n){return void 0===e&&(e=new o),1e-6>(t=r.dot(n)+1)?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,n),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(this._x*=t=1/t,this._y*=t,this._z*=t,this._w*=t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn(\"THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.\"),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var r=t._x,n=t._y,i=t._z,o=e._x,s=e._y,a=e._z;return this._x=r*(e=e._w)+(t=t._w)*o+n*a-i*s,this._y=n*e+t*s+i*o-r*a,this._z=i*e+t*a+r*s-n*o,this._w=t*e-r*o-n*s-i*a,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var r=this._x,n=this._y,i=this._z,o=this._w,s=o*t._w+r*t._x+n*t._y+i*t._z;if(0>s?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),1<=s)return this._w=o,this._x=r,this._y=n,this._z=i,this;if(t=Math.sqrt(1-s*s),.001>Math.abs(t))return this._w=.5*(o+this._w),this._x=.5*(r+this._x),this._y=.5*(n+this._y),this._z=.5*(i+this._z),this;var a=Math.atan2(t,s);return s=Math.sin((1-e)*a)/t,e=Math.sin(e*a)/t,this._w=o*s+this._w*e,this._x=r*s+this._x*e,this._y=n*s+this._y*e,this._z=i*s+this._z*e,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(o.prototype,{isVector3:!0,set:function(t,e,r){return this.x=t,this.y=e,this.z=r,this},setScalar:function(t){return this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error(\"index is out of range: \"+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error(\"index is out of range: \"+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.\"),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t=new i;return function(e){return e&&e.isEuler||console.error(\"THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.\"),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t=new i;return function(e,r){return this.applyQuaternion(t.setFromAxisAngle(e,r))}}(),applyMatrix3:function(t){var e=this.x,r=this.y,n=this.z;return this.x=(t=t.elements)[0]*e+t[3]*r+t[6]*n,this.y=t[1]*e+t[4]*r+t[7]*n,this.z=t[2]*e+t[5]*r+t[8]*n,this},applyMatrix4:function(t){var e=this.x,r=this.y,n=this.z,i=1/((t=t.elements)[3]*e+t[7]*r+t[11]*n+t[15]);return this.x=(t[0]*e+t[4]*r+t[8]*n+t[12])*i,this.y=(t[1]*e+t[5]*r+t[9]*n+t[13])*i,this.z=(t[2]*e+t[6]*r+t[10]*n+t[14])*i,this},applyQuaternion:function(t){var e=this.x,r=this.y,n=this.z,i=t.x,o=t.y,s=t.z,a=(t=t.w)*e+o*n-s*r,u=t*r+s*e-i*n,c=t*n+i*r-o*e;return this.x=a*t+(e=-i*e-o*r-s*n)*-i+u*-s-c*-o,this.y=u*t+e*-o+c*-i-a*-s,this.z=c*t+e*-s+a*-o-u*-i,this},project:function(){var t=new n;return function(e){return t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t=new n;return function(e){return t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,r=this.y,n=this.z;return this.x=(t=t.elements)[0]*e+t[4]*r+t[8]*n,this.y=t[1]*e+t[5]*r+t[9]*n,this.z=t[2]*e+t[6]*r+t[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t=new o,e=new o;return function(r,n){return t.set(r,r,r),e.set(n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},cross:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.\"),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var r=t.x,n=t.y,i=e.x,o=e.y;return this.x=n*(e=e.z)-(t=t.z)*o,this.y=t*i-r*e,this.z=r*o-n*i,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new o;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new o;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){return t=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq()),Math.acos(Si.clamp(t,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y;return e*e+r*r+(t=this.z-t.z)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.x=(t=t.elements)[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length();return t=this.setFromMatrixColumn(t,2).length(),this.x=e,this.y=r,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,r){return void 0!==r&&console.warn(\"THREE.Vector3: offset has been removed from .fromBufferAttribute().\"),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(s.prototype,{isMatrix3:!0,set:function(t,e,r,n,i,o,s,a,u){var c=this.elements;return c[0]=t,c[1]=n,c[2]=s,c[3]=e,c[4]=i,c[5]=a,c[6]=r,c[7]=o,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements;return e[0]=(t=t.elements)[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},setFromMatrix4:function(t){return this.set((t=t.elements)[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var t=new o;return function(e){for(var r=0,n=e.count;r<n;r++)t.x=e.getX(r),t.y=e.getY(r),t.z=e.getZ(r),t.applyMatrix3(this),e.setXYZ(r,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.elements,n=e.elements;t=r[0];var i=r[3],o=r[6],s=r[1],a=r[4],u=r[7],c=r[2],l=r[5];r=r[8];var h=n[0],f=n[3],d=n[6],p=n[1],m=n[4],g=n[7],v=n[2],y=n[5];return n=n[8],(e=this.elements)[0]=t*h+i*p+o*v,e[3]=t*f+i*m+o*y,e[6]=t*d+i*g+o*n,e[1]=s*h+a*p+u*v,e[4]=s*f+a*m+u*y,e[7]=s*d+a*g+u*n,e[2]=c*h+l*p+r*v,e[5]=c*f+l*m+r*y,e[8]=c*d+l*g+r*n,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7];return e*o*(t=t[8])-e*s*u-r*i*t+r*s*a+n*i*u-n*o*a},getInverse:function(t,e){t&&t.isMatrix4&&console.error(\"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.\");var r=t.elements;t=this.elements;var n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],u=r[5],c=r[6],l=r[7],h=(r=r[8])*a-u*l,f=u*c-r*s,d=l*s-a*c,p=n*h+i*f+o*d;if(0===p){if(!0===e)throw Error(\"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\");return console.warn(\"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\"),this.identity()}return t[0]=h*(e=1/p),t[1]=(o*l-r*i)*e,t[2]=(u*i-o*a)*e,t[3]=f*e,t[4]=(r*n-o*c)*e,t[5]=(o*s-u*n)*e,t[6]=d*e,t[7]=(i*c-l*n)*e,t[8]=(a*n-i*s)*e,this},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,r,n,i,o,s){var a=Math.cos(i);i=Math.sin(i),this.set(r*a,r*i,-r*(a*o+i*s)+o+t,-n*i,n*a,-n*(-i*o+a*s)+s+e,0,0,1)},scale:function(t,e){var r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=e,r[4]*=e,r[7]*=e,this},rotate:function(t){var e=Math.cos(t);t=Math.sin(t);var r=this.elements,n=r[0],i=r[3],o=r[6],s=r[1],a=r[4],u=r[7];return r[0]=e*n+t*s,r[3]=e*i+t*a,r[6]=e*o+t*u,r[1]=-t*n+e*s,r[4]=-t*i+e*a,r[7]=-t*o+e*u,this},translate:function(t,e){var r=this.elements;return r[0]+=t*r[2],r[3]+=t*r[5],r[6]+=t*r[8],r[1]+=e*r[2],r[4]+=e*r[5],r[7]+=e*r[8],this},equals:function(t){var e=this.elements;t=t.elements;for(var r=0;9>r;r++)if(e[r]!==t[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var r=0;9>r;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t}});var Ei=0;a.DEFAULT_IMAGE=void 0,a.DEFAULT_MAPPING=300,a.prototype=Object.assign(Object.create(e.prototype),{constructor:a,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||\"string\"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var r={metadata:{version:4.5,type:\"Texture\",generator:\"Texture.toJSON\"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=Si.generateUUID()),!e&&void 0===t.images[n.uuid]){var i=t.images,o=n.uuid,s=n.uuid;if(n instanceof HTMLCanvasElement)var a=n;else{(a=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\")).width=n.width,a.height=n.height;var u=a.getContext(\"2d\");n instanceof ImageData?u.putImageData(n,0,0):u.drawImage(n,0,0,n.width,n.height)}a=2048<a.width||2048<a.height?a.toDataURL(\"image/jpeg\",.6):a.toDataURL(\"image/png\"),i[o]={uuid:s,url:a}}r.image=n.uuid}return e||(t.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:\"dispose\"})},transformUv:function(t){if(300===this.mapping){if(t.applyMatrix3(this.matrix),0>t.x||1<t.x)switch(this.wrapS){case 1e3:t.x-=Math.floor(t.x);break;case 1001:t.x=0>t.x?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(0>t.y||1<t.y)switch(this.wrapT){case 1e3:t.y-=Math.floor(t.y);break;case 1001:t.y=0>t.y?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}}),Object.defineProperty(a.prototype,\"needsUpdate\",{set:function(t){!0===t&&this.version++}}),Object.assign(u.prototype,{isVector4:!0,set:function(t,e,r,n){return this.x=t,this.y=e,this.z=r,this.w=n,this},setScalar:function(t){return this.w=this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error(\"index is out of range: \"+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error(\"index is out of range: \"+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn(\"THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,r=this.y,n=this.z,i=this.w;return this.x=(t=t.elements)[0]*e+t[4]*r+t[8]*n+t[12]*i,this.y=t[1]*e+t[5]*r+t[9]*n+t[13]*i,this.z=t[2]*e+t[6]*r+t[10]*n+t[14]*i,this.w=t[3]*e+t[7]*r+t[11]*n+t[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.z=this.y=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e=(t=t.elements)[0],r=t[4],n=t[8],i=t[1],o=t[5],s=t[9],a=t[2],u=t[6],c=t[10];return.01>Math.abs(r-i)&&.01>Math.abs(n-a)&&.01>Math.abs(s-u)?.1>Math.abs(r+i)&&.1>Math.abs(n+a)&&.1>Math.abs(s+u)&&.1>Math.abs(e+o+c-3)?(this.set(1,0,0,0),this):(t=Math.PI,c=(c+1)/2,r=(r+i)/4,n=(n+a)/4,s=(s+u)/4,(e=(e+1)/2)>(o=(o+1)/2)&&e>c?.01>e?(u=0,r=a=.707106781):(a=r/(u=Math.sqrt(e)),r=n/u):o>c?.01>o?(u=.707106781,a=0,r=.707106781):(u=r/(a=Math.sqrt(o)),r=s/a):.01>c?(a=u=.707106781,r=0):(u=n/(r=Math.sqrt(c)),a=s/r),this.set(u,a,r,t),this):(t=Math.sqrt((u-s)*(u-s)+(n-a)*(n-a)+(i-r)*(i-r)),.001>Math.abs(t)&&(t=1),this.x=(u-s)/t,this.y=(n-a)/t,this.z=(i-r)/t,this.w=Math.acos((e+o+c-1)/2),this)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(r,n){return void 0===t&&(t=new u,e=new u),t.set(r,r,r,r),e.set(n,n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,r){return void 0!==r&&console.warn(\"THREE.Vector4: offset has been removed from .fromBufferAttribute().\"),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),c.prototype=Object.assign(Object.create(e.prototype),{constructor:c,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}}),(l.prototype=Object.create(c.prototype)).constructor=l,l.prototype.isWebGLRenderTargetCube=!0,(h.prototype=Object.create(a.prototype)).constructor=h,h.prototype.isDataTexture=!0,Object.assign(f.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,s=-1/0,a=0,u=t.length;a<u;a+=3){var c=t[a],l=t[a+1],h=t[a+2];c<e&&(e=c),l<r&&(r=l),h<n&&(n=h),c>i&&(i=c),l>o&&(o=l),h>s&&(s=h)}return this.min.set(e,r,n),this.max.set(i,o,s),this},setFromBufferAttribute:function(t){for(var e=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,s=-1/0,a=0,u=t.count;a<u;a++){var c=t.getX(a),l=t.getY(a),h=t.getZ(a);c<e&&(e=c),l<r&&(r=l),h<n&&(n=h),c>i&&(i=c),l>o&&(o=l),h>s&&(s=h)}return this.min.set(e,r,n),this.max.set(i,o,s),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new o;return function(e,r){return r=t.copy(r).multiplyScalar(.5),this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn(\"THREE.Box3: .getCenter() target is now required\"),t=new o),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn(\"THREE.Box3: .getSize() target is now required\"),t=new o),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){function t(t){var o=t.geometry;if(void 0!==o)if(o.isGeometry)for(r=0,n=(o=o.vertices).length;r<n;r++)i.copy(o[r]),i.applyMatrix4(t.matrixWorld),e.expandByPoint(i);else if(o.isBufferGeometry&&void 0!==(o=o.attributes.position))for(r=0,n=o.count;r<n;r++)i.fromBufferAttribute(o,r).applyMatrix4(t.matrixWorld),e.expandByPoint(i)}var e,r,n,i=new o;return function(r){return e=this,r.updateMatrixWorld(!0),r.traverse(t),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn(\"THREE.Box3: .getParameter() target is now required\"),e=new o),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new o;return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){if(0<t.normal.x)var e=t.normal.x*this.min.x,r=t.normal.x*this.max.x;else e=t.normal.x*this.max.x,r=t.normal.x*this.min.x;return 0<t.normal.y?(e+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),e<=t.constant&&r>=t.constant},intersectsTriangle:function(){function t(t){var i,o=0;for(i=t.length-3;o<=i;o+=3){u.fromArray(t,o);var s=l.x*Math.abs(u.x)+l.y*Math.abs(u.y)+l.z*Math.abs(u.z),a=e.dot(u),c=r.dot(u),h=n.dot(u);if(Math.max(-Math.max(a,c,h),Math.min(a,c,h))>s)return!1}return!0}var e=new o,r=new o,n=new o,i=new o,s=new o,a=new o,u=new o,c=new o,l=new o,h=new o;return function(o){return!this.isEmpty()&&(this.getCenter(c),l.subVectors(this.max,c),e.subVectors(o.a,c),r.subVectors(o.b,c),n.subVectors(o.c,c),i.subVectors(r,e),s.subVectors(n,r),a.subVectors(e,n),!!t(o=[0,-i.z,i.y,0,-s.z,s.y,0,-a.z,a.y,i.z,0,-i.x,s.z,0,-s.x,a.z,0,-a.x,-i.y,i.x,0,-s.y,s.x,0,-a.y,a.x,0])&&!!t(o=[1,0,0,0,1,0,0,0,1])&&(h.crossVectors(i,s),t(o=[h.x,h.y,h.z])))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn(\"THREE.Box3: .clampPoint() target is now required\"),e=new o),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new o;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new o;return function(e){return void 0===e&&(console.warn(\"THREE.Box3: .getBoundingSphere() target is now required\"),e=new d),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new o,new o,new o,new o,new o,new o,new o,new o];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(d.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new f;return function(e,r){var n=this.center;void 0!==r?n.copy(r):t.setFromPoints(e).getCenter(n);for(var i=r=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var r=this.center.distanceToSquared(t);return void 0===e&&(console.warn(\"THREE.Sphere: .clampPoint() target is now required\"),e=new o),e.copy(t),r>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn(\"THREE.Sphere: .getBoundingBox() target is now required\"),t=new f),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(p.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,r,n){return this.normal.set(t,e,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new o,e=new o;return function(r,n,i){return n=t.subVectors(i,n).cross(e.subVectors(r,n)).normalize(),this.setFromNormalAndCoplanarPoint(n,r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn(\"THREE.Plane: .projectPoint() target is now required\"),e=new o),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new o;return function(e,r){void 0===r&&(console.warn(\"THREE.Plane: .intersectLine() target is now required\"),r=new o);var n=e.delta(t),i=this.normal.dot(n);if(0===i){if(0===this.distanceToPoint(e.start))return r.copy(e.start)}else if(!(0>(i=-(e.start.dot(this.normal)+this.constant)/i)||1<i))return r.copy(n).multiplyScalar(i).add(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>e&&0<t||0>t&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn(\"THREE.Plane: .coplanarPoint() target is now required\"),t=new o),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new o,e=new s;return function(r,n){return n=n||e.getNormalMatrix(r),r=this.coplanarPoint(t).applyMatrix4(r),n=this.normal.applyMatrix3(n).normalize(),this.constant=-r.dot(n),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(m.prototype,{set:function(t,e,r,n,i,o){var s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(r),s[3].copy(n),s[4].copy(i),s[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,r=0;6>r;r++)e[r].copy(t.planes[r]);return this},setFromMatrix:function(t){var e=this.planes,r=t.elements,n=r[1],i=r[2],o=r[3],s=r[4],a=r[5],u=r[6],c=r[7],l=r[8],h=r[9],f=r[10],d=r[11],p=r[12],m=r[13],g=r[14];return e[0].setComponents(o-(t=r[0]),c-s,d-l,(r=r[15])-p).normalize(),e[1].setComponents(o+t,c+s,d+l,r+p).normalize(),e[2].setComponents(o+n,c+a,d+h,r+m).normalize(),e[3].setComponents(o-n,c-a,d-h,r-m).normalize(),e[4].setComponents(o-i,c-u,d-f,r-g).normalize(),e[5].setComponents(o+i,c+u,d+f,r+g).normalize(),this},intersectsObject:function(){var t=new d;return function(e){var r=e.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),t.copy(r.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new d;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){var e=this.planes,r=t.center;t=-t.radius;for(var n=0;6>n;n++)if(e[n].distanceToPoint(r)<t)return!1;return!0},intersectsBox:function(){var t=new o,e=new o;return function(r){for(var n=this.planes,i=0;6>i;i++){var o=n[i];t.x=0<o.normal.x?r.min.x:r.max.x,e.x=0<o.normal.x?r.max.x:r.min.x,t.y=0<o.normal.y?r.min.y:r.max.y,e.y=0<o.normal.y?r.max.y:r.min.y,t.z=0<o.normal.z?r.min.z:r.max.z,e.z=0<o.normal.z?r.max.z:r.min.z;var s=o.distanceToPoint(t);if(o=o.distanceToPoint(e),0>s&&0>o)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,r=0;6>r;r++)if(0>e[r].distanceToPoint(t))return!1;return!0}});var Ti={alphamap_fragment:\"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\",alphamap_pars_fragment:\"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\\n\",alphatest_fragment:\"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\",aomap_fragment:\"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\\n\",aomap_pars_fragment:\"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\",begin_vertex:\"\\nvec3 transformed = vec3( position );\\n\",beginnormal_vertex:\"\\nvec3 objectNormal = vec3( normal );\\n\",bsdfs:\"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\\t}\\n\\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\",bumpmap_pars_fragment:\"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\\n\",clipping_planes_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\\n\",clipping_planes_pars_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\\n\",clipping_planes_pars_vertex:\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n\",clipping_planes_vertex:\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\",color_fragment:\"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\",color_pars_fragment:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\\n\",color_pars_vertex:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\",color_vertex:\"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\",common:\"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\n\",cube_uv_reflection_fragment:\"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\tvec4 result = mix(color10, color20, t);\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\\n\",defaultnormal_vertex:\"vec3 transformedNormal = normalMatrix * objectNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n\",displacementmap_pars_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\\n\",displacementmap_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\",emissivemap_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n\",emissivemap_pars_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\\n\",encodings_fragment:\"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\",encodings_pars_fragment:\"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM            = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat D      = max( maxRange / maxRGB, 1.0 );\\n\\tD            = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n\\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract(Le);\\n\\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n\\treturn vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\",envmap_fragment:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\tvec2 sampleUV;\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\\n\",envmap_pars_fragment:\"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\\tuniform float reflectivity;\\n\\tuniform float envMapIntensity;\\n#endif\\n#ifdef USE_ENVMAP\\n\\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\\n\",envmap_pars_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\\n\",envmap_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\n\",fog_vertex:\"\\n#ifdef USE_FOG\\nfogDepth = -mvPosition.z;\\n#endif\",fog_pars_vertex:\"#ifdef USE_FOG\\n  varying float fogDepth;\\n#endif\\n\",fog_fragment:\"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n\",fog_pars_fragment:\"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\\n\",gradientmap_pars_fragment:\"#ifdef TOON\\n\\tuniform sampler2D gradientMap;\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\",lightmap_fragment:\"#ifdef USE_LIGHTMAP\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\",lightmap_pars_fragment:\"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\",lights_lambert_vertex:\"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\",lights_pars_begin:\"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t\\tfloat shadowCameraNear;\\n\\t\\tfloat shadowCameraFar;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\\n\",lights_pars_maps:\"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\\n\",lights_phong_fragment:\"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\",lights_phong_pars_fragment:\"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifdef TOON\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#else\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#endif\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\\n\",lights_physical_fragment:\"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.clearCoat = saturate( clearCoat );\\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\\n#endif\\n\",lights_physical_pars_fragment:\"struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoat;\\n\\t\\tfloat clearCoatRoughness;\\n\\t#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n\\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifndef STANDARD\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\tfloat dotNL = dotNV;\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n\",lights_fragment_begin:\"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearCoatRadiance = vec3( 0.0 );\\n#endif\\n\",lights_fragment_maps:\"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\\n\\t#ifndef STANDARD\\n\\t\\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\\n\\t#endif\\n#endif\\n\",lights_fragment_end:\"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\\n#endif\\n\",logdepthbuf_fragment:\"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\",logdepthbuf_pars_fragment:\"#ifdef USE_LOGDEPTHBUF\\n\\tuniform float logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n#endif\\n\",logdepthbuf_pars_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n\\tuniform float logDepthBufFC;\\n#endif\",logdepthbuf_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t#else\\n\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\tgl_Position.z *= gl_Position.w;\\n\\t#endif\\n#endif\\n\",map_fragment:\"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\\n\",map_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n\",map_particle_fragment:\"#ifdef USE_MAP\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n\",map_particle_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform mat3 uvTransform;\\n\\tuniform sampler2D map;\\n#endif\\n\",metalnessmap_fragment:\"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\\n\",metalnessmap_pars_fragment:\"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\",morphnormal_vertex:\"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\",morphtarget_pars_vertex:\"#ifdef USE_MORPHTARGETS\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\",morphtarget_vertex:\"#ifdef USE_MORPHTARGETS\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\\n\",normal_fragment_begin:\"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n#endif\\n\",normal_fragment_maps:\"#ifdef USE_NORMALMAP\\n\\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\",normalmap_pars_fragment:\"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\\t\\tscale *= float( gl_FrontFacing ) * 2.0 - 1.0;\\n\\t\\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\\n\\t\\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy = normalScale * mapN.xy;\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\\n\",packing:\"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\",premultiplied_alpha_fragment:\"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n\",project_vertex:\"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\ngl_Position = projectionMatrix * mvPosition;\\n\",dithering_fragment:\"#if defined( DITHERING )\\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\\n\",dithering_pars_fragment:\"#if defined( DITHERING )\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\\n\",roughnessmap_fragment:\"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\\n\",roughnessmap_pars_fragment:\"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\",shadowmap_pars_fragment:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\t\\treturn c;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\",shadowmap_pars_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n#endif\\n\",shadowmap_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n#endif\\n\",shadowmask_pars_fragment:\"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tDirectionalLight directionalLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tSpotLight spotLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tPointLight pointLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\\n\",skinbase_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\",skinning_pars_vertex:\"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\\n\",skinning_vertex:\"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\\n\",skinnormal_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\",specularmap_fragment:\"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\",specularmap_pars_fragment:\"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\",tonemapping_fragment:\"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n\",tonemapping_pars_fragment:\"#ifndef saturate\\n\\t#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n\",uv_pars_fragment:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n#endif\",uv_pars_vertex:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n\\tuniform mat3 uvTransform;\\n#endif\\n\",uv_vertex:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\",uv2_pars_fragment:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\",uv2_pars_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n#endif\",uv2_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = uv2;\\n#endif\",worldpos_vertex:\"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n#endif\\n\",cube_frag:\"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldPosition;\\nvoid main() {\\n\\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\\tgl_FragColor.a *= opacity;\\n}\\n\",cube_vert:\"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\\n\",depth_frag:\"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\t#endif\\n}\\n\",depth_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}\\n\",distanceRGBA_frag:\"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\\n\",distanceRGBA_vert:\"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\\n\",equirect_frag:\"uniform sampler2D tEquirect;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldPosition );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n}\\n\",equirect_vert:\"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\",linedashed_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",linedashed_vert:\"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\tvLineDistance = scale * lineDistance;\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",meshbasic_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",meshbasic_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",meshlambert_frag:\"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_pars_maps>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\",meshlambert_vert:\"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_pars_maps>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",meshphong_frag:\"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_pars_maps>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\",meshphong_vert:\"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",meshphysical_frag:\"#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifndef STANDARD\\n\\tuniform float clearCoat;\\n\\tuniform float clearCoatRoughness;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars_begin>\\n#include <lights_pars_maps>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\",meshphysical_vert:\"#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",normal_frag:\"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\\n\",normal_vert:\"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\\n\",points_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",points_vert:\"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\\t#else\\n\\t\\tgl_PointSize = size;\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",shadow_frag:\"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <fog_fragment>\\n}\\n\",shadow_vert:\"#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\"},Ai={merge:function(t){for(var e={},r=0;r<t.length;r++){var n,i=this.clone(t[r]);for(n in i)e[n]=i[n]}return e},clone:function(t){var e,r={};for(e in t)for(var n in r[e]={},t[e]){var i=t[e][n];r[e][n]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?i.clone():Array.isArray(i)?i.slice():i}return r}},Ri={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(g.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):\"number\"==typeof t?this.setHex(t):\"string\"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.b=this.g=this.r=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,r){return this.r=t,this.g=e,this.b=r,this},setHSL:function(){function t(t,e,r){return 0>r&&(r+=1),1<r&&--r,r<1/6?t+6*(e-t)*r:.5>r?e:r<2/3?t+6*(e-t)*(2/3-r):t}return function(e,r,n){return e=Si.euclideanModulo(e,1),r=Si.clamp(r,0,1),n=Si.clamp(n,0,1),0===r?this.r=this.g=this.b=n:(this.r=t(n=2*n-(r=.5>=n?n*(1+r):n+r-n*r),r,e+1/3),this.g=t(n,r,e),this.b=t(n,r,e-1/3)),this}}(),setStyle:function(t){function e(e){void 0!==e&&1>parseFloat(e)&&console.warn(\"THREE.Color: Alpha component of \"+t+\" will be ignored.\")}var r;if(r=/^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec(t)){var n=r[2];switch(r[1]){case\"rgb\":case\"rgba\":if(r=/^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\\d+)%\\s*,\\s*(\\d+)%\\s*,\\s*(\\d+)%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case\"hsl\":case\"hsla\":if(r=/^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)%\\s*,\\s*(\\d+)%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(n)){n=parseFloat(r[1])/360;var i=parseInt(r[2],10)/100,o=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(n,i,o)}}}else if(r=/^#([A-Fa-f0-9]+)$/.exec(t)){if(3===(n=(r=r[1]).length))return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return t&&0<t.length&&(void 0!==(r=Ri[t])?this.setHex(r):console.warn(\"THREE.Color: Unknown color \"+t)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){return void 0===e&&(e=2),e=0<e?1/e:1,this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(){var t=this.r,e=this.g,r=this.b;return this.r=t*t,this.g=e*e,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return(\"000000\"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn(\"THREE.Color: .getHSL() target is now required\"),t={h:0,s:0,l:0});var e,r=this.r,n=this.g,i=this.b,o=Math.max(r,n,i),s=Math.min(r,n,i),a=(s+o)/2;if(s===o)s=e=0;else{var u=o-s;switch(s=.5>=a?u/(o+s):u/(2-o-s),o){case r:e=(n-i)/u+(n<i?6:0);break;case n:e=(i-r)/u+2;break;case i:e=(r-n)/u+4}e/=6}return t.h=e,t.s=s,t.l=a,t},getStyle:function(){return\"rgb(\"+(255*this.r|0)+\",\"+(255*this.g|0)+\",\"+(255*this.b|0)+\")\"},offsetHSL:function(){var t={};return function(e,r,n){return this.getHSL(t),t.h+=e,t.s+=r,t.l+=n,this.setHSL(t.h,t.s,t.l),this}}(),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var ki={common:{diffuse:{value:new g(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new s},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new r(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new g(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new g(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new s}}},Ci={basic:{uniforms:Ai.merge([ki.common,ki.specularmap,ki.envmap,ki.aomap,ki.lightmap,ki.fog]),vertexShader:Ti.meshbasic_vert,fragmentShader:Ti.meshbasic_frag},lambert:{uniforms:Ai.merge([ki.common,ki.specularmap,ki.envmap,ki.aomap,ki.lightmap,ki.emissivemap,ki.fog,ki.lights,{emissive:{value:new g(0)}}]),vertexShader:Ti.meshlambert_vert,fragmentShader:Ti.meshlambert_frag},phong:{uniforms:Ai.merge([ki.common,ki.specularmap,ki.envmap,ki.aomap,ki.lightmap,ki.emissivemap,ki.bumpmap,ki.normalmap,ki.displacementmap,ki.gradientmap,ki.fog,ki.lights,{emissive:{value:new g(0)},specular:{value:new g(1118481)},shininess:{value:30}}]),vertexShader:Ti.meshphong_vert,fragmentShader:Ti.meshphong_frag},standard:{uniforms:Ai.merge([ki.common,ki.envmap,ki.aomap,ki.lightmap,ki.emissivemap,ki.bumpmap,ki.normalmap,ki.displacementmap,ki.roughnessmap,ki.metalnessmap,ki.fog,ki.lights,{emissive:{value:new g(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Ti.meshphysical_vert,fragmentShader:Ti.meshphysical_frag},points:{uniforms:Ai.merge([ki.points,ki.fog]),vertexShader:Ti.points_vert,fragmentShader:Ti.points_frag},dashed:{uniforms:Ai.merge([ki.common,ki.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ti.linedashed_vert,fragmentShader:Ti.linedashed_frag},depth:{uniforms:Ai.merge([ki.common,ki.displacementmap]),vertexShader:Ti.depth_vert,fragmentShader:Ti.depth_frag},normal:{uniforms:Ai.merge([ki.common,ki.bumpmap,ki.normalmap,ki.displacementmap,{opacity:{value:1}}]),vertexShader:Ti.normal_vert,fragmentShader:Ti.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ti.cube_vert,fragmentShader:Ti.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ti.equirect_vert,fragmentShader:Ti.equirect_frag},distanceRGBA:{uniforms:Ai.merge([ki.common,ki.displacementmap,{referencePosition:{value:new o},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ti.distanceRGBA_vert,fragmentShader:Ti.distanceRGBA_frag},shadow:{uniforms:Ai.merge([ki.lights,ki.fog,{color:{value:new g(0)},opacity:{value:1}}]),vertexShader:Ti.shadow_vert,fragmentShader:Ti.shadow_frag}};Ci.physical={uniforms:Ai.merge([Ci.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Ti.meshphysical_vert,fragmentShader:Ti.meshphysical_frag},v.RotationOrders=\"XYZ YZX ZXY XZY YXZ ZYX\".split(\" \"),v.DefaultOrder=\"XYZ\",Object.defineProperties(v.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(v.prototype,{isEuler:!0,set:function(t,e,r,n){return this._x=t,this._y=e,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,r){var n=Si.clamp,i=t.elements;t=i[0];var o=i[4],s=i[8],a=i[1],u=i[5],c=i[9],l=i[2],h=i[6];return i=i[10],\"XYZ\"===(e=e||this._order)?(this._y=Math.asin(n(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(-c,i),this._z=Math.atan2(-o,t)):(this._x=Math.atan2(h,u),this._z=0)):\"YXZ\"===e?(this._x=Math.asin(-n(c,-1,1)),.99999>Math.abs(c)?(this._y=Math.atan2(s,i),this._z=Math.atan2(a,u)):(this._y=Math.atan2(-l,t),this._z=0)):\"ZXY\"===e?(this._x=Math.asin(n(h,-1,1)),.99999>Math.abs(h)?(this._y=Math.atan2(-l,i),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(a,t))):\"ZYX\"===e?(this._y=Math.asin(-n(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(h,i),this._z=Math.atan2(a,t)):(this._x=0,this._z=Math.atan2(-o,u))):\"YZX\"===e?(this._z=Math.asin(n(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-l,t)):(this._x=0,this._y=Math.atan2(s,i))):\"XZY\"===e?(this._z=Math.asin(-n(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(h,u),this._y=Math.atan2(s,t)):(this._x=Math.atan2(-c,i),this._y=0)):console.warn(\"THREE.Euler: .setFromRotationMatrix() given unsupported order: \"+e),this._order=e,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new n;return function(e,r,n){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,r,n)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new i;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new o(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(y.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask=this.mask|1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var Li=0;w.DefaultUp=new o(0,1,0),w.DefaultMatrixAutoUpdate=!0,w.prototype=Object.assign(Object.create(e.prototype),{constructor:w,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new i;return function(e,r){return t.setFromAxisAngle(e,r),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new i;return function(e,r){return t.setFromAxisAngle(e,r),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new o(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new o(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new o(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new o;return function(e,r){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(r)),this}}(),translateX:function(){var t=new o(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new o(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new o(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new n;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new n,e=new o;return function(r,n,i){r.isVector3?e.copy(r):e.set(r,n,i),this.isCamera?t.lookAt(this.position,e,this.up):t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error(\"THREE.Object3D.add: object can't be added as a child of itself.\",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:\"added\"}),this.children.push(t)):console.error(\"THREE.Object3D.add: object not an instance of THREE.Object3D.\",t),this)},remove:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}return-1!==(e=this.children.indexOf(t))&&(t.parent=null,t.dispatchEvent({type:\"removed\"}),this.children.splice(e,1)),this},getObjectById:function(t){return this.getObjectByProperty(\"id\",t)},getObjectByName:function(t){return this.getObjectByProperty(\"name\",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r].getObjectByProperty(t,e);if(void 0!==i)return i}},getWorldPosition:function(t){return void 0===t&&(console.warn(\"THREE.Object3D: .getWorldPosition() target is now required\"),t=new o),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new o,e=new o;return function(r){return void 0===r&&(console.warn(\"THREE.Object3D: .getWorldQuaternion() target is now required\"),r=new i),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,r,e),r}}(),getWorldScale:function(){var t=new o,e=new i;return function(r){return void 0===r&&(console.warn(\"THREE.Object3D: .getWorldScale() target is now required\"),r=new o),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,r),r}}(),getWorldDirection:function(){var t=new i;return function(e){return void 0===e&&(console.warn(\"THREE.Object3D: .getWorldDirection() target is now required\"),e=new o),this.getWorldQuaternion(t),e.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,r=0,n=e.length;r<n;r++)e[r].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,r=0,n=e.length;r<n;r++)e[r].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,r=0,n=e.length;r<n;r++)e[r].updateMatrixWorld(t)},toJSON:function(t){function e(e,r){return void 0===e[r.uuid]&&(e[r.uuid]=r.toJSON(t)),r.uuid}function r(t){var e,r=[];for(e in t){var n=t[e];delete n.metadata,r.push(n)}return r}var n=void 0===t||\"string\"==typeof t,i={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:\"Object\",generator:\"Object3D.toJSON\"});var o={};if(o.uuid=this.uuid,o.type=this.type,\"\"!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),\"{}\"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),void 0!==this.geometry){o.geometry=e(t.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes)if(s=s.shapes,Array.isArray(s))for(var a=0,u=s.length;a<u;a++)e(t.shapes,s[a]);else e(t.shapes,s)}if(void 0!==this.material)if(Array.isArray(this.material)){for(s=[],a=0,u=this.material.length;a<u;a++)s.push(e(t.materials,this.material[a]));o.material=s}else o.material=e(t.materials,this.material);if(0<this.children.length)for(o.children=[],a=0;a<this.children.length;a++)o.children.push(this.children[a].toJSON(t).object);if(n){n=r(t.geometries),a=r(t.materials),u=r(t.textures);var c=r(t.images);s=r(t.shapes),0<n.length&&(i.geometries=n),0<a.length&&(i.materials=a),0<u.length&&(i.textures=u),0<c.length&&(i.images=c),0<s.length&&(i.shapes=s)}return i.object=o,i},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(e=0;e<t.children.length;e++)this.add(t.children[e].clone());return this}}),x.prototype=Object.assign(Object.create(w.prototype),{constructor:x,isCamera:!0,copy:function(t,e){return w.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},getWorldDirection:function(){var t=new i;return function(e){return void 0===e&&(console.warn(\"THREE.Camera: .getWorldDirection() target is now required\"),e=new o),this.getWorldQuaternion(t),e.set(0,0,-1).applyQuaternion(t)}}(),updateMatrixWorld:function(t){w.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),b.prototype=Object.assign(Object.create(x.prototype),{constructor:b,isOrthographicCamera:!0,copy:function(t,e){return x.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,r,n,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-t;if(r+=t,t=n+e,e=n-e,null!==this.view&&this.view.enabled){var o=(this.right-this.left)/this.view.width;r=(i+=this.view.offsetX/(r=this.zoom/(this.view.width/this.view.fullWidth))*o)+this.view.width/r*o,e=(t-=this.view.offsetY/(e=this.zoom/(this.view.height/this.view.fullHeight))*(n=(this.top-this.bottom)/this.view.height))-this.view.height/e*n}this.projectionMatrix.makeOrthographic(i,r,t,e,this.near,this.far)},toJSON:function(t){return(t=w.prototype.toJSON.call(this,t)).object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(_.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,r=t.vertexNormals.length;e<r;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,r=t.vertexColors.length;e<r;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Pi=0;M.prototype=Object.assign(Object.create(e.prototype),{constructor:M,isGeometry:!0,applyMatrix:function(t){for(var e=(new s).getNormalMatrix(t),r=0,n=this.vertices.length;r<n;r++)this.vertices[r].applyMatrix4(t);for(r=0,n=this.faces.length;r<n;r++){(t=this.faces[r]).normal.applyMatrix3(e).normalize();for(var i=0,o=t.vertexNormals.length;i<o;i++)t.vertexNormals[i].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(){var t=new n;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new n;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new n;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new n;return function(e,r,n){return t.makeTranslation(e,r,n),this.applyMatrix(t),this}}(),scale:function(){var t=new n;return function(e,r,n){return t.makeScale(e,r,n),this.applyMatrix(t),this}}(),lookAt:function(){var t=new w;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,r,i){i=new _(t,e,r,void 0!==u?[f[t].clone(),f[e].clone(),f[r].clone()]:[],void 0!==c?[n.colors[t].clone(),n.colors[e].clone(),n.colors[r].clone()]:[],i),n.faces.push(i),void 0!==l&&n.faceVertexUvs[0].push([d[t].clone(),d[e].clone(),d[r].clone()]),void 0!==h&&n.faceVertexUvs[1].push([p[t].clone(),p[e].clone(),p[r].clone()])}var n=this,i=null!==t.index?t.index.array:void 0,s=t.attributes,a=s.position.array,u=void 0!==s.normal?s.normal.array:void 0,c=void 0!==s.color?s.color.array:void 0,l=void 0!==s.uv?s.uv.array:void 0,h=void 0!==s.uv2?s.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var f=[],d=[],p=[],m=s=0;s<a.length;s+=3,m+=2)n.vertices.push(new o(a[s],a[s+1],a[s+2])),void 0!==u&&f.push(new o(u[s],u[s+1],u[s+2])),void 0!==c&&n.colors.push(new g(c[s],c[s+1],c[s+2])),void 0!==l&&d.push(new r(l[m],l[m+1])),void 0!==h&&p.push(new r(h[m],h[m+1]));var v=t.groups;if(0<v.length)for(s=0;s<v.length;s++){var y=(a=v[s]).start;for(m=y,y+=a.count;m<y;m+=3)void 0!==i?e(i[m],i[m+1],i[m+2],a.materialIndex):e(m,m+1,m+2,a.materialIndex)}else if(void 0!==i)for(s=0;s<i.length;s+=3)e(i[s],i[s+1],i[s+2]);else for(s=0;s<a.length/3;s+=3)e(s,s+1,s+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new o;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius;e=0===e?1:1/e;var r=new n;return r.set(e,0,0,-e*t.x,0,e,0,-e*t.y,0,0,e,-e*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new o,e=new o,r=0,n=this.faces.length;r<n;r++){var i=this.faces[r],s=this.vertices[i.a],a=this.vertices[i.b];t.subVectors(this.vertices[i.c],a),e.subVectors(s,a),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){var e;void 0===t&&(t=!0);var r=Array(this.vertices.length),n=0;for(e=this.vertices.length;n<e;n++)r[n]=new o;if(t){var i=new o,s=new o;for(t=0,n=this.faces.length;t<n;t++){var a=this.vertices[(e=this.faces[t]).a],u=this.vertices[e.b];i.subVectors(this.vertices[e.c],u),s.subVectors(a,u),i.cross(s),r[e.a].add(i),r[e.b].add(i),r[e.c].add(i)}}else for(this.computeFaceNormals(),t=0,n=this.faces.length;t<n;t++)r[(e=this.faces[t]).a].add(e.normal),r[e.b].add(e.normal),r[e.c].add(e.normal);for(n=0,e=this.vertices.length;n<e;n++)r[n].normalize();for(t=0,n=this.faces.length;t<n;t++)3===(a=(e=this.faces[t]).vertexNormals).length?(a[0].copy(r[e.a]),a[1].copy(r[e.b]),a[2].copy(r[e.c])):(a[0]=r[e.a].clone(),a[1]=r[e.b].clone(),a[2]=r[e.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t;this.computeFaceNormals();var e=0;for(t=this.faces.length;e<t;e++){var r=this.faces[e],n=r.vertexNormals;3===n.length?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,r=0;for(e=this.faces.length;r<e;r++){var n=this.faces[r];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);var i=0;for(t=n.vertexNormals.length;i<t;i++)n.__originalVertexNormals[i]?n.__originalVertexNormals[i].copy(n.vertexNormals[i]):n.__originalVertexNormals[i]=n.vertexNormals[i].clone()}var s=new M;for(s.faces=this.faces,i=0,t=this.morphTargets.length;i<t;i++){if(!this.morphNormals[i]){this.morphNormals[i]={},this.morphNormals[i].faceNormals=[],this.morphNormals[i].vertexNormals=[],n=this.morphNormals[i].faceNormals;var a=this.morphNormals[i].vertexNormals;for(r=0,e=this.faces.length;r<e;r++){var u=new o,c={a:new o,b:new o,c:new o};n.push(u),a.push(c)}}for(a=this.morphNormals[i],s.vertices=this.morphTargets[i].vertices,s.computeFaceNormals(),s.computeVertexNormals(),r=0,e=this.faces.length;r<e;r++)c=a.vertexNormals[r],(u=a.faceNormals[r]).copy((n=this.faces[r]).normal),c.a.copy(n.vertexNormals[0]),c.b.copy(n.vertexNormals[1]),c.c.copy(n.vertexNormals[2])}for(r=0,e=this.faces.length;r<e;r++)(n=this.faces[r]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new f),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new d),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,r){if(t&&t.isGeometry){var n,i=this.vertices.length,o=this.vertices,a=t.vertices,u=this.faces,c=t.faces,l=this.faceVertexUvs[0],h=t.faceVertexUvs[0],f=this.colors,d=t.colors;void 0===r&&(r=0),void 0!==e&&(n=(new s).getNormalMatrix(e)),t=0;for(var p=a.length;t<p;t++){var m=a[t].clone();void 0!==e&&m.applyMatrix4(e),o.push(m)}for(t=0,p=d.length;t<p;t++)f.push(d[t].clone());for(t=0,p=c.length;t<p;t++){var g=(a=c[t]).vertexNormals;for(d=a.vertexColors,(f=new _(a.a+i,a.b+i,a.c+i)).normal.copy(a.normal),void 0!==n&&f.normal.applyMatrix3(n).normalize(),e=0,o=g.length;e<o;e++)m=g[e].clone(),void 0!==n&&m.applyMatrix3(n).normalize(),f.vertexNormals.push(m);for(f.color.copy(a.color),e=0,o=d.length;e<o;e++)f.vertexColors.push((m=d[e]).clone());f.materialIndex=a.materialIndex+r,u.push(f)}for(t=0,p=h.length;t<p;t++)if(n=[],void 0!==(r=h[t])){for(e=0,o=r.length;e<o;e++)n.push(r[e].clone());l.push(n)}}else console.error(\"THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.\",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error(\"THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.\",t)},mergeVertices:function(){var t,e={},r=[],n=[],i=Math.pow(10,4),o=0;for(t=this.vertices.length;o<t;o++){var s=this.vertices[o];void 0===e[s=Math.round(s.x*i)+\"_\"+Math.round(s.y*i)+\"_\"+Math.round(s.z*i)]?(e[s]=o,r.push(this.vertices[o]),n[o]=r.length-1):n[o]=n[e[s]]}for(e=[],o=0,t=this.faces.length;o<t;o++)for((i=this.faces[o]).a=n[i.a],i.b=n[i.b],i.c=n[i.c],i=[i.a,i.b,i.c],s=0;3>s;s++)if(i[s]===i[(s+1)%3]){e.push(o);break}for(o=e.length-1;0<=o;o--)for(this.faces.splice(i=e[o],1),n=0,t=this.faceVertexUvs.length;n<t;n++)this.faceVertexUvs[n].splice(i,1);return o=this.vertices.length-r.length,this.vertices=r,o},setFromPoints:function(t){this.vertices=[];for(var e=0,r=t.length;e<r;e++){var n=t[e];this.vertices.push(new o(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,r=0;r<e;r++)t[r]._id=r;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var n,i,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];for(o&&o.length===e&&(n=[]),s&&s.length===e&&(i=[]),r=0;r<e;r++){var a=t[r]._id;n&&n.push(o[a]),i&&i.push(s[a])}n&&(this.faceVertexUvs[0]=n),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){function t(t,e,r){return r?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==c[e]?c[e]:(c[e]=u.length/3,u.push(t.x,t.y,t.z),c[e])}function r(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==h[e]?h[e]:(h[e]=l.length,l.push(t.getHex()),h[e])}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==d[e]?d[e]:(d[e]=f.length/2,f.push(t.x,t.y),d[e])}var i={metadata:{version:4.5,type:\"Geometry\",generator:\"Geometry.toJSON\"}};if(i.uuid=this.uuid,i.type=this.type,\"\"!==this.name&&(i.name=this.name),void 0!==this.parameters){var o,s=this.parameters;for(o in s)void 0!==s[o]&&(i[o]=s[o]);return i}for(s=[],o=0;o<this.vertices.length;o++){var a=this.vertices[o];s.push(a.x,a.y,a.z)}a=[];var u=[],c={},l=[],h={},f=[],d={};for(o=0;o<this.faces.length;o++){var p=this.faces[o],m=void 0!==this.faceVertexUvs[0][o],g=0<p.normal.length(),v=0<p.vertexNormals.length,y=1!==p.color.r||1!==p.color.g||1!==p.color.b,w=0<p.vertexColors.length,x=0;x=t(x=t(x=t(x=t(x=t(x=t(x=t(x=t(x,0,0),1,!0),2,!1),3,m),4,g),5,v),6,y),7,w),a.push(x),a.push(p.a,p.b,p.c),a.push(p.materialIndex),m&&a.push(n((m=this.faceVertexUvs[0][o])[0]),n(m[1]),n(m[2])),g&&a.push(e(p.normal)),v&&a.push(e((g=p.vertexNormals)[0]),e(g[1]),e(g[2])),y&&a.push(r(p.color)),w&&a.push(r((p=p.vertexColors)[0]),r(p[1]),r(p[2]))}return i.data={},i.data.vertices=s,i.data.normals=u,0<l.length&&(i.data.colors=l),0<f.length&&(i.data.uvs=[f]),i.data.faces=a,i},clone:function(){return(new M).copy(this)},copy:function(t){var e,r,n;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var i=t.vertices,o=0;for(e=i.length;o<e;o++)this.vertices.push(i[o].clone());for(o=0,e=(i=t.colors).length;o<e;o++)this.colors.push(i[o].clone());for(o=0,e=(i=t.faces).length;o<e;o++)this.faces.push(i[o].clone());for(o=0,e=t.faceVertexUvs.length;o<e;o++){var s=t.faceVertexUvs[o];for(void 0===this.faceVertexUvs[o]&&(this.faceVertexUvs[o]=[]),i=0,r=s.length;i<r;i++){var a=s[i],u=[],c=0;for(n=a.length;c<n;c++)u.push(a[c].clone());this.faceVertexUvs[o].push(u)}}for(o=0,e=(c=t.morphTargets).length;o<e;o++){if((n={}).name=c[o].name,void 0!==c[o].vertices)for(n.vertices=[],i=0,r=c[o].vertices.length;i<r;i++)n.vertices.push(c[o].vertices[i].clone());if(void 0!==c[o].normals)for(n.normals=[],i=0,r=c[o].normals.length;i<r;i++)n.normals.push(c[o].normals[i].clone());this.morphTargets.push(n)}for(o=0,e=(c=t.morphNormals).length;o<e;o++){if(n={},void 0!==c[o].vertexNormals)for(n.vertexNormals=[],i=0,r=c[o].vertexNormals.length;i<r;i++)(a={}).a=(s=c[o].vertexNormals[i]).a.clone(),a.b=s.b.clone(),a.c=s.c.clone(),n.vertexNormals.push(a);if(void 0!==c[o].faceNormals)for(n.faceNormals=[],i=0,r=c[o].faceNormals.length;i<r;i++)n.faceNormals.push(c[o].faceNormals[i].clone());this.morphNormals.push(n)}for(o=0,e=(i=t.skinWeights).length;o<e;o++)this.skinWeights.push(i[o].clone());for(o=0,e=(i=t.skinIndices).length;o<e;o++)this.skinIndices.push(i[o].clone());for(o=0,e=(i=t.lineDistances).length;o<e;o++)this.lineDistances.push(i[o]);return null!==(o=t.boundingBox)&&(this.boundingBox=o.clone()),null!==(o=t.boundingSphere)&&(this.boundingSphere=o.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}}),Object.defineProperty(S.prototype,\"needsUpdate\",{set:function(t){!0===t&&this.version++}}),Object.assign(S.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,r){t*=this.itemSize,r*=e.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[t+n]=e.array[r+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,r=0,n=0,i=t.length;n<i;n++){var o=t[n];void 0===o&&(console.warn(\"THREE.BufferAttribute.copyColorsArray(): color is undefined\",n),o=new g),e[r++]=o.r,e[r++]=o.g,e[r++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,i=0,o=t.length;i<o;i++){var s=t[i];void 0===s&&(console.warn(\"THREE.BufferAttribute.copyVector2sArray(): vector is undefined\",i),s=new r),e[n++]=s.x,e[n++]=s.y}return this},copyVector3sArray:function(t){for(var e=this.array,r=0,n=0,i=t.length;n<i;n++){var s=t[n];void 0===s&&(console.warn(\"THREE.BufferAttribute.copyVector3sArray(): vector is undefined\",n),s=new o),e[r++]=s.x,e[r++]=s.y,e[r++]=s.z}return this},copyVector4sArray:function(t){for(var e=this.array,r=0,n=0,i=t.length;n<i;n++){var o=t[n];void 0===o&&(console.warn(\"THREE.BufferAttribute.copyVector4sArray(): vector is undefined\",n),o=new u),e[r++]=o.x,e[r++]=o.y,e[r++]=o.z,e[r++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,r){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=r,this},setXYZ:function(t,e,r,n){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=r,this.array[t+2]=n,this},setXYZW:function(t,e,r,n,i){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=r,this.array[t+2]=n,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),(E.prototype=Object.create(S.prototype)).constructor=E,(T.prototype=Object.create(S.prototype)).constructor=T,(A.prototype=Object.create(S.prototype)).constructor=A,(R.prototype=Object.create(S.prototype)).constructor=R,(k.prototype=Object.create(S.prototype)).constructor=k,(C.prototype=Object.create(S.prototype)).constructor=C,(L.prototype=Object.create(S.prototype)).constructor=L,(P.prototype=Object.create(S.prototype)).constructor=P,(D.prototype=Object.create(S.prototype)).constructor=D,Object.assign(O.prototype,{computeGroups:function(t){var e=[],r=void 0;t=t.faces;for(var n=0;n<t.length;n++){var i=t[n];if(i.materialIndex!==r){r=i.materialIndex,void 0!==o&&(o.count=3*n-o.start,e.push(o));var o={start:3*n,materialIndex:r}}}void 0!==o&&(o.count=3*n-o.start,e.push(o)),this.groups=e},fromGeometry:function(t){var e=t.faces,n=t.vertices,i=t.faceVertexUvs,o=i[0]&&0<i[0].length,s=i[1]&&0<i[1].length,a=t.morphTargets,u=a.length;if(0<u){for(var c=[],l=0;l<u;l++)c[l]=[];this.morphTargets.position=c}var h=t.morphNormals,f=h.length;if(0<f){var d=[];for(l=0;l<f;l++)d[l]=[];this.morphTargets.normal=d}var p=t.skinIndices,m=t.skinWeights,g=p.length===n.length,v=m.length===n.length;for(l=0;l<e.length;l++){var y=e[l];this.vertices.push(n[y.a],n[y.b],n[y.c]);var w=y.vertexNormals;for(3===w.length?this.normals.push(w[0],w[1],w[2]):this.normals.push(w=y.normal,w,w),3===(w=y.vertexColors).length?this.colors.push(w[0],w[1],w[2]):this.colors.push(w=y.color,w,w),!0===o&&(void 0!==(w=i[0][l])?this.uvs.push(w[0],w[1],w[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv \",l),this.uvs.push(new r,new r,new r))),!0===s&&(void 0!==(w=i[1][l])?this.uvs2.push(w[0],w[1],w[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 \",l),this.uvs2.push(new r,new r,new r))),w=0;w<u;w++){var x=a[w].vertices;c[w].push(x[y.a],x[y.b],x[y.c])}for(w=0;w<f;w++)d[w].push((x=h[w].vertexNormals[l]).a,x.b,x.c);g&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var Di=1;I.prototype=Object.assign(Object.create(e.prototype),{constructor:I,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){this.index=Array.isArray(t)?new(65535<N(t)?L:k)(t,1):t},addAttribute:function(t,e,r){if(e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute){if(\"index\"!==t)return this.attributes[t]=e,this;console.warn(\"THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.\"),this.setIndex(e)}else console.warn(\"THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).\"),this.addAttribute(t,new S(e,r))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,r){this.groups.push({start:t,count:e,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;return void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0),void 0!==(e=this.attributes.normal)&&((new s).getNormalMatrix(t).applyToBufferAttribute(e),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new n;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new n;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new n;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new n;return function(e,r,n){return t.makeTranslation(e,r,n),this.applyMatrix(t),this}}(),scale:function(){var t=new n;return function(e,r,n){return t.makeScale(e,r,n),this.applyMatrix(t),this}}(),lookAt:function(){var t=new w;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new o;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){t=new P(3*e.vertices.length,3);var r=new P(3*e.colors.length,3);this.addAttribute(\"position\",t.copyVector3sArray(e.vertices)),this.addAttribute(\"color\",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length&&(t=new P(e.lineDistances.length,1),this.addAttribute(\"lineDistance\",t.copyArray(e.lineDistances))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];e.push(i.x,i.y,i.z||0)}return this.addAttribute(\"position\",new P(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var r=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(r=void 0,e.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(e);r.verticesNeedUpdate=e.verticesNeedUpdate,r.normalsNeedUpdate=e.normalsNeedUpdate,r.colorsNeedUpdate=e.colorsNeedUpdate,r.uvsNeedUpdate=e.uvsNeedUpdate,r.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=r}return!0===e.verticesNeedUpdate&&(void 0!==(r=this.attributes.position)&&(r.copyVector3sArray(e.vertices),r.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(void 0!==(r=this.attributes.normal)&&(r.copyVector3sArray(e.normals),r.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(void 0!==(r=this.attributes.color)&&(r.copyColorsArray(e.colors),r.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(void 0!==(r=this.attributes.uv)&&(r.copyVector2sArray(e.uvs),r.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(void 0!==(r=this.attributes.lineDistance)&&(r.copyArray(e.lineDistances),r.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new O).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);for(var r in this.addAttribute(\"position\",new S(e,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(e=new Float32Array(3*t.normals.length),this.addAttribute(\"normal\",new S(e,3).copyVector3sArray(t.normals))),0<t.colors.length&&(e=new Float32Array(3*t.colors.length),this.addAttribute(\"color\",new S(e,3).copyColorsArray(t.colors))),0<t.uvs.length&&(e=new Float32Array(2*t.uvs.length),this.addAttribute(\"uv\",new S(e,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(e=new Float32Array(2*t.uvs2.length),this.addAttribute(\"uv2\",new S(e,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){e=[];for(var n=t.morphTargets[r],i=0,o=n.length;i<o;i++){var s=n[i],a=new P(3*s.length,3);e.push(a.copyVector3sArray(s))}this.morphAttributes[r]=e}return 0<t.skinIndices.length&&(r=new P(4*t.skinIndices.length,4),this.addAttribute(\"skinIndex\",r.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(r=new P(4*t.skinWeights.length,4),this.addAttribute(\"skinWeight\",r.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new f);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new f,e=new o;return function(){null===this.boundingSphere&&(this.boundingSphere=new d);var r=this.attributes.position;if(r){var n=this.boundingSphere.center;t.setFromBufferAttribute(r),t.getCenter(n);for(var i=0,o=0,s=r.count;o<s;o++)e.x=r.getX(o),e.y=r.getY(o),e.z=r.getZ(o),i=Math.max(i,n.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,r=this.groups;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute(\"normal\",new S(new Float32Array(n.length),3));else for(var i=e.normal.array,s=0,a=i.length;s<a;s++)i[s]=0;i=e.normal.array;var u=new o,c=new o,l=new o,h=new o,f=new o;if(t){t=t.array,0===r.length&&this.addGroup(0,t.length);for(var d=0,p=r.length;d<p;++d){var m=(s=r[d]).count;for(s=a=s.start,a+=m;s<a;s+=3){var g=3*t[s+1],v=3*t[s+2];u.fromArray(n,m=3*t[s+0]),c.fromArray(n,g),l.fromArray(n,v),h.subVectors(l,c),f.subVectors(u,c),h.cross(f),i[m]+=h.x,i[m+1]+=h.y,i[m+2]+=h.z,i[g]+=h.x,i[g+1]+=h.y,i[g+2]+=h.z,i[v]+=h.x,i[v+1]+=h.y,i[v+2]+=h.z}}}else for(s=0,a=n.length;s<a;s+=9)u.fromArray(n,s),c.fromArray(n,s+3),l.fromArray(n,s+6),h.subVectors(l,c),f.subVectors(u,c),h.cross(f),i[s]=h.x,i[s+1]=h.y,i[s+2]=h.z,i[s+3]=h.x,i[s+4]=h.y,i[s+5]=h.z,i[s+6]=h.x,i[s+7]=h.y,i[s+8]=h.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn(\"THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.\"));var r,n=this.attributes;for(r in n)if(void 0!==t.attributes[r]){var i=n[r].array,o=t.attributes[r],s=o.array,a=0;for(o=o.itemSize*e;a<s.length;a++,o++)i[o]=s[a]}return this}console.error(\"THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.\",t)},normalizeNormals:function(){var t=new o;return function(){for(var e=this.attributes.normal,r=0,n=e.count;r<n;r++)t.x=e.getX(r),t.y=e.getY(r),t.z=e.getZ(r),t.normalize(),e.setXYZ(r,t.x,t.y,t.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn(\"THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.\"),this;var t,e=new I,r=this.index.array,n=this.attributes;for(t in n){var i=n[t],o=i.array,s=i.itemSize,a=new o.constructor(r.length*s),u=0;i=0;for(var c=r.length;i<c;i++)for(var l=r[i]*s,h=0;h<s;h++)a[u++]=o[l++];e.addAttribute(t,new S(a,s))}for(i=0,c=(r=this.groups).length;i<c;i++)e.addGroup((n=r[i]).start,n.count,n.materialIndex);return e},toJSON:function(){var t={metadata:{version:4.5,type:\"BufferGeometry\",generator:\"BufferGeometry.toJSON\"}};if(t.uuid=this.uuid,t.type=this.type,\"\"!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};var r=this.index;for(i in null!==r&&(e=Array.prototype.slice.call(r.array),t.data.index={type:r.array.constructor.name,array:e}),r=this.attributes){var n=r[i];e=Array.prototype.slice.call(n.array),t.data.attributes[i]={itemSize:n.itemSize,type:n.array.constructor.name,array:e,normalized:n.normalized}}var i=this.groups;return 0<i.length&&(t.data.groups=JSON.parse(JSON.stringify(i))),null!==(i=this.boundingSphere)&&(t.data.boundingSphere={center:i.center.toArray(),radius:i.radius}),t},clone:function(){return(new I).copy(this)},copy:function(t){var e;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var r=t.index;for(s in null!==r&&this.setIndex(r.clone()),r=t.attributes)this.addAttribute(s,r[s].clone());var n=t.morphAttributes;for(s in n){var i=[],o=n[s];for(r=0,e=o.length;r<e;r++)i.push(o[r].clone());this.morphAttributes[s]=i}var s=t.groups;for(r=0,e=s.length;r<e;r++)this.addGroup((n=s[r]).start,n.count,n.materialIndex);return null!==(s=t.boundingBox)&&(this.boundingBox=s.clone()),null!==(s=t.boundingSphere)&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}}),(F.prototype=Object.create(M.prototype)).constructor=F,(z.prototype=Object.create(I.prototype)).constructor=z,(U.prototype=Object.create(M.prototype)).constructor=U,(j.prototype=Object.create(I.prototype)).constructor=j;var Oi=0;V.prototype=Object.assign(Object.create(e.prototype),{constructor:V,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var r=t[e];if(void 0===r)console.warn(\"THREE.Material: '\"+e+\"' parameter is undefined.\");else if(\"shading\"===e)console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=1===r;else{var n=this[e];void 0===n?console.warn(\"THREE.\"+this.type+\": '\"+e+\"' is not a property of this material.\"):n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[e]=\"overdraw\"===e?Number(r):r}}},toJSON:function(t){function e(t){var e,r=[];for(e in t){var n=t[e];delete n.metadata,r.push(n)}return r}var r=void 0===t||\"string\"==typeof t;r&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:\"Material\",generator:\"Material.toJSON\"}};return n.uuid=this.uuid,n.type=this.type,\"\"!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),1>this.opacity&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),\"round\"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),\"round\"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),\"{}\"!==JSON.stringify(this.userData)&&(n.userData=this.userData),r&&(r=e(t.textures),t=e(t.images),0<r.length&&(n.textures=r),0<t.length&&(n.images=t)),n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,r=null;if(null!==e){var n=e.length;r=Array(n);for(var i=0;i!==n;++i)r[i]=e[i].clone()}return this.clippingPlanes=r,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}}),(B.prototype=Object.create(V.prototype)).constructor=B,B.prototype.isMeshBasicMaterial=!0,B.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},(H.prototype=Object.create(V.prototype)).constructor=H,H.prototype.isShaderMaterial=!0,H.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ai.clone(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},H.prototype.toJSON=function(t){return(t=V.prototype.toJSON.call(this,t)).uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(G.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn(\"THREE.Ray: .at() target is now required\"),e=new o),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new o;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){return void 0===e&&(console.warn(\"THREE.Ray: .closestPointToPoint() target is now required\"),e=new o),e.subVectors(t,this.origin),0>(t=e.dot(this.direction))?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new o;return function(e){var r=t.subVectors(e,this.origin).dot(this.direction);return 0>r?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(r).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new o,e=new o,r=new o;return function(n,i,o,s){t.copy(n).add(i).multiplyScalar(.5),e.copy(i).sub(n).normalize(),r.copy(this.origin).sub(t);var a=.5*n.distanceTo(i),u=-this.direction.dot(e),c=r.dot(this.direction),l=-r.dot(e),h=r.lengthSq(),f=Math.abs(1-u*u);if(0<f){i=u*c-l;var d=a*f;0<=(n=u*l-c)?i>=-d?i<=d?u=(n*=a=1/f)*(n+u*(i*=a)+2*c)+i*(u*n+i+2*l)+h:(i=a,u=-(n=Math.max(0,-(u*i+c)))*n+i*(i+2*l)+h):(i=-a,u=-(n=Math.max(0,-(u*i+c)))*n+i*(i+2*l)+h):i<=-d?u=-(n=Math.max(0,-(-u*a+c)))*n+(i=0<n?-a:Math.min(Math.max(-a,-l),a))*(i+2*l)+h:i<=d?(n=0,u=(i=Math.min(Math.max(-a,-l),a))*(i+2*l)+h):u=-(n=Math.max(0,-(u*a+c)))*n+(i=0<n?a:Math.min(Math.max(-a,-l),a))*(i+2*l)+h}else i=0<u?-a:a,u=-(n=Math.max(0,-(u*i+c)))*n+i*(i+2*l)+h;return o&&o.copy(this.direction).multiplyScalar(n).add(this.origin),s&&s.copy(e).multiplyScalar(i).add(t),u}}(),intersectSphere:function(){var t=new o;return function(e,r){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),i=t.dot(t)-n*n;return i>(e=e.radius*e.radius)?null:(i=n-(e=Math.sqrt(e-i)),n+=e,0>i&&0>n?null:this.at(0>i?n:i,r))}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(t=-(this.origin.dot(t.normal)+t.constant)/e)?t:null},intersectPlane:function(t,e){return null===(t=this.distanceToPlane(t))?null:this.at(t,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||0>t.normal.dot(this.direction)*e},intersectBox:function(t,e){var r=1/this.direction.x,n=1/this.direction.y,i=1/this.direction.z,o=this.origin;if(0<=r){var s=(t.min.x-o.x)*r;r*=t.max.x-o.x}else s=(t.max.x-o.x)*r,r*=t.min.x-o.x;if(0<=n){var a=(t.min.y-o.y)*n;n*=t.max.y-o.y}else a=(t.max.y-o.y)*n,n*=t.min.y-o.y;return s>n||a>r?null:((a>s||s!=s)&&(s=a),(n<r||r!=r)&&(r=n),0<=i?(a=(t.min.z-o.z)*i,t=(t.max.z-o.z)*i):(a=(t.max.z-o.z)*i,t=(t.min.z-o.z)*i),s>t||a>r?null:((a>s||s!=s)&&(s=a),(t<r||r!=r)&&(r=t),0>r?null:this.at(0<=s?s:r,e)))},intersectsBox:function(){var t=new o;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new o,e=new o,r=new o,n=new o;return function(i,o,s,a,u){if(e.subVectors(o,i),r.subVectors(s,i),n.crossVectors(e,r),0<(o=this.direction.dot(n))){if(a)return null;a=1}else{if(!(0>o))return null;a=-1,o=-o}return t.subVectors(this.origin,i),0>(i=a*this.direction.dot(r.crossVectors(t,r)))?null:0>(s=a*this.direction.dot(e.cross(t)))||i+s>o?null:0>(i=-a*t.dot(n))?null:this.at(i/o,u)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(W.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn(\"THREE.Line3: .getCenter() target is now required\"),t=new o),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn(\"THREE.Line3: .delta() target is now required\"),t=new o),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn(\"THREE.Line3: .at() target is now required\"),e=new o),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new o,e=new o;return function(r,n){return t.subVectors(r,this.start),e.subVectors(this.end,this.start),r=e.dot(e),r=e.dot(t)/r,n&&(r=Si.clamp(r,0,1)),r}}(),closestPointToPoint:function(t,e,r){return t=this.closestPointToPointParameter(t,e),void 0===r&&(console.warn(\"THREE.Line3: .closestPointToPoint() target is now required\"),r=new o),this.delta(r).multiplyScalar(t).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Object.assign(q,{getNormal:function(){var t=new o;return function(e,r,n,i){return void 0===i&&(console.warn(\"THREE.Triangle: .getNormal() target is now required\"),i=new o),i.subVectors(n,r),t.subVectors(e,r),i.cross(t),0<(e=i.lengthSq())?i.multiplyScalar(1/Math.sqrt(e)):i.set(0,0,0)}}(),getBarycoord:function(){var t=new o,e=new o,r=new o;return function(n,i,s,a,u){t.subVectors(a,i),e.subVectors(s,i),r.subVectors(n,i),n=t.dot(t),i=t.dot(e),s=t.dot(r);var c=e.dot(e);a=e.dot(r);var l=n*c-i*i;return void 0===u&&(console.warn(\"THREE.Triangle: .getBarycoord() target is now required\"),u=new o),0===l?u.set(-2,-1,-1):u.set(1-(c=(c*s-i*a)*(l=1/l))-(n=(n*a-i*s)*l),n,c)}}(),containsPoint:function(){var t=new o;return function(e,r,n,i){return q.getBarycoord(e,r,n,i,t),0<=t.x&&0<=t.y&&1>=t.x+t.y}}()}),Object.assign(q.prototype,{set:function(t,e,r){return this.a.copy(t),this.b.copy(e),this.c.copy(r),this},setFromPointsAndIndices:function(t,e,r,n){return this.a.copy(t[e]),this.b.copy(t[r]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new o,e=new o;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn(\"THREE.Triangle: .getMidpoint() target is now required\"),t=new o),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return q.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn(\"THREE.Triangle: .getPlane() target is now required\"),t=new o),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return q.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function(t){return q.containsPoint(t,this.a,this.b,this.c)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(){var t=new p,e=[new W,new W,new W],r=new o,n=new o;return function(i,s){void 0===s&&(console.warn(\"THREE.Triangle: .closestPointToPoint() target is now required\"),s=new o);var a=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(i,r),!0===this.containsPoint(r))s.copy(r);else for(e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a),i=0;i<e.length;i++){e[i].closestPointToPoint(r,!0,n);var u=r.distanceToSquared(n);u<a&&(a=u,s.copy(n))}return s}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),Y.prototype=Object.assign(Object.create(w.prototype),{constructor:Y,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return w.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var e=Object.keys(t);if(0<e.length){var r=t[e[0]];if(void 0!==r)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=r.length;t<e;t++){var n=r[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}else if(void 0!==(r=t.morphTargets)&&0<r.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=r.length;t<e;t++)n=r[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t},raycast:function(){function t(t,e,r,n,i,o,s){return q.getBarycoord(t,e,r,n,w),i.multiplyScalar(w.x),o.multiplyScalar(w.y),s.multiplyScalar(w.z),i.add(o).add(s),i.clone()}function e(t,e,r,n,i,o,s,a){return null===(1===e.side?n.intersectTriangle(s,o,i,!0,a):n.intersectTriangle(i,o,s,2!==e.side,a))?null:(b.copy(a),b.applyMatrix4(t.matrixWorld),(e=r.ray.origin.distanceTo(b))<r.near||e>r.far?null:{distance:e,point:b.clone(),object:t})}function i(r,n,i,o,s,a,u,f){return c.fromBufferAttribute(o,a),l.fromBufferAttribute(o,u),h.fromBufferAttribute(o,f),(r=e(r,r.material,n,i,c,l,h,x))&&(s&&(g.fromBufferAttribute(s,a),v.fromBufferAttribute(s,u),y.fromBufferAttribute(s,f),r.uv=t(x,c,l,h,g,v,y)),s=new _(a,u,f),q.getNormal(c,l,h,s.normal),r.face=s,r.faceIndex=a),r}var s=new n,a=new G,u=new d,c=new o,l=new o,h=new o,f=new o,p=new o,m=new o,g=new r,v=new r,y=new r,w=new o,x=new o,b=new o;return function(r,n){var o,d=this.geometry,w=this.material,b=this.matrixWorld;if(void 0!==w&&(null===d.boundingSphere&&d.computeBoundingSphere(),u.copy(d.boundingSphere),u.applyMatrix4(b),!1!==r.ray.intersectsSphere(u)&&(s.getInverse(b),a.copy(r.ray).applyMatrix4(s),null===d.boundingBox||!1!==a.intersectsBox(d.boundingBox))))if(d.isBufferGeometry){w=d.index;var _,M=d.attributes.position;if(d=d.attributes.uv,null!==w)for(b=0,_=w.count;b<_;b+=3){var S=w.getX(b),E=w.getX(b+1),T=w.getX(b+2);(o=i(this,r,a,M,d,S,E,T))&&(o.faceIndex=Math.floor(b/3),n.push(o))}else if(void 0!==M)for(b=0,_=M.count;b<_;b+=3)(o=i(this,r,a,M,d,S=b,E=b+1,T=b+2))&&n.push(o)}else if(d.isGeometry){b=Array.isArray(w),_=d.vertices,S=d.faces,0<(E=d.faceVertexUvs[0]).length&&(M=E);for(var A=0,R=S.length;A<R;A++){var k=S[A];if(void 0!==(o=b?w[k.materialIndex]:w)){E=_[k.a],T=_[k.b];var C=_[k.c];if(!0===o.morphTargets){var L=d.morphTargets,P=this.morphTargetInfluences;c.set(0,0,0),l.set(0,0,0),h.set(0,0,0);for(var D=0,O=L.length;D<O;D++){var N=P[D];if(0!==N){var I=L[D].vertices;c.addScaledVector(f.subVectors(I[k.a],E),N),l.addScaledVector(p.subVectors(I[k.b],T),N),h.addScaledVector(m.subVectors(I[k.c],C),N)}}c.add(E),l.add(T),h.add(C),E=c,T=l,C=h}(o=e(this,o,r,a,E,T,C,x))&&(M&&M[A]&&(g.copy((L=M[A])[0]),v.copy(L[1]),y.copy(L[2]),o.uv=t(x,E,T,C,g,v,y)),o.face=k,o.faceIndex=A,n.push(o))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(Q.prototype=Object.create(a.prototype)).constructor=Q,Q.prototype.isCubeTexture=!0,Object.defineProperty(Q.prototype,\"images\",{get:function(){return this.image},set:function(t){this.image=t}});var Ni=new a,Ii=new Q,Fi=[],zi=[],Ui=new Float32Array(16),ji=new Float32Array(9);Tt.prototype.setValue=function(t,e){for(var r=this.seq,n=0,i=r.length;n!==i;++n){var o=r[n];o.setValue(t,e[o.id])}};var Vi=/([\\w\\d_]+)(\\])?(\\[|\\.)?/g;At.prototype.setValue=function(t,e,r){void 0!==(e=this.map[e])&&e.setValue(t,r,this.renderer)},At.prototype.setOptional=function(t,e,r){void 0!==(e=e[r])&&this.setValue(t,r,e)},At.upload=function(t,e,r,n){for(var i=0,o=e.length;i!==o;++i){var s=e[i],a=r[s.id];!1!==a.needsUpdate&&s.setValue(t,a.value,n)}},At.seqWithValue=function(t,e){for(var r=[],n=0,i=t.length;n!==i;++n){var o=t[n];o.id in e&&r.push(o)}return r};var Bi=0,Hi=0;(jt.prototype=Object.create(V.prototype)).constructor=jt,jt.prototype.isMeshDepthMaterial=!0,jt.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},(Vt.prototype=Object.create(V.prototype)).constructor=Vt,Vt.prototype.isMeshDistanceMaterial=!0,Vt.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},(Ht.prototype=Object.create(a.prototype)).constructor=Ht,qt.prototype=Object.assign(Object.create(x.prototype),{constructor:qt,isPerspectiveCamera:!0,copy:function(t,e){return x.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*Si.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Si.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Si.RAD2DEG*Math.atan(Math.tan(.5*Si.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,r,n,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Si.DEG2RAD*this.fov)/this.zoom,r=2*e,n=this.aspect*r,i=-.5*n,o=this.view;if(null!==this.view&&this.view.enabled){var s=o.fullWidth,a=o.fullHeight;i+=o.offsetX*n/s,e-=o.offsetY*r/a,n*=o.width/s,r*=o.height/a}0!==(o=this.filmOffset)&&(i+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,e,e-r,t,this.far)},toJSON:function(t){return(t=w.prototype.toJSON.call(this,t)).object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Yt.prototype=Object.assign(Object.create(qt.prototype),{constructor:Yt,isArrayCamera:!0}),Jt.prototype.isFogExp2=!0,Jt.prototype.clone=function(){return new Jt(this.color.getHex(),this.density)},Jt.prototype.toJSON=function(){return{type:\"FogExp2\",color:this.color.getHex(),density:this.density}},Zt.prototype.isFog=!0,Zt.prototype.clone=function(){return new Zt(this.color.getHex(),this.near,this.far)},Zt.prototype.toJSON=function(){return{type:\"Fog\",color:this.color.getHex(),near:this.near,far:this.far}},Qt.prototype=Object.assign(Object.create(w.prototype),{constructor:Qt,copy:function(t,e){return w.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=w.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}),(Kt.prototype=Object.create(V.prototype)).constructor=Kt,Kt.prototype.isSpriteMaterial=!0,Kt.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},te.prototype=Object.assign(Object.create(w.prototype),{constructor:te,isSprite:!0,raycast:function(){var t=new o,e=new o,r=new o;return function(n,i){e.setFromMatrixPosition(this.matrixWorld),n.ray.closestPointToPoint(e,t),r.setFromMatrixScale(this.matrixWorld);var o=r.x*r.y/4;e.distanceToSquared(t)>o||(o=n.ray.origin.distanceTo(t))<n.near||o>n.far||i.push({distance:o,point:t.clone(),face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return w.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),ee.prototype=Object.assign(Object.create(w.prototype),{constructor:ee,copy:function(t){w.prototype.copy.call(this,t,!1);for(var e=0,r=(t=t.levels).length;e<r;e++){var n=t[e];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var r=this.levels,n=0;n<r.length&&!(e<r[n].distance);n++);r.splice(n,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,r=1,n=e.length;r<n&&!(t<e[r].distance);r++);return e[r-1].object},raycast:function(){var t=new o;return function(e,r){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(t);this.getObjectForDistance(n).raycast(e,r)}}(),update:function(){var t=new o,e=new o;return function(r){var n=this.levels;if(1<n.length){t.setFromMatrixPosition(r.matrixWorld),e.setFromMatrixPosition(this.matrixWorld),r=t.distanceTo(e),n[0].object.visible=!0;for(var i=1,o=n.length;i<o&&r>=n[i].distance;i++)n[i-1].object.visible=!1,n[i].object.visible=!0;for(;i<o;i++)n[i].object.visible=!1}}}(),toJSON:function(t){(t=w.prototype.toJSON.call(this,t)).object.levels=[];for(var e=this.levels,r=0,n=e.length;r<n;r++){var i=e[r];t.object.levels.push({object:i.object.uuid,distance:i.distance})}return t}}),Object.assign(re.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var r=new n;this.bones[t]&&r.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(r)}},pose:function(){var t,e,r=0;for(e=this.bones.length;r<e;r++)(t=this.bones[r])&&t.matrixWorld.getInverse(this.boneInverses[r]);for(r=0,e=this.bones.length;r<e;r++)(t=this.bones[r])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new n,e=new n;return function(){for(var r=this.bones,n=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,s=0,a=r.length;s<a;s++)t.multiplyMatrices(r[s]?r[s].matrixWorld:e,n[s]),t.toArray(i,16*s);void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new re(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,r=this.bones.length;e<r;e++){var n=this.bones[e];if(n.name===t)return n}}}),ne.prototype=Object.assign(Object.create(w.prototype),{constructor:ne,isBone:!0}),ie.prototype=Object.assign(Object.create(Y.prototype),{constructor:ie,isSkinnedMesh:!0,initBones:function(){var t,e=[];if(this.geometry&&void 0!==this.geometry.bones){var r=0;for(t=this.geometry.bones.length;r<t;r++){var n=this.geometry.bones[r],i=new ne;e.push(i),i.name=n.name,i.position.fromArray(n.pos),i.quaternion.fromArray(n.rotq),void 0!==n.scl&&i.scale.fromArray(n.scl)}for(r=0,t=this.geometry.bones.length;r<t;r++)-1!==(n=this.geometry.bones[r]).parent&&null!==n.parent&&void 0!==e[n.parent]?e[n.parent].add(e[r]):this.add(e[r])}return this.updateMatrixWorld(!0),e},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var e=this.geometry.skinWeights[t],r=1/e.manhattanLength();1/0!==r?e.multiplyScalar(r):e.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){e=new u;var n=this.geometry.attributes.skinWeight;for(t=0;t<n.count;t++)e.x=n.getX(t),e.y=n.getY(t),e.z=n.getZ(t),e.w=n.getW(t),1/0!=(r=1/e.manhattanLength())?e.multiplyScalar(r):e.set(1,0,0,0),n.setXYZW(t,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(t){Y.prototype.updateMatrixWorld.call(this,t),\"attached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):\"detached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn(\"THREE.SkinnedMesh: Unrecognized bindMode: \"+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(oe.prototype=Object.create(V.prototype)).constructor=oe,oe.prototype.isLineBasicMaterial=!0,oe.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},se.prototype=Object.assign(Object.create(w.prototype),{constructor:se,isLine:!0,computeLineDistances:function(){var t=new o,e=new o;return function(){var r=this.geometry;if(r.isBufferGeometry)if(null===r.index){for(var n=r.attributes.position,i=[0],o=1,s=n.count;o<s;o++)t.fromBufferAttribute(n,o-1),e.fromBufferAttribute(n,o),i[o]=i[o-1],i[o]+=t.distanceTo(e);r.addAttribute(\"lineDistance\",new P(i,1))}else console.warn(\"THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");else if(r.isGeometry)for(n=r.vertices,(i=r.lineDistances)[0]=0,o=1,s=n.length;o<s;o++)i[o]=i[o-1],i[o]+=n[o-1].distanceTo(n[o]);return this}}(),raycast:function(){var t=new n,e=new G,r=new d;return function(n,i){var s=n.linePrecision;s*=s;var a=this.geometry,u=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),r.copy(a.boundingSphere),r.applyMatrix4(u),!1!==n.ray.intersectsSphere(r)){t.getInverse(u),e.copy(n.ray).applyMatrix4(t);var c=new o,l=new o;u=new o;var h=new o,f=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var d=a.index,p=a.attributes.position.array;if(null!==d){a=0;for(var m=(d=d.array).length-1;a<m;a+=f){var g=d[a+1];c.fromArray(p,3*d[a]),l.fromArray(p,3*g),(g=e.distanceSqToSegment(c,l,h,u))>s||(h.applyMatrix4(this.matrixWorld),(g=n.ray.origin.distanceTo(h))<n.near||g>n.far||i.push({distance:g,point:u.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}}else for(a=0,m=p.length/3-1;a<m;a+=f)c.fromArray(p,3*a),l.fromArray(p,3*a+3),(g=e.distanceSqToSegment(c,l,h,u))>s||(h.applyMatrix4(this.matrixWorld),(g=n.ray.origin.distanceTo(h))<n.near||g>n.far||i.push({distance:g,point:u.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}else if(a.isGeometry)for(l=(c=a.vertices).length,a=0;a<l-1;a+=f)(g=e.distanceSqToSegment(c[a],c[a+1],h,u))>s||(h.applyMatrix4(this.matrixWorld),(g=n.ray.origin.distanceTo(h))<n.near||g>n.far||i.push({distance:g,point:u.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ae.prototype=Object.assign(Object.create(se.prototype),{constructor:ae,isLineSegments:!0,computeLineDistances:function(){var t=new o,e=new o;return function(){var r=this.geometry;if(r.isBufferGeometry)if(null===r.index){for(var n=r.attributes.position,i=[],o=0,s=n.count;o<s;o+=2)t.fromBufferAttribute(n,o),e.fromBufferAttribute(n,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e);r.addAttribute(\"lineDistance\",new P(i,1))}else console.warn(\"THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");else if(r.isGeometry)for(i=r.lineDistances,o=0,s=(n=r.vertices).length;o<s;o+=2)t.copy(n[o]),e.copy(n[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e);return this}}()}),ue.prototype=Object.assign(Object.create(se.prototype),{constructor:ue,isLineLoop:!0}),(ce.prototype=Object.create(V.prototype)).constructor=ce,ce.prototype.isPointsMaterial=!0,ce.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},le.prototype=Object.assign(Object.create(w.prototype),{constructor:le,isPoints:!0,raycast:function(){var t=new n,e=new G,r=new d;return function(n,i){function s(t,r){var o=e.distanceSqToPoint(t);o<h&&(e.closestPointToPoint(t,f),f.applyMatrix4(c),(t=n.ray.origin.distanceTo(f))<n.near||t>n.far||i.push({distance:t,distanceToRay:Math.sqrt(o),point:f.clone(),index:r,face:null,object:a}))}var a=this,u=this.geometry,c=this.matrixWorld,l=n.params.Points.threshold;if(null===u.boundingSphere&&u.computeBoundingSphere(),r.copy(u.boundingSphere),r.applyMatrix4(c),r.radius+=l,!1!==n.ray.intersectsSphere(r)){t.getInverse(c),e.copy(n.ray).applyMatrix4(t);var h=(l/=(this.scale.x+this.scale.y+this.scale.z)/3)*l;l=new o;var f=new o;if(u.isBufferGeometry){var d=u.index;if(u=u.attributes.position.array,null!==d){var p=d.array;d=0;for(var m=p.length;d<m;d++){var g=p[d];l.fromArray(u,3*g),s(l,g)}}else for(d=0,p=u.length/3;d<p;d++)l.fromArray(u,3*d),s(l,d)}else for(d=0,p=(l=u.vertices).length;d<p;d++)s(l[d],d)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),he.prototype=Object.assign(Object.create(w.prototype),{constructor:he,isGroup:!0}),fe.prototype=Object.assign(Object.create(a.prototype),{constructor:fe,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),(de.prototype=Object.create(a.prototype)).constructor=de,de.prototype.isCompressedTexture=!0,(pe.prototype=Object.create(a.prototype)).constructor=pe,pe.prototype.isDepthTexture=!0,(me.prototype=Object.create(I.prototype)).constructor=me,(ge.prototype=Object.create(M.prototype)).constructor=ge,(ve.prototype=Object.create(I.prototype)).constructor=ve,(ye.prototype=Object.create(M.prototype)).constructor=ye,(we.prototype=Object.create(I.prototype)).constructor=we,(xe.prototype=Object.create(M.prototype)).constructor=xe,(be.prototype=Object.create(we.prototype)).constructor=be,(_e.prototype=Object.create(M.prototype)).constructor=_e,(Me.prototype=Object.create(we.prototype)).constructor=Me,(Se.prototype=Object.create(M.prototype)).constructor=Se,(Ee.prototype=Object.create(we.prototype)).constructor=Ee,(Te.prototype=Object.create(M.prototype)).constructor=Te,(Ae.prototype=Object.create(we.prototype)).constructor=Ae,(Re.prototype=Object.create(M.prototype)).constructor=Re,(ke.prototype=Object.create(I.prototype)).constructor=ke,(Ce.prototype=Object.create(M.prototype)).constructor=Ce,(Le.prototype=Object.create(I.prototype)).constructor=Le,(Pe.prototype=Object.create(M.prototype)).constructor=Pe,(De.prototype=Object.create(I.prototype)).constructor=De;var Gi={area:function(t){for(var e=t.length,r=0,n=e-1,i=0;i<e;n=i++)r+=t[n].x*t[i].y-t[i].x*t[n].y;return.5*r},isClockWise:function(t){return 0>Gi.area(t)},triangulateShape:function(t,e){var r=[],n=[],i=[];$e(t),Je(r,t);var o=t.length;for(e.forEach($e),t=0;t<e.length;t++)n.push(o),o+=e[t].length,Je(r,e[t]);for(e=function(t,e,r){r=r||2;var n,i=e&&e.length,o=i?e[0]*r:t.length,s=Oe(t,0,o,r,!0),a=[];if(!s)return a;if(i){var u,c=r;i=[];var l=0;for(u=e.length;l<u;l++){var h=e[l]*c;(h=Oe(t,h,l<u-1?e[l+1]*c:t.length,c,!1))===h.next&&(h.steiner=!0),i.push(Ue(h))}for(i.sort(Ie),l=0;l<i.length;l++)(c=Fe(e=i[l],c=s))&&Ne(e=We(c,e),e.next),s=Ne(s,s.next)}if(t.length>80*r){var f=n=t[0],d=i=t[1];for(c=r;c<o;c+=r)e=t[c+1],(l=t[c])<f&&(f=l),e<d&&(d=e),l>n&&(n=l),e>i&&(i=e);n=0!==(n=Math.max(n-f,i-d))?1/n:0}return function t(e,r,n,i,o,s,a){if(e){if(!a&&s){var u=e,c=u;do{null===c.z&&(c.z=ze(c.x,c.y,i,o,s)),c.prevZ=c.prev,c=c.nextZ=c.next}while(c!==u);c.prevZ.nextZ=null,c.prevZ=null,u=c;var l,h,f,d,p=1;do{c=u;var m=u=null;for(h=0;c;){h++;var g=c;for(l=f=0;l<p&&(f++,g=g.nextZ);l++);for(d=p;0<f||0<d&&g;)0!==f&&(0===d||!g||c.z<=g.z)?(l=c,c=c.nextZ,f--):(l=g,g=g.nextZ,d--),m?m.nextZ=l:u=l,l.prevZ=m,m=l;c=g}m.nextZ=null,p*=2}while(1<h)}for(u=e;e.prev!==e.next;){if(c=e.prev,g=e.next,s)t:{d=i;var v=o,y=s;if(0<=Ve(h=(m=e).prev,f=m,p=m.next))m=!1;else{var w=h.x>f.x?h.x>p.x?h.x:p.x:f.x>p.x?f.x:p.x,x=h.y>f.y?h.y>p.y?h.y:p.y:f.y>p.y?f.y:p.y;for(l=ze(h.x<f.x?h.x<p.x?h.x:p.x:f.x<p.x?f.x:p.x,h.y<f.y?h.y<p.y?h.y:p.y:f.y<p.y?f.y:p.y,d,v,y),d=ze(w,x,d,v,y),v=m.nextZ;v&&v.z<=d;){if(v!==m.prev&&v!==m.next&&je(h.x,h.y,f.x,f.y,p.x,p.y,v.x,v.y)&&0<=Ve(v.prev,v,v.next)){m=!1;break t}v=v.nextZ}for(v=m.prevZ;v&&v.z>=l;){if(v!==m.prev&&v!==m.next&&je(h.x,h.y,f.x,f.y,p.x,p.y,v.x,v.y)&&0<=Ve(v.prev,v,v.next)){m=!1;break t}v=v.prevZ}m=!0}}else t:if(m=e,h=m.prev,f=m,p=m.next,0<=Ve(h,f,p))m=!1;else{for(l=m.next.next;l!==m.prev;){if(je(h.x,h.y,f.x,f.y,p.x,p.y,l.x,l.y)&&0<=Ve(l.prev,l,l.next)){m=!1;break t}l=l.next}m=!0}if(m)r.push(c.i/n),r.push(e.i/n),r.push(g.i/n),Ye(e),u=e=g.next;else if((e=g)===u){if(a){if(1===a){a=r,u=n,c=e;do{!Be(g=c.prev,m=c.next.next)&&He(g,c,c.next,m)&&Ge(g,m)&&Ge(m,g)&&(a.push(g.i/u),a.push(c.i/u),a.push(m.i/u),Ye(c),Ye(c.next),c=e=m),c=c.next}while(c!==e);t(e=c,r,n,i,o,s,2)}else if(2===a)t:{a=e;do{for(u=a.next.next;u!==a.prev;){if(c=a.i!==u.i){if(m=(c=a).next.i!==(g=u).i&&c.prev.i!==g.i){e:{m=c;do{if(m.i!==c.i&&m.next.i!==c.i&&m.i!==g.i&&m.next.i!==g.i&&He(m,m.next,c,g)){m=!0;break e}m=m.next}while(m!==c);m=!1}m=!m}if(m=m&&Ge(c,g)&&Ge(g,c)){m=c,h=!1,f=(c.x+g.x)/2,g=(c.y+g.y)/2;do{m.y>g!=m.next.y>g&&m.next.y!==m.y&&f<(m.next.x-m.x)*(g-m.y)/(m.next.y-m.y)+m.x&&(h=!h),m=m.next}while(m!==c);m=h}c=m}if(c){e=We(a,u),a=Ne(a,a.next),e=Ne(e,e.next),t(a,r,n,i,o,s),t(e,r,n,i,o,s);break t}u=u.next}a=a.next}while(a!==e)}}else t(Ne(e),r,n,i,o,s,1);break}}}}(s,a,r,f,d,n),a}(r,n),t=0;t<e.length;t+=3)i.push(e.slice(t,t+3));return i}};(Ze.prototype=Object.create(M.prototype)).constructor=Ze,(Qe.prototype=Object.create(I.prototype)).constructor=Qe;var Wi={generateTopUV:function(t,e,n,i,o){t=e[3*i],i=e[3*i+1];var s=e[3*o];return o=e[3*o+1],[new r(e[3*n],e[3*n+1]),new r(t,i),new r(s,o)]},generateSideWallUV:function(t,e,n,i,o,s){t=e[3*n];var a=e[3*n+1];n=e[3*n+2];var u=e[3*i],c=e[3*i+1];i=e[3*i+2];var l=e[3*o],h=e[3*o+1];o=e[3*o+2];var f=e[3*s],d=e[3*s+1];return e=e[3*s+2],.01>Math.abs(a-c)?[new r(t,1-n),new r(u,1-i),new r(l,1-o),new r(f,1-e)]:[new r(a,1-n),new r(c,1-i),new r(h,1-o),new r(d,1-e)]}};(Ke.prototype=Object.create(M.prototype)).constructor=Ke,(tr.prototype=Object.create(Qe.prototype)).constructor=tr,(er.prototype=Object.create(M.prototype)).constructor=er,(rr.prototype=Object.create(I.prototype)).constructor=rr,(nr.prototype=Object.create(M.prototype)).constructor=nr,(ir.prototype=Object.create(I.prototype)).constructor=ir,(or.prototype=Object.create(M.prototype)).constructor=or,(sr.prototype=Object.create(I.prototype)).constructor=sr,(ar.prototype=Object.create(M.prototype)).constructor=ar,ar.prototype.toJSON=function(){var t=M.prototype.toJSON.call(this);return cr(this.parameters.shapes,t)},(ur.prototype=Object.create(I.prototype)).constructor=ur,ur.prototype.toJSON=function(){var t=I.prototype.toJSON.call(this);return cr(this.parameters.shapes,t)},(lr.prototype=Object.create(I.prototype)).constructor=lr,(hr.prototype=Object.create(M.prototype)).constructor=hr,(fr.prototype=Object.create(I.prototype)).constructor=fr,(dr.prototype=Object.create(hr.prototype)).constructor=dr,(pr.prototype=Object.create(fr.prototype)).constructor=pr,(mr.prototype=Object.create(M.prototype)).constructor=mr,(gr.prototype=Object.create(I.prototype)).constructor=gr;var qi=Object.freeze({WireframeGeometry:me,ParametricGeometry:ge,ParametricBufferGeometry:ve,TetrahedronGeometry:xe,TetrahedronBufferGeometry:be,OctahedronGeometry:_e,OctahedronBufferGeometry:Me,IcosahedronGeometry:Se,IcosahedronBufferGeometry:Ee,DodecahedronGeometry:Te,DodecahedronBufferGeometry:Ae,PolyhedronGeometry:ye,PolyhedronBufferGeometry:we,TubeGeometry:Re,TubeBufferGeometry:ke,TorusKnotGeometry:Ce,TorusKnotBufferGeometry:Le,TorusGeometry:Pe,TorusBufferGeometry:De,TextGeometry:Ke,TextBufferGeometry:tr,SphereGeometry:er,SphereBufferGeometry:rr,RingGeometry:nr,RingBufferGeometry:ir,PlaneGeometry:U,PlaneBufferGeometry:j,LatheGeometry:or,LatheBufferGeometry:sr,ShapeGeometry:ar,ShapeBufferGeometry:ur,ExtrudeGeometry:Ze,ExtrudeBufferGeometry:Qe,EdgesGeometry:lr,ConeGeometry:dr,ConeBufferGeometry:pr,CylinderGeometry:hr,CylinderBufferGeometry:fr,CircleGeometry:mr,CircleBufferGeometry:gr,BoxGeometry:F,BoxBufferGeometry:z});(vr.prototype=Object.create(V.prototype)).constructor=vr,vr.prototype.isShadowMaterial=!0,vr.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this},(yr.prototype=Object.create(H.prototype)).constructor=yr,yr.prototype.isRawShaderMaterial=!0,(wr.prototype=Object.create(V.prototype)).constructor=wr,wr.prototype.isMeshStandardMaterial=!0,wr.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.defines={STANDARD:\"\"},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(xr.prototype=Object.create(wr.prototype)).constructor=xr,xr.prototype.isMeshPhysicalMaterial=!0,xr.prototype.copy=function(t){return wr.prototype.copy.call(this,t),this.defines={PHYSICAL:\"\"},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},(br.prototype=Object.create(V.prototype)).constructor=br,br.prototype.isMeshPhongMaterial=!0,br.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(_r.prototype=Object.create(br.prototype)).constructor=_r,_r.prototype.isMeshToonMaterial=!0,_r.prototype.copy=function(t){return br.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},(Mr.prototype=Object.create(V.prototype)).constructor=Mr,Mr.prototype.isMeshNormalMaterial=!0,Mr.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Sr.prototype=Object.create(V.prototype)).constructor=Sr,Sr.prototype.isMeshLambertMaterial=!0,Sr.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Er.prototype=Object.create(oe.prototype)).constructor=Er,Er.prototype.isLineDashedMaterial=!0,Er.prototype.copy=function(t){return oe.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Yi=Object.freeze({ShadowMaterial:vr,SpriteMaterial:Kt,RawShaderMaterial:yr,ShaderMaterial:H,PointsMaterial:ce,MeshPhysicalMaterial:xr,MeshStandardMaterial:wr,MeshPhongMaterial:br,MeshToonMaterial:_r,MeshNormalMaterial:Mr,MeshLambertMaterial:Sr,MeshDepthMaterial:jt,MeshDistanceMaterial:Vt,MeshBasicMaterial:B,LineDashedMaterial:Er,LineBasicMaterial:oe,Material:V}),Xi={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},$i=new Tr,Ji={};Object.assign(Ar.prototype,{load:function(t,e,r,n){void 0===t&&(t=\"\"),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Xi.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;if(void 0===Ji[t]){var s=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){r=s[1];var a=!!s[2];s=s[3],s=window.decodeURIComponent(s),a&&(s=window.atob(s));try{var u=(this.responseType||\"\").toLowerCase();switch(u){case\"arraybuffer\":case\"blob\":var c=new Uint8Array(s.length);for(a=0;a<s.length;a++)c[a]=s.charCodeAt(a);var l=\"blob\"===u?new Blob([c.buffer],{type:r}):c.buffer;break;case\"document\":l=(new DOMParser).parseFromString(s,r);break;case\"json\":l=JSON.parse(s);break;default:l=s}window.setTimeout(function(){e&&e(l),i.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){n&&n(e),i.manager.itemEnd(t),i.manager.itemError(t)},0)}}else{Ji[t]=[],Ji[t].push({onLoad:e,onProgress:r,onError:n});var h=new XMLHttpRequest;for(a in h.open(\"GET\",t,!0),h.addEventListener(\"load\",function(e){var r=this.response;Xi.add(t,r);var n=Ji[t];if(delete Ji[t],200===this.status){for(var o=0,s=n.length;o<s;o++){var a=n[o];a.onLoad&&a.onLoad(r)}i.manager.itemEnd(t)}else if(0===this.status){for(console.warn(\"THREE.FileLoader: HTTP Status 0 received.\"),o=0,s=n.length;o<s;o++)(a=n[o]).onLoad&&a.onLoad(r);i.manager.itemEnd(t)}else{for(o=0,s=n.length;o<s;o++)(a=n[o]).onError&&a.onError(e);i.manager.itemEnd(t),i.manager.itemError(t)}},!1),h.addEventListener(\"progress\",function(e){for(var r=Ji[t],n=0,i=r.length;n<i;n++){var o=r[n];o.onProgress&&o.onProgress(e)}},!1),h.addEventListener(\"error\",function(e){var r=Ji[t];delete Ji[t];for(var n=0,o=r.length;n<o;n++){var s=r[n];s.onError&&s.onError(e)}i.manager.itemEnd(t),i.manager.itemError(t)},!1),void 0!==this.responseType&&(h.responseType=this.responseType),void 0!==this.withCredentials&&(h.withCredentials=this.withCredentials),h.overrideMimeType&&h.overrideMimeType(void 0!==this.mimeType?this.mimeType:\"text/plain\"),this.requestHeader)h.setRequestHeader(a,this.requestHeader[a]);h.send(null)}return i.manager.itemStart(t),h}Ji[t].push({onLoad:e,onProgress:r,onError:n})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(Rr.prototype,{load:function(t,e,r,n){function i(i){u.load(t[i],function(t){t=o._parser(t,!0),s[i]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(c+=1)&&(1===t.mipmapCount&&(a.minFilter=1006),a.format=t.format,a.needsUpdate=!0,e&&e(a))},r,n)}var o=this,s=[],a=new de;a.image=s;var u=new Ar(this.manager);if(u.setPath(this.path),u.setResponseType(\"arraybuffer\"),Array.isArray(t))for(var c=0,l=0,h=t.length;l<h;++l)i(l);else u.load(t,function(t){if((t=o._parser(t,!0)).isCubemap)for(var r=t.mipmaps.length/t.mipmapCount,n=0;n<r;n++){s[n]={mipmaps:[]};for(var i=0;i<t.mipmapCount;i++)s[n].mipmaps.push(t.mipmaps[n*t.mipmapCount+i]),s[n].format=t.format,s[n].width=t.width,s[n].height=t.height}else a.image.width=t.width,a.image.height=t.height,a.mipmaps=t.mipmaps;1===t.mipmapCount&&(a.minFilter=1006),a.format=t.format,a.needsUpdate=!0,e&&e(a)},r,n);return a},setPath:function(t){return this.path=t,this}}),Object.assign(kr.prototype,{load:function(t,e,r,n){var i=this,o=new h,s=new Ar(this.manager);return s.setResponseType(\"arraybuffer\"),s.load(t,function(t){(t=i._parser(t))&&(void 0!==t.image?o.image=t.image:void 0!==t.data&&(o.image.width=t.width,o.image.height=t.height,o.image.data=t.data),o.wrapS=void 0!==t.wrapS?t.wrapS:1001,o.wrapT=void 0!==t.wrapT?t.wrapT:1001,o.magFilter=void 0!==t.magFilter?t.magFilter:1006,o.minFilter=void 0!==t.minFilter?t.minFilter:1008,o.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(o.format=t.format),void 0!==t.type&&(o.type=t.type),void 0!==t.mipmaps&&(o.mipmaps=t.mipmaps),1===t.mipmapCount&&(o.minFilter=1006),o.needsUpdate=!0,e&&e(o,t))},r,n),o}}),Object.assign(Cr.prototype,{crossOrigin:\"Anonymous\",load:function(t,e,r,n){void 0===t&&(t=\"\"),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Xi.get(t);return void 0!==o?(i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o):((r=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"img\")).addEventListener(\"load\",function(){Xi.add(t,this),e&&e(this),i.manager.itemEnd(t)},!1),r.addEventListener(\"error\",function(e){n&&n(e),i.manager.itemEnd(t),i.manager.itemError(t)},!1),\"data:\"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(r.crossOrigin=this.crossOrigin),i.manager.itemStart(t),r.src=t,r)},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Lr.prototype,{crossOrigin:\"Anonymous\",load:function(t,e,r,n){function i(r){s.load(t[r],function(t){o.images[r]=t,6==++a&&(o.needsUpdate=!0,e&&e(o))},void 0,n)}var o=new Q,s=new Cr(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);var a=0;for(r=0;r<t.length;++r)i(r);return o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Pr.prototype,{crossOrigin:\"Anonymous\",load:function(t,e,r,n){var i=new a,o=new Cr(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(r){i.image=r,r=0<t.search(/\\.(jpg|jpeg)$/)||0===t.search(/^data:image\\/jpeg/),i.format=r?1022:1023,i.needsUpdate=!0,void 0!==e&&e(i)},r,n),i},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Dr.prototype,{getPoint:function(){return console.warn(\"THREE.Curve: .getPoint() not implemented.\"),null},getPointAt:function(t,e){return t=this.getUtoTmapping(t),this.getPoint(t,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],r=0;r<=t;r++)e.push(this.getPoint(r/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],r=0;r<=t;r++)e.push(this.getPointAt(r/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,r=[],n=this.getPoint(0),i=0;for(r.push(0),e=1;e<=t;e++){var o=this.getPoint(e/t);i+=o.distanceTo(n),r.push(i),n=o}return this.cacheArcLengths=r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var r=this.getLengths(),n=r.length;e=e||t*r[n-1];for(var i,o=0,s=n-1;o<=s;)if(0>(i=r[t=Math.floor(o+(s-o)/2)]-e))o=t+1;else{if(!(0<i)){s=t;break}s=t-1}return r[t=s]===e?t/(n-1):(t+(e-(o=r[t]))/(r[t+1]-o))/(n-1)},getTangent:function(t){var e=t-1e-4;return t+=1e-4,0>e&&(e=0),1<t&&(t=1),e=this.getPoint(e),this.getPoint(t).clone().sub(e).normalize()},getTangentAt:function(t){return t=this.getUtoTmapping(t),this.getTangent(t)},computeFrenetFrames:function(t,e){var r,i=new o,s=[],a=[],u=[],c=new o,l=new n;for(r=0;r<=t;r++){var h=r/t;s[r]=this.getTangentAt(h),s[r].normalize()}a[0]=new o,u[0]=new o,r=Number.MAX_VALUE,h=Math.abs(s[0].x);var f=Math.abs(s[0].y),d=Math.abs(s[0].z);for(h<=r&&(r=h,i.set(1,0,0)),f<=r&&(r=f,i.set(0,1,0)),d<=r&&i.set(0,0,1),c.crossVectors(s[0],i).normalize(),a[0].crossVectors(s[0],c),u[0].crossVectors(s[0],a[0]),r=1;r<=t;r++)a[r]=a[r-1].clone(),u[r]=u[r-1].clone(),c.crossVectors(s[r-1],s[r]),c.length()>Number.EPSILON&&(c.normalize(),i=Math.acos(Si.clamp(s[r-1].dot(s[r]),-1,1)),a[r].applyMatrix4(l.makeRotationAxis(c,i))),u[r].crossVectors(s[r],a[r]);if(!0===e)for(i=Math.acos(Si.clamp(a[0].dot(a[t]),-1,1)),i/=t,0<s[0].dot(c.crossVectors(a[0],a[t]))&&(i=-i),r=1;r<=t;r++)a[r].applyMatrix4(l.makeRotationAxis(s[r],i*r)),u[r].crossVectors(s[r],a[r]);return{tangents:s,normals:a,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:\"Curve\",generator:\"Curve.toJSON\"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),(Or.prototype=Object.create(Dr.prototype)).constructor=Or,Or.prototype.isEllipseCurve=!0,Or.prototype.getPoint=function(t,e){e=e||new r;for(var n=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;0>i;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=o?0:n),!0!==this.aClockwise||o||(i=i===n?-n:i-n),n=this.aStartAngle+t*i,t=this.aX+this.xRadius*Math.cos(n);var s=this.aY+this.yRadius*Math.sin(n);return 0!==this.aRotation&&(n=Math.cos(this.aRotation),i=Math.sin(this.aRotation),t=(o=t-this.aX)*n-(s-=this.aY)*i+this.aX,s=o*i+s*n+this.aY),e.set(t,s)},Or.prototype.copy=function(t){return Dr.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Or.prototype.toJSON=function(){var t=Dr.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Or.prototype.fromJSON=function(t){return Dr.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},(Nr.prototype=Object.create(Or.prototype)).constructor=Nr,Nr.prototype.isArcCurve=!0;var Zi=new o,Qi=new Ir,Ki=new Ir,to=new Ir;(Fr.prototype=Object.create(Dr.prototype)).constructor=Fr,Fr.prototype.isCatmullRomCurve3=!0,Fr.prototype.getPoint=function(t,e){e=e||new o;var r=this.points,n=r.length;t*=n-(this.closed?0:1);var i=Math.floor(t);if(t-=i,this.closed?i+=0<i?0:(Math.floor(Math.abs(i)/n)+1)*n:0===t&&i===n-1&&(i=n-2,t=1),this.closed||0<i)var s=r[(i-1)%n];else Zi.subVectors(r[0],r[1]).add(r[0]),s=Zi;var a=r[i%n],u=r[(i+1)%n];if(this.closed||i+2<n?r=r[(i+2)%n]:(Zi.subVectors(r[n-1],r[n-2]).add(r[n-1]),r=Zi),\"centripetal\"===this.curveType||\"chordal\"===this.curveType){var c=\"chordal\"===this.curveType?.5:.25;n=Math.pow(s.distanceToSquared(a),c),i=Math.pow(a.distanceToSquared(u),c),c=Math.pow(u.distanceToSquared(r),c),1e-4>i&&(i=1),1e-4>n&&(n=i),1e-4>c&&(c=i),Qi.initNonuniformCatmullRom(s.x,a.x,u.x,r.x,n,i,c),Ki.initNonuniformCatmullRom(s.y,a.y,u.y,r.y,n,i,c),to.initNonuniformCatmullRom(s.z,a.z,u.z,r.z,n,i,c)}else\"catmullrom\"===this.curveType&&(Qi.initCatmullRom(s.x,a.x,u.x,r.x,this.tension),Ki.initCatmullRom(s.y,a.y,u.y,r.y,this.tension),to.initCatmullRom(s.z,a.z,u.z,r.z,this.tension));return e.set(Qi.calc(t),Ki.calc(t),to.calc(t)),e},Fr.prototype.copy=function(t){Dr.prototype.copy.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Fr.prototype.toJSON=function(){var t=Dr.prototype.toJSON.call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Fr.prototype.fromJSON=function(t){Dr.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var n=t.points[e];this.points.push((new o).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},(Vr.prototype=Object.create(Dr.prototype)).constructor=Vr,Vr.prototype.isCubicBezierCurve=!0,Vr.prototype.getPoint=function(t,e){e=e||new r;var n=this.v0,i=this.v1,o=this.v2,s=this.v3;return e.set(jr(t,n.x,i.x,o.x,s.x),jr(t,n.y,i.y,o.y,s.y)),e},Vr.prototype.copy=function(t){return Dr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Vr.prototype.toJSON=function(){var t=Dr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Vr.prototype.fromJSON=function(t){return Dr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(Br.prototype=Object.create(Dr.prototype)).constructor=Br,Br.prototype.isCubicBezierCurve3=!0,Br.prototype.getPoint=function(t,e){e=e||new o;var r=this.v0,n=this.v1,i=this.v2,s=this.v3;return e.set(jr(t,r.x,n.x,i.x,s.x),jr(t,r.y,n.y,i.y,s.y),jr(t,r.z,n.z,i.z,s.z)),e},Br.prototype.copy=function(t){return Dr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Br.prototype.toJSON=function(){var t=Dr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Br.prototype.fromJSON=function(t){return Dr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(Hr.prototype=Object.create(Dr.prototype)).constructor=Hr,Hr.prototype.isLineCurve=!0,Hr.prototype.getPoint=function(t,e){return e=e||new r,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},Hr.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Hr.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Hr.prototype.copy=function(t){return Dr.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Hr.prototype.toJSON=function(){var t=Dr.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Hr.prototype.fromJSON=function(t){return Dr.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Gr.prototype=Object.create(Dr.prototype)).constructor=Gr,Gr.prototype.isLineCurve3=!0,Gr.prototype.getPoint=function(t,e){return e=e||new o,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},Gr.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Gr.prototype.copy=function(t){return Dr.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Gr.prototype.toJSON=function(){var t=Dr.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Gr.prototype.fromJSON=function(t){return Dr.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Wr.prototype=Object.create(Dr.prototype)).constructor=Wr,Wr.prototype.isQuadraticBezierCurve=!0,Wr.prototype.getPoint=function(t,e){e=e||new r;var n=this.v0,i=this.v1,o=this.v2;return e.set(Ur(t,n.x,i.x,o.x),Ur(t,n.y,i.y,o.y)),e},Wr.prototype.copy=function(t){return Dr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Wr.prototype.toJSON=function(){var t=Dr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Wr.prototype.fromJSON=function(t){return Dr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(qr.prototype=Object.create(Dr.prototype)).constructor=qr,qr.prototype.isQuadraticBezierCurve3=!0,qr.prototype.getPoint=function(t,e){e=e||new o;var r=this.v0,n=this.v1,i=this.v2;return e.set(Ur(t,r.x,n.x,i.x),Ur(t,r.y,n.y,i.y),Ur(t,r.z,n.z,i.z)),e},qr.prototype.copy=function(t){return Dr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},qr.prototype.toJSON=function(){var t=Dr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},qr.prototype.fromJSON=function(t){return Dr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Yr.prototype=Object.create(Dr.prototype)).constructor=Yr,Yr.prototype.isSplineCurve=!0,Yr.prototype.getPoint=function(t,e){e=e||new r;var n=this.points,i=(n.length-1)*t;i-=t=Math.floor(i);var o=n[0===t?t:t-1],s=n[t],a=n[t>n.length-2?n.length-1:t+1];return e.set(zr(i,o.x,s.x,a.x,(n=n[t>n.length-3?n.length-1:t+2]).x),zr(i,o.y,s.y,a.y,n.y)),e},Yr.prototype.copy=function(t){Dr.prototype.copy.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++)this.points.push(t.points[e].clone());return this},Yr.prototype.toJSON=function(){var t=Dr.prototype.toJSON.call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++)t.points.push(this.points[e].toArray());return t},Yr.prototype.fromJSON=function(t){Dr.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new r).fromArray(i))}return this};var eo=Object.freeze({ArcCurve:Nr,CatmullRomCurve3:Fr,CubicBezierCurve:Vr,CubicBezierCurve3:Br,EllipseCurve:Or,LineCurve:Hr,LineCurve3:Gr,QuadraticBezierCurve:Wr,QuadraticBezierCurve3:qr,SplineCurve:Yr});Xr.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Xr,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Hr(e,t))},getPoint:function(t){var e=t*this.getLength(),r=this.getCurveLengths();for(t=0;t<r.length;){if(r[t]>=e)return e=r[t]-e,r=(t=this.curves[t]).getLength(),t.getPointAt(0===r?0:1-e/r);t++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,r=0,n=this.curves.length;r<n;r++)e+=this.curves[r].getLength(),t.push(e);return this.cacheLengths=t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],r=0;r<=t;r++)e.push(this.getPoint(r/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,r=[],n=0,i=this.curves;n<i.length;n++){var o=i[n];o=o.getPoints(o&&o.isEllipseCurve?2*t:o&&o.isLineCurve?1:o&&o.isSplineCurve?t*o.points.length:t);for(var s=0;s<o.length;s++){var a=o[s];e&&e.equals(a)||(r.push(a),e=a)}}return this.autoClose&&1<r.length&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},copy:function(t){Dr.prototype.copy.call(this,t),this.curves=[];for(var e=0,r=t.curves.length;e<r;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=Dr.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,r=this.curves.length;e<r;e++)t.curves.push(this.curves[e].toJSON());return t},fromJSON:function(t){Dr.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var n=t.curves[e];this.curves.push((new eo[n.type]).fromJSON(n))}return this}}),$r.prototype=Object.assign(Object.create(Xr.prototype),{constructor:$r,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,r=t.length;e<r;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new Hr(this.currentPoint.clone(),new r(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,i){t=new Wr(this.currentPoint.clone(),new r(t,e),new r(n,i)),this.curves.push(t),this.currentPoint.set(n,i)},bezierCurveTo:function(t,e,n,i,o,s){t=new Vr(this.currentPoint.clone(),new r(t,e),new r(n,i),new r(o,s)),this.curves.push(t),this.currentPoint.set(o,s)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t);e=new Yr(e),this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,r,n,i,o){this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,r,n,i,o)},absarc:function(t,e,r,n,i,o){this.absellipse(t,e,r,r,n,i,o)},ellipse:function(t,e,r,n,i,o,s,a){this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,r,n,i,o,s,a)},absellipse:function(t,e,r,n,i,o,s,a){t=new Or(t,e,r,n,i,o,s,a),0<this.curves.length&&((e=t.getPoint(0)).equals(this.currentPoint)||this.lineTo(e.x,e.y)),this.curves.push(t),t=t.getPoint(1),this.currentPoint.copy(t)},copy:function(t){return Xr.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Xr.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Xr.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Jr.prototype=Object.assign(Object.create($r.prototype),{constructor:Jr,getPointsHoles:function(t){for(var e=[],r=0,n=this.holes.length;r<n;r++)e[r]=this.holes[r].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){$r.prototype.copy.call(this,t),this.holes=[];for(var e=0,r=t.holes.length;e<r;e++)this.holes.push(t.holes[e].clone());return this},toJSON:function(){var t=$r.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,r=this.holes.length;e<r;e++)t.holes.push(this.holes[e].toJSON());return t},fromJSON:function(t){$r.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var n=t.holes[e];this.holes.push((new $r).fromJSON(n))}return this}}),Zr.prototype=Object.assign(Object.create(w.prototype),{constructor:Zr,isLight:!0,copy:function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){return(t=w.prototype.toJSON.call(this,t)).object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Qr.prototype=Object.assign(Object.create(Zr.prototype),{constructor:Qr,isHemisphereLight:!0,copy:function(t){return Zr.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Kr.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),tn.prototype=Object.assign(Object.create(Kr.prototype),{constructor:tn,isSpotLightShadow:!0,update:function(t){var e=this.camera,r=2*Si.RAD2DEG*t.angle,n=this.mapSize.width/this.mapSize.height;t=t.distance||e.far,r===e.fov&&n===e.aspect&&t===e.far||(e.fov=r,e.aspect=n,e.far=t,e.updateProjectionMatrix())}}),en.prototype=Object.assign(Object.create(Zr.prototype),{constructor:en,isSpotLight:!0,copy:function(t){return Zr.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),rn.prototype=Object.assign(Object.create(Zr.prototype),{constructor:rn,isPointLight:!0,copy:function(t){return Zr.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),nn.prototype=Object.assign(Object.create(Kr.prototype),{constructor:nn}),on.prototype=Object.assign(Object.create(Zr.prototype),{constructor:on,isDirectionalLight:!0,copy:function(t){return Zr.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),sn.prototype=Object.assign(Object.create(Zr.prototype),{constructor:sn,isAmbientLight:!0}),an.prototype=Object.assign(Object.create(Zr.prototype),{constructor:an,isRectAreaLight:!0,copy:function(t){return Zr.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){return(t=Zr.prototype.toJSON.call(this,t)).object.width=this.width,t.object.height=this.height,t}}),un.prototype=Object.assign(Object.create(yn.prototype),{constructor:un,ValueTypeName:\"string\",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),cn.prototype=Object.assign(Object.create(yn.prototype),{constructor:cn,ValueTypeName:\"bool\",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(ln.prototype,{evaluate:function(t){var e=this.parameterPositions,r=this._cachedIndex,n=e[r],i=e[r-1];t:{e:{r:{n:if(!(t<n)){for(var o=r+2;;){if(void 0===n){if(t<i)break n;return this._cachedIndex=r=e.length,this.afterEnd_(r-1,t,i)}if(r===o)break;if(i=n,t<(n=e[++r]))break e}n=e.length;break r}if(t>=i)break t;for(t<(o=e[1])&&(r=2,i=o),o=r-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(r===o)break;if(n=i,t>=(i=e[--r-1]))break e}n=r,r=0}for(;r<n;)t<e[i=r+n>>>1]?n=i:r=i+1;if(n=e[r],void 0===(i=e[r-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return this._cachedIndex=r=e.length,this.afterEnd_(r-1,i,t)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var e=this.resultBuffer,r=this.sampleValues,n=this.valueSize;t*=n;for(var i=0;i!==n;++i)e[i]=r[t+i];return e},interpolate_:function(){throw Error(\"call to abstract method\")},intervalChanged_:function(){}}),Object.assign(ln.prototype,{beforeStart_:ln.prototype.copySampleValue_,afterEnd_:ln.prototype.copySampleValue_}),hn.prototype=Object.assign(Object.create(ln.prototype),{constructor:hn,interpolate_:function(t,e,r,n){var o=this.resultBuffer,s=this.sampleValues,a=this.valueSize;for(e=(r-e)/(n-e),r=(t*=a)+a;t!==r;t+=4)i.slerpFlat(o,0,s,t-a,s,t,e);return o}}),fn.prototype=Object.assign(Object.create(yn.prototype),{constructor:fn,ValueTypeName:\"quaternion\",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new hn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),dn.prototype=Object.assign(Object.create(yn.prototype),{constructor:dn,ValueTypeName:\"color\"}),pn.prototype=Object.assign(Object.create(yn.prototype),{constructor:pn,ValueTypeName:\"number\"}),mn.prototype=Object.assign(Object.create(ln.prototype),{constructor:mn,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,r){var n=this.parameterPositions,i=t-2,o=t+1,s=n[i],a=n[o];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:i=t,s=2*e-r;break;case 2402:s=e+n[i=n.length-2]-n[i+1];break;default:i=t,s=r}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:o=t,a=2*r-e;break;case 2402:o=1,a=r+n[1]-n[0];break;default:o=t-1,a=e}n=this.valueSize,this._weightPrev=(t=.5*(r-e))/(e-s),this._weightNext=t/(a-r),this._offsetPrev=i*n,this._offsetNext=o*n},interpolate_:function(t,e,r,n){var i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(t*=s)-s,u=this._offsetPrev,c=this._offsetNext,l=this._weightPrev,h=this._weightNext,f=(r-e)/(n-e);for(e=-l*(n=(r=f*f)*f)+2*l*r-l*f,l=(1+l)*n+(-1.5-2*l)*r+(-.5+l)*f+1,f=(-1-h)*n+(1.5+h)*r+.5*f,h=h*n-h*r,r=0;r!==s;++r)i[r]=e*o[u+r]+l*o[a+r]+f*o[t+r]+h*o[c+r];return i}}),gn.prototype=Object.assign(Object.create(ln.prototype),{constructor:gn,interpolate_:function(t,e,r,n){var i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(t*=s)-s;for(r=1-(e=(r-e)/(n-e)),n=0;n!==s;++n)i[n]=o[a+n]*r+o[t+n]*e;return i}}),vn.prototype=Object.assign(Object.create(ln.prototype),{constructor:vn,interpolate_:function(t){return this.copySampleValue_(t-1)}});var ro={arraySlice:function(t,e,r){return ro.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==r?r:t.length)):t.slice(e,r)},convertArray:function(t,e,r){return!t||!r&&t.constructor===e?t:\"number\"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,r=Array(e),n=0;n!==e;++n)r[n]=n;return r.sort(function(e,r){return t[e]-t[r]}),r},sortedArray:function(t,e,r){for(var n=t.length,i=new t.constructor(n),o=0,s=0;s!==n;++o)for(var a=r[o]*e,u=0;u!==e;++u)i[s++]=t[a+u];return i},flattenJSON:function(t,e,r,n){for(var i=1,o=t[0];void 0!==o&&void 0===o[n];)o=t[i++];if(void 0!==o){var s=o[n];if(void 0!==s)if(Array.isArray(s))do{void 0!==(s=o[n])&&(e.push(o.time),r.push.apply(r,s)),o=t[i++]}while(void 0!==o);else if(void 0!==s.toArray)do{void 0!==(s=o[n])&&(e.push(o.time),s.toArray(r,r.length)),o=t[i++]}while(void 0!==o);else do{void 0!==(s=o[n])&&(e.push(o.time),r.push(s)),o=t[i++]}while(void 0!==o)}}};Object.assign(yn,{parse:function(t){if(void 0===t.type)throw Error(\"THREE.KeyframeTrack: track type undefined, can not parse\");var e=yn._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var r=[],n=[];ro.flattenJSON(t.keys,r,n,\"value\"),t.times=r,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e=t.constructor;if(void 0!==e.toJSON)e=e.toJSON(t);else{e={name:t.name,times:ro.convertArray(t.times,Array),values:ro.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case\"scalar\":case\"double\":case\"float\":case\"number\":case\"integer\":return pn;case\"vector\":case\"vector2\":case\"vector3\":case\"vector4\":return wn;case\"color\":return dn;case\"quaternion\":return fn;case\"bool\":case\"boolean\":return cn;case\"string\":return un}throw Error(\"THREE.KeyframeTrack: Unsupported typeName: \"+t)}}),Object.assign(yn.prototype,{constructor:yn,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new vn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new gn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new mn(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){switch(t){case 2300:var e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){if(e=\"unsupported interpolation for \"+this.ValueTypeName+\" keyframe track named \"+this.name,void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw Error(e);this.setInterpolation(this.DefaultInterpolation)}console.warn(\"THREE.KeyframeTrack:\",e)}else this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,r=0,n=e.length;r!==n;++r)e[r]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,r=0,n=e.length;r!==n;++r)e[r]*=t;return this},trim:function(t,e){for(var r=this.times,n=r.length,i=0,o=n-1;i!==n&&r[i]<t;)++i;for(;-1!==o&&r[o]>e;)--o;return++o,0===i&&o===n||(i>=o&&(i=(o=Math.max(o,1))-1),t=this.getValueSize(),this.times=ro.arraySlice(r,i,o),this.values=ro.arraySlice(this.values,i*t,o*t)),this},validate:function(){var t=!0,e=this.getValueSize();0!=e-Math.floor(e)&&(console.error(\"THREE.KeyframeTrack: Invalid value size in track.\",this),t=!1);var r=this.times;e=this.values;var n=r.length;0===n&&(console.error(\"THREE.KeyframeTrack: Track is empty.\",this),t=!1);for(var i=null,o=0;o!==n;o++){var s=r[o];if(\"number\"==typeof s&&isNaN(s)){console.error(\"THREE.KeyframeTrack: Time is not a valid number.\",this,o,s),t=!1;break}if(null!==i&&i>s){console.error(\"THREE.KeyframeTrack: Out of order keys.\",this,o,s,i),t=!1;break}i=s}if(void 0!==e&&ro.isTypedArray(e))for(o=0,r=e.length;o!==r;++o)if(n=e[o],isNaN(n)){console.error(\"THREE.KeyframeTrack: Value is not a valid number.\",this,o,n),t=!1;break}return t},optimize:function(){for(var t=this.times,e=this.values,r=this.getValueSize(),n=2302===this.getInterpolation(),i=1,o=t.length-1,s=1;s<o;++s){var a=!1,u=t[s];if(u!==t[s+1]&&(1!==s||u!==u[0]))if(n)a=!0;else{var c=s*r,l=c-r,h=c+r;for(u=0;u!==r;++u){var f=e[c+u];if(f!==e[l+u]||f!==e[h+u]){a=!0;break}}}if(a){if(s!==i)for(t[i]=t[s],a=s*r,c=i*r,u=0;u!==r;++u)e[c+u]=e[a+u];++i}}if(0<o){for(t[i]=t[o],a=o*r,c=i*r,u=0;u!==r;++u)e[c+u]=e[a+u];++i}return i!==t.length&&(this.times=ro.arraySlice(t,0,i),this.values=ro.arraySlice(e,0,i*r)),this}}),wn.prototype=Object.assign(Object.create(yn.prototype),{constructor:wn,ValueTypeName:\"vector\"}),Object.assign(xn,{parse:function(t){for(var e=[],r=t.tracks,n=1/(t.fps||1),i=0,o=r.length;i!==o;++i)e.push(yn.parse(r[i]).scale(n));return new xn(t.name,t.duration,e)},toJSON:function(t){var e=[],r=t.tracks;t={name:t.name,duration:t.duration,tracks:e};for(var n=0,i=r.length;n!==i;++n)e.push(yn.toJSON(r[n]));return t},CreateFromMorphTargetSequence:function(t,e,r,n){for(var i=e.length,o=[],s=0;s<i;s++){var a=[],u=[];a.push((s+i-1)%i,s,(s+1)%i),u.push(0,1,0);var c=ro.getKeyframeOrder(a);a=ro.sortedArray(a,1,c),u=ro.sortedArray(u,1,c),n||0!==a[0]||(a.push(i),u.push(u[0])),o.push(new pn(\".morphTargetInfluences[\"+e[s].name+\"]\",a,u).scale(1/r))}return new xn(t,-1,o)},findByName:function(t,e){var r=t;for(Array.isArray(t)||(r=t.geometry&&t.geometry.animations||t.animations),t=0;t<r.length;t++)if(r[t].name===e)return r[t];return null},CreateClipsFromMorphTargetSequences:function(t,e,r){for(var n={},i=/^([\\w-]*?)([\\d]+)$/,o=0,s=t.length;o<s;o++){var a=t[o],u=a.name.match(i);if(u&&1<u.length){var c=u[1];(u=n[c])||(n[c]=u=[]),u.push(a)}}for(c in t=[],n)t.push(xn.CreateFromMorphTargetSequence(c,n[c],e,r));return t},parseAnimation:function(t,e){if(!t)return console.error(\"THREE.AnimationClip: No animation in JSONLoader data.\"),null;var r=function(t,e,r,n,i){if(0!==r.length){var o=[],s=[];ro.flattenJSON(r,o,s,n),0!==o.length&&i.push(new t(e,o,s))}},n=[],i=t.name||\"default\",o=t.length||-1,s=t.fps||30;t=t.hierarchy||[];for(var a=0;a<t.length;a++){var u=t[a].keys;if(u&&0!==u.length)if(u[0].morphTargets){o={};for(var c=0;c<u.length;c++)if(u[c].morphTargets)for(var l=0;l<u[c].morphTargets.length;l++)o[u[c].morphTargets[l]]=-1;for(var h in o){var f=[],d=[];for(l=0;l!==u[c].morphTargets.length;++l){var p=u[c];f.push(p.time),d.push(p.morphTarget===h?1:0)}n.push(new pn(\".morphTargetInfluence[\"+h+\"]\",f,d))}o=o.length*(s||1)}else r(wn,(c=\".bones[\"+e[a].name+\"]\")+\".position\",u,\"pos\",n),r(fn,c+\".quaternion\",u,\"rot\",n),r(wn,c+\".scale\",u,\"scl\",n)}return 0===n.length?null:new xn(i,o,n)}}),Object.assign(xn.prototype,{resetDuration:function(){for(var t=0,e=0,r=this.tracks.length;e!==r;++e){var n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}this.duration=t},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}}),Object.assign(bn.prototype,{load:function(t,e,r,n){var i=this;new Ar(i.manager).load(t,function(t){e(i.parse(JSON.parse(t)))},r,n)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return void 0===n[t]&&console.warn(\"THREE.MaterialLoader: Undefined texture\",t),n[t]}var n=this.textures,i=new Yi[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearCoat&&(i.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(i.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(i.uniforms=t.uniforms),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=e(t.map)),void 0!==t.alphaMap&&(i.alphaMap=e(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=e(t.normalMap)),void 0!==t.normalScale){var o=t.normalScale;!1===Array.isArray(o)&&(o=[o,o]),i.normalScale=(new r).fromArray(o)}return void 0!==t.displacementMap&&(i.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=e(t.specularMap)),void 0!==t.envMap&&(i.envMap=e(t.envMap)),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.lightMap&&(i.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=e(t.gradientMap)),i}}),Object.assign(_n.prototype,{load:function(t,e,r,n){var i=this;new Ar(i.manager).load(t,function(t){e(i.parse(JSON.parse(t)))},r,n)},parse:function(t){var e=new I,r=t.data.index;void 0!==r&&(r=new no[r.type](r.array),e.setIndex(new S(r,1)));var n=t.data.attributes;for(s in n){var i=n[s];r=new no[i.type](i.array),e.addAttribute(s,new S(r,i.itemSize,i.normalized))}var s=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==s)for(r=0,n=s.length;r!==n;++r)e.addGroup((i=s[r]).start,i.count,i.materialIndex);return void 0!==(t=t.data.boundingSphere)&&(s=new o,void 0!==t.center&&s.fromArray(t.center),e.boundingSphere=new d(s,t.radius)),e}});var no={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:\"undefined\"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Mn.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,r=0,n=e.length;r<n;r+=2){var i=e[r+1];if(e[r].test(t))return i}return null}},Object.assign(Mn.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,r){for(var n=[],i=0;i<t.length;++i)n[i]=this.createMaterial(t[i],e,r);return n},createMaterial:function(){var t={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},e=new g,r=new Pr,n=new bn;return function(i,o,s){function a(t,e,n,i,a){var u=Mn.Handlers.get(t=o+t);return null!==u?t=u.load(t):(r.setCrossOrigin(s),t=r.load(t)),void 0!==e&&(t.repeat.fromArray(e),1!==e[0]&&(t.wrapS=1e3),1!==e[1]&&(t.wrapT=1e3)),void 0!==n&&t.offset.fromArray(n),void 0!==i&&(\"repeat\"===i[0]&&(t.wrapS=1e3),\"mirror\"===i[0]&&(t.wrapS=1002),\"repeat\"===i[1]&&(t.wrapT=1e3),\"mirror\"===i[1]&&(t.wrapT=1002)),void 0!==a&&(t.anisotropy=a),e=Si.generateUUID(),c[e]=t,e}var u,c={},l={uuid:Si.generateUUID(),type:\"MeshLambertMaterial\"};for(u in i){var h=i[u];switch(u){case\"DbgColor\":case\"DbgIndex\":case\"opticalDensity\":case\"illumination\":break;case\"DbgName\":l.name=h;break;case\"blending\":l.blending=t[h];break;case\"colorAmbient\":case\"mapAmbient\":console.warn(\"THREE.Loader.createMaterial:\",u,\"is no longer supported.\");break;case\"colorDiffuse\":l.color=e.fromArray(h).getHex();break;case\"colorSpecular\":l.specular=e.fromArray(h).getHex();break;case\"colorEmissive\":l.emissive=e.fromArray(h).getHex();break;case\"specularCoef\":l.shininess=h;break;case\"shading\":\"basic\"===h.toLowerCase()&&(l.type=\"MeshBasicMaterial\"),\"phong\"===h.toLowerCase()&&(l.type=\"MeshPhongMaterial\"),\"standard\"===h.toLowerCase()&&(l.type=\"MeshStandardMaterial\");break;case\"mapDiffuse\":l.map=a(h,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case\"mapDiffuseRepeat\":case\"mapDiffuseOffset\":case\"mapDiffuseWrap\":case\"mapDiffuseAnisotropy\":break;case\"mapEmissive\":l.emissiveMap=a(h,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case\"mapEmissiveRepeat\":case\"mapEmissiveOffset\":case\"mapEmissiveWrap\":case\"mapEmissiveAnisotropy\":break;case\"mapLight\":l.lightMap=a(h,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case\"mapLightRepeat\":case\"mapLightOffset\":case\"mapLightWrap\":case\"mapLightAnisotropy\":break;case\"mapAO\":l.aoMap=a(h,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case\"mapAORepeat\":case\"mapAOOffset\":case\"mapAOWrap\":case\"mapAOAnisotropy\":break;case\"mapBump\":l.bumpMap=a(h,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case\"mapBumpScale\":l.bumpScale=h;break;case\"mapBumpRepeat\":case\"mapBumpOffset\":case\"mapBumpWrap\":case\"mapBumpAnisotropy\":break;case\"mapNormal\":l.normalMap=a(h,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case\"mapNormalFactor\":l.normalScale=h;break;case\"mapNormalRepeat\":case\"mapNormalOffset\":case\"mapNormalWrap\":case\"mapNormalAnisotropy\":break;case\"mapSpecular\":l.specularMap=a(h,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case\"mapSpecularRepeat\":case\"mapSpecularOffset\":case\"mapSpecularWrap\":case\"mapSpecularAnisotropy\":break;case\"mapMetalness\":l.metalnessMap=a(h,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case\"mapMetalnessRepeat\":case\"mapMetalnessOffset\":case\"mapMetalnessWrap\":case\"mapMetalnessAnisotropy\":break;case\"mapRoughness\":l.roughnessMap=a(h,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case\"mapRoughnessRepeat\":case\"mapRoughnessOffset\":case\"mapRoughnessWrap\":case\"mapRoughnessAnisotropy\":break;case\"mapAlpha\":l.alphaMap=a(h,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case\"mapAlphaRepeat\":case\"mapAlphaOffset\":case\"mapAlphaWrap\":case\"mapAlphaAnisotropy\":break;case\"flipSided\":l.side=1;break;case\"doubleSided\":l.side=2;break;case\"transparency\":console.warn(\"THREE.Loader.createMaterial: transparency has been renamed to opacity\"),l.opacity=h;break;case\"depthTest\":case\"depthWrite\":case\"colorWrite\":case\"opacity\":case\"reflectivity\":case\"transparent\":case\"visible\":case\"wireframe\":l[u]=h;break;case\"vertexColors\":!0===h&&(l.vertexColors=2),\"face\"===h&&(l.vertexColors=1);break;default:console.error(\"THREE.Loader.createMaterial: Unsupported\",u,h)}}return\"MeshBasicMaterial\"===l.type&&delete l.emissive,\"MeshPhongMaterial\"!==l.type&&delete l.specular,1>l.opacity&&(l.transparent=!0),n.setTextures(c),n.parse(l)}}()});var io={decodeText:function(t){if(\"undefined\"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e=\"\",r=0,n=t.length;r<n;r++)e+=String.fromCharCode(t[r]);return decodeURIComponent(escape(e))},extractUrlBase:function(t){var e=t.lastIndexOf(\"/\");return-1===e?\"./\":t.substr(0,e+1)}};Object.assign(Sn.prototype,{load:function(t,e,r,n){var i=this,o=this.texturePath&&\"string\"==typeof this.texturePath?this.texturePath:io.extractUrlBase(t),s=new Ar(this.manager);s.setWithCredentials(this.withCredentials),s.load(t,function(r){var n=(r=JSON.parse(r)).metadata;void 0===n||void 0===(n=n.type)||\"object\"!==n.toLowerCase()?(r=i.parse(r,o),e(r.geometry,r.materials)):console.error(\"THREE.JSONLoader: \"+t+\" should be loaded with THREE.ObjectLoader instead.\")},r,n)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){void 0!==t.data&&(t=t.data),t.scale=void 0!==t.scale?1/t.scale:1;var n,i,s,a=new M,c=t,l=c.faces,h=c.vertices,f=c.normals,d=c.colors,p=c.scale,m=0;if(void 0!==c.uvs){for(n=0;n<c.uvs.length;n++)c.uvs[n].length&&m++;for(n=0;n<m;n++)a.faceVertexUvs[n]=[]}var v=0;for(s=h.length;v<s;)(n=new o).x=h[v++]*p,n.y=h[v++]*p,n.z=h[v++]*p,a.vertices.push(n);for(v=0,s=l.length;v<s;){var y=1&(h=l[v++]),w=2&h;n=8&h;var x=16&h,b=32&h;if(p=64&h,h&=128,y){(y=new _).a=l[v],y.b=l[v+1],y.c=l[v+3];var S=new _;if(S.a=l[v+1],S.b=l[v+2],S.c=l[v+3],v+=4,w&&(w=l[v++],y.materialIndex=w,S.materialIndex=w),w=a.faces.length,n)for(n=0;n<m;n++){var E=c.uvs[n];for(a.faceVertexUvs[n][w]=[],a.faceVertexUvs[n][w+1]=[],i=0;4>i;i++){var T=l[v++],A=E[2*T];A=new r(A,T=E[2*T+1]),2!==i&&a.faceVertexUvs[n][w].push(A),0!==i&&a.faceVertexUvs[n][w+1].push(A)}}if(x&&(x=3*l[v++],y.normal.set(f[x++],f[x++],f[x]),S.normal.copy(y.normal)),b)for(n=0;4>n;n++)x=3*l[v++],b=new o(f[x++],f[x++],f[x]),2!==n&&y.vertexNormals.push(b),0!==n&&S.vertexNormals.push(b);if(p&&(p=l[v++],y.color.setHex(p=d[p]),S.color.setHex(p)),h)for(n=0;4>n;n++)p=d[p=l[v++]],2!==n&&y.vertexColors.push(new g(p)),0!==n&&S.vertexColors.push(new g(p));a.faces.push(y),a.faces.push(S)}else{if((y=new _).a=l[v++],y.b=l[v++],y.c=l[v++],w&&(w=l[v++],y.materialIndex=w),w=a.faces.length,n)for(n=0;n<m;n++)for(E=c.uvs[n],a.faceVertexUvs[n][w]=[],i=0;3>i;i++)A=new r(A=E[2*(T=l[v++])],T=E[2*T+1]),a.faceVertexUvs[n][w].push(A);if(x&&(x=3*l[v++],y.normal.set(f[x++],f[x++],f[x])),b)for(n=0;3>n;n++)x=3*l[v++],b=new o(f[x++],f[x++],f[x]),y.vertexNormals.push(b);if(p&&(p=l[v++],y.color.setHex(d[p])),h)for(n=0;3>n;n++)p=l[v++],y.vertexColors.push(new g(d[p]));a.faces.push(y)}}if(v=void 0!==(c=t).influencesPerVertex?c.influencesPerVertex:2,c.skinWeights)for(s=0,l=c.skinWeights.length;s<l;s+=v)a.skinWeights.push(new u(c.skinWeights[s],1<v?c.skinWeights[s+1]:0,2<v?c.skinWeights[s+2]:0,3<v?c.skinWeights[s+3]:0));if(c.skinIndices)for(s=0,l=c.skinIndices.length;s<l;s+=v)a.skinIndices.push(new u(c.skinIndices[s],1<v?c.skinIndices[s+1]:0,2<v?c.skinIndices[s+2]:0,3<v?c.skinIndices[s+3]:0));if(a.bones=c.bones,a.bones&&0<a.bones.length&&(a.skinWeights.length!==a.skinIndices.length||a.skinIndices.length!==a.vertices.length)&&console.warn(\"When skinning, number of vertices (\"+a.vertices.length+\"), skinIndices (\"+a.skinIndices.length+\"), and skinWeights (\"+a.skinWeights.length+\") should match.\"),l=(s=t).scale,void 0!==s.morphTargets)for(c=0,v=s.morphTargets.length;c<v;c++)for(a.morphTargets[c]={},a.morphTargets[c].name=s.morphTargets[c].name,a.morphTargets[c].vertices=[],f=a.morphTargets[c].vertices,m=0,h=(d=s.morphTargets[c].vertices).length;m<h;m+=3)(p=new o).x=d[m]*l,p.y=d[m+1]*l,p.z=d[m+2]*l,f.push(p);if(void 0!==s.morphColors&&0<s.morphColors.length)for(console.warn('THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.'),s=s.morphColors[0].colors,c=0,v=(l=a.faces).length;c<v;c++)l[c].color.fromArray(s,3*c);for(c=[],v=[],void 0!==(s=t).animation&&v.push(s.animation),void 0!==s.animations&&(s.animations.length?v=v.concat(s.animations):v.push(s.animations)),s=0;s<v.length;s++)(l=xn.parseAnimation(v[s],a.bones))&&c.push(l);return a.morphTargets&&(v=xn.CreateClipsFromMorphTargetSequences(a.morphTargets,10),c=c.concat(v)),0<c.length&&(a.animations=c),a.computeFaceNormals(),a.computeBoundingSphere(),void 0===t.materials||0===t.materials.length?{geometry:a}:{geometry:a,materials:t=Mn.prototype.initMaterials(t.materials,e,this.crossOrigin)}}}),Object.assign(En.prototype,{load:function(t,e,r,n){\"\"===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf(\"/\")+1));var i=this;new Ar(i.manager).load(t,function(r){var o=null;try{o=JSON.parse(r)}catch(e){return void 0!==n&&n(e),void console.error(\"THREE:ObjectLoader: Can't parse \"+t+\".\",e.message)}void 0===(r=o.metadata)||void 0===r.type||\"geometry\"===r.type.toLowerCase()?console.error(\"THREE.ObjectLoader: Can't load \"+t+\". Use THREE.JSONLoader instead.\"):i.parse(o,e)},r,n)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var r=this.parseShape(t.shapes);r=this.parseGeometries(t.geometries,r);var n=this.parseImages(t.images,function(){void 0!==e&&e(i)});n=this.parseTextures(t.textures,n),n=this.parseMaterials(t.materials,n);var i=this.parseObject(t.object,r,n);return t.animations&&(i.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0===e||e(i),i},parseShape:function(t){var e={};if(void 0!==t)for(var r=0,n=t.length;r<n;r++){var i=(new Jr).fromJSON(t[r]);e[i.uuid]=i}return e},parseGeometries:function(t,e){var r={};if(void 0!==t)for(var n=new Sn,i=new _n,o=0,s=t.length;o<s;o++){var a=t[o];switch(a.type){case\"PlaneGeometry\":case\"PlaneBufferGeometry\":var u=new qi[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case\"BoxGeometry\":case\"BoxBufferGeometry\":case\"CubeGeometry\":u=new qi[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case\"CircleGeometry\":case\"CircleBufferGeometry\":u=new qi[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case\"CylinderGeometry\":case\"CylinderBufferGeometry\":u=new qi[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case\"ConeGeometry\":case\"ConeBufferGeometry\":u=new qi[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case\"SphereGeometry\":case\"SphereBufferGeometry\":u=new qi[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case\"DodecahedronGeometry\":case\"DodecahedronBufferGeometry\":case\"IcosahedronGeometry\":case\"IcosahedronBufferGeometry\":case\"OctahedronGeometry\":case\"OctahedronBufferGeometry\":case\"TetrahedronGeometry\":case\"TetrahedronBufferGeometry\":u=new qi[a.type](a.radius,a.detail);break;case\"RingGeometry\":case\"RingBufferGeometry\":u=new qi[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case\"TorusGeometry\":case\"TorusBufferGeometry\":u=new qi[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case\"TorusKnotGeometry\":case\"TorusKnotBufferGeometry\":u=new qi[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case\"LatheGeometry\":case\"LatheBufferGeometry\":u=new qi[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case\"PolyhedronGeometry\":case\"PolyhedronBufferGeometry\":u=new qi[a.type](a.vertices,a.indices,a.radius,a.details);break;case\"ShapeGeometry\":case\"ShapeBufferGeometry\":u=[];for(var c=0,l=a.shapes.length;c<l;c++)u.push(e[a.shapes[c]]);u=new qi[a.type](u,a.curveSegments);break;case\"BufferGeometry\":u=i.parse(a);break;case\"Geometry\":u=n.parse(a,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type \"'+a.type+'\"');continue}u.uuid=a.uuid,void 0!==a.name&&(u.name=a.name),r[a.uuid]=u}return r},parseMaterials:function(t,e){var r={};if(void 0!==t){var n=new bn;n.setTextures(e),e=0;for(var i=t.length;e<i;e++){var o=t[e];if(\"MultiMaterial\"===o.type){for(var s=[],a=0;a<o.materials.length;a++)s.push(n.parse(o.materials[a]));r[o.uuid]=s}else r[o.uuid]=n.parse(o)}}return r},parseAnimations:function(t){for(var e=[],r=0;r<t.length;r++){var n=xn.parse(t[r]);e.push(n)}return e},parseImages:function(t,e){function r(t){return n.manager.itemStart(t),o.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemEnd(t),n.manager.itemError(t)})}var n=this,i={};if(void 0!==t&&0<t.length){var o=new Cr(e=new Tr(e));o.setCrossOrigin(this.crossOrigin),e=0;for(var s=t.length;e<s;e++){var a=t[e],u=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(a.url)?a.url:n.texturePath+a.url;i[a.uuid]=r(u)}}return i},parseTextures:function(t,e){function r(t,e){return\"number\"==typeof t?t:(console.warn(\"THREE.ObjectLoader.parseTexture: Constant should be in numeric form.\",t),e[t])}var n={};if(void 0!==t)for(var i=0,o=t.length;i<o;i++){var s=t[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No \"image\" specified for',s.uuid),void 0===e[s.image]&&console.warn(\"THREE.ObjectLoader: Undefined image\",s.image);var u=new a(e[s.image]);u.needsUpdate=!0,u.uuid=s.uuid,void 0!==s.name&&(u.name=s.name),void 0!==s.mapping&&(u.mapping=r(s.mapping,oo)),void 0!==s.offset&&u.offset.fromArray(s.offset),void 0!==s.repeat&&u.repeat.fromArray(s.repeat),void 0!==s.center&&u.center.fromArray(s.center),void 0!==s.rotation&&(u.rotation=s.rotation),void 0!==s.wrap&&(u.wrapS=r(s.wrap[0],so),u.wrapT=r(s.wrap[1],so)),void 0!==s.format&&(u.format=s.format),void 0!==s.minFilter&&(u.minFilter=r(s.minFilter,ao)),void 0!==s.magFilter&&(u.magFilter=r(s.magFilter,ao)),void 0!==s.anisotropy&&(u.anisotropy=s.anisotropy),void 0!==s.flipY&&(u.flipY=s.flipY),n[s.uuid]=u}return n},parseObject:function(t,e,r){function n(t){return void 0===e[t]&&console.warn(\"THREE.ObjectLoader: Undefined geometry\",t),e[t]}function i(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],n=0,i=t.length;n<i;n++){var o=t[n];void 0===r[o]&&console.warn(\"THREE.ObjectLoader: Undefined material\",o),e.push(r[o])}return e}return void 0===r[t]&&console.warn(\"THREE.ObjectLoader: Undefined material\",t),r[t]}}switch(t.type){case\"Scene\":var o=new Qt;void 0!==t.background&&Number.isInteger(t.background)&&(o.background=new g(t.background)),void 0!==t.fog&&(\"Fog\"===t.fog.type?o.fog=new Zt(t.fog.color,t.fog.near,t.fog.far):\"FogExp2\"===t.fog.type&&(o.fog=new Jt(t.fog.color,t.fog.density)));break;case\"PerspectiveCamera\":o=new qt(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case\"OrthographicCamera\":o=new b(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case\"AmbientLight\":o=new sn(t.color,t.intensity);break;case\"DirectionalLight\":o=new on(t.color,t.intensity);break;case\"PointLight\":o=new rn(t.color,t.intensity,t.distance,t.decay);break;case\"RectAreaLight\":o=new an(t.color,t.intensity,t.width,t.height);break;case\"SpotLight\":o=new en(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case\"HemisphereLight\":o=new Qr(t.color,t.groundColor,t.intensity);break;case\"SkinnedMesh\":console.warn(\"THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.\");case\"Mesh\":o=n(t.geometry);var s=i(t.material);o=o.bones&&0<o.bones.length?new ie(o,s):new Y(o,s);break;case\"LOD\":o=new ee;break;case\"Line\":o=new se(n(t.geometry),i(t.material),t.mode);break;case\"LineLoop\":o=new ue(n(t.geometry),i(t.material));break;case\"LineSegments\":o=new ae(n(t.geometry),i(t.material));break;case\"PointCloud\":case\"Points\":o=new le(n(t.geometry),i(t.material));break;case\"Sprite\":o=new te(i(t.material));break;case\"Group\":o=new he;break;default:o=new w}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(o.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(o.matrixAutoUpdate=t.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.frustumCulled&&(o.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(o.renderOrder=t.renderOrder),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.children){s=t.children;for(var a=0;a<s.length;a++)o.add(this.parseObject(s[a],e,r))}if(\"LOD\"===t.type)for(t=t.levels,s=0;s<t.length;s++){var u=o.getObjectByProperty(\"uuid\",(a=t[s]).object);void 0!==u&&o.addLevel(u,a.distance)}return o}});var oo={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},so={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},ao={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};Tn.prototype={constructor:Tn,setOptions:function(t){return this.options=t,this},load:function(t,e,r,n){void 0===t&&(t=\"\"),void 0!==this.path&&(t=this.path+t);var i=this,o=Xi.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;fetch(t).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,i.options)}).then(function(r){Xi.add(t,r),e&&e(r),i.manager.itemEnd(t)}).catch(function(e){n&&n(e),i.manager.itemEnd(t),i.manager.itemError(t)})},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(An.prototype,{moveTo:function(t,e){this.currentPath=new $r,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,r,n){this.currentPath.quadraticCurveTo(t,e,r,n)},bezierCurveTo:function(t,e,r,n,i,o){this.currentPath.bezierCurveTo(t,e,r,n,i,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function r(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r],o=new Jr;o.curves=i.curves,e.push(o)}return e}function n(t,e){for(var r=e.length,n=!1,i=r-1,o=0;o<r;i=o++){var s=e[i],a=e[o],u=a.x-s.x,c=a.y-s.y;if(Math.abs(c)>Number.EPSILON){if(0>c&&(s=e[o],u=-u,a=e[i],c=-c),!(t.y<s.y||t.y>a.y))if(t.y===s.y){if(t.x===s.x)return!0}else{if(0==(i=c*(t.x-s.x)-u*(t.y-s.y)))return!0;0>i||(n=!n)}}else if(t.y===s.y&&(a.x<=t.x&&t.x<=s.x||s.x<=t.x&&t.x<=a.x))return!0}return n}var i=Gi.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return r(o);if(e=[],1===o.length){var s=o[0],a=new Jr;return a.curves=s.curves,e.push(a),e}var u=!i(o[0].getPoints());u=t?!u:u,a=[];var c=[],l=[],h=0;c[h]=void 0,l[h]=[];for(var f=0,d=o.length;f<d;f++){var p=(s=o[f]).getPoints(),m=i(p);(m=t?!m:m)?(!u&&c[h]&&h++,c[h]={s:new Jr,p:p},c[h].s.curves=s.curves,u&&h++,l[h]=[]):l[h].push({h:s,p:p[0]})}if(!c[0])return r(o);if(1<c.length){for(f=!1,t=[],i=0,o=c.length;i<o;i++)a[i]=[];for(i=0,o=c.length;i<o;i++)for(s=l[i],m=0;m<s.length;m++){for(u=s[m],h=!0,p=0;p<c.length;p++)n(u.p,c[p].p)&&(i!==p&&t.push({froms:i,tos:p,hole:m}),h?(h=!1,a[p].push(u)):f=!0);h&&a[i].push(u)}0<t.length&&(f||(l=a))}for(f=0,i=c.length;f<i;f++)for(e.push(a=c[f].s),o=0,s=(t=l[f]).length;o<s;o++)a.holes.push(t[o].h);return e}}),Object.assign(Rn.prototype,{isFont:!0,generateShapes:function(t,e,r){void 0===e&&(e=100),r=[];var n=e;e=this.data;var i=String(t).split(\"\"),o=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*(n/=e.resolution);t=[];for(var s=0,a=0,u=0;u<i.length;u++){var c=i[u];if(\"\\n\"===c)s=0,a-=o;else{var l=n,h=s,f=a;if(c=e.glyphs[c]||e.glyphs[\"?\"]){var d=new An;if(c.o)for(var p=c._cachedOutline||(c._cachedOutline=c.o.split(\" \")),m=0,g=p.length;m<g;)switch(p[m++]){case\"m\":var v=p[m++]*l+h,y=p[m++]*l+f;d.moveTo(v,y);break;case\"l\":v=p[m++]*l+h,y=p[m++]*l+f,d.lineTo(v,y);break;case\"q\":var w=p[m++]*l+h,x=p[m++]*l+f,b=p[m++]*l+h,_=p[m++]*l+f;d.quadraticCurveTo(b,_,w,x);break;case\"b\":w=p[m++]*l+h,x=p[m++]*l+f,b=p[m++]*l+h,_=p[m++]*l+f,v=p[m++]*l+h,y=p[m++]*l+f,d.bezierCurveTo(b,_,v,y,w,x)}l={offsetX:c.ha*l,path:d}}else l=void 0;s+=l.offsetX,t.push(l.path)}}for(e=0,i=t.length;e<i;e++)Array.prototype.push.apply(r,t[e].toShapes());return r}}),Object.assign(kn.prototype,{load:function(t,e,r,n){var i=this,o=new Ar(this.manager);o.setPath(this.path),o.load(t,function(t){try{var r=JSON.parse(t)}catch(e){console.warn(\"THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.\"),r=JSON.parse(t.substring(65,t.length-2))}t=i.parse(r),e&&e(t)},r,n)},parse:function(t){return new Rn(t)},setPath:function(t){return this.path=t,this}});var uo,co,lo,ho={getContext:function(){return void 0===uo&&(uo=new(window.AudioContext||window.webkitAudioContext)),uo},setContext:function(t){uo=t}};Object.assign(Cn.prototype,{load:function(t,e,r,n){var i=new Ar(this.manager);i.setResponseType(\"arraybuffer\"),i.load(t,function(t){ho.getContext().decodeAudioData(t,function(t){e(t)})},r,n)}}),Object.assign(Ln.prototype,{update:function(){var t,e,r,i,o,s,a,u,c=new n,l=new n;return function(n){if(t!==this||e!==n.focus||r!==n.fov||i!==n.aspect*this.aspect||o!==n.near||s!==n.far||a!==n.zoom||u!==this.eyeSep){t=this,e=n.focus,r=n.fov,i=n.aspect*this.aspect,o=n.near,s=n.far,a=n.zoom;var h=n.projectionMatrix.clone(),f=(u=this.eyeSep/2)*o/e,d=o*Math.tan(Si.DEG2RAD*r*.5)/a;l.elements[12]=-u,c.elements[12]=u;var p=-d*i+f,m=d*i+f;h.elements[0]=2*o/(m-p),h.elements[8]=(m+p)/(m-p),this.cameraL.projectionMatrix.copy(h),h.elements[0]=2*o/((m=d*i-f)-(p=-d*i-f)),h.elements[8]=(m+p)/(m-p),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(n.matrixWorld).multiply(l),this.cameraR.matrixWorld.copy(n.matrixWorld).multiply(c)}}()}),(Pn.prototype=Object.create(w.prototype)).constructor=Pn,Dn.prototype=Object.assign(Object.create(w.prototype),{constructor:Dn,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01)},updateMatrixWorld:function(){var t=new o,e=new i,r=new o,n=new o;return function(i){w.prototype.updateMatrixWorld.call(this,i),i=this.context.listener;var o=this.up;this.matrixWorld.decompose(t,e,r),n.set(0,0,-1).applyQuaternion(e),i.positionX?(i.positionX.setValueAtTime(t.x,this.context.currentTime),i.positionY.setValueAtTime(t.y,this.context.currentTime),i.positionZ.setValueAtTime(t.z,this.context.currentTime),i.forwardX.setValueAtTime(n.x,this.context.currentTime),i.forwardY.setValueAtTime(n.y,this.context.currentTime),i.forwardZ.setValueAtTime(n.z,this.context.currentTime),i.upX.setValueAtTime(o.x,this.context.currentTime),i.upY.setValueAtTime(o.y,this.context.currentTime),i.upZ.setValueAtTime(o.z,this.context.currentTime)):(i.setPosition(t.x,t.y,t.z),i.setOrientation(n.x,n.y,n.z,o.x,o.y,o.z))}}()}),On.prototype=Object.assign(Object.create(w.prototype),{constructor:On,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType=\"audioNode\",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType=\"buffer\",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)console.warn(\"THREE.Audio: Audio is already playing.\");else{if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.connect()}console.warn(\"THREE.Audio: this Audio has no playback control.\")}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this;console.warn(\"THREE.Audio: this Audio has no playback control.\")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn(\"THREE.Audio: this Audio has no playback control.\"),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn(\"THREE.Audio: this Audio has no playback control.\")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}),Nn.prototype=Object.assign(Object.create(On.prototype),{constructor:Nn,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new o;return function(e){w.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(In.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),r=0;r<e.length;r++)t+=e[r];return t/e.length}}),Object.assign(Fn.prototype,{accumulate:function(t,e){var r=this.buffer,n=this.valueSize;t=t*n+n;var i=this.cumulativeWeight;if(0===i){for(i=0;i!==n;++i)r[t+i]=r[i];i=e}else this._mixBufferRegion(r,t,0,e/(i+=e),n);this.cumulativeWeight=i},apply:function(t){var e=this.valueSize,r=this.buffer;t=t*e+e;var n=this.cumulativeWeight,i=this.binding;this.cumulativeWeight=0,1>n&&this._mixBufferRegion(r,t,3*e,1-n,e),n=e;for(var o=e+e;n!==o;++n)if(r[n]!==r[n+e]){i.setValue(r,t);break}},saveOriginalState:function(){var t=this.buffer,e=this.valueSize,r=3*e;this.binding.getValue(t,r);for(var n=e;n!==r;++n)t[n]=t[r+n%e];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(t,e,r,n,i){if(.5<=n)for(n=0;n!==i;++n)t[e+n]=t[r+n]},_slerp:function(t,e,r,n){i.slerpFlat(t,e,t,e,t,r,n)},_lerp:function(t,e,r,n,i){for(var o=1-n,s=0;s!==i;++s){var a=e+s;t[a]=t[a]*o+t[r+s]*n}}}),Object.assign(zn.prototype,{getValue:function(t,e){this.bind();var r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].unbind()}}),Object.assign(Un,{Composite:zn,create:function(t,e,r){return t&&t.isAnimationObjectGroup?new Un.Composite(t,e,r):new Un(t,e,r)},sanitizeNodeName:function(){var t=/[\\[\\]\\.:\\/]/g;return function(e){return e.replace(/\\s/g,\"_\").replace(t,\"\")}}(),parseTrackName:function(){var t=\"[^\"+\"\\\\[\\\\]\\\\.:\\\\/\".replace(\"\\\\.\",\"\")+\"]\",e=/((?:WC+[\\/:])*)/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\");t=/(WCOD+)?/.source.replace(\"WCOD\",t);var r=/(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),n=/\\.(WC+)(?:\\[(.+)\\])?/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),i=new RegExp(\"^\"+e+t+r+n+\"$\"),o=[\"material\",\"materials\",\"bones\"];return function(t){var e=i.exec(t);if(!e)throw Error(\"PropertyBinding: Cannot parse trackName: \"+t);var r=(e={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]}).nodeName&&e.nodeName.lastIndexOf(\".\");if(void 0!==r&&-1!==r){var n=e.nodeName.substring(r+1);-1!==o.indexOf(n)&&(e.nodeName=e.nodeName.substring(0,r),e.objectName=n)}if(null===e.propertyName||0===e.propertyName.length)throw Error(\"PropertyBinding: can not parse propertyName from trackName: \"+t);return e}}(),findNode:function(t,e){if(!e||\"\"===e||\"root\"===e||\".\"===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var r=t.skeleton.getBoneByName(e);if(void 0!==r)return r}if(t.children){var n=function(t){for(var r=0;r<t.length;r++){var i=t[r];if(i.name===e||i.uuid===e||(i=n(i.children)))return i}return null};if(t=n(t.children))return t}return null}}),Object.assign(Un.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)t[e++]=r[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=t[e++]},function(t,e){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,r=e.objectName,n=e.propertyName,i=e.propertyIndex;if(t||(this.node=t=Un.findNode(this.rootNode,e.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=e.objectIndex;switch(r){case\"materials\":if(!t.material)return void console.error(\"THREE.PropertyBinding: Can not bind to material as node does not have a material.\",this);if(!t.material.materials)return void console.error(\"THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.\",this);t=t.material.materials;break;case\"bones\":if(!t.skeleton)return void console.error(\"THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.\",this);for(t=t.skeleton.bones,r=0;r<t.length;r++)if(t[r].name===o){o=r;break}break;default:if(void 0===t[r])return void console.error(\"THREE.PropertyBinding: Can not bind to objectName of node undefined.\",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error(\"THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.\",this,t);t=t[o]}}if(void 0===(o=t[n]))console.error(\"THREE.PropertyBinding: Trying to update property for track: \"+e.nodeName+\".\"+n+\" but it wasn't found.\",t);else{if(e=this.Versioning.None,void 0!==t.needsUpdate?(e=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(e=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t),r=this.BindingType.Direct,void 0!==i){if(\"morphTargetInfluences\"===n){if(!t.geometry)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.\",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.\",this);for(r=0;r<this.node.geometry.morphAttributes.position.length;r++)if(t.geometry.morphAttributes.position[r].name===i){i=r;break}}else{if(!t.geometry.morphTargets)return void console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.\",this);for(r=0;r<this.node.geometry.morphTargets.length;r++)if(t.geometry.morphTargets[r].name===i){i=r;break}}}r=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(r=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(r=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[r],this.setValue=this.SetterByBindingTypeAndVersioning[r][e]}}else console.error(\"THREE.PropertyBinding: Trying to update node for track: \"+this.path+\" but it wasn't found.\")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Un.prototype,{_getValue_unbound:Un.prototype.getValue,_setValue_unbound:Un.prototype.setValue}),Object.assign(jn.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length,u=void 0,c=0,l=arguments.length;c!==l;++c){var h=arguments[c],f=h.uuid,d=n[f];if(void 0===d){d=e++,n[f]=d,t.push(h),f=0;for(var p=a;f!==p;++f)s[f].push(new Un(h,i[f],o[f]))}else if(d<r){u=t[d];var m=--r;for(n[(p=t[m]).uuid]=d,t[d]=p,n[f]=m,t[m]=h,f=0,p=a;f!==p;++f){var g=s[f],v=g[d];g[d]=g[m],void 0===v&&(v=new Un(h,i[f],o[f])),g[m]=v}}else t[d]!==u&&console.error(\"THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.\")}this.nCachedObjects_=r},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,i=n.length,o=0,s=arguments.length;o!==s;++o){var a=arguments[o],u=a.uuid,c=r[u];if(void 0!==c&&c>=e){var l=e++,h=t[l];for(r[h.uuid]=c,t[c]=h,r[u]=l,t[l]=a,a=0,u=i;a!==u;++a){var f=(h=n[a])[c];h[c]=h[l],h[l]=f}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,o=i.length,s=0,a=arguments.length;s!==a;++s){var u=arguments[s].uuid,c=n[u];if(void 0!==c)if(delete n[u],c<r){var l=t[u=--r],h=--e,f=t[h];for(n[l.uuid]=c,t[c]=l,n[f.uuid]=u,t[u]=f,t.pop(),l=0,f=o;l!==f;++l){var d=i[l],p=d[h];d[c]=d[u],d[u]=p,d.pop()}}else for(n[(f=t[h=--e]).uuid]=c,t[c]=f,t.pop(),l=0,f=o;l!==f;++l)(d=i[l])[c]=d[h],d.pop()}this.nCachedObjects_=r},subscribe_:function(t,e){var r=this._bindingsIndicesByPath,n=r[t],i=this._bindings;if(void 0!==n)return i[n];var o=this._paths,s=this._parsedPaths,a=this._objects,u=this.nCachedObjects_,c=Array(a.length);for(r[t]=n=i.length,o.push(t),s.push(e),i.push(c),r=u,n=a.length;r!==n;++r)c[r]=new Un(a[r],t,e);return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,r=e[t];if(void 0!==r){var n=this._paths,i=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];e[t[s]]=r,o[r]=a,o.pop(),i[r]=i[s],i.pop(),n[r]=n[s],n.pop()}}}),Object.assign(Vn.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,r){if(t.fadeOut(e),this.fadeIn(e),r){var n=t._clip.duration,i=(r=this._clip.duration)/n;t.warp(1,n/r,e),this.warp(i,1,e)}return this},crossFadeTo:function(t,e,r){return t.crossFadeFrom(this,e,r)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,r){var n=this._mixer,i=n.time,o=this._timeScaleInterpolant,s=this.timeScale;return null===o&&(this._timeScaleInterpolant=o=n._lendControlInterpolant()),n=o.parameterPositions,o=o.sampleValues,n[0]=i,n[1]=i+r,o[0]=t/s,o[1]=e/s,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,r,n){if(this.enabled){var i=this._startTime;if(null!==i){if(0>(e=(t-i)*r)||0===r)return;this._startTime=null,e*=r}if(e*=this._updateTimeScale(t),r=this._updateTime(e),0<(t=this._updateWeight(t))){i=this._propertyBindings;for(var o=0,s=(e=this._interpolants).length;o!==s;++o)e[o].evaluate(r),i[o].accumulate(n,t)}}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var r=this._weightInterpolant;if(null!==r){var n=r.evaluate(t)[0];e*=n,t>r.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var r=this._timeScaleInterpolant;null!==r&&(e*=r.evaluate(t)[0],t>r.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var r=this._clip.duration,n=this.loop,i=this._loopCount;if(2200===n)t:{if(-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1)),e>=r)e=r;else{if(!(0>e))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:0>t?-1:1})}else{if(n=2202===n,-1===i&&(0<=t?(i=0,this._setEndings(!0,0===this.repetitions,n)):this._setEndings(0===this.repetitions,!0,n)),e>=r||0>e){var o=Math.floor(e/r);e-=r*o,i+=Math.abs(o);var s=this.repetitions-i;0>=s?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=0<t?r:0,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:0<t?1:-1})):(1===s?this._setEndings(t=0>t,!t,n):this._setEndings(!1,!1,n),this._loopCount=i,this._mixer.dispatchEvent({type:\"loop\",action:this,loopDelta:o}))}if(n&&1==(1&i))return this.time=e,r-e}return this.time=e},_setEndings:function(t,e,r){var n=this._interpolantSettings;r?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(t,e,r){var n=this._mixer,i=n.time,o=this._weightInterpolant;return null===o&&(this._weightInterpolant=o=n._lendControlInterpolant()),n=o.parameterPositions,o=o.sampleValues,n[0]=i,o[0]=e,n[1]=i+t,o[1]=r,this}}),Bn.prototype=Object.assign(Object.create(e.prototype),{constructor:Bn,_bindAction:function(t,e){var r=t._localRoot||this._root,n=t._clip.tracks,i=n.length,o=t._propertyBindings;t=t._interpolants;var s=r.uuid,a=this._bindingsByRootAndName,u=a[s];for(void 0===u&&(a[s]=u={}),a=0;a!==i;++a){var c=n[a],l=c.name,h=u[l];if(void 0===h){if(void 0!==(h=o[a])){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,s,l));continue}++(h=new Fn(Un.create(r,l,e&&e._propertyBindings[a].binding.parsedPath),c.ValueTypeName,c.getValueSize())).referenceCount,this._addInactiveBinding(h,s,l)}o[a]=h,t[a].resultBuffer=h.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,r=t._clip.uuid,n=this._actionsByClip[r];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,r,e)}for(r=0,n=(e=t._propertyBindings).length;r!==n;++r){var i=e[r];0==i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,r=0,n=e.length;r!==n;++r){var i=e[r];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){return null!==(t=t._cacheIndex)&&t<this._nActiveActions},_addInactiveAction:function(t,e,r){var n=this._actions,i=this._actionsByClip,o=i[e];void 0===o?(o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o):(t._byClipCacheIndex=(e=o.knownActions).length,e.push(t)),t._cacheIndex=n.length,n.push(t),o.actionByRoot[r]=t},_removeInactiveAction:function(t){var e=this._actions,r=e[e.length-1],n=t._cacheIndex;r._cacheIndex=n,e[n]=r,e.pop(),t._cacheIndex=null;var i=(n=(r=this._actionsByClip)[e=t._clip.uuid]).knownActions,o=i[i.length-1],s=t._byClipCacheIndex;o._byClipCacheIndex=s,i[s]=o,i.pop(),t._byClipCacheIndex=null,delete n.actionByRoot[(t._localRoot||this._root).uuid],0===i.length&&delete r[e],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=0,r=(t=t._propertyBindings).length;e!==r;++e){var n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(t){var e=this._actions,r=t._cacheIndex,n=this._nActiveActions++,i=e[n];t._cacheIndex=n,e[n]=t,i._cacheIndex=r,e[r]=i},_takeBackAction:function(t){var e=this._actions,r=t._cacheIndex,n=--this._nActiveActions,i=e[n];t._cacheIndex=n,e[n]=t,i._cacheIndex=r,e[r]=i},_addInactiveBinding:function(t,e,r){var n=this._bindingsByRootAndName,i=n[e],o=this._bindings;void 0===i&&(n[e]=i={}),i[r]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,r=t.binding,n=r.rootNode.uuid;r=r.path;var i=this._bindingsByRootAndName,o=i[n],s=e[e.length-1];s._cacheIndex=t=t._cacheIndex,e[t]=s,e.pop(),delete o[r];t:{for(var a in o)break t;delete i[n]}},_lendBinding:function(t){var e=this._bindings,r=t._cacheIndex,n=this._nActiveBindings++,i=e[n];t._cacheIndex=n,e[n]=t,i._cacheIndex=r,e[r]=i},_takeBackBinding:function(t){var e=this._bindings,r=t._cacheIndex,n=--this._nActiveBindings,i=e[n];t._cacheIndex=n,e[n]=t,i._cacheIndex=r,e[r]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,r=t[e];return void 0===r&&((r=new gn(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=r),r},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,r=t.__cacheIndex,n=--this._nActiveControlInterpolants,i=e[n];t.__cacheIndex=n,e[n]=t,i.__cacheIndex=r,e[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var r=e||this._root,n=r.uuid;r=\"string\"==typeof t?xn.findByName(r,t):t;var i=this._actionsByClip[t=null!==r?r.uuid:t],o=null;if(void 0!==i){if(void 0!==(o=i.actionByRoot[n]))return o;o=i.knownActions[0],null===r&&(r=o._clip)}return null===r?null:(e=new Vn(this,r,e),this._bindAction(e,o),this._addInactiveAction(e,t,n),e)},existingAction:function(t,e){var r=e||this._root;return e=r.uuid,r=\"string\"==typeof t?xn.findByName(r,t):t,void 0!==(t=this._actionsByClip[r?r.uuid:t])&&t.actionByRoot[e]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions,r=this._bindings,n=this._nActiveBindings,i=this._nActiveBindings=this._nActiveActions=0;i!==e;++i)t[i].reset();for(i=0;i!==n;++i)r[i].useCount=0;return this},update:function(t){for(var e=this._actions,r=this._nActiveActions,n=this.time+=t*=this.timeScale,i=Math.sign(t),o=this._accuIndex^=1,s=0;s!==r;++s)e[s]._update(n,t,i,o);for(t=this._bindings,e=this._nActiveBindings,s=0;s!==e;++s)t[s].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,r=this._actionsByClip,n=r[t=t.uuid];if(void 0!==n){for(var i=0,o=(n=n.knownActions).length;i!==o;++i){var s=n[i];this._deactivateAction(s);var a=s._cacheIndex,u=e[e.length-1];s._cacheIndex=null,s._byClipCacheIndex=null,u._cacheIndex=a,e[a]=u,e.pop(),this._removeInactiveBindingsForAction(s)}delete r[t]}},uncacheRoot:function(t){t=t.uuid;var e=this._actionsByClip;for(n in e){var r=e[n].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var n=this._bindingsByRootAndName[t];if(void 0!==n)for(var i in n)(t=n[i]).restoreOriginalState(),this._removeInactiveBinding(t)},uncacheAction:function(t,e){null!==(t=this.existingAction(t,e))&&(this._deactivateAction(t),this._removeInactiveAction(t))}}),Hn.prototype.clone=function(){return new Hn(void 0===this.value.clone?this.value:this.value.clone())},Gn.prototype=Object.assign(Object.create(I.prototype),{constructor:Gn,isInstancedBufferGeometry:!0,copy:function(t){return I.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(Wn.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Wn.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,r){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=r,this},setXYZ:function(t,e,r,n){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=n,this},setXYZW:function(t,e,r,n,i){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=n,this.data.array[t+3]=i,this}}),Object.defineProperty(qn.prototype,\"needsUpdate\",{set:function(t){!0===t&&this.version++}}),Object.assign(qn.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,r){t*=this.stride,r*=e.stride;for(var n=0,i=this.stride;n<i;n++)this.array[t+n]=e.array[r+n];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Yn.prototype=Object.assign(Object.create(qn.prototype),{constructor:Yn,isInstancedInterleavedBuffer:!0,copy:function(t){return qn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Xn.prototype=Object.assign(Object.create(S.prototype),{constructor:Xn,isInstancedBufferAttribute:!0,copy:function(t){return S.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign($n.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error(\"THREE.Raycaster: Unsupported camera type.\")},intersectObject:function(t,e,r){return Zn(t,this,r=r||[],e),r.sort(Jn),r},intersectObjects:function(t,e,r){if(r=r||[],!1===Array.isArray(t))return console.warn(\"THREE.Raycaster.intersectObjects: objects is not an Array.\"),r;for(var n=0,i=t.length;n<i;n++)Zn(t[n],this,r,e);return r.sort(Jn),r}}),Object.assign(Qn.prototype,{start:function(){this.oldTime=this.startTime=(\"undefined\"==typeof performance?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=(\"undefined\"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Object.assign(Kn.prototype,{set:function(t,e,r){return this.radius=t,this.phi=e,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(Si.clamp(t.y/this.radius,-1,1))),this}}),Object.assign(ti.prototype,{set:function(t,e,r){return this.radius=t,this.theta=e,this.y=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}}),Object.assign(ei.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new r;return function(e,r){return r=t.copy(r).multiplyScalar(.5),this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn(\"THREE.Box2: .getCenter() target is now required\"),t=new r),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn(\"THREE.Box2: .getSize() target is now required\"),t=new r),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn(\"THREE.Box2: .getParameter() target is now required\"),e=new r),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn(\"THREE.Box2: .clampPoint() target is now required\"),e=new r),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new r;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),(ri.prototype=Object.create(w.prototype)).constructor=ri,ri.prototype.isImmediateRenderObject=!0,(ni.prototype=Object.create(ae.prototype)).constructor=ni,ni.prototype.update=function(){var t=new o,e=new o,r=new s;return function(){var n=[\"a\",\"b\",\"c\"];this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,s=this.object.geometry;if(s&&s.isGeometry)for(var a=s.vertices,u=s.faces,c=s=0,l=u.length;c<l;c++)for(var h=u[c],f=0,d=h.vertexNormals.length;f<d;f++){var p=h.vertexNormals[f];t.copy(a[h[n[f]]]).applyMatrix4(i),e.copy(p).applyMatrix3(r).normalize().multiplyScalar(this.size).add(t),o.setXYZ(s,t.x,t.y,t.z),o.setXYZ(s+=1,e.x,e.y,e.z),s+=1}else if(s&&s.isBufferGeometry)for(n=s.attributes.position,a=s.attributes.normal,f=s=0,d=n.count;f<d;f++)t.set(n.getX(f),n.getY(f),n.getZ(f)).applyMatrix4(i),e.set(a.getX(f),a.getY(f),a.getZ(f)),e.applyMatrix3(r).normalize().multiplyScalar(this.size).add(t),o.setXYZ(s,t.x,t.y,t.z),o.setXYZ(s+=1,e.x,e.y,e.z),s+=1;o.needsUpdate=!0}}(),(ii.prototype=Object.create(w.prototype)).constructor=ii,ii.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},ii.prototype.update=function(){var t=new o,e=new o;return function(){this.light.updateMatrixWorld();var r=this.light.distance?this.light.distance:1e3,n=r*Math.tan(this.light.angle);this.cone.scale.set(n,n,r),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),(oi.prototype=Object.create(ae.prototype)).constructor=oi,oi.prototype.updateMatrixWorld=function(){var t=new o,e=new n,r=new n;return function(n){var i=this.bones,o=this.geometry,s=o.getAttribute(\"position\");r.getInverse(this.root.matrixWorld);for(var a=0,u=0;a<i.length;a++){var c=i[a];c.parent&&c.parent.isBone&&(e.multiplyMatrices(r,c.matrixWorld),t.setFromMatrixPosition(e),s.setXYZ(u,t.x,t.y,t.z),e.multiplyMatrices(r,c.parent.matrixWorld),t.setFromMatrixPosition(e),s.setXYZ(u+1,t.x,t.y,t.z),u+=2)}o.getAttribute(\"position\").needsUpdate=!0,w.prototype.updateMatrixWorld.call(this,n)}}(),(si.prototype=Object.create(Y.prototype)).constructor=si,si.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},si.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},(ai.prototype=Object.create(w.prototype)).constructor=ai,ai.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ai.prototype.update=function(){var t=.5*this.light.width,e=.5*this.light.height,r=this.line.geometry.attributes.position,n=r.array;n[0]=t,n[1]=-e,n[2]=0,n[3]=t,n[4]=e,n[5]=0,n[6]=-t,n[7]=e,n[8]=0,n[9]=-t,n[10]=-e,n[11]=0,n[12]=t,n[13]=-e,n[14]=0,r.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},(ui.prototype=Object.create(w.prototype)).constructor=ui,ui.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ui.prototype.update=function(){var t=new o,e=new g,r=new g;return function(){var n=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=n.geometry.getAttribute(\"color\");e.copy(this.light.color),r.copy(this.light.groundColor);for(var o=0,s=i.count;o<s;o++){var a=o<s/2?e:r;i.setXYZ(o,a.r,a.g,a.b)}i.needsUpdate=!0}n.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),(ci.prototype=Object.create(ae.prototype)).constructor=ci,(li.prototype=Object.create(ae.prototype)).constructor=li,(hi.prototype=Object.create(ae.prototype)).constructor=hi,hi.prototype.update=function(){var t=new o,e=new o,r=new s;return function(){this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,s=o.vertices,a=0,u=0,c=(o=o.faces).length;u<c;u++){var l=o[u],h=l.normal;t.copy(s[l.a]).add(s[l.b]).add(s[l.c]).divideScalar(3).applyMatrix4(n),e.copy(h).applyMatrix3(r).normalize().multiplyScalar(this.size).add(t),i.setXYZ(a,t.x,t.y,t.z),i.setXYZ(a+=1,e.x,e.y,e.z),a+=1}i.needsUpdate=!0}}(),(fi.prototype=Object.create(w.prototype)).constructor=fi,fi.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},fi.prototype.update=function(){var t=new o,e=new o,r=new o;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(e,t),this.lightPlane.lookAt(r),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(r),this.targetLine.scale.z=r.length()}}(),(di.prototype=Object.create(ae.prototype)).constructor=di,di.prototype.update=function(){function t(t,o,s,a){if(n.set(o,s,a).unproject(i),void 0!==(t=r[t]))for(o=e.getAttribute(\"position\"),s=0,a=t.length;s<a;s++)o.setXYZ(t[s],n.x,n.y,n.z)}var e,r,n=new o,i=new x;return function(){e=this.geometry,r=this.pointMap,i.projectionMatrix.copy(this.camera.projectionMatrix),t(\"c\",0,0,-1),t(\"t\",0,0,1),t(\"n1\",-1,-1,-1),t(\"n2\",1,-1,-1),t(\"n3\",-1,1,-1),t(\"n4\",1,1,-1),t(\"f1\",-1,-1,1),t(\"f2\",1,-1,1),t(\"f3\",-1,1,1),t(\"f4\",1,1,1),t(\"u1\",.7,1.1,-1),t(\"u2\",-.7,1.1,-1),t(\"u3\",0,2,-1),t(\"cf1\",-1,0,1),t(\"cf2\",1,0,1),t(\"cf3\",0,-1,1),t(\"cf4\",0,1,1),t(\"cn1\",-1,0,-1),t(\"cn2\",1,0,-1),t(\"cn3\",0,-1,-1),t(\"cn4\",0,1,-1),e.getAttribute(\"position\").needsUpdate=!0}}(),(pi.prototype=Object.create(ae.prototype)).constructor=pi,pi.prototype.update=function(){var t=new f;return function(e){if(void 0!==e&&console.warn(\"THREE.BoxHelper: .update() has no longer arguments.\"),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){e=t.min;var r=t.max,n=this.geometry.attributes.position,i=n.array;i[0]=r.x,i[1]=r.y,i[2]=r.z,i[3]=e.x,i[4]=r.y,i[5]=r.z,i[6]=e.x,i[7]=e.y,i[8]=r.z,i[9]=r.x,i[10]=e.y,i[11]=r.z,i[12]=r.x,i[13]=r.y,i[14]=e.z,i[15]=e.x,i[16]=r.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=r.x,i[22]=e.y,i[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),pi.prototype.setFromObject=function(t){return this.object=t,this.update(),this},(mi.prototype=Object.create(ae.prototype)).constructor=mi,mi.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),w.prototype.updateMatrixWorld.call(this,t))},(gi.prototype=Object.create(se.prototype)).constructor=gi,gi.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;1e-8>Math.abs(e)&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.lookAt(this.plane.normal),w.prototype.updateMatrixWorld.call(this,t)},(vi.prototype=Object.create(w.prototype)).constructor=vi,vi.prototype.setDirection=function(){var t,e=new o;return function(r){.99999<r.y?this.quaternion.set(0,0,0,1):-.99999>r.y?this.quaternion.set(1,0,0,0):(e.set(r.z,0,-r.x).normalize(),t=Math.acos(r.y),this.quaternion.setFromAxisAngle(e,t))}}(),vi.prototype.setLength=function(t,e,r){void 0===e&&(e=.2*t),void 0===r&&(r=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(r,e,r),this.cone.position.y=t,this.cone.updateMatrix()},vi.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},(yi.prototype=Object.create(ae.prototype)).constructor=yi,Dr.create=function(t,e){return console.log(\"THREE.Curve.create() has been deprecated\"),t.prototype=Object.create(Dr.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Xr.prototype,{createPointsGeometry:function(t){return console.warn(\"THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.\"),t=this.getPoints(t),this.createGeometry(t)},createSpacedPointsGeometry:function(t){return console.warn(\"THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.\"),t=this.getSpacedPoints(t),this.createGeometry(t)},createGeometry:function(t){console.warn(\"THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.\");for(var e=new M,r=0,n=t.length;r<n;r++){var i=t[r];e.vertices.push(new o(i.x,i.y,i.z||0))}return e}}),Object.assign($r.prototype,{fromPoints:function(t){console.warn(\"THREE.Path: .fromPoints() has been renamed to .setFromPoints().\"),this.setFromPoints(t)}}),wi.prototype=Object.create(Fr.prototype),xi.prototype=Object.create(Fr.prototype),bi.prototype=Object.create(Fr.prototype),Object.assign(bi.prototype,{initFromArray:function(){console.error(\"THREE.Spline: .initFromArray() has been removed.\")},getControlPointsArray:function(){console.error(\"THREE.Spline: .getControlPointsArray() has been removed.\")},reparametrizeByArcLength:function(){console.error(\"THREE.Spline: .reparametrizeByArcLength() has been removed.\")}}),ci.prototype.setColors=function(){console.error(\"THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.\")},oi.prototype.update=function(){console.error(\"THREE.SkeletonHelper: update() no longer needs to be called.\")},Object.assign(Mn.prototype,{extractUrlBase:function(t){return console.warn(\"THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.\"),io.extractUrlBase(t)}}),Object.assign(ei.prototype,{center:function(t){return console.warn(\"THREE.Box2: .center() has been renamed to .getCenter().\"),this.getCenter(t)},empty:function(){return console.warn(\"THREE.Box2: .empty() has been renamed to .isEmpty().\"),this.isEmpty()},isIntersectionBox:function(t){return console.warn(\"THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(t)},size:function(t){return console.warn(\"THREE.Box2: .size() has been renamed to .getSize().\"),this.getSize(t)}}),Object.assign(f.prototype,{center:function(t){return console.warn(\"THREE.Box3: .center() has been renamed to .getCenter().\"),this.getCenter(t)},empty:function(){return console.warn(\"THREE.Box3: .empty() has been renamed to .isEmpty().\"),this.isEmpty()},isIntersectionBox:function(t){return console.warn(\"THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn(\"THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().\"),this.intersectsSphere(t)},size:function(t){return console.warn(\"THREE.Box3: .size() has been renamed to .getSize().\"),this.getSize(t)}}),W.prototype.center=function(t){return console.warn(\"THREE.Line3: .center() has been renamed to .getCenter().\"),this.getCenter(t)},Object.assign(Si,{random16:function(){return console.warn(\"THREE.Math: .random16() has been deprecated. Use Math.random() instead.\"),Math.random()},nearestPowerOfTwo:function(t){return console.warn(\"THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().\"),Si.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn(\"THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().\"),Si.ceilPowerOfTwo(t)}}),Object.assign(s.prototype,{flattenToArrayOffset:function(t,e){return console.warn(\"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\"),this.toArray(t,e)},multiplyVector3:function(t){return console.warn(\"THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.\"),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error(\"THREE.Matrix3: .multiplyVector3Array() has been removed.\")},applyToBuffer:function(t){return console.warn(\"THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.\"),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error(\"THREE.Matrix3: .applyToVector3Array() has been removed.\")}}),Object.assign(n.prototype,{extractPosition:function(t){return console.warn(\"THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().\"),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn(\"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\"),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new o),console.warn(\"THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.\"),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn(\"THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().\"),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn(\"THREE.Matrix4: .multiplyToArray() has been removed.\")},multiplyVector3:function(t){return console.warn(\"THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn(\"THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error(\"THREE.Matrix4: .multiplyVector3Array() has been removed.\")},rotateAxis:function(t){console.warn(\"THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.\"),t.transformDirection(this)},crossVector:function(t){return console.warn(\"THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.\"),t.applyMatrix4(this)},translate:function(){console.error(\"THREE.Matrix4: .translate() has been removed.\")},rotateX:function(){console.error(\"THREE.Matrix4: .rotateX() has been removed.\")},rotateY:function(){console.error(\"THREE.Matrix4: .rotateY() has been removed.\")},rotateZ:function(){console.error(\"THREE.Matrix4: .rotateZ() has been removed.\")},rotateByAxis:function(){console.error(\"THREE.Matrix4: .rotateByAxis() has been removed.\")},applyToBuffer:function(t){return console.warn(\"THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.\"),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error(\"THREE.Matrix4: .applyToVector3Array() has been removed.\")},makeFrustum:function(t,e,r,n,i,o){return console.warn(\"THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.\"),this.makePerspective(t,e,n,r,i,o)}}),p.prototype.isIntersectionLine=function(t){return console.warn(\"THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().\"),this.intersectsLine(t)},i.prototype.multiplyVector3=function(t){return console.warn(\"THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.\"),t.applyQuaternion(this)},Object.assign(G.prototype,{isIntersectionBox:function(t){return console.warn(\"THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().\"),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn(\"THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().\"),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn(\"THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().\"),this.intersectsSphere(t)}}),Object.assign(q.prototype,{area:function(){return console.warn(\"THREE.Triangle: .area() has been renamed to .getArea().\"),this.getArea()},barycoordFromPoint:function(t,e){return console.warn(\"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().\"),this.getBarycoord(t,e)},midpoint:function(t){return console.warn(\"THREE.Triangle: .midpoint() has been renamed to .getMidpoint().\"),this.getMidpoint(t)},normal:function(t){return console.warn(\"THREE.Triangle: .normal() has been renamed to .getNormal().\"),this.getNormal(t)},plane:function(t){return console.warn(\"THREE.Triangle: .plane() has been renamed to .getPlane().\"),this.getPlane(t)}}),Object.assign(q,{barycoordFromPoint:function(t,e,r,n,i){return console.warn(\"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().\"),q.getBarycoord(t,e,r,n,i)},normal:function(t,e,r,n){return console.warn(\"THREE.Triangle: .normal() has been renamed to .getNormal().\"),q.getNormal(t,e,r,n)}}),Object.assign(Jr.prototype,{extractAllPoints:function(t){return console.warn(\"THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.\"),this.extractPoints(t)},extrude:function(t){return console.warn(\"THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.\"),new Ze(this,t)},makeGeometry:function(t){return console.warn(\"THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.\"),new ar(this,t)}}),Object.assign(r.prototype,{fromAttribute:function(t,e,r){return console.warn(\"THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(t,e,r)},distanceToManhattan:function(t){return console.warn(\"THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\"),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn(\"THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()}}),Object.assign(o.prototype,{setEulerFromRotationMatrix:function(){console.error(\"THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.\")},setEulerFromQuaternion:function(){console.error(\"THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.\")},getPositionFromMatrix:function(t){return console.warn(\"THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().\"),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn(\"THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().\"),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn(\"THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().\"),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn(\"THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.\"),this.applyMatrix4(t)},fromAttribute:function(t,e,r){return console.warn(\"THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(t,e,r)},distanceToManhattan:function(t){return console.warn(\"THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\"),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn(\"THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()}}),Object.assign(u.prototype,{fromAttribute:function(t,e,r){return console.warn(\"THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().\"),this.fromBufferAttribute(t,e,r)},lengthManhattan:function(){return console.warn(\"THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().\"),this.manhattanLength()}}),Object.assign(M.prototype,{computeTangents:function(){console.error(\"THREE.Geometry: .computeTangents() has been removed.\")},computeLineDistances:function(){console.error(\"THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.\")}}),Object.assign(w.prototype,{getChildByName:function(t){return console.warn(\"THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().\"),this.getObjectByName(t)},renderDepth:function(){console.warn(\"THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.\")},translate:function(t,e){return console.warn(\"THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.\"),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error(\"THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.\")}}),Object.defineProperties(w.prototype,{eulerOrder:{get:function(){return console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\"),this.rotation.order},set:function(t){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\"),this.rotation.order=t}},useQuaternion:{get:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")},set:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")}}}),Object.defineProperties(ee.prototype,{objects:{get:function(){return console.warn(\"THREE.LOD: .objects has been renamed to .levels.\"),this.levels}}}),Object.defineProperty(re.prototype,\"useVertexTexture\",{get:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")},set:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")}}),Object.defineProperty(Dr.prototype,\"__arcLengthDivisions\",{get:function(){return console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\"),this.arcLengthDivisions},set:function(t){console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\"),this.arcLengthDivisions=t}}),qt.prototype.setLens=function(t,e){console.warn(\"THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.\"),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Zr.prototype,{onlyShadow:{set:function(){console.warn(\"THREE.Light: .onlyShadow has been removed.\")}},shadowCameraFov:{set:function(t){console.warn(\"THREE.Light: .shadowCameraFov is now .shadow.camera.fov.\"),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn(\"THREE.Light: .shadowCameraLeft is now .shadow.camera.left.\"),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn(\"THREE.Light: .shadowCameraRight is now .shadow.camera.right.\"),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn(\"THREE.Light: .shadowCameraTop is now .shadow.camera.top.\"),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn(\"THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.\"),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn(\"THREE.Light: .shadowCameraNear is now .shadow.camera.near.\"),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn(\"THREE.Light: .shadowCameraFar is now .shadow.camera.far.\"),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn(\"THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.\")}},shadowBias:{set:function(t){console.warn(\"THREE.Light: .shadowBias is now .shadow.bias.\"),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn(\"THREE.Light: .shadowDarkness has been removed.\")}},shadowMapWidth:{set:function(t){console.warn(\"THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.\"),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn(\"THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.\"),this.shadow.mapSize.height=t}}}),Object.defineProperties(S.prototype,{length:{get:function(){return console.warn(\"THREE.BufferAttribute: .length has been deprecated. Use .count instead.\"),this.array.length}},copyIndicesArray:function(){console.error(\"THREE.BufferAttribute: .copyIndicesArray() has been removed.\")}}),Object.assign(I.prototype,{addIndex:function(t){console.warn(\"THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().\"),this.setIndex(t)},addDrawCall:function(t,e,r){void 0!==r&&console.warn(\"THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.\"),console.warn(\"THREE.BufferGeometry: .addDrawCall() is now .addGroup().\"),this.addGroup(t,e)},clearDrawCalls:function(){console.warn(\"THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().\"),this.clearGroups()},computeTangents:function(){console.warn(\"THREE.BufferGeometry: .computeTangents() has been removed.\")},computeOffsets:function(){console.warn(\"THREE.BufferGeometry: .computeOffsets() has been removed.\")}}),Object.defineProperties(I.prototype,{drawcalls:{get:function(){return console.error(\"THREE.BufferGeometry: .drawcalls has been renamed to .groups.\"),this.groups}},offsets:{get:function(){return console.warn(\"THREE.BufferGeometry: .offsets has been renamed to .groups.\"),this.groups}}}),Object.assign(Qe.prototype,{getArrays:function(){console.error(\"THREE.ExtrudeBufferGeometry: .getArrays() has been removed.\")},addShapeList:function(){console.error(\"THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.\")},addShape:function(){console.error(\"THREE.ExtrudeBufferGeometry: .addShape() has been removed.\")}}),Object.defineProperties(Hn.prototype,{dynamic:{set:function(){console.warn(\"THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.\")}},onUpdate:{value:function(){return console.warn(\"THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.\"),this}}}),Object.defineProperties(V.prototype,{wrapAround:{get:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")},set:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")}},wrapRGB:{get:function(){return console.warn(\"THREE.Material: .wrapRGB has been removed.\"),new g}},shading:{get:function(){console.error(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\")},set:function(t){console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=1===t}}}),Object.defineProperties(br.prototype,{metal:{get:function(){return console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.\"),!1},set:function(){console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead\")}}}),Object.defineProperties(H.prototype,{derivatives:{get:function(){return console.warn(\"THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\"),this.extensions.derivatives},set:function(t){console.warn(\"THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\"),this.extensions.derivatives=t}}}),Object.assign($t.prototype,{getCurrentRenderTarget:function(){return console.warn(\"THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().\"),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn(\"THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().\"),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn(\"THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.\"),this.capabilities.precision},resetGLState:function(){return console.warn(\"THREE.WebGLRenderer: .resetGLState() is now .state.reset().\"),this.state.reset()},supportsFloatTextures:function(){return console.warn(\"THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).\"),this.extensions.get(\"OES_texture_float\")},supportsHalfFloatTextures:function(){return console.warn(\"THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).\"),this.extensions.get(\"OES_texture_half_float\")},supportsStandardDerivatives:function(){return console.warn(\"THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).\"),this.extensions.get(\"OES_standard_derivatives\")},supportsCompressedTextureS3TC:function(){return console.warn(\"THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).\"),this.extensions.get(\"WEBGL_compressed_texture_s3tc\")},supportsCompressedTexturePVRTC:function(){return console.warn(\"THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).\"),this.extensions.get(\"WEBGL_compressed_texture_pvrtc\")},supportsBlendMinMax:function(){return console.warn(\"THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).\"),this.extensions.get(\"EXT_blend_minmax\")},supportsVertexTextures:function(){return console.warn(\"THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.\"),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn(\"THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).\"),this.extensions.get(\"ANGLE_instanced_arrays\")},enableScissorTest:function(t){console.warn(\"THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().\"),this.setScissorTest(t)},initMaterial:function(){console.warn(\"THREE.WebGLRenderer: .initMaterial() has been removed.\")},addPrePlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPrePlugin() has been removed.\")},addPostPlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPostPlugin() has been removed.\")},updateShadowMap:function(){console.warn(\"THREE.WebGLRenderer: .updateShadowMap() has been removed.\")},setFaceCulling:function(){console.warn(\"THREE.WebGLRenderer: .setFaceCulling() has been removed.\")}}),Object.defineProperties($t.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn(\"THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.\"),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn(\"THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.\"),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.\")}}}),Object.defineProperties(Bt.prototype,{cullFace:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.\")}},renderReverseSided:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.\")}},renderSingleSided:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.\")}}}),Object.defineProperties(c.prototype,{wrapS:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\"),this.texture.wrapS},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\"),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\"),this.texture.wrapT},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\"),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\"),this.texture.magFilter},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\"),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\"),this.texture.minFilter},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\"),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\"),this.texture.anisotropy},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\"),this.texture.anisotropy=t}},offset:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\"),this.texture.offset},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\"),this.texture.offset=t}},repeat:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\"),this.texture.repeat},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\"),this.texture.repeat=t}},format:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\"),this.texture.format},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\"),this.texture.format=t}},type:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\"),this.texture.type},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\"),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\"),this.texture.generateMipmaps},set:function(t){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\"),this.texture.generateMipmaps=t}}}),Object.defineProperties(Xt.prototype,{standing:{set:function(){console.warn(\"THREE.WebVRManager: .standing has been removed.\")}}}),On.prototype.load=function(t){console.warn(\"THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.\");var e=this;return(new Cn).load(t,function(t){e.setBuffer(t)}),this},In.prototype.getData=function(){return console.warn(\"THREE.AudioAnalyser: .getData() is now .getFrequencyData().\"),this.getFrequencyData()},Pn.prototype.updateCubeMap=function(t,e){return console.warn(\"THREE.CubeCamera: .updateCubeMap() is now .update().\"),this.update(t,e)},t.WebGLRenderTargetCube=l,t.WebGLRenderTarget=c,t.WebGLRenderer=$t,t.ShaderLib=Ci,t.UniformsLib=ki,t.UniformsUtils=Ai,t.ShaderChunk=Ti,t.FogExp2=Jt,t.Fog=Zt,t.Scene=Qt,t.Sprite=te,t.LOD=ee,t.SkinnedMesh=ie,t.Skeleton=re,t.Bone=ne,t.Mesh=Y,t.LineSegments=ae,t.LineLoop=ue,t.Line=se,t.Points=le,t.Group=he,t.VideoTexture=fe,t.DataTexture=h,t.CompressedTexture=de,t.CubeTexture=Q,t.CanvasTexture=Ht,t.DepthTexture=pe,t.Texture=a,t.CompressedTextureLoader=Rr,t.DataTextureLoader=kr,t.CubeTextureLoader=Lr,t.TextureLoader=Pr,t.ObjectLoader=En,t.MaterialLoader=bn,t.BufferGeometryLoader=_n,t.DefaultLoadingManager=$i,t.LoadingManager=Tr,t.JSONLoader=Sn,t.ImageLoader=Cr,t.ImageBitmapLoader=Tn,t.FontLoader=kn,t.FileLoader=Ar,t.Loader=Mn,t.LoaderUtils=io,t.Cache=Xi,t.AudioLoader=Cn,t.SpotLightShadow=tn,t.SpotLight=en,t.PointLight=rn,t.RectAreaLight=an,t.HemisphereLight=Qr,t.DirectionalLightShadow=nn,t.DirectionalLight=on,t.AmbientLight=sn,t.LightShadow=Kr,t.Light=Zr,t.StereoCamera=Ln,t.PerspectiveCamera=qt,t.OrthographicCamera=b,t.CubeCamera=Pn,t.ArrayCamera=Yt,t.Camera=x,t.AudioListener=Dn,t.PositionalAudio=Nn,t.AudioContext=ho,t.AudioAnalyser=In,t.Audio=On,t.VectorKeyframeTrack=wn,t.StringKeyframeTrack=un,t.QuaternionKeyframeTrack=fn,t.NumberKeyframeTrack=pn,t.ColorKeyframeTrack=dn,t.BooleanKeyframeTrack=cn,t.PropertyMixer=Fn,t.PropertyBinding=Un,t.KeyframeTrack=yn,t.AnimationUtils=ro,t.AnimationObjectGroup=jn,t.AnimationMixer=Bn,t.AnimationClip=xn,t.Uniform=Hn,t.InstancedBufferGeometry=Gn,t.BufferGeometry=I,t.Geometry=M,t.InterleavedBufferAttribute=Wn,t.InstancedInterleavedBuffer=Yn,t.InterleavedBuffer=qn,t.InstancedBufferAttribute=Xn,t.Face3=_,t.Object3D=w,t.Raycaster=$n,t.Layers=y,t.EventDispatcher=e,t.Clock=Qn,t.QuaternionLinearInterpolant=hn,t.LinearInterpolant=gn,t.DiscreteInterpolant=vn,t.CubicInterpolant=mn,t.Interpolant=ln,t.Triangle=q,t.Math=Si,t.Spherical=Kn,t.Cylindrical=ti,t.Plane=p,t.Frustum=m,t.Sphere=d,t.Ray=G,t.Matrix4=n,t.Matrix3=s,t.Box3=f,t.Box2=ei,t.Line3=W,t.Euler=v,t.Vector4=u,t.Vector3=o,t.Vector2=r,t.Quaternion=i,t.Color=g,t.ImmediateRenderObject=ri,t.VertexNormalsHelper=ni,t.SpotLightHelper=ii,t.SkeletonHelper=oi,t.PointLightHelper=si,t.RectAreaLightHelper=ai,t.HemisphereLightHelper=ui,t.GridHelper=ci,t.PolarGridHelper=li,t.FaceNormalsHelper=hi,t.DirectionalLightHelper=fi,t.CameraHelper=di,t.BoxHelper=pi,t.Box3Helper=mi,t.PlaneHelper=gi,t.ArrowHelper=vi,t.AxesHelper=yi,t.Shape=Jr,t.Path=$r,t.ShapePath=An,t.Font=Rn,t.CurvePath=Xr,t.Curve=Dr,t.ShapeUtils=Gi,t.WebGLUtils=Wt,t.WireframeGeometry=me,t.ParametricGeometry=ge,t.ParametricBufferGeometry=ve,t.TetrahedronGeometry=xe,t.TetrahedronBufferGeometry=be,t.OctahedronGeometry=_e,t.OctahedronBufferGeometry=Me,t.IcosahedronGeometry=Se,t.IcosahedronBufferGeometry=Ee,t.DodecahedronGeometry=Te,t.DodecahedronBufferGeometry=Ae,t.PolyhedronGeometry=ye,t.PolyhedronBufferGeometry=we,t.TubeGeometry=Re,t.TubeBufferGeometry=ke,t.TorusKnotGeometry=Ce,t.TorusKnotBufferGeometry=Le,t.TorusGeometry=Pe,t.TorusBufferGeometry=De,t.TextGeometry=Ke,t.TextBufferGeometry=tr,t.SphereGeometry=er,t.SphereBufferGeometry=rr,t.RingGeometry=nr,t.RingBufferGeometry=ir,t.PlaneGeometry=U,t.PlaneBufferGeometry=j,t.LatheGeometry=or,t.LatheBufferGeometry=sr,t.ShapeGeometry=ar,t.ShapeBufferGeometry=ur,t.ExtrudeGeometry=Ze,t.ExtrudeBufferGeometry=Qe,t.EdgesGeometry=lr,t.ConeGeometry=dr,t.ConeBufferGeometry=pr,t.CylinderGeometry=hr,t.CylinderBufferGeometry=fr,t.CircleGeometry=mr,t.CircleBufferGeometry=gr,t.BoxGeometry=F,t.BoxBufferGeometry=z,t.ShadowMaterial=vr,t.SpriteMaterial=Kt,t.RawShaderMaterial=yr,t.ShaderMaterial=H,t.PointsMaterial=ce,t.MeshPhysicalMaterial=xr,t.MeshStandardMaterial=wr,t.MeshPhongMaterial=br,t.MeshToonMaterial=_r,t.MeshNormalMaterial=Mr,t.MeshLambertMaterial=Sr,t.MeshDepthMaterial=jt,t.MeshDistanceMaterial=Vt,t.MeshBasicMaterial=B,t.LineDashedMaterial=Er,t.LineBasicMaterial=oe,t.Material=V,t.Float64BufferAttribute=D,t.Float32BufferAttribute=P,t.Uint32BufferAttribute=L,t.Int32BufferAttribute=C,t.Uint16BufferAttribute=k,t.Int16BufferAttribute=R,t.Uint8ClampedBufferAttribute=A,t.Uint8BufferAttribute=T,t.Int8BufferAttribute=E,t.BufferAttribute=S,t.ArcCurve=Nr,t.CatmullRomCurve3=Fr,t.CubicBezierCurve=Vr,t.CubicBezierCurve3=Br,t.EllipseCurve=Or,t.LineCurve=Hr,t.LineCurve3=Gr,t.QuadraticBezierCurve=Wr,t.QuadraticBezierCurve3=qr,t.SplineCurve=Yr,t.REVISION=\"92\",t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},t.CullFaceNone=0,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=0,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.FrontSide=0,t.BackSide=1,t.DoubleSide=2,t.FlatShading=1,t.SmoothShading=2,t.NoColors=0,t.FaceColors=1,t.VertexColors=2,t.NoBlending=0,t.NormalBlending=1,t.AdditiveBlending=2,t.SubtractiveBlending=3,t.MultiplyBlending=4,t.CustomBlending=5,t.AddEquation=100,t.SubtractEquation=101,t.ReverseSubtractEquation=102,t.MinEquation=103,t.MaxEquation=104,t.ZeroFactor=200,t.OneFactor=201,t.SrcColorFactor=202,t.OneMinusSrcColorFactor=203,t.SrcAlphaFactor=204,t.OneMinusSrcAlphaFactor=205,t.DstAlphaFactor=206,t.OneMinusDstAlphaFactor=207,t.DstColorFactor=208,t.OneMinusDstColorFactor=209,t.SrcAlphaSaturateFactor=210,t.NeverDepth=0,t.AlwaysDepth=1,t.LessDepth=2,t.LessEqualDepth=3,t.EqualDepth=4,t.GreaterEqualDepth=5,t.GreaterDepth=6,t.NotEqualDepth=7,t.MultiplyOperation=0,t.MixOperation=1,t.AddOperation=2,t.NoToneMapping=0,t.LinearToneMapping=1,t.ReinhardToneMapping=2,t.Uncharted2ToneMapping=3,t.CineonToneMapping=4,t.UVMapping=300,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.SphericalReflectionMapping=305,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.RepeatWrapping=1e3,t.ClampToEdgeWrapping=1001,t.MirroredRepeatWrapping=1002,t.NearestFilter=1003,t.NearestMipMapNearestFilter=1004,t.NearestMipMapLinearFilter=1005,t.LinearFilter=1006,t.LinearMipMapNearestFilter=1007,t.LinearMipMapLinearFilter=1008,t.UnsignedByteType=1009,t.ByteType=1010,t.ShortType=1011,t.UnsignedShortType=1012,t.IntType=1013,t.UnsignedIntType=1014,t.FloatType=1015,t.HalfFloatType=1016,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedInt248Type=1020,t.AlphaFormat=1021,t.RGBFormat=1022,t.RGBAFormat=1023,t.LuminanceFormat=1024,t.LuminanceAlphaFormat=1025,t.RGBEFormat=1023,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.RGB_S3TC_DXT1_Format=33776,t.RGBA_S3TC_DXT1_Format=33777,t.RGBA_S3TC_DXT3_Format=33778,t.RGBA_S3TC_DXT5_Format=33779,t.RGB_PVRTC_4BPPV1_Format=35840,t.RGB_PVRTC_2BPPV1_Format=35841,t.RGBA_PVRTC_4BPPV1_Format=35842,t.RGBA_PVRTC_2BPPV1_Format=35843,t.RGB_ETC1_Format=36196,t.RGBA_ASTC_4x4_Format=37808,t.RGBA_ASTC_5x4_Format=37809,t.RGBA_ASTC_5x5_Format=37810,t.RGBA_ASTC_6x5_Format=37811,t.RGBA_ASTC_6x6_Format=37812,t.RGBA_ASTC_8x5_Format=37813,t.RGBA_ASTC_8x6_Format=37814,t.RGBA_ASTC_8x8_Format=37815,t.RGBA_ASTC_10x5_Format=37816,t.RGBA_ASTC_10x6_Format=37817,t.RGBA_ASTC_10x8_Format=37818,t.RGBA_ASTC_10x10_Format=37819,t.RGBA_ASTC_12x10_Format=37820,t.RGBA_ASTC_12x12_Format=37821,t.LoopOnce=2200,t.LoopRepeat=2201,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=2400,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=0,t.TriangleStripDrawMode=1,t.TriangleFanDrawMode=2,t.LinearEncoding=3e3,t.sRGBEncoding=3001,t.GammaEncoding=3007,t.RGBEEncoding=3002,t.LogLuvEncoding=3003,t.RGBM7Encoding=3004,t.RGBM16Encoding=3005,t.RGBDEncoding=3006,t.BasicDepthPacking=3200,t.RGBADepthPacking=3201,t.CubeGeometry=F,t.Face4=function(t,e,r,n,i,o,s){return console.warn(\"THREE.Face4 has been removed. A THREE.Face3 will be created instead.\"),new _(t,e,r,i,o,s)},t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=function(t){return console.warn(\"THREE.MeshFaceMaterial has been removed. Use an Array instead.\"),t},t.MultiMaterial=function(t){return void 0===t&&(t=[]),console.warn(\"THREE.MultiMaterial has been removed. Use an Array instead.\"),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},t.PointCloud=function(t,e){return console.warn(\"THREE.PointCloud has been renamed to THREE.Points.\"),new le(t,e)},t.Particle=function(t){return console.warn(\"THREE.Particle has been renamed to THREE.Sprite.\"),new te(t)},t.ParticleSystem=function(t,e){return console.warn(\"THREE.ParticleSystem has been renamed to THREE.Points.\"),new le(t,e)},t.PointCloudMaterial=function(t){return console.warn(\"THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.\"),new ce(t)},t.ParticleBasicMaterial=function(t){return console.warn(\"THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.\"),new ce(t)},t.ParticleSystemMaterial=function(t){return console.warn(\"THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.\"),new ce(t)},t.Vertex=function(t,e,r){return console.warn(\"THREE.Vertex has been removed. Use THREE.Vector3 instead.\"),new o(t,e,r)},t.DynamicBufferAttribute=function(t,e){return console.warn(\"THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.\"),new S(t,e).setDynamic(!0)},t.Int8Attribute=function(t,e){return console.warn(\"THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.\"),new E(t,e)},t.Uint8Attribute=function(t,e){return console.warn(\"THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.\"),new T(t,e)},t.Uint8ClampedAttribute=function(t,e){return console.warn(\"THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.\"),new A(t,e)},t.Int16Attribute=function(t,e){return console.warn(\"THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.\"),new R(t,e)},t.Uint16Attribute=function(t,e){return console.warn(\"THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.\"),new k(t,e)},t.Int32Attribute=function(t,e){return console.warn(\"THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.\"),new C(t,e)},t.Uint32Attribute=function(t,e){return console.warn(\"THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.\"),new L(t,e)},t.Float32Attribute=function(t,e){return console.warn(\"THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.\"),new P(t,e)},t.Float64Attribute=function(t,e){return console.warn(\"THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.\"),new D(t,e)},t.ClosedSplineCurve3=wi,t.SplineCurve3=xi,t.Spline=bi,t.AxisHelper=function(t){return console.warn(\"THREE.AxisHelper has been renamed to THREE.AxesHelper.\"),new yi(t)},t.BoundingBoxHelper=function(t,e){return console.warn(\"THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.\"),new pi(t,e)},t.EdgesHelper=function(t,e){return console.warn(\"THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.\"),new ae(new lr(t.geometry),new oe({color:void 0!==e?e:16777215}))},t.WireframeHelper=function(t,e){return console.warn(\"THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.\"),new ae(new me(t.geometry),new oe({color:void 0!==e?e:16777215}))},t.XHRLoader=function(t){return console.warn(\"THREE.XHRLoader has been renamed to THREE.FileLoader.\"),new Ar(t)},t.BinaryTextureLoader=function(t){return console.warn(\"THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.\"),new kr(t)},t.GeometryUtils={merge:function(t,e,r){if(console.warn(\"THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.\"),e.isMesh){e.matrixAutoUpdate&&e.updateMatrix();var n=e.matrix;e=e.geometry}t.merge(e,n,r)},center:function(t){return console.warn(\"THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.\"),t.center()}},t.ImageUtils={crossOrigin:void 0,loadTexture:function(t,e,r,n){console.warn(\"THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.\");var i=new Pr;return i.setCrossOrigin(this.crossOrigin),t=i.load(t,r,void 0,n),e&&(t.mapping=e),t},loadTextureCube:function(t,e,r,n){console.warn(\"THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.\");var i=new Lr;return i.setCrossOrigin(this.crossOrigin),t=i.load(t,r,void 0,n),e&&(t.mapping=e),t},loadCompressedTexture:function(){console.error(\"THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.\")},loadCompressedTextureCube:function(){console.error(\"THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.\")}},t.Projector=function(){console.error(\"THREE.Projector has been moved to /examples/js/renderers/Projector.js.\"),this.projectVector=function(t,e){console.warn(\"THREE.Projector: .projectVector() is now vector.project().\"),t.project(e)},this.unprojectVector=function(t,e){console.warn(\"THREE.Projector: .unprojectVector() is now vector.unproject().\"),t.unproject(e)},this.pickingRay=function(){console.error(\"THREE.Projector: .pickingRay() is now raycaster.setFromCamera().\")}},t.CanvasRenderer=function(){console.error(\"THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js\"),this.domElement=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},t.SceneUtils={createMultiMaterialObject:function(){console.error(\"THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js\")},detach:function(){console.error(\"THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js\")},attach:function(){console.error(\"THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js\")}},t.LensFlare=function(){console.error(\"THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js\")},Object.defineProperty(t,\"__esModule\",{value:!0})}),function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e(t.vega=t.vega||{})}(this,function(t){\"use strict\";var e=function(t,e,r){return t.fields=e||[],t.fname=r,t};function r(t){return null==t?null:t.fname}function n(t){return null==t?null:t.fields}var i=function(t){throw Error(t)},o=function(t){var e,r,n,o=[],s=null,a=0,u=t.length,c=\"\";function l(){o.push(c+t.substring(e,r)),c=\"\",e=r+1}for(t+=\"\",e=r=0;r<u;++r)if(\"\\\\\"===(n=t[r]))c+=t.substring(e,r),e=++r;else if(n===s)l(),s=null,a=-1;else{if(s)continue;e===a&&'\"'===n?(e=r+1,s=n):e===a&&\"'\"===n?(e=r+1,s=n):\".\"!==n||a?\"[\"===n?(e<r&&l(),a=e=r+1):\"]\"===n&&(a||i(\"Access path missing open bracket: \"+t),0<a&&l(),a=0,e=r+1):e<r?l():e=r+1}return a&&i(\"Access path missing closing bracket: \"+t),s&&i(\"Access path missing closing quote: \"+t),e<r&&(r++,l()),o},s=Array.isArray,a=function(t){return t===Object(t)},u=function(t){return\"string\"==typeof t};function c(t){return s(t)?\"[\"+t.map(c)+\"]\":a(t)||u(t)?JSON.stringify(t).replace(\"\\u2028\",\"\\\\u2028\").replace(\"\\u2029\",\"\\\\u2029\"):t}var l=function(t,r){var n=o(t),i=\"return _[\"+n.map(c).join(\"][\")+\"];\";return e(Function(\"_\",i),[t=1===n.length?n[0]:t],r||t)},h=[],f=l(\"id\"),d=e(function(t){return t},h,\"identity\"),p=e(function(){return 0},h,\"zero\"),m=e(function(){return 1},h,\"one\"),g=e(function(){return!0},h,\"true\"),v=e(function(){return!1},h,\"false\");function y(t,e,r){var n=[e].concat([].slice.call(r));console[t].apply(console,n)}var w=1,x=function(t){var e=t||0;return{level:function(t){return arguments.length?(e=+t,this):e},error:function(){return w<=e&&y(\"error\",\"ERROR\",arguments),this},warn:function(){return 2<=e&&y(\"warn\",\"WARN\",arguments),this},info:function(){return 3<=e&&y(\"log\",\"INFO\",arguments),this},debug:function(){return 4<=e&&y(\"log\",\"DEBUG\",arguments),this}}},b=function(t){return t[t.length-1]},_=function(t){return null==t||\"\"===t?null:+t};function M(t){return function(e){return t*Math.exp(e)}}function S(t){return function(e){return Math.log(t*e)}}function E(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function T(t,e,r,n){var i=r(t[0]),o=r(b(t)),s=(o-i)*e;return[n(i-s),n(o-s)]}function A(t,e){return T(t,e,_,d)}function R(t,e){var r=Math.sign(t[0]);return T(t,e,S(r),M(r))}function k(t,e,r){return T(t,e,E(r),E(1/r))}function C(t,e,r,n,i){var o=n(t[0]),s=n(b(t)),a=null!=e?n(e):(o+s)/2;return[i(a+(o-a)*r),i(a+(s-a)*r)]}function L(t,e,r){return C(t,e,r,_,d)}function P(t,e,r){var n=Math.sign(t[0]);return C(t,e,r,S(n),M(n))}function D(t,e,r,n){return C(t,e,r,E(n),E(1/n))}var O=function(t){return null!=t?s(t)?t:[t]:[]},N=function(t){return\"function\"==typeof t},I=function(t,r){var i,s,a,u,l,h,f,d,p,m=[],g=(t=O(t)).map(function(t,e){return null==t?null:(m.push(e),N(t)?t:o(t).map(c).join(\"][\"))}),v=m.length-1,y=O(r),w=\"var u,v;return \";if(v<0)return null;for(s=0;s<=v;++s)a=g[i=m[s]],N(a)?(u=\"(u=this.\"+(h=\"f\"+i)+\"(a))\",l=\"(v=this.\"+h+\"(b))\",(f=f||{})[h]=a):(u=\"(u=a[\"+a+\"])\",l=\"(v=b[\"+a+\"])\"),h=\"((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))\",\"descending\"!==y[i]?d=-(p=1):(p=-1,d=1),w+=\"(\"+u+\"<\"+l+\"||u==null)&&v!=null?\"+d+\":(u>v||v==null)&&u!=null?\"+p+\":\"+h+\"!==u&&v===v?\"+d+\":v!==v&&u===u?\"+p+(i<v?\":\":\":0\");return a=Function(\"a\",\"b\",w+\";\"),f&&(a=a.bind(f)),t=t.reduce(function(t,e){return N(e)?(n(e)||[]).forEach(function(e){t[e]=1}):null!=e&&(t[e+\"\"]=1),t},{}),e(a,Object.keys(t))},F=function(t){return N(t)?t:function(){return t}},z=function(t,e){var r,n;function i(){e(n),r=n=null}return function(e){n=e,r&&clearTimeout(r),r=setTimeout(i,t)}},U=function(t){for(var e,r,n=1,i=arguments.length;n<i;++n)for(r in e=arguments[n])t[r]=e[r];return t},j=function(t,e){var r,n,i,o,s,a=-1,u=t.length;if(null==e){for(;++a<u;)if(null!=(n=t[a])&&n<=n){r=i=n;break}for(o=s=a;++a<u;)null!=(n=t[a])&&(n<r&&(r=n,o=a),i<n&&(i=n,s=a))}else{for(;++a<u;)if(null!=(n=e(t[a],a,t))&&n<=n){r=i=n;break}for(o=s=a;++a<u;)null!=(n=e(t[a],a,t))&&(n<r&&(r=n,o=a),i<n&&(i=n,s=a))}return[o,s]},V={},B=function(t){var e,r,n={};function i(t){return n.hasOwnProperty(t)&&n[t]!==V}return e={size:0,empty:0,object:n,has:i,get:function(t){return i(t)?n[t]:void 0},set:function(t,r){return i(t)||(++e.size,n[t]===V&&--e.empty),n[t]=r,this},delete:function(t){return i(t)&&(--e.size,++e.empty,n[t]=V),this},clear:function(){e.size=e.empty=0,e.object=n={}},test:function(t){return arguments.length?(r=t,e):r},clean:function(){var t,i,o={},s=0;for(t in n)(i=n[t])===V||r&&r(i)||(o[t]=i,++s);e.size=s,e.empty=0,e.object=n=o}},t&&Object.keys(t).forEach(function(r){e.set(r,t[r])}),e},H=function(t,e){var r=t.prototype=Object.create(e.prototype);return r.constructor=t,r},G=function(t){return\"boolean\"==typeof t},W=function(t){return\"[object Date]\"===Object.prototype.toString.call(t)},q=function(t){return\"number\"==typeof t},Y=function(t){return\"[object RegExp]\"===Object.prototype.toString.call(t)},X=function(t,r){t&&(t=r?O(t).map(function(t){return t.replace(/\\\\(.)/g,\"$1\")}):O(t));var n=t&&t.length?Function(\"_\",\"return ''+\"+t.map(function(t){return\"_[\"+(r?c(t):o(t).map(c).join(\"][\"))+\"]\"}).join(\"+'|'+\")+\";\"):function(){return\"\"};return e(n,t,\"key\")},$=function(t,e,r,n){var i=e.length,o=r.length;if(!o)return e;if(!i)return r;for(var s=n||new e.constructor(i+o),a=0,u=0,c=0;a<i&&u<o;++c)s[c]=0<t(e[a],r[u])?r[u++]:e[a++];for(;a<i;++a,++c)s[c]=e[a];for(;u<o;++u,++c)s[c]=r[u];return s},J=function(t,e){for(var r=\"\";0<=--e;)r+=t;return r},Z=function(t,e,r,n){var i=r||\" \",o=t+\"\",s=e-o.length;return s<=0?o:\"left\"===n?J(i,s)+o:\"center\"===n?J(i,~~(s/2))+o+J(i,Math.ceil(s/2)):o+J(i,s)},Q=function(t){return null==t||\"\"===t?null:!(!t||\"false\"===t||\"0\"===t||!t)};function K(t){return q(t)?t:W(t)?t:Date.parse(t)}var tt=function(t,e){return e=e||K,null==t||\"\"===t?null:e(t)},et=function(t){return null==t||\"\"===t?null:t+\"\"},rt=function(t){for(var e={},r=0,n=t.length;r<n;++r)e[t[r]]=!0;return e},nt=function(t,e,r,n){var i=null!=n?n:\"\\u2026\",o=t+\"\",s=o.length,a=Math.max(0,e-i.length);return s<=e?o:\"left\"===r?i+o.slice(s-a):\"center\"===r?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i},it=function(t,e,r){if(t){var n,i=0,o=t.length;if(e)for(;i<o;++i)(n=e(t[i]))&&r(n,i,t);else t.forEach(r)}};function ot(t){var e=t||d,r=[],n={};return r.add=function(t){var i=e(t);return n[i]||(n[i]=1,r.push(t)),r},r.remove=function(t){var i,o=e(t);return n[o]&&(n[o]=0)<=(i=r.indexOf(t))&&r.splice(i,1),r},r}var st=Symbol(\"vega_id\"),at=1;function ut(t){return!(!t||!ct(t))}function ct(t){return t[st]}function lt(t,e){return t[st]=e,t}function ht(t){var e=t===Object(t)?t:{data:t};return ct(e)?e:lt(e,at++)}function ft(t){return dt(t,ht({}))}function dt(t,e){for(var r in t)e[r]=t[r];return e}function pt(t,e){return lt(e,ct(t))}function mt(t){return t&&t.constructor===gt}function gt(){var t=[],e=[],r=[],n=[],i=[],o=!1;return{constructor:gt,insert:function(e){for(var r=O(e),n=0,i=r.length;n<i;++n)t.push(r[n]);return this},remove:function(t){for(var r=N(t)?n:e,i=O(t),o=0,s=i.length;o<s;++o)r.push(i[o]);return this},modify:function(t,e,n){var o={field:e,value:F(n)};return N(t)?(o.filter=t,i.push(o)):(o.tuple=t,r.push(o)),this},encode:function(t,e){return N(t)?i.push({filter:t,field:e}):r.push({tuple:t,field:e}),this},reflow:function(){return o=!0,this},pulse:function(s,a){var u,c,l,h,f,d,p;for(c=0,l=t.length;c<l;++c)s.add.push(ht(t[c]));for(u={},c=0,l=e.length;c<l;++c)u[ct(d=e[c])]=d;for(c=0,l=n.length;c<l;++c)f=n[c],a.forEach(function(t){f(t)&&(u[ct(t)]=t)});for(p in u)s.rem.push(u[p]);function m(t,e,r){r?t[e]=r(t):s.encode=e,o||(u[ct(t)]=t)}for(u={},c=0,l=r.length;c<l;++c)m((h=r[c]).tuple,h.field,h.value),s.modifies(h.field);for(c=0,l=i.length;c<l;++c)f=(h=i[c]).filter,a.forEach(function(t){f(t)&&m(t,h.field,h.value)}),s.modifies(h.field);if(o)s.mod=e.length||n.length?a.filter(function(t){return u.hasOwnProperty(ct(t))}):a.slice();else for(p in u)s.mod.push(u[p]);return s}}}var vt=\"_:mod:_\";function yt(){Object.defineProperty(this,vt,{writable:!0,value:{}})}var wt=yt.prototype;wt.set=function(t,e,r,n){var i=this[t],o=this[vt];return null!=e&&0<=e?(i[e]!==r||n)&&(i[e]=r,o[e+\":\"+t]=-1,o[t]=-1):(i!==r||n)&&(this[t]=r,o[t]=s(r)?1+r.length:-1),this},wt.modified=function(t,e){var r,n=this[vt];if(!arguments.length){for(r in n)if(n[r])return!0;return!1}if(s(t)){for(r=0;r<t.length;++r)if(n[t[r]])return!0;return!1}return null!=e&&0<=e?e+1<n[t]||!!n[e+\":\"+t]:!!n[t]},wt.clear=function(){return this[vt]={},this};var xt=0,bt=new yt;function _t(t,e,r,n){this.id=++xt,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),r&&this.parameters(r,n)}var Mt=_t.prototype;function St(t){return function(e){var r=this.flags;return 0===arguments.length?!!(r&t):(this.flags=e?r|t:r&~t,this)}}Mt.targets=function(){return this._targets||(this._targets=ot(f))},Mt.set=function(t){return this.value!==t?(this.value=t,1):0},Mt.skip=St(1),Mt.modified=St(2),Mt.parameters=function(t,e){e=!1!==e;var r,n,o,a,u=this,c=u._argval=u._argval||new yt,l=u._argops=u._argops||[],h=[];function f(t,r,n){n instanceof _t?(n!==u&&(e&&n.targets().add(u),h.push(n)),l.push({op:n,name:t,index:r})):c.set(t,r,n)}for(r in t)if(n=t[r],\"pulse\"===r)O(n).forEach(function(t){t instanceof _t?t!==u&&(t.targets().add(u),h.push(t)):i(\"Pulse parameters must be operator instances.\")}),u.source=n;else if(s(n))for(c.set(r,-1,Array(o=n.length)),a=0;a<o;++a)f(r,a,n[a]);else f(r,-1,n);return this.marshall().clear(),h},Mt.marshall=function(t){var e,r,n,i,o,s=this._argval||bt,a=this._argops;if(a&&(n=a.length))for(r=0;r<n;++r)o=(i=(e=a[r]).op).modified()&&i.stamp===t,s.set(e.name,e.index,i.value,o);return s},Mt.evaluate=function(t){if(this._update){var e=this.marshall(t.stamp),r=this._update(e,t);if(e.clear(),r!==this.value)this.value=r;else if(!this.modified())return t.StopPropagation}},Mt.run=function(t){return t.stamp<=this.stamp?t.StopPropagation:(this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.stamp=t.stamp,(this.pulse=e)||t);var e};var Et=0;function Tt(t,e,r){this.id=++Et,this.value=null,r&&(this.receive=r),t&&(this._filter=t),e&&(this._apply=e)}function At(t,e,r){return new Tt(t,e,r)}var Rt=Tt.prototype;Rt._filter=g,Rt._apply=d,Rt.targets=function(){return this._targets||(this._targets=ot(f))},Rt.consume=function(t){return arguments.length?(this._consume=!!t,this):!!this._consume},Rt.receive=function(t){if(this._filter(t)){for(var e=this.value=this._apply(t),r=this._targets,n=r?r.length:0,i=0;i<n;++i)r[i].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},Rt.filter=function(t){var e=At(t);return this.targets().add(e),e},Rt.apply=function(t){var e=At(null,t);return this.targets().add(e),e},Rt.merge=function(){var t=At();this.targets().add(t);for(var e=0,r=arguments.length;e<r;++e)arguments[e].targets().add(t);return t},Rt.throttle=function(t){var e=-1;return this.filter(function(){var r=Date.now();return t<r-e?(e=r,1):0})},Rt.debounce=function(t){var e=At();return this.targets().add(At(null,null,z(t,function(t){var r=t.dataflow;e.receive(t),r&&r.run&&r.run()}))),e},Rt.between=function(t,e){var r=!1;return t.targets().add(At(null,null,function(){r=!0})),e.targets().add(At(null,null,function(){r=!1})),this.filter(function(){return r})};var kt=\"$\";function Ct(){}function Lt(t,e){var r=new Ct;if(t instanceof Ct)t.each(function(t,e){r.set(e,t)});else if(Array.isArray(t)){var n,i=-1,o=t.length;if(null==e)for(;++i<o;)r.set(i,t[i]);else for(;++i<o;)r.set(e(n=t[i],i,t),n)}else if(t)for(var s in t)r.set(s,t[s]);return r}function Pt(){return{}}function Dt(t,e,r){t[e]=r}function Ot(){return Lt()}function Nt(t,e,r){t.set(e,r)}function It(){}Ct.prototype=Lt.prototype={constructor:Ct,has:function(t){return kt+t in this},get:function(t){return this[kt+t]},set:function(t,e){return this[kt+t]=e,this},remove:function(t){var e=kt+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===kt&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===kt&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===kt&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===kt&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===kt&&++t;return t},empty:function(){for(var t in this)if(t[0]===kt)return!1;return!0},each:function(t){for(var e in this)e[0]===kt&&t(this[e],e.slice(1),this)}};var Ft=Lt.prototype;It.prototype=(function(t,e){var r=new It;if(t instanceof It)t.each(function(t){r.add(t)});else if(t){var n=-1,i=t.length;if(null==e)for(;++n<i;)r.add(t[n]);else for(;++n<i;)r.add(e(t[n],n,t))}return r}).prototype={constructor:It,has:Ft.has,add:function(t){return this[kt+(t+=\"\")]=t,this},remove:Ft.remove,clear:Ft.clear,values:Ft.keys,size:Ft.size,empty:Ft.empty,each:Ft.each};var zt={value:function(){}};function Ut(){for(var t,e=0,r=arguments.length,n={};e<r;++e){if(!(t=arguments[e]+\"\")||t in n)throw new Error(\"illegal type: \"+t);n[t]=[]}return new jt(n)}function jt(t){this._=t}function Vt(t,e){for(var r,n=0,i=t.length;n<i;++n)if((r=t[n]).name===e)return r.value}function Bt(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=zt,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=r&&t.push({name:e,value:r}),t}jt.prototype=Ut.prototype={constructor:jt,on:function(t,e){var r,n,i=this._,o=(n=i,(t+\"\").trim().split(/^|\\s+/).map(function(t){var e=\"\",r=t.indexOf(\".\");if(0<=r&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);return{type:t,name:e}})),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&\"function\"!=typeof e)throw new Error(\"invalid callback: \"+e);for(;++s<a;)if(r=(t=o[s]).type)i[r]=Bt(i[r],t.name,e);else if(null==e)for(r in i)i[r]=Bt(i[r],t.name,null);return this}for(;++s<a;)if((r=(t=o[s]).type)&&(r=Vt(i[r],t.name)))return r},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new jt(t)},call:function(t,e){if(0<(r=arguments.length-2))for(var r,n,i=new Array(r),o=0;o<r;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);for(o=0,r=(n=this._[t]).length;o<r;++o)n[o].value.apply(e,i)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);for(var n=this._[t],i=0,o=n.length;i<o;++i)n[i].value.apply(e,r)}};var Ht=function(t,e){var r,n,i,o,s=Ut(\"beforesend\",\"progress\",\"load\",\"error\"),a=Lt(),u=new XMLHttpRequest,c=null,l=null,h=0;function f(t){var e,n,o,a=u.status;if(!a&&((o=(n=u).responseType)&&\"text\"!==o?n.response:n.responseText)||200<=a&&a<300||304===a){if(i)try{e=i.call(r,u)}catch(t){return void s.call(\"error\",r,t)}else e=u;s.call(\"load\",r,e)}else s.call(\"error\",r,t)}if(\"undefined\"==typeof XDomainRequest||\"withCredentials\"in u||!/^(http(s)?:)?\\/\\//.test(t)||(u=new XDomainRequest),\"onload\"in u?u.onload=u.onerror=u.ontimeout=f:u.onreadystatechange=function(t){3<u.readyState&&f(t)},u.onprogress=function(t){s.call(\"progress\",r,t)},r={header:function(t,e){return t=(t+\"\").toLowerCase(),arguments.length<2?a.get(t):(null==e?a.remove(t):a.set(t,e+\"\"),r)},mimeType:function(t){return arguments.length?(n=null==t?null:t+\"\",r):n},responseType:function(t){return arguments.length?(o=t,r):o},timeout:function(t){return arguments.length?(h=+t,r):h},user:function(t){return arguments.length<1?c:(c=null==t?null:t+\"\",r)},password:function(t){return arguments.length<1?l:(l=null==t?null:t+\"\",r)},response:function(t){return i=t,r},get:function(t,e){return r.send(\"GET\",t,e)},post:function(t,e){return r.send(\"POST\",t,e)},send:function(e,i,f){var d;return u.open(e,t,!0,c,l),null==n||a.has(\"accept\")||a.set(\"accept\",n+\",*/*\"),u.setRequestHeader&&a.each(function(t,e){u.setRequestHeader(e,t)}),null!=n&&u.overrideMimeType&&u.overrideMimeType(n),null!=o&&(u.responseType=o),0<h&&(u.timeout=h),null==f&&\"function\"==typeof i&&(f=i,i=null),null!=f&&1===f.length&&(d=f,f=function(t,e){d(null==t?e:null)}),null!=f&&r.on(\"error\",f).on(\"load\",function(t){f(null,t)}),s.call(\"beforesend\",r,u),u.send(null==i?null:i),r},abort:function(){return u.abort(),r},on:function(){var t=s.on.apply(s,arguments);return t===s?r:t}},null!=e){if(\"function\"!=typeof e)throw new Error(\"invalid callback: \"+e);return r.get(e)}return r},Gt={},Wt={},qt=34,Yt=10,Xt=13;function $t(t){return new Function(\"d\",\"return {\"+t.map(function(t,e){return JSON.stringify(t)+\": d[\"+e+\"]\"}).join(\",\")+\"}\")}var Jt=function(t){var e=new RegExp('[\"'+t+\"\\n\\r]\"),r=t.charCodeAt(0);function n(t,e){var n,i=[],o=t.length,s=0,a=0,u=o<=0,c=!1;function l(){if(u)return Wt;if(c)return c=!1,Gt;var e,n,i=s;if(t.charCodeAt(i)===qt){for(;s++<o&&t.charCodeAt(s)!==qt||t.charCodeAt(++s)===qt;);return(e=s)>=o?u=!0:(n=t.charCodeAt(s++))===Yt?c=!0:n===Xt&&(c=!0,t.charCodeAt(s)===Yt&&++s),t.slice(i+1,e-1).replace(/\"\"/g,'\"')}for(;s<o;){if((n=t.charCodeAt(e=s++))===Yt)c=!0;else if(n===Xt)c=!0,t.charCodeAt(s)===Yt&&++s;else if(n!==r)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===Yt&&--o,t.charCodeAt(o-1)===Xt&&--o;(n=l())!==Wt;){for(var h=[];n!==Gt&&n!==Wt;)h.push(n),n=l();e&&null==(h=e(h,a++))||i.push(h)}return i}function i(e){return e.map(o).join(t)}function o(t){return null==t?\"\":e.test(t+=\"\")?'\"'+t.replace(/\"/g,'\"\"')+'\"':t}return{parse:function(t,e){var r,i,o=n(t,function(t,n){if(r)return r(t,n-1);var o,s,a;i=t,r=e?(s=e,a=$t(o=t),function(t,e){return s(a(t),e,o)}):$t(t)});return o.columns=i||[],o},parseRows:n,format:function(e,r){var n,i,s;return null==r&&(n=e,i=Object.create(null),s=[],n.forEach(function(t){for(var e in t)e in i||s.push(i[e]=e)}),r=s),[r.map(o).join(t)].concat(e.map(function(e){return r.map(function(t){return o(e[t])}).join(t)})).join(\"\\n\")},formatRows:function(t){return t.map(i).join(\"\\n\")}}},Zt=(Jt(\",\"),Jt(\"\\t\"),/^([A-Za-z]+:)?\\/\\//),Qt=\"file://\",Kt=[\"mimeType\",\"responseType\",\"user\",\"password\"],te=function(t){return{options:t||{},sanitize:ne,load:re,file:oe,http:ie}};function ee(t,e){return U({},t.options,e)}function re(t,e){var r=this;return r.sanitize(t,e).then(function(t){var n=t.href;return t.localFile?r.file(n):r.http(n,e)})}function ne(t,e){return e=ee(this,e),new Promise(function(r,n){var i,o,s,a,u={href:null};null!=t&&\"string\"==typeof t?(o=Zt.test(t),(a=e.baseURL)&&!o&&(ae(t,\"/\")||\"/\"===a[a.length-1]||(t=\"/\"+t),t=a+t),s=(i=ae(t,Qt))||\"file\"===e.mode||\"http\"!==e.mode&&!o&&se(),i?t=t.slice(Qt.length):ae(t,\"//\")&&(\"file\"===e.defaultProtocol?(t=t.slice(2),s=!0):t=(e.defaultProtocol||\"http\")+\":\"+t),Object.defineProperty(u,\"localFile\",{value:!!s}),u.href=t,e.target&&(u.target=e.target+\"\"),r(u)):n(\"Sanitize failure, invalid URI: \"+c(t))})}function ie(t,e){return e=ee(this,e),new Promise(function(r,n){var i,o=Ht(t);for(i in e.headers)o.header(i,e.headers[i]);Kt.forEach(function(t){e[t]&&o[t](e[t])}),o.on(\"error\",function(e){n(e||\"Error loading URL: \"+t)}).on(\"load\",function(t){var e=t&&t.responseText;t&&0!==t.status?r(e):n(e||\"Error\")}).get()})}function oe(t){return new Promise(function(e,r){var n=se();n?n.readFile(t,function(t,n){t?r(t):e(n)}):r(\"No file system access for \"+t)})}function se(){var t=\"function\"==typeof require&&require(\"fs\");return t&&N(t.readFile)?t:null}function ae(t,e){return null!=t&&0===t.lastIndexOf(e,0)}var ue={boolean:Q,integer:_,number:_,date:tt,string:et,unknown:d},ce=[function(t){return\"true\"===t||\"false\"===t||!0===t||!1===t},function(t){return de(t)&&(t=+t)==~~t},de,function(t){return!isNaN(Date.parse(t))}],le=[\"boolean\",\"integer\",\"number\",\"date\"];function he(t,e){if(!t||!t.length)return\"unknown\";var r,n,i,o,s,a=ce.slice();for(n=0,i=t.length;n<i;++n){for(r=e?t[n][e]:t[n],o=0;o<a.length;++o)null==(s=r)||s!=s||a[o](r)||(a.splice(o,1),--o);if(0===a.length)return\"string\"}return le[ce.indexOf(a[0])]}function fe(t,e){return e.reduce(function(e,r){return e[r]=he(t,r),e},{})}function de(t){return!(isNaN(+t)||t instanceof Date)}function pe(t){return function(e,r){var n={delimiter:t};return me(e,r?U(r,n):n)}}function me(t,e){return e.header&&(t=e.header.map(c).join(e.delimiter)+\"\\n\"+t),Jt(e.delimiter).parse(t+\"\")}var ge=function(t,e){var r,n=e&&e.property?l(e.property):d;return!a(t)||(r=t,\"function\"==typeof Buffer&&N(Buffer.isBuffer)&&Buffer.isBuffer(r))?n(JSON.parse(t)):n(t)},ve=function(t){return t},ye=function(t){if(null==t)return ve;var e,r,n=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=r=0);var u=2,c=t.length,l=new Array(c);for(l[0]=(e+=t[0])*n+o,l[1]=(r+=t[1])*i+s;u<c;)l[u]=t[u],++u;return l}},we=function(t,e){for(var r,n=t.length,i=n-e;i<--n;)r=t[i],t[i++]=t[n],t[n]=r},xe=function(t,e){return\"GeometryCollection\"===e.type?{type:\"FeatureCollection\",features:e.geometries.map(function(e){return be(t,e)})}:be(t,e)};function be(t,e){var r=e.id,n=e.bbox,i=null==e.properties?{}:e.properties,o=_e(t,e);return null==r&&null==n?{type:\"Feature\",properties:i,geometry:o}:null==n?{type:\"Feature\",id:r,properties:i,geometry:o}:{type:\"Feature\",id:r,bbox:n,properties:i,geometry:o}}function _e(t,e){var r=ye(t.transform),n=t.arcs;function i(t,e){e.length&&e.pop();for(var i=n[t<0?~t:t],o=0,s=i.length;o<s;++o)e.push(r(i[o],o));t<0&&we(e,s)}function o(t){return r(t)}function s(t){for(var e=[],r=0,n=t.length;r<n;++r)i(t[r],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(a)}return function t(e){var r,n=e.type;switch(n){case\"GeometryCollection\":return{type:n,geometries:e.geometries.map(t)};case\"Point\":r=o(e.coordinates);break;case\"MultiPoint\":r=e.coordinates.map(o);break;case\"LineString\":r=s(e.arcs);break;case\"MultiLineString\":r=e.arcs.map(s);break;case\"Polygon\":r=u(e.arcs);break;case\"MultiPolygon\":r=e.arcs.map(u);break;default:return null}return{type:n,coordinates:r}}(e)}var Me=function(t){return _e(t,(function(t,e,r){var n,i,o;if(1<arguments.length)n=function(t,e,r){var n,i=[],o=[];function s(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:n})}function a(t){t.forEach(s)}function u(t){t.forEach(a)}return function t(e){switch((n=e).type){case\"GeometryCollection\":e.geometries.forEach(t);break;case\"LineString\":a(e.arcs);break;case\"MultiLineString\":case\"Polygon\":u(e.arcs);break;case\"MultiPolygon\":e.arcs.forEach(u)}}(e),o.forEach(null==r?function(t){i.push(t[0].i)}:function(t){r(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}(0,e,r);else for(i=0,n=new Array(o=t.arcs.length);i<o;++i)n[i]=i;return{type:\"MultiLineString\",arcs:function(t,e){var r={},n={},i={},o=[],s=-1;function a(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){r[t<0?~t:t]=1}),o.push(i)}}return e.forEach(function(r,n){var i,o=t.arcs[r<0?~r:r];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=r,e[n]=i)}),e.forEach(function(e){var r,o,s=function(e){var r,n=t.arcs[e<0?~e:e],i=n[0];return t.transform?(r=[0,0],n.forEach(function(t){r[0]+=t[0],r[1]+=t[1]})):r=n[n.length-1],e<0?[r,i]:[i,r]}(e),a=s[0],u=s[1];if(r=i[a])if(delete i[r.end],r.push(e),r.end=u,o=n[u]){delete n[o.start];var c=o===r?r:r.concat(o);n[c.start=r.start]=i[c.end=o.end]=c}else n[r.start]=i[r.end]=r;else if(r=n[u])if(delete n[r.start],r.unshift(e),r.start=a,o=i[a]){delete i[o.end];var l=o===r?r:o.concat(r);n[l.start=o.start]=i[l.end=r.end]=l}else n[r.start]=i[r.end]=r;else n[(r=[e]).start=a]=i[r.end=u]=r}),a(i,n),a(n,i),e.forEach(function(t){r[t<0?~t:t]||o.push([t])}),o}(t,n)}}).apply(this,arguments))},Se={dsv:me,csv:pe(\",\"),tsv:pe(\"\\t\"),json:ge,topojson:function(t,e){var r,n,o;return t=ge(t,e),r=e&&(o=e.feature)?xe:e&&(o=e.mesh)?Me:i(\"Missing TopoJSON feature or mesh parameter.\"),(n=(n=t.objects[o])?r(t,n):i(\"Invalid TopoJSON object: \"+o))&&n.features||[n]}},Ee=function(t,e){return 1<arguments.length?(Se[t]=e,this):Se.hasOwnProperty(t)?Se[t]:null},Te=new Date,Ae=new Date;function Re(t,e,r,n){function i(e){return t(e=new Date(+e)),e}return(i.floor=i).ceil=function(r){return t(r=new Date(r-1)),e(r,1),t(r),r},i.round=function(t){var e=i(t),r=i.ceil(t);return t-e<r-t?e:r},i.offset=function(t,r){return e(t=new Date(+t),null==r?1:Math.floor(r)),t},i.range=function(r,n,o){var s,a=[];if(r=i.ceil(r),o=null==o?1:Math.floor(o),!(r<n&&0<o))return a;for(;a.push(s=new Date(+r)),e(r,o),t(r),s<r&&r<n;);return a},i.filter=function(r){return Re(function(e){if(e<=e)for(;t(e),!r(e);)e.setTime(e-1)},function(t,n){if(t<=t)if(n<0)for(;++n<=0;)for(;e(t,-1),!r(t););else for(;0<=--n;)for(;e(t,1),!r(t););})},r&&(i.count=function(e,n){return Te.setTime(+e),Ae.setTime(+n),t(Te),t(Ae),Math.floor(r(Te,Ae))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?i.filter(n?function(e){return n(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var ke=Re(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});ke.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?Re(function(e){e.setTime(Math.floor(e/t)*t)},function(e,r){e.setTime(+e+r*t)},function(e,r){return(r-e)/t}):ke:null};var Ce=6e4,Le=36e5,Pe=6048e5,De=Re(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Oe=Re(function(t){t.setTime(Math.floor(t/Ce)*Ce)},function(t,e){t.setTime(+t+e*Ce)},function(t,e){return(e-t)/Ce},function(t){return t.getMinutes()}),Ne=Re(function(t){var e=t.getTimezoneOffset()*Ce%Le;e<0&&(e+=Le),t.setTime(Math.floor((+t-e)/Le)*Le+e)},function(t,e){t.setTime(+t+e*Le)},function(t,e){return(e-t)/Le},function(t){return t.getHours()}),Ie=Re(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ce)/864e5},function(t){return t.getDate()-1});function Fe(t){return Re(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ce)/Pe})}var ze=Fe(0),Ue=Fe(1),je=(Fe(2),Fe(3),Fe(4)),Ve=(Fe(5),Fe(6),Re(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),Be=Re(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Be.every=function(t){return isFinite(t=Math.floor(t))&&0<t?Re(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,r){e.setFullYear(e.getFullYear()+r*t)}):null};var He=Re(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Ce)},function(t,e){return(e-t)/Ce},function(t){return t.getUTCMinutes()}),Ge=Re(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Le)},function(t,e){return(e-t)/Le},function(t){return t.getUTCHours()}),We=Re(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1});function qe(t){return Re(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Pe})}var Ye=qe(0),Xe=qe(1),$e=(qe(2),qe(3),qe(4)),Je=(qe(5),qe(6),Re(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),Ze=Re(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});function Qe(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ke(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function tr(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}Ze.every=function(t){return isFinite(t=Math.floor(t))&&0<t?Re(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCFullYear(e.getUTCFullYear()+r*t)}):null};var er,rr,nr,ir,or,sr={\"-\":\"\",_:\" \",0:\"0\"},ar=/^\\s*\\d+/,ur=/^%/,cr=/[\\\\^$*+?|[\\]().{}]/g;function lr(t,e,r){var n=t<0?\"-\":\"\",i=(n?-t:t)+\"\",o=i.length;return n+(o<r?new Array(r-o+1).join(e)+i:i)}function hr(t){return t.replace(cr,\"\\\\$&\")}function fr(t){return new RegExp(\"^(?:\"+t.map(hr).join(\"|\")+\")\",\"i\")}function dr(t){for(var e={},r=-1,n=t.length;++r<n;)e[t[r].toLowerCase()]=r;return e}function pr(t,e,r){var n=ar.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function mr(t,e,r){var n=ar.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function gr(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function vr(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function yr(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function wr(t,e,r){var n=ar.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function xr(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(68<+n[0]?1900:2e3),r+n[0].length):-1}function br(t,e,r){var n=/^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||\"00\")),r+n[0].length):-1}function _r(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function Mr(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Sr(t,e,r){var n=ar.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function Er(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function Tr(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function Ar(t,e,r){var n=ar.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function Rr(t,e,r){var n=ar.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function kr(t,e,r){var n=ar.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Cr(t,e,r){var n=ur.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Lr(t,e,r){var n=ar.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function Pr(t,e,r){var n=ar.exec(e.slice(r));return n?(t.Q=1e3*+n[0],r+n[0].length):-1}function Dr(t,e){return lr(t.getDate(),e,2)}function Or(t,e){return lr(t.getHours(),e,2)}function Nr(t,e){return lr(t.getHours()%12||12,e,2)}function Ir(t,e){return lr(1+Ie.count(Be(t),t),e,3)}function Fr(t,e){return lr(t.getMilliseconds(),e,3)}function zr(t,e){return Fr(t,e)+\"000\"}function Ur(t,e){return lr(t.getMonth()+1,e,2)}function jr(t,e){return lr(t.getMinutes(),e,2)}function Vr(t,e){return lr(t.getSeconds(),e,2)}function Br(t){var e=t.getDay();return 0===e?7:e}function Hr(t,e){return lr(ze.count(Be(t),t),e,2)}function Gr(t,e){var r=t.getDay();return t=4<=r||0===r?je(t):je.ceil(t),lr(je.count(Be(t),t)+(4===Be(t).getDay()),e,2)}function Wr(t){return t.getDay()}function qr(t,e){return lr(Ue.count(Be(t),t),e,2)}function Yr(t,e){return lr(t.getFullYear()%100,e,2)}function Xr(t,e){return lr(t.getFullYear()%1e4,e,4)}function $r(t){var e=t.getTimezoneOffset();return(0<e?\"-\":(e*=-1,\"+\"))+lr(e/60|0,\"0\",2)+lr(e%60,\"0\",2)}function Jr(t,e){return lr(t.getUTCDate(),e,2)}function Zr(t,e){return lr(t.getUTCHours(),e,2)}function Qr(t,e){return lr(t.getUTCHours()%12||12,e,2)}function Kr(t,e){return lr(1+We.count(Ze(t),t),e,3)}function tn(t,e){return lr(t.getUTCMilliseconds(),e,3)}function en(t,e){return tn(t,e)+\"000\"}function rn(t,e){return lr(t.getUTCMonth()+1,e,2)}function nn(t,e){return lr(t.getUTCMinutes(),e,2)}function on(t,e){return lr(t.getUTCSeconds(),e,2)}function sn(t){var e=t.getUTCDay();return 0===e?7:e}function an(t,e){return lr(Ye.count(Ze(t),t),e,2)}function un(t,e){var r=t.getUTCDay();return t=4<=r||0===r?$e(t):$e.ceil(t),lr($e.count(Ze(t),t)+(4===Ze(t).getUTCDay()),e,2)}function cn(t){return t.getUTCDay()}function ln(t,e){return lr(Xe.count(Ze(t),t),e,2)}function hn(t,e){return lr(t.getUTCFullYear()%100,e,2)}function fn(t,e){return lr(t.getUTCFullYear()%1e4,e,4)}function dn(){return\"+0000\"}function pn(){return\"%\"}function mn(t){return+t}function gn(t){return Math.floor(+t/1e3)}function vn(t){return er=function(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,u=t.shortMonths,c=fr(i),l=dr(i),h=fr(o),f=dr(o),d=fr(s),p=dr(s),m=fr(a),g=dr(a),v=fr(u),y=dr(u),w={a:function(t){return s[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Dr,e:Dr,f:zr,H:Or,I:Nr,j:Ir,L:Fr,m:Ur,M:jr,p:function(t){return i[+(12<=t.getHours())]},Q:mn,s:gn,S:Vr,u:Br,U:Hr,V:Gr,w:Wr,W:qr,x:null,X:null,y:Yr,Y:Xr,Z:$r,\"%\":pn},x={a:function(t){return s[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:Jr,e:Jr,f:en,H:Zr,I:Qr,j:Kr,L:tn,m:rn,M:nn,p:function(t){return i[+(12<=t.getUTCHours())]},Q:mn,s:gn,S:on,u:sn,U:an,V:un,w:cn,W:ln,x:null,X:null,y:hn,Y:fn,Z:dn,\"%\":pn},b={a:function(t,e,r){var n=d.exec(e.slice(r));return n?(t.w=p[n[0].toLowerCase()],r+n[0].length):-1},A:function(t,e,r){var n=h.exec(e.slice(r));return n?(t.w=f[n[0].toLowerCase()],r+n[0].length):-1},b:function(t,e,r){var n=v.exec(e.slice(r));return n?(t.m=y[n[0].toLowerCase()],r+n[0].length):-1},B:function(t,e,r){var n=m.exec(e.slice(r));return n?(t.m=g[n[0].toLowerCase()],r+n[0].length):-1},c:function(t,r,n){return S(t,e,r,n)},d:Mr,e:Mr,f:kr,H:Er,I:Er,j:Sr,L:Rr,m:_r,M:Tr,p:function(t,e,r){var n=c.exec(e.slice(r));return n?(t.p=l[n[0].toLowerCase()],r+n[0].length):-1},Q:Lr,s:Pr,S:Ar,u:mr,U:gr,V:vr,w:pr,W:yr,x:function(t,e,n){return S(t,r,e,n)},X:function(t,e,r){return S(t,n,e,r)},y:xr,Y:wr,Z:br,\"%\":Cr};function _(t,e){return function(r){var n,i,o,s=[],a=-1,u=0,c=t.length;for(r instanceof Date||(r=new Date(+r));++a<c;)37===t.charCodeAt(a)&&(s.push(t.slice(u,a)),null!=(i=sr[n=t.charAt(++a)])?n=t.charAt(++a):i=\"e\"===n?\" \":\"0\",(o=e[n])&&(n=o(r,i)),s.push(n),u=a+1);return s.push(t.slice(u,a)),s.join(\"\")}}function M(t,e){return function(r){var n,i,o=tr(1900);if(S(o,t,r+=\"\",0)!=r.length)return null;if(\"Q\"in o)return new Date(o.Q);if(\"p\"in o&&(o.H=o.H%12+12*o.p),\"V\"in o){if(o.V<1||53<o.V)return null;\"w\"in o||(o.w=1),\"Z\"in o?(n=4<(i=(n=Ke(tr(o.y))).getUTCDay())||0===i?Xe.ceil(n):Xe(n),n=We.offset(n,7*(o.V-1)),o.y=n.getUTCFullYear(),o.m=n.getUTCMonth(),o.d=n.getUTCDate()+(o.w+6)%7):(n=4<(i=(n=e(tr(o.y))).getDay())||0===i?Ue.ceil(n):Ue(n),n=Ie.offset(n,7*(o.V-1)),o.y=n.getFullYear(),o.m=n.getMonth(),o.d=n.getDate()+(o.w+6)%7)}else(\"W\"in o||\"U\"in o)&&(\"w\"in o||(o.w=\"u\"in o?o.u%7:\"W\"in o?1:0),i=\"Z\"in o?Ke(tr(o.y)).getUTCDay():e(tr(o.y)).getDay(),o.m=0,o.d=\"W\"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return\"Z\"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Ke(o)):e(o)}}function S(t,e,r,n){for(var i,o,s=0,a=e.length,u=r.length;s<a;){if(u<=n)return-1;if(37===(i=e.charCodeAt(s++))){if(i=e.charAt(s++),!(o=b[i in sr?e.charAt(s++):i])||(n=o(t,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}return w.x=_(r,w),w.X=_(n,w),w.c=_(e,w),x.x=_(r,x),x.X=_(n,x),x.c=_(e,x),{format:function(t){var e=_(t+=\"\",w);return e.toString=function(){return t},e},parse:function(t){var e=M(t+=\"\",Qe);return e.toString=function(){return t},e},utcFormat:function(t){var e=_(t+=\"\",x);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t,Ke);return e.toString=function(){return t},e}}}(t),rr=er.format,nr=er.parse,ir=er.utcFormat,or=er.utcParse,er}vn({dateTime:\"%x, %X\",date:\"%-m/%-d/%Y\",time:\"%-I:%M:%S %p\",periods:[\"AM\",\"PM\"],days:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],shortDays:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],months:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],shortMonths:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]});var yn=\"%Y-%m-%dT%H:%M:%S.%LZ\";Date.prototype.toISOString||ir(yn),+new Date(\"2000-01-01T00:00:00.000Z\")||or(yn);var wn=function(t,e,r){var n=Ee((e=e||{}).type||\"json\");return n||i(\"Unknown data format type: \"+e.type),t=n(t,e),e.parse&&function(t,e,r){if(t.length){r=r||nr;var n,i,o,s,a,u,c,l=t.columns||Object.keys(t[0]);for(\"auto\"===e&&(e=fe(t,l)),n=(l=Object.keys(e)).map(function(t){var n,i,o=e[t];if(o&&(0===o.indexOf(\"date:\")||0===o.indexOf(\"utc:\")))return(\"'\"===(i=(n=o.split(/:(.+)?/,2))[1])[0]&&\"'\"===i[i.length-1]||'\"'===i[0]&&'\"'===i[i.length-1])&&(i=i.slice(1,-1)),\"utc\"===n[0]?or(i):r(i);if(!ue[o])throw Error(\"Illegal format pattern: \"+t+\":\"+o);return ue[o]}),s=0,u=t.length,c=l.length;s<u;++s)for(i=t[s],a=0;a<c;++a)i[o=l[a]]=n[a](i[o])}}(t,e.parse,r),t.hasOwnProperty(\"columns\")&&delete t.columns,t},xn={skip:!0},bn={};function _n(t,e,r){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=r||null}var Mn=_n.prototype;function Sn(t,e){return t?function(r,n){return t(r,n)&&e(r,n)}:e}function En(t,e){var r=[];return it(t,e,function(t){r.push(t)}),r}function Tn(t,e){var r={};return t.visit(e,function(t){r[ct(t)]=1}),function(t){return r[ct(t)]?null:t}}function An(t,e,r,n){var i,o,s,a,u,c=0;for(this.dataflow=t,this.stamp=e,this.fields=null,this.encode=n||null,s=0,a=(this.pulses=r).length;s<a;++s)if((i=r[s]).stamp===e){if(i.fields)for(u in o=this.fields||(this.fields={}),i.fields)o[u]=1;i.changed(this.ADD)&&(c|=this.ADD),i.changed(this.REM)&&(c|=this.REM),i.changed(this.MOD)&&(c|=this.MOD)}this.changes=c}Mn.StopPropagation=bn,Mn.ADD=1,Mn.REM=2,Mn.MOD=4,Mn.ADD_REM=3,Mn.ADD_MOD=5,Mn.ALL=7,Mn.REFLOW=8,Mn.SOURCE=16,Mn.NO_SOURCE=32,Mn.NO_FIELDS=64,Mn.fork=function(t){return new _n(this.dataflow).init(this,t)},Mn.clone=function(){var t=this.fork(7);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(23)},Mn.addAll=function(){var t=this;return this.source&&this.source.length!==this.add.length&&((t=new _n(this.dataflow).init(this)).add=t.source),t},Mn.init=function(t,e){var r=this;return r.stamp=t.stamp,r.encode=t.encode,!t.fields||64&e||(r.fields=t.fields),1&e?(r.addF=t.addF,r.add=t.add):(r.addF=null,r.add=[]),2&e?(r.remF=t.remF,r.rem=t.rem):(r.remF=null,r.rem=[]),4&e?(r.modF=t.modF,r.mod=t.mod):(r.modF=null,r.mod=[]),32&e?(r.srcF=null,r.source=null):(r.srcF=t.srcF,r.source=t.source),r},Mn.runAfter=function(t){this.dataflow.runAfter(t)},Mn.changed=function(t){var e=t||7;return 1&e&&this.add.length||2&e&&this.rem.length||4&e&&this.mod.length},Mn.reflow=function(t){if(t)return this.fork(7).reflow();var e=this.add.length,r=this.source&&this.source.length;return r&&r!==e&&(this.mod=this.source,e&&this.filter(4,Tn(this,1))),this},Mn.modifies=function(t){var e=O(t),r=this.fields||(this.fields={});return e.forEach(function(t){r[t]=!0}),this},Mn.modified=function(t){var e=this.fields;return!(!this.mod.length||!e)&&(arguments.length?s(t)?t.some(function(t){return e[t]}):e[t]:!!e)},Mn.filter=function(t,e){return 1&t&&(this.addF=Sn(this.addF,e)),2&t&&(this.remF=Sn(this.remF,e)),4&t&&(this.modF=Sn(this.modF,e)),16&t&&(this.srcF=Sn(this.srcF,e)),this},Mn.materialize=function(t){var e=this;return 1&(t=t||7)&&e.addF&&(e.add=En(e.add,e.addF),e.addF=null),2&t&&e.remF&&(e.rem=En(e.rem,e.remF),e.remF=null),4&t&&e.modF&&(e.mod=En(e.mod,e.modF),e.modF=null),16&t&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},Mn.visit=function(t,e){var r,n,i=this,o=e;return 16&t?it(i.source,i.srcF,o):(1&t&&it(i.add,i.addF,o),2&t&&it(i.rem,i.remF,o),4&t&&it(i.mod,i.modF,o),8&t&&(r=i.source)&&((n=i.add.length+i.mod.length)===r.length||it(r,n?Tn(i,5):i.srcF,o))),i};var Rn=H(An,_n);function kn(t,e){try{e(t)}catch(e){t.error(e)}}Rn.fork=function(t){var e=new _n(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&e.ADD&&this.visit(e.ADD,function(t){return e.add.push(t)}),t&e.REM&&this.visit(e.REM,function(t){return e.rem.push(t)}),t&e.MOD&&this.visit(e.MOD,function(t){return e.mod.push(t)})),e},Rn.changed=function(t){return this.changes&t},Rn.modified=function(t){var e=this.fields;return e&&this.changes&this.MOD?s(t)?t.some(function(t){return e[t]}):e[t]:0},Rn.filter=function(){i(\"MultiPulse does not support filtering.\")},Rn.materialize=function(){i(\"MultiPulse does not support materialization.\")};var Cn={skip:!(Rn.visit=function(t,e){var r=this.pulses,n=r.length,i=0;if(t&this.SOURCE)for(;i<n;++i)r[i].visit(t,e);else for(;i<n;++i)r[i].stamp===this.stamp&&r[i].visit(t,e);return this}),force:!1};function Ln(t){this.cmp=t,this.nodes=[]}var Pn=Ln.prototype;function Dn(t,e,r,n){var i,o,s;for(i=t[r];e<r&&n(i,o=t[s=r-1>>1])<0;)t[r]=o,r=s;return t[r]=i}function On(t,e,r){for(var n,i=e,o=t.length,s=t[e],a=2*e+1;a<o;)(n=a+1)<o&&0<=r(t[a],t[n])&&(a=n),t[e]=t[a],a=2*(e=a)+1;return t[e]=s,Dn(t,i,e,r)}function Nn(){this._log=x(),this.logLevel(w),this._clock=0,this._rank=0;try{this._loader=te()}catch(t){}this._touched=ot(f),this._pulses={},this._pulse=null,this._heap=new Ln(function(t,e){return t.qrank-e.qrank}),this._postrun=[]}Pn.size=function(){return this.nodes.length},Pn.clear=function(){return this.nodes=[],this},Pn.peek=function(){return this.nodes[0]},Pn.push=function(t){var e=this.nodes;return e.push(t),Dn(e,0,e.length-1,this.cmp)},Pn.pop=function(){var t,e=this.nodes,r=e.pop();return e.length?(t=e[0],e[0]=r,On(e,0,this.cmp)):t=r,t},Pn.replace=function(t){var e=this.nodes,r=e[0];return e[0]=t,On(e,0,this.cmp),r},Pn.pushpop=function(t){var e=this.nodes,r=e[0];return e.length&&this.cmp(r,t)<0&&(e[0]=t,t=r,On(e,0,this.cmp)),t};var In=Nn.prototype;function Fn(t){return function(){return this._log[t].apply(this,arguments)}}function zn(t,e){_t.call(this,t,null,e)}In.stamp=function(){return this._clock},In.loader=function(t){return arguments.length?(this._loader=t,this):this._loader},In.cleanThreshold=1e4,In.add=function(t,e,r,n){var i,o=1;return t instanceof _t?i=t:t&&t.prototype instanceof _t?i=new t:N(t)?i=new _t(null,t):(o=0,i=new _t(t,e)),this.rank(i),o&&(n=r,r=e),r&&this.connect(i,i.parameters(r,n)),this.touch(i),i},In.connect=function(t,e){var r,n,i=t.rank;for(r=0,n=e.length;r<n;++r)if(i<e[r].rank)return void this.rerank(t)},In.rank=function(t){t.rank=++this._rank},In.rerank=function(t){for(var e,r,n,o=[t];o.length;)if(this.rank(e=o.pop()),r=e._targets)for(n=r.length;0<=--n;)o.push(e=r[n]),e===t&&i(\"Cycle detected in dataflow graph.\")},In.pulse=function(t,e,r){this.touch(t,r||Cn);var n=new _n(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return n.target=t,this._pulses[t.id]=e.pulse(n,i),this},In.touch=function(t,e){var r=e||Cn;return this._pulse?this._enqueue(t):this._touched.add(t),r.skip&&t.skip(!0),this},In.update=function(t,e,r){var n=r||Cn;return(t.set(e)||n.force)&&this.touch(t,n),this},In.changeset=gt,In.ingest=function(t,e,r){return this.pulse(t,this.changeset().insert(wn(e,r)))},In.request=function(t,e,r){var n,i,o,s,a=this,u=a._pending||(n=a,(s=new Promise(function(t,e){i=t,o=e})).requests=0,s.done=function(){0==--s.requests&&n.runAfter(function(){n._pending=null;try{n.run(),i(n)}catch(t){o(t)}})},n._pending=s);u.requests+=1,a.loader().load(e,{context:\"dataflow\"}).then(function(e){a.ingest(t,e,r)},function(t){a.error(\"Loading failed\",e,t)}).catch(function(t){a.error(\"Data ingestion failed\",e,t)}).then(u.done,u.done)},In.events=function(t,e,r,n){for(var i,o=this,s=At(r,n),a=function(t){t.dataflow=o;try{s.receive(t)}catch(t){o.error(t)}finally{o.run()}},u=0,c=(i=\"string\"==typeof t&&\"undefined\"!=typeof document?document.querySelectorAll(t):O(t)).length;u<c;++u)i[u].addEventListener(e,a);return s},In.on=function(t,e,r,n,i){return(t instanceof _t?function(t,e,r,n,i,o){var s,a;void 0===n?a=r:(s=N(n)?n:F(n),(a=new _t(null,n=r?function(t,e){var n=s(t,e);return r.skip()?n:r.skip(!0).value=n}:s,i,!1)).modified(o&&o.force),a.rank=0,r&&(a.skip(!0),a.value=r.value,a.targets().add(r))),e.targets().add(a)}:function(t,e,r,n,i,o){var s,a,u=U({},o,xn);N(r)||(r=F(r)),void 0===n?s=function(e){t.touch(r(e))}:N(n)?(a=new _t(null,n,i,!1),s=function(e){var n,i=r(e);a.evaluate(e),mt(n=a.value)?t.pulse(i,n,o):t.update(i,n,u)}):s=function(e){t.update(r(e),n,u)},e.apply(s)})(this,t,e,r,n,i),this},In.run=function(t){var e,r,n,i,o=this,s=0,a=o.logLevel();if(o._pending)return o.info(\"Awaiting requests, delaying dataflow run.\"),0;if(o._pulse)return o.error(\"Dataflow invoked recursively. Use the runAfter method to queue invocation.\"),0;if(!o._touched.length)return o.info(\"Dataflow invoked, but nothing to do.\"),0;o._pulse=new _n(o,++o._clock,t),3<=a&&(n=Date.now(),o.debug(\"-- START PROPAGATION (\"+o._clock+\") -----\")),o._touched.forEach(function(t){o._enqueue(t,!0)}),o._touched=ot(f);try{for(;0<o._heap.size();)(e=o._heap.pop()).rank===e.qrank?(r=e.run(o._getPulse(e,t)),4<=a&&o.debug(e.id,r===bn?\"STOP\":r,e),r!==bn&&(o._pulse=r,e._targets&&e._targets.forEach(function(t){o._enqueue(t)})),++s):o._enqueue(e,!0)}catch(t){i=t}if(o._pulses={},o._pulse=null,3<=a&&(n=Date.now()-n,o.info(\"> Pulse \"+o._clock+\": \"+s+\" operators; \"+n+\"ms\")),i&&(o._postrun=[],o.error(i)),o._onrun)try{o._onrun(o,s,i)}catch(t){o.error(t)}if(o._postrun.length){var u=o._postrun;o._postrun=[],u.sort(function(t,e){return e.priority-t.priority}).forEach(function(t){kn(o,t.callback)})}return s},In.runAsync=function(){return this._pending||Promise.resolve(this.run())},In.runAfter=function(t,e,r){this._pulse||e?this._postrun.push({priority:r||0,callback:t}):kn(this,t)},In._enqueue=function(t,e){var r=!this._pulses[t.id];r&&(this._pulses[t.id]=this._pulse),(r||e)&&(t.qrank=t.rank,this._heap.push(t))},In._getPulse=function(t,e){var r,n=t.source,i=this._clock;return n&&s(n)?new An(this,i,r=n.map(function(t){return t.pulse}),e):(r=this._pulses[t.id],n&&((n=n.pulse)&&n!==bn?n.stamp===i&&r.target!==t?r=n:r.source=n.source:r.source=[]),r)},In.error=Fn(\"error\"),In.warn=Fn(\"warn\"),In.info=Fn(\"info\"),In.debug=Fn(\"debug\"),In.logLevel=Fn(\"level\");var Un=H(zn,_t);Un.run=function(t){return t.stamp<=this.stamp?t.StopPropagation:(this.skip()?this.skip(!1):e=this.evaluate(t),(e=e||t)!==t.StopPropagation&&(this.pulse=e),this.stamp=t.stamp,e);var e},Un.evaluate=function(t){var e=this.marshall(t.stamp),r=this.transform(e,t);return e.clear(),r},Un.transform=function(){};var jn={};function Vn(t){var e=Bn(t);return e&&e.Definition||null}function Bn(t){return t=t&&t.toLowerCase(),jn.hasOwnProperty(t)?jn[t]:null}function Hn(t){return t&&t.length?1===t.length?t[0]:(e=t,function(t){for(var r=e.length,n=1,i=String(e[0](t));n<r;++n)i+=\"|\"+e[n](t);return i}):function(){return\"\"};var e}function Gn(t,e,r){return r||t+(e?\"_\"+e:\"\")}var Wn={values:Xn({name:\"values\",init:\"cell.store = true;\",set:\"cell.data.values()\",idx:-1}),count:Xn({name:\"count\",set:\"cell.num\"}),__count__:Xn({name:\"count\",set:\"this.missing + this.valid\"}),missing:Xn({name:\"missing\",set:\"this.missing\"}),valid:Xn({name:\"valid\",set:\"this.valid\"}),sum:Xn({name:\"sum\",init:\"this.sum = 0;\",add:\"this.sum += v;\",rem:\"this.sum -= v;\",set:\"this.sum\"}),mean:Xn({name:\"mean\",init:\"this.mean = 0;\",add:\"var d = v - this.mean; this.mean += d / this.valid;\",rem:\"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;\",set:\"this.mean\"}),average:Xn({name:\"average\",set:\"this.mean\",req:[\"mean\"],idx:1}),variance:Xn({name:\"variance\",init:\"this.dev = 0;\",add:\"this.dev += d * (v - this.mean);\",rem:\"this.dev -= d * (v - this.mean);\",set:\"this.valid > 1 ? this.dev / (this.valid-1) : 0\",req:[\"mean\"],idx:1}),variancep:Xn({name:\"variancep\",set:\"this.valid > 1 ? this.dev / this.valid : 0\",req:[\"variance\"],idx:2}),stdev:Xn({name:\"stdev\",set:\"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0\",req:[\"variance\"],idx:2}),stdevp:Xn({name:\"stdevp\",set:\"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0\",req:[\"variance\"],idx:2}),stderr:Xn({name:\"stderr\",set:\"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0\",req:[\"variance\"],idx:2}),distinct:Xn({name:\"distinct\",set:\"cell.data.distinct(this.get)\",req:[\"values\"],idx:3}),ci0:Xn({name:\"ci0\",set:\"cell.data.ci0(this.get)\",req:[\"values\"],idx:3}),ci1:Xn({name:\"ci1\",set:\"cell.data.ci1(this.get)\",req:[\"values\"],idx:3}),median:Xn({name:\"median\",set:\"cell.data.q2(this.get)\",req:[\"values\"],idx:3}),q1:Xn({name:\"q1\",set:\"cell.data.q1(this.get)\",req:[\"values\"],idx:3}),q3:Xn({name:\"q3\",set:\"cell.data.q3(this.get)\",req:[\"values\"],idx:3}),argmin:Xn({name:\"argmin\",init:\"this.argmin = null;\",add:\"if (v < this.min) this.argmin = t;\",rem:\"if (v <= this.min) this.argmin = null;\",set:\"this.argmin || cell.data.argmin(this.get)\",req:[\"min\"],str:[\"values\"],idx:3}),argmax:Xn({name:\"argmax\",init:\"this.argmax = null;\",add:\"if (v > this.max) this.argmax = t;\",rem:\"if (v >= this.max) this.argmax = null;\",set:\"this.argmax || cell.data.argmax(this.get)\",req:[\"max\"],str:[\"values\"],idx:3}),min:Xn({name:\"min\",init:\"this.min = null;\",add:\"if (v < this.min || this.min === null) this.min = v;\",rem:\"if (v <= this.min) this.min = NaN;\",set:\"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)\",str:[\"values\"],idx:4}),max:Xn({name:\"max\",init:\"this.max = null;\",add:\"if (v > this.max || this.max === null) this.max = v;\",rem:\"if (v >= this.max) this.max = NaN;\",set:\"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)\",str:[\"values\"],idx:4})},qn=Object.keys(Wn);function Yn(t,e){return Wn[t](e)}function Xn(t){return function(e){var r=U({init:\"\",add:\"\",rem:\"\",idx:0},t);return r.out=e||t.name,r}}function $n(t,e){return t.idx-e.idx}function Jn(t,e){var r=e||d,n=\"var cell = this.cell; this.valid = 0; this.missing = 0;\",i=\"this.cell = cell; this.init();\",o=\"if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;\",s=\"if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;\",a=\"var cell = this.cell;\";return function(t,e){var r,n=t.reduce(function t(e,r){function n(r){e[r]||t(e,e[r]=Wn[r]())}return r.req&&r.req.forEach(n),r.str&&r.str.forEach(n),e},t.reduce(function(t,e){return t[e.name]=e,t},{})),i=[];for(r in n)i.push(n[r]);return i.sort($n)}(t).forEach(function(t){n+=t.init,o+=t.add,s+=t.rem}),t.slice().sort($n).forEach(function(t){a+=\"t['\"+t.out+\"']=\"+t.set+\";\"}),a+=\"return t;\",(i=Function(\"cell\",i)).prototype.init=Function(n),i.prototype.add=Function(\"v\",\"t\",o),i.prototype.rem=Function(\"v\",\"t\",s),i.prototype.set=Function(\"t\",a),i.prototype.get=r,i.fields=t.map(function(t){return t.out}),i}var Zn=function(t){var e,r,n,i,o,s,a,u,c=t.maxbins||20,l=t.base||10,h=Math.log(l),f=t.divide||[5,2],d=t.extent[0],p=t.extent[1],m=p-d;if(t.step)e=t.step;else if(t.steps){for(o=m/c,s=0,a=t.steps.length;s<a&&t.steps[s]<o;++s);e=t.steps[Math.max(0,s-1)]}else{for(r=Math.ceil(Math.log(c)/h),n=t.minstep||0,e=Math.max(n,Math.pow(l,Math.round(Math.log(m)/h)-r));Math.ceil(m/e)>c;)e*=l;for(s=0,a=f.length;s<a;++s)n<=(o=e/f[s])&&m/o<=c&&(e=o)}return i=0<=(o=Math.log(e))?0:1+~~(-o/h),u=Math.pow(l,-i-1),(t.nice||void 0===t.nice)&&(d=d<(o=Math.floor(d/e+u)*e)?o-e:o,p=Math.ceil(p/e)*e),{start:d,stop:p,step:e}},Qn=function(t,e){var r,n=[],i=t.length,o=-1;if(null==e)for(;++o<i;)isNaN(r=Kn(t[o]))||n.push(r);else for(;++o<i;)isNaN(r=Kn(e(t[o],o,t)))||n.push(r);return n};function Kn(t){return null===t?NaN:+t}t.random=Math.random;var ti=function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN},ei=function(t){var e;return 1===t.length&&(e=t,t=function(t,r){return ti(e(t),r)}),{left:function(e,r,n,i){for(null==n&&(n=0),null==i&&(i=e.length);n<i;){var o=n+i>>>1;t(e[o],r)<0?n=o+1:i=o}return n},right:function(e,r,n,i){for(null==n&&(n=0),null==i&&(i=e.length);n<i;){var o=n+i>>>1;0<t(e[o],r)?i=o:n=o+1}return n}}},ri=ei(ti),ni=ri.right,ii=ri.left,oi=function(t){return null===t?NaN:+t},si=function(t,e){var r,n,i,o=t.length,s=-1;if(null==e){for(;++s<o;)if(null!=(r=t[s])&&r<=r)for(n=i=r;++s<o;)null!=(r=t[s])&&(r<n&&(n=r),i<r&&(i=r))}else for(;++s<o;)if(null!=(r=e(t[s],s,t))&&r<=r)for(n=i=r;++s<o;)null!=(r=e(t[s],s,t))&&(r<n&&(n=r),i<r&&(i=r));return[n,i]},ai=function(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=0|Math.max(0,Math.ceil((e-t)/r)),o=new Array(i);++n<i;)o[n]=t+n*r;return o},ui=Math.sqrt(50),ci=Math.sqrt(10),li=Math.sqrt(2),hi=function(t,e,r){var n,i,o,s,a=-1;if(r=+r,(t=+t)==(e=+e)&&0<r)return[t];if((n=e<t)&&(i=t,t=e,e=i),0===(s=fi(t,e,r))||!isFinite(s))return[];if(0<s)for(t=Math.ceil(t/s),e=Math.floor(e/s),o=new Array(i=Math.ceil(e-t+1));++a<i;)o[a]=(t+a)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),o=new Array(i=Math.ceil(t-e+1));++a<i;)o[a]=(t-a)/s;return n&&o.reverse(),o};function fi(t,e,r){var n=(e-t)/Math.max(0,r),i=Math.floor(Math.log(n)/Math.LN10),o=n/Math.pow(10,i);return 0<=i?(ui<=o?10:ci<=o?5:li<=o?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(ui<=o?10:ci<=o?5:li<=o?2:1)}function di(t,e,r){var n=Math.abs(e-t)/Math.max(0,r),i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),o=n/i;return ui<=o?i*=10:ci<=o?i*=5:li<=o&&(i*=2),e<t?-i:i}var pi=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},mi=function(t,e,r){if(null==r&&(r=oi),n=t.length){if((e=+e)<=0||n<2)return+r(t[0],0,t);if(1<=e)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,o=Math.floor(i),s=+r(t[o],o,t);return s+(+r(t[o+1],o+1,t)-s)*(i-o)}},gi=function(t,e){var r,n,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(r=t[o])&&r<=r)for(n=r;++o<i;)null!=(r=t[o])&&n<r&&(n=r)}else for(;++o<i;)if(null!=(r=e(t[o],o,t))&&r<=r)for(n=r;++o<i;)null!=(r=e(t[o],o,t))&&n<r&&(n=r);return n},vi=function(t){for(var e,r,n,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(r=new Array(s);0<=--i;)for(e=(n=t[i]).length;0<=--e;)r[--s]=n[e];return r},yi=function(t,e){for(var r=e.length,n=new Array(r);r--;)n[r]=t[e[r]];return n},wi=function(e,r,n,i){var o,s,a,u,c=Qn(e,i),l=c.length,h=r;for(a=0,u=Array(h);a<h;++a){for(s=o=0;s<l;++s)o+=c[~~(t.random()*l)];u[a]=o/l}return[mi(u.sort(ti),n/2),mi(u,1-n/2)]},xi=function(t,e){var r=Qn(t,e);return[mi(r.sort(ti),.25),mi(r,.5),mi(r,.75)]},bi=function(e,r){var n,i,o=NaN,s={mean:function(t){return arguments.length?(n=t||0,o=NaN,s):n},stdev:function(t){return arguments.length?(i=null==t?1:t,o=NaN,s):i},sample:function(){var e,r,s=0,a=0;if(o==o)return s=o,o=NaN,s;for(;0==(e=(s=2*t.random()-1)*s+(a=2*t.random()-1)*a)||1<e;);return r=Math.sqrt(-2*Math.log(e)/e),o=n+a*r*i,n+s*r*i},pdf:function(t){var e=Math.exp(Math.pow(t-n,2)/(-2*Math.pow(i,2)));return 1/(i*Math.sqrt(2*Math.PI))*e},cdf:function(t){var e,r=(t-n)/i,o=Math.abs(r);if(37<o)e=0;else{var s=Math.exp(-o*o/2);o<7.07106781186547?(e=s*((((((.0352624965998911*o+.700383064443688)*o+6.37396220353165)*o+33.912866078383)*o+112.079291497871)*o+221.213596169931)*o+220.206867912376),e/=((((((.0883883476483184*o+1.75566716318264)*o+16.064177579207)*o+86.7807322029461)*o+296.564248779674)*o+637.333633378831)*o+793.826512519948)*o+440.413735824752):e=s/(o+1/(o+2/(o+3/(o+4/(o+.65)))))/2.506628274631}return 0<r?1-e:e},icdf:function(t){if(t<=0||1<=t)return NaN;var e=2*t-1,r=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),o=2/(Math.PI*r)+Math.log(1-Math.pow(e,2))/2,s=Math.log(1-e*e)/r,a=(0<e?1:-1)*Math.sqrt(Math.sqrt(o*o-s)-o);return n+i*Math.SQRT2*a}};return s.mean(e).stdev(r)},_i=function(e,r){var n=bi(),i={},o=0;return i.data=function(t){return arguments.length?(o=(e=t)?t.length:0,i.bandwidth(r)):e},i.bandwidth=function(t){return arguments.length?(!(r=t)&&e&&(o=(n=e).length,a=((s=xi(n))[2]-s[0])/1.34,r=1.06*Math.min(Math.sqrt(function(t,e){for(var r,n,i=t.length,o=0,s=-1,a=0,u=0;++s<i;)isNaN(r=oi(t[s]))||(u+=(n=r-a)*(r-(a+=n/++o)));if(1<o)return u/(o-1)}(n)),a)*Math.pow(o,-.2)),i):r;var n,o,s,a},i.sample=function(){return e[~~(t.random()*o)]+r*n.sample()},i.pdf=function(t){for(var i=0,s=0;s<o;++s)i+=n.pdf((t-e[s])/r);return i/r/o},i.cdf=function(t){for(var i=0,s=0;s<o;++s)i+=n.cdf((t-e[s])/r);return i/o},i.icdf=function(){throw Error(\"KDE icdf not supported.\")},i.data(e)},Mi=function(e,r){var n,i={},o=0;return i.weights=function(t){return arguments.length?(n=function(t){var e,r=[],n=0;for(e=0;e<o;++e)n+=r[e]=null==t[e]?1:+t[e];for(e=0;e<o;++e)r[e]/=n;return r}(r=t||[]),i):r},i.distributions=function(t){return arguments.length?(t?(o=t.length,e=t):(o=0,e=[]),i.weights(r)):e},i.sample=function(){for(var r=t.random(),i=e[o-1],s=n[0],a=0;a<o-1;s+=n[++a])if(r<s){i=e[a];break}return i.sample()},i.pdf=function(t){for(var r=0,i=0;i<o;++i)r+=n[i]*e[i].pdf(t);return r},i.cdf=function(t){for(var r=0,i=0;i<o;++i)r+=n[i]*e[i].cdf(t);return r},i.icdf=function(){throw Error(\"Mixture icdf not supported.\")},i.distributions(e).weights(r)},Si=function(e,r){null==r&&(r=null==e?1:e,e=0);var n,i,o,s={min:function(t){return arguments.length?(o=i-(n=t||0),s):n},max:function(t){return arguments.length?(o=(i=t||0)-n,s):i},sample:function(){return n+o*t.random()},pdf:function(t){return n<=t&&t<=i?1/o:0},cdf:function(t){return t<n?0:i<t?1:(t-n)/o},icdf:function(t){return 0<=t&&t<=1?n+t*o:NaN}};return s.min(e).max(r)};function Ei(t){this._key=t?l(t):ct,this.reset()}var Ti=Ei.prototype;function Ai(t){zn.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Ti.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Ti.add=function(t){this._add.push(t)},Ti.rem=function(t){this._rem.push(t)},Ti.values=function(){if(this._get=null,0===this._rem.length)return this._add;var t,e,r,n=this._add,i=this._rem,o=this._key,s=n.length,a=i.length,u=Array(s-a),c={};for(t=0;t<a;++t)c[o(i[t])]=1;for(e=t=0;t<s;++t)c[o(r=n[t])]?c[o(r)]=0:u[e++]=r;return this._rem=[],this._add=u},Ti.distinct=function(t){for(var e,r=this.values(),n=r.length,i={},o=0;0<=--n;)e=t(r[n])+\"\",i.hasOwnProperty(e)||(i[e]=1,++o);return o},Ti.extent=function(t){if(this._get!==t||!this._ext){var e=this.values(),r=j(e,t);this._ext=[e[r[0]],e[r[1]]],this._get=t}return this._ext},Ti.argmin=function(t){return this.extent(t)[0]||{}},Ti.argmax=function(t){return this.extent(t)[1]||{}},Ti.min=function(t){var e=this.extent(t)[0];return null!=e?t(e):1/0},Ti.max=function(t){var e=this.extent(t)[1];return null!=e?t(e):-1/0},Ti.quartile=function(t){return this._get===t&&this._q||(this._q=xi(this.values(),t),this._get=t),this._q},Ti.q1=function(t){return this.quartile(t)[0]},Ti.q2=function(t){return this.quartile(t)[1]},Ti.q3=function(t){return this.quartile(t)[2]},Ti.ci=function(t){return this._get===t&&this._ci||(this._ci=wi(this.values(),1e3,.05,t),this._get=t),this._ci},Ti.ci0=function(t){return this.ci(t)[0]},Ti.ci1=function(t){return this.ci(t)[1]},Ai.Definition={type:\"Aggregate\",metadata:{generates:!0,changes:!0},params:[{name:\"groupby\",type:\"field\",array:!0},{name:\"ops\",type:\"enum\",array:!0,values:qn},{name:\"fields\",type:\"field\",null:!0,array:!0},{name:\"as\",type:\"string\",null:!0,array:!0},{name:\"drop\",type:\"boolean\",default:!0},{name:\"cross\",type:\"boolean\",default:!1},{name:\"key\",type:\"field\"}]};var Ri=H(Ai,zn);function ki(t){zn.call(this,null,t)}Ri.transform=function(t,e){var r,n=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS);return this.stamp=i.stamp,this.value&&((r=t.modified())||e.modified(this._inputs))?(this._prev=this.value,this.value=r?this.init(t):{},e.visit(e.SOURCE,function(t){n.add(t)})):(this.value=this.value||this.init(t),e.visit(e.REM,function(t){n.rem(t)}),e.visit(e.ADD,function(t){n.add(t)})),i.modifies(this._outputs),n._drop=!1!==t.drop,t.cross&&1<n._dims.length&&(n._drop=!1,this.cross()),n.changes(i)},Ri.cross=function(){var t=this,e=t.value,r=t._dnames,n=r.map(function(){return{}}),i=r.length;function o(t){var e,o,s,a;for(e in t)for(s=t[e].tuple,o=0;o<i;++o)n[o][a=s[r[o]]]=a}o(t._prev),o(e),function o(s,a,u){var c,l,h=r[u],f=n[u++];for(c in f)a[h]=f[c],l=s?s+\"|\"+c:c,u<i?o(l,a,u):e[l]||t.cell(l,a)}(\"\",{},0)},Ri.init=function(t){var e=this._inputs=[],o=this._outputs=[],s={};function a(t){for(var r,i=O(n(t)),o=0,a=i.length;o<a;++o)s[r=i[o]]||(s[r]=1,e.push(r))}this._dims=O(t.groupby),this._dnames=this._dims.map(function(t){var e=r(t);return a(t),o.push(e),e}),this.cellkey=t.key?t.key:Hn(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var u,c,l,h,f,d,p=t.fields||[null],m=t.ops||[\"count\"],g=t.as||[],v=p.length,y={};for(v!==m.length&&i(\"Unmatched number of fields and aggregate ops.\"),d=0;d<v;++d)c=m[d],null==(u=p[d])&&\"count\"!==c&&i(\"Null aggregate field specified.\"),f=Gn(c,h=r(u),g[d]),o.push(f),\"count\"!==c?((l=y[h])||(a(u),(l=y[h]=[]).field=u,this._measures.push(l)),\"count\"!==c&&(this._countOnly=!1),l.push(Yn(c,f))):this._counts.push(f);return this._measures=this._measures.map(function(t){return Jn(t,t.field)}),{}},Ri.cellkey=Hn(),Ri.cell=function(t,e){var r=this.value[t];return r?0===r.num&&this._drop&&r.stamp<this.stamp?(r.stamp=this.stamp,this._adds[this._alen++]=r):r.stamp<this.stamp&&(r.stamp=this.stamp,this._mods[this._mlen++]=r):(r=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=r),r},Ri.newcell=function(t,e){var r={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){var n,i=this._measures,o=i.length;for(r.agg=Array(o),n=0;n<o;++n)r.agg[n]=new i[n](r)}return r.store&&(r.data=new Ei),r},Ri.newtuple=function(t,e){var r,n,i=this._dnames,o=this._dims,s={};for(r=0,n=o.length;r<n;++r)s[i[r]]=o[r](t);return e?pt(e.tuple,s):ht(s)},Ri.add=function(t){var e,r,n,i=this.cellkey(t),o=this.cell(i,t);if(o.num+=1,!this._countOnly)for(o.store&&o.data.add(t),r=0,n=(e=o.agg).length;r<n;++r)e[r].add(e[r].get(t),t)},Ri.rem=function(t){var e,r,n,i=this.cellkey(t),o=this.cell(i,t);if(o.num-=1,!this._countOnly)for(o.store&&o.data.rem(t),r=0,n=(e=o.agg).length;r<n;++r)e[r].rem(e[r].get(t),t)},Ri.celltuple=function(t){var e,r,n,i=t.tuple,o=this._counts;for(t.store&&t.data.values(),r=0,n=o.length;r<n;++r)i[o[r]]=t.num;if(!this._countOnly)for(r=0,n=(e=t.agg).length;r<n;++r)e[r].set(i);return i},Ri.changes=function(t){var e,r,n,i,o=this._adds,s=this._mods,a=this._prev,u=this._drop,c=t.add,l=t.rem,h=t.mod;if(a)for(r in a)e=a[r],u&&!e.num||l.push(e.tuple);for(n=0,i=this._alen;n<i;++n)c.push(this.celltuple(o[n])),o[n]=null;for(n=0,i=this._mlen;n<i;++n)(0===(e=s[n]).num&&u?l:h).push(this.celltuple(e)),s[n]=null;return this._alen=this._mlen=0,this._prev=null,t},ki.Definition={type:\"Bin\",metadata:{modifies:!0},params:[{name:\"field\",type:\"field\",required:!0},{name:\"anchor\",type:\"number\"},{name:\"maxbins\",type:\"number\",default:20},{name:\"base\",type:\"number\",default:10},{name:\"divide\",type:\"number\",array:!0,default:[5,2]},{name:\"extent\",type:\"number\",array:!0,length:2,required:!0},{name:\"step\",type:\"number\"},{name:\"steps\",type:\"number\",array:!0},{name:\"minstep\",type:\"number\",default:0},{name:\"nice\",type:\"boolean\",default:!0},{name:\"name\",type:\"string\"},{name:\"as\",type:\"string\",array:!0,length:2,default:[\"bin0\",\"bin1\"]}]};var Ci=H(ki,zn);Ci.transform=function(t,e){var r,i=this._bins(t),o=i.start,s=i.step,a=t.as||[\"bin0\",\"bin1\"],u=a[0],c=a[1];return r=t.modified()?(e=e.reflow(!0)).SOURCE:e.modified(n(t.field))?e.ADD_MOD:e.ADD,e.visit(r,function(t){var e=i(t);t[u]=e,t[c]=null==e?null:o+s*(1+(e-o)/s)}),e.modifies(a)},Ci._bins=function(t){if(this.value&&!t.modified())return this.value;var i,o,s=t.field,a=Zn(t),u=a.start,c=a.stop,l=a.step;null!=(i=t.anchor)&&(o=i-(u+l*Math.floor((i-u)/l)),u+=o,c+=o);var h=function(t){var e=s(t);return null==e?null:(e=Math.max(u,Math.min(+e,c-l)),u+l*Math.floor((e-u)/l))};return h.start=u,h.stop=c,h.step=l,this.value=e(h,n(s),t.name||\"bin_\"+r(s))};var Li=function(t,e,r){var n=t,i=e||[],o=r||[],s={},a=0;return{add:function(t){o.push(t)},remove:function(t){s[n(t)]=++a},size:function(){return i.length},data:function(t,e){return a&&(i=i.filter(function(t){return!s[n(t)]}),s={},a=0),e&&t&&i.sort(t),o.length&&(i=t?$(t,i,o.sort(t)):i.concat(o),o=[]),i}}};function Pi(t){zn.call(this,[],t)}function Di(t){_t.call(this,null,Oi,t)}function Oi(t){return this.value&&!t.modified()?this.value:I(t.fields,t.orders)}function Ni(t){zn.call(this,null,t)}Pi.Definition={type:\"Collect\",metadata:{source:!0},params:[{name:\"sort\",type:\"compare\"}]},H(Pi,zn).transform=function(t,e){var r=e.fork(e.ALL),n=Li(ct,this.value,r.materialize(r.ADD).add),i=t.sort,o=e.changed()||i&&(t.modified(\"sort\")||e.modified(i.fields));return r.visit(r.REM,n.remove),this.modified(o),this.value=r.source=n.data(i,o),e.source&&e.source.root&&(this.value.root=e.source.root),r},H(Di,_t),Ni.Definition={type:\"CountPattern\",metadata:{generates:!0,changes:!0},params:[{name:\"field\",type:\"field\",required:!0},{name:\"case\",type:\"enum\",values:[\"upper\",\"lower\",\"mixed\"],default:\"mixed\"},{name:\"pattern\",type:\"string\",default:'[\\\\w\"]+'},{name:\"stopwords\",type:\"string\",default:\"\"},{name:\"as\",type:\"string\",array:!0,length:2,default:[\"text\",\"count\"]}]};var Ii=H(Ni,zn);function Fi(t){zn.call(this,null,t)}Ii.transform=function(t,e){function r(e){return function(r){for(var n,i=function(e,r,n){switch(t.case){case\"upper\":e=e.toUpperCase();break;case\"lower\":e=e.toLowerCase()}return e.match(n)}(a(r),0,o)||[],u=0,c=i.length;u<c;++u)s.test(n=i[u])||e(n)}}var n=this._parameterCheck(t,e),i=this._counts,o=this._match,s=this._stop,a=t.field,u=t.as||[\"text\",\"count\"],c=r(function(t){i[t]=1+(i[t]||0)}),l=r(function(t){i[t]-=1});return n?e.visit(e.SOURCE,c):(e.visit(e.ADD,c),e.visit(e.REM,l)),this._finish(e,u)},Ii._parameterCheck=function(t,e){var r=!1;return!t.modified(\"stopwords\")&&this._stop||(this._stop=new RegExp(\"^\"+(t.stopwords||\"\")+\"$\",\"i\"),r=!0),!t.modified(\"pattern\")&&this._match||(this._match=new RegExp(t.pattern||\"[\\\\w']+\",\"g\"),r=!0),(t.modified(\"field\")||e.modified(t.field.fields))&&(r=!0),r&&(this._counts={}),r},Ii._finish=function(t,e){var r,n,i,o=this._counts,s=this._tuples||(this._tuples={}),a=e[0],u=e[1],c=t.fork(t.NO_SOURCE|t.NO_FIELDS);for(r in o)n=s[r],i=o[r]||0,!n&&i?(s[r]=n=ht({}),n[a]=r,n[u]=i,c.add.push(n)):0===i?(n&&c.rem.push(n),o[r]=null,s[r]=null):n[u]!==i&&(n[u]=i,c.mod.push(n));return c.modifies(e)},Fi.Definition={type:\"Cross\",metadata:{generates:!0},params:[{name:\"filter\",type:\"expr\"},{name:\"as\",type:\"string\",array:!0,length:2,default:[\"a\",\"b\"]}]},H(Fi,zn).transform=function(t,e){var r=e.fork(e.NO_SOURCE),n=this.value,i=t.as||[\"a\",\"b\"],o=i[0],s=i[1];return!n||e.changed(e.ADD_REM)||t.modified(\"as\")||t.modified(\"filter\")?(n&&(r.rem=n),n=e.materialize(e.SOURCE).source,r.add=this.value=function(t,e,r,n){for(var i,o,s=[],a={},u=t.length,c=0;c<u;++c)for(a[e]=o=t[c],i=0;i<u;++i)a[r]=t[i],n(a)&&(s.push(ht(a)),(a={})[e]=o);return s}(n,o,s,t.filter||g)):r.mod=n,r.source=this.value,r.modifies(i)};var zi={kde:_i,mixture:Mi,normal:bi,uniform:Si},Ui=\"function\";function ji(t){zn.call(this,null,t)}var Vi=[{key:{function:\"normal\"},params:[{name:\"mean\",type:\"number\",default:0},{name:\"stdev\",type:\"number\",default:1}]},{key:{function:\"uniform\"},params:[{name:\"min\",type:\"number\",default:0},{name:\"max\",type:\"number\",default:1}]},{key:{function:\"kde\"},params:[{name:\"field\",type:\"field\",required:!0},{name:\"from\",type:\"data\"},{name:\"bandwidth\",type:\"number\",default:0}]}];function Bi(t){zn.call(this,[1/0,-1/0],t)}function Hi(t,e){_t.call(this,t),this.parent=e}ji.Definition={type:\"Density\",metadata:{generates:!0},params:[{name:\"extent\",type:\"number\",array:!0,length:2},{name:\"steps\",type:\"number\",default:100},{name:\"method\",type:\"string\",default:\"pdf\",values:[\"pdf\",\"cdf\"]},{name:\"distribution\",type:\"param\",params:Vi.concat({key:{function:\"mixture\"},params:[{name:\"distributions\",type:\"param\",array:!0,params:Vi},{name:\"weights\",type:\"number\",array:!0}]})},{name:\"as\",type:\"string\",array:!0,default:[\"value\",\"density\"]}]},H(ji,zn).transform=function(t,e){var r,n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var o=function t(e,r){var n=e[Ui];zi.hasOwnProperty(n)||i(\"Unknown distribution function: \"+n);var o=zi[n]();for(var s in e)\"field\"===s?o.data((e.from||r()).map(e[s])):\"distributions\"===s?o[s](e[s].map(function(e){return t(e,r)})):typeof o[s]===Ui&&o[s](e[s]);return o}(t.distribution,(r=e,function(){return r.materialize(r.SOURCE).source})),s=t.method||\"pdf\";\"pdf\"!==s&&\"cdf\"!==s&&i(\"Invalid density method: \"+s),t.extent||o.data||i(\"Missing density extent parameter.\"),s=o[s];var a=t.as||[\"value\",\"density\"],u=t.extent||si(o.data()),c=(u[1]-u[0])/(t.steps||100),l=ai(u[0],u[1]+c/2,c).map(function(t){var e={};return e[a[0]]=t,e[a[1]]=s(t),ht(e)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n},Bi.Definition={type:\"Extent\",metadata:{},params:[{name:\"field\",type:\"field\",required:!0}]},H(Bi,zn).transform=function(t,e){var r=this.value,n=t.field,i=r[0],o=r[1],s=e.ADD;(e.changed()||e.modified(n.fields)||t.modified(\"field\"))&&(s=e.SOURCE,i=1/0,o=-1/0),e.visit(s,function(t){var e=n(t);null!=e&&((e=+e)<i&&(i=e),o<e&&(o=e))}),this.value=[i,o]};var Gi=H(Hi,_t);function Wi(t){zn.call(this,{},t),this._keys=B();var e=this._targets=[];e.active=0,e.forEach=function(t){for(var r=0,n=e.active;r<n;++r)t(e[r],r,e)}}Gi.connect=function(t){return this.targets().add(t),t.source=this},Gi.add=function(t){this.value.add.push(t)},Gi.rem=function(t){this.value.rem.push(t)},Gi.mod=function(t){this.value.mod.push(t)},Gi.init=function(t){this.value.init(t,t.NO_SOURCE)},Gi.evaluate=function(){return this.value};var qi=H(Wi,zn);function Yi(t){_t.call(this,null,Xi,t)}function Xi(t){return this.value&&!t.modified()?this.value:s(t.name)?O(t.name).map(function(t){return l(t)}):l(t.name,t.as)}function $i(t){zn.call(this,B(),t)}function Ji(t,e){return t?t.map(function(t,n){return e[n]||r(t)}):null}function Zi(t){zn.call(this,[],t)}function Qi(t){zn.call(this,[],t)}function Ki(t){zn.call(this,null,t)}function to(t){zn.call(this,[],t)}qi.activate=function(t){this._targets[this._targets.active++]=t},qi.subflow=function(t,e,r,n){var i,o,s=this.value,a=s.hasOwnProperty(t)&&s[t];return a?a.value.stamp<r.stamp&&(a.init(r),this.activate(a)):(o=n||(o=this._group[t])&&o.tuple,a=(i=r.dataflow).add(new Hi(r.fork(r.NO_SOURCE),this)).connect(e(i,t,o)),s[t]=a,this.activate(a)),a},qi.transform=function(t,e){var r=e.dataflow,n=this,i=t.key,o=t.subflow,s=this._keys,a=t.modified(\"key\");function u(t){return n.subflow(t,o,e)}return this._group=t.group||{},this._targets.active=0,e.visit(e.REM,function(t){var e=ct(t),r=s.get(e);void 0!==r&&(s.delete(e),u(r).rem(t))}),e.visit(e.ADD,function(t){var e=i(t);s.set(ct(t),e),u(e).add(t)}),a||e.modified(i.fields)?e.visit(e.MOD,function(t){var e=ct(t),r=s.get(e),n=i(t);r===n?u(n).mod(t):(s.set(e,n),u(r).rem(t),u(n).add(t))}):e.changed(e.MOD)&&e.visit(e.MOD,function(t){u(s.get(ct(t))).mod(t)}),a&&e.visit(e.REFLOW,function(t){var e=ct(t),r=s.get(e),n=i(t);r!==n&&(s.set(e,n),u(r).rem(t),u(n).add(t))}),s.empty>r.cleanThreshold&&r.runAfter(s.clean),e},H(Yi,_t),$i.Definition={type:\"Filter\",metadata:{changes:!0},params:[{name:\"expr\",type:\"expr\",required:!0}]},H($i,zn).transform=function(t,e){var r=e.dataflow,n=this.value,i=e.fork(),o=i.add,s=i.rem,a=i.mod,u=t.expr,c=!0;function l(e){var r=ct(e),i=u(e,t),l=n.get(r);i&&l?(n.delete(r),o.push(e)):i||l?c&&i&&!l&&a.push(e):(n.set(r,1),s.push(e))}return e.visit(e.REM,function(t){var e=ct(t);n.has(e)?n.delete(e):s.push(t)}),e.visit(e.ADD,function(e){u(e,t)?o.push(e):n.set(ct(e),1)}),e.visit(e.MOD,l),t.modified()&&(c=!1,e.visit(e.REFLOW,l)),n.empty>r.cleanThreshold&&r.runAfter(n.clean),i},Zi.Definition={type:\"Flatten\",metadata:{generates:!0},params:[{name:\"fields\",type:\"field\",array:!0,required:!0},{name:\"as\",type:\"string\",array:!0}]},H(Zi,zn).transform=function(t,e){var r=e.fork(e.NO_SOURCE),n=t.fields,i=Ji(n,t.as||[]),o=i.length;return r.rem=this.value,e.visit(e.SOURCE,function(t){for(var e,s,a,u=n.map(function(e){return e(t)}),c=u.reduce(function(t,e){return Math.max(t,e.length)},0),l=0;l<c;++l){for(s=ft(t),e=0;e<o;++e)s[i[e]]=null==(a=u[e][l])?null:a;r.add.push(s)}}),this.value=r.source=r.add,r.modifies(i)},Qi.Definition={type:\"Fold\",metadata:{generates:!0},params:[{name:\"fields\",type:\"field\",array:!0,required:!0},{name:\"as\",type:\"string\",array:!0,length:2,default:[\"key\",\"value\"]}]},H(Qi,zn).transform=function(t,e){var n=e.fork(e.NO_SOURCE),i=t.fields,o=i.map(r),s=t.as||[\"key\",\"value\"],a=s[0],u=s[1],c=i.length;return n.rem=this.value,e.visit(e.SOURCE,function(t){for(var e,r=0;r<c;++r)(e=ft(t))[a]=o[r],e[u]=i[r](t),n.add.push(e)}),this.value=n.source=n.add,n.modifies(s)},Ki.Definition={type:\"Formula\",metadata:{modifies:!0},params:[{name:\"expr\",type:\"expr\",required:!0},{name:\"as\",type:\"string\",required:!0},{name:\"initonly\",type:\"boolean\"}]},H(Ki,zn).transform=function(t,e){var r=t.expr,n=t.as,i=t.modified(),o=t.initonly?e.ADD:i?e.SOURCE:e.modified(r.fields)?e.ADD_MOD:e.ADD;return i&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(n),e.visit(o,function(e){e[n]=r(e,t)})},H(to,zn).transform=function(t,e){var r,n,i,o=this.value,s=e.fork(e.ALL),a=t.size-o.length,u=t.generator;if(0<a){for(r=[];0<=--a;)r.push(i=ht(u(t))),o.push(i);s.add=s.add.length?s.materialize(s.ADD).add.concat(r):r}else n=o.slice(0,-a),s.rem=s.rem.length?s.materialize(s.REM).rem.concat(n):n,o=o.slice(-a);return s.source=this.value=o,s};var eo={value:\"value\",median:function(t,e){var r,n=t.length,i=-1,o=[];if(null==e)for(;++i<n;)isNaN(r=oi(t[i]))||o.push(r);else for(;++i<n;)isNaN(r=oi(e(t[i],i,t)))||o.push(r);return mi(o.sort(ti),.5)},mean:function(t,e){var r,n=t.length,i=n,o=-1,s=0;if(null==e)for(;++o<n;)isNaN(r=oi(t[o]))?--i:s+=r;else for(;++o<n;)isNaN(r=oi(e(t[o],o,t)))?--i:s+=r;if(i)return s/i},min:function(t,e){var r,n,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(r=t[o])&&r<=r)for(n=r;++o<i;)null!=(r=t[o])&&r<n&&(n=r)}else for(;++o<i;)if(null!=(r=e(t[o],o,t))&&r<=r)for(n=r;++o<i;)null!=(r=e(t[o],o,t))&&r<n&&(n=r);return n},max:gi},ro=[];function no(t){zn.call(this,[],t)}function io(t){Ai.call(this,t)}no.Definition={type:\"Impute\",metadata:{changes:!0},params:[{name:\"field\",type:\"field\",required:!0},{name:\"key\",type:\"field\",required:!0},{name:\"keyvals\",array:!0},{name:\"groupby\",type:\"field\",array:!0},{name:\"method\",type:\"enum\",default:\"value\",values:[\"value\",\"mean\",\"median\",\"max\",\"min\"]},{name:\"value\",default:0}]},H(no,zn).transform=function(t,e){var n,o,s,a,u,c,l,h,f,d,p,m=e.fork(e.ALL),g=function(t){var e,r=t.method||eo.value;if(null!=eo[r])return r===eo.value?(e=void 0!==t.value?t.value:0,function(){return e}):eo[r];i(\"Unrecognized imputation method: \"+r)}(t),v=(p=t.field,function(t){return t?p(t):NaN}),y=r(t.field),w=r(t.key),x=(t.groupby||[]).map(r),b=function(t,e,r,n){var i,o,s,a,u,c,l,h,f=function(t){return t(h)},d=[],p=n?n.slice():[],m={},g={};for(p.forEach(function(t,e){m[t]=e+1}),a=0,l=t.length;a<l;++a)c=r(h=t[a]),u=m[c]||(m[c]=p.push(c)),(s=g[o=(i=e?e.map(f):ro)+\"\"])||(s=g[o]=[],d.push(s),s.values=i),s[u-1]=h;return d.domain=p,d}(e.source,t.groupby,t.key,t.keyvals),_=[],M=this.value,S=b.domain.length;for(u=0,h=b.length;u<h;++u)for(s=(n=b[u]).values,o=NaN,l=0;l<S;++l)if(null==n[l]){for(a=b.domain[l],d={_impute:!0},c=0,f=s.length;c<f;++c)d[x[c]]=s[c];d[w]=a,d[y]=isNaN(o)?o=g(n,v):o,_.push(ht(d))}return _.length&&(m.add=m.materialize(m.ADD).add.concat(_)),M.length&&(m.rem=m.materialize(m.REM).rem.concat(M)),this.value=_,m},io.Definition={type:\"JoinAggregate\",metadata:{modifies:!0},params:[{name:\"groupby\",type:\"field\",array:!0},{name:\"fields\",type:\"field\",null:!0,array:!0},{name:\"ops\",type:\"enum\",array:!0,values:qn},{name:\"as\",type:\"string\",null:!0,array:!0},{name:\"key\",type:\"field\"}]};var oo=H(io,Ai);function so(t){_t.call(this,null,ao,t)}function ao(t){return this.value&&!t.modified()?this.value:X(t.fields,t.flat)}function uo(t){zn.call(this,{},t)}function co(t){_t.call(this,null,lo,t)}function lo(t){if(this.value&&!t.modified())return this.value;var e,r,n,i=1/0,o=-1/0,s=t.extents;for(e=0,r=s.length;e<r;++e)(n=s[e])[0]<i&&(i=n[0]),n[1]>o&&(o=n[1]);return[i,o]}function ho(t){_t.call(this,null,fo,t)}function fo(t){return this.value&&!t.modified()?this.value:t.values.reduce(function(t,e){return t.concat(e)},[])}function po(t){zn.call(this,null,t)}function mo(t){Ai.call(this,t)}oo.transform=function(t,e){var r,n=this,i=t.modified();return n.value&&(i||e.modified(n._inputs))?(r=n.value=i?n.init(t):{},e.visit(e.SOURCE,function(t){n.add(t)})):(r=n.value=n.value||this.init(t),e.visit(e.REM,function(t){n.rem(t)}),e.visit(e.ADD,function(t){n.add(t)})),n.changes(),e.visit(e.SOURCE,function(t){U(t,r[n.cellkey(t)].tuple)}),e.reflow(i).modifies(this._outputs)},oo.changes=function(){var t,e,r=this._adds,n=this._mods;for(t=0,e=this._alen;t<e;++t)this.celltuple(r[t]),r[t]=null;for(t=0,e=this._mlen;t<e;++t)this.celltuple(n[t]),n[t]=null;this._alen=this._mlen=0},H(so,_t),uo.Definition={type:\"Lookup\",metadata:{modifies:!0},params:[{name:\"index\",type:\"index\",params:[{name:\"from\",type:\"data\",required:!0},{name:\"key\",type:\"field\",required:!0}]},{name:\"values\",type:\"field\",array:!0},{name:\"fields\",type:\"field\",array:!0,required:!0},{name:\"as\",type:\"string\",array:!0},{name:\"default\",default:null}]},H(uo,zn).transform=function(t,e){var n,o,s=e,a=t.as,u=t.fields,c=t.index,l=t.values,h=null==t.default?null:t.default,f=t.modified(),d=f?e.SOURCE:e.ADD,p=u.length;return l?(o=l.length,1<p&&!a&&i('Multi-field lookup requires explicit \"as\" parameter.'),a&&a.length!==p*o&&i('The \"as\" parameter has too few output field names.'),a=a||l.map(r),n=function(t){for(var e,r,n=0,i=0;n<p;++n)if(null==(r=c.get(u[n](t))))for(e=0;e<o;++e,++i)t[a[i]]=h;else for(e=0;e<o;++e,++i)t[a[i]]=l[e](r)}):(a||i(\"Missing output field names.\"),n=function(t){for(var e,r=0;r<p;++r)e=c.get(u[r](t)),t[a[r]]=null==e?h:e}),f?s=e.reflow(!0):d|=u.some(function(t){return e.modified(t.fields)})?e.MOD:0,e.visit(d,n),s.modifies(a)},H(co,_t),H(ho,_t),H(po,zn),po.prototype.transform=function(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)},mo.Definition={type:\"Pivot\",metadata:{generates:!0,changes:!0},params:[{name:\"groupby\",type:\"field\",array:!0},{name:\"field\",type:\"field\",required:!0},{name:\"value\",type:\"field\",required:!0},{name:\"op\",type:\"enum\",values:qn,default:\"sum\"},{name:\"limit\",type:\"number\",default:0},{name:\"key\",type:\"field\"}]};var go=H(mo,Ai);function vo(t){Wi.call(this,t)}function yo(t){zn.call(this,null,t)}function wo(t){zn.call(this,null,t)}function xo(t){zn.call(this,null,t)}function bo(t){zn.call(this,[],t),this.count=0}function _o(t){zn.call(this,null,t)}function Mo(t){zn.call(this,null,t),this.modified(!0)}function So(t){zn.call(this,B(),t)}function Eo(t){zn.call(this,null,t)}go._transform=go.transform,go.transform=function(t,r){return this._transform((o=r,s=(i=t).field,a=i.value,u=(\"count\"===i.op?\"__count__\":i.op)||\"sum\",c=n(s).concat(n(a)),h=s,f=i.limit||0,p={},m=[],(d=o).visit(d.SOURCE,function(t){var e=h(t);p[e]||(p[e]=1,m.push(e))}),m.sort(function(t,e){return(t<e||null==t)&&null!=e?-1:(e<t||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e==e?-1:e!=e&&t==t?1:0)}),l=f?m.slice(0,f):m,{key:i.key,groupby:i.groupby,ops:l.map(function(){return u}),fields:l.map(function(t){return n=s,i=a,e(function(t){return n(t)===r?i(t):NaN},c,(r=t)+\"\");var r,n,i}),as:l.map(function(t){return t+\"\"}),modified:i.modified.bind(i)}),r);var i,o,s,a,u,c,l,h,f,d,p,m},H(vo,Wi).transform=function(t,e){var r=this,o=t.subflow,s=t.field;return(t.modified(\"field\")||s&&e.modified(n(s)))&&i(\"PreFacet does not support field modification.\"),this._targets.active=0,e.visit(e.MOD,function(t){var n=r.subflow(ct(t),o,e,t);s?s(t).forEach(function(t){n.mod(t)}):n.mod(t)}),e.visit(e.ADD,function(t){var n=r.subflow(ct(t),o,e,t);s?s(t).forEach(function(t){n.add(ht(t))}):n.add(t)}),e.visit(e.REM,function(t){var n=r.subflow(ct(t),o,e,t);s?s(t).forEach(function(t){n.rem(t)}):n.rem(t)}),e},yo.Definition={type:\"Project\",metadata:{generates:!0,changes:!0},params:[{name:\"fields\",type:\"field\",array:!0},{name:\"as\",type:\"string\",null:!0,array:!0}]},H(yo,zn).transform=function(t,e){var r,n,i=t.fields,o=Ji(t.fields,t.as||[]),s=i?function(t,e){return function(t,e,r,n){for(var i=0,o=r.length;i<o;++i)e[n[i]]=r[i](t);return e}(t,e,i,o)}:dt;return this.value?n=this.value:(e=e.addAll(),n=this.value={}),r=e.fork(e.NO_SOURCE),e.visit(e.REM,function(t){var e=ct(t);r.rem.push(n[e]),n[e]=null}),e.visit(e.ADD,function(t){var e=s(t,ht({}));n[ct(t)]=e,r.add.push(e)}),e.visit(e.MOD,function(t){r.mod.push(s(t,n[ct(t)]))}),r},H(wo,zn).transform=function(t,e){return this.value=t.value,t.modified(\"value\")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},H(xo,zn).transform=function(t,e){var r,n;return this.value?n=this.value:(r=e=e.addAll(),n=this.value={}),t.derive&&(r=e.fork(e.NO_SOURCE),e.visit(e.REM,function(t){var e=ct(t);r.rem.push(n[e]),n[e]=null}),e.visit(e.ADD,function(t){var e=ft(t);n[ct(t)]=e,r.add.push(e)}),e.visit(e.MOD,function(t){r.mod.push(dt(t,n[ct(t)]))})),r},bo.Definition={type:\"Sample\",metadata:{},params:[{name:\"size\",type:\"number\",default:1e3}]},H(bo,zn).transform=function(e,r){var n=r.fork(r.NO_SOURCE),i=e.modified(\"size\"),o=e.size,s=this.value,a=this.count,u=0,c=s.reduce(function(t,e){return t[ct(e)]=1,t},{});function l(e){var r,i;s.length<o?s.push(e):(i=~~((a+1)*t.random()))<s.length&&u<=i&&(c[ct(r=s[i])]&&n.rem.push(r),s[i]=e),++a}if(r.rem.length&&(r.visit(r.REM,function(t){var e=ct(t);c[e]&&(c[e]=-1,n.rem.push(t)),--a}),s=s.filter(function(t){return-1!==c[ct(t)]})),(r.rem.length||i)&&s.length<o&&r.source&&(u=a=s.length,r.visit(r.SOURCE,function(t){c[ct(t)]||l(t)}),u=-1),i&&s.length>o){for(var h=0,f=s.length-o;h<f;++h)c[ct(s[h])]=-1,n.rem.push(s[h]);s=s.slice(f)}return r.mod.length&&r.visit(r.MOD,function(t){c[ct(t)]&&n.mod.push(t)}),r.add.length&&r.visit(r.ADD,l),(r.add.length||u<0)&&(n.add=s.filter(function(t){return!c[ct(t)]})),this.count=a,this.value=n.source=s,n},_o.Definition={type:\"Sequence\",metadata:{changes:!0},params:[{name:\"start\",type:\"number\",required:!0},{name:\"stop\",type:\"number\",required:!0},{name:\"step\",type:\"number\",default:1}],output:[\"value\"]},H(_o,zn).transform=function(t,e){if(!this.value||t.modified()){var r=e.materialize().fork(e.MOD);return r.rem=this.value?e.rem.concat(this.value):e.rem,this.value=ai(t.start,t.stop,t.step||1).map(ht),r.add=e.add.concat(this.value),r}},H(Mo,zn).transform=function(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},H(So,zn).transform=function(t,e){var r=e.dataflow,n=t.field,i=this.value,o=!0;function s(t){i.set(n(t),t)}return t.modified(\"field\")||e.modified(n.fields)?(i.clear(),e.visit(e.SOURCE,s)):e.changed()?(e.visit(e.REM,function(t){i.delete(n(t))}),e.visit(e.ADD,s)):o=!1,this.modified(o),i.empty>r.cleanThreshold&&r.runAfter(i.clean),e.fork()},H(Eo,zn).transform=function(t,e){(!this.value||t.modified(\"field\")||t.modified(\"sort\")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(t.sort):e.source).map(t.field))};var To={row_number:function(){return{next:function(t){return t.index+1}}},rank:function(){var t;return{init:function(){t=1},next:function(e){var r=e.index,n=e.data;return r&&e.compare(n[r-1],n[r])?t=r+1:t}}},dense_rank:function(){var t;return{init:function(){t=1},next:function(e){var r=e.index,n=e.data;return r&&e.compare(n[r-1],n[r])?++t:t}}},percent_rank:function(){var t=To.rank(),e=t.next;return{init:t.init,next:function(t){return(e(t)-1)/(t.data.length-1)}}},cume_dist:function(){var t;return{init:function(){t=0},next:function(e){var r=e.index,n=e.data,i=e.compare;if(t<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;t=r}return(1+t)/n.length}}},ntile:function(t,e){0<(e=+e)||i(\"ntile num must be greater than zero.\");var r=To.cume_dist(),n=r.next;return{init:r.init,next:function(t){return Math.ceil(e*n(t))}}},lag:function(t,e){return e=+e||1,{next:function(r){var n=r.index-e;return 0<=n?t(r.data[n]):null}}},lead:function(t,e){return e=+e||1,{next:function(r){var n=r.index+e,i=r.data;return n<i.length?t(i[n]):null}}},first_value:function(t){return{next:function(e){return t(e.data[e.i0])}}},last_value:function(t){return{next:function(e){return t(e.data[e.i1-1])}}},nth_value:function(t,e){return 0<(e=+e)||i(\"nth_value nth must be greater than zero.\"),{next:function(r){var n=r.i0+(e-1);return n<r.i1?t(r.data[n]):null}}}},Ao=Object.keys(To);function Ro(t){var e=O(t.ops),o=O(t.fields),s=O(t.params),a=O(t.as),u=this.outputs=[],c=this.windows=[],l={},h={},f=!0,d=[],m=[];function g(t){O(n(t)).forEach(function(t){l[t]=1})}g(t.sort),e.forEach(function(t,e){var n,l,v=o[e],y=r(v),w=Gn(t,y,a[e]);if(g(v),u.push(w),To.hasOwnProperty(t))c.push((n=w,{init:(l=To[t](o[e],s[e])).init||p,update:function(t,e){e[n]=l.next(t)}}));else{if(null==v&&\"count\"!==t&&i(\"Null aggregate field specified.\"),\"count\"===t)return void d.push(w);f=!1;var x=h[y];x||((x=h[y]=[]).field=v,m.push(x)),x.push(Yn(t,w))}}),(d.length||m.length)&&(this.cell=function(t,e,r){t=t.map(function(t){return Jn(t,t.field)});var n={num:0,agg:null,store:!1,count:e};if(!r)for(var i=t.length,o=n.agg=Array(i),s=0;s<i;++s)o[s]=new t[s](n);if(n.store)var a=n.data=new Ei;return n.add=function(t){if(n.num+=1,!r){a&&a.add(t);for(var e=0;e<i;++e)o[e].add(o[e].get(t),t)}},n.rem=function(t){if(n.num-=1,!r){a&&a.rem(t);for(var e=0;e<i;++e)o[e].rem(o[e].get(t),t)}},n.set=function(t){var i,s;for(a&&a.values(),i=0,s=e.length;i<s;++i)t[e[i]]=n.num;if(!r)for(i=0,s=o.length;i<s;++i)o[i].set(t)},n.init=function(){n.num=0,a&&a.reset();for(var t=0;t<i;++t)o[t].init()},n}(m,d,f)),this.inputs=Object.keys(l)}var ko=Ro.prototype;function Co(t){zn.call(this,{},t),this._mlen=0,this._mods=[]}ko.init=function(){this.windows.forEach(function(t){t.init()}),this.cell&&this.cell.init()},ko.update=function(t,e){var r,n=this.cell,i=this.windows,o=t.data,s=i&&i.length;if(n){for(r=t.p0;r<t.i0;++r)n.rem(o[r]);for(r=t.p1;r<t.i1;++r)n.add(o[r]);n.set(e)}for(r=0;r<s;++r)i[r].update(t,e)},Co.Definition={type:\"Window\",metadata:{modifies:!0},params:[{name:\"sort\",type:\"compare\"},{name:\"groupby\",type:\"field\",array:!0},{name:\"ops\",type:\"enum\",array:!0,values:Ao.concat(qn)},{name:\"params\",type:\"number\",null:!0,array:!0},{name:\"fields\",type:\"field\",null:!0,array:!0},{name:\"as\",type:\"string\",null:!0,array:!0},{name:\"frame\",type:\"number\",null:!0,array:!0,length:2,default:[null,0]},{name:\"ignorePeers\",type:\"boolean\",default:!1}]};var Lo=H(Co,zn);function Po(t,e,r){var n=r.sort,i=n&&!r.ignorePeers,o=r.frame||[null,0],s=t.data(n),a=s.length,u=0,c=i?ei(n):null,l={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:n||F(-1)};for(e.init();u<a;++u)Do(l,o,u,a),i&&Oo(l,c),e.update(l,s[u])}function Do(t,e,r,n){t.p0=t.i0,t.p1=t.i1,t.i0=null==e[0]?0:Math.max(0,r-Math.abs(e[0])),t.i1=null==e[1]?n:Math.min(n,r+Math.abs(e[1])+1),t.index=r}function Oo(t,e){var r=t.i0,n=t.i1-1,i=t.compare,o=t.data,s=o.length-1;0<r&&!i(o[r],o[r-1])&&(t.i0=e.left(o,o[r])),n<s&&!i(o[n],o[n+1])&&(t.i1=e.right(o,o[n]))}Lo.transform=function(t,e){var r,n,i=this,o=i.state,s=t.modified();this.stamp=e.stamp,o&&!s||(o=i.state=new Ro(t));var a=Hn(t.groupby);function u(t){return i.group(a(t))}for(s||e.modified(o.inputs)?(i.value={},e.visit(e.SOURCE,function(t){u(t).add(t)})):(e.visit(e.REM,function(t){u(t).remove(t)}),e.visit(e.ADD,function(t){u(t).add(t)})),r=0,n=i._mlen;r<n;++r)Po(i._mods[r],o,t);return i._mlen=0,i._mods=[],e.reflow(s).modifies(o.outputs)},Lo.group=function(t){var e=this.value[t];return e||((e=this.value[t]=Li(ct)).stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e};var No=Object.freeze({aggregate:Ai,bin:ki,collect:Pi,compare:Di,countpattern:Ni,cross:Fi,density:ji,extent:Bi,facet:Wi,field:Yi,filter:$i,flatten:Zi,fold:Qi,formula:Ki,generate:to,impute:no,joinaggregate:io,key:so,lookup:uo,multiextent:co,multivalues:ho,params:po,pivot:mo,prefacet:vo,project:yo,proxy:wo,relay:xo,sample:bo,sequence:_o,sieve:Mo,subflow:Hi,tupleindex:So,values:Eo,window:Co});function Io(t){this.clear(),t&&this.union(t)}var Fo=Io.prototype;Fo.clone=function(){return new Io(this)},Fo.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},Fo.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},Fo.set=function(t,e,r,n){return r<t?(this.x2=t,this.x1=r):(this.x1=t,this.x2=r),n<e?(this.y2=e,this.y1=n):(this.y1=e,this.y2=n),this},Fo.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},Fo.expand=function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},Fo.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},Fo.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},Fo.rotate=function(t,e,r){var n=Math.cos(t),i=Math.sin(t),o=e-e*n+r*i,s=r-e*i-r*n,a=this.x1,u=this.x2,c=this.y1,l=this.y2;return this.clear().add(n*a-i*c+o,i*a+n*c+s).add(n*a-i*l+o,i*a+n*l+s).add(n*u-i*c+o,i*u+n*c+s).add(n*u-i*l+o,i*u+n*l+s)},Fo.union=function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},Fo.intersect=function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},Fo.encloses=function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},Fo.alignsWith=function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},Fo.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},Fo.contains=function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},Fo.width=function(){return this.x2-this.x1},Fo.height=function(){return this.y2-this.y1};var zo,Uo=0,jo=function(t,e){var r,n=[];return r={id:\"gradient_\"+Uo++,x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:n,stop:function(t,e){return n.push({offset:t,color:e}),r}}};function Vo(t){this.mark=t,this.bounds=this.bounds||new Io}function Bo(t){Vo.call(this,t),this.items=this.items||[]}H(Bo,Vo);try{if(!(zo=require(\"canvas\")))throw 1}catch(h){try{zo=require(\"canvas-prebuilt\")}catch(h){zo=null}}function Ho(t,e){return function(t,e){if(\"undefined\"!=typeof document&&document.createElement){var r=document.createElement(\"canvas\");if(r&&r.getContext)return r.width=t,r.height=e,r}return null}(t,e)||function(t,e){if(zo)try{return new zo(t,e)}catch(t){}return null}(t,e)||null}function Go(t){this._pending=0,this._loader=t||te()}var Wo=Go.prototype;function qo(t){t._pending+=1}function Yo(t){t._pending-=1}Wo.pending=function(){return this._pending},Wo.sanitizeURL=function(t){var e=this;return qo(e),e._loader.sanitize(t,{context:\"href\"}).then(function(t){return Yo(e),t}).catch(function(){return Yo(e),null})},Wo.loadImage=function(t){var e=this,r=(\"undefined\"!=typeof Image?Image:null)||zo&&zo.Image||null;return qo(e),e._loader.sanitize(t,{context:\"image\"}).then(function(t){var n=t.href;if(!n||!r)throw{url:n};var i=new r;return i.onload=function(){Yo(e),i.loaded=!0},i.onerror=function(){Yo(e),i.loaded=!1},i.src=n,i}).catch(function(t){return Yo(e),{loaded:!1,width:0,height:0,src:t&&t.url||\"\"}})},Wo.ready=function(){var t=this;return new Promise(function(e){!function r(n){t.pending()?setTimeout(function(){r(!0)},10):e(n)}(!1)})};var Xo=Math.PI,$o=2*Xo,Jo=1e-6,Zo=$o-Jo;function Qo(){this._x0=this._y0=this._x1=this._y1=null,this._=\"\"}function Ko(){return new Qo}Qo.prototype=Ko.prototype={constructor:Qo,moveTo:function(t,e){this._+=\"M\"+(this._x0=this._x1=+t)+\",\"+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+=\"Z\")},lineTo:function(t,e){this._+=\"L\"+(this._x1=+t)+\",\"+(this._y1=+e)},quadraticCurveTo:function(t,e,r,n){this._+=\"Q\"+ +t+\",\"+ +e+\",\"+(this._x1=+r)+\",\"+(this._y1=+n)},bezierCurveTo:function(t,e,r,n,i,o){this._+=\"C\"+ +t+\",\"+ +e+\",\"+ +r+\",\"+ +n+\",\"+(this._x1=+i)+\",\"+(this._y1=+o)},arcTo:function(t,e,r,n,i){var o=this._x1,s=this._y1,a=(r=+r)-(t=+t),u=(n=+n)-(e=+e),c=o-t,l=s-e,h=c*c+l*l;if((i=+i)<0)throw new Error(\"negative radius: \"+i);if(null===this._x1)this._+=\"M\"+(this._x1=t)+\",\"+(this._y1=e);else if(Jo<h)if(Math.abs(l*a-u*c)>Jo&&i){var f=r-o,d=n-s,p=a*a+u*u,m=f*f+d*d,g=Math.sqrt(p),v=Math.sqrt(h),y=i*Math.tan((Xo-Math.acos((p+h-m)/(2*g*v)))/2),w=y/v,x=y/g;Math.abs(w-1)>Jo&&(this._+=\"L\"+(t+w*c)+\",\"+(e+w*l)),this._+=\"A\"+i+\",\"+i+\",0,0,\"+ +(c*d<l*f)+\",\"+(this._x1=t+x*a)+\",\"+(this._y1=e+x*u)}else this._+=\"L\"+(this._x1=t)+\",\"+(this._y1=e)},arc:function(t,e,r,n,i,o){t=+t,e=+e;var s=(r=+r)*Math.cos(n),a=r*Math.sin(n),u=t+s,c=e+a,l=1^o,h=o?n-i:i-n;if(r<0)throw new Error(\"negative radius: \"+r);null===this._x1?this._+=\"M\"+u+\",\"+c:(Math.abs(this._x1-u)>Jo||Math.abs(this._y1-c)>Jo)&&(this._+=\"L\"+u+\",\"+c),r&&(h<0&&(h=h%$o+$o),Zo<h?this._+=\"A\"+r+\",\"+r+\",0,1,\"+l+\",\"+(t-s)+\",\"+(e-a)+\"A\"+r+\",\"+r+\",0,1,\"+l+\",\"+(this._x1=u)+\",\"+(this._y1=c):Jo<h&&(this._+=\"A\"+r+\",\"+r+\",0,\"+ +(Xo<=h)+\",\"+l+\",\"+(this._x1=t+r*Math.cos(i))+\",\"+(this._y1=e+r*Math.sin(i))))},rect:function(t,e,r,n){this._+=\"M\"+(this._x0=this._x1=+t)+\",\"+(this._y0=this._y1=+e)+\"h\"+ +r+\"v\"+ +n+\"h\"+-r+\"Z\"},toString:function(){return this._}};var ts=function(t){return function(){return t}},es=Math.abs,rs=Math.atan2,ns=Math.cos,is=Math.max,os=Math.min,ss=Math.sin,as=Math.sqrt,us=1e-12,cs=Math.PI,ls=cs/2,hs=2*cs;function fs(t){return 1<=t?ls:t<=-1?-ls:Math.asin(t)}function ds(t){return t.innerRadius}function ps(t){return t.outerRadius}function ms(t){return t.startAngle}function gs(t){return t.endAngle}function vs(t){return t&&t.padAngle}function ys(t,e,r,n,i,o,s){var a=t-r,u=e-n,c=(s?o:-o)/as(a*a+u*u),l=c*u,h=-c*a,f=t+l,d=e+h,p=r+l,m=n+h,g=(f+p)/2,v=(d+m)/2,y=p-f,w=m-d,x=y*y+w*w,b=i-o,_=f*m-p*d,M=(w<0?-1:1)*as(is(0,b*b*x-_*_)),S=(_*w-y*M)/x,E=(-_*y-w*M)/x,T=(_*w+y*M)/x,A=(-_*y+w*M)/x,R=S-g,k=E-v,C=T-g,L=A-v;return C*C+L*L<R*R+k*k&&(S=T,E=A),{cx:S,cy:E,x01:-l,y01:-h,x11:S*(i/b-1),y11:E*(i/b-1)}}function ws(t){this._context=t}ws.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var xs=function(t){return new ws(t)};function bs(t){return t[0]}function _s(t){return t[1]}var Ms=function(){var t=bs,e=_s,r=ts(!0),n=null,i=xs,o=null;function s(s){var a,u,c,l=s.length,h=!1;for(null==n&&(o=i(c=Ko())),a=0;a<=l;++a)!(a<l&&r(u=s[a],a,s))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(u,a,s),+e(u,a,s));if(c)return o=null,c+\"\"||null}return s.x=function(e){return arguments.length?(t=\"function\"==typeof e?e:ts(+e),s):t},s.y=function(t){return arguments.length?(e=\"function\"==typeof t?t:ts(+t),s):e},s.defined=function(t){return arguments.length?(r=\"function\"==typeof t?t:ts(!!t),s):r},s.curve=function(t){return arguments.length?(i=t,null!=n&&(o=i(n)),s):i},s.context=function(t){return arguments.length?(null==t?n=o=null:o=i(n=t),s):n},s},Ss=function(){var t=bs,e=null,r=ts(0),n=_s,i=ts(!0),o=null,s=xs,a=null;function u(u){var c,l,h,f,d,p=u.length,m=!1,g=new Array(p),v=new Array(p);for(null==o&&(a=s(d=Ko())),c=0;c<=p;++c){if(!(c<p&&i(f=u[c],c,u))===m)if(m=!m)l=c,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=c-1;l<=h;--h)a.point(g[h],v[h]);a.lineEnd(),a.areaEnd()}m&&(g[c]=+t(f,c,u),v[c]=+r(f,c,u),a.point(e?+e(f,c,u):g[c],n?+n(f,c,u):v[c]))}if(d)return a=null,d+\"\"||null}function c(){return Ms().defined(i).curve(s).context(o)}return u.x=function(r){return arguments.length?(t=\"function\"==typeof r?r:ts(+r),e=null,u):t},u.x0=function(e){return arguments.length?(t=\"function\"==typeof e?e:ts(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:\"function\"==typeof t?t:ts(+t),u):e},u.y=function(t){return arguments.length?(r=\"function\"==typeof t?t:ts(+t),n=null,u):r},u.y0=function(t){return arguments.length?(r=\"function\"==typeof t?t:ts(+t),u):r},u.y1=function(t){return arguments.length?(n=null==t?null:\"function\"==typeof t?t:ts(+t),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(r)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(e).y(r)},u.defined=function(t){return arguments.length?(i=\"function\"==typeof t?t:ts(!!t),u):i},u.curve=function(t){return arguments.length?(s=t,null!=o&&(a=s(o)),u):s},u.context=function(t){return arguments.length?(null==t?o=a=null:a=s(o=t),u):o},u},Es={draw:function(t,e){var r=Math.sqrt(e/cs);t.moveTo(r,0),t.arc(0,0,r,0,hs)}},Ts=function(){};function As(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Rs(t){this._context=t}function ks(t){this._context=t}function Cs(t){this._context=t}function Ls(t,e){this._basis=new Rs(t),this._beta=e}Rs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:As(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:As(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ks.prototype={areaStart:Ts,areaEnd:Ts,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:As(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Cs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:As(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Ls.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,r=t.length-1;if(0<r)for(var n,i=t[0],o=e[0],s=t[r]-i,a=e[r]-o,u=-1;++u<=r;)this._basis.point(this._beta*t[u]+(1-this._beta)*(i+(n=u/r)*s),this._beta*e[u]+(1-this._beta)*(o+n*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Ps=function t(e){function r(t){return 1===e?new Rs(t):new Ls(t,e)}return r.beta=function(e){return t(+e)},r}(.85);function Ds(t,e,r){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-r),t._x2,t._y2)}function Os(t,e){this._context=t,this._k=(1-e)/6}Os.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ds(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ds(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ns=function t(e){function r(t){return new Os(t,e)}return r.tension=function(e){return t(+e)},r}(0);function Is(t,e){this._context=t,this._k=(1-e)/6}Is.prototype={areaStart:Ts,areaEnd:Ts,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ds(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Fs=function t(e){function r(t){return new Is(t,e)}return r.tension=function(e){return t(+e)},r}(0);function zs(t,e){this._context=t,this._k=(1-e)/6}zs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ds(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Us=function t(e){function r(t){return new zs(t,e)}return r.tension=function(e){return t(+e)},r}(0);function js(t,e,r){var n=t._x1,i=t._y1,o=t._x2,s=t._y2;if(t._l01_a>us){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);n=(n*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>us){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/l,s=(s*c+t._y1*t._l23_2a-r*t._l12_2a)/l}t._context.bezierCurveTo(n,i,o,s,t._x2,t._y2)}function Vs(t,e){this._context=t,this._alpha=e}Vs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:js(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Bs=function t(e){function r(t){return e?new Vs(t,e):new Os(t,0)}return r.alpha=function(e){return t(+e)},r}(.5);function Hs(t,e){this._context=t,this._alpha=e}Hs.prototype={areaStart:Ts,areaEnd:Ts,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:js(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Gs=function t(e){function r(t){return e?new Hs(t,e):new Is(t,0)}return r.alpha=function(e){return t(+e)},r}(.5);function Ws(t,e){this._context=t,this._alpha=e}Ws.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:js(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var qs=function t(e){function r(t){return e?new Ws(t,e):new zs(t,0)}return r.alpha=function(e){return t(+e)},r}(.5);function Ys(t){this._context=t}function Xs(t){return t<0?-1:1}function $s(t,e,r){var n=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(n||i<0&&-0),s=(r-t._y1)/(i||n<0&&-0),a=(o*i+s*n)/(n+i);return(Xs(o)+Xs(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function Js(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Zs(t,e,r){var n=t._x0,i=t._x1,o=t._y1,s=(i-n)/3;t._context.bezierCurveTo(n+s,t._y0+s*e,i-s,o-s*r,i,o)}function Qs(t){this._context=t}function Ks(t){this._context=new ta(t)}function ta(t){this._context=t}function ea(t){this._context=t}function ra(t){var e,r,n=t.length-1,i=new Array(n),o=new Array(n),s=new Array(n);for(o[i[0]=0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)o[e]-=r=i[e]/o[e-1],s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;0<=e;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function na(t,e){this._context=t,this._t=e}Ys.prototype={areaStart:Ts,areaEnd:Ts,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Qs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Zs(this,this._t0,Js(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Zs(this,Js(this,r=$s(this,t,e)),r);break;default:Zs(this,this._t0,r=$s(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}},(Ks.prototype=Object.create(Qs.prototype)).point=function(t,e){Qs.prototype.point.call(this,e,t)},ta.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,o){this._context.bezierCurveTo(e,t,n,r,o,i)}},ea.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===r)this._context.lineTo(t[1],e[1]);else for(var n=ra(t),i=ra(e),o=0,s=1;s<r;++o,++s)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],t[s],e[s]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},na.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}}this._x=t,this._y=e}};var ia={basis:{curve:function(t){return new Rs(t)}},\"basis-closed\":{curve:function(t){return new ks(t)}},\"basis-open\":{curve:function(t){return new Cs(t)}},bundle:{curve:Ps,tension:\"beta\",value:.85},cardinal:{curve:Ns,tension:\"tension\",value:0},\"cardinal-open\":{curve:Us,tension:\"tension\",value:0},\"cardinal-closed\":{curve:Fs,tension:\"tension\",value:0},\"catmull-rom\":{curve:Bs,tension:\"alpha\",value:.5},\"catmull-rom-closed\":{curve:Gs,tension:\"alpha\",value:.5},\"catmull-rom-open\":{curve:qs,tension:\"alpha\",value:.5},linear:{curve:xs},\"linear-closed\":{curve:function(t){return new Ys(t)}},monotone:{horizontal:function(t){return new Ks(t)},vertical:function(t){return new Qs(t)}},natural:{curve:function(t){return new ea(t)}},step:{curve:function(t){return new na(t,.5)}},\"step-after\":{curve:function(t){return new na(t,1)}},\"step-before\":{curve:function(t){return new na(t,0)}}};function oa(t,e,r){var n=ia.hasOwnProperty(t)&&ia[t],i=null;return n&&(i=n.curve||n[e||\"vertical\"],n.tension&&null!=r&&(i=i[n.tension](r))),i}var sa={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},aa=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\\d)([-+])/g,/\\s|,|###/],ua=function(t){var e,r,n,i,o,s,a,u,c,l,h,f=[];for(u=0,l=(e=t.slice().replace(aa[0],\"###$1\").split(aa[1]).slice(1)).length;u<l;++u){for(n=(r=e[u]).slice(1).trim().replace(aa[2],\"$1###$2\").split(aa[3]),i=[s=r.charAt(0)],c=0,h=n.length;c<h;++c)(o=+n[c])===o&&i.push(o);if(a=sa[s.toLowerCase()],i.length-1>a)for(c=1,h=i.length;c<h;c+=a)f.push([s].concat(i.slice(c,c+a)));else f.push(i)}return f},ca={},la={},ha=[].join;function fa(t){var e=ha.call(t);if(la[e])return la[e];var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=c*s,h=-u*a,f=u*s,d=c*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(o),v=Math.sin(o),y=.5*(o-i),w=Math.sin(.5*y),x=8/3*w*w/Math.sin(y),b=r+p-x*m,_=n+m+x*p,M=r+g,S=n+v,E=M+x*v,T=S-x*g;return la[e]=[l*b+h*_,f*b+d*_,l*E+h*T,f*E+d*T,l*M+h*S,f*M+d*S]}var da=[\"l\",0,0,0,0,0,0,0];function pa(t,e){var r=da[0]=t[0];if(\"a\"===r||\"A\"===r)da[1]=e*t[1],da[2]=e*t[2],da[6]=e*t[6],da[7]=e*t[7];else for(var n=1,i=t.length;n<i;++n)da[n]=e*t[n];return da}var ma=function(t,e,r,n,i){var o,s,a,u,c,l=null,h=0,f=0,d=0,p=0;null==r&&(r=0),null==n&&(n=0),null==i&&(i=1),t.beginPath&&t.beginPath();for(var m=0,g=e.length;m<g;++m){switch(o=e[m],1!==i&&(o=pa(o,i)),o[0]){case\"l\":t.lineTo((h+=o[1])+r,(f+=o[2])+n);break;case\"L\":t.lineTo((h=o[1])+r,(f=o[2])+n);break;case\"h\":t.lineTo((h+=o[1])+r,f+n);break;case\"H\":t.lineTo((h=o[1])+r,f+n);break;case\"v\":t.lineTo(h+r,(f+=o[1])+n);break;case\"V\":t.lineTo(h+r,(f=o[1])+n);break;case\"m\":t.moveTo((h+=o[1])+r,(f+=o[2])+n);break;case\"M\":t.moveTo((h=o[1])+r,(f=o[2])+n);break;case\"c\":t.bezierCurveTo(h+o[1]+r,f+o[2]+n,(d=h+o[3])+r,(p=f+o[4])+n,(s=h+o[5])+r,(a=f+o[6])+n),h=s,f=a;break;case\"C\":t.bezierCurveTo(o[1]+r,o[2]+n,(d=o[3])+r,(p=o[4])+n,(h=o[5])+r,(f=o[6])+n);break;case\"s\":t.bezierCurveTo((d=2*h-d)+r,(p=2*f-p)+n,h+o[1]+r,f+o[2]+n,(s=h+o[3])+r,(a=f+o[4])+n),d=h+o[1],p=f+o[2],h=s,f=a;break;case\"S\":t.bezierCurveTo((d=2*h-d)+r,(p=2*f-p)+n,o[1]+r,o[2]+n,(s=o[3])+r,(a=o[4])+n),h=s,f=a,d=o[1],p=o[2];break;case\"q\":t.quadraticCurveTo((d=h+o[1])+r,(p=f+o[2])+n,(s=h+o[3])+r,(a=f+o[4])+n),h=s,f=a;break;case\"Q\":t.quadraticCurveTo(o[1]+r,o[2]+n,(s=o[3])+r,(a=o[4])+n),h=s,f=a,d=o[1],p=o[2];break;case\"t\":s=h+o[1],a=f+o[2],null===l[0].match(/[QqTt]/)?(d=h,p=f):\"t\"===l[0]?(d=2*h-u,p=2*f-c):\"q\"===l[0]&&(d=2*h-d,p=2*f-p),u=d,c=p,t.quadraticCurveTo(d+r,p+n,s+r,a+n),d=(h=s)+o[1],p=(f=a)+o[2];break;case\"T\":t.quadraticCurveTo((d=2*h-d)+r,(p=2*f-p)+n,(s=o[1])+r,(a=o[2])+n),h=s,f=a;break;case\"a\":ga(t,h+r,f+n,[o[1],o[2],o[3],o[4],o[5],o[6]+h+r,o[7]+f+n]),h+=o[6],f+=o[7];break;case\"A\":ga(t,h+r,f+n,[o[1],o[2],o[3],o[4],o[5],o[6]+r,o[7]+n]),h=o[6],f=o[7];break;case\"z\":case\"Z\":t.closePath()}l=o}};function ga(t,e,r,n){for(var i=function(t,e,r,n,i,o,s,a,u){var c=ha.call(arguments);if(ca[c])return ca[c];var l=s*(Math.PI/180),h=Math.sin(l),f=Math.cos(l),d=f*(a-t)*.5+h*(u-e)*.5,p=f*(u-e)*.5-h*(a-t)*.5,m=d*d/((r=Math.abs(r))*r)+p*p/((n=Math.abs(n))*n);1<m&&(r*=m=Math.sqrt(m),n*=m);var g=f/r,v=h/r,y=-h/n,w=f/n,x=g*a+v*u,b=y*a+w*u,_=g*t+v*e,M=y*t+w*e,S=1/((_-x)*(_-x)+(M-b)*(M-b))-.25;S<0&&(S=0);var E=Math.sqrt(S);o==i&&(E=-E);var T=.5*(x+_)-E*(M-b),A=.5*(b+M)+E*(_-x),R=Math.atan2(b-A,x-T),k=Math.atan2(M-A,_-T)-R;k<0&&1===o?k+=2*Math.PI:0<k&&0===o&&(k-=2*Math.PI);for(var C=Math.ceil(Math.abs(k/(.5*Math.PI+.001))),L=[],P=0;P<C;++P)L[P]=[T,A,R+P*k/C,R+(P+1)*k/C,r,n,h,f];return ca[c]=L}(n[5],n[6],n[0],n[1],n[3],n[4],n[2],e,r),o=0;o<i.length;++o){var s=fa(i[o]);t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}var va=2*Math.PI,ya=Math.sqrt(3)/2,wa={circle:{draw:function(t,e){var r=Math.sqrt(e)/2;t.moveTo(r,0),t.arc(0,0,r,0,va)}},cross:{draw:function(t,e){var r=Math.sqrt(e)/2,n=r/2.5;t.moveTo(-r,-n),t.lineTo(-r,n),t.lineTo(-n,n),t.lineTo(-n,r),t.lineTo(n,r),t.lineTo(n,n),t.lineTo(r,n),t.lineTo(r,-n),t.lineTo(n,-n),t.lineTo(n,-r),t.lineTo(-n,-r),t.lineTo(-n,-n),t.closePath()}},diamond:{draw:function(t,e){var r=Math.sqrt(e)/2;t.moveTo(-r,0),t.lineTo(0,-r),t.lineTo(r,0),t.lineTo(0,r),t.closePath()}},square:{draw:function(t,e){var r=Math.sqrt(e),n=-r/2;t.rect(n,n,r,r)}},\"triangle-up\":{draw:function(t,e){var r=Math.sqrt(e)/2,n=ya*r;t.moveTo(0,-n),t.lineTo(-r,n),t.lineTo(r,n),t.closePath()}},\"triangle-down\":{draw:function(t,e){var r=Math.sqrt(e)/2,n=ya*r;t.moveTo(0,n),t.lineTo(-r,-n),t.lineTo(r,-n),t.closePath()}},\"triangle-right\":{draw:function(t,e){var r=Math.sqrt(e)/2,n=ya*r;t.moveTo(n,0),t.lineTo(-n,-r),t.lineTo(-n,r),t.closePath()}},\"triangle-left\":{draw:function(t,e){var r=Math.sqrt(e)/2,n=ya*r;t.moveTo(-n,0),t.lineTo(n,-r),t.lineTo(n,r),t.closePath()}}};function xa(t){return wa.hasOwnProperty(t)?wa[t]:function(t){if(!ba.hasOwnProperty(t)){var e=ua(t);ba[t]={draw:function(t,r){ma(t,e,0,0,Math.sqrt(r)/2)}}}return ba[t]}(t)}var ba={};function _a(t){return t.x}function Ma(t){return t.y}function Sa(t){return t.width}function Ea(t){return t.height}function Ta(t){return function(){return t}}var Aa=function(){var t=_a,e=Ma,r=Sa,n=Ea,i=Ta(0),o=null;function s(s,a,u){var c,l=null!=a?a:+t.call(this,s),h=null!=u?u:+e.call(this,s),f=+r.call(this,s),d=+n.call(this,s),p=+i.call(this,s);if(o||(o=c=Ko()),p<=0)o.rect(l,h,f,d);else{var m=l+f,g=h+d;o.moveTo(l+p,h),o.lineTo(m-p,h),o.quadraticCurveTo(m,h,m,h+p),o.lineTo(m,g-p),o.quadraticCurveTo(m,g,m-p,g),o.lineTo(l+p,g),o.quadraticCurveTo(l,g,l,g-p),o.lineTo(l,h+p),o.quadraticCurveTo(l,h,l+p,h),o.closePath()}if(c)return o=null,c+\"\"||null}return s.x=function(e){return arguments.length?(t=\"function\"==typeof e?e:Ta(+e),s):t},s.y=function(t){return arguments.length?(e=\"function\"==typeof t?t:Ta(+t),s):e},s.width=function(t){return arguments.length?(r=\"function\"==typeof t?t:Ta(+t),s):r},s.height=function(t){return arguments.length?(n=\"function\"==typeof t?t:Ta(+t),s):n},s.cornerRadius=function(t){return arguments.length?(i=\"function\"==typeof t?t:Ta(+t),s):i},s.context=function(t){return arguments.length?(o=null==t?null:t,s):o},s},Ra=Math.PI,ka=function(){var t,e,r,n,i,o,s,a,u=null;function c(t,e,r){var n=r/2;if(i){var c=s-e,l=t-o;if(c||l){var h=Math.sqrt(c*c+l*l),f=(c/=h)*a,d=(l/=h)*a,p=Math.atan2(l,c);u.moveTo(o-f,s-d),u.lineTo(t-c*n,e-l*n),u.arc(t,e,n,p-Ra,p),u.lineTo(o+f,s+d),u.arc(o,s,a,p,p+Ra)}else u.arc(t,e,n,0,2*Ra);u.closePath()}else i=1;o=t,s=e,a=n}function l(o){var s,a,l,h=o.length,f=!1;for(null==u&&(u=l=Ko()),s=0;s<=h;++s)!(s<h&&n(a=o[s],s,o))===f&&(f=!f)&&(i=0),f&&c(+t(a,s,o),+e(a,s,o),+r(a,s,o));if(l)return u=null,l+\"\"||null}return l.x=function(e){return arguments.length?(t=e,l):t},l.y=function(t){return arguments.length?(e=t,l):e},l.size=function(t){return arguments.length?(r=t,l):r},l.defined=function(t){return arguments.length?(n=t,l):n},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l};function Ca(t){return t.x||0}function La(t){return t.y||0}function Pa(t){return t.cornerRadius||0}function Da(t){return!(!1===t.defined)}var Oa=function(){var t=ds,e=ps,r=ts(0),n=null,i=ms,o=gs,s=vs,a=null;function u(){var u,c,l,h,f,d,p,m,g,v,y,w,x=+t.apply(this,arguments),b=+e.apply(this,arguments),_=i.apply(this,arguments)-ls,M=o.apply(this,arguments)-ls,S=es(M-_),E=_<M;if(a||(a=u=Ko()),b<x&&(c=b,b=x,x=c),us<b)if(hs-us<S)a.moveTo(b*ns(_),b*ss(_)),a.arc(0,0,b,_,M,!E),us<x&&(a.moveTo(x*ns(M),x*ss(M)),a.arc(0,0,x,M,_,E));else{var T,A,R=_,k=M,C=_,L=M,P=S,D=S,O=s.apply(this,arguments)/2,N=us<O&&(n?+n.apply(this,arguments):as(x*x+b*b)),I=os(es(b-x)/2,+r.apply(this,arguments)),F=I,z=I;if(us<N){var U=fs(N/x*ss(O)),j=fs(N/b*ss(O));(P-=2*U)>us?(C+=U*=E?1:-1,L-=U):(P=0,C=L=(_+M)/2),(D-=2*j)>us?(R+=j*=E?1:-1,k-=j):(D=0,R=k=(_+M)/2)}var V=b*ns(R),B=b*ss(R),H=x*ns(L),G=x*ss(L);if(us<I){var W=b*ns(k),q=b*ss(k),Y=x*ns(C),X=x*ss(C);if(S<cs){var $=us<P?[(h=V)+(w=((v=H-(d=W))*((f=B)-(p=q))-(y=G-p)*(h-d))/(y*(m=Y-h)-v*(g=X-f)))*m,f+w*g]:[H,G],J=V-$[0],Z=B-$[1],Q=W-$[0],K=q-$[1],tt=1/ss((1<(l=(J*Q+Z*K)/(as(J*J+Z*Z)*as(Q*Q+K*K)))?0:l<-1?cs:Math.acos(l))/2),et=as($[0]*$[0]+$[1]*$[1]);F=os(I,(x-et)/(tt-1)),z=os(I,(b-et)/(tt+1))}}us<D?us<z?(T=ys(Y,X,V,B,b,z,E),A=ys(W,q,H,G,b,z,E),a.moveTo(T.cx+T.x01,T.cy+T.y01),z<I?a.arc(T.cx,T.cy,z,rs(T.y01,T.x01),rs(A.y01,A.x01),!E):(a.arc(T.cx,T.cy,z,rs(T.y01,T.x01),rs(T.y11,T.x11),!E),a.arc(0,0,b,rs(T.cy+T.y11,T.cx+T.x11),rs(A.cy+A.y11,A.cx+A.x11),!E),a.arc(A.cx,A.cy,z,rs(A.y11,A.x11),rs(A.y01,A.x01),!E))):(a.moveTo(V,B),a.arc(0,0,b,R,k,!E)):a.moveTo(V,B),us<x&&us<P?us<F?(T=ys(H,G,W,q,x,-F,E),A=ys(V,B,Y,X,x,-F,E),a.lineTo(T.cx+T.x01,T.cy+T.y01),F<I?a.arc(T.cx,T.cy,F,rs(T.y01,T.x01),rs(A.y01,A.x01),!E):(a.arc(T.cx,T.cy,F,rs(T.y01,T.x01),rs(T.y11,T.x11),!E),a.arc(0,0,x,rs(T.cy+T.y11,T.cx+T.x11),rs(A.cy+A.y11,A.cx+A.x11),E),a.arc(A.cx,A.cy,F,rs(A.y11,A.x11),rs(A.y01,A.x01),!E))):a.arc(0,0,x,L,C,E):a.lineTo(H,G)}else a.moveTo(0,0);if(a.closePath(),u)return a=null,u+\"\"||null}return u.centroid=function(){var r=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,n=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-cs/2;return[ns(n)*r,ss(n)*r]},u.innerRadius=function(e){return arguments.length?(t=\"function\"==typeof e?e:ts(+e),u):t},u.outerRadius=function(t){return arguments.length?(e=\"function\"==typeof t?t:ts(+t),u):e},u.cornerRadius=function(t){return arguments.length?(r=\"function\"==typeof t?t:ts(+t),u):r},u.padRadius=function(t){return arguments.length?(n=null==t?null:\"function\"==typeof t?t:ts(+t),u):n},u.startAngle=function(t){return arguments.length?(i=\"function\"==typeof t?t:ts(+t),u):i},u.endAngle=function(t){return arguments.length?(o=\"function\"==typeof t?t:ts(+t),u):o},u.padAngle=function(t){return arguments.length?(s=\"function\"==typeof t?t:ts(+t),u):s},u.context=function(t){return arguments.length?(a=null==t?null:t,u):a},u}().startAngle(function(t){return t.startAngle||0}).endAngle(function(t){return t.endAngle||0}).padAngle(function(t){return t.padAngle||0}).innerRadius(function(t){return t.innerRadius||0}).outerRadius(function(t){return t.outerRadius||0}).cornerRadius(Pa),Na=Ss().x(Ca).y1(La).y0(function(t){return(t.y||0)+(t.height||0)}).defined(Da),Ia=Ss().y(La).x1(Ca).x0(function(t){return(t.x||0)+(t.width||0)}).defined(Da),Fa=Ms().x(Ca).y(La).defined(Da),za=Aa().x(Ca).y(La).width(function(t){return t.width||0}).height(function(t){return t.height||0}).cornerRadius(Pa),Ua=function(){var t=ts(Es),e=ts(64),r=null;function n(){var n;if(r||(r=n=Ko()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),n)return r=null,n+\"\"||null}return n.type=function(e){return arguments.length?(t=\"function\"==typeof e?e:ts(e),n):t},n.size=function(t){return arguments.length?(e=\"function\"==typeof t?t:ts(+t),n):e},n.context=function(t){return arguments.length?(r=null==t?null:t,n):r},n}().type(function(t){return xa(t.shape||\"circle\")}).size(function(t){return null==t.size?64:t.size}),ja=ka().x(Ca).y(La).defined(Da).size(function(t){return t.size||1});function Va(t,e,r,n){return za.context(t)(e,r,n)}var Ba,Ha=function(t,e){return e.stroke&&0!==e.opacity&&0!==e.strokeOpacity&&t.expand(null!=e.strokeWidth?+e.strokeWidth:1),t},Ga=2*Math.PI,Wa=Ga/4,qa=Ga-1e-8;function Ya(t){return Ba=t,Ya}function Xa(){}function $a(t,e){Ba.add(t,e)}Ya.beginPath=Xa,Ya.closePath=Xa,Ya.moveTo=$a,Ya.lineTo=$a,Ya.rect=function(t,e,r,n){$a(t,e),$a(t+r,e+n)},Ya.quadraticCurveTo=function(t,e,r,n){$a(t,e),$a(r,n)},Ya.bezierCurveTo=function(t,e,r,n,i,o){$a(t,e),$a(r,n),$a(i,o)},Ya.arc=function(t,e,r,n,i,o){if(Math.abs(i-n)>qa)return $a(t-r,e-r),void $a(t+r,e+r);var s,a,u,c,l=1/0,h=-1/0,f=1/0,d=-1/0;function p(t){u=r*Math.cos(t),c=r*Math.sin(t),u<l&&(l=u),h<u&&(h=u),c<f&&(f=c),d<c&&(d=c)}if(p(n),p(i),i!==n)if((n%=Ga)<0&&(n+=Ga),(i%=Ga)<0&&(i+=Ga),i<n&&(o=!o,s=n,n=i,i=s),o)for(i-=Ga,s=n-n%Wa,a=0;a<4&&i<s;++a,s-=Wa)p(s);else for(s=n-n%Wa+Wa,a=0;a<4&&s<i;++a,s+=Wa)p(s);$a(t+l,e+f),$a(t+h,e+d)};var Ja=function(t,e,r){return r.id?function(t,e,r){for(var n=r.width(),i=r.height(),o=e.stops,s=0,a=o.length,u=t.createLinearGradient(r.x1+e.x1*n,r.y1+e.y1*i,r.x1+e.x2*n,r.y1+e.y2*i);s<a;++s)u.addColorStop(o[s].offset,o[s].color);return u}(t,r,e.bounds):r},Za=function(t,e,r){return 0<(r*=null==e.fillOpacity?1:e.fillOpacity)&&(t.globalAlpha=r,t.fillStyle=Ja(t,e,e.fill),!0)},Qa=[],Ka=function(t,e,r){var n=null!=(n=e.strokeWidth)?n:1;return!(n<=0)&&0<(r*=null==e.strokeOpacity?1:e.strokeOpacity)&&(t.globalAlpha=r,t.strokeStyle=Ja(t,e,e.stroke),t.lineWidth=n,t.lineCap=e.strokeCap||\"butt\",t.lineJoin=e.strokeJoin||\"miter\",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||Qa),t.lineDashOffset=e.strokeDashOffset||0),!0)};function tu(t,e){return t.zindex-e.zindex||t.index-e.index}function eu(t){if(!t.zdirty)return t.zitems;var e,r,n,i=t.items,o=[];for(r=0,n=i.length;r<n;++r)(e=i[r]).index=r,e.zindex&&o.push(e);return t.zdirty=!1,t.zitems=o.sort(tu)}function ru(t,e){var r,n,i=t.items;if(i&&i.length){var o=eu(t);if(o&&o.length){for(r=0,n=i.length;r<n;++r)i[r].zindex||e(i[r]);i=o}for(r=0,n=i.length;r<n;++r)e(i[r])}}function nu(t,e){var r,n,i=t.items;if(!i||!i.length)return null;var o=eu(t);for(o&&o.length&&(i=o),n=i.length;0<=--n;)if(r=e(i[n]))return r;if(i===o)for(n=(i=t.items).length;0<=--n;)if(!i[n].zindex&&(r=e(i[n])))return r;return null}function iu(t){return function(e,r,n){ru(r,function(r){n&&!n.intersects(r.bounds)||ou(t,e,r,r)})}}function ou(t,e,r,n){var i=null==r.opacity?1:r.opacity;0!==i&&(t(e,n)||(r.fill&&Za(e,r,i)&&e.fill(),r.stroke&&Ka(e,r,i)&&e.stroke()))}var su=function(){return!0};function au(t){return t||(t=su),function(e,r,n,i,o,s){return n*=e.pixelRatio,i*=e.pixelRatio,nu(r,function(r){var a=r.bounds;if((!a||a.contains(o,s))&&a)return t(e,r,n,i,o,s)?r:void 0})}}function uu(t,e){return function(r,n,i,o){var s,a,u=Array.isArray(n)?n[0]:n,c=null==e?u.fill:e,l=u.stroke&&r.isPointInStroke;return l&&(a=u.strokeCap,r.lineWidth=null!=(s=u.strokeWidth)?s:1,r.lineCap=null!=a?a:\"butt\"),!t(r,n)&&(c&&r.isPointInPath(i,o)||l&&r.isPointInStroke(i,o))}}function cu(t){return au(uu(t))}var lu=function(t,e){return\"translate(\"+t+\",\"+e+\")\"},hu=function(t){return lu(t.x||0,t.y||0)},fu=function(t,e){function r(t,r){var n=r.x||0,i=r.y||0;t.translate(n,i),t.beginPath(),e(t,r),t.translate(-n,-i)}return{type:t,tag:\"path\",nested:!1,attr:function(t,r){t(\"transform\",hu(r)),t(\"d\",e(null,r))},bound:function(t,r){return e(Ya(t),r),Ha(t,r).translate(r.x||0,r.y||0)},draw:iu(r),pick:cu(r)}},du=fu(\"arc\",function(t,e){return Oa.context(t)(e)}),pu=function(t,e){function r(t,r){t.beginPath(),e(t,r)}var n,i=uu(r);return{type:t,tag:\"path\",nested:!0,attr:function(t,r){var n=r.mark.items;n.length&&t(\"d\",e(null,n))},bound:function(t,r){var n=r.items;return 0===n.length?t:(e(Ya(t),n),Ha(t,n[0]))},draw:(n=r,function(t,e,r){!e.items.length||r&&!r.intersects(e.bounds)||ou(n,t,e.items[0],e.items)}),pick:function(t,e,r,n,o,s){var a=e.items,u=e.bounds;return!a||!a.length||u&&!u.contains(o,s)?null:i(t,a,r*=t.pixelRatio,n*=t.pixelRatio)?a[0]:null}}},mu=pu(\"area\",function(t,e){var r=e[0];return(\"horizontal\"===r.orient?Ia:Na).curve(oa(r.interpolate||\"linear\",r.orient,r.tension)).context(t)(e)}),gu=1,vu=function(t,e,r){var n=e.clip,i=t._defs,o=e.clip_id||(e.clip_id=\"clip\"+gu++),s=i.clipping[o]||(i.clipping[o]={id:o});return N(n)?s.path=n(null):(s.width=r.width||0,s.height=r.height||0),\"url(#\"+o+\")\"},yu=.5;function wu(t,e){var r=e.stroke?yu:0;t.beginPath(),Va(t,e,r,r)}var xu=uu(wu),bu={type:\"group\",tag:\"g\",nested:!1,attr:function(t,e){t(\"transform\",hu(e))},bound:function(t,e){if(!e.clip&&e.items)for(var r=e.items,n=0,i=r.length;n<i;++n)t.union(r[n].bounds);return(e.clip||e.width||e.height)&&Ha(t.add(0,0).add(e.width||0,e.height||0),e),t.translate(e.x||0,e.y||0)},draw:function(t,e,r){var n=this;ru(e,function(e){var i,o=e.x||0,s=e.y||0,a=e.width||0,u=e.height||0;t.save(),t.translate(o,s),(e.stroke||e.fill)&&0<(i=null==e.opacity?1:e.opacity)&&(wu(t,e),e.fill&&Za(t,e,i)&&t.fill(),e.stroke&&Ka(t,e,i)&&t.stroke()),e.clip&&(t.beginPath(),t.rect(0,0,a,u),t.clip()),r&&r.translate(-o,-s),ru(e,function(e){n.draw(t,e,r)}),r&&r.translate(o,s),t.restore()})},pick:function(t,e,r,n,i,o){if(e.bounds&&!e.bounds.contains(i,o)||!e.items)return null;var s=this,a=r*t.pixelRatio,u=n*t.pixelRatio;return nu(e,function(c){var l,h,f,d;if(!(d=c.bounds)||d.contains(i,o))return h=c.x||0,f=c.y||0,t.save(),t.translate(h,f),h=i-h,f=o-f,!(l=nu(c,function(t){return(!1!==(e=t).interactive||\"group\"===e.marktype)&&e.bounds&&e.bounds.contains(h,f)?s.pick(t,r,n,h,f):null;var e}))&&!1!==e.interactive&&(c.fill||c.stroke)&&xu(t,c,a,u)&&(l=c),t.restore(),l||null})},background:function(t,e){var r=e.stroke?yu:0;t(\"class\",\"background\"),t(\"d\",Va(null,e,r,r))},foreground:function(t,e,r){t(\"clip-path\",e.clip?vu(r,e,e):null)}};function _u(t,e){var r=t.image;return r&&r.url===t.url||(r={loaded:!1,width:0,height:0},e.loadImage(t.url).then(function(e){t.image=e,t.image.url=t.url})),r}function Mu(t,e){return\"center\"===t?e/2:\"right\"===t?e:0}function Su(t,e){return\"middle\"===t?e/2:\"bottom\"===t?e:0}var Eu={type:\"image\",tag:\"image\",nested:!1,attr:function(t,e,r){var n=_u(e,r),i=e.x||0,o=e.y||0,s=(null!=e.width?e.width:n.width)||0,a=(null!=e.height?e.height:n.height)||0,u=!1===e.aspect?\"none\":\"xMidYMid\";i-=Mu(e.align,s),o-=Su(e.baseline,a),t(\"href\",n.src||\"\",\"http://www.w3.org/1999/xlink\",\"xlink:href\"),t(\"transform\",lu(i,o)),t(\"width\",s),t(\"height\",a),t(\"preserveAspectRatio\",u)},bound:function(t,e){var r=e.image,n=e.x||0,i=e.y||0,o=(null!=e.width?e.width:r&&r.width)||0,s=(null!=e.height?e.height:r&&r.height)||0;return n-=Mu(e.align,o),i-=Su(e.baseline,s),t.set(n,i,n+o,i+s)},draw:function(t,e,r){var n=this;ru(e,function(e){if(!r||r.intersects(e.bounds)){var i,o,s,a,u=_u(e,n),c=e.x||0,l=e.y||0,h=(null!=e.width?e.width:u.width)||0,f=(null!=e.height?e.height:u.height)||0;c-=Mu(e.align,h),l-=Su(e.baseline,f),!1!==e.aspect&&(s=e.width/e.height,(o=u.width/u.height)==o&&s==s&&o!==s&&(s<o?(l+=(f-(a=h/o))/2,f=a):(c+=(h-(a=f*o))/2,h=a))),u.loaded&&(t.globalAlpha=null!=(i=e.opacity)?i:1,t.drawImage(u,c,l,h,f))}})},pick:au(),get:_u,xOffset:Mu,yOffset:Su},Tu=pu(\"line\",function(t,e){var r=e[0];return Fa.curve(oa(r.interpolate||\"linear\",r.orient,r.tension)).context(t)(e)});function Au(t,e){var r=e.path;if(null==r)return!0;var n=e.pathCache;n&&n.path===r||((e.pathCache=n=ua(r)).path=r),ma(t,n,e.x,e.y)}var Ru={type:\"path\",tag:\"path\",nested:!1,attr:function(t,e){t(\"transform\",hu(e)),t(\"d\",e.path)},bound:function(t,e){return Au(Ya(t),e)?t.set(0,0,0,0):Ha(t,e)},draw:iu(Au),pick:cu(Au)};function ku(t,e){t.beginPath(),Va(t,e)}var Cu={type:\"rect\",tag:\"path\",nested:!1,attr:function(t,e){t(\"d\",Va(null,e))},bound:function(t,e){var r,n;return Ha(t.set(r=e.x||0,n=e.y||0,r+e.width||0,n+e.height||0),e)},draw:iu(ku),pick:cu(ku)};function Lu(t,e,r){var n,i,o,s;return!(!e.stroke||!Ka(t,e,r)||(n=e.x||0,i=e.y||0,o=null!=e.x2?e.x2:n,s=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(n,i),t.lineTo(o,s),0))}var Pu,Du,Ou={type:\"rule\",tag:\"line\",nested:!1,attr:function(t,e){t(\"transform\",hu(e)),t(\"x2\",null!=e.x2?e.x2-(e.x||0):0),t(\"y2\",null!=e.y2?e.y2-(e.y||0):0)},bound:function(t,e){var r,n;return Ha(t.set(r=e.x||0,n=e.y||0,null!=e.x2?e.x2:r,null!=e.y2?e.y2:n),e)},draw:function(t,e,r){ru(e,function(e){if(!r||r.intersects(e.bounds)){var n=null==e.opacity?1:e.opacity;n&&Lu(t,e,n)&&t.stroke()}})},pick:au(function(t,e,r,n){return!!t.isPointInStroke&&Lu(t,e,1)&&t.isPointInStroke(r,n)})},Nu=fu(\"shape\",function(t,e){return(e.mark.shape||e.shape).context(t)(e)}),Iu=fu(\"symbol\",function(t,e){return Ua.context(t)(e)}),Fu={height:Bu,measureWidth:ju,estimateWidth:zu,width:zu,canvas:Hu};function zu(t){return Du=Bu(t),Uu(Gu(t))}function Uu(t){return~~(.8*t.length*Du)}function ju(t){return Pu.font=Wu(t),Vu(Gu(t))}function Vu(t){return Pu.measureText(t).width}function Bu(t){return null!=t.fontSize?t.fontSize:11}function Hu(t){Pu=t&&(Pu=Ho(1,1))?Pu.getContext(\"2d\"):null,Fu.width=Pu?ju:zu}function Gu(t){var e=t.text;return null==e?\"\":0<t.limit?function(t){var e,r=+t.limit,n=t.text+\"\";if(Pu?(Pu.font=Wu(t),e=Vu):(Du=Bu(t),e=Uu),e(n)<r)return n;var i,o=t.ellipsis||\"\\u2026\",s=\"rtl\"===t.dir,a=0,u=n.length;if(r-=e(o),s){for(;a<u;)e(n.slice(i=a+u>>>1))>r?a=i+1:u=i;return o+n.slice(a)}for(;a<u;)e(n.slice(0,i=1+(a+u>>>1)))<r?a=i:u=i-1;return n.slice(0,a)+o}(t):e+\"\"}function Wu(t,e){var r=t.font;return e&&r&&(r=String(r).replace(/\"/g,\"'\")),(t.fontStyle?t.fontStyle+\" \":\"\")+(t.fontVariant?t.fontVariant+\" \":\"\")+(t.fontWeight?t.fontWeight+\" \":\"\")+Bu(t)+\"px \"+(r||\"sans-serif\")}function qu(t){var e=t.baseline,r=Bu(t);return Math.round(\"top\"===e?.79*r:\"middle\"===e?.3*r:\"bottom\"===e?-.21*r:0)}Hu(!0);var Yu={left:\"start\",center:\"middle\",right:\"end\"},Xu=new Io;function $u(t,e,r){var n,i,o=Fu.height(e),s=e.align,a=e.radius||0,u=e.x||0,c=e.y||0,l=e.dx||0,h=(e.dy||0)+qu(e)-Math.round(.8*o);return a&&(i=(e.theta||0)-Math.PI/2,u+=a*Math.cos(i),c+=a*Math.sin(i)),n=Fu.width(e),\"center\"===s?l-=n/2:\"right\"===s&&(l-=n),t.set(l+=u,h+=c,l+n,h+o),e.angle&&!r&&t.rotate(e.angle*Math.PI/180,u,c),t.expand(r||!n?0:1)}var Ju={arc:du,area:mu,group:bu,image:Eu,line:Tu,path:Ru,rect:Cu,rule:Ou,shape:Nu,symbol:Iu,text:{type:\"text\",tag:\"text\",nested:!1,attr:function(t,e){var r,n=e.dx||0,i=(e.dy||0)+qu(e),o=e.x||0,s=e.y||0,a=e.angle||0,u=e.radius||0;u&&(r=(e.theta||0)-Math.PI/2,o+=u*Math.cos(r),s+=u*Math.sin(r)),t(\"text-anchor\",Yu[e.align]||\"start\"),a?(r=lu(o,s)+\" rotate(\"+a+\")\",(n||i)&&(r+=\" \"+lu(n,i))):r=lu(o+n,s+i),t(\"transform\",r)},bound:$u,draw:function(t,e,r){ru(e,function(e){var n,i,o,s,a,u;r&&!r.intersects(e.bounds)||(u=Gu(e))&&0!==(n=null==e.opacity?1:e.opacity)&&(t.font=Wu(e),t.textAlign=e.align||\"left\",i=e.x||0,o=e.y||0,(s=e.radius)&&(a=(e.theta||0)-Math.PI/2,i+=s*Math.cos(a),o+=s*Math.sin(a)),e.angle&&(t.save(),t.translate(i,o),t.rotate(e.angle*Math.PI/180),i=o=0),i+=e.dx||0,o+=(e.dy||0)+qu(e),e.fill&&Za(t,e,n)&&t.fillText(u,i,o),e.stroke&&Ka(t,e,n)&&t.strokeText(u,i,o),e.angle&&t.restore())})},pick:au(function(t,e,r,n,i,o){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var s=$u(Xu,e,!0),a=-e.angle*Math.PI/180,u=Math.cos(a),c=Math.sin(a),l=e.x,h=e.y;return s.contains(u*i-c*o+(l-l*u+h*c),c*i+u*o+(h-l*c-h*u))})},trail:pu(\"trail\",function(t,e){return ja.context(t)(e)})},Zu=function(t,e,r){var n=Ju[t.mark.marktype];return n.nested&&(t=t.mark),(e||n.bound)(t.bounds||(t.bounds=new Io),t,r)},Qu={mark:null},Ku=function(t,e,r){var n,i,o,s,a=Ju[t.marktype],u=a.bound,c=t.items,l=c&&c.length;if(a.nested)return l?o=c[0]:(Qu.mark=t,o=Qu),s=Zu(o,u,r),e&&e.union(s)||s;if(e=e||t.bounds&&t.bounds.clear()||new Io,l)for(n=0,i=c.length;n<i;++n)e.union(Zu(c[n],u,r));return t.bounds=e},tc=[\"marktype\",\"name\",\"role\",\"interactive\",\"clip\",\"items\",\"zindex\",\"x\",\"y\",\"width\",\"height\",\"align\",\"baseline\",\"fill\",\"fillOpacity\",\"opacity\",\"stroke\",\"strokeOpacity\",\"strokeWidth\",\"strokeCap\",\"strokeDash\",\"strokeDashOffset\",\"startAngle\",\"endAngle\",\"innerRadius\",\"outerRadius\",\"cornerRadius\",\"padAngle\",\"interpolate\",\"tension\",\"orient\",\"defined\",\"url\",\"path\",\"x2\",\"y2\",\"size\",\"shape\",\"text\",\"angle\",\"theta\",\"radius\",\"dx\",\"dy\",\"font\",\"fontSize\",\"fontWeight\",\"fontStyle\",\"fontVariant\"];function ec(t,e){return JSON.stringify(t,tc,e)}function rc(t){return function t(e){var r,n,i,o=e.marktype,s=e.items;if(s)for(n=0,i=s.length;n<i;++n)s[n][r=o?\"mark\":\"group\"]=e,s[n].zindex&&(s[n][r].zdirty=!0),\"group\"===(o||r)&&t(s[n]);return o&&Ku(e),e}(\"string\"==typeof t?JSON.parse(t):t)}function nc(t){arguments.length?this.root=rc(t):(this.root=oc({marktype:\"group\",name:\"root\",role:\"frame\"}),this.root.items=[new Bo(this.root)])}var ic=nc.prototype;function oc(t,e){return{bounds:new Io,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0}}function sc(t,e,r){return!t&&\"undefined\"!=typeof document&&document.createElement&&(t=document),t?r?t.createElementNS(r,e):t.createElement(e):null}function ac(t,e){e=e.toLowerCase();for(var r=t.childNodes,n=0,i=r.length;n<i;++n)if(r[n].tagName.toLowerCase()===e)return r[n]}function uc(t,e,r,n){var i,o=t.childNodes[e];return o&&o.tagName.toLowerCase()===r.toLowerCase()||(i=o||null,o=sc(t.ownerDocument,r,n),t.insertBefore(o,i)),o}function cc(t,e){for(var r=t.childNodes,n=r.length;e<n;)t.removeChild(r[--n]);return t}function lc(t){return\"mark-\"+t.marktype+(t.role?\" role-\"+t.role:\"\")+(t.name?\" \"+t.name:\"\")}function hc(t,e){this._active=null,this._handlers={},this._loader=t||te(),this._tooltip=e||fc}function fc(t,e,r,n){t.element().setAttribute(\"title\",n||\"\")}ic.toJSON=function(t){return ec(this.root,t||0)},ic.mark=function(t,e,r){var n=oc(t,e=e||this.root.items[0]);return(e.items[r]=n).zindex&&(n.group.zdirty=!0),n};var dc=hc.prototype;function pc(t){this._el=null,this._bgcolor=null,this._loader=new Go(t)}dc.initialize=function(t,e,r){return this._el=t,this._obj=r||null,this.origin(e)},dc.element=function(){return this._el},dc.origin=function(t){return this._origin=t||[0,0],this},dc.scene=function(t){return arguments.length?(this._scene=t,this):this._scene},dc.on=function(){},dc.off=function(){},dc._handlerIndex=function(t,e,r){for(var n=t?t.length:0;0<=--n;)if(t[n].type===e&&!r||t[n].handler===r)return n;return-1},dc.handlers=function(){var t,e=this._handlers,r=[];for(t in e)r.push.apply(r,e[t]);return r},dc.eventName=function(t){var e=t.indexOf(\".\");return e<0?t:t.slice(0,e)},dc.handleHref=function(t,e,r){this._loader.sanitize(r,{context:\"href\"}).then(function(e){var r=new MouseEvent(t.type,t),n=sc(null,\"a\");for(var i in e)n.setAttribute(i,e[i]);n.dispatchEvent(r)}).catch(function(){})},dc.handleTooltip=function(t,e,r){e&&null!=e.tooltip&&this._tooltip.call(this._obj,this,t,e,r?e.tooltip:null)};var mc=pc.prototype;mc.initialize=function(t,e,r,n,i){return this._el=t,this.resize(e,r,n,i)},mc.element=function(){return this._el},mc.scene=function(){return this._el&&this._el.firstChild},mc.background=function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},mc.resize=function(t,e,r,n){return this._width=t,this._height=e,this._origin=r||[0,0],this._scale=n||1,this},mc.dirty=function(){},mc.render=function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},mc._render=function(){},mc.renderAsync=function(t){var e=this.render(t);return this._ready?this._ready.then(function(){return e}):Promise.resolve(e)},mc._load=function(t,e){var r=this,n=r._loader[t](e);if(!r._ready){var i=r._call;r._ready=r._loader.ready().then(function(t){t&&i(),r._ready=null})}return n},mc.sanitizeURL=function(t){return this._load(\"sanitizeURL\",t)},mc.loadImage=function(t){return this._load(\"loadImage\",t)};var gc=function(t,e){var r=e.getBoundingClientRect();return[t.clientX-r.left-(e.clientLeft||0),t.clientY-r.top-(e.clientTop||0)]};function vc(t,e){hc.call(this,t,e),this._down=null,this._touch=null,this._first=!0}var yc=H(vc,hc);function wc(t,e,r){return function(n){var i=this._active,o=this.pickEvent(n);o===i||(i&&i.exit||this.fire(r,n),this._active=o,this.fire(e,n)),this.fire(t,n)}}function xc(t){return function(e){this.fire(t,e),this._active=null}}yc.initialize=function(t,e,r){var n=this._canvas=t&&ac(t,\"canvas\");if(n){var i=this;this.events.forEach(function(t){n.addEventListener(t,function(e){yc[t]?yc[t].call(i,e):i.fire(t,e)})})}return hc.prototype.initialize.call(this,t,e,r)},yc.canvas=function(){return this._canvas},yc.context=function(){return this._canvas.getContext(\"2d\")},yc.events=[\"keydown\",\"keypress\",\"keyup\",\"dragenter\",\"dragleave\",\"dragover\",\"mousedown\",\"mouseup\",\"mousemove\",\"mouseout\",\"mouseover\",\"click\",\"dblclick\",\"wheel\",\"mousewheel\",\"touchstart\",\"touchmove\",\"touchend\"],yc.DOMMouseScroll=function(t){this.fire(\"mousewheel\",t)},yc.mousemove=wc(\"mousemove\",\"mouseover\",\"mouseout\"),yc.dragover=wc(\"dragover\",\"dragenter\",\"dragleave\"),yc.mouseout=xc(\"mouseout\"),yc.dragleave=xc(\"dragleave\"),yc.mousedown=function(t){this._down=this._active,this.fire(\"mousedown\",t)},yc.click=function(t){this._down===this._active&&(this.fire(\"click\",t),this._down=null)},yc.touchstart=function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(\"touchstart\",t,!0)},yc.touchmove=function(t){this.fire(\"touchmove\",t,!0)},yc.touchend=function(t){this.fire(\"touchend\",t,!0),this._touch=null},yc.fire=function(t,e,r){var n,i,o=r?this._touch:this._active,s=this._handlers[t];if(\"click\"===(e.vegaType=t)&&o&&o.href?this.handleHref(e,o,o.href):\"mouseover\"!==t&&\"mouseout\"!==t||this.handleTooltip(e,o,\"mouseover\"===t),s)for(n=0,i=s.length;n<i;++n)s[n].handler.call(this._obj,e,o)},yc.on=function(t,e){var r=this.eventName(t),n=this._handlers;return this._handlerIndex(n[r],t,e)<0&&(n[r]||(n[r]=[])).push({type:t,handler:e}),this},yc.off=function(t,e){var r=this.eventName(t),n=this._handlers[r],i=this._handlerIndex(n,t,e);return 0<=i&&n.splice(i,1),this},yc.pickEvent=function(t){var e=gc(t,this._canvas),r=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-r[0],e[1]-r[1])},yc.pick=function(t,e,r,n,i){var o=this.context();return Ju[t.marktype].pick.call(this,o,t,e,r,n,i)};var bc=\"undefined\"!=typeof window&&window.devicePixelRatio||1;function _c(t){pc.call(this,t),this._redraw=!1,this._dirty=new Io}var Mc=H(_c,pc),Sc=pc.prototype,Ec=new Io;function Tc(t,e){hc.call(this,t,e);var r=this;r._hrefHandler=Rc(r,function(t,e){e&&e.href&&r.handleHref(t,e,e.href)}),r._tooltipHandler=Rc(r,function(t,e){r.handleTooltip(t,e,\"mouseover\"===t.type)})}Mc.initialize=function(t,e,r,n,i){return this._canvas=Ho(1,1),t&&(cc(t,0).appendChild(this._canvas),this._canvas.setAttribute(\"class\",\"marks\")),Sc.initialize.call(this,t,e,r,n,i)},Mc.resize=function(t,e,r,n){var i,o,s,a,u,c,l,h;return Sc.resize.call(this,t,e,r,n),i=this._canvas,o=this._width,s=this._height,a=this._origin,u=this._scale,c=\"undefined\"!=typeof HTMLElement&&i instanceof HTMLElement&&null!=i.parentNode,l=i.getContext(\"2d\"),i.width=o*(h=c?bc:u),i.height=s*h,c&&1!==h&&(i.style.width=o+\"px\",i.style.height=s+\"px\"),l.pixelRatio=h,l.setTransform(h,0,0,h,h*a[0],h*a[1]),this._redraw=!0,this},Mc.canvas=function(){return this._canvas},Mc.context=function(){return this._canvas?this._canvas.getContext(\"2d\"):null},Mc.dirty=function(t){var e=function(t,e){if(null==e)return t;for(var r=Ec.clear().union(t);null!=e;e=e.mark.group)r.translate(e.x||0,e.y||0);return r}(t.bounds,t.mark.group);this._dirty.union(e)},Mc._render=function(t){var e,r,n,i=this.context(),o=this._origin,s=this._width,a=this._height,u=this._dirty;return i.save(),this._redraw||u.empty()?(this._redraw=!1,u=null):(e=i,n=o,(r=u).expand(1).round(),r.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(r.x1,r.y1,r.width(),r.height()),e.clip(),u=r),this.clear(-o[0],-o[1],s,a),this.draw(i,t,u),i.restore(),this._dirty.clear(),this},Mc.draw=function(t,e,r){var n=Ju[e.marktype];e.clip&&function(t,e){var r=e.clip;if(t.save(),t.beginPath(),N(r))r(t);else{var n=e.group;t.rect(0,0,n.width||0,n.height||0)}t.clip()}(t,e),n.draw.call(this,t,e,r),e.clip&&t.restore()},Mc.clear=function(t,e,r,n){var i=this.context();i.clearRect(t,e,r,n),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(t,e,r,n))};var Ac=H(Tc,hc);function Rc(t,e){return function(r){var n=r.target.__data__;r.vegaType=r.type,n=Array.isArray(n)?n[0]:n,e.call(t._obj,r,n)}}function kc(t,e,r){var n,i,o=\"<\"+t;if(e)for(n in e)null!=(i=e[n])&&(o+=\" \"+n+'=\"'+i+'\"');return r&&(o+=\" \"+r),o+\">\"}function Cc(t){return\"</\"+t+\">\"}Ac.initialize=function(t,e,r){var n=this._svg;return n&&(n.removeEventListener(\"click\",this._hrefHandler),n.removeEventListener(\"mouseover\",this._tooltipHandler),n.removeEventListener(\"mouseout\",this._tooltipHandler)),this._svg=n=t&&ac(t,\"svg\"),n&&(n.addEventListener(\"click\",this._hrefHandler),n.addEventListener(\"mouseover\",this._tooltipHandler),n.addEventListener(\"mouseout\",this._tooltipHandler)),hc.prototype.initialize.call(this,t,e,r)},Ac.svg=function(){return this._svg},Ac.on=function(t,e){var r=this.eventName(t),n=this._handlers;if(this._handlerIndex(n[r],t,e)<0){var i={type:t,handler:e,listener:Rc(this,e)};(n[r]||(n[r]=[])).push(i),this._svg&&this._svg.addEventListener(r,i.listener)}return this},Ac.off=function(t,e){var r=this.eventName(t),n=this._handlers[r],i=this._handlerIndex(n,t,e);return 0<=i&&(this._svg&&this._svg.removeEventListener(r,n[i].listener),n.splice(i,1)),this};var Lc={version:\"1.1\",xmlns:\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\"},Pc={fill:\"fill\",fillOpacity:\"fill-opacity\",stroke:\"stroke\",strokeOpacity:\"stroke-opacity\",strokeWidth:\"stroke-width\",strokeCap:\"stroke-linecap\",strokeJoin:\"stroke-linejoin\",strokeDash:\"stroke-dasharray\",strokeDashOffset:\"stroke-dashoffset\",strokeMiterLimit:\"stroke-miterlimit\",opacity:\"opacity\"},Dc=Object.keys(Pc),Oc=Lc.xmlns;function Nc(t){pc.call(this,t),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var Ic=H(Nc,pc),Fc=pc.prototype;function zc(t,e,r){var n,i,o;for((t=uc(t,r,\"linearGradient\",Oc)).setAttribute(\"id\",e.id),t.setAttribute(\"x1\",e.x1),t.setAttribute(\"x2\",e.x2),t.setAttribute(\"y1\",e.y1),t.setAttribute(\"y2\",e.y2),n=0,i=e.stops.length;n<i;++n)(o=uc(t,n,\"stop\",Oc)).setAttribute(\"offset\",e.stops[n].offset),o.setAttribute(\"stop-color\",e.stops[n].color);cc(t,n)}function Uc(t,e,r){var n;(t=uc(t,r,\"clipPath\",Oc)).setAttribute(\"id\",e.id),e.path?(n=uc(t,0,\"path\",Oc)).setAttribute(\"d\",e.path):((n=uc(t,0,\"rect\",Oc)).setAttribute(\"x\",0),n.setAttribute(\"y\",0),n.setAttribute(\"width\",e.width),n.setAttribute(\"height\",e.height))}function jc(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function Vc(t,e,r,n,i){var o,s,a,u=t._svg;if(!u&&(u=sc(o=e.ownerDocument,n,Oc),t._svg=u,t.mark&&(u.__data__=t,u.__values__={fill:\"default\"},\"g\"===n))){var c=sc(o,\"path\",Oc);c.setAttribute(\"class\",\"background\"),u.appendChild(c),c.__data__=t;var l=sc(o,\"g\",Oc);u.appendChild(l),l.__data__=t}return(u.ownerSVGElement!==i||(a=(s=t).mark||s.group)&&1<a.items.length&&u.previousSibling!==r)&&e.insertBefore(u,r?r.nextSibling:e.firstChild),u}Ic.initialize=function(t,e,r,n){return t&&(this._svg=uc(t,0,\"svg\",Oc),this._svg.setAttribute(\"class\",\"marks\"),cc(t,1),this._root=uc(this._svg,0,\"g\",Oc),cc(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),Fc.initialize.call(this,t,e,r,n)},Ic.background=function(t){return arguments.length&&this._svg&&this._svg.style.setProperty(\"background-color\",t),Fc.background.apply(this,arguments)},Ic.resize=function(t,e,r,n){return Fc.resize.call(this,t,e,r,n),this._svg&&(this._svg.setAttribute(\"width\",this._width*this._scale),this._svg.setAttribute(\"height\",this._height*this._scale),this._svg.setAttribute(\"viewBox\",\"0 0 \"+this._width+\" \"+this._height),this._root.setAttribute(\"transform\",\"translate(\"+this._origin+\")\")),this._dirty=[],this},Ic.svg=function(){if(!this._svg)return null;var t={class:\"marks\",width:this._width*this._scale,height:this._height*this._scale,viewBox:\"0 0 \"+this._width+\" \"+this._height};for(var e in Lc)t[e]=Lc[e];var r=this._bgcolor?kc(\"rect\",{width:this._width,height:this._height,style:\"fill: \"+this._bgcolor+\";\"})+Cc(\"rect\"):\"\";return kc(\"svg\",t)+r+this._svg.innerHTML+Cc(\"svg\")},Ic._render=function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,t),cc(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},Ic.updateDefs=function(){var t,e=this._svg,r=this._defs,n=r.el,i=0;for(t in r.gradient)n||(r.el=n=uc(e,0,\"defs\",Oc)),zc(n,r.gradient[t],i++);for(t in r.clipping)n||(r.el=n=uc(e,0,\"defs\",Oc)),Uc(n,r.clipping[t],i++);n&&(0===i?(e.removeChild(n),r.el=null):cc(n,i))},Ic._resetDefs=function(){var t=this._defs;t.gradient={},t.clipping={}},Ic.dirty=function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},Ic.isDirty=function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},Ic._dirtyCheck=function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length)return!0;var e,r,n,i,o,s,a,u=++this._dirtyID;for(o=0,s=t.length;o<s;++o)(r=(e=t[o]).mark).marktype!==n&&(i=Ju[n=r.marktype]),r.zdirty&&r.dirty!==u&&(this._dirtyAll=!1,jc(e,u),r.items.forEach(function(t){t.dirty=u})),r.zdirty||(e.exit?(i.nested&&r.items.length?(a=r.items[0])._svg&&this._update(i,a._svg,a):e._svg&&(a=e._svg.parentNode)&&a.removeChild(e._svg),e._svg=null):(e=i.nested?r.items[0]:e)._update!==u&&(e._svg&&e._svg.ownerSVGElement?this._update(i,e._svg,e):(this._dirtyAll=!1,jc(e,u)),e._update=u));return!this._dirtyAll},Ic.draw=function(t,e,r){if(!this.isDirty(e))return e._svg;var n,i=this,o=this._svg,s=Ju[e.marktype],a=!1===e.interactive?\"none\":null,u=\"g\"===s.tag,c=null,l=0;function h(t){var e=i.isDirty(t),r=Vc(t,n,c,s.tag,o);e&&(i._update(s,r,t),u&&function(t,e,r){e=e.lastChild;var n,i=0;ru(r,function(r){n=t.draw(e,r,n),++i}),cc(e,1+i)}(i,r,t)),c=r,++l}return(n=Vc(e,t,r,\"g\",o)).setAttribute(\"class\",lc(e)),u||n.style.setProperty(\"pointer-events\",a),e.clip?n.setAttribute(\"clip-path\",vu(i,e,e.group)):n.removeAttribute(\"clip-path\"),s.nested?e.items.length&&h(e.items[0]):ru(e,h),cc(n,l),n};var Bc=null,Hc=null,Gc={group:function(t,e,r){Hc=e.__values__,Bc=e.childNodes[1],t.foreground(Wc,r,this),Bc=e.childNodes[0],t.background(Wc,r,this);var n=!1===r.mark.interactive?\"none\":null;n!==Hc.events&&(Bc.style.setProperty(\"pointer-events\",n),Hc.events=n)},text:function(t,e,r){var n=Gu(r);n!==Hc.text&&(e.textContent=n,Hc.text=n),(n=Wu(r))!==Hc.font&&(e.style.setProperty(\"font\",n),Hc.font=n)}};function Wc(t,e,r){e!==Hc[t]&&(null!=e?r?Bc.setAttributeNS(r,t,e):Bc.setAttribute(t,e):r?Bc.removeAttributeNS(r,t):Bc.removeAttribute(t),Hc[t]=e)}function qc(t){pc.call(this,t),this._text={head:\"\",bg:\"\",root:\"\",foot:\"\",defs:\"\",body:\"\"},this._defs={gradient:{},clipping:{}}}Ic._update=function(t,e,r){Hc=(Bc=e).__values__,t.attr(Wc,r,this);var n=Gc[t.type];n&&n.call(this,t,e,r),this.style(Bc,r)},Ic.style=function(t,e){var r,n,i,o,s,a;if(null!=e)for(r=0,n=Dc.length;r<n;++r)(s=e[i=Dc[r]])!==Hc[i]&&(o=Pc[i],null==s?\"fill\"===o?t.style.setProperty(o,\"none\"):t.style.removeProperty(o):(s.id&&(this._defs.gradient[s.id]=s,s=\"url(\"+(a=void 0,\"undefined\"==typeof window?\"\":(a=window.location).hash?a.href.slice(0,-a.hash.length):a.href)+\"#\"+s.id+\")\"),t.style.setProperty(o,s+\"\")),Hc[i]=s)};var Yc,Xc=H(qc,pc),$c=pc.prototype;function Jc(t,e,r,n){Yc[n||t]=e}function Zc(t,e,r,n){if(null==t)return\"\";var i,o,s,a,u,c=\"\";for(\"bgrect\"===r&&!1===e.interactive&&(c+=\"pointer-events: none; \"),\"text\"===r&&(c+=\"font: \"+Wu(t)+\"; \"),i=0,o=Dc.length;i<o;++i)a=Pc[s=Dc[i]],null==(u=t[s])?\"fill\"===a&&(c+=\"fill: none; \"):\"transparent\"!==u||\"fill\"!==a&&\"stroke\"!==a?(u.id&&(u=\"url(#\"+(n.gradient[u.id]=u).id+\")\"),c+=a+\": \"+u+\"; \"):c+=a+\": none; \";return c?'style=\"'+c.trim()+'\"':null}Xc.resize=function(t,e,r,n){$c.resize.call(this,t,e,r,n);var i=this._origin,o=this._text,s={class:\"marks\",width:this._width*this._scale,height:this._height*this._scale,viewBox:\"0 0 \"+this._width+\" \"+this._height};for(var a in Lc)s[a]=Lc[a];o.head=kc(\"svg\",s);var u=this._bgcolor;return\"transparent\"!==u&&\"none\"!==u||(u=null),o.bg=u?kc(\"rect\",{width:this._width,height:this._height,style:\"fill: \"+u+\";\"})+Cc(\"rect\"):\"\",o.root=kc(\"g\",{transform:\"translate(\"+i+\")\"}),o.foot=Cc(\"g\")+Cc(\"svg\"),this},Xc.background=function(){var t=$c.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),t},Xc.svg=function(){var t=this._text;return t.head+t.bg+t.defs+t.root+t.body+t.foot},Xc._render=function(t){return this._text.body=this.mark(t),this._text.defs=this.buildDefs(),this},Xc.buildDefs=function(){var t,e,r,n,i=this._defs,o=\"\";for(e in i.gradient){for(n=(r=i.gradient[e]).stops,o+=kc(\"linearGradient\",{id:e,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2}),t=0;t<n.length;++t)o+=kc(\"stop\",{offset:n[t].offset,\"stop-color\":n[t].color})+Cc(\"stop\");o+=Cc(\"linearGradient\")}for(e in i.clipping)r=i.clipping[e],o+=kc(\"clipPath\",{id:e}),o+=r.path?kc(\"path\",{d:r.path})+Cc(\"path\"):kc(\"rect\",{x:0,y:0,width:r.width,height:r.height})+Cc(\"rect\"),o+=Cc(\"clipPath\");return 0<o.length?kc(\"defs\")+o+Cc(\"defs\"):\"\"},Xc.attributes=function(t,e){return Yc={},t(Jc,e,this),Yc},Xc.href=function(t){var e,r=this,n=t.href;if(n){if(e=r._hrefs&&r._hrefs[n])return e;r.sanitizeURL(n).then(function(t){t[\"xlink:href\"]=t.href,t.href=null,(r._hrefs||(r._hrefs={}))[n]=t})}return null},Xc.mark=function(t){var e,r=this,n=Ju[t.marktype],i=n.tag,o=this._defs,s=\"\";function a(a){var u=r.href(a);u&&(s+=kc(\"a\",u)),e=\"g\"!==i?Zc(a,t,i,o):null,s+=kc(i,r.attributes(n.attr,a),e),\"text\"===i?s+=Gu(a).replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\"):\"g\"===i&&(s+=kc(\"path\",r.attributes(n.background,a),Zc(a,t,\"bgrect\",o))+Cc(\"path\"),s+=kc(\"g\",r.attributes(n.foreground,a))+r.markGroup(a)+Cc(\"g\")),s+=Cc(i),u&&(s+=Cc(\"a\"))}return\"g\"!==i&&!1===t.interactive&&(e='style=\"pointer-events: none;\"'),s+=kc(\"g\",{class:lc(t),\"clip-path\":t.clip?vu(r,t,t.group):null},e),n.nested?t.items&&t.items.length&&a(t.items[0]):ru(t,a),s+Cc(\"g\")},Xc.markGroup=function(t){var e=this,r=\"\";return ru(t,function(t){r+=e.mark(t)}),r};var Qc={Canvas:\"canvas\",PNG:\"png\",SVG:\"svg\",None:\"none\"},Kc={};function tl(t,e){return t=String(t||\"\").toLowerCase(),1<arguments.length?(Kc[t]=e,this):Kc[t]}Kc.canvas=Kc.png={renderer:_c,headless:_c,handler:vc},Kc.svg={renderer:Nc,headless:qc,handler:Tc},Kc.none={};var el=new Io,rl=function(t){var e=t.clip;if(N(e))e(Ya(el.clear()));else{if(!e)return;el.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(el)},nl=1e-9;function il(t,e,r){return t===e||(\"path\"===r?ol(t,e):t instanceof Date&&e instanceof Date?+t==+e:q(t)&&q(e)?Math.abs(t-e)<=nl:t&&e&&(a(t)||a(e))?null!=t&&null!=e&&function(t,e){var r,n,i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(i.sort(),o.sort(),n=i.length-1;0<=n;n--)if(i[n]!=o[n])return!1;for(n=i.length-1;0<=n;n--)if(!il(t[r=i[n]],e[r],r))return!1;return typeof t==typeof e}(t,e):t==e)}function ol(t,e){return il(ua(t),ua(e))}function sl(t){zn.call(this,null,t)}function al(t,e,r){return e(t.bounds.clear(),t,r)}H(sl,zn).transform=function(t,e){var r,n=e.dataflow,i=t.mark,o=i.marktype,s=Ju[o],a=s.bound,u=i.bounds;return s.nested?(i.items.length&&n.dirty(i.items[0]),u=al(i,a),i.items.forEach(function(t){t.bounds.clear().union(u)})):\"group\"===o||t.modified()?(e.visit(e.MOD,function(t){n.dirty(t)}),u.clear(),i.items.forEach(function(t){u.union(al(t,a))})):(r=e.changed(e.REM),e.visit(e.ADD,function(t){u.union(al(t,a))}),e.visit(e.MOD,function(t){r=r||u.alignsWith(t.bounds),n.dirty(t),u.union(al(t,a))}),r&&(u.clear(),i.items.forEach(function(t){u.union(t.bounds)}))),rl(i),e.modifies(\"bounds\")};var ul=\":vega_identifier:\";function cl(t){zn.call(this,0,t)}function ll(t){zn.call(this,null,t)}cl.Definition={type:\"Identifier\",metadata:{modifies:!0},params:[{name:\"as\",type:\"string\",required:!0}]},H(cl,zn).transform=function(t,e){var r=function(t){var e=t._signals[ul];return e||(t._signals[ul]=e=t.add(0)),e}(e.dataflow),n=r.value,i=t.as;return e.visit(e.ADD,function(t){t[i]||(t[i]=++n)}),r.set(this.value=n),e},H(ll,zn).transform=function(t,e){var r,n,i,o=this.value;o||((o=e.dataflow.scenegraph().mark(t.markdef,(n=(r=t).groups,i=r.parent,n&&1===n.size?n.get(Object.keys(n.object)[0]):n&&i?n.lookup(i):null),t.index)).group.context=t.context,t.context.group||(t.context.group=o.group),o.source=this,o.clip=t.clip,o.interactive=t.interactive,this.value=o);var s=\"group\"===o.marktype?Bo:Vo;return e.visit(e.ADD,function(t){s.call(t,o)}),(t.modified(\"clip\")||t.modified(\"interactive\"))&&(o.clip=t.clip,o.interactive=!!t.interactive,o.zdirty=!0,e.reflow()),o.items=e.source,e};var hl=\"top\",fl=\"left\",dl=\"right\",pl=\"bottom\";function ml(t){zn.call(this,null,t)}var gl={parity:function(t){return t.filter(function(t,e){return e%2?t.opacity=0:1})},greedy:function(t){var e;return t.filter(function(t,r){return r&&vl(e.bounds,t.bounds)?t.opacity=0:(e=t,1)})}};function vl(t,e){return!(t.x2-1<e.x1||t.x1+1>e.x2||t.y2-1<e.y1||t.y1+1>e.y2)}function yl(t){for(var e,r=1,n=t.length,i=t[0].bounds;r<n;i=e,++r)if(vl(i,e=t[r].bounds))return!0}function wl(t){var e=t.bounds;return 1<e.width()&&1<e.height()}function xl(t){zn.call(this,null,t)}function bl(t,e){for(var r=0,n=t.length;r<n;++r)e.push(t[r])}function _l(t){return{x1:0,y1:0,x2:t.width||0,y2:t.height||0}}function Ml(t){var e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function Sl(t,e){return\"x1\"===e?t.x||0:\"y1\"===e?t.y||0:\"x2\"===e?(t.x||0)+(t.width||0):\"y2\"===e?(t.y||0)+(t.height||0):void 0}function El(t,e){return t.bounds[e]}function Tl(t,e,r){var n=a(t)?t[e]:t;return null!=n?n:void 0!==r?r:0}function Al(t){return t<0?Math.ceil(-t):0}function Rl(t,e,r,n,i,o,s,a,u,c,l,h,f,d){var p,m,g,v,y,w,x,b,_,M=r.length,S=0,E=0;if(!M)return S;for(p=l;p<M;p+=h)r[p]&&(S=s(S,u(r[p],c)));if(!e.length)return S;for(e.length>i&&(t.warn(\"Grid headers exceed limit: \"+i),e=e.slice(0,i)),S+=o,m=0,v=e.length;m<v;++m)t.dirty(e[m]),e[m].mark.bounds.clear();for(p=l,m=0,v=e.length;m<v;++m,p+=h){for(y=(w=e[m]).mark.bounds,g=p;0<=g&&null==(x=r[g]);g-=f);a?(b=null==d?x.x:Math.round(x.bounds.x1+d*x.bounds.width()),_=S):(b=S,_=null==d?x.y:Math.round(x.bounds.y1+d*x.bounds.height())),y.union(w.bounds.translate(b-(w.x||0),_-(w.y||0))),w.x=b,w.y=_,t.dirty(w),E=s(E,y[c])}return E}function kl(t,e,r,n,i,o){if(e){t.dirty(e);var s=r,a=r;n?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),e.bounds.translate(s-(e.x||0),a-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=s,e.y=a,t.dirty(e)}}H(ml,zn).transform=function(t,e){var r=gl[t.method]||gl.parity,n=e.materialize(e.SOURCE).source;if(n){t.sort&&(n=n.slice().sort(t.sort)),\"greedy\"===t.method&&(n=n.filter(wl)),n.forEach(function(t){t.opacity=1});var i,o,s,a,u=n;if(3<=u.length&&yl(u)){for(e=e.reflow(t.modified()).modifies(\"opacity\");3<=(u=r(u)).length&&yl(u););u.length<3&&!b(n).opacity&&(1<u.length&&(b(u).opacity=0),b(n).opacity=1)}if(t.boundScale){var c=(i=t.boundOrient,o=t.boundTolerance,s=t.boundScale.range(),a=new Io,i===hl||i===pl?a.set(s[0],-1/0,s[1],1/0):a.set(-1/0,s[0],1/0,s[1]),a.expand(o||1),function(t){return a.encloses(t.bounds)});n.forEach(function(t){c(t)||(t.opacity=0)})}return e}},H(xl,zn).transform=function(t,e){var r=e.dataflow;if(e.visit(e.ALL,function(t){r.dirty(t)}),e.fields&&e.fields.zindex){var n=e.source&&e.source[0];n&&(n.mark.zdirty=!0)}};var Cl=.5,Ll=new Io;function Pl(t){zn.call(this,null,t)}function Dl(t,e,r){return t[e]===r?0:(t[e]=r,1)}function Ol(t){var e=t.items[0].datum.orient;return e===fl||e===dl}function Nl(t,e,r,n){var i,o,s,a,u=e.items[0],c=u.datum,l=c.orient,h=(a=+(s=c).grid,[s.ticks?a++:-1,s.labels?a++:-1,a+ +s.domain]),f=u.range,d=u.offset,p=u.position,m=u.minExtent,g=u.maxExtent,v=c.title&&u.items[h[2]].items[0],y=u.titlePadding,w=u.bounds,x=0,b=0;switch(Ll.clear().union(w),w.clear(),-1<(i=h[0])&&w.union(u.items[i].bounds),-1<(i=h[1])&&w.union(u.items[i].bounds),l){case hl:x=p||0,b=-d,o=Math.max(m,Math.min(g,-w.y1)),v&&(o=Il(v,o,y,0,-1,w)),w.add(0,-o).add(f,0);break;case fl:x=-d,b=p||0,o=Math.max(m,Math.min(g,-w.x1)),v&&(o=Il(v,o,y,1,-1,w)),w.add(-o,0).add(0,f);break;case dl:x=r+d,b=p||0,o=Math.max(m,Math.min(g,w.x2)),v&&(o=Il(v,o,y,1,1,w)),w.add(0,0).add(o,f);break;case pl:x=p||0,b=n+d,o=Math.max(m,Math.min(g,w.y2)),v&&(o=Il(v,o,y,0,1,w)),w.add(0,0).add(f,o);break;default:x=u.x,b=u.y}return Ha(w.translate(x,b),u),Dl(u,\"x\",x+Cl)|Dl(u,\"y\",b+Cl)&&(u.bounds=Ll,t.dirty(u),u.bounds=w,t.dirty(u)),u.mark.bounds.clear().union(w)}function Il(t,e,r,n,i,o){var s=t.bounds,a=0,u=0;return t.auto?(e+=r,n?a=(t.x||0)-(t.x=i*e):u=(t.y||0)-(t.y=i*e),s.translate(-a,-u),t.mark.bounds.set(s.x1,s.y1,s.x2,s.y2),n?(o.add(0,s.y1).add(0,s.y2),e+=s.width()):(o.add(s.x1,0).add(s.x2,0),e+=s.height())):o.union(s),e}function Fl(t,e,r,n,i,o,s){var a,u,c,l=e.items[0],h=l.datum.orient,f=l.offset,d=l.bounds,p=0,m=0;switch(h===hl||h===pl?(c=i,p=r[h]):h!==fl&&h!==dl||(c=n,m=r[h]),Ll.clear().union(d),d.clear(),l.items.forEach(function(t){d.union(t.bounds)}),a=Math.round(d.width())+2*l.padding-1,u=Math.round(d.height())+2*l.padding-1,h){case fl:p-=a+f-Math.floor(c.x1),r.left+=u+r.margin;break;case dl:p+=f+Math.ceil(c.x2),r.right+=u+r.margin;break;case hl:m-=u+f-Math.floor(c.y1),r.top+=a+r.margin;break;case pl:m+=f+Math.ceil(c.y2),r.bottom+=a+r.margin;break;case\"top-left\":p+=f,m+=f;break;case\"top-right\":p+=o-a-f,m+=f;break;case\"bottom-left\":p+=f,m+=s-u-f;break;case\"bottom-right\":p+=o-a-f,m+=s-u-f;break;default:p=l.x,m=l.y}return Ha(d.set(p,m,p+a,m+u),l),Dl(l,\"x\",p)|Dl(l,\"width\",a)|Dl(l,\"y\",m)|Dl(l,\"height\",u)&&(l.bounds=Ll,t.dirty(l),l.bounds=d,t.dirty(l)),l.mark.bounds.clear().union(d)}H(Pl,zn).transform=function(t,e){var r=e.dataflow;return t.mark.items.forEach(function(e){t.layout&&function(t,e,r){var n,i,o,s,a,u,c,l,h,f,d,p,m,g=function(t){for(var e,r,n=t.items,i=n.length,o=0,s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};o<i;++o)if(r=(e=n[o]).items,\"group\"===e.marktype)switch(e.role){case\"axis\":case\"legend\":break;case\"row-header\":bl(r,s.rowheaders);break;case\"row-footer\":bl(r,s.rowfooters);break;case\"column-header\":bl(r,s.colheaders);break;case\"column-footer\":bl(r,s.colfooters);break;case\"row-title\":s.rowtitle=r[0];break;case\"column-title\":s.coltitle=r[0];break;default:bl(r,s.marks)}return s}(e),v=g.marks,y=\"flush\"===r.bounds,w=y?_l:Ml,x=new Io(0,0,0,0),b=Tl(r.align,\"column\"),_=Tl(r.align,\"row\"),M=Tl(r.padding,\"column\"),S=Tl(r.padding,\"row\"),E=r.offset,T=e.columns||r.columns||v.length,A=T<0?1:Math.ceil(v.length/T),R=A*T,k=[],C=[],L=[],P=[],D=v.length;for(i=0;i<T;++i)C[i]=0;for(i=0;i<A;++i)P[i]=0;for(i=0;i<D;++i)a=w(v[i]),s=~~(i/T),c=(o=i%T)?Math.ceil(w(v[i-1]).x2):0,l=s?Math.ceil(w(v[i-T]).y2):0,C[o]=Math.max(C[o],c),P[s]=Math.max(P[s],l),k.push(M+Al(a.x1)),L.push(S+Al(a.y1)),t.dirty(v[i]);for(i=0;i<D;++i)i%T==0&&(k[i]=0),i<T&&(L[i]=0);if(\"each\"===b)for(o=1;o<T;++o){for(m=0,i=o;i<D;i+=T)m<k[i]&&(m=k[i]);for(i=o;i<D;i+=T)k[i]=m+C[o]}else if(\"all\"===b){for(p=0,o=1;o<T;++o)p<C[o]&&(p=C[o]);for(i=m=0;i<D;++i)i%T&&m<k[i]&&(m=k[i]);for(i=0;i<D;++i)i%T&&(k[i]=m+p)}else for(o=1;o<T;++o)for(i=o;i<D;i+=T)k[i]+=C[o];if(\"each\"===_)for(s=1;s<A;++s){for(m=0,n=(i=s*T)+T;i<n;++i)m<L[i]&&(m=L[i]);for(i=s*T;i<n;++i)L[i]=m+P[s]}else if(\"all\"===_){for(p=0,s=1;s<A;++s)p<P[s]&&(p=P[s]);for(m=0,i=T;i<D;++i)m<L[i]&&(m=L[i]);for(i=T;i<D;++i)L[i]=m+p}else for(s=1;s<A;++s)for(n=(i=s*T)+T;i<n;++i)L[i]+=P[s];for(i=h=0;i<D;++i)c=(u=v[i]).x||0,u.x=h=k[i]+(i%T?h:0),u.bounds.translate(h-c,0);for(o=0;o<T;++o)for(f=0,i=o;i<D;i+=T)l=(u=v[i]).y||0,u.y=f+=L[i],u.bounds.translate(0,f-l);for(i=0;i<D;++i)v[i].mark.bounds.clear();for(i=0;i<D;++i)t.dirty(u=v[i]),x.union(u.mark.bounds.union(u.bounds));function O(t,e){return Math.floor(Math.min(t,e))}function N(t,e){return Math.ceil(Math.max(t,e))}w=y?Sl:El,d=Tl(r.headerBand,\"row\",null),h=Rl(t,g.rowheaders,v,0,A,-Tl(E,\"rowHeader\"),O,0,w,\"x1\",0,T,1,d),d=Tl(r.headerBand,\"column\",null),f=Rl(t,g.colheaders,v,0,T,-Tl(E,\"columnHeader\"),O,1,w,\"y1\",0,1,T,d),d=Tl(r.footerBand,\"row\",null),Rl(t,g.rowfooters,v,0,A,Tl(E,\"rowFooter\"),N,0,w,\"x2\",T-1,T,1,d),d=Tl(r.footerBand,\"column\",null),Rl(t,g.colfooters,v,0,T,Tl(E,\"columnFooter\"),N,1,w,\"y2\",R-T,1,T,d),g.rowtitle&&(m=h-Tl(E,\"rowTitle\"),d=Tl(r.titleBand,\"row\",.5),kl(t,g.rowtitle,m,0,x,d)),g.coltitle&&(m=f-Tl(E,\"columnTitle\"),d=Tl(r.titleBand,\"column\",.5),kl(t,g.coltitle,m,1,x,d))}(r,e,t.layout),function(t,e,r){var n,i,o,s,a,u,c=e.items,l=Math.max(0,e.width||0),h=Math.max(0,e.height||0),f=(new Io).set(0,0,l,h),d=f.clone(),p=f.clone(),m=f.clone(),g=[];for(a=0,u=c.length;a<u;++a)switch((i=c[a]).role){case\"axis\":d.union(s=Nl(t,i,l,h)),(Ol(i)?p:m).union(s);break;case\"title\":n=i;break;case\"legend\":g.push(i);break;case\"frame\":case\"scope\":case\"row-header\":case\"row-footer\":case\"column-header\":case\"column-footer\":p.union(i.bounds),m.union(i.bounds);break;default:f.union(i.bounds)}if(n&&(d.union(s=function(t,e,r){var n=e.items[0],i=n.datum.orient,o=n.offset,s=n.bounds,a=0,u=0;switch(Ll.clear().union(s),i){case hl:a=n.x,u=r.y1-o;break;case fl:a=r.x1-o,u=n.y;break;case dl:a=r.x2+o,u=n.y;break;case pl:a=n.x,u=r.y2+o;break;default:a=n.x,u=n.y}return s.translate(a-n.x,u-n.y),Dl(n,\"x\",a)|Dl(n,\"y\",u)&&(n.bounds=Ll,t.dirty(n),n.bounds=s,t.dirty(n)),e.bounds.clear().union(s)}(t,n,d)),(Ol(n)?p:m).union(s)),g.length)for(o={left:0,right:0,top:0,bottom:0,margin:r.legendMargin||8},a=0,u=g.length;a<u;++a)if(s=Fl(t,g[a],o,p,m,l,h),r.autosize&&\"fit\"===r.autosize.type){var v=g[a].items[0].datum.orient;v===fl||v===dl?f.add(s.x1,0).add(s.x2,0):v!==hl&&v!==pl||f.add(0,s.y1).add(0,s.y2)}else f.union(s);f.union(p).union(m).union(d),function(t,e,r,n){var i=n.autosize||{},o=i.type,s=t._width,a=t._height,u=t.padding();if(!(t._autosize<1)&&o){var c=Math.max(0,e.width||0),l=Math.max(0,Math.ceil(-r.x1)),h=Math.max(0,Math.ceil(r.x2-c)),f=Math.max(0,e.height||0),d=Math.max(0,Math.ceil(-r.y1)),p=Math.max(0,Math.ceil(r.y2-f));\"padding\"===i.contains&&(s-=u.left+u.right,a-=u.top+u.bottom),\"none\"===o?(d=l=0,c=s,f=a):\"fit\"===o?(c=Math.max(0,s-l-h),f=Math.max(0,a-d-p)):\"fit-x\"===o?(c=Math.max(0,s-l-h),a=f+d+p):\"fit-y\"===o?(s=c+l+h,f=Math.max(0,a-d-p)):\"pad\"===o&&(s=c+l+h,a=f+d+p),t._resizeView(s,a,c,f,[l,d],i.resize)}}(t,e,f,r)}(r,e,t)}),e};var zl=Object.freeze({bound:sl,identifier:cl,mark:ll,overlap:ml,render:xl,viewlayout:Pl}),Ul=\"log\",jl=\"sqrt\",Vl=\"linear\",Bl=\"ordinal\",Hl=\"quantile\",Gl=\"quantize\",Wl=\"threshold\",ql=\"bin-ordinal\",Yl=\"sequential\",Xl=function(t){return function(e){var r,n=e[0],i=e[1];return i<n&&(r=n,n=i,i=r),[t.invert(n),t.invert(i)]}},$l=function(t){return function(e){var r,n,i,o,s=t.range(),a=e[0],u=e[1],c=-1;for(u<a&&(n=a,a=u,u=n),i=0,o=s.length;i<o;++i)s[i]>=a&&s[i]<=u&&(c<0&&(c=i),r=i);if(!(c<0))return a=t.invertExtent(s[c]),u=t.invertExtent(s[r]),[void 0===a[0]?a[1]:a[0],void 0===u[1]?u[0]:u[1]]}},Jl=function(t,e,r){var n=t-e+2*r;return t?0<n?n:1:0},Zl=Array.prototype,Ql=Zl.map,Kl=Zl.slice,th={name:\"implicit\"};function eh(t){var e=Lt(),r=[],n=th;function i(i){var o=i+\"\",s=e.get(o);if(!s){if(n!==th)return n;e.set(o,s=r.push(i))}return t[(s-1)%t.length]}return t=null==t?[]:Kl.call(t),i.domain=function(t){if(!arguments.length)return r.slice();r=[],e=Lt();for(var n,o,s=-1,a=t.length;++s<a;)e.has(o=(n=t[s])+\"\")||e.set(o,r.push(n));return i},i.range=function(e){return arguments.length?(t=Kl.call(e),i):t.slice()},i.unknown=function(t){return arguments.length?(n=t,i):n},i.copy=function(){return eh().domain(r).range(t).unknown(n)},i}var rh=function(t,e,r){t.prototype=e.prototype=r,r.constructor=t};function nh(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function ih(){}var oh=1/.7,sh=\"\\\\s*([+-]?\\\\d+)\\\\s*\",ah=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",uh=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",ch=/^#([0-9a-f]{3})$/,lh=/^#([0-9a-f]{6})$/,hh=new RegExp(\"^rgb\\\\(\"+[sh,sh,sh]+\"\\\\)$\"),fh=new RegExp(\"^rgb\\\\(\"+[uh,uh,uh]+\"\\\\)$\"),dh=new RegExp(\"^rgba\\\\(\"+[sh,sh,sh,ah]+\"\\\\)$\"),ph=new RegExp(\"^rgba\\\\(\"+[uh,uh,uh,ah]+\"\\\\)$\"),mh=new RegExp(\"^hsl\\\\(\"+[ah,uh,uh]+\"\\\\)$\"),gh=new RegExp(\"^hsla\\\\(\"+[ah,uh,uh,ah]+\"\\\\)$\"),vh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function yh(t){var e;return t=(t+\"\").trim().toLowerCase(),(e=ch.exec(t))?new Mh((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=lh.exec(t))?wh(parseInt(e[1],16)):(e=hh.exec(t))?new Mh(e[1],e[2],e[3],1):(e=fh.exec(t))?new Mh(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=dh.exec(t))?xh(e[1],e[2],e[3],e[4]):(e=ph.exec(t))?xh(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=mh.exec(t))?Sh(e[1],e[2]/100,e[3]/100,1):(e=gh.exec(t))?Sh(e[1],e[2]/100,e[3]/100,e[4]):vh.hasOwnProperty(t)?wh(vh[t]):\"transparent\"===t?new Mh(NaN,NaN,NaN,0):null}function wh(t){return new Mh(t>>16&255,t>>8&255,255&t,1)}function xh(t,e,r,n){return n<=0&&(t=e=r=NaN),new Mh(t,e,r,n)}function bh(t){return t instanceof ih||(t=yh(t)),t?new Mh((t=t.rgb()).r,t.g,t.b,t.opacity):new Mh}function _h(t,e,r,n){return 1===arguments.length?bh(t):new Mh(t,e,r,null==n?1:n)}function Mh(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}function Sh(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||1<=r?t=e=NaN:e<=0&&(t=NaN),new Th(t,e,r,n)}function Eh(t,e,r,n){return 1===arguments.length?function(t){if(t instanceof Th)return new Th(t.h,t.s,t.l,t.opacity);if(t instanceof ih||(t=yh(t)),!t)return new Th;if(t instanceof Th)return t;var e=(t=t.rgb()).r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),o=Math.max(e,r,n),s=NaN,a=o-i,u=(o+i)/2;return a?(s=e===o?(r-n)/a+6*(r<n):r===o?(n-e)/a+2:(e-r)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=0<u&&u<1?0:s,new Th(s,a,u,t.opacity)}(t):new Th(t,e,r,null==n?1:n)}function Th(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}function Ah(t,e,r){return 255*(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)}rh(ih,yh,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+\"\"}}),rh(Mh,_h,nh(ih,{brighter:function(t){return t=null==t?oh:Math.pow(oh,t),new Mh(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Mh(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?\"rgb(\":\"rgba(\")+Math.max(0,Math.min(255,Math.round(this.r)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.g)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?\")\":\", \"+t+\")\")}})),rh(Th,Eh,nh(ih,{brighter:function(t){return t=null==t?oh:Math.pow(oh,t),new Th(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Th(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Mh(Ah(240<=t?t-240:t+120,i,n),Ah(t,i,n),Ah(t<120?t+240:t-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Rh=Math.PI/180,kh=180/Math.PI,Ch=.96422,Lh=1,Ph=.82521,Dh=4/29,Oh=6/29,Nh=3*Oh*Oh,Ih=Oh*Oh*Oh;function Fh(t){if(t instanceof Uh)return new Uh(t.l,t.a,t.b,t.opacity);if(t instanceof Wh){if(isNaN(t.h))return new Uh(t.l,0,0,t.opacity);var e=t.h*Rh;return new Uh(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Mh||(t=bh(t));var r,n,i=Hh(t.r),o=Hh(t.g),s=Hh(t.b),a=jh((.2225045*i+.7168786*o+.0606169*s)/Lh);return i===o&&o===s?r=n=a:(r=jh((.4360747*i+.3850649*o+.1430804*s)/Ch),n=jh((.0139322*i+.0971045*o+.7141733*s)/Ph)),new Uh(116*a-16,500*(r-a),200*(a-n),t.opacity)}function zh(t,e,r,n){return 1===arguments.length?Fh(t):new Uh(t,e,r,null==n?1:n)}function Uh(t,e,r,n){this.l=+t,this.a=+e,this.b=+r,this.opacity=+n}function jh(t){return Ih<t?Math.pow(t,1/3):t/Nh+Dh}function Vh(t){return Oh<t?t*t*t:Nh*(t-Dh)}function Bh(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Hh(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Gh(t,e,r,n){return 1===arguments.length?function(t){if(t instanceof Wh)return new Wh(t.h,t.c,t.l,t.opacity);if(t instanceof Uh||(t=Fh(t)),0===t.a&&0===t.b)return new Wh(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*kh;return new Wh(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Wh(t,e,r,null==n?1:n)}function Wh(t,e,r,n){this.h=+t,this.c=+e,this.l=+r,this.opacity=+n}rh(Uh,zh,nh(ih,{brighter:function(t){return new Uh(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Uh(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,r=isNaN(this.b)?t:t-this.b/200;return new Mh(Bh(3.1338561*(e=Ch*Vh(e))-1.6168667*(t=Lh*Vh(t))-.4906146*(r=Ph*Vh(r))),Bh(-.9787684*e+1.9161415*t+.033454*r),Bh(.0719453*e-.2289914*t+1.4052427*r),this.opacity)}})),rh(Wh,Gh,nh(ih,{brighter:function(t){return new Wh(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Wh(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Fh(this).rgb()}}));var qh=1.78277,Yh=-.29227,Xh=-.90649,$h=1.97294,Jh=$h*Xh,Zh=$h*qh,Qh=qh*Yh- -.14861*Xh;function Kh(t,e,r,n){return 1===arguments.length?function(t){if(t instanceof tf)return new tf(t.h,t.s,t.l,t.opacity);t instanceof Mh||(t=bh(t));var e=t.g/255,r=t.b/255,n=(Qh*r+Jh*(t.r/255)-Zh*e)/(Qh+Jh-Zh),i=r-n,o=($h*(e-n)-Yh*i)/Xh,s=Math.sqrt(o*o+i*i)/($h*n*(1-n)),a=s?Math.atan2(o,i)*kh-120:NaN;return new tf(a<0?a+360:a,s,n,t.opacity)}(t):new tf(t,e,r,null==n?1:n)}function tf(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}function ef(t,e,r,n,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*r+(1+3*t+3*o-3*s)*n+s*i)/6}rh(tf,Kh,nh(ih,{brighter:function(t){return t=null==t?oh:Math.pow(oh,t),new tf(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new tf(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Rh,e=+this.l,r=isNaN(this.s)?0:this.s*e*(1-e),n=Math.cos(t),i=Math.sin(t);return new Mh(255*(e+r*(-.14861*n+qh*i)),255*(e+r*(Yh*n+Xh*i)),255*(e+r*($h*n)),this.opacity)}}));var rf=function(t){var e=t.length-1;return function(r){var n=r<=0?r=0:1<=r?e-(r=1):Math.floor(r*e),i=t[n],o=t[n+1];return ef((r-n/e)*e,0<n?t[n-1]:2*i-o,i,o,n<e-1?t[n+2]:2*o-i)}},nf=function(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e);return ef((r-n/e)*e,t[(n+e-1)%e],t[n%e],t[(n+1)%e],t[(n+2)%e])}},of=function(t){return function(){return t}};function sf(t,e){return function(r){return t+r*e}}function af(t,e){var r=e-t;return r?sf(t,180<r||r<-180?r-360*Math.round(r/360):r):of(isNaN(t)?e:t)}function uf(t,e){var r=e-t;return r?sf(t,r):of(isNaN(t)?e:t)}var cf=function t(e){var r,n=1==(r=+(r=e))?uf:function(t,e){return e-t?(n=t,i=e,o=r,n=Math.pow(n,o),i=Math.pow(i,o)-n,o=1/o,function(t){return Math.pow(n+t*i,o)}):of(isNaN(t)?e:t);var n,i,o};function i(t,e){var r=n((t=_h(t)).r,(e=_h(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),s=uf(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=s(e),t+\"\"}}return i.gamma=t,i}(1);function lf(t){return function(e){var r,n,i=e.length,o=new Array(i),s=new Array(i),a=new Array(i);for(r=0;r<i;++r)n=_h(e[r]),o[r]=n.r||0,s[r]=n.g||0,a[r]=n.b||0;return o=t(o),s=t(s),a=t(a),n.opacity=1,function(t){return n.r=o(t),n.g=s(t),n.b=a(t),n+\"\"}}}var hf,ff,df,pf,mf=lf(rf),gf=lf(nf),vf=function(t,e){var r,n=e?e.length:0,i=t?Math.min(n,t.length):0,o=new Array(i),s=new Array(n);for(r=0;r<i;++r)o[r]=Sf(t[r],e[r]);for(;r<n;++r)s[r]=e[r];return function(t){for(r=0;r<i;++r)s[r]=o[r](t);return s}},yf=function(t,e){var r=new Date;return e-=t=+t,function(n){return r.setTime(t+e*n),r}},wf=function(t,e){return e-=t=+t,function(r){return t+e*r}},xf=function(t,e){var r,n={},i={};for(r in null!==t&&\"object\"==typeof t||(t={}),null!==e&&\"object\"==typeof e||(e={}),e)r in t?n[r]=Sf(t[r],e[r]):i[r]=e[r];return function(t){for(r in n)i[r]=n[r](t);return i}},bf=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,_f=new RegExp(bf.source,\"g\"),Mf=function(t,e){var r,n,i,o,s,a=bf.lastIndex=_f.lastIndex=0,u=-1,c=[],l=[];for(t+=\"\",e+=\"\";(r=bf.exec(t))&&(n=_f.exec(e));)(i=n.index)>a&&(i=e.slice(a,i),c[u]?c[u]+=i:c[++u]=i),(r=r[0])===(n=n[0])?c[u]?c[u]+=n:c[++u]=n:(c[++u]=null,l.push({i:u,x:wf(r,n)})),a=_f.lastIndex;return a<e.length&&(i=e.slice(a),c[u]?c[u]+=i:c[++u]=i),c.length<2?l[0]?(s=l[0].x,function(t){return s(t)+\"\"}):(o=e,function(){return o}):(e=l.length,function(t){for(var r,n=0;n<e;++n)c[(r=l[n]).i]=r.x(t);return c.join(\"\")})},Sf=function(t,e){var r,n=typeof e;return null==e||\"boolean\"===n?of(e):(\"number\"===n?wf:\"string\"===n?(r=yh(e))?(e=r,cf):Mf:e instanceof yh?cf:e instanceof Date?yf:Array.isArray(e)?vf:\"function\"!=typeof e.valueOf&&\"function\"!=typeof e.toString||isNaN(e)?xf:wf)(t,e)},Ef=function(t,e){return e-=t=+t,function(r){return Math.round(t+e*r)}},Tf=180/Math.PI,Af={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Rf=function(t,e,r,n,i,o){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*r+e*n)&&(r-=t*u,n-=e*u),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,u/=a),t*n<e*r&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Tf,skewX:Math.atan(u)*Tf,scaleX:s,scaleY:a}};function kf(t,e,r,n){function i(t){return t.length?t.pop()+\" \":\"\"}return function(o,s){var a,u,c,l,h,f,d=[],p=[];return o=t(o),s=t(s),function(t,n,i,o,s,a){if(t!==i||n!==o){var u=s.push(\"translate(\",null,e,null,r);a.push({i:u-4,x:wf(t,i)},{i:u-2,x:wf(n,o)})}else(i||o)&&s.push(\"translate(\"+i+e+o+r)}(o.translateX,o.translateY,s.translateX,s.translateY,d,p),c=d,(a=o.rotate)!==(u=s.rotate)?(180<a-u?u+=360:180<u-a&&(a+=360),p.push({i:c.push(i(c)+\"rotate(\",null,n)-2,x:wf(a,u)})):u&&c.push(i(c)+\"rotate(\"+u+n),f=d,(l=o.skewX)!==(h=s.skewX)?p.push({i:f.push(i(f)+\"skewX(\",null,n)-2,x:wf(l,h)}):h&&f.push(i(f)+\"skewX(\"+h+n),function(t,e,r,n,o,s){if(t!==r||e!==n){var a=o.push(i(o)+\"scale(\",null,\",\",null,\")\");s.push({i:a-4,x:wf(t,r)},{i:a-2,x:wf(e,n)})}else 1===r&&1===n||o.push(i(o)+\"scale(\"+r+\",\"+n+\")\")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,d,p),o=s=null,function(t){for(var e,r=-1,n=p.length;++r<n;)d[(e=p[r]).i]=e.x(t);return d.join(\"\")}}}var Cf=kf(function(t){return\"none\"===t?Af:(hf||(hf=document.createElement(\"DIV\"),ff=document.documentElement,df=document.defaultView),hf.style.transform=t,t=df.getComputedStyle(ff.appendChild(hf),null).getPropertyValue(\"transform\"),ff.removeChild(hf),t=t.slice(7,-1).split(\",\"),Rf(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},\"px, \",\"px)\",\"deg)\"),Lf=kf(function(t){return null==t?Af:(pf||(pf=document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\")),pf.setAttribute(\"transform\",t),(t=pf.transform.baseVal.consolidate())?Rf((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Af)},\", \",\")\",\")\"),Pf=Math.SQRT2;function Df(t){return((t=Math.exp(t))+1/t)/2}function Of(t){return function(e,r){var n=t((e=Eh(e)).h,(r=Eh(r)).h),i=uf(e.s,r.s),o=uf(e.l,r.l),s=uf(e.opacity,r.opacity);return function(t){return e.h=n(t),e.s=i(t),e.l=o(t),e.opacity=s(t),e+\"\"}}}var Nf=Of(af),If=Of(uf);function Ff(t){return function(e,r){var n=t((e=Gh(e)).h,(r=Gh(r)).h),i=uf(e.c,r.c),o=uf(e.l,r.l),s=uf(e.opacity,r.opacity);return function(t){return e.h=n(t),e.c=i(t),e.l=o(t),e.opacity=s(t),e+\"\"}}}var zf=Ff(af),Uf=Ff(uf);function jf(t){return function e(r){function n(e,n){var i=t((e=Kh(e)).h,(n=Kh(n)).h),o=uf(e.s,n.s),s=uf(e.l,n.l),a=uf(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=s(Math.pow(t,r)),e.opacity=a(t),e+\"\"}}return r=+r,n.gamma=e,n}(1)}var Vf=jf(af),Bf=jf(uf),Hf=Object.freeze({interpolate:Sf,interpolateArray:vf,interpolateBasis:rf,interpolateBasisClosed:nf,interpolateDate:yf,interpolateNumber:wf,interpolateObject:xf,interpolateRound:Ef,interpolateString:Mf,interpolateTransformCss:Cf,interpolateTransformSvg:Lf,interpolateZoom:function(t,e){var r,n,i=t[0],o=t[1],s=t[2],a=e[2],u=e[0]-i,c=e[1]-o,l=u*u+c*c;if(l<1e-12)n=Math.log(a/s)/Pf,r=function(t){return[i+t*u,o+t*c,s*Math.exp(Pf*t*n)]};else{var h=Math.sqrt(l),f=(a*a-s*s+4*l)/(2*s*2*h),d=(a*a-s*s-4*l)/(2*a*2*h),p=Math.log(Math.sqrt(f*f+1)-f),m=Math.log(Math.sqrt(d*d+1)-d);n=(m-p)/Pf,r=function(t){var e,r,a=t*n,l=Df(p),f=s/(2*h)*(l*(r=Pf*a+p,((r=Math.exp(2*r))-1)/(r+1))-(e=p,((e=Math.exp(e))-1/e)/2));return[i+f*u,o+f*c,s*l/Df(Pf*a+p)]}}return r.duration=1e3*n,r},interpolateRgb:cf,interpolateRgbBasis:mf,interpolateRgbBasisClosed:gf,interpolateHsl:Nf,interpolateHslLong:If,interpolateLab:function(t,e){var r=uf((t=zh(t)).l,(e=zh(e)).l),n=uf(t.a,e.a),i=uf(t.b,e.b),o=uf(t.opacity,e.opacity);return function(e){return t.l=r(e),t.a=n(e),t.b=i(e),t.opacity=o(e),t+\"\"}},interpolateHcl:zf,interpolateHclLong:Uf,interpolateCubehelix:Vf,interpolateCubehelixLong:Bf,quantize:function(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t(n/(e-1));return r}}),Gf=function(t){return function(){return t}},Wf=function(t){return+t},qf=[0,1];function Yf(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Gf(e)}function Xf(t,e,r,n){var i=t[0],o=t[1],s=e[0],a=e[1];return o<i?(i=r(o,i),s=n(a,s)):(i=r(i,o),s=n(s,a)),function(t){return s(i(t))}}function $f(t,e,r,n){var i=Math.min(t.length,e.length)-1,o=new Array(i),s=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)o[a]=r(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(e){var r=ni(t,e,1,i)-1;return s[r](o[r](e))}}function Jf(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Zf(t,e){var r,n,i,o=qf,s=qf,a=Sf,u=!1;function c(){return r=2<Math.min(o.length,s.length)?$f:Xf,n=i=null,l}function l(e){return(n||(n=r(o,s,u?(i=t,function(t,e){var r=i(t=+t,e=+e);return function(n){return n<=t?0:e<=n?1:r(n)}}):t,a)))(+e);var i}return l.invert=function(t){return(i||(i=r(s,o,Yf,u?(n=e,function(t,e){var r=n(t=+t,e=+e);return function(n){return n<=0?t:1<=n?e:r(n)}}):e)))(+t);var n},l.domain=function(t){return arguments.length?(o=Ql.call(t,Wf),c()):o.slice()},l.range=function(t){return arguments.length?(s=Kl.call(t),c()):s.slice()},l.rangeRound=function(t){return s=Kl.call(t),a=Ef,c()},l.clamp=function(t){return arguments.length?(u=!!t,c()):u},l.interpolate=function(t){return arguments.length?(a=t,c()):a},c()}var Qf,Kf=function(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf(\"e\"))<0)return null;var r,n=t.slice(0,r);return[1<n.length?n[0]+n.slice(2):n,+t.slice(r+1)]},td=function(t){return(t=Kf(Math.abs(t)))?t[1]:NaN},ed=function(t,e){var r=Kf(t,e);if(!r)return t+\"\";var n=r[0],i=r[1];return i<0?\"0.\"+new Array(-i).join(\"0\")+n:n.length>i+1?n.slice(0,i+1)+\".\"+n.slice(i+1):n+new Array(i-n.length+2).join(\"0\")},rd={\"\":function(t,e){t:for(var r,n=(t=t.toPrecision(e)).length,i=1,o=-1;i<n;++i)switch(t[i]){case\".\":o=r=i;break;case\"0\":0===o&&(o=i),r=i;break;case\"e\":break t;default:0<o&&(o=0)}return 0<o?t.slice(0,o)+t.slice(r+1):t},\"%\":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+\"\"},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return ed(100*t,e)},r:ed,s:function(t,e){var r=Kf(t,e);if(!r)return t+\"\";var n=r[0],i=r[1],o=i-(Qf=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=n.length;return o===s?n:s<o?n+new Array(o-s+1).join(\"0\"):0<o?n.slice(0,o)+\".\"+n.slice(o):\"0.\"+new Array(1-o).join(\"0\")+Kf(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},nd=/^(?:(.)?([<>=^]))?([+\\-\\( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?([a-z%])?$/i;function id(t){return new od(t)}function od(t){if(!(e=nd.exec(t)))throw new Error(\"invalid format: \"+t);var e,r=e[1]||\" \",n=e[2]||\">\",i=e[3]||\"-\",o=e[4]||\"\",s=!!e[5],a=e[6]&&+e[6],u=!!e[7],c=e[8]&&+e[8].slice(1),l=e[9]||\"\";\"n\"===l?(u=!0,l=\"g\"):rd[l]||(l=\"\"),(s||\"0\"===r&&\"=\"===n)&&(s=!0,r=\"0\",n=\"=\"),this.fill=r,this.align=n,this.sign=i,this.symbol=o,this.zero=s,this.width=a,this.comma=u,this.precision=c,this.type=l}id.prototype=od.prototype,od.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?\"0\":\"\")+(null==this.width?\"\":Math.max(1,0|this.width))+(this.comma?\",\":\"\")+(null==this.precision?\"\":\".\"+Math.max(0,0|this.precision))+this.type};var sd,ad,ud,cd=function(t){return t},ld=[\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\\xb5\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"],hd=function(t){var e,r,n,i=t.grouping&&t.thousands?(r=t.grouping,n=t.thousands,function(t,e){for(var i=t.length,o=[],s=0,a=r[0],u=0;0<i&&0<a&&(e<u+a+1&&(a=Math.max(1,e-u)),o.push(t.substring(i-=a,i+a)),!((u+=a+1)>e));)a=r[s=(s+1)%r.length];return o.reverse().join(n)}):cd,o=t.currency,s=t.decimal,a=t.numerals?(e=t.numerals,function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}):cd,u=t.percent||\"%\";function c(t){var e=(t=id(t)).fill,r=t.align,n=t.sign,c=t.symbol,l=t.zero,h=t.width,f=t.comma,d=t.precision,p=t.type,m=\"$\"===c?o[0]:\"#\"===c&&/[boxX]/.test(p)?\"0\"+p.toLowerCase():\"\",g=\"$\"===c?o[1]:/[%p]/.test(p)?u:\"\",v=rd[p],y=!p||/[defgprs%]/.test(p);function w(t){var o,u,c,w=m,x=g;if(\"c\"===p)x=v(t)+x,t=\"\";else{var b=(t=+t)<0;if(t=v(Math.abs(t),d),b&&0==+t&&(b=!1),w=(b?\"(\"===n?n:\"-\":\"-\"===n||\"(\"===n?\"\":n)+w,x=(\"s\"===p?ld[8+Qf/3]:\"\")+x+(b&&\"(\"===n?\")\":\"\"),y)for(o=-1,u=t.length;++o<u;)if((c=t.charCodeAt(o))<48||57<c){x=(46===c?s+t.slice(o+1):t.slice(o))+x,t=t.slice(0,o);break}}f&&!l&&(t=i(t,1/0));var _=w.length+t.length+x.length,M=_<h?new Array(h-_+1).join(e):\"\";switch(f&&l&&(t=i(M+t,M.length?h-x.length:1/0),M=\"\"),r){case\"<\":t=w+t+x+M;break;case\"=\":t=w+M+t+x;break;case\"^\":t=M.slice(0,_=M.length>>1)+w+t+x+M.slice(_);break;default:t=M+w+t+x}return a(t)}return d=null==d?p?6:12:/[gprs]/.test(p)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),w.toString=function(){return t+\"\"},w}return{format:c,formatPrefix:function(t,e){var r=c(((t=id(t)).type=\"f\",t)),n=3*Math.max(-8,Math.min(8,Math.floor(td(e)/3))),i=Math.pow(10,-n),o=ld[8+n/3];return function(t){return r(i*t)+o}}}};function fd(t){return sd=hd(t),ad=sd.format,ud=sd.formatPrefix,sd}fd({decimal:\".\",thousands:\",\",grouping:[3],currency:[\"$\",\"\"]});var dd=function(t,e,r){var n,i,o,s,a=t[0],u=t[t.length-1],c=di(a,u,null==e?10:e);switch((r=id(null==r?\",f\":r)).type){case\"s\":var l=Math.max(Math.abs(a),Math.abs(u));return null!=r.precision||isNaN((s=c,n=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(td(l)/3)))-td(Math.abs(s)))))||(r.precision=n),ud(r,l);case\"\":case\"e\":case\"g\":case\"p\":case\"r\":null!=r.precision||isNaN((i=c,o=Math.max(Math.abs(a),Math.abs(u)),i=Math.abs(i),o=Math.abs(o)-i,n=Math.max(0,td(o)-td(i))+1))||(r.precision=n-(\"e\"===r.type));break;case\"f\":case\"%\":null!=r.precision||isNaN(n=Math.max(0,-td(Math.abs(c))))||(r.precision=n-2*(\"%\"===r.type))}return ad(r)};function pd(t){var e=t.domain;return t.ticks=function(t){var r=e();return hi(r[0],r[r.length-1],null==t?10:t)},t.tickFormat=function(t,r){return dd(e(),t,r)},t.nice=function(r){null==r&&(r=10);var n,i=e(),o=0,s=i.length-1,a=i[o],u=i[s];return u<a&&(n=a,a=u,u=n,n=o,o=s,s=n),0<(n=fi(a,u,r))?n=fi(a=Math.floor(a/n)*n,u=Math.ceil(u/n)*n,r):n<0&&(n=fi(a=Math.ceil(a*n)/n,u=Math.floor(u*n)/n,r)),0<n?(i[o]=Math.floor(a/n)*n,i[s]=Math.ceil(u/n)*n,e(i)):n<0&&(i[o]=Math.ceil(a*n)/n,i[s]=Math.floor(u*n)/n,e(i)),t},t}function md(){var t=Zf(Yf,wf);return t.copy=function(){return Jf(t,md())},pd(t)}var gd=function(t,e){var r,n=0,i=(t=t.slice()).length-1,o=t[n],s=t[i];return s<o&&(r=n,n=i,i=r,r=o,o=s,s=r),t[n]=e.floor(o),t[i]=e.ceil(s),t};function vd(t,e){return(e=Math.log(e/t))?function(r){return Math.log(r/t)/e}:Gf(e)}function yd(t,e){return t<0?function(r){return-Math.pow(-e,r)*Math.pow(-t,1-r)}:function(r){return Math.pow(e,r)*Math.pow(t,1-r)}}function wd(t){return isFinite(t)?+(\"1e\"+t):t<0?0:t}function xd(t){return 10===t?wd:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function bd(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function _d(t){return function(e){return-t(-e)}}function Md(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function Sd(){var t=1,e=Zf(function(e,r){return(r=Md(r,t)-(e=Md(e,t)))?function(n){return(Md(n,t)-e)/r}:Gf(r)},function(e,r){return r=Md(r,t)-(e=Md(e,t)),function(n){return Md(e+r*n,1/t)}}),r=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,r(r())):t},e.copy=function(){return Jf(e,Sd().exponent(t))},pd(e)}var Ed=1e3,Td=60*Ed,Ad=60*Td,Rd=24*Ad,kd=7*Rd,Cd=30*Rd,Ld=365*Rd;function Pd(t){return new Date(t)}function Dd(t){return t instanceof Date?+t:+new Date(+t)}function Od(t,e,r,n,i,o,s,a,u){var c=Zf(Yf,wf),l=c.invert,h=c.domain,f=u(\".%L\"),d=u(\":%S\"),p=u(\"%I:%M\"),m=u(\"%I %p\"),g=u(\"%a %d\"),v=u(\"%b %d\"),y=u(\"%B\"),w=u(\"%Y\"),x=[[s,1,Ed],[s,5,5*Ed],[s,15,15*Ed],[s,30,30*Ed],[o,1,Td],[o,5,5*Td],[o,15,15*Td],[o,30,30*Td],[i,1,Ad],[i,3,3*Ad],[i,6,6*Ad],[i,12,12*Ad],[n,1,Rd],[n,2,2*Rd],[r,1,kd],[e,1,Cd],[e,3,3*Cd],[t,1,Ld]];function b(a){return(s(a)<a?f:o(a)<a?d:i(a)<a?p:n(a)<a?m:e(a)<a?r(a)<a?g:v:t(a)<a?y:w)(a)}function _(e,r,n,i){if(null==e&&(e=10),\"number\"==typeof e){var o=Math.abs(n-r)/e,s=ei(function(t){return t[2]}).right(x,o);s===x.length?(i=di(r/Ld,n/Ld,e),e=t):s?(i=(s=x[o/x[s-1][2]<x[s][2]/o?s-1:s])[1],e=s[0]):(i=Math.max(di(r,n,e),1),e=a)}return null==i?e:e.every(i)}return c.invert=function(t){return new Date(l(t))},c.domain=function(t){return arguments.length?h(Ql.call(t,Dd)):h().map(Pd)},c.ticks=function(t,e){var r,n=h(),i=n[0],o=n[n.length-1],s=o<i;return s&&(r=i,i=o,o=r),r=(r=_(t,i,o,e))?r.range(i,o+1):[],s?r.reverse():r},c.tickFormat=function(t,e){return null==e?b:u(e)},c.nice=function(t,e){var r=h();return(t=_(t,r[0],r[r.length-1],e))?h(gd(r,t)):c},c.copy=function(){return Jf(c,Od(t,e,r,n,i,o,s,a,u))},c}function Nd(){var t,e,r=eh().unknown(void 0),n=r.domain,i=r.range,o=[0,1],s=!1,a=0,u=0,c=.5;function l(){var r=n().length,l=o[1]<o[0],h=o[l-0],f=o[1-l],d=Jl(r,a,u);t=(f-h)/(d||1),s&&(t=Math.floor(t)),h+=(f-h-t*(r-a))*c,e=t*(1-a),s&&(h=Math.round(h),e=Math.round(e));var p=ai(r).map(function(e){return h+t*e});return i(l?p.reverse():p)}return delete r.unknown,r.domain=function(t){return arguments.length?(n(t),l()):n()},r.range=function(t){return arguments.length?(o=[+t[0],+t[1]],l()):o.slice()},r.rangeRound=function(t){return o=[+t[0],+t[1]],s=!0,l()},r.bandwidth=function(){return e},r.step=function(){return t},r.round=function(t){return arguments.length?(s=!!t,l()):s},r.padding=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),a=u,l()):a},r.paddingInner=function(t){return arguments.length?(a=Math.max(0,Math.min(1,t)),l()):a},r.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},r.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},r.invertRange=function(t){if(null!=t[0]&&null!=t[1]){var r,s,a,u=+t[0],c=+t[1],l=o[1]<o[0],h=l?i().reverse():i(),f=h.length-1;if(u==u&&c==c&&(c<u&&(a=u,u=c,c=a),!(c<h[0]||u>o[1-l])))return r=Math.max(0,ni(h,u)-1),s=u===c?r:ni(h,c)-1,u-h[r]>e+1e-10&&++r,l&&(a=r,r=f-s,s=f-a),s<r?void 0:n().slice(r,s+1)}},r.invert=function(t){var e=r.invertRange([t,t]);return e?e[0]:e},r.copy=function(){return Nd().domain(n()).range(o).round(s).paddingInner(a).paddingOuter(u).align(c)},l()}var Id=Array.prototype.map,Fd=Array.prototype.slice;function zd(t){return Id.call(t,function(t){return+t})}function Ud(t,e){return 1<arguments.length?(jd[t]=(r=t,n=e,function(){var t=n();return t.invertRange||(t.invertRange=t.invert?Xl(t):t.invertExtent?$l(t):void 0),t.type=r,t}),this):jd.hasOwnProperty(t)?jd[t]:void 0;var r,n}var jd={identity:function t(){var e=[0,1];function r(t){return+t}return(r.invert=r).domain=r.range=function(t){return arguments.length?(e=Ql.call(t,Wf),r):e.slice()},r.copy=function(){return t().domain(e)},pd(r)},linear:md,log:function t(){var e=Zf(vd,yd).domain([1,10]),r=e.domain,n=10,i=bd(10),o=xd(10);function s(){return i=bd(n),o=xd(n),r()[0]<0&&(i=_d(i),o=_d(o)),e}return e.base=function(t){return arguments.length?(n=+t,s()):n},e.domain=function(t){return arguments.length?(r(t),s()):r()},e.ticks=function(t){var e,s=r(),a=s[0],u=s[s.length-1];(e=u<a)&&(f=a,a=u,u=f);var c,l,h,f=i(a),d=i(u),p=null==t?10:+t,m=[];if(!(n%1)&&d-f<p){if(f=Math.round(f)-1,d=Math.round(d)+1,0<a){for(;f<d;++f)for(l=1,c=o(f);l<n;++l)if(!((h=c*l)<a)){if(u<h)break;m.push(h)}}else for(;f<d;++f)for(l=n-1,c=o(f);1<=l;--l)if(!((h=c*l)<a)){if(u<h)break;m.push(h)}}else m=hi(f,d,Math.min(d-f,p)).map(o);return e?m.reverse():m},e.tickFormat=function(t,r){if(null==r&&(r=10===n?\".0e\":\",\"),\"function\"!=typeof r&&(r=ad(r)),t===1/0)return r;null==t&&(t=10);var s=Math.max(1,n*t/e.ticks().length);return function(t){var e=t/o(Math.round(i(t)));return e*n<n-.5&&(e*=n),e<=s?r(t):\"\"}},e.nice=function(){return r(gd(r(),{floor:function(t){return o(Math.floor(i(t)))},ceil:function(t){return o(Math.ceil(i(t)))}}))},e.copy=function(){return Jf(e,t().base(n))},e},ordinal:eh,pow:Sd,sqrt:function(){return Sd().exponent(.5)},quantile:function t(){var e=[],r=[],n=[];function i(){var t=0,i=Math.max(1,r.length);for(n=new Array(i-1);++t<i;)n[t-1]=mi(e,t/i);return o}function o(t){if(!isNaN(t=+t))return r[ni(n,t)]}return o.invertExtent=function(t){var i=r.indexOf(t);return i<0?[NaN,NaN]:[0<i?n[i-1]:e[0],i<n.length?n[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var r,n=0,o=t.length;n<o;++n)null==(r=t[n])||isNaN(r=+r)||e.push(r);return e.sort(ti),i()},o.range=function(t){return arguments.length?(r=Kl.call(t),i()):r.slice()},o.quantiles=function(){return n.slice()},o.copy=function(){return t().domain(e).range(r)},o},quantize:function t(){var e=0,r=1,n=1,i=[.5],o=[0,1];function s(t){if(t<=t)return o[ni(i,t,0,n)]}function a(){var t=-1;for(i=new Array(n);++t<n;)i[t]=((t+1)*r-(t-n)*e)/(n+1);return s}return s.domain=function(t){return arguments.length?(e=+t[0],r=+t[1],a()):[e,r]},s.range=function(t){return arguments.length?(n=(o=Kl.call(t)).length-1,a()):o.slice()},s.invertExtent=function(t){var s=o.indexOf(t);return s<0?[NaN,NaN]:s<1?[e,i[0]]:n<=s?[i[n-1],r]:[i[s-1],i[s]]},s.copy=function(){return t().domain([e,r]).range(o)},pd(s)},threshold:function t(){var e=[.5],r=[0,1],n=1;function i(t){if(t<=t)return r[ni(e,t,0,n)]}return i.domain=function(t){return arguments.length?(e=Kl.call(t),n=Math.min(e.length,r.length-1),i):e.slice()},i.range=function(t){return arguments.length?(r=Kl.call(t),n=Math.min(e.length,r.length-1),i):r.slice()},i.invertExtent=function(t){var n=r.indexOf(t);return[e[n-1],e[n]]},i.copy=function(){return t().domain(e).range(r)},i},time:function(){return Od(Be,Ve,ze,Ie,Ne,Oe,De,ke,rr).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},utc:function(){return Od(Ze,Je,Ye,We,Ge,He,De,ke,ir).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},band:Nd,point:function(){return function t(e){var r=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return t(r())},e}(Nd().paddingInner(1))},sequential:function t(e){var r=md(),n=0,i=1,o=!1;function s(){var t=r.domain();n=t[0],i=b(t)-n}function a(t){var r=(t-n)/i;return e(o?Math.max(0,Math.min(1,r)):r)}return a.clamp=function(t){return arguments.length?(o=!!t,a):o},a.domain=function(t){return arguments.length?(r.domain(t),s(),a):r.domain()},a.interpolator=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t().domain(r.domain()).clamp(o).interpolator(e)},a.ticks=function(t){return r.ticks(t)},a.tickFormat=function(t,e){return r.tickFormat(t,e)},a.nice=function(t){return r.nice(t),s(),a},a},\"bin-linear\":function t(){var e=md(),r=[];function n(t){return e(t)}return n.domain=function(t){return arguments.length?(r=zd(t),e.domain([r[0],b(r)]),n):r.slice()},n.range=function(t){return arguments.length?(e.range(t),n):e.range()},n.rangeRound=function(t){return arguments.length?(e.rangeRound(t),n):e.rangeRound()},n.interpolate=function(t){return arguments.length?(e.interpolate(t),n):e.interpolate()},n.invert=function(t){return e.invert(t)},n.ticks=function(t){var e=r.length,i=~~(e/(t||e));return i<2?n.domain():r.filter(function(t,e){return!(e%i)})},n.tickFormat=function(){return e.tickFormat.apply(e,arguments)},n.copy=function(){return t().domain(n.domain()).range(n.range())},n},\"bin-ordinal\":function t(){var e=[],r=[];function n(t){return null==t||t!=t?void 0:r[(ni(e,t)-1)%r.length]}return n.domain=function(t){return arguments.length?(e=zd(t),n):e.slice()},n.range=function(t){return arguments.length?(r=Fd.call(t),n):r.slice()},n.copy=function(){return t().domain(n.domain()).range(n.range())},n}};for(var Vd in jd)Ud(Vd,jd[Vd]);function Bd(t){for(var e=t.length/6|0,r=new Array(e),n=0;n<e;)r[n]=\"#\"+t.slice(6*n,6*++n);return r}var Hd=Bd(\"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\"),Gd=Bd(\"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\"),Wd=Bd(\"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9\"),qd=Bd(\"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac\"),Yd=Bd(\"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5\"),Xd=new Array(3).concat(\"67a9cff7f7f7f1a340\",\"0571b092c5defdb863e66101\",\"0571b092c5def7f7f7fdb863e66101\",\"2166ac67a9cfd1e5f0fee0b6f1a340b35806\",\"2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806\",\"2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806\",\"2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806\",\"0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08\",\"0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08\").map(Bd),$d=function(t){for(var e=t.length/6|0,r=new Array(e),n=0;n<e;)r[n]=\"#\"+t.slice(6*n,6*++n);return r},Jd=$d(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\"),Zd=$d(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\"),Qd=$d(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\"),Kd=$d(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\"),tp=$d(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\"),ep=$d(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\"),rp=$d(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\"),np=$d(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\"),ip=$d(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\"),op=function(t){return mf(t[t.length-1])},sp=new Array(3).concat(\"d8b365f5f5f55ab4ac\",\"a6611adfc27d80cdc1018571\",\"a6611adfc27df5f5f580cdc1018571\",\"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\").map($d),ap=op(sp),up=new Array(3).concat(\"af8dc3f7f7f77fbf7b\",\"7b3294c2a5cfa6dba0008837\",\"7b3294c2a5cff7f7f7a6dba0008837\",\"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\").map($d),cp=op(up),lp=new Array(3).concat(\"e9a3c9f7f7f7a1d76a\",\"d01c8bf1b6dab8e1864dac26\",\"d01c8bf1b6daf7f7f7b8e1864dac26\",\"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\").map($d),hp=op(lp),fp=new Array(3).concat(\"998ec3f7f7f7f1a340\",\"5e3c99b2abd2fdb863e66101\",\"5e3c99b2abd2f7f7f7fdb863e66101\",\"542788998ec3d8daebfee0b6f1a340b35806\",\"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\").map($d),dp=op(fp),pp=new Array(3).concat(\"ef8a62f7f7f767a9cf\",\"ca0020f4a58292c5de0571b0\",\"ca0020f4a582f7f7f792c5de0571b0\",\"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\").map($d),mp=op(pp),gp=new Array(3).concat(\"ef8a62ffffff999999\",\"ca0020f4a582bababa404040\",\"ca0020f4a582ffffffbababa404040\",\"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\").map($d),vp=op(gp),yp=new Array(3).concat(\"fc8d59ffffbf91bfdb\",\"d7191cfdae61abd9e92c7bb6\",\"d7191cfdae61ffffbfabd9e92c7bb6\",\"d73027fc8d59fee090e0f3f891bfdb4575b4\",\"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\").map($d),wp=op(yp),xp=new Array(3).concat(\"fc8d59ffffbf91cf60\",\"d7191cfdae61a6d96a1a9641\",\"d7191cfdae61ffffbfa6d96a1a9641\",\"d73027fc8d59fee08bd9ef8b91cf601a9850\",\"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\").map($d),bp=op(xp),_p=new Array(3).concat(\"fc8d59ffffbf99d594\",\"d7191cfdae61abdda42b83ba\",\"d7191cfdae61ffffbfabdda42b83ba\",\"d53e4ffc8d59fee08be6f59899d5943288bd\",\"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\").map($d),Mp=op(_p),Sp=new Array(3).concat(\"e5f5f999d8c92ca25f\",\"edf8fbb2e2e266c2a4238b45\",\"edf8fbb2e2e266c2a42ca25f006d2c\",\"edf8fbccece699d8c966c2a42ca25f006d2c\",\"edf8fbccece699d8c966c2a441ae76238b45005824\",\"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\").map($d),Ep=op(Sp),Tp=new Array(3).concat(\"e0ecf49ebcda8856a7\",\"edf8fbb3cde38c96c688419d\",\"edf8fbb3cde38c96c68856a7810f7c\",\"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\").map($d),Ap=op(Tp),Rp=new Array(3).concat(\"e0f3dba8ddb543a2ca\",\"f0f9e8bae4bc7bccc42b8cbe\",\"f0f9e8bae4bc7bccc443a2ca0868ac\",\"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\").map($d),kp=op(Rp),Cp=new Array(3).concat(\"fee8c8fdbb84e34a33\",\"fef0d9fdcc8afc8d59d7301f\",\"fef0d9fdcc8afc8d59e34a33b30000\",\"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\").map($d),Lp=op(Cp),Pp=new Array(3).concat(\"ece2f0a6bddb1c9099\",\"f6eff7bdc9e167a9cf02818a\",\"f6eff7bdc9e167a9cf1c9099016c59\",\"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\").map($d),Dp=op(Pp),Op=new Array(3).concat(\"ece7f2a6bddb2b8cbe\",\"f1eef6bdc9e174a9cf0570b0\",\"f1eef6bdc9e174a9cf2b8cbe045a8d\",\"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\").map($d),Np=op(Op),Ip=new Array(3).concat(\"e7e1efc994c7dd1c77\",\"f1eef6d7b5d8df65b0ce1256\",\"f1eef6d7b5d8df65b0dd1c77980043\",\"f1eef6d4b9dac994c7df65b0dd1c77980043\",\"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\").map($d),Fp=op(Ip),zp=new Array(3).concat(\"fde0ddfa9fb5c51b8a\",\"feebe2fbb4b9f768a1ae017e\",\"feebe2fbb4b9f768a1c51b8a7a0177\",\"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\").map($d),Up=op(zp),jp=new Array(3).concat(\"edf8b17fcdbb2c7fb8\",\"ffffcca1dab441b6c4225ea8\",\"ffffcca1dab441b6c42c7fb8253494\",\"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\").map($d),Vp=op(jp),Bp=new Array(3).concat(\"f7fcb9addd8e31a354\",\"ffffccc2e69978c679238443\",\"ffffccc2e69978c67931a354006837\",\"ffffccd9f0a3addd8e78c67931a354006837\",\"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\").map($d),Hp=op(Bp),Gp=new Array(3).concat(\"fff7bcfec44fd95f0e\",\"ffffd4fed98efe9929cc4c02\",\"ffffd4fed98efe9929d95f0e993404\",\"ffffd4fee391fec44ffe9929d95f0e993404\",\"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\").map($d),Wp=op(Gp),qp=new Array(3).concat(\"ffeda0feb24cf03b20\",\"ffffb2fecc5cfd8d3ce31a1c\",\"ffffb2fecc5cfd8d3cf03b20bd0026\",\"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\").map($d),Yp=op(qp),Xp=new Array(3).concat(\"deebf79ecae13182bd\",\"eff3ffbdd7e76baed62171b5\",\"eff3ffbdd7e76baed63182bd08519c\",\"eff3ffc6dbef9ecae16baed63182bd08519c\",\"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\").map($d),$p=op(Xp),Jp=new Array(3).concat(\"e5f5e0a1d99b31a354\",\"edf8e9bae4b374c476238b45\",\"edf8e9bae4b374c47631a354006d2c\",\"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\").map($d),Zp=op(Jp),Qp=new Array(3).concat(\"f0f0f0bdbdbd636363\",\"f7f7f7cccccc969696525252\",\"f7f7f7cccccc969696636363252525\",\"f7f7f7d9d9d9bdbdbd969696636363252525\",\"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\").map($d),Kp=op(Qp),tm=new Array(3).concat(\"efedf5bcbddc756bb1\",\"f2f0f7cbc9e29e9ac86a51a3\",\"f2f0f7cbc9e29e9ac8756bb154278f\",\"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\").map($d),em=op(tm),rm=new Array(3).concat(\"fee0d2fc9272de2d26\",\"fee5d9fcae91fb6a4acb181d\",\"fee5d9fcae91fb6a4ade2d26a50f15\",\"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\").map($d),nm=op(rm),im=new Array(3).concat(\"fee6cefdae6be6550d\",\"feeddefdbe85fd8d3cd94701\",\"feeddefdbe85fd8d3ce6550da63603\",\"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\").map($d),om=op(im),sm=Bf(Kh(300,.5,0),Kh(-240,.5,1)),am=Bf(Kh(-100,.75,.35),Kh(80,1.5,.8)),um=Bf(Kh(260,.75,.35),Kh(80,1.5,.8)),cm=Kh();function lm(t){var e=t.length;return function(r){return t[Math.max(0,Math.min(e-1,Math.floor(r*e)))]}}var hm=lm($d(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\")),fm=lm($d(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\")),dm=lm($d(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\")),pm=lm($d(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\")),mm=Object.freeze({schemeCategory10:Jd,schemeAccent:Zd,schemeDark2:Qd,schemePaired:Kd,schemePastel1:tp,schemePastel2:ep,schemeSet1:rp,schemeSet2:np,schemeSet3:ip,interpolateBrBG:ap,schemeBrBG:sp,interpolatePRGn:cp,schemePRGn:up,interpolatePiYG:hp,schemePiYG:lp,interpolatePuOr:dp,schemePuOr:fp,interpolateRdBu:mp,schemeRdBu:pp,interpolateRdGy:vp,schemeRdGy:gp,interpolateRdYlBu:wp,schemeRdYlBu:yp,interpolateRdYlGn:bp,schemeRdYlGn:xp,interpolateSpectral:Mp,schemeSpectral:_p,interpolateBuGn:Ep,schemeBuGn:Sp,interpolateBuPu:Ap,schemeBuPu:Tp,interpolateGnBu:kp,schemeGnBu:Rp,interpolateOrRd:Lp,schemeOrRd:Cp,interpolatePuBuGn:Dp,schemePuBuGn:Pp,interpolatePuBu:Np,schemePuBu:Op,interpolatePuRd:Fp,schemePuRd:Ip,interpolateRdPu:Up,schemeRdPu:zp,interpolateYlGnBu:Vp,schemeYlGnBu:jp,interpolateYlGn:Hp,schemeYlGn:Bp,interpolateYlOrBr:Wp,schemeYlOrBr:Gp,interpolateYlOrRd:Yp,schemeYlOrRd:qp,interpolateBlues:$p,schemeBlues:Xp,interpolateGreens:Zp,schemeGreens:Jp,interpolateGreys:Kp,schemeGreys:Qp,interpolatePurples:em,schemePurples:tm,interpolateReds:nm,schemeReds:rm,interpolateOranges:om,schemeOranges:im,interpolateCubehelixDefault:sm,interpolateRainbow:function(t){(t<0||1<t)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return cm.h=360*t-100,cm.s=1.5-1.5*e,cm.l=.8-.9*e,cm+\"\"},interpolateWarm:am,interpolateCool:um,interpolateViridis:hm,interpolateMagma:fm,interpolateInferno:dm,interpolatePlasma:pm}),gm={blueorange:Xd},vm={category10:Jd,accent:Zd,dark2:Qd,paired:Kd,pastel1:tp,pastel2:ep,set1:rp,set2:np,set3:ip,category20:Hd,category20b:Gd,category20c:Wd,tableau10:qd,tableau20:Yd,viridis:hm,magma:fm,inferno:dm,plasma:pm,blueorange:mf(b(Xd))};function ym(t,e){vm[t]=mm[\"interpolate\"+e],gm[t]=mm[\"scheme\"+e]}ym(\"blues\",\"Blues\"),ym(\"greens\",\"Greens\"),ym(\"greys\",\"Greys\"),ym(\"purples\",\"Purples\"),ym(\"reds\",\"Reds\"),ym(\"oranges\",\"Oranges\"),ym(\"brownbluegreen\",\"BrBG\"),ym(\"purplegreen\",\"PRGn\"),ym(\"pinkyellowgreen\",\"PiYG\"),ym(\"purpleorange\",\"PuOr\"),ym(\"redblue\",\"RdBu\"),ym(\"redgrey\",\"RdGy\"),ym(\"redyellowblue\",\"RdYlBu\"),ym(\"redyellowgreen\",\"RdYlGn\"),ym(\"spectral\",\"Spectral\"),ym(\"bluegreen\",\"BuGn\"),ym(\"bluepurple\",\"BuPu\"),ym(\"greenblue\",\"GnBu\"),ym(\"orangered\",\"OrRd\"),ym(\"purplebluegreen\",\"PuBuGn\"),ym(\"purpleblue\",\"PuBu\"),ym(\"purplered\",\"PuRd\"),ym(\"redpurple\",\"RdPu\"),ym(\"yellowgreenblue\",\"YlGnBu\"),ym(\"yellowgreen\",\"YlGn\"),ym(\"yelloworangebrown\",\"YlOrBr\"),ym(\"yelloworangered\",\"YlOrRd\");var wm=function(t,e){if(1<arguments.length)return vm[t]=e,this;var r=t.split(\"-\");return t=r[0],(r=+r[1]+1)&&gm.hasOwnProperty(t)?gm[t][r-1]:!r&&vm.hasOwnProperty(t)?vm[t]:void 0};function xm(t,e){var r=e[0],n=b(e)-r;return function(e){return t(r+e*n)}}function bm(t,e,r){var n=r-e;return n?\"linear\"===t.type||\"sequential\"===t.type?function(t){return(t-e)/n}:t.copy().domain([e,r]).range([0,1]).interpolate(_m):F(0)}function _m(t,e){var r=e-t;return function(e){return t+e*r}}function Mm(t,e){var r,n=Hf[(r=t,\"interpolate\"+r.toLowerCase().split(\"-\").map(function(t){return t[0].toUpperCase()+t.slice(1)}).join(\"\"))];return null!=e&&n&&n.gamma?n.gamma(e):n}var Sm={millisecond:ke,second:De,minute:Oe,hour:Ne,day:Ie,week:ze,month:Ve,year:Be},Em={millisecond:ke,second:De,minute:He,hour:Ge,day:We,week:Ye,month:Je,year:Ze};function Tm(t){return Sm.hasOwnProperty(t)&&Sm[t]}function Am(t){return Em.hasOwnProperty(t)&&Em[t]}function Rm(t,e){var r;return a(e)&&(r=e.step,e=e.interval),u(e)&&(e=\"time\"===t.type?Tm(e):\"utc\"===t.type?Am(e):i(\"Only time and utc scales accept interval strings.\"),r&&(e=e.every(r))),e}function km(t,e,r){var n=t.range(),i=n[0],o=b(n);if(o<i&&(n=o,o=i,i=n),e=e.filter(function(e){return!((e=t(e))<i||o<e)}),0<r&&1<e.length){for(var s=[e[0],b(e)];e.length>r&&3<=e.length;)e=e.filter(function(t,e){return!(e%2)});e.length<3&&(e=s)}return e}function Cm(t,e){return t.ticks?t.ticks(e):t.domain()}function Lm(t,e,r){var n,i,o=t.tickFormat?t.tickFormat(e,r):String;return t.type===Ul?(n=o,i=function(t){var e,n,i=id(r||\",\");if(null==i.precision){switch(i.precision=12,i.type){case\"%\":i.precision-=2;break;case\"e\":i.precision-=1}return e=ad(i),n=ad(\".1f\")(1)[1],function(t){var r,i,o=e(t),s=o.indexOf(n);if(s<0)return o;for(r=function(t,e){var r,n=t.lastIndexOf(\"e\");if(0<n)return n;for(n=t.length;--n>e;)if(48<=(r=t.charCodeAt(n))&&r<=57)return n+1}(o,s),i=r<o.length?o.slice(r):\"\";--r>s;)if(\"0\"!==o[r]){++r;break}return o.slice(0,r)+i}}return ad(i)}(),function(t){return n(t)?i(t):\"\"}):o}function Pm(t){zn.call(this,null,t)}function Dm(t){zn.call(this,null,t)}function Om(){return ht({})}function Nm(t){return t.exit}function Im(t){zn.call(this,null,t)}H(Pm,zn).transform=function(t,e){if(this.value&&!t.modified())return e.StopPropagation;var r=e.fork(e.NO_SOURCE|e.NO_FIELDS),n=this.value,i=t.scale,o=null==t.count?t.values?t.values.length:10:Rm(i,t.count),s=t.format||Lm(i,o,t.formatSpecifier),a=t.values?km(i,t.values,o):Cm(i,o);return n&&(r.rem=n),n=a.map(function(t,e){return ht({index:e/(a.length-1),value:t,label:s(t)})}),t.extra&&n.push(ht({index:-1,extra:{value:n[0].value},label:\"\"})),r.source=n,r.add=n,this.value=n,r},H(Dm,zn).transform=function(t,e){var r=e.dataflow,n=e.fork(e.NO_SOURCE|e.NO_FIELDS),o=t.item||Om,a=t.key||ct,u=this.value;return s(n.encode)&&(n.encode=null),u&&(t.modified(\"key\")||e.modified(a))&&i(\"DataJoin does not support modified key function or fields.\"),u||(e=e.addAll(),this.value=u=B().test(Nm),u.lookup=function(t){return u.get(a(t))}),e.visit(e.ADD,function(t){var e=a(t),r=u.get(e);r?r.exit?(u.empty--,n.add.push(r)):n.mod.push(r):(u.set(e,r=o(t)),n.add.push(r)),r.datum=t,r.exit=!1}),e.visit(e.MOD,function(t){var e=a(t),r=u.get(e);r&&(r.datum=t,n.mod.push(r))}),e.visit(e.REM,function(t){var e=a(t),r=u.get(e);t!==r.datum||r.exit||(n.rem.push(r),r.exit=!0,++u.empty)}),e.changed(e.ADD_MOD)&&n.modifies(\"datum\"),t.clean&&u.empty>r.cleanThreshold&&r.runAfter(u.clean),n},H(Im,zn).transform=function(t,e){var r=e.fork(e.ADD_REM),n=t.encoders,i=e.encode;if(s(i)){if(!r.changed()&&!i.every(function(t){return n[t]}))return e.StopPropagation;i=i[0],r.encode=null}var o=\"enter\"===i,a=n.update||v,u=n.enter||v,c=n.exit||v,l=(i&&!o?n[i]:a)||v;if(e.changed(e.ADD)&&(e.visit(e.ADD,function(e){u(e,t),a(e,t),l!==v&&l!==a&&l(e,t)}),r.modifies(u.output),r.modifies(a.output),l!==v&&l!==a&&r.modifies(l.output)),e.changed(e.REM)&&c!==v&&(e.visit(e.REM,function(e){c(e,t)}),r.modifies(c.output)),o||l!==v){var h=e.MOD|(t.modified()?e.REFLOW:0);o?(e.visit(h,function(e){var n=u(e,t);(l(e,t)||n)&&r.mod.push(e)}),r.mod.length&&r.modifies(u.output)):e.visit(h,function(e){l(e,t)&&r.mod.push(e)}),r.mod.length&&r.modifies(l.output)}return r.changed()?r:e.StopPropagation};var Fm={};function zm(t){var e=t.domain();return e.max=e.pop(),e}function Um(t,e){return isFinite(t)?e(t):null}function jm(t){zn.call(this,[],t)}Fm[Hl]=function(t){var e=[-1/0].concat(t.quantiles());return e.max=1/0,e},Fm[Gl]=function(t){var e=t.domain(),r=e[0],n=b(e),i=t.range().length,o=new Array(i),s=0;for(o[0]=-1/0;++s<i;)o[s]=(s*n-(s-i)*r)/i;return o.max=1/0,o},Fm[Wl]=function(t){var e=[-1/0].concat(t.domain());return e.max=1/0,e},Fm[\"bin-linear\"]=zm,Fm[ql]=zm,H(jm,zn).transform=function(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var r=e.fork(e.NO_SOURCE|e.NO_FIELDS),n=0,i=this.value,o=\"gradient\"===t.type,s=t.scale,a=null==t.count?5:Rm(s,t.count),u=t.format||Lm(s,a,t.formatSpecifier),c=t.values||function(t,e,r){if(o)return t.domain();var n=Fm[t.type];return n?n(t):Cm(t,e)}(s,a);if(u=function(t,e){return Fm[t.type]?(n=u,function(t,e,r){var i=r[e+1]||r.max||1/0,o=Um(t,n),s=Um(i,n);return o&&s?o+\"\\u2013\"+s:s?\"< \"+s:\"\\u2265 \"+o}):(r=u,function(t){return r(t)});var r,n}(s),i&&(r.rem=i),o)var l=t.values?s.domain():c,h=bm(s,l[0],b(l));else{var f,d=t.size;N(d)?(t.values||0!==s(c[0])||(c=c.slice(1)),f=c.reduce(function(e,r){return Math.max(e,d(r,t))},0)):d=F(f=d||8)}return i=c.map(function(e,r){var i=ht({index:r,label:u(e,r,c),value:e});return o?i.perc=h(e):(i.offset=f,i.size=d(e,t),i.total=Math.round(n),n+=i.size),i}),r.source=i,r.add=i,this.value=i,r};var Vm=B({line:Ym,\"line-radial\":function(t,e,r,n){return Ym(e*Math.cos(t),e*Math.sin(t),n*Math.cos(r),n*Math.sin(r))},arc:Xm,\"arc-radial\":function(t,e,r,n){return Xm(e*Math.cos(t),e*Math.sin(t),n*Math.cos(r),n*Math.sin(r))},curve:$m,\"curve-radial\":function(t,e,r,n){return $m(e*Math.cos(t),e*Math.sin(t),n*Math.cos(r),n*Math.sin(r))},\"orthogonal-horizontal\":function(t,e,r,n){return\"M\"+t+\",\"+e+\"V\"+n+\"H\"+r},\"orthogonal-vertical\":function(t,e,r,n){return\"M\"+t+\",\"+e+\"H\"+r+\"V\"+n},\"orthogonal-radial\":function(t,e,r,n){var i=Math.cos(t),o=Math.sin(t),s=Math.cos(r),a=Math.sin(r);return\"M\"+e*i+\",\"+e*o+\"A\"+e+\",\"+e+\" 0 0,\"+((Math.abs(r-t)>Math.PI?r<=t:t<r)?1:0)+\" \"+e*s+\",\"+e*a+\"L\"+n*s+\",\"+n*a},\"diagonal-horizontal\":function(t,e,r,n){var i=(t+r)/2;return\"M\"+t+\",\"+e+\"C\"+i+\",\"+e+\" \"+i+\",\"+n+\" \"+r+\",\"+n},\"diagonal-vertical\":function(t,e,r,n){var i=(e+n)/2;return\"M\"+t+\",\"+e+\"C\"+t+\",\"+i+\" \"+r+\",\"+i+\" \"+r+\",\"+n},\"diagonal-radial\":function(t,e,r,n){var i=Math.cos(t),o=Math.sin(t),s=Math.cos(r),a=Math.sin(r),u=(e+n)/2;return\"M\"+e*i+\",\"+e*o+\"C\"+u*i+\",\"+u*o+\" \"+u*s+\",\"+u*a+\" \"+n*s+\",\"+n*a}});function Bm(t){return t.source.x}function Hm(t){return t.source.y}function Gm(t){return t.target.x}function Wm(t){return t.target.y}function qm(t){zn.call(this,{},t)}function Ym(t,e,r,n){return\"M\"+t+\",\"+e+\"L\"+r+\",\"+n}function Xm(t,e,r,n){var i=r-t,o=n-e,s=Math.sqrt(i*i+o*o)/2;return\"M\"+t+\",\"+e+\"A\"+s+\",\"+s+\" \"+180*Math.atan2(o,i)/Math.PI+\" 0 1 \"+r+\",\"+n}function $m(t,e,r,n){var i=r-t,o=n-e,s=.2*(i+o),a=.2*(o-i);return\"M\"+t+\",\"+e+\"C\"+(t+s)+\",\"+(e+a)+\" \"+(r+a)+\",\"+(n-s)+\" \"+r+\",\"+n}function Jm(t){zn.call(this,null,t)}qm.Definition={type:\"LinkPath\",metadata:{modifies:!0},params:[{name:\"sourceX\",type:\"field\",default:\"source.x\"},{name:\"sourceY\",type:\"field\",default:\"source.y\"},{name:\"targetX\",type:\"field\",default:\"target.x\"},{name:\"targetY\",type:\"field\",default:\"target.y\"},{name:\"orient\",type:\"enum\",default:\"vertical\",values:[\"horizontal\",\"vertical\",\"radial\"]},{name:\"shape\",type:\"enum\",default:\"line\",values:[\"line\",\"arc\",\"curve\",\"diagonal\",\"orthogonal\"]},{name:\"as\",type:\"string\",default:\"path\"}]},H(qm,zn).transform=function(t,e){var r=t.sourceX||Bm,n=t.sourceY||Hm,o=t.targetX||Gm,s=t.targetY||Wm,a=t.as||\"path\",u=t.shape||\"line\",c=Vm.get(u+\"-\"+(t.orient||\"vertical\"))||Vm.get(u);return c||i(\"LinkPath unsupported type: \"+t.shape+(t.orient?\"-\"+t.orient:\"\")),e.visit(e.SOURCE,function(t){t[a]=c(r(t),n(t),o(t),s(t))}),e.reflow(t.modified()).modifies(a)},Jm.Definition={type:\"Pie\",metadata:{modifies:!0},params:[{name:\"field\",type:\"field\"},{name:\"startAngle\",type:\"number\",default:0},{name:\"endAngle\",type:\"number\",default:6.283185307179586},{name:\"sort\",type:\"boolean\",default:!1},{name:\"as\",type:\"string\",array:!0,length:2,default:[\"startAngle\",\"endAngle\"]}]},H(Jm,zn).transform=function(t,e){var r,n,i,o=t.as||[\"startAngle\",\"endAngle\"],s=o[0],a=o[1],u=t.startAngle||0,c=null!=t.endAngle?t.endAngle:2*Math.PI,l=e.source,h=l.map(t.field||m),f=h.length,d=u,p=(c-u)/function(t,e){for(var r,n=t.length,i=-1,o=0;++i<n;)(r=+t[i])&&(o+=r);return o}(h),g=ai(f);for(t.sort&&g.sort(function(t,e){return h[t]-h[e]}),r=0;r<f;++r)i=h[g[r]],(n=l[g[r]])[s]=d,n[a]=d+=i*p;return this.value=h,e.reflow(t.modified()).modifies(o)};var Zm=rt([Vl,\"pow\",jl]),Qm=rt([Vl,Ul,\"pow\",jl,\"time\",\"utc\"]),Km=rt([\"set\",\"modified\",\"clear\",\"type\",\"scheme\",\"schemeExtent\",\"schemeCount\",\"domain\",\"domainMin\",\"domainMid\",\"domainMax\",\"domainRaw\",\"nice\",\"zero\",\"range\",\"rangeStep\",\"round\",\"reverse\",\"interpolate\",\"interpolateGamma\"]);function tg(t){zn.call(this,null,t),this.modified(!0)}function eg(t,e,r){return N(t)&&(e||r)?xm(t,rg(e||[0,1],r)):t}function rg(t,e){return e?t.slice().reverse():t}function ng(t){zn.call(this,null,t)}function ig(t){zn.call(this,null,t)}function og(t,e,r,n,i){for(var o,s=(e-t.sum)/2,a=t.length,u=0;u<a;++u)(o=t[u])[n]=s,o[i]=s+=Math.abs(r(o))}function sg(t,e,r,n,i){for(var o,s=1/t.sum,a=0,u=t.length,c=0,l=0;c<u;++c)(o=t[c])[n]=a,o[i]=a=s*(l+=Math.abs(r(o)))}function ag(t,e,r,n,i){for(var o,s,a=0,u=0,c=t.length,l=0;l<c;++l)(o=r(s=t[l]))<0?(s[n]=u,s[i]=u+=o):(s[n]=a,s[i]=a+=o)}H(tg,zn).transform=function(t,e){var r,n=e.dataflow,o=this.value;for(r in o&&!t.modified(\"type\")||(this.value=o=Ud((t.type||Vl).toLowerCase())()),t)if(!Km[r]){if(\"padding\"===r&&Qm[o.type])continue;N(o[r])?o[r](t[r]):n.warn(\"Unsupported scale property: \"+r)}return function(t,e,r){var n=e.round||!1,o=e.range;if(null!=e.rangeStep)o=function(t,e,r){return\"band\"!==t&&\"point\"!==t&&i(\"Only band and point scales support rangeStep.\"),[0,e.rangeStep*Jl(r,\"point\"===t?1:(null!=e.paddingInner?e.paddingInner:e.padding)||0,(null!=e.paddingOuter?e.paddingOuter:e.padding)||0)]}(t.type,e,r);else if(e.scheme){if(o=function(t,e,r){var n,o=e.scheme.toLowerCase(),s=wm(o),a=e.schemeExtent;return s||i(\"Unrecognized scheme name: \"+e.scheme),r=t===Wl?r+1:t===ql?r-1:t===Hl||t===Gl?+e.schemeCount||5:r,t===Yl?eg(s,a,e.reverse):!a&&(n=wm(o+\"-\"+r))?n:N(s)?function(t,e){for(var r=new Array(e),n=e-1||1,i=0;i<e;++i)r[i]=t(i/n);return r}(eg(s,a),r):t===Bl?s:s.slice(0,r)}(t.type,e,r),N(o))return t.interpolator(o)}else if(o&&t.type===Yl)return t.interpolator(mf(rg(o,e.reverse)));o&&e.interpolate&&t.interpolate?t.interpolate(Mm(e.interpolate,e.interpolateGamma)):N(t.round)?t.round(n):N(t.rangeRound)&&t.interpolate(n?Ef:Sf),o&&t.range(rg(o,e.reverse))}(o,t,function(t,e,r){var n,i=(n=e.domainRaw)?(t.domain(n),n.length):-1;if(-1<i)return i;var o,s,a,u,c,l,h,f,d,p,m=e.domain,g=t.type,v=e.zero||void 0===e.zero&&Zm[g];return m?(Qm[g]&&e.padding&&m[0]!==b(m)&&(a=g,u=m,c=e.range,l=e.padding,h=e.exponent,d=(f=Math.abs(b(c)-c[0]))/(f-2*l),p=a===Ul?P(u,null,d):a===jl?D(u,null,d,.5):\"pow\"===a?D(u,null,d,h):L(u,null,d),(u=u.slice())[0]=p[0],u[u.length-1]=p[1],m=u),(v||null!=e.domainMin||null!=e.domainMax||null!=e.domainMid)&&(o=(m=m.slice()).length-1||1,v&&(0<m[0]&&(m[0]=0),m[o]<0&&(m[o]=0)),null!=e.domainMin&&(m[0]=e.domainMin),null!=e.domainMax&&(m[o]=e.domainMax),null!=e.domainMid&&(((s=e.domainMid)<m[0]||s>m[o])&&r.warn(\"Scale domainMid exceeds domain min or max.\",s),m.splice(o,0,s))),t.domain(m),g===Bl&&t.unknown(void 0),e.nice&&t.nice&&t.nice(!0!==e.nice&&Rm(t,e.nice)||null),m.length):0}(o,t,n)),e.fork(e.NO_SOURCE|e.NO_FIELDS)},H(ng,zn).transform=function(t,e){var r=t.modified(\"sort\")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified(\"datum\");return r&&e.source.sort(t.sort),this.modified(r),e},ig.Definition={type:\"Stack\",metadata:{modifies:!0},params:[{name:\"field\",type:\"field\"},{name:\"groupby\",type:\"field\",array:!0},{name:\"sort\",type:\"compare\"},{name:\"offset\",type:\"enum\",default:\"zero\",values:[\"zero\",\"center\",\"normalize\"]},{name:\"as\",type:\"string\",array:!0,length:2,default:[\"y0\",\"y1\"]}]},H(ig,zn).transform=function(t,e){var r,n,i,o,s=t.as||[\"y0\",\"y1\"],a=s[0],u=s[1],c=t.field||m,l=\"center\"===t.offset?og:\"normalize\"===t.offset?sg:ag;for(n=0,i=(r=function(t,e,r,n){var i,o,s,a,u,c,l,h,f,d=[],p=function(t){return t(u)};if(null==e)d.push(t.slice());else for(i={},o=0,s=t.length;o<s;++o)u=t[o],(l=i[c=e.map(p)])||(i[c]=l=[],d.push(l)),l.push(u);for(f=c=0,a=d.length;c<a;++c){for(h=o=0,s=(l=d[c]).length;o<s;++o)h+=Math.abs(n(l[o]));l.sum=h,f<h&&(f=h),r&&l.sort(r)}return d.max=f,d}(e.source,t.groupby,t.sort,c)).length,o=r.max;n<i;++n)l(r[n],o,c,a,u);return e.reflow(t.modified()).modifies(s)};var ug=Object.freeze({axisticks:Pm,datajoin:Dm,encode:Im,legendentries:jm,linkpath:qm,pie:Jm,scale:tg,sortitems:ng,stack:ig,validTicks:km}),cg=Array.prototype.slice,lg=function(t,e){return t-e},hg=function(t){for(var e=0,r=t.length,n=t[r-1][1]*t[0][0]-t[r-1][0]*t[0][1];++e<r;)n+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return n},fg=function(t){return function(){return t}},dg=function(t,e){for(var r,n=-1,i=e.length;++n<i;)if(r=pg(t,e[n]))return r;return 0};function pg(t,e){for(var r,n,i,o,s,a,u,c,l,h,f=e[0],d=e[1],p=-1,m=0,g=t.length,v=g-1;m<g;v=m++){var y=t[m],w=y[0],x=y[1],b=t[v],_=b[0],M=b[1];if(h=void 0,o=u=y,a=l=e,((s=c=b)[0]-o[0])*(a[1]-o[1])==(a[0]-o[0])*(s[1]-o[1])&&(r=u[h=+(u[0]===c[0])],i=c[h],r<=(n=l[h])&&n<=i||i<=n&&n<=r))return 0;d<x!=d<M&&f<(_-w)*(d-x)/(M-x)+w&&(p=-p)}return p}var mg=function(){},gg=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],vg=function(){var t=1,e=1,r=pi,n=a;function i(t){var e=r(t);if(Array.isArray(e))e=e.slice().sort(lg);else{var n=si(t),i=n[0],s=n[1];e=di(i,s,e),e=ai(Math.floor(i/e)*e,Math.floor(s/e)*e,e)}return e.map(function(e){return o(t,e)})}function o(r,i){var o=[],a=[];return function(r,n,i){var o,a,u,c,l,h=new Array,f=new Array;for(o=a=-1,gg[(u=r[0]>=n)<<1].forEach(d);++o<t-1;)gg[u|(u=r[o+1]>=n)<<1].forEach(d);for(gg[u<<0].forEach(d);++a<e-1;){for(o=-1,gg[(u=r[a*t+t]>=n)<<1|(c=r[a*t]>=n)<<2].forEach(d);++o<t-1;)l=c,gg[u|(u=r[a*t+t+o+1]>=n)<<1|(c=r[a*t+o+1]>=n)<<2|l<<3].forEach(d);gg[u|c<<3].forEach(d)}for(o=-1,gg[(c=r[a*t]>=n)<<2].forEach(d);++o<t-1;)l=c,gg[(c=r[a*t+o+1]>=n)<<2|l<<3].forEach(d);function d(t){var e,r,n=[t[0][0]+o,t[0][1]+a],u=[t[1][0]+o,t[1][1]+a],c=s(n),l=s(u);(e=f[c])?(r=h[l])?(delete f[e.end],delete h[r.start],e===r?(e.ring.push(u),i(e.ring)):h[e.start]=f[r.end]={start:e.start,end:r.end,ring:e.ring.concat(r.ring)}):(delete f[e.end],e.ring.push(u),f[e.end=l]=e):(e=h[l])?(r=f[c])?(delete h[e.start],delete f[r.end],e===r?(e.ring.push(u),i(e.ring)):h[r.start]=f[e.end]={start:r.start,end:e.end,ring:r.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(n),h[e.start=c]=e):h[c]=f[l]={start:c,end:l,ring:[n,u]}}gg[c<<3].forEach(d)}(r,i,function(t){n(t,r,i),0<hg(t)?o.push([t]):a.push(t)}),a.forEach(function(t){for(var e,r=0,n=o.length;r<n;++r)if(-1!==dg((e=o[r])[0],t))return void e.push(t)}),{type:\"MultiPolygon\",value:i,coordinates:o}}function s(e){return 2*e[0]+e[1]*(t+1)*4}function a(r,n,i){r.forEach(function(r){var o,s=r[0],a=r[1],u=0|s,c=0|a,l=n[c*t+u];0<s&&s<t&&u===s&&(r[0]=s+(i-(o=n[c*t+u-1]))/(l-o)-.5),0<a&&a<e&&c===a&&(r[1]=a+(i-(o=n[(c-1)*t+u]))/(l-o)-.5)})}return i.contour=o,i.size=function(r){if(!arguments.length)return[t,e];var n=Math.ceil(r[0]),o=Math.ceil(r[1]);if(!(0<n&&0<o))throw new Error(\"invalid size\");return t=n,e=o,i},i.thresholds=function(t){return arguments.length?(r=\"function\"==typeof t?t:Array.isArray(t)?fg(cg.call(t)):fg(t),i):r},i.smooth=function(t){return arguments.length?(n=t?a:mg,i):n===a},i};function yg(t,e,r){for(var n=t.width,i=t.height,o=1+(r<<1),s=0;s<i;++s)for(var a=0,u=0;a<n+r;++a)a<n&&(u+=t.data[a+s*n]),r<=a&&(o<=a&&(u-=t.data[a-o+s*n]),e.data[a-r+s*n]=u/Math.min(a+1,n-1+o-a,o))}function wg(t,e,r){for(var n=t.width,i=t.height,o=1+(r<<1),s=0;s<n;++s)for(var a=0,u=0;a<i+r;++a)a<i&&(u+=t.data[s+a*n]),r<=a&&(o<=a&&(u-=t.data[s+(a-o)*n]),e.data[s+(a-r)*n]=u/Math.min(a+1,i-1+o-a,o))}function xg(t){return t[0]}function bg(t){return t[1]}var _g=[\"size\",\"smooth\"],Mg=[\"x\",\"y\",\"size\",\"cellSize\",\"bandwidth\"];function Sg(t){zn.call(this,null,t)}Sg.Definition={type:\"Contour\",metadata:{generates:!0},params:[{name:\"size\",type:\"number\",array:!0,length:2,required:!0},{name:\"values\",type:\"number\",array:!0},{name:\"x\",type:\"field\"},{name:\"y\",type:\"field\"},{name:\"cellSize\",type:\"number\"},{name:\"bandwidth\",type:\"number\"},{name:\"count\",type:\"number\"},{name:\"smooth\",type:\"boolean\"},{name:\"nice\",type:\"boolean\",default:!1},{name:\"thresholds\",type:\"number\",array:!0}]},H(Sg,zn).transform=function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var r,n,i,o,s=e.fork(e.NO_SOURCE|e.NO_FIELDS),a=t.count||10;return t.values?(r=vg(),n=_g,i=t.values):(r=function(){var t=xg,e=bg,r=960,n=500,i=20,o=2,s=3*i,a=r+2*s>>o,u=n+2*s>>o,c=fg(20);function l(r){var n=new Float32Array(a*u),l=new Float32Array(a*u);r.forEach(function(r,i,c){var l=t(r,i,c)+s>>o,h=e(r,i,c)+s>>o;0<=l&&l<a&&0<=h&&h<u&&++n[l+h*a]}),yg({width:a,height:u,data:n},{width:a,height:u,data:l},i>>o),wg({width:a,height:u,data:l},{width:a,height:u,data:n},i>>o),yg({width:a,height:u,data:n},{width:a,height:u,data:l},i>>o),wg({width:a,height:u,data:l},{width:a,height:u,data:n},i>>o),yg({width:a,height:u,data:n},{width:a,height:u,data:l},i>>o),wg({width:a,height:u,data:l},{width:a,height:u,data:n},i>>o);var f=c(n);if(!Array.isArray(f)){var d=gi(n);f=di(0,d,f),(f=ai(0,Math.floor(d/f)*f,f)).shift()}return vg().thresholds(f).size([a,u])(n).map(h)}function h(t){return t.value*=Math.pow(2,-2*o),t.coordinates.forEach(f),t}function f(t){t.forEach(d)}function d(t){t.forEach(p)}function p(t){t[0]=t[0]*Math.pow(2,o)-s,t[1]=t[1]*Math.pow(2,o)-s}function m(){return a=r+2*(s=3*i)>>o,u=n+2*s>>o,l}return l.x=function(e){return arguments.length?(t=\"function\"==typeof e?e:fg(+e),l):t},l.y=function(t){return arguments.length?(e=\"function\"==typeof t?t:fg(+t),l):e},l.size=function(t){if(!arguments.length)return[r,n];var e=Math.ceil(t[0]),i=Math.ceil(t[1]);if(!(0<=e||0<=e))throw new Error(\"invalid size\");return r=e,n=i,m()},l.cellSize=function(t){if(!arguments.length)return 1<<o;if(!(1<=(t=+t)))throw new Error(\"invalid cell size\");return o=Math.floor(Math.log(t)/Math.LN2),m()},l.thresholds=function(t){return arguments.length?(c=\"function\"==typeof t?t:Array.isArray(t)?fg(cg.call(t)):fg(t),l):c},l.bandwidth=function(t){if(!arguments.length)return Math.sqrt(i*(i+1));if(!(0<=(t=+t)))throw new Error(\"invalid bandwidth\");return i=Math.round((Math.sqrt(4*t*t+1)-1)/2),m()},l}(),n=Mg,i=e.materialize(e.SOURCE).source),r.thresholds(t.thresholds||(t.nice?a:(o=a,function(t){for(var e=si(t),r=e[0],n=e[1]-r,i=[],s=1;s<=o;++s)i.push(r+n*s/(o+1));return i}))),n.forEach(function(e){null!=t[e]&&r[e](t[e])}),this.value&&(s.rem=this.value),i=i&&i.length?r(i).map(ht):[],this.value=s.source=s.add=i,s};var Eg=\"FeatureCollection\";function Tg(t){zn.call(this,null,t)}Tg.Definition={type:\"GeoJSON\",metadata:{},params:[{name:\"fields\",type:\"field\",array:!0,length:2},{name:\"geojson\",type:\"field\"}]},H(Tg,zn).transform=function(t,e){var r,i=this._features,o=this._points,s=t.fields,a=s&&s[0],u=s&&s[1],c=t.geojson,l=e.ADD;r=t.modified()||e.changed(e.REM)||e.modified(n(c))||a&&e.modified(n(a))||u&&e.modified(n(u)),this.value&&!r||(l=e.SOURCE,this._features=i=[],this._points=o=[]),c&&e.visit(l,function(t){i.push(c(t))}),a&&u&&(e.visit(l,function(t){var e=a(t),r=u(t);null!=e&&null!=r&&(e=+e)===e&&(r=+r)===r&&o.push([e,r])}),i=i.concat({type:\"Feature\",geometry:{type:\"MultiPoint\",coordinates:o}})),this.value={type:Eg,features:i}};var Ag=function(){return new Rg};function Rg(){this.reset()}Rg.prototype={constructor:Rg,reset:function(){this.s=this.t=0},add:function(t){Cg(kg,t,this.t),Cg(this,kg.s,this.s),this.s?this.t+=kg.t:this.s=kg.t},valueOf:function(){return this.s}};var kg=new Rg;function Cg(t,e,r){var n=t.s=e+r,i=n-e;t.t=e-(n-i)+(r-i)}var Lg=1e-6,Pg=Math.PI,Dg=Pg/2,Og=Pg/4,Ng=2*Pg,Ig=180/Pg,Fg=Pg/180,zg=Math.abs,Ug=Math.atan,jg=Math.atan2,Vg=Math.cos,Bg=Math.ceil,Hg=Math.exp,Gg=Math.log,Wg=Math.pow,qg=Math.sin,Yg=Math.sign||function(t){return 0<t?1:t<0?-1:0},Xg=Math.sqrt,$g=Math.tan;function Jg(t){return 1<t?0:t<-1?Pg:Math.acos(t)}function Zg(t){return 1<t?Dg:t<-1?-Dg:Math.asin(t)}function Qg(){}function Kg(t,e){t&&ev.hasOwnProperty(t.type)&&ev[t.type](t,e)}var tv={Feature:function(t,e){Kg(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,i=r.length;++n<i;)Kg(r[n].geometry,e)}},ev={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)e.point((t=r[n])[0],t[1],t[2])},LineString:function(t,e){rv(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)rv(r[n],e,0)},Polygon:function(t,e){nv(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)nv(r[n],e)},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,i=r.length;++n<i;)Kg(r[n],e)}};function rv(t,e,r){var n,i=-1,o=t.length-r;for(e.lineStart();++i<o;)e.point((n=t[i])[0],n[1],n[2]);e.lineEnd()}function nv(t,e){var r=-1,n=t.length;for(e.polygonStart();++r<n;)rv(t[r],e,1);e.polygonEnd()}var iv,ov,sv,av,uv,cv,lv,hv,fv,dv,pv,mv,gv,vv=function(t,e){t&&tv.hasOwnProperty(t.type)?tv[t.type](t,e):Kg(t,e)},yv=Ag(),wv=Ag(),xv={point:Qg,lineStart:Qg,lineEnd:Qg,polygonStart:function(){yv.reset(),xv.lineStart=bv,xv.lineEnd=_v},polygonEnd:function(){var t=+yv;wv.add(t<0?Ng+t:t),this.lineStart=this.lineEnd=this.point=Qg},sphere:function(){wv.add(Ng)}};function bv(){xv.point=Mv}function _v(){Sv(iv,ov)}function Mv(t,e){xv.point=Sv,iv=t,ov=e,sv=t*=Fg,av=Vg(e=(e*=Fg)/2+Og),uv=qg(e)}function Sv(t,e){var r=(t*=Fg)-sv,n=0<=r?1:-1,i=n*r,o=Vg(e=(e*=Fg)/2+Og),s=qg(e),a=uv*s,u=av*o+a*Vg(i),c=a*n*qg(i);yv.add(jg(c,u)),sv=t,av=o,uv=s}function Ev(t){return[jg(t[1],t[0]),Zg(t[2])]}function Tv(t){var e=t[0],r=t[1],n=Vg(r);return[n*Vg(e),n*qg(e),qg(r)]}function Av(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Rv(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function kv(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Cv(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Lv(t){var e=Xg(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Pv,Dv,Ov=Ag(),Nv={point:Iv,lineStart:zv,lineEnd:Uv,polygonStart:function(){Nv.point=jv,Nv.lineStart=Vv,Nv.lineEnd=Bv,Ov.reset(),xv.polygonStart()},polygonEnd:function(){xv.polygonEnd(),Nv.point=Iv,Nv.lineStart=zv,Nv.lineEnd=Uv,yv<0?(cv=-(hv=180),lv=-(fv=90)):Lg<Ov?fv=90:Ov<-Lg&&(lv=-90),Dv[0]=cv,Dv[1]=hv}};function Iv(t,e){Pv.push(Dv=[cv=t,hv=t]),e<lv&&(lv=e),fv<e&&(fv=e)}function Fv(t,e){var r=Tv([t*Fg,e*Fg]);if(gv){var n=Rv(gv,r),i=Rv([n[1],-n[0],0],n);Lv(i),i=Ev(i);var o,s=t-dv,a=0<s?1:-1,u=i[0]*Ig*a,c=180<zg(s);c^(a*dv<u&&u<a*t)?fv<(o=i[1]*Ig)&&(fv=o):c^(a*dv<(u=(u+360)%360-180)&&u<a*t)?(o=-i[1]*Ig)<lv&&(lv=o):(e<lv&&(lv=e),fv<e&&(fv=e)),c?t<dv?Hv(cv,t)>Hv(cv,hv)&&(hv=t):Hv(t,hv)>Hv(cv,hv)&&(cv=t):cv<=hv?(t<cv&&(cv=t),hv<t&&(hv=t)):dv<t?Hv(cv,t)>Hv(cv,hv)&&(hv=t):Hv(t,hv)>Hv(cv,hv)&&(cv=t)}else Pv.push(Dv=[cv=t,hv=t]);e<lv&&(lv=e),fv<e&&(fv=e),gv=r,dv=t}function zv(){Nv.point=Fv}function Uv(){Dv[0]=cv,Dv[1]=hv,Nv.point=Iv,gv=null}function jv(t,e){if(gv){var r=t-dv;Ov.add(180<zg(r)?r+(0<r?360:-360):r)}else pv=t,mv=e;xv.point(t,e),Fv(t,e)}function Vv(){xv.lineStart()}function Bv(){jv(pv,mv),xv.lineEnd(),zg(Ov)>Lg&&(cv=-(hv=180)),Dv[0]=cv,Dv[1]=hv,gv=null}function Hv(t,e){return(e-=t)<0?e+360:e}function Gv(t,e){return t[0]-e[0]}function Wv(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var qv,Yv,Xv,$v,Jv,Zv,Qv,Kv,ty,ey,ry,ny,iy,oy,sy,ay,uy={sphere:Qg,point:cy,lineStart:hy,lineEnd:py,polygonStart:function(){uy.lineStart=my,uy.lineEnd=gy},polygonEnd:function(){uy.lineStart=hy,uy.lineEnd=py}};function cy(t,e){t*=Fg;var r=Vg(e*=Fg);ly(r*Vg(t),r*qg(t),qg(e))}function ly(t,e,r){Xv+=(t-Xv)/++qv,$v+=(e-$v)/qv,Jv+=(r-Jv)/qv}function hy(){uy.point=fy}function fy(t,e){t*=Fg;var r=Vg(e*=Fg);oy=r*Vg(t),sy=r*qg(t),ay=qg(e),uy.point=dy,ly(oy,sy,ay)}function dy(t,e){t*=Fg;var r=Vg(e*=Fg),n=r*Vg(t),i=r*qg(t),o=qg(e),s=jg(Xg((s=sy*o-ay*i)*s+(s=ay*n-oy*o)*s+(s=oy*i-sy*n)*s),oy*n+sy*i+ay*o);Yv+=s,Zv+=s*(oy+(oy=n)),Qv+=s*(sy+(sy=i)),Kv+=s*(ay+(ay=o)),ly(oy,sy,ay)}function py(){uy.point=cy}function my(){uy.point=vy}function gy(){yy(ny,iy),uy.point=cy}function vy(t,e){ny=t,iy=e,t*=Fg,e*=Fg,uy.point=yy;var r=Vg(e);oy=r*Vg(t),sy=r*qg(t),ay=qg(e),ly(oy,sy,ay)}function yy(t,e){t*=Fg;var r=Vg(e*=Fg),n=r*Vg(t),i=r*qg(t),o=qg(e),s=sy*o-ay*i,a=ay*n-oy*o,u=oy*i-sy*n,c=Xg(s*s+a*a+u*u),l=Zg(c),h=c&&-l/c;ty+=h*s,ey+=h*a,ry+=h*u,Yv+=l,Zv+=l*(oy+(oy=n)),Qv+=l*(sy+(sy=i)),Kv+=l*(ay+(ay=o)),ly(oy,sy,ay)}var wy=function(t,e){function r(r,n){return r=t(r,n),e(r[0],r[1])}return t.invert&&e.invert&&(r.invert=function(r,n){return(r=e.invert(r,n))&&t.invert(r[0],r[1])}),r};function xy(t,e){return[Pg<t?t-Ng:t<-Pg?t+Ng:t,e]}function by(t,e,r){return(t%=Ng)?e||r?wy(My(t),Sy(e,r)):My(t):e||r?Sy(e,r):xy}function _y(t){return function(e,r){return[Pg<(e+=t)?e-Ng:e<-Pg?e+Ng:e,r]}}function My(t){var e=_y(t);return e.invert=_y(-t),e}function Sy(t,e){var r=Vg(t),n=qg(t),i=Vg(e),o=qg(e);function s(t,e){var s=Vg(e),a=Vg(t)*s,u=qg(t)*s,c=qg(e),l=c*r+a*n;return[jg(u*i-l*o,a*r-c*n),Zg(l*i+u*o)]}return s.invert=function(t,e){var s=Vg(e),a=Vg(t)*s,u=qg(t)*s,c=qg(e),l=c*i-u*o;return[jg(u*i+c*o,a*r+l*n),Zg(l*r-a*n)]},s}xy.invert=xy;var Ey=function(t){function e(e){return(e=t(e[0]*Fg,e[1]*Fg))[0]*=Ig,e[1]*=Ig,e}return t=by(t[0]*Fg,t[1]*Fg,2<t.length?t[2]*Fg:0),e.invert=function(e){return(e=t.invert(e[0]*Fg,e[1]*Fg))[0]*=Ig,e[1]*=Ig,e},e};function Ty(t,e){(e=Tv(e))[0]-=t,Lv(e);var r=Jg(-e[1]);return((-e[2]<0?-r:r)+Ng-Lg)%Ng}var Ay=function(){var t,e=[];return{point:function(e,r){t.push([e,r])},lineStart:function(){e.push(t=[])},lineEnd:Qg,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}},Ry=function(t,e){return zg(t[0]-e[0])<Lg&&zg(t[1]-e[1])<Lg};function ky(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}var Cy=function(t,e,r,n,i){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,r,n=t[0],s=t[e];if(Ry(n,s)){for(i.lineStart(),o=0;o<e;++o)i.point((n=t[o])[0],n[1]);i.lineEnd()}else a.push(r=new ky(n,t,null,!0)),u.push(r.o=new ky(n,null,r,!1)),a.push(r=new ky(s,t,null,!1)),u.push(r.o=new ky(s,null,r,!0))}}),a.length){for(u.sort(e),Ly(a),Ly(u),o=0,s=u.length;o<s;++o)u[o].e=r=!r;for(var c,l,h=a[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,s=c.length;o<s;++o)i.point((l=c[o])[0],l[1]);else n(f.x,f.n.x,1,i);f=f.n}else{if(d)for(o=(c=f.p.z).length-1;0<=o;--o)i.point((l=c[o])[0],l[1]);else n(f.x,f.p.x,-1,i);f=f.p}c=(f=f.o).z,d=!d}while(!f.v);i.lineEnd()}}};function Ly(t){if(e=t.length){for(var e,r,n=0,i=t[0];++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}var Py=Ag(),Dy=function(t,e,r,n){return function(i){var o,s,a,u=e(i),c=Ay(),l=e(c),h=!1,f={point:d,lineStart:m,lineEnd:g,polygonStart:function(){f.point=v,f.lineStart=y,f.lineEnd=w,s=[],o=[]},polygonEnd:function(){f.point=d,f.lineStart=m,f.lineEnd=g,s=vi(s);var t=function(t,e){var r=e[0],n=e[1],i=qg(n),o=[qg(r),-Vg(r),0],s=0,a=0;Py.reset(),1===i?n=Dg+Lg:-1===i&&(n=-Dg-Lg);for(var u=0,c=t.length;u<c;++u)if(h=(l=t[u]).length)for(var l,h,f=l[h-1],d=f[0],p=f[1]/2+Og,m=qg(p),g=Vg(p),v=0;v<h;++v,d=w,m=b,g=_,f=y){var y=l[v],w=y[0],x=y[1]/2+Og,b=qg(x),_=Vg(x),M=w-d,S=0<=M?1:-1,E=S*M,T=Pg<E,A=m*b;if(Py.add(jg(A*S*qg(E),g*_+A*Vg(E))),s+=T?M+S*Ng:M,T^r<=d^r<=w){var R=Rv(Tv(f),Tv(y));Lv(R);var k=Rv(o,R);Lv(k);var C=(T^0<=M?-1:1)*Zg(k[2]);(C<n||n===C&&(R[0]||R[1]))&&(a+=T^0<=M?1:-1)}}return(s<-Lg||s<Lg&&Py<-Lg)^1&a}(o,n);s.length?(h||(i.polygonStart(),h=!0),Cy(s,Ny,t,r,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),r(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),s=o=null},sphere:function(){i.polygonStart(),i.lineStart(),r(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,r){t(e,r)&&i.point(e,r)}function p(t,e){u.point(t,e)}function m(){f.point=p,u.lineStart()}function g(){f.point=d,u.lineEnd()}function v(t,e){a.push([t,e]),l.point(t,e)}function y(){l.lineStart(),a=[]}function w(){v(a[0][0],a[0][1]),l.lineEnd();var t,e,r,n,u=l.clean(),f=c.result(),d=f.length;if(a.pop(),o.push(a),a=null,d)if(1&u){if(0<(e=(r=f[0]).length-1)){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((n=r[t])[0],n[1]);i.lineEnd()}}else 1<d&&2&u&&f.push(f.pop().concat(f.shift())),s.push(f.filter(Oy))}return f}};function Oy(t){return 1<t.length}function Ny(t,e){return((t=t.x)[0]<0?t[1]-Dg-Lg:Dg-t[1])-((e=e.x)[0]<0?e[1]-Dg-Lg:Dg-e[1])}var Iy=Dy(function(){return!0},function(t){var e,r=NaN,n=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a,u,c,l,h,f,d,p=0<o?Pg:-Pg,m=zg(o-r);zg(m-Pg)<Lg?(t.point(r,n=0<(n+s)/2?Dg:-Dg),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(p,n),t.point(o,n),e=0):i!==p&&Pg<=m&&(zg(r-i)<Lg&&(r-=i*Lg),zg(o-p)<Lg&&(o-=p*Lg),u=n,l=s,d=qg((a=r)-(c=o)),n=zg(d)>Lg?Ug((qg(u)*(f=Vg(l))*qg(c)-qg(l)*(h=Vg(u))*qg(a))/(h*f*d)):(u+l)/2,t.point(i,n),t.lineEnd(),t.lineStart(),t.point(p,n),e=0),t.point(r=o,n=s),i=p},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-e}}},function(t,e,r,n){var i;if(null==t)n.point(-Pg,i=r*Dg),n.point(0,i),n.point(Pg,i),n.point(Pg,0),n.point(Pg,-i),n.point(0,-i),n.point(-Pg,-i),n.point(-Pg,0),n.point(-Pg,i);else if(zg(t[0]-e[0])>Lg){var o=t[0]<e[0]?Pg:-Pg;n.point(-o,i=r*o/2),n.point(0,i),n.point(o,i)}else n.point(e[0],e[1])},[-Pg,-Dg]),Fy=function(t){var e=Vg(t),r=6*Fg,n=0<e,i=zg(e)>Lg;function o(t,r){return Vg(t)*Vg(r)>e}function s(t,r,n){var i=[1,0,0],o=Rv(Tv(t),Tv(r)),s=Av(o,o),a=o[0],u=s-a*a;if(!u)return!n&&t;var c=e*s/u,l=-e*a/u,h=Rv(i,o),f=Cv(i,c);kv(f,Cv(o,l));var d=h,p=Av(f,d),m=Av(d,d),g=p*p-m*(Av(f,f)-1);if(!(g<0)){var v=Xg(g),y=Cv(d,(-p-v)/m);if(kv(y,f),y=Ev(y),!n)return y;var w,x=t[0],b=r[0],_=t[1],M=r[1];b<x&&(w=x,x=b,b=w);var S=b-x,E=zg(S-Pg)<Lg;if(!E&&M<_&&(w=_,_=M,M=w),E||S<Lg?E?0<_+M^y[1]<(zg(y[0]-x)<Lg?_:M):_<=y[1]&&y[1]<=M:Pg<S^(x<=y[0]&&y[0]<=b)){var T=Cv(d,(-p+v)/m);return kv(T,f),[y,Ev(T)]}}}function a(e,r){var i=n?t:Pg-t,o=0;return e<-i?o|=1:i<e&&(o|=2),r<-i?o|=4:i<r&&(o|=8),o}return Dy(o,function(t){var e,r,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(h,f){var d,p=[h,f],m=o(h,f),g=n?m?0:a(h,f):m?a(h+(h<0?Pg:-Pg),f):0;if(!e&&(c=u=m)&&t.lineStart(),m!==u&&(!(d=s(e,p))||Ry(e,d)||Ry(p,d))&&(p[0]+=Lg,p[1]+=Lg,m=o(p[0],p[1])),m!==u)l=0,m?(t.lineStart(),d=s(p,e),t.point(d[0],d[1])):(d=s(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(i&&e&&n^m){var v;g&r||!(v=s(p,e,!0))||(l=0,n?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!m||e&&Ry(e,p)||t.point(p[0],p[1]),e=p,u=m,r=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}},function(e,n,i,o){!function(t,e,r,n,i,o){if(r){var s=Vg(e),a=qg(e),u=n*r;null==i?(i=e+n*Ng,o=e-u/2):(i=Ty(s,i),o=Ty(s,o),(0<n?i<o:o<i)&&(i+=n*Ng));for(var c,l=i;0<n?o<l:l<o;l-=u)c=Ev([s,-a*Vg(l),-a*qg(l)]),t.point(c[0],c[1])}}(o,t,r,i,e,n)},n?[0,-t]:[-Pg,t-Pg])},zy=function(t,e,r,n,i,o){var s,a=t[0],u=t[1],c=0,l=1,h=e[0]-a,f=e[1]-u;if(s=r-a,h||!(0<s)){if(s/=h,h<0){if(s<c)return;s<l&&(l=s)}else if(0<h){if(l<s)return;c<s&&(c=s)}if(s=i-a,h||!(s<0)){if(s/=h,h<0){if(l<s)return;c<s&&(c=s)}else if(0<h){if(s<c)return;s<l&&(l=s)}if(s=n-u,f||!(0<s)){if(s/=f,f<0){if(s<c)return;s<l&&(l=s)}else if(0<f){if(l<s)return;c<s&&(c=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(l<s)return;c<s&&(c=s)}else if(0<f){if(s<c)return;s<l&&(l=s)}return 0<c&&(t[0]=a+c*h,t[1]=u+c*f),l<1&&(e[0]=a+l*h,e[1]=u+l*f),!0}}}}},Uy=1e9,jy=-Uy;function Vy(t,e,r,n){function i(i,o){return t<=i&&i<=r&&e<=o&&o<=n}function o(i,o,a,c){var l=0,h=0;if(null==i||(l=s(i,a))!==(h=s(o,a))||u(i,o)<0^0<a)for(;c.point(0===l||3===l?t:r,1<l?n:e),(l=(l+a+4)%4)!==h;);else c.point(o[0],o[1])}function s(n,i){return zg(n[0]-t)<Lg?0<i?0:3:zg(n[0]-r)<Lg?0<i?2:1:zg(n[1]-e)<Lg?0<i?1:0:0<i?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var r=s(t,1),n=s(e,1);return r!==n?r-n:0===r?e[1]-t[1]:1===r?t[0]-e[0]:2===r?t[1]-e[1]:e[0]-t[0]}return function(s){var u,c,l,h,f,d,p,m,g,v,y,w=s,x=Ay(),b={point:_,lineStart:function(){b.point=M,c&&c.push(l=[]),v=!0,g=!1,p=m=NaN},lineEnd:function(){u&&(M(h,f),d&&g&&x.rejoin(),u.push(x.result())),b.point=_,g&&w.lineEnd()},polygonStart:function(){w=x,u=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,r=0,i=c.length;r<i;++r)for(var o,s,a=c[r],u=1,l=a.length,h=a[0],f=h[0],d=h[1];u<l;++u)o=f,s=d,f=(h=a[u])[0],d=h[1],s<=n?n<d&&(d-s)*(t-o)<(f-o)*(n-s)&&++e:d<=n&&(f-o)*(n-s)<(d-s)*(t-o)&&--e;return e}(),r=y&&e,i=(u=vi(u)).length;(r||i)&&(s.polygonStart(),r&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&Cy(u,a,e,o,s),s.polygonEnd()),w=s,u=c=l=null}};function _(t,e){i(t,e)&&w.point(t,e)}function M(o,s){var a=i(o,s);if(c&&l.push([o,s]),v)h=o,f=s,v=!1,(d=a)&&(w.lineStart(),w.point(o,s));else if(a&&g)w.point(o,s);else{var u=[p=Math.max(jy,Math.min(Uy,p)),m=Math.max(jy,Math.min(Uy,m))],x=[o=Math.max(jy,Math.min(Uy,o)),s=Math.max(jy,Math.min(Uy,s))];zy(u,x,t,e,r,n)?(g||(w.lineStart(),w.point(u[0],u[1])),w.point(x[0],x[1]),a||w.lineEnd(),y=!1):a&&(w.lineStart(),w.point(o,s),y=!1)}p=o,m=s,g=a}return b}}function By(t,e,r){var n=ai(t,e-Lg,r).concat(e);return function(t){return n.map(function(e){return[t,e]})}}function Hy(t,e,r){var n=ai(t,e-Lg,r).concat(e);return function(t){return n.map(function(e){return[e,t]})}}Ag();var Gy,Wy,qy,Yy,Xy=function(t){return t},$y=Ag(),Jy=Ag(),Zy={point:Qg,lineStart:Qg,lineEnd:Qg,polygonStart:function(){Zy.lineStart=Qy,Zy.lineEnd=ew},polygonEnd:function(){Zy.lineStart=Zy.lineEnd=Zy.point=Qg,$y.add(zg(Jy)),Jy.reset()},result:function(){var t=$y/2;return $y.reset(),t}};function Qy(){Zy.point=Ky}function Ky(t,e){Zy.point=tw,Gy=qy=t,Wy=Yy=e}function tw(t,e){Jy.add(Yy*t-qy*e),qy=t,Yy=e}function ew(){tw(Gy,Wy)}var rw,nw,iw,ow,sw=1/0,aw=sw,uw=-sw,cw=uw,lw={point:function(t,e){t<sw&&(sw=t),uw<t&&(uw=t),e<aw&&(aw=e),cw<e&&(cw=e)},lineStart:Qg,lineEnd:Qg,polygonStart:Qg,polygonEnd:Qg,result:function(){var t=[[sw,aw],[uw,cw]];return uw=cw=-(aw=sw=1/0),t}},hw=0,fw=0,dw=0,pw=0,mw=0,gw=0,vw=0,yw=0,ww=0,xw={point:bw,lineStart:_w,lineEnd:Ew,polygonStart:function(){xw.lineStart=Tw,xw.lineEnd=Aw},polygonEnd:function(){xw.point=bw,xw.lineStart=_w,xw.lineEnd=Ew},result:function(){var t=ww?[vw/ww,yw/ww]:gw?[pw/gw,mw/gw]:dw?[hw/dw,fw/dw]:[NaN,NaN];return hw=fw=dw=pw=mw=gw=vw=yw=ww=0,t}};function bw(t,e){hw+=t,fw+=e,++dw}function _w(){xw.point=Mw}function Mw(t,e){xw.point=Sw,bw(iw=t,ow=e)}function Sw(t,e){var r=t-iw,n=e-ow,i=Xg(r*r+n*n);pw+=i*(iw+t)/2,mw+=i*(ow+e)/2,gw+=i,bw(iw=t,ow=e)}function Ew(){xw.point=bw}function Tw(){xw.point=Rw}function Aw(){kw(rw,nw)}function Rw(t,e){xw.point=kw,bw(rw=iw=t,nw=ow=e)}function kw(t,e){var r=t-iw,n=e-ow,i=Xg(r*r+n*n);pw+=i*(iw+t)/2,mw+=i*(ow+e)/2,gw+=i,vw+=(i=ow*t-iw*e)*(iw+t),yw+=i*(ow+e),ww+=3*i,bw(iw=t,ow=e)}function Cw(t){this._context=t}Cw.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Ng)}},result:Qg};var Lw,Pw,Dw,Ow,Nw,Iw=Ag(),Fw={point:Qg,lineStart:function(){Fw.point=zw},lineEnd:function(){Lw&&Uw(Pw,Dw),Fw.point=Qg},polygonStart:function(){Lw=!0},polygonEnd:function(){Lw=null},result:function(){var t=+Iw;return Iw.reset(),t}};function zw(t,e){Fw.point=Uw,Pw=Ow=t,Dw=Nw=e}function Uw(t,e){Iw.add(Xg((Ow-=t)*Ow+(Nw-=e)*Nw)),Ow=t,Nw=e}function jw(){this._string=[]}function Vw(t){return\"m0,\"+t+\"a\"+t+\",\"+t+\" 0 1,1 0,\"+-2*t+\"a\"+t+\",\"+t+\" 0 1,1 0,\"+2*t+\"z\"}jw.prototype={_radius:4.5,_circle:Vw(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push(\"Z\"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push(\"M\",t,\",\",e),this._point=1;break;case 1:this._string.push(\"L\",t,\",\",e);break;default:null==this._circle&&(this._circle=Vw(this._radius)),this._string.push(\"M\",t,\",\",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join(\"\");return this._string=[],t}return null}};var Bw=function(t,e){var r,n,i=4.5;function o(t){return t&&(\"function\"==typeof i&&n.pointRadius(+i.apply(this,arguments)),vv(t,r(n))),n.result()}return o.area=function(t){return vv(t,r(Zy)),Zy.result()},o.measure=function(t){return vv(t,r(Fw)),Fw.result()},o.bounds=function(t){return vv(t,r(lw)),lw.result()},o.centroid=function(t){return vv(t,r(xw)),xw.result()},o.projection=function(e){return arguments.length?(r=null==e?(t=null,Xy):(t=e).stream,o):t},o.context=function(t){return arguments.length?(n=null==t?(e=null,new jw):new Cw(e=t),\"function\"!=typeof i&&n.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i=\"function\"==typeof t?t:(n.pointRadius(+t),+t),o):i},o.projection(t).context(e)};function Hw(t){return function(e){var r=new Gw;for(var n in t)r[n]=t[n];return r.stream=e,r}}function Gw(){}function Ww(t,e,r){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=n&&t.clipExtent(null),vv(r,t.stream(lw)),e(lw.result()),null!=n&&t.clipExtent(n),t}function qw(t,e,r){return Ww(t,function(r){var n=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(n/(r[1][0]-r[0][0]),i/(r[1][1]-r[0][1])),s=+e[0][0]+(n-o*(r[1][0]+r[0][0]))/2,a=+e[0][1]+(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([s,a])},r)}function Yw(t,e,r){return qw(t,[[0,0],e],r)}function Xw(t,e,r){return Ww(t,function(r){var n=+e,i=n/(r[1][0]-r[0][0]),o=(n-i*(r[1][0]+r[0][0]))/2,s=-i*r[0][1];t.scale(150*i).translate([o,s])},r)}function $w(t,e,r){return Ww(t,function(r){var n=+e,i=n/(r[1][1]-r[0][1]),o=-i*r[0][0],s=(n-i*(r[1][1]+r[0][1]))/2;t.scale(150*i).translate([o,s])},r)}Gw.prototype={constructor:Gw,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Jw=16,Zw=Vg(30*Fg),Qw=function(t,e){return+e?function(t,e){function r(n,i,o,s,a,u,c,l,h,f,d,p,m,g){var v=c-n,y=l-i,w=v*v+y*y;if(4*e<w&&m--){var x=s+f,b=a+d,_=u+p,M=Xg(x*x+b*b+_*_),S=Zg(_/=M),E=zg(zg(_)-1)<Lg||zg(o-h)<Lg?(o+h)/2:jg(b,x),T=t(E,S),A=T[0],R=T[1],k=A-n,C=R-i,L=y*k-v*C;(e<L*L/w||.3<zg((v*k+y*C)/w-.5)||s*f+a*d+u*p<Zw)&&(r(n,i,o,s,a,u,A,R,E,x/=M,b/=M,_,m,g),g.point(A,R),r(A,R,E,x,b,_,c,l,h,f,d,p,m,g))}}return function(e){var n,i,o,s,a,u,c,l,h,f,d,p,m={point:g,lineStart:v,lineEnd:w,polygonStart:function(){e.polygonStart(),m.lineStart=x},polygonEnd:function(){e.polygonEnd(),m.lineStart=v}};function g(r,n){r=t(r,n),e.point(r[0],r[1])}function v(){l=NaN,m.point=y,e.lineStart()}function y(n,i){var o=Tv([n,i]),s=t(n,i);r(l,h,c,f,d,p,l=s[0],h=s[1],c=n,f=o[0],d=o[1],p=o[2],Jw,e),e.point(l,h)}function w(){m.point=g,e.lineEnd()}function x(){v(),m.point=b,m.lineEnd=_}function b(t,e){y(n=t,e),i=l,o=h,s=f,a=d,u=p,m.point=y}function _(){r(l,h,c,f,d,p,i,o,n,s,a,u,Jw,e),(m.lineEnd=w)()}return m}}(t,e):(r=t,Hw({point:function(t,e){t=r(t,e),this.stream.point(t[0],t[1])}}));var r},Kw=Hw({point:function(t,e){this.stream.point(t*Fg,e*Fg)}});function tx(t,e,r,n){var i=Vg(n),o=qg(n),s=i*t,a=o*t,u=i/t,c=o/t,l=(o*r-i*e)/t,h=(o*e+i*r)/t;function f(t,n){return[s*t-a*n+e,r-a*t-s*n]}return f.invert=function(t,e){return[u*t-c*e+l,h-c*t-u*e]},f}function ex(t){return rx(function(){return t})()}function rx(t){var e,r,n,i,o,s,a,u,c,l,h=150,f=480,d=250,p=0,m=0,g=0,v=0,y=0,w=0,x=null,b=Iy,_=null,M=Xy,S=.5;function E(t){return u(t[0]*Fg,t[1]*Fg)}function T(t){return(t=u.invert(t[0],t[1]))&&[t[0]*Ig,t[1]*Ig]}function A(){var t=tx(h,0,0,w).apply(null,e(p,m)),n=(w?tx:function(t,e,r){function n(n,i){return[e+t*n,r-t*i]}return n.invert=function(n,i){return[(n-e)/t,(r-i)/t]},n})(h,f-t[0],d-t[1],w);return r=by(g,v,y),a=wy(e,n),u=wy(r,a),s=Qw(a,S),R()}function R(){return c=l=null,E}return E.stream=function(t){return c&&l===t?c:c=Kw((e=r,Hw({point:function(t,r){var n=e(t,r);return this.stream.point(n[0],n[1])}}))(b(s(M(l=t)))));var e},E.preclip=function(t){return arguments.length?(b=t,x=void 0,R()):b},E.postclip=function(t){return arguments.length?(M=t,_=n=i=o=null,R()):M},E.clipAngle=function(t){return arguments.length?(b=+t?Fy(x=t*Fg):(x=null,Iy),R()):x*Ig},E.clipExtent=function(t){return arguments.length?(M=null==t?(_=n=i=o=null,Xy):Vy(_=+t[0][0],n=+t[0][1],i=+t[1][0],o=+t[1][1]),R()):null==_?null:[[_,n],[i,o]]},E.scale=function(t){return arguments.length?(h=+t,A()):h},E.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],A()):[f,d]},E.center=function(t){return arguments.length?(p=t[0]%360*Fg,m=t[1]%360*Fg,A()):[p*Ig,m*Ig]},E.rotate=function(t){return arguments.length?(g=t[0]%360*Fg,v=t[1]%360*Fg,y=2<t.length?t[2]%360*Fg:0,A()):[g*Ig,v*Ig,y*Ig]},E.angle=function(t){return arguments.length?(w=t%360*Fg,A()):w*Ig},E.precision=function(t){return arguments.length?(s=Qw(a,S=t*t),R()):Xg(S)},E.fitExtent=function(t,e){return qw(E,t,e)},E.fitSize=function(t,e){return Yw(E,t,e)},E.fitWidth=function(t,e){return Xw(E,t,e)},E.fitHeight=function(t,e){return $w(E,t,e)},function(){return e=t.apply(this,arguments),E.invert=e.invert&&T,A()}}function nx(t){var e=0,r=Pg/3,n=rx(t),i=n(e,r);return i.parallels=function(t){return arguments.length?n(e=t[0]*Fg,r=t[1]*Fg):[e*Ig,r*Ig]},i}function ix(t,e){var r=qg(t),n=(r+qg(e))/2;if(zg(n)<Lg)return function(t){var e=Vg(t);function r(t,r){return[t*e,qg(r)/e]}return r.invert=function(t,r){return[t/e,Zg(r*e)]},r}(t);var i=1+r*(2*n-r),o=Xg(i)/n;function s(t,e){var r=Xg(i-2*n*qg(e))/n;return[r*qg(t*=n),o-r*Vg(t)]}return s.invert=function(t,e){var r=o-e;return[jg(t,zg(r))/n*Yg(r),Zg((i-(t*t+r*r)*n*n)/(2*n))]},s}var ox=function(){return nx(ix).scale(155.424).center([0,33.6442])},sx=function(){return ox().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function ax(t){return function(e,r){var n=Vg(e),i=Vg(r),o=t(n*i);return[o*i*qg(e),o*qg(r)]}}function ux(t){return function(e,r){var n=Xg(e*e+r*r),i=t(n),o=qg(i),s=Vg(i);return[jg(e*o,n*s),Zg(n&&r*o/n)]}}var cx=ax(function(t){return Xg(2/(1+t))});cx.invert=ux(function(t){return 2*Zg(t/2)});var lx=ax(function(t){return(t=Jg(t))&&t/qg(t)});function hx(t,e){return[t,Gg($g((Dg+e)/2))]}function fx(t){var e,r,n,i=ex(t),o=i.center,s=i.scale,a=i.translate,u=i.clipExtent,c=null;function l(){var o=Pg*s(),a=i(Ey(i.rotate()).invert([0,0]));return u(null==c?[[a[0]-o,a[1]-o],[a[0]+o,a[1]+o]]:t===hx?[[Math.max(a[0]-o,c),e],[Math.min(a[0]+o,r),n]]:[[c,Math.max(a[1]-o,e)],[r,Math.min(a[1]+o,n)]])}return i.scale=function(t){return arguments.length?(s(t),l()):s()},i.translate=function(t){return arguments.length?(a(t),l()):a()},i.center=function(t){return arguments.length?(o(t),l()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=r=n=null:(c=+t[0][0],e=+t[0][1],r=+t[1][0],n=+t[1][1]),l()):null==c?null:[[c,e],[r,n]]},l()}function dx(t){return $g((Dg+t)/2)}function px(t,e){var r=Vg(t),n=t===e?qg(t):Gg(r/Vg(e))/Gg(dx(e)/dx(t)),i=r*Wg(dx(t),n)/n;if(!n)return hx;function o(t,e){0<i?e<-Dg+Lg&&(e=-Dg+Lg):Dg-Lg<e&&(e=Dg-Lg);var r=i/Wg(dx(e),n);return[r*qg(n*t),i-r*Vg(n*t)]}return o.invert=function(t,e){var r=i-e,o=Yg(n)*Xg(t*t+r*r);return[jg(t,zg(r))/n*Yg(r),2*Ug(Wg(i/o,1/n))-Dg]},o}function mx(t,e){return[t,e]}function gx(t,e){var r=Vg(t),n=t===e?qg(t):(r-Vg(e))/(e-t),i=r/n+t;if(zg(n)<Lg)return mx;function o(t,e){var r=i-e,o=n*t;return[r*qg(o),i-r*Vg(o)]}return o.invert=function(t,e){var r=i-e;return[jg(t,zg(r))/n*Yg(r),i-Yg(n)*Xg(t*t+r*r)]},o}function vx(t,e){var r=Vg(e),n=Vg(t)*r;return[r*qg(t)/n,qg(e)/n]}function yx(t,e,r,n){return 1===t&&1===e&&0===r&&0===n?Xy:Hw({point:function(i,o){this.stream.point(i*t+r,o*e+n)}})}function wx(t,e){return[Vg(e)*qg(t),qg(e)]}function xx(t,e){var r=Vg(e),n=1+Vg(t)*r;return[r*qg(t)/n,qg(e)/n]}function bx(t,e){return[Gg($g((Dg+e)/2)),-t]}lx.invert=ux(function(t){return t}),hx.invert=function(t,e){return[t,2*Ug(Hg(e))-Dg]},mx.invert=mx,vx.invert=ux(Ug),wx.invert=ux(Zg),xx.invert=ux(function(t){return 2*Ug(t)}),bx.invert=function(t,e){return[-e,2*Ug(Hg(t))-Dg]};var _x=Bw(),Mx=[\"clipAngle\",\"clipExtent\",\"scale\",\"translate\",\"center\",\"rotate\",\"parallels\",\"precision\",\"reflectX\",\"reflectY\",\"coefficient\",\"distance\",\"fraction\",\"lobes\",\"parallel\",\"radius\",\"ratio\",\"spacing\",\"tilt\"];function Sx(t,e){if(!t||\"string\"!=typeof t)throw new Error(\"Projection type must be a name string.\");return t=t.toLowerCase(),1<arguments.length?(Tx[t]=(r=t,n=e,function t(){var e=n();return e.type=r,e.path=Bw().projection(e),e.copy=e.copy||function(){var r=t();return Mx.forEach(function(t){e.hasOwnProperty(t)&&r[t](e[t]())}),r.path.pointRadius(e.path.pointRadius()),r},e}),this):Tx.hasOwnProperty(t)?Tx[t]:null;var r,n}function Ex(t){return t&&t.path||_x}var Tx={albers:sx,albersusa:function(){var t,e,r,n,i,o,s=sx(),a=ox().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=ox().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function l(t){var e=t[0],s=t[1];return o=null,r.point(e,s),o||(n.point(e,s),o)||(i.point(e,s),o)}function h(){return t=e=null,l}return l.invert=function(t){var e=s.scale(),r=s.translate(),n=(t[0]-r[0])/e,i=(t[1]-r[1])/e;return(.12<=i&&i<.234&&-.425<=n&&n<-.214?a:.166<=i&&i<.234&&-.214<=n&&n<-.115?u:s).invert(t)},l.stream=function(r){return t&&e===r?t:(n=[s.stream(e=r),a.stream(r),u.stream(r)],i=n.length,t={point:function(t,e){for(var r=-1;++r<i;)n[r].point(t,e)},sphere:function(){for(var t=-1;++t<i;)n[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)n[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)n[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)n[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)n[t].polygonEnd()}});var n,i},l.precision=function(t){return arguments.length?(s.precision(t),a.precision(t),u.precision(t),h()):s.precision()},l.scale=function(t){return arguments.length?(s.scale(t),a.scale(.35*t),u.scale(t),l.translate(s.translate())):s.scale()},l.translate=function(t){if(!arguments.length)return s.translate();var e=s.scale(),o=+t[0],l=+t[1];return r=s.translate(t).clipExtent([[o-.455*e,l-.238*e],[o+.455*e,l+.238*e]]).stream(c),n=a.translate([o-.307*e,l+.201*e]).clipExtent([[o-.425*e+Lg,l+.12*e+Lg],[o-.214*e-Lg,l+.234*e-Lg]]).stream(c),i=u.translate([o-.205*e,l+.212*e]).clipExtent([[o-.214*e+Lg,l+.166*e+Lg],[o-.115*e-Lg,l+.234*e-Lg]]).stream(c),h()},l.fitExtent=function(t,e){return qw(l,t,e)},l.fitSize=function(t,e){return Yw(l,t,e)},l.fitWidth=function(t,e){return Xw(l,t,e)},l.fitHeight=function(t,e){return $w(l,t,e)},l.scale(1070)},azimuthalequalarea:function(){return ex(cx).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return ex(lx).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return nx(px).scale(109.5).parallels([30,30])},conicequalarea:ox,conicequidistant:function(){return nx(gx).scale(131.154).center([0,13.9389])},equirectangular:function(){return ex(mx).scale(152.63)},gnomonic:function(){return ex(vx).scale(144.049).clipAngle(60)},identity:function(){var t,e,r,n,i,o,s=1,a=0,u=0,c=1,l=1,h=Xy,f=null,d=Xy;function p(){return n=i=null,o}return o={stream:function(t){return n&&i===t?n:n=h(d(i=t))},postclip:function(n){return arguments.length?(d=n,f=t=e=r=null,p()):d},clipExtent:function(n){return arguments.length?(d=null==n?(f=t=e=r=null,Xy):Vy(f=+n[0][0],t=+n[0][1],e=+n[1][0],r=+n[1][1]),p()):null==f?null:[[f,t],[e,r]]},scale:function(t){return arguments.length?(h=yx((s=+t)*c,s*l,a,u),p()):s},translate:function(t){return arguments.length?(h=yx(s*c,s*l,a=+t[0],u=+t[1]),p()):[a,u]},reflectX:function(t){return arguments.length?(h=yx(s*(c=t?-1:1),s*l,a,u),p()):c<0},reflectY:function(t){return arguments.length?(h=yx(s*c,s*(l=t?-1:1),a,u),p()):l<0},fitExtent:function(t,e){return qw(o,t,e)},fitSize:function(t,e){return Yw(o,t,e)},fitWidth:function(t,e){return Xw(o,t,e)},fitHeight:function(t,e){return $w(o,t,e)}}},mercator:function(){return fx(hx).scale(961/Ng)},orthographic:function(){return ex(wx).scale(249.5).clipAngle(90+Lg)},stereographic:function(){return ex(xx).scale(250).clipAngle(142)},transversemercator:function(){var t=fx(bx),e=t.center,r=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?r([t[0],t[1],2<t.length?t[2]+90:90]):[(t=r())[0],t[1],t[2]-90]},r([0,0,90]).scale(159.155)}};for(var Ax in Tx)Sx(Ax,Tx[Ax]);function Rx(t){zn.call(this,null,t)}function kx(t){zn.call(this,null,t)}function Cx(t){zn.call(this,null,t)}function Lx(t){zn.call(this,[],t),this.generator=function(){var t,e,r,n,i,o,s,a,u,c,l,h,f=10,d=f,p=90,m=360,g=2.5;function v(){return{type:\"MultiLineString\",coordinates:y()}}function y(){return ai(Bg(n/p)*p,r,p).map(l).concat(ai(Bg(a/m)*m,s,m).map(h)).concat(ai(Bg(e/f)*f,t,f).filter(function(t){return zg(t%p)>Lg}).map(u)).concat(ai(Bg(o/d)*d,i,d).filter(function(t){return zg(t%m)>Lg}).map(c))}return v.lines=function(){return y().map(function(t){return{type:\"LineString\",coordinates:t}})},v.outline=function(){return{type:\"Polygon\",coordinates:[l(n).concat(h(s).slice(1),l(r).reverse().slice(1),h(a).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(a=+t[0][1],s=+t[1][1],(r=+t[1][0])<(n=+t[0][0])&&(t=n,n=r,r=t),s<a&&(t=a,a=s,s=t),v.precision(g)):[[n,a],[r,s]]},v.extentMinor=function(r){return arguments.length?(o=+r[0][1],i=+r[1][1],(t=+r[1][0])<(e=+r[0][0])&&(r=e,e=t,t=r),i<o&&(r=o,o=i,i=r),v.precision(g)):[[e,o],[t,i]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(p=+t[0],m=+t[1],v):[p,m]},v.stepMinor=function(t){return arguments.length?(f=+t[0],d=+t[1],v):[f,d]},v.precision=function(f){return arguments.length?(g=+f,u=By(o,i,90),c=Hy(e,t,g),l=By(a,s,90),h=Hy(n,r,g),v):g},v.extentMajor([[-180,-90+Lg],[180,90-Lg]]).extentMinor([[-180,-80-Lg],[180,80+Lg]])}()}function Px(t){zn.call(this,null,t),this.modified(!0)}function Dx(t,e,r){N(t[e])&&t[e](r)}Rx.Definition={type:\"GeoPath\",metadata:{modifies:!0},params:[{name:\"projection\",type:\"projection\"},{name:\"field\",type:\"field\"},{name:\"pointRadius\",type:\"number\",expr:!0},{name:\"as\",type:\"string\",default:\"path\"}]},H(Rx,zn).transform=function(t,e){var r=e.fork(e.ALL),n=this.value,i=t.field||d,o=t.as||\"path\",s=r.SOURCE;!n||t.modified()?(this.value=n=Ex(t.projection),r.materialize().reflow()):s=i===d||e.modified(i.fields)?r.ADD_MOD:r.ADD;var a=function(t,e){var r=t.pointRadius();return t.context(null),null!=e&&t.pointRadius(e),r}(n,t.pointRadius);return r.visit(s,function(t){t[o]=n(i(t))}),n.pointRadius(a),r.modifies(o)},kx.Definition={type:\"GeoPoint\",metadata:{modifies:!0},params:[{name:\"projection\",type:\"projection\",required:!0},{name:\"fields\",type:\"field\",array:!0,required:!0,length:2},{name:\"as\",type:\"string\",array:!0,length:2,default:[\"x\",\"y\"]}]},H(kx,zn).transform=function(t,e){var r,n=t.projection,i=t.fields[0],o=t.fields[1],s=t.as||[\"x\",\"y\"],a=s[0],u=s[1];function c(t){var e=n([i(t),o(t)]);e?(t[a]=e[0],t[u]=e[1]):(t[a]=void 0,t[u]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,c):(r=e.modified(i.fields)||e.modified(o.fields),e.visit(r?e.ADD_MOD:e.ADD,c)),e.modifies(s)},Cx.Definition={type:\"GeoShape\",metadata:{modifies:!0},params:[{name:\"projection\",type:\"projection\"},{name:\"field\",type:\"field\",default:\"datum\"},{name:\"pointRadius\",type:\"number\",expr:!0},{name:\"as\",type:\"string\",default:\"shape\"}]},H(Cx,zn).transform=function(t,e){var r,n,i,o,s=e.fork(e.ALL),a=this.value,u=t.field||l(\"datum\"),c=t.as||\"shape\",h=s.ADD_MOD;return a&&!t.modified()||(this.value=(r=Ex(t.projection),n=u,(o=null==(i=t.pointRadius)?function(t){return r(n(t))}:function(t){var e=r.pointRadius(),o=r.pointRadius(i)(n(t));return r.pointRadius(e),o}).context=function(t){return r.context(t),o},a=o),s.materialize().reflow(),h=s.SOURCE),s.visit(h,function(t){t[c]=a}),s.modifies(c)},Lx.Definition={type:\"Graticule\",metadata:{changes:!0},params:[{name:\"extent\",type:\"array\",array:!0,length:2,content:{type:\"number\",array:!0,length:2}},{name:\"extentMajor\",type:\"array\",array:!0,length:2,content:{type:\"number\",array:!0,length:2}},{name:\"extentMinor\",type:\"array\",array:!0,length:2,content:{type:\"number\",array:!0,length:2}},{name:\"step\",type:\"number\",array:!0,length:2},{name:\"stepMajor\",type:\"number\",array:!0,length:2,default:[90,360]},{name:\"stepMinor\",type:\"number\",array:!0,length:2,default:[10,10]},{name:\"precision\",type:\"number\",default:2.5}]},H(Lx,zn).transform=function(t,e){var r,n=this.value,i=this.generator;if(!n.length||t.modified())for(var o in t)N(i[o])&&i[o](t[o]);return r=i(),n.length?e.mod.push(pt(n[0],r)):e.add.push(ht(r)),n[0]=r,e},H(Px,zn).transform=function(t,e){var r,n,o,a,u=this.value;return!u||t.modified(\"type\")?(this.value=u=function(t){var e=Sx((t||\"mercator\").toLowerCase());return e||i(\"Unrecognized projection type: \"+t),e()}(t.type),Mx.forEach(function(e){null!=t[e]&&Dx(u,e,t[e])})):Mx.forEach(function(e){t.modified(e)&&Dx(u,e,t[e])}),null!=t.pointRadius&&u.path.pointRadius(t.pointRadius),t.fit&&(r=u,a=(n=t).fit,o=1===(a=O(a)).length?a[0]:{type:Eg,features:a.reduce(function(t,e){return e&&e.type===Eg?t.push.apply(t,e.features):s(e)?t.push.apply(t,e):t.push(e),t},[])},n.extent?r.fitExtent(n.extent,o):n.size&&r.fitSize(n.size,o)),e.fork(e.NO_SOURCE|e.NO_FIELDS)};var Ox=Object.freeze({contour:Sg,geojson:Tg,geopath:Rx,geopoint:kx,geoshape:Cx,graticule:Lx,projection:Px}),Nx=function(t){return function(){return t}},Ix=function(){return 1e-6*(Math.random()-.5)};function Fx(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var i,o,s,a,u,c,l,h,f,d=t._root,p={data:n},m=t._x0,g=t._y0,v=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(o=(m+v)/2))?m=o:v=o,(l=r>=(s=(g+y)/2))?g=s:y=s,!(d=(i=d)[h=l<<1|c]))return i[h]=p,t;if(a=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===a&&r===u)return p.next=d,i?i[h]=p:t._root=p,t;for(;i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(m+v)/2))?m=o:v=o,(l=r>=(s=(g+y)/2))?g=s:y=s,(h=l<<1|c)==(f=(s<=u)<<1|o<=a););return i[f]=d,i[h]=p,t}var zx=function(t,e,r,n,i){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=i};function Ux(t){return t[0]}function jx(t){return t[1]}function Vx(t,e,r){var n=new Bx(null==e?Ux:e,null==r?jx:r,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function Bx(t,e,r,n,i,o){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=i,this._y1=o,this._root=void 0}function Hx(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var Gx=Vx.prototype=Bx.prototype;function Wx(t){return t.x+t.vx}function qx(t){return t.y+t.vy}function Yx(t){return t.index}function Xx(t,e){var r=t.get(e);if(!r)throw new Error(\"missing: \"+e);return r}Gx.copy=function(){var t,e,r=new Bx(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return r;if(!n.length)return r._root=Hx(n),r;for(t=[{source:n,target:r._root=new Array(4)}];n=t.pop();)for(var i=0;i<4;++i)(e=n.source[i])&&(e.length?t.push({source:e,target:n.target[i]=new Array(4)}):n.target[i]=Hx(e));return r},Gx.add=function(t){var e=+this._x.call(null,t),r=+this._y.call(null,t);return Fx(this.cover(e,r),e,r,t)},Gx.addAll=function(t){var e,r,n,i,o=t.length,s=new Array(o),a=new Array(o),u=1/0,c=1/0,l=-1/0,h=-1/0;for(r=0;r<o;++r)isNaN(n=+this._x.call(null,e=t[r]))||isNaN(i=+this._y.call(null,e))||((s[r]=n)<u&&(u=n),l<n&&(l=n),(a[r]=i)<c&&(c=i),h<i&&(h=i));for(l<u&&(u=this._x0,l=this._x1),h<c&&(c=this._y0,h=this._y1),this.cover(u,c).cover(l,h),r=0;r<o;++r)Fx(this,s[r],a[r],t[r]);return this},Gx.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,i=this._x1,o=this._y1;if(isNaN(r))i=(r=Math.floor(t))+1,o=(n=Math.floor(e))+1;else{if(!(t<r||i<t||e<n||o<e))return this;var s,a,u=i-r,c=this._root;switch(a=(e<(n+o)/2)<<1|t<(r+i)/2){case 0:for(;(s=new Array(4))[a]=c,c=s,o=n+(u*=2),(i=r+u)<t||o<e;);break;case 1:for(;(s=new Array(4))[a]=c,c=s,o=n+(u*=2),t<(r=i-u)||o<e;);break;case 2:for(;(s=new Array(4))[a]=c,c=s,n=o-(u*=2),(i=r+u)<t||e<n;);break;case 3:for(;(s=new Array(4))[a]=c,c=s,n=o-(u*=2),t<(r=i-u)||e<n;);}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=n,this._x1=i,this._y1=o,this},Gx.data=function(){var t=[];return this.visit(function(e){if(!e.length)for(;t.push(e.data),e=e.next;);}),t},Gx.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Gx.find=function(t,e,r){var n,i,o,s,a,u,c,l=this._x0,h=this._y0,f=this._x1,d=this._y1,p=[],m=this._root;for(m&&p.push(new zx(m,l,h,f,d)),null==r?r=1/0:(l=t-r,h=e-r,f=t+r,d=e+r,r*=r);u=p.pop();)if(!(!(m=u.node)||(i=u.x0)>f||(o=u.y0)>d||(s=u.x1)<l||(a=u.y1)<h))if(m.length){var g=(i+s)/2,v=(o+a)/2;p.push(new zx(m[3],g,v,s,a),new zx(m[2],i,v,g,a),new zx(m[1],g,o,s,v),new zx(m[0],i,o,g,v)),(c=(v<=e)<<1|g<=t)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var y=t-+this._x.call(null,m.data),w=e-+this._y.call(null,m.data),x=y*y+w*w;if(x<r){var b=Math.sqrt(r=x);l=t-b,h=e-b,f=t+b,d=e+b,n=m.data}}return n},Gx.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,r,n,i,o,s,a,u,c,l,h,f,d=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(a=(p+g)/2))?p=a:g=a,(l=s>=(u=(m+v)/2))?m=u:v=u,!(d=(e=d)[h=l<<1|c]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(r=e,f=h)}for(;d.data!==t;)if(!(d=(n=d).next))return this;return(i=d.next)&&delete d.next,n?i?n.next=i:delete n.next:e?(i?e[h]=i:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(r?r[f]=d:this._root=d)):this._root=i,this},Gx.removeAll=function(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this},Gx.root=function(){return this._root},Gx.size=function(){var t=0;return this.visit(function(e){if(!e.length)for(;++t,e=e.next;);}),t},Gx.visit=function(t){var e,r,n,i,o,s,a=[],u=this._root;for(u&&a.push(new zx(u,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(u=e.node,n=e.x0,i=e.y0,o=e.x1,s=e.y1)&&u.length){var c=(n+o)/2,l=(i+s)/2;(r=u[3])&&a.push(new zx(r,c,l,o,s)),(r=u[2])&&a.push(new zx(r,n,l,c,s)),(r=u[1])&&a.push(new zx(r,c,i,o,l)),(r=u[0])&&a.push(new zx(r,n,i,c,l))}return this},Gx.visitAfter=function(t){var e,r=[],n=[];for(this._root&&r.push(new zx(this._root,this._x0,this._y0,this._x1,this._y1));e=r.pop();){var i=e.node;if(i.length){var o,s=e.x0,a=e.y0,u=e.x1,c=e.y1,l=(s+u)/2,h=(a+c)/2;(o=i[0])&&r.push(new zx(o,s,a,l,h)),(o=i[1])&&r.push(new zx(o,l,a,u,h)),(o=i[2])&&r.push(new zx(o,s,h,l,c)),(o=i[3])&&r.push(new zx(o,l,h,u,c))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Gx.x=function(t){return arguments.length?(this._x=t,this):this._x},Gx.y=function(t){return arguments.length?(this._y=t,this):this._y};var $x,Jx,Zx=0,Qx=0,Kx=0,tb=1e3,eb=0,rb=0,nb=0,ib=\"object\"==typeof performance&&performance.now?performance:Date,ob=\"object\"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function sb(){return rb||(ob(ab),rb=ib.now()+nb)}function ab(){rb=0}function ub(){this._call=this._time=this._next=null}function cb(t,e,r){var n=new ub;return n.restart(t,e,r),n}function lb(){rb=(eb=ib.now())+nb,Zx=Qx=0;try{!function(){sb(),++Zx;for(var t,e=$x;e;)0<=(t=rb-e._time)&&e._call.call(null,t),e=e._next;--Zx}()}finally{Zx=0,function(){for(var t,e,r=$x,n=1/0;r;)r._call?(n>r._time&&(n=r._time),r=(t=r)._next):(e=r._next,r._next=null,r=t?t._next=e:$x=e);Jx=t,fb(n)}(),rb=0}}function hb(){var t=ib.now(),e=t-eb;tb<e&&(nb-=e,eb=t)}function fb(t){Zx||(Qx&&(Qx=clearTimeout(Qx)),24<t-rb?(t<1/0&&(Qx=setTimeout(lb,t-ib.now()-nb)),Kx&&(Kx=clearInterval(Kx))):(Kx||(eb=ib.now(),Kx=setInterval(hb,tb)),Zx=1,ob(lb)))}function db(t){return t.x}function pb(t){return t.y}ub.prototype=cb.prototype={constructor:ub,restart:function(t,e,r){if(\"function\"!=typeof t)throw new TypeError(\"callback is not a function\");r=(null==r?sb():+r)+(null==e?0:+e),this._next||Jx===this||(Jx?Jx._next=this:$x=this,Jx=this),this._call=t,this._time=r,fb()},stop:function(){this._call&&(this._call=null,this._time=1/0,fb())}};var mb=10,gb=Math.PI*(3-Math.sqrt(5)),vb={center:function(t,e){var r;function n(){var n,i,o=r.length,s=0,a=0;for(n=0;n<o;++n)s+=(i=r[n]).x,a+=i.y;for(s=s/o-t,a=a/o-e,n=0;n<o;++n)(i=r[n]).x-=s,i.y-=a}return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){r=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n},collide:function(t){var e,r,n=1,i=1;function o(){for(var t,o,a,u,c,l,h,f=e.length,d=0;d<i;++d)for(o=Vx(e,Wx,qx).visitAfter(s),t=0;t<f;++t)h=(l=r[(a=e[t]).index])*l,u=a.x+a.vx,c=a.y+a.vy,o.visit(p);function p(t,e,r,i,o){var s=t.data,f=t.r,d=l+f;if(!s)return u+d<e||i<u-d||c+d<r||o<c-d;if(s.index>a.index){var p=u-s.x-s.vx,m=c-s.y-s.vy,g=p*p+m*m;g<d*d&&(0===p&&(g+=(p=Ix())*p),0===m&&(g+=(m=Ix())*m),g=(d-(g=Math.sqrt(g)))/g*n,a.vx+=(p*=g)*(d=(f*=f)/(h+f)),a.vy+=(m*=g)*d,s.vx-=p*(d=1-d),s.vy-=m*d)}}}function s(t){if(t.data)return t.r=r[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function a(){if(e){var n,i,o=e.length;for(r=new Array(o),n=0;n<o;++n)r[(i=e[n]).index]=+t(i,n,e)}}return\"function\"!=typeof t&&(t=Nx(null==t?1:+t)),o.initialize=function(t){e=t,a()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(n=+t,o):n},o.radius=function(e){return arguments.length?(t=\"function\"==typeof e?e:Nx(+e),a(),o):t},o},nbody:function(){var t,e,r,n,i=Nx(-30),o=1,s=1/0,a=.81;function u(n){var i,o=t.length,s=Vx(t,db,pb).visitAfter(l);for(r=n,i=0;i<o;++i)e=t[i],s.visit(h)}function c(){if(t){var e,r,o=t.length;for(n=new Array(o),e=0;e<o;++e)n[(r=t[e]).index]=+i(r,e,t)}}function l(t){var e,r,i,o,s,a=0,u=0;if(t.length){for(i=o=s=0;s<4;++s)(e=t[s])&&(r=Math.abs(e.value))&&(a+=e.value,u+=r,i+=r*e.x,o+=r*e.y);t.x=i/u,t.y=o/u}else for((e=t).x=e.data.x,e.y=e.data.y;a+=n[e.data.index],e=e.next;);t.value=a}function h(t,i,u,c){if(!t.value)return!0;var l=t.x-e.x,h=t.y-e.y,f=c-i,d=l*l+h*h;if(f*f/a<d)return d<s&&(0===l&&(d+=(l=Ix())*l),0===h&&(d+=(h=Ix())*h),d<o&&(d=Math.sqrt(o*d)),e.vx+=l*t.value*r/d,e.vy+=h*t.value*r/d),!0;if(!(t.length||s<=d))for((t.data!==e||t.next)&&(0===l&&(d+=(l=Ix())*l),0===h&&(d+=(h=Ix())*h),d<o&&(d=Math.sqrt(o*d)));t.data!==e&&(e.vx+=l*(f=n[t.data.index]*r/d),e.vy+=h*f),t=t.next;);}return u.initialize=function(e){t=e,c()},u.strength=function(t){return arguments.length?(i=\"function\"==typeof t?t:Nx(+t),c(),u):i},u.distanceMin=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.distanceMax=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u.theta=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u},link:function(t){var e,r,n,i,o,s=Yx,a=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=Nx(30),c=1;function l(n){for(var i=0,s=t.length;i<c;++i)for(var a,u,l,h,f,d,p,m=0;m<s;++m)u=(a=t[m]).source,h=(l=a.target).x+l.vx-u.x-u.vx||Ix(),f=l.y+l.vy-u.y-u.vy||Ix(),h*=d=((d=Math.sqrt(h*h+f*f))-r[m])/d*n*e[m],f*=d,l.vx-=h*(p=o[m]),l.vy-=f*p,u.vx+=h*(p=1-p),u.vy+=f*p}function h(){if(n){var a,u,c=n.length,l=t.length,h=Lt(n,s);for(a=0,i=new Array(c);a<l;++a)(u=t[a]).index=a,\"object\"!=typeof u.source&&(u.source=Xx(h,u.source)),\"object\"!=typeof u.target&&(u.target=Xx(h,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(l);a<l;++a)o[a]=i[(u=t[a]).source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(l),f(),r=new Array(l),d()}}function f(){if(n)for(var r=0,i=t.length;r<i;++r)e[r]=+a(t[r],r,t)}function d(){if(n)for(var e=0,i=t.length;e<i;++e)r[e]=+u(t[e],e,t)}return null==t&&(t=[]),l.initialize=function(t){n=t,h()},l.links=function(e){return arguments.length?(t=e,h(),l):t},l.id=function(t){return arguments.length?(s=t,l):s},l.iterations=function(t){return arguments.length?(c=+t,l):c},l.strength=function(t){return arguments.length?(a=\"function\"==typeof t?t:Nx(+t),f(),l):a},l.distance=function(t){return arguments.length?(u=\"function\"==typeof t?t:Nx(+t),d(),l):u},l},x:function(t){var e,r,n,i=Nx(.1);function o(t){for(var i,o=0,s=e.length;o<s;++o)(i=e[o]).vx+=(n[o]-i.x)*r[o]*t}function s(){if(e){var o,s=e.length;for(r=new Array(s),n=new Array(s),o=0;o<s;++o)r[o]=isNaN(n[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return\"function\"!=typeof t&&(t=Nx(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(i=\"function\"==typeof t?t:Nx(+t),s(),o):i},o.x=function(e){return arguments.length?(t=\"function\"==typeof e?e:Nx(+e),s(),o):t},o},y:function(t){var e,r,n,i=Nx(.1);function o(t){for(var i,o=0,s=e.length;o<s;++o)(i=e[o]).vy+=(n[o]-i.y)*r[o]*t}function s(){if(e){var o,s=e.length;for(r=new Array(s),n=new Array(s),o=0;o<s;++o)r[o]=isNaN(n[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return\"function\"!=typeof t&&(t=Nx(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(i=\"function\"==typeof t?t:Nx(+t),s(),o):i},o.y=function(e){return arguments.length?(t=\"function\"==typeof e?e:Nx(+e),s(),o):t},o}},yb=\"forces\",wb=[\"alpha\",\"alphaMin\",\"alphaTarget\",\"velocityDecay\",\"forces\"],xb=[\"static\",\"iterations\"],bb=[\"x\",\"y\",\"vx\",\"vy\"];function _b(t){zn.call(this,null,t)}_b.Definition={type:\"Force\",metadata:{modifies:!0},params:[{name:\"static\",type:\"boolean\",default:!1},{name:\"restart\",type:\"boolean\",default:!1},{name:\"iterations\",type:\"number\",default:300},{name:\"alpha\",type:\"number\",default:1},{name:\"alphaMin\",type:\"number\",default:.001},{name:\"alphaTarget\",type:\"number\",default:0},{name:\"velocityDecay\",type:\"number\",default:.4},{name:\"forces\",type:\"param\",array:!0,params:[{key:{force:\"center\"},params:[{name:\"x\",type:\"number\",default:0},{name:\"y\",type:\"number\",default:0}]},{key:{force:\"collide\"},params:[{name:\"radius\",type:\"number\",expr:!0},{name:\"strength\",type:\"number\",default:.7},{name:\"iterations\",type:\"number\",default:1}]},{key:{force:\"nbody\"},params:[{name:\"strength\",type:\"number\",default:-30},{name:\"theta\",type:\"number\",default:.9},{name:\"distanceMin\",type:\"number\",default:1},{name:\"distanceMax\",type:\"number\"}]},{key:{force:\"link\"},params:[{name:\"links\",type:\"data\"},{name:\"id\",type:\"field\"},{name:\"distance\",type:\"number\",default:30,expr:!0},{name:\"strength\",type:\"number\",expr:!0},{name:\"iterations\",type:\"number\",default:1}]},{key:{force:\"x\"},params:[{name:\"strength\",type:\"number\",default:.1},{name:\"x\",type:\"field\"}]},{key:{force:\"y\"},params:[{name:\"strength\",type:\"number\",default:.1},{name:\"y\",type:\"field\"}]}]},{name:\"as\",type:\"string\",array:!0,modify:!1,default:bb}]};var Mb=H(_b,zn);function Sb(t,e,r,n){var i,o,s,a,u=O(e.forces);for(i=0,o=wb.length;i<o;++i)(s=wb[i])!==yb&&e.modified(s)&&t[s](e[s]);for(i=0,o=u.length;i<o;++i)a=yb+i,(s=r||e.modified(yb,i)?Tb(u[i]):n&&Eb(u[i],n)?t.force(a):null)&&t.force(a,s);for(o=t.numForces||0;i<o;++i)t.force(yb+i,null);return t.numForces=u.length,t}function Eb(t,e){var r,i;for(r in t)if(N(i=t[r])&&e.modified(n(i)))return 1;return 0}function Tb(t){var e,r;for(r in vb.hasOwnProperty(t.force)||i(\"Unrecognized force: \"+t.force),e=vb[t.force](),t)N(e[r])&&Ab(e[r],t[r],t);return e}function Ab(t,e,r){t(N(e)?function(t){return e(t,r)}:e)}Mb.transform=function(t,e){var r,n,i,o,s,a,u,c=this.value,l=e.changed(e.ADD_REM),h=t.modified(wb),f=t.iterations||300;if(c?(l&&(e.modifies(\"index\"),c.nodes(e.source)),(h||e.changed(e.MOD))&&Sb(c,t,0,e)):(this.value=(i=t,o=function(t){var e,r=1,n=.001,i=1-Math.pow(n,1/300),o=0,s=.6,a=Lt(),u=cb(l),c=Ut(\"tick\",\"end\");function l(){h(),c.call(\"tick\",e),r<n&&(u.stop(),c.call(\"end\",e))}function h(){var e,n,u=t.length;for(r+=(o-r)*i,a.each(function(t){t(r)}),e=0;e<u;++e)null==(n=t[e]).fx?n.x+=n.vx*=s:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=s:(n.y=n.fy,n.vy=0)}function f(){for(var e,r=0,n=t.length;r<n;++r){if((e=t[r]).index=r,isNaN(e.x)||isNaN(e.y)){var i=mb*Math.sqrt(r),o=r*gb;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),f(),e={tick:h,restart:function(){return u.restart(l),e},stop:function(){return u.stop(),e},nodes:function(r){return arguments.length?(t=r,f(),a.each(d),e):t},alpha:function(t){return arguments.length?(r=+t,e):r},alphaMin:function(t){return arguments.length?(n=+t,e):n},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},force:function(t,r){return 1<arguments.length?(null==r?a.remove(t):a.set(t,d(r)),e):a.get(t)},find:function(e,r,n){var i,o,s,a,u,c=0,l=t.length;for(null==n?n=1/0:n*=n,c=0;c<l;++c)(s=(i=e-(a=t[c]).x)*i+(o=r-a.y)*o)<n&&(u=a,n=s);return u},on:function(t,r){return 1<arguments.length?(c.on(t,r),e):c.on(t)}}}(e.source),s=!1,a=o.stop,u=o.restart,o.stopped=function(){return s},o.restart=function(){return s=!1,u()},o.stop=function(){return s=!0,a()},c=Sb(o,i,!0).on(\"end\",function(){s=!0})),c.on(\"tick\",(r=e.dataflow,n=this,function(){r.touch(n).run()})),t.static||(l=!0,c.tick()),e.modifies(\"index\")),h||l||t.modified(xb)||e.changed()&&t.restart)if(c.alpha(Math.max(c.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(c.alphaMin(),1/f)),t.static)for(c.stop();0<=--f;)c.tick();else if(c.stopped()&&c.restart(),!l)return e.StopPropagation;return this.finish(t,e)},Mb.finish=function(t,e){for(var r,n=e.dataflow,i=this._argops,o=0,s=i.length;o<s;++o)if((r=i[o]).name===yb&&\"link\"===r.op._argval.force)for(var a,u=r.op._argops,c=0,l=u.length;c<l;++c)if(\"links\"===u[c].name&&(a=u[c].op.source)){n.pulse(a,n.changeset().reflow());break}return e.reflow(t.modified()).modifies(bb)};var Rb=Object.freeze({force:_b});function kb(t,e){return t.parent===e.parent?1:2}function Cb(t,e){return t+e.x}function Lb(t,e){return Math.max(t,e.y)}function Pb(t){var e=0,r=t.children,n=r&&r.length;if(n)for(;0<=--n;)e+=r[n].value;else e=1;t.value=e}function Db(t,e){var r,n,i,o,s,a=new Fb(t),u=+t.value&&(a.value=t.value),c=[a];for(null==e&&(e=Ob);r=c.pop();)if(u&&(r.value=+r.data.value),(i=e(r.data))&&(s=i.length))for(r.children=new Array(s),o=s-1;0<=o;--o)c.push(n=r.children[o]=new Fb(i[o])),n.parent=r,n.depth=r.depth+1;return a.eachBefore(Ib)}function Ob(t){return t.children}function Nb(t){t.data=t.data.data}function Ib(t){for(var e=0;t.height=e,(t=t.parent)&&t.height<++e;);}function Fb(t){this.data=t,this.depth=this.height=0,this.parent=null}Fb.prototype=Db.prototype={constructor:Fb,count:function(){return this.eachAfter(Pb)},each:function(t){var e,r,n,i,o=this,s=[o];do{for(e=s.reverse(),s=[];o=e.pop();)if(t(o),r=o.children)for(n=0,i=r.length;n<i;++n)s.push(r[n])}while(s.length);return this},eachAfter:function(t){for(var e,r,n,i=this,o=[i],s=[];i=o.pop();)if(s.push(i),e=i.children)for(r=0,n=e.length;r<n;++r)o.push(e[r]);for(;i=s.pop();)t(i);return this},eachBefore:function(t){for(var e,r,n=this,i=[n];n=i.pop();)if(t(n),e=n.children)for(r=e.length-1;0<=r;--r)i.push(e[r]);return this},sum:function(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,n=e.children,i=n&&n.length;0<=--i;)r+=n[i].value;e.value=r})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,r=function(t,e){if(t===e)return t;var r=t.ancestors(),n=e.ancestors(),i=null;for(t=r.pop(),e=n.pop();t===e;)i=t,t=r.pop(),e=n.pop();return i}(e,t),n=[e];e!==r;)n.push(e=e.parent);for(var i=n.length;t!==r;)n.splice(i,0,t),t=t.parent;return n},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e},copy:function(){return Db(this).eachBefore(Nb)}};var zb=Array.prototype.slice,Ub=function(t){for(var e,r,n=0,i=(t=function(t){for(var e,r,n=t.length;n;)r=Math.random()*n--|0,e=t[n],t[n]=t[r],t[r]=e;return t}(zb.call(t))).length,o=[];n<i;)e=t[n],r&&Bb(r,e)?++n:(r=Gb(o=jb(o,e)),n=0);return r};function jb(t,e){var r,n;if(Hb(e,t))return[e];for(r=0;r<t.length;++r)if(Vb(e,t[r])&&Hb(Wb(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(n=r+1;n<t.length;++n)if(Vb(Wb(t[r],t[n]),e)&&Vb(Wb(t[r],e),t[n])&&Vb(Wb(t[n],e),t[r])&&Hb(qb(t[r],t[n],e),t))return[t[r],t[n],e];throw new Error}function Vb(t,e){var r=t.r-e.r,n=e.x-t.x,i=e.y-t.y;return r<0||r*r<n*n+i*i}function Bb(t,e){var r=t.r-e.r+1e-6,n=e.x-t.x,i=e.y-t.y;return 0<r&&n*n+i*i<r*r}function Hb(t,e){for(var r=0;r<e.length;++r)if(!Bb(t,e[r]))return!1;return!0}function Gb(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return Wb(t[0],t[1]);case 3:return qb(t[0],t[1],t[2])}var e}function Wb(t,e){var r=t.x,n=t.y,i=t.r,o=e.x,s=e.y,a=e.r,u=o-r,c=s-n,l=a-i,h=Math.sqrt(u*u+c*c);return{x:(r+o+u/h*l)/2,y:(n+s+c/h*l)/2,r:(h+i+a)/2}}function qb(t,e,r){var n=t.x,i=t.y,o=t.r,s=e.x,a=e.y,u=e.r,c=r.x,l=r.y,h=r.r,f=n-s,d=n-c,p=i-a,m=i-l,g=u-o,v=h-o,y=n*n+i*i-o*o,w=y-s*s-a*a+u*u,x=y-c*c-l*l+h*h,b=d*p-f*m,_=(p*x-m*w)/(2*b)-n,M=(m*g-p*v)/b,S=(d*w-f*x)/(2*b)-i,E=(f*v-d*g)/b,T=M*M+E*E-1,A=2*(o+_*M+S*E),R=_*_+S*S-o*o,k=-(T?(A+Math.sqrt(A*A-4*T*R))/(2*T):R/A);return{x:n+_+M*k,y:i+S+E*k,r:k}}function Yb(t,e,r){var n,i,o,s,a=t.x-e.x,u=t.y-e.y,c=a*a+u*u;c?(i=e.r+r.r,s=t.r+r.r,(s*=s)<(i*=i)?(n=(c+s-i)/(2*c),o=Math.sqrt(Math.max(0,s/c-n*n)),r.x=t.x-n*a-o*u,r.y=t.y-n*u+o*a):(n=(c+i-s)/(2*c),o=Math.sqrt(Math.max(0,i/c-n*n)),r.x=e.x+n*a-o*u,r.y=e.y+n*u+o*a)):(r.x=e.x+r.r,r.y=e.y)}function Xb(t,e){var r=t.r+e.r-1e-6,n=e.x-t.x,i=e.y-t.y;return 0<r&&n*n+i*i<r*r}function $b(t){var e=t._,r=t.next._,n=e.r+r.r,i=(e.x*r.r+r.x*e.r)/n,o=(e.y*r.r+r.y*e.r)/n;return i*i+o*o}function Jb(t){this._=t,this.next=null,this.previous=null}function Zb(t){if(\"function\"!=typeof t)throw new Error;return t}function Qb(){return 0}var Kb=function(t){return function(){return t}};function t_(t){return Math.sqrt(t.value)}function e_(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function r_(t,e){return function(r){if(n=r.children){var n,i,o,s=n.length,a=t(r)*e||0;if(a)for(i=0;i<s;++i)n[i].r+=a;if(o=function(t){if(!(i=t.length))return 0;var e,r,n,i,o,s,a,u,c,l,h;if((e=t[0]).x=0,e.y=0,!(1<i))return e.r;if(e.x=-(r=t[1]).r,r.x=e.r,r.y=0,!(2<i))return e.r+r.r;Yb(r,e,n=t[2]),e=new Jb(e),r=new Jb(r),n=new Jb(n),e.next=n.previous=r,r.next=e.previous=n,n.next=r.previous=e;t:for(a=3;a<i;++a){Yb(e._,r._,n=t[a]),n=new Jb(n),u=r.next,c=e.previous,l=r._.r,h=e._.r;do{if(l<=h){if(Xb(u._,n._)){(e.next=r=u).previous=e,--a;continue t}l+=u._.r,u=u.next}else{if(Xb(c._,n._)){((e=c).next=r).previous=e,--a;continue t}h+=c._.r,c=c.previous}}while(u!==c.next);for(n.previous=e,n.next=r,e.next=r.previous=r=n,o=$b(e);(n=n.next)!==r;)(s=$b(n))<o&&(e=n,o=s);r=e.next}for(e=[r._],n=r;(n=n.next)!==r;)e.push(n._);for(n=Ub(e),a=0;a<i;++a)(e=t[a]).x-=n.x,e.y-=n.y;return n.r}(n),a)for(i=0;i<s;++i)n[i].r-=a;r.r=o+a}}}function n_(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}var i_=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},o_=function(t,e,r,n,i){for(var o,s=t.children,a=-1,u=s.length,c=t.value&&(n-e)/t.value;++a<u;)(o=s[a]).y0=r,o.y1=i,o.x0=e,o.x1=e+=o.value*c},s_=\"$\",a_={depth:-1},u_={};function c_(t){return t.id}function l_(t){return t.parentId}function h_(t,e){return t.parent===e.parent?1:2}function f_(t){var e=t.children;return e?e[0]:t.t}function d_(t){var e=t.children;return e?e[e.length-1]:t.t}function p_(t,e){this._=t,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}p_.prototype=Object.create(Fb.prototype);var m_=function(t,e,r,n,i){for(var o,s=t.children,a=-1,u=s.length,c=t.value&&(i-r)/t.value;++a<u;)(o=s[a]).x0=e,o.x1=n,o.y0=r,o.y1=r+=o.value*c},g_=(1+Math.sqrt(5))/2;function v_(t,e,r,n,i,o){for(var s,a,u,c,l,h,f,d,p,m,g,v=[],y=e.children,w=0,x=0,b=y.length,_=e.value;w<b;){for(u=i-r,c=o-n;!(l=y[x++].value)&&x<b;);for(h=f=l,g=l*l*(m=Math.max(c/u,u/c)/(_*t)),p=Math.max(f/g,g/h);x<b;++x){if(l+=a=y[x].value,a<h&&(h=a),f<a&&(f=a),g=l*l*m,p<(d=Math.max(f/g,g/h))){l-=a;break}p=d}v.push(s={value:l,dice:u<c,children:y.slice(w,x)}),s.dice?o_(s,r,n,i,_?n+=c*l/_:o):m_(s,r,n,_?r+=u*l/_:i,o),_-=l,w=x}return v}var y_=function t(e){function r(t,r,n,i,o){v_(e,t,r,n,i,o)}return r.ratio=function(e){return t(1<(e=+e)?e:1)},r}(g_),w_=function t(e){function r(t,r,n,i,o){if((s=t._squarify)&&s.ratio===e)for(var s,a,u,c,l,h=-1,f=s.length,d=t.value;++h<f;){for(u=(a=s[h]).children,c=a.value=0,l=u.length;c<l;++c)a.value+=u[c].value;a.dice?o_(a,r,n,i,n+=(o-n)*a.value/d):m_(a,r,n,r+=(i-r)*a.value/d,o),d-=a.value}else t._squarify=s=v_(e,t,r,n,i,o),s.ratio=e}return r.ratio=function(e){return t(1<(e=+e)?e:1)},r}(g_);function x_(t){zn.call(this,null,t)}function b_(t){return t.values}function __(t){zn.call(this,null,t)}x_.Definition={type:\"Nest\",metadata:{treesource:!0,changes:!0},params:[{name:\"keys\",type:\"field\",array:!0},{name:\"key\",type:\"field\"},{name:\"generate\",type:\"boolean\"}]},H(x_,zn).transform=function(t,e){e.source||i(\"Nest transform requires an upstream data source.\");var r,n,o,s=t.key||ct,a=t.generate,u=t.modified(),c=e.clone();return(!this.value||u||e.changed())&&(a&&this.value&&this.value.each(function(t){t.children&&c.rem.push(t)}),r=O(t.keys).reduce(function(t,e){return t.key(e),t},function(){var t,e,r,n=[],i=[];function o(r,i,s,a){if(i>=n.length)return null!=t&&r.sort(t),null!=e?e(r):r;for(var u,c,l,h=-1,f=r.length,d=n[i++],p=Lt(),m=s();++h<f;)(l=p.get(u=d(c=r[h])+\"\"))?l.push(c):p.set(u,[c]);return p.each(function(t,e){a(m,e,o(t,i,s,a))}),m}return r={object:function(t){return o(t,0,Pt,Dt)},map:function(t){return o(t,0,Ot,Nt)},entries:function(t){return function t(r,o){if(++o>n.length)return r;var s,a=i[o-1];return null!=e&&o>=n.length?s=r.entries():(s=[],r.each(function(e,r){s.push({key:r,values:t(e,o)})})),null!=a?s.sort(function(t,e){return a(t.key,e.key)}):s}(o(t,0,Ot,Nt),0)},key:function(t){return n.push(t),r},sortKeys:function(t){return i[n.length-1]=t,r},sortValues:function(e){return t=e,r},rollup:function(t){return e=t,r}}}()).entries(c.source),this.value=n=Db({values:r},b_),a&&n.each(function(t){t.children&&(t=ht(t.data),c.add.push(t),c.source.push(t))}),o=n.lookup={},n.each(function(t){null!=ct(t.data)&&(o[s(t.data)]=t)})),c.source.root=this.value,c},H(__,zn).transform=function(t,e){e.source&&e.source.root||i(this.constructor.name+\" transform requires a backing tree data source.\");var r=this.layout(t.method),n=this.fields,o=e.source.root,s=t.as||n;t.field&&o.sum(t.field),t.sort&&o.sort(t.sort),function(t,e,r){for(var n,i=0,o=e.length;i<o;++i)(n=e[i])in r&&t[n](r[n])}(r,this.params,t);try{this.value=r(o)}catch(t){i(t)}return o.each(function(t){!function(t,e,r){for(var n=t.data,i=0,o=e.length-1;i<o;++i)n[r[i]]=t[e[i]];n[r[o]]=t.children?t.children.length:0}(t,n,s)}),e.reflow(t.modified()).modifies(s).modifies(\"leaf\")};var M_=[\"x\",\"y\",\"r\",\"depth\",\"children\"];function S_(t){__.call(this,t)}S_.Definition={type:\"Pack\",metadata:{tree:!0,modifies:!0},params:[{name:\"field\",type:\"field\"},{name:\"sort\",type:\"compare\"},{name:\"padding\",type:\"number\",default:0},{name:\"radius\",type:\"field\",default:null},{name:\"size\",type:\"number\",array:!0,length:2},{name:\"as\",type:\"string\",array:!0,length:3,default:M_}]};var E_=H(S_,__);E_.layout=function(){var t=null,e=1,r=1,n=Qb;function i(i){return i.x=e/2,i.y=r/2,t?i.eachBefore(e_(t)).eachAfter(r_(n,.5)).eachBefore(n_(1)):i.eachBefore(e_(t_)).eachAfter(r_(Qb,1)).eachAfter(r_(n,i.r/Math.min(e,r))).eachBefore(n_(Math.min(e,r)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=null==(r=e)?null:Zb(r),i):t;var r},i.size=function(t){return arguments.length?(e=+t[0],r=+t[1],i):[e,r]},i.padding=function(t){return arguments.length?(n=\"function\"==typeof t?t:Kb(+t),i):n},i},E_.params=[\"size\",\"padding\"],E_.fields=M_;var T_=[\"x0\",\"y0\",\"x1\",\"y1\",\"depth\",\"children\"];function A_(t){__.call(this,t)}A_.Definition={type:\"Partition\",metadata:{tree:!0,modifies:!0},params:[{name:\"field\",type:\"field\"},{name:\"sort\",type:\"compare\"},{name:\"padding\",type:\"number\",default:0},{name:\"round\",type:\"boolean\",default:!1},{name:\"size\",type:\"number\",array:!0,length:2},{name:\"as\",type:\"string\",array:!0,length:4,default:T_}]};var R_=H(A_,__);function k_(t){zn.call(this,null,t)}R_.layout=function(){var t=1,e=1,r=0,n=!1;function i(i){var o,s,a=i.height+1;return i.x0=i.y0=r,i.x1=t,i.y1=e/a,i.eachBefore((o=e,s=a,function(t){t.children&&o_(t,t.x0,o*(t.depth+1)/s,t.x1,o*(t.depth+2)/s);var e=t.x0,n=t.y0,i=t.x1-r,a=t.y1-r;i<e&&(e=i=(e+i)/2),a<n&&(n=a=(n+a)/2),t.x0=e,t.y0=n,t.x1=i,t.y1=a})),n&&i.eachBefore(i_),i}return i.round=function(t){return arguments.length?(n=!!t,i):n},i.size=function(r){return arguments.length?(t=+r[0],e=+r[1],i):[t,e]},i.padding=function(t){return arguments.length?(r=+t,i):r},i},R_.params=[\"size\",\"round\",\"padding\"],R_.fields=T_,k_.Definition={type:\"Stratify\",metadata:{treesource:!0},params:[{name:\"key\",type:\"field\",required:!0},{name:\"parentKey\",type:\"field\",required:!0}]},H(k_,zn).transform=function(t,e){e.source||i(\"Stratify transform requires an upstream data source.\");var r,n,o=t.modified(),s=e.fork(e.ALL).materialize(e.SOURCE),a=!this.value||o||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return s.source=s.source.slice(),a&&(r=function(){var t=c_,e=l_;function r(r){var n,i,o,s,a,u,c,l=r.length,h=new Array(l),f={};for(i=0;i<l;++i)a=h[i]=new Fb(n=r[i]),null!=(u=t(n,i,r))&&(u+=\"\")&&(f[c=s_+(a.id=u)]=c in f?u_:a);for(i=0;i<l;++i)if(a=h[i],null!=(u=e(r[i],i,r))&&(u+=\"\")){if(!(s=f[s_+u]))throw new Error(\"missing: \"+u);if(s===u_)throw new Error(\"ambiguous: \"+u);s.children?s.children.push(a):s.children=[a],a.parent=s}else{if(o)throw new Error(\"multiple roots\");o=a}if(!o)throw new Error(\"no root\");if(o.parent=a_,o.eachBefore(function(t){t.depth=t.parent.depth+1,--l}).eachBefore(Ib),o.parent=null,0<l)throw new Error(\"cycle\");return o}return r.id=function(e){return arguments.length?(t=Zb(e),r):t},r.parentId=function(t){return arguments.length?(e=Zb(t),r):e},r}().id(t.key).parentId(t.parentKey)(s.source),n=r.lookup={},r.each(function(e){n[t.key(e.data)]=e}),this.value=r),s.source.root=this.value,s};var C_={tidy:function(){var t=h_,e=1,r=1,n=null;function i(i){var u=function(t){for(var e,r,n,i,o,s=new p_(t,0),a=[s];e=a.pop();)if(n=e._.children)for(e.children=new Array(o=n.length),i=o-1;0<=i;--i)a.push(r=e.children[i]=new p_(n[i],i)),r.parent=e;return(s.parent=new p_(null,0)).children=[s],s}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(s),n)i.eachBefore(a);else{var c=i,l=i,h=i;i.eachBefore(function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>h.depth&&(h=t)});var f=c===l?1:t(c,l)/2,d=f-c.x,p=e/(l.x+f+d),m=r/(h.depth||1);i.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*m})}return i}function o(e){var r=e.children,n=e.parent.children,i=e.i?n[e.i-1]:null;if(r){!function(t){for(var e,r=0,n=0,i=t.children,o=i.length;0<=--o;)(e=i[o]).z+=r,e.m+=r,r+=e.s+(n+=e.c)}(e);var o=(r[0].z+r[r.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,r,n){if(r){for(var i,o=e,s=e,a=r,u=o.parent.children[0],c=o.m,l=s.m,h=a.m,f=u.m;a=d_(a),o=f_(o),a&&o;)u=f_(u),(s=d_(s)).a=e,0<(i=a.z+h-o.z-c+t(a._,o._))&&(d=(v=a).a.parent===e.parent?v.a:n,g=(m=i)/((p=e).i-d.i),p.c-=g,p.s+=m,d.c+=g,p.z+=m,p.m+=m,c+=i,l+=i),h+=a.m,c+=o.m,f+=u.m,l+=s.m;a&&!d_(s)&&(s.t=a,s.m+=h-l),o&&!f_(u)&&(u.t=o,u.m+=c-f,n=e)}var d,p,m,g,v;return n}(e,i,e.parent.A||n[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function a(t){t.x*=e,t.y=t.depth*r}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(n=!1,e=+t[0],r=+t[1],i):n?null:[e,r]},i.nodeSize=function(t){return arguments.length?(n=!0,e=+t[0],r=+t[1],i):n?[e,r]:null},i},cluster:function(){var t=kb,e=1,r=1,n=!1;function i(i){var o,s=0;i.eachAfter(function(e){var r,n=e.children;n?(e.x=(r=n).reduce(Cb,0)/r.length,e.y=1+n.reduce(Lb,0)):(e.x=o?s+=t(e,o):0,e.y=0,o=e)});var a=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=a.x-t(a,u)/2,l=u.x+t(u,a)/2;return i.eachAfter(n?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*r}:function(t){t.x=(t.x-c)/(l-c)*e,t.y=(1-(i.y?t.y/i.y:1))*r})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(n=!1,e=+t[0],r=+t[1],i):n?null:[e,r]},i.nodeSize=function(t){return arguments.length?(n=!0,e=+t[0],r=+t[1],i):n?[e,r]:null},i}},L_=[\"x\",\"y\",\"depth\",\"children\"];function P_(t){__.call(this,t)}P_.Definition={type:\"Tree\",metadata:{tree:!0,modifies:!0},params:[{name:\"field\",type:\"field\"},{name:\"sort\",type:\"compare\"},{name:\"method\",type:\"enum\",default:\"tidy\",values:[\"tidy\",\"cluster\"]},{name:\"size\",type:\"number\",array:!0,length:2},{name:\"nodeSize\",type:\"number\",array:!0,length:2},{name:\"as\",type:\"string\",array:!0,length:4,default:L_}]};var D_=H(P_,__);function O_(t){zn.call(this,{},t)}D_.layout=function(t){var e=t||\"tidy\";if(C_.hasOwnProperty(e))return C_[e]();i(\"Unrecognized Tree layout method: \"+e)},D_.params=[\"size\",\"nodeSize\",\"separation\"],D_.fields=L_,O_.Definition={type:\"TreeLinks\",metadata:{tree:!0,generates:!0,changes:!0},params:[{name:\"key\",type:\"field\"}]},H(O_,zn).transform=function(t,e){e.source&&e.source.root||i(\"TreeLinks transform requires a backing tree data source.\");var r=e.source.root.lookup,n=this.value,o=t.key||ct,s={},a=e.fork();function u(t){var e=n[t];e&&(s[t]=1,a.mod.push(e))}return e.visit(e.REM,function(t){var e=o(t),r=n[e];r&&(delete n[e],a.rem.push(r))}),e.visit(e.ADD,function(t){var e,i,u,c=o(t);(e=(i=r[c]).parent&&(u=i.parent.data)&&null!=ct(u)&&u)&&(a.add.push(n[c]=ht({source:e,target:t})),s[c]=1)}),e.visit(e.MOD,function(t){var e=o(t),n=r[e].children;if(u(e),n)for(var i=0,a=n.length;i<a;++i)s[e=o(n[i].data)]||u(e)}),a};var N_={binary:function(t,e,r,n,i){var o,s,a=t.children,u=a.length,c=new Array(u+1);for(c[0]=s=o=0;o<u;++o)c[o+1]=s+=a[o].value;!function t(e,r,n,i,o,s,u){if(r-1<=e){var l=a[e];return l.x0=i,l.y0=o,l.x1=s,void(l.y1=u)}for(var h=c[e],f=n/2+h,d=e+1,p=r-1;d<p;){var m=d+p>>>1;c[m]<f?d=m+1:p=m}f-c[d-1]<c[d]-f&&e+1<d&&--d;var g=c[d]-h,v=n-g;if(u-o<s-i){var y=(i*v+s*g)/n;t(e,d,g,i,o,y,u),t(d,r,v,y,o,s,u)}else{var w=(o*v+u*g)/n;t(e,d,g,i,o,s,w),t(d,r,v,i,w,s,u)}}(0,u,t.value,e,r,n,i)},dice:o_,slice:m_,slicedice:function(t,e,r,n,i){(1&t.depth?m_:o_)(t,e,r,n,i)},squarify:y_,resquarify:w_},I_=[\"x0\",\"y0\",\"x1\",\"y1\",\"depth\",\"children\"];function F_(t){__.call(this,t)}F_.Definition={type:\"Treemap\",metadata:{tree:!0,modifies:!0},params:[{name:\"field\",type:\"field\"},{name:\"sort\",type:\"compare\"},{name:\"method\",type:\"enum\",default:\"squarify\",values:[\"squarify\",\"resquarify\",\"binary\",\"dice\",\"slice\",\"slicedice\"]},{name:\"padding\",type:\"number\",default:0},{name:\"paddingInner\",type:\"number\",default:0},{name:\"paddingOuter\",type:\"number\",default:0},{name:\"paddingTop\",type:\"number\",default:0},{name:\"paddingRight\",type:\"number\",default:0},{name:\"paddingBottom\",type:\"number\",default:0},{name:\"paddingLeft\",type:\"number\",default:0},{name:\"ratio\",type:\"number\",default:1.618033988749895},{name:\"round\",type:\"boolean\",default:!1},{name:\"size\",type:\"number\",array:!0,length:2},{name:\"as\",type:\"string\",array:!0,length:4,default:I_}]};var z_=H(F_,__);z_.layout=function(){var t=function(){var t=y_,e=!1,r=1,n=1,i=[0],o=Qb,s=Qb,a=Qb,u=Qb,c=Qb;function l(t){return t.x0=t.y0=0,t.x1=r,t.y1=n,t.eachBefore(h),i=[0],e&&t.eachBefore(i_),t}function h(e){var r=i[e.depth],n=e.x0+r,l=e.y0+r,h=e.x1-r,f=e.y1-r;h<n&&(n=h=(n+h)/2),f<l&&(l=f=(l+f)/2),e.x0=n,e.y0=l,e.x1=h,e.y1=f,e.children&&(r=i[e.depth+1]=o(e)/2,n+=c(e)-r,l+=s(e)-r,(h-=a(e)-r)<n&&(n=h=(n+h)/2),(f-=u(e)-r)<l&&(l=f=(l+f)/2),t(e,n,l,h,f))}return l.round=function(t){return arguments.length?(e=!!t,l):e},l.size=function(t){return arguments.length?(r=+t[0],n=+t[1],l):[r,n]},l.tile=function(e){return arguments.length?(t=Zb(e),l):t},l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()},l.paddingInner=function(t){return arguments.length?(o=\"function\"==typeof t?t:Kb(+t),l):o},l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()},l.paddingTop=function(t){return arguments.length?(s=\"function\"==typeof t?t:Kb(+t),l):s},l.paddingRight=function(t){return arguments.length?(a=\"function\"==typeof t?t:Kb(+t),l):a},l.paddingBottom=function(t){return arguments.length?(u=\"function\"==typeof t?t:Kb(+t),l):u},l.paddingLeft=function(t){return arguments.length?(c=\"function\"==typeof t?t:Kb(+t),l):c},l}();return t.ratio=function(e){var r=t.tile();r.ratio&&t.tile(r.ratio(e))},t.method=function(e){N_.hasOwnProperty(e)?t.tile(N_[e]):i(\"Unrecognized Treemap layout method: \"+e)},t},z_.params=[\"method\",\"ratio\",\"size\",\"round\",\"padding\",\"paddingInner\",\"paddingOuter\",\"paddingTop\",\"paddingRight\",\"paddingBottom\",\"paddingLeft\"],z_.fields=I_;var U_=Object.freeze({nest:x_,pack:S_,partition:A_,stratify:k_,tree:P_,treelinks:O_,treemap:F_}),j_=function(t){return function(){return t}};function V_(t){return t[0]}function B_(t){return t[1]}function H_(){this._=null}function G_(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function W_(t,e){var r=e,n=e.R,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function q_(t,e){var r=e,n=e.L,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function Y_(t){for(;t.L;)t=t.L;return t}function X_(t,e,r,n){var i=[null,null],o=pM.push(i)-1;return i.left=t,i.right=e,r&&J_(i,t,e,r),n&&J_(i,e,t,n),fM[t.index].halfedges.push(o),fM[e.index].halfedges.push(o),i}function $_(t,e,r){var n=[e,r];return n.left=t,n}function J_(t,e,r,n){t[0]||t[1]?t.left===r?t[1]=n:t[0]=n:(t[0]=n,t.left=e,t.right=r)}function Z_(t,e,r,n,i){var o,s=t[0],a=t[1],u=s[0],c=s[1],l=0,h=1,f=a[0]-u,d=a[1]-c;if(o=e-u,f||!(0<o)){if(o/=f,f<0){if(o<l)return;o<h&&(h=o)}else if(0<f){if(h<o)return;l<o&&(l=o)}if(o=n-u,f||!(o<0)){if(o/=f,f<0){if(h<o)return;l<o&&(l=o)}else if(0<f){if(o<l)return;o<h&&(h=o)}if(o=r-c,d||!(0<o)){if(o/=d,d<0){if(o<l)return;o<h&&(h=o)}else if(0<d){if(h<o)return;l<o&&(l=o)}if(o=i-c,d||!(o<0)){if(o/=d,d<0){if(h<o)return;l<o&&(l=o)}else if(0<d){if(o<l)return;o<h&&(h=o)}return(0<l||h<1)&&(0<l&&(t[0]=[u+l*f,c+l*d]),h<1&&(t[1]=[u+h*f,c+h*d])),!0}}}}}function Q_(t,e,r,n,i){var o=t[1];if(o)return!0;var s,a,u=t[0],c=t.left,l=t.right,h=c[0],f=c[1],d=l[0],p=l[1],m=(h+d)/2,g=(f+p)/2;if(p===f){if(m<e||n<=m)return;if(d<h){if(u){if(u[1]>=i)return}else u=[m,r];o=[m,i]}else{if(u){if(u[1]<r)return}else u=[m,i];o=[m,r]}}else if(a=g-(s=(h-d)/(p-f))*m,s<-1||1<s)if(d<h){if(u){if(u[1]>=i)return}else u=[(r-a)/s,r];o=[(i-a)/s,i]}else{if(u){if(u[1]<r)return}else u=[(i-a)/s,i];o=[(r-a)/s,r]}else if(f<p){if(u){if(u[0]>=n)return}else u=[e,s*e+a];o=[n,s*n+a]}else{if(u){if(u[0]<e)return}else u=[n,s*n+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function K_(t,e){return e[+(e.left!==t.site)]}H_.prototype={constructor:H_,insert:function(t,e){var r,n,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=Y_(this._),e.P=null,(e.N=t).P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)r===(n=r.U).L?(i=n.R)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.R&&(W_(this,r),r=(t=r).U),r.C=!1,n.C=!0,q_(this,n)):(i=n.L)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.L&&(q_(this,r),r=(t=r).U),r.C=!1,n.C=!0,W_(this,n)),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,r,n,i=t.U,o=t.L,s=t.R;if(r=o?s?Y_(s):o:s,i?i.L===t?i.L=r:i.R=r:this._=r,o&&s?(n=r.C,r.C=t.C,((r.L=o).U=r)!==s?(i=r.U,r.U=t.U,i.L=t=r.R,(r.R=s).U=r):(r.U=i,t=(i=r).R)):(n=t.C,t=r),t&&(t.U=i),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,W_(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,q_(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,W_(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,q_(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,W_(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,q_(this,i),t=this._;break}e.C=!0,i=(t=i).U}while(!t.C);t&&(t.C=!1)}}};var tM,eM=[];function rM(t){var e=t.P,r=t.N;if(e&&r){var n=e.site,i=t.site,o=r.site;if(n!==o){var s=i[0],a=i[1],u=n[0]-s,c=n[1]-a,l=o[0]-s,h=o[1]-a,f=2*(u*h-c*l);if(!(-gM<=f)){var d=u*u+c*c,p=l*l+h*h,m=(h*d-c*p)/f,g=(u*p-l*d)/f,v=eM.pop()||new function(){G_(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=i,v.x=m+s,v.y=(v.cy=g+a)+Math.sqrt(m*m+g*g),t.circle=v;for(var y=null,w=dM._;w;)if(v.y<w.y||v.y===w.y&&v.x<=w.x){if(!w.L){y=w.P;break}w=w.L}else{if(!w.R){y=w;break}w=w.R}dM.insert(y,v),y||(tM=v)}}}}function nM(t){var e=t.circle;e&&(e.P||(tM=e.N),dM.remove(e),eM.push(e),G_(e),t.circle=null)}var iM=[];function oM(t){var e=iM.pop()||new function(){G_(this),this.edge=this.site=this.circle=null};return e.site=t,e}function sM(t){nM(t),hM.remove(t),iM.push(t),G_(t)}function aM(t){var e=t.circle,r=e.x,n=e.cy,i=[r,n],o=t.P,s=t.N,a=[t];sM(t);for(var u=o;u.circle&&Math.abs(r-u.circle.x)<mM&&Math.abs(n-u.circle.cy)<mM;)o=u.P,a.unshift(u),sM(u),u=o;a.unshift(u),nM(u);for(var c=s;c.circle&&Math.abs(r-c.circle.x)<mM&&Math.abs(n-c.circle.cy)<mM;)s=c.N,a.push(c),sM(c),c=s;a.push(c),nM(c);var l,h=a.length;for(l=1;l<h;++l)J_((c=a[l]).edge,(u=a[l-1]).site,c.site,i);(c=a[h-1]).edge=X_((u=a[0]).site,c.site,null,i),rM(u),rM(c)}function uM(t){for(var e,r,n,i,o,s=t[0],a=t[1],u=hM._;u;)if(n=cM(u,a)-s,mM<n)u=u.L;else{if(i=s-lM(u,a),!(mM<i)){-mM<n?(e=u.P,r=u):-mM<i?r=(e=u).N:e=r=u;break}if(!u.R){e=u;break}u=u.R}fM[(o=t).index]={site:o,halfedges:[]};var c=oM(t);if(hM.insert(e,c),e||r){if(e===r)return nM(e),r=oM(e.site),hM.insert(c,r),c.edge=r.edge=X_(e.site,c.site),rM(e),void rM(r);if(r){nM(e),nM(r);var l=e.site,h=l[0],f=l[1],d=t[0]-h,p=t[1]-f,m=r.site,g=m[0]-h,v=m[1]-f,y=2*(d*v-p*g),w=d*d+p*p,x=g*g+v*v,b=[(v*w-p*x)/y+h,(d*x-g*w)/y+f];J_(r.edge,l,m,b),c.edge=X_(l,t,null,b),r.edge=X_(t,m,null,b),rM(e),rM(r)}else c.edge=X_(e.site,c.site)}}function cM(t,e){var r=t.site,n=r[0],i=r[1],o=i-e;if(!o)return n;var s=t.P;if(!s)return-1/0;var a=(r=s.site)[0],u=r[1],c=u-e;if(!c)return a;var l=a-n,h=1/o-1/c,f=l/c;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+n:(n+a)/2}function lM(t,e){var r=t.N;if(r)return cM(r,e);var n=t.site;return n[1]===e?n[0]:1/0}var hM,fM,dM,pM,mM=1e-6,gM=1e-12;function vM(t,e){return e[1]-t[1]||e[0]-t[0]}function yM(t,e){var r,n,i,o=t.sort(vM).pop();for(pM=[],fM=new Array(t.length),hM=new H_,dM=new H_;;)if(i=tM,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===r&&o[1]===n||(uM(o),r=o[0],n=o[1]),o=t.pop();else{if(!i)break;aM(i.arc)}if(function(){for(var t,e,r,n,i=0,o=fM.length;i<o;++i)if((t=fM[i])&&(n=(e=t.halfedges).length)){var s=new Array(n),a=new Array(n);for(r=0;r<n;++r)s[r]=r,a[r]=(h=l=void 0,l=(u=pM[e[r]]).left,(c=t.site)===(h=u.right)&&(h=l,l=c),h?Math.atan2(h[1]-l[1],h[0]-l[0]):(c===l?(l=u[1],h=u[0]):(l=u[0],h=u[1]),Math.atan2(l[0]-h[0],h[1]-l[1])));for(s.sort(function(t,e){return a[e]-a[t]}),r=0;r<n;++r)a[r]=e[s[r]];for(r=0;r<n;++r)e[r]=a[r]}var u,c,l,h}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,r,n){for(var i,o=pM.length;o--;)Q_(i=pM[o],t,e,r,n)&&Z_(i,t,e,r,n)&&(Math.abs(i[0][0]-i[1][0])>mM||Math.abs(i[0][1]-i[1][1])>mM)||delete pM[o]}(s,a,u,c),function(t,e,r,n){var i,o,s,a,u,c,l,h,f,d,p,m,g,v=fM.length,y=!0;for(i=0;i<v;++i)if(o=fM[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)pM[u[a]]||u.splice(a,1);for(a=0,c=u.length;a<c;)p=(d=(g=pM[u[a]])[+(g.left===o.site)])[0],m=d[1],h=(l=K_(o,pM[u[++a%c]]))[0],f=l[1],(Math.abs(p-h)>mM||Math.abs(m-f)>mM)&&(u.splice(a,0,pM.push($_(s,d,Math.abs(p-t)<mM&&mM<n-m?[t,Math.abs(h-t)<mM?f:n]:Math.abs(m-n)<mM&&mM<r-p?[Math.abs(f-n)<mM?h:r,n]:Math.abs(p-r)<mM&&mM<m-e?[r,Math.abs(h-r)<mM?f:e]:Math.abs(m-e)<mM&&mM<p-t?[Math.abs(f-e)<mM?h:t,e]:null))-1),++c);c&&(y=!1)}if(y){var w,x,b,_=1/0;for(i=0,y=null;i<v;++i)(o=fM[i])&&(b=(w=(s=o.site)[0]-t)*w+(x=s[1]-e)*x)<_&&(_=b,y=o);if(y){var M=[t,e],S=[t,n],E=[r,n],T=[r,e];y.halfedges.push(pM.push($_(s=y.site,M,S))-1,pM.push($_(s,S,E))-1,pM.push($_(s,E,T))-1,pM.push($_(s,T,M))-1)}}for(i=0;i<v;++i)(o=fM[i])&&(o.halfedges.length||delete fM[i])}(s,a,u,c)}this.edges=pM,this.cells=fM,hM=dM=pM=fM=null}function wM(t){zn.call(this,null,t)}yM.prototype={constructor:yM,polygons:function(){var t=this.edges;return this.cells.map(function(e){var r=e.halfedges.map(function(r){return K_(e,t[r])});return r.data=e.site.data,r})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(r,n){if(o=(i=r.halfedges).length)for(var i,o,s,a,u,c,l=r.site,h=-1,f=e[i[o-1]],d=f.left===l?f.right:f.left;++h<o;)s=d,d=(f=e[i[h]]).left===l?f.right:f.left,s&&d&&n<s.index&&n<d.index&&((a=l)[0]-(c=d)[0])*((u=s)[1]-a[1])-(a[0]-u[0])*(c[1]-a[1])<0&&t.push([l.data,s.data,d.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,r){for(var n,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;for(var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;i=o.cells[n=s],s=null,i.halfedges.forEach(function(r){var n=o.edges[r],a=n.left;if(a!==i.site&&a||(a=n.right)){var u=t-a[0],c=e-a[1],h=u*u+c*c;h<l&&(l=h,s=a.index)}}),null!==s;);return o._found=n,null==r||l<=r*r?i.site:null}},wM.Definition={type:\"Voronoi\",metadata:{modifies:!0},params:[{name:\"x\",type:\"field\",required:!0},{name:\"y\",type:\"field\",required:!0},{name:\"size\",type:\"number\",array:!0,length:2},{name:\"extent\",type:\"array\",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:\"number\",array:!0,length:2}},{name:\"as\",type:\"string\",default:\"path\"}]};var xM=[[-1e5,-1e5],[1e5,1e5]];H(wM,zn).transform=function(t,e){var r,n,i,o,s=t.as||\"path\",a=e.source;for(r=function(){var t=V_,e=B_,r=null;function n(n){return new yM(n.map(function(r,i){var o=[Math.round(t(r,i,n)/mM)*mM,Math.round(e(r,i,n)/mM)*mM];return o.index=i,o.data=r,o}),r)}return n.polygons=function(t){return n(t).polygons()},n.links=function(t){return n(t).links()},n.triangles=function(t){return n(t).triangles()},n.x=function(e){return arguments.length?(t=\"function\"==typeof e?e:j_(+e),n):t},n.y=function(t){return arguments.length?(e=\"function\"==typeof t?t:j_(+t),n):e},n.extent=function(t){return arguments.length?(r=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],n):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},n.size=function(t){return arguments.length?(r=null==t?null:[[0,0],[+t[0],+t[1]]],n):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},n}().x(t.x).y(t.y),t.size?r.size(t.size):r.extent(t.extent||xM),this.value=r=r(a),n=r.polygons(),i=0,o=a.length;i<o;++i)a[i][s]=n[i]?\"M\"+n[i].join(\"L\")+\"Z\":null;return e.reflow(t.modified()).modifies(s)};var bM=Object.freeze({voronoi:wM}),_M=Math.PI/180,MM=64,SM=2048,EM=function(){var t,e,r,n,i,o,s,a=[256,256],u=kM,c=[],l=Math.random,h={};function f(t,e,r){for(var n,i,o,s,c,h=e.x,f=e.y,d=Math.sqrt(a[0]*a[0]+a[1]*a[1]),p=u(a),m=l()<.5?1:-1,g=-m;(n=p(g+=m))&&(i=~~n[0],o=~~n[1],!(Math.min(Math.abs(i),Math.abs(o))>=d));)if(e.x=h+i,e.y=f+o,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>a[0]||e.y+e.y1>a[1]||r&&AM(e,t,a[0])||r&&(c=r,!((s=e).x+s.x1>c[0].x&&s.x+s.x0<c[1].x&&s.y+s.y1>c[0].y&&s.y+s.y0<c[1].y)))){for(var v,y=e.sprite,w=e.width>>5,x=a[0]>>5,b=e.x-(w<<4),_=127&b,M=32-_,S=e.y1-e.y0,E=(e.y+e.y0)*x+(b>>5),T=0;T<S;T++){for(var A=v=0;A<=w;A++)t[E+A]|=v<<M|(A<w?(v=y[T*w+A])>>>_:0);E+=x}return!(e.sprite=null)}return!1}return h.layout=function(){for(var u=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext(\"2d\").getImageData(0,0,1,1).data.length>>2);t.width=(MM<<5)/e,t.height=SM/e;var r=t.getContext(\"2d\");return r.fillStyle=r.strokeStyle=\"red\",r.textAlign=\"center\",{context:r,ratio:e}}(Ho()),h=function(t){for(var e=[],r=-1;++r<t;)e[r]=0;return e}((a[0]>>5)*a[1]),d=null,p=c.length,m=-1,g=[],v=c.map(function(a){return{text:t(a),font:e(a),style:n(a),weight:i(a),rotate:o(a),size:~~r(a),padding:s(a),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:a}}).sort(function(t,e){return e.size-t.size});++m<p;){var y=v[m];y.x=a[0]*(l()+.5)>>1,y.y=a[1]*(l()+.5)>>1,TM(u,y,v,m),y.hasText&&f(h,y,d)&&(g.push(y),d?RM(d,y):d=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=a[0]>>1,y.y-=a[1]>>1)}return g},h.words=function(t){return arguments.length?(c=t,h):c},h.size=function(t){return arguments.length?(a=[+t[0],+t[1]],h):a},h.font=function(t){return arguments.length?(e=CM(t),h):e},h.fontStyle=function(t){return arguments.length?(n=CM(t),h):n},h.fontWeight=function(t){return arguments.length?(i=CM(t),h):i},h.rotate=function(t){return arguments.length?(o=CM(t),h):o},h.text=function(e){return arguments.length?(t=CM(e),h):t},h.spiral=function(t){return arguments.length?(u=LM[t]||t,h):u},h.fontSize=function(t){return arguments.length?(r=CM(t),h):r},h.padding=function(t){return arguments.length?(s=CM(t),h):s},h.random=function(t){return arguments.length?(l=t,h):l},h};function TM(t,e,r,n){if(!e.sprite){var i=t.context,o=t.ratio;i.clearRect(0,0,(MM<<5)/o,SM/o);var s,a,u,c,l,h=0,f=0,d=0,p=r.length;for(--n;++n<p;){if(e=r[n],i.save(),i.font=e.style+\" \"+e.weight+\" \"+~~((e.size+1)/o)+\"px \"+e.font,s=i.measureText(e.text+\"m\").width*o,u=e.size<<1,e.rotate){var m=Math.sin(e.rotate*_M),g=Math.cos(e.rotate*_M),v=s*g,y=s*m,w=u*g,x=u*m;s=Math.max(Math.abs(v+x),Math.abs(v-x))+31>>5<<5,u=~~Math.max(Math.abs(y+w),Math.abs(y-w))}else s=s+31>>5<<5;if(d<u&&(d=u),MM<<5<=h+s&&(f+=d,d=h=0),SM<=f+u)break;i.translate((h+(s>>1))/o,(f+(u>>1))/o),e.rotate&&i.rotate(e.rotate*_M),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=s,e.height=u,e.xoff=h,e.yoff=f,e.x1=s>>1,e.y1=u>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,h+=s}for(var b=i.getImageData(0,0,(MM<<5)/o,SM/o).data,_=[];0<=--n;)if((e=r[n]).hasText){for(a=(s=e.width)>>5,u=e.y1-e.y0,c=0;c<u*a;c++)_[c]=0;if(null==(h=e.xoff))return;f=e.yoff;var M=0,S=-1;for(l=0;l<u;l++){for(c=0;c<s;c++){var E=b[(f+l)*(MM<<5)+(h+c)<<2]?1<<31-c%32:0;_[a*l+(c>>5)]|=E,M|=E}M?S=l:(e.y0++,u--,l--,f++)}e.y1=e.y0+S,e.sprite=_.slice(0,(e.y1-e.y0)*a)}}}function AM(t,e,r){for(var n,i=t.sprite,o=t.width>>5,s=t.x-(o<<4),a=127&s,u=32-a,c=t.y1-t.y0,l=(t.y+t.y0)*(r>>=5)+(s>>5),h=0;h<c;h++){for(var f=n=0;f<=o;f++)if((n<<u|(f<o?(n=i[h*o+f])>>>a:0))&e[l+f])return!0;l+=r}return!1}function RM(t,e){var r=t[0],n=t[1];e.x+e.x0<r.x&&(r.x=e.x+e.x0),e.y+e.y0<r.y&&(r.y=e.y+e.y0),e.x+e.x1>n.x&&(n.x=e.x+e.x1),e.y+e.y1>n.y&&(n.y=e.y+e.y1)}function kM(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function CM(t){return\"function\"==typeof t?t:function(){return t}}var LM={archimedean:kM,rectangular:function(t){var e=4*t[0]/t[1],r=0,n=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:r+=e;break;case 1:n+=4;break;case 2:r-=e;break;default:n-=4}return[r,n]}}},PM=[\"x\",\"y\",\"font\",\"fontSize\",\"fontStyle\",\"fontWeight\",\"angle\"],DM=[\"text\",\"font\",\"rotate\",\"fontSize\",\"fontStyle\",\"fontWeight\"];function OM(t){zn.call(this,EM(),t)}OM.Definition={type:\"Wordcloud\",metadata:{modifies:!0},params:[{name:\"size\",type:\"number\",array:!0,length:2},{name:\"font\",type:\"string\",expr:!0,default:\"sans-serif\"},{name:\"fontStyle\",type:\"string\",expr:!0,default:\"normal\"},{name:\"fontWeight\",type:\"string\",expr:!0,default:\"normal\"},{name:\"fontSize\",type:\"number\",expr:!0,default:14},{name:\"fontSizeRange\",type:\"number\",array:\"nullable\",default:[10,50]},{name:\"rotate\",type:\"number\",expr:!0,default:0},{name:\"text\",type:\"field\"},{name:\"spiral\",type:\"string\",values:[\"archimedean\",\"rectangular\"]},{name:\"padding\",type:\"number\",expr:!0},{name:\"as\",type:\"string\",array:!0,length:7,default:PM}]},H(OM,zn).transform=function(e,r){var n=e.modified();if(n||r.changed(r.ADD_REM)||DM.some(function(t){var n=e[t];return N(n)&&r.modified(n.fields)})){var i,o=r.materialize(r.SOURCE).source,s=this.value,a=e.as||PM,u=e.fontSize||14;if(N(u)?i=e.fontSizeRange:u=F(u),i){var c=u,l=Ud(\"sqrt\")().domain(function(t,e){for(var r,n=1/0,i=-1/0,o=0,s=e.length;o<s;++o)(r=t(e[o]))<n&&(n=r),i<r&&(i=r);return[n,i]}(c,o)).range(i);u=function(t){return l(c(t))}}o.forEach(function(t){t[a[0]]=NaN,t[a[1]]=NaN,t[a[3]]=0});for(var h,f,d=s.words(o).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||\"archimedean\").rotate(e.rotate||0).font(e.font||\"sans-serif\").fontStyle(e.fontStyle||\"normal\").fontWeight(e.fontWeight||\"normal\").fontSize(u).random(t.random).layout(),p=s.size(),m=p[0]>>1,g=p[1]>>1,v=0,y=d.length;v<y;++v)(f=(h=d[v]).datum)[a[0]]=h.x+m,f[a[1]]=h.y+g,f[a[2]]=h.font,f[a[3]]=h.size,f[a[4]]=h.style,f[a[5]]=h.weight,f[a[6]]=h.rotate;return r.reflow(n).modifies(a)}};var NM=Object.freeze({wordcloud:OM});function IM(t){return new Uint32Array(t)}function FM(t,e,r){var n=(e<257?function(t){return new Uint8Array(t)}:e<65537?function(t){return new Uint16Array(t)}:IM)(t);return r&&n.set(r),n}var zM=function(t,e,r){var n=1<<e;return{one:n,zero:~n,range:r.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd:function(t,e){var r,i=this.bisect(this.range,t.value),o=t.index,s=i[0],a=i[1],u=o.length;for(r=0;r<s;++r)e[o[r]]|=n;for(r=a;r<u;++r)e[o[r]]|=n;return this}}};function UM(){var t=IM(0),e=[],r=0;return{insert:function(n,i,o){if(!i.length)return[];var s,a,u,c,l,h=r,f=i.length,d=Array(f),p=IM(f);for(u=0;u<f;++u)d[u]=n(i[u]),p[u]=u;if((c=d).sort.call(l=p,function(t,e){var r=c[t],n=c[e];return r<n?-1:n<r?1:0}),d=yi(c,l),h)s=e,a=t,e=Array(h+f),t=IM(h+f),function(t,e,r,n,i,o,s,a,u){var c,l=0,h=0;for(c=0;l<n&&h<s;++c)e[l]<i[h]?(a[c]=e[l],u[c]=r[l++]):(a[c]=i[h],u[c]=o[h++]+t);for(;l<n;++l,++c)a[c]=e[l],u[c]=r[l];for(;h<s;++h,++c)a[c]=i[h],u[c]=o[h]+t}(o,s,a,h,d,p,f,e,t);else{if(0<o)for(u=0;u<f;++u)p[u]+=o;e=d,t=p}return r=h+f,{index:p,value:d}},remove:function(n,i){var o,s,a,u=r;for(s=0;!i[t[s]]&&s<u;++s);for(a=s;s<u;++s)i[o=t[s]]||(t[a]=o,e[a]=e[s],++a);r=u-n},bisect:function(t,n){var i;return n?i=n.length:(n=e,i=r),[ii(n,t[0],0,i),ni(n,t[1],0,i)]},reindex:function(e){for(var n=0,i=r;n<i;++n)t[n]=e[t[n]]},index:function(){return t},size:function(){return r}}}function jM(t){var e,r,n,i,o;zn.call(this,(e=8,r=[],n=IM(0),i=FM(0,e),o=FM(0,e),{data:function(){return r},seen:function(){return n=(t=n).length>=(e=r.length)?t:((i=i||new t.constructor(e)).set(t),i);var t,e,i},add:function(t){for(var e,n=0,i=r.length,o=t.length;n<o;++n)(e=t[n])._index=i++,r.push(e)},remove:function(t,e){var n,s,a,u=r.length,c=Array(u-t),l=r;for(s=0;!e[s]&&s<u;++s)c[s]=r[s],l[s]=s;for(a=s;s<u;++s)n=r[s],e[s]?l[s]=-1:(l[s]=a,i[a]=i[s],o[a]=o[s],(c[a]=n)._index=a++),i[s]=0;return r=c,l},size:function(){return r.length},curr:function(){return i},prev:function(){return o},reset:function(t){o[t]=i[t]},all:function(){return e<257?255:e<65537?65535:4294967295},set:function(t,e){i[t]|=e},clear:function(t,e){i[t]&=~e},resize:function(t,r){(i.length<t||e<r)&&(e=Math.max(r,e),i=FM(t,e,i),o=FM(t,e))}}),t),this._indices=null,this._dims=null}jM.Definition={type:\"CrossFilter\",metadata:{},params:[{name:\"fields\",type:\"field\",array:!0,required:!0},{name:\"query\",type:\"array\",array:!0,required:!0,content:{type:\"number\",array:!0,length:2}}]};var VM=H(jM,zn);function BM(t){zn.call(this,null,t)}VM.transform=function(t,e){return this._dims?t.modified(\"fields\")||t.fields.some(function(t){return e.modified(t.fields)})?this.reinit(t,e):this.eval(t,e):this.init(t,e)},VM.init=function(t,e){for(var r,n,i=t.fields,o=t.query,s=this._indices={},a=this._dims=[],u=o.length,c=0;c<u;++c)n=s[r=i[c].fname]||(s[r]=UM()),a.push(zM(n,c,o[c]));return this.eval(t,e)},VM.reinit=function(t,e){var r,n,i,o,s,a,u,c,l,h=e.materialize().fork(),f=t.fields,d=t.query,p=this._indices,m=this._dims,g=this.value,v=g.curr(),y=g.prev(),w=g.all(),x=h.rem=h.add,b=h.mod,_=d.length,M={};if(y.set(v),e.rem.length&&(s=this.remove(t,e,h)),e.add.length&&g.add(e.add),e.mod.length)for(a={},u=0,c=(o=e.mod).length;u<c;++u)a[o[u]._index]=1;for(u=0;u<_;++u)l=f[u],(!m[u]||t.modified(\"fields\",u)||e.modified(l.fields))&&((r=M[i=l.fname])||(p[i]=n=UM(),M[i]=r=n.insert(l,e.source,0)),m[u]=zM(n,u,d[u]).onAdd(r,v));for(u=0,c=g.data().length;u<c;++u)s[u]||(y[u]!==v[u]?x.push(u):a[u]&&v[u]!==w&&b.push(u));return g.mask=(1<<_)-1,h},VM.eval=function(t,e){var r=e.materialize().fork(),n=this._dims.length,i=0;return e.rem.length&&(this.remove(t,e,r),i|=(1<<n)-1),t.modified(\"query\")&&!t.modified(\"fields\")&&(i|=this.update(t,e,r)),e.add.length&&(this.insert(t,e,r),i|=(1<<n)-1),e.mod.length&&(this.modify(e,r),i|=(1<<n)-1),this.value.mask=i,r},VM.insert=function(t,e,r){var n,i,o,s=e.add,a=this.value,u=this._dims,c=this._indices,l=t.fields,h={},f=r.add,d=a.size(),p=d+s.length,m=u.length;a.resize(p,m),a.add(s);var g=a.curr(),v=a.prev(),y=a.all();for(n=0;n<m;++n)o=h[i=l[n].fname]||(h[i]=c[i].insert(l[n],s,d)),u[n].onAdd(o,g);for(;d<p;++d)v[d]=y,g[d]!==y&&f.push(d)},VM.modify=function(t,e){var r,n,i,o=e.mod,s=this.value,a=s.curr(),u=s.all(),c=t.mod;for(r=0,n=c.length;r<n;++r)a[i=c[r]._index]!==u&&o.push(i)},VM.remove=function(t,e,r){var n,i,o,s,a=this._indices,u=this.value,c=u.curr(),l=u.prev(),h=u.all(),f={},d=r.rem,p=e.rem;for(n=0,i=p.length;n<i;++n)f[o=p[n]._index]=1,l[o]=s=c[o],s!==(c[o]=h)&&d.push(o);for(o in a)a[o].remove(i,f);return this.reindex(e,i,f),f},VM.reindex=function(t,e,r){var n=this._indices,i=this.value;t.runAfter(function(){var t=i.remove(e,r);for(var o in n)n[o].reindex(t)})},VM.update=function(t,e,r){var n,i,o=this._dims,s=t.query,a=e.stamp,u=o.length,c=0;for(i=r.filters=0;i<u;++i)t.modified(\"query\",i)&&(n=i,++c);if(1===c)c=o[n].one,this.incrementOne(o[n],s[n],r.add,r.rem);else for(c=i=0;i<u;++i)t.modified(\"query\",i)&&(c|=o[i].one,this.incrementAll(o[i],s[i],a,r.add),r.rem=r.add);return c},VM.incrementAll=function(t,e,r,n){var i,o,s,a=this.value,u=a.seen(),c=a.curr(),l=a.prev(),h=t.index(),f=t.bisect(t.range),d=t.bisect(e),p=d[0],m=d[1],g=f[0],v=f[1],y=t.one;if(p<g)for(i=p,o=Math.min(g,m);i<o;++i)u[s=h[i]]!==r&&(l[s]=c[s],u[s]=r,n.push(s)),c[s]^=y;else if(g<p)for(i=g,o=Math.min(p,v);i<o;++i)u[s=h[i]]!==r&&(l[s]=c[s],u[s]=r,n.push(s)),c[s]^=y;if(v<m)for(i=Math.max(p,v),o=m;i<o;++i)u[s=h[i]]!==r&&(l[s]=c[s],u[s]=r,n.push(s)),c[s]^=y;else if(m<v)for(i=Math.max(g,m),o=v;i<o;++i)u[s=h[i]]!==r&&(l[s]=c[s],u[s]=r,n.push(s)),c[s]^=y;t.range=e.slice()},VM.incrementOne=function(t,e,r,n){var i,o,s,a=this.value.curr(),u=t.index(),c=t.bisect(t.range),l=t.bisect(e),h=l[0],f=l[1],d=c[0],p=c[1],m=t.one;if(h<d)for(i=h,o=Math.min(d,f);i<o;++i)a[s=u[i]]^=m,r.push(s);else if(d<h)for(i=d,o=Math.min(h,p);i<o;++i)a[s=u[i]]^=m,n.push(s);if(p<f)for(i=Math.max(h,p),o=f;i<o;++i)a[s=u[i]]^=m,r.push(s);else if(f<p)for(i=Math.max(d,f),o=p;i<o;++i)a[s=u[i]]^=m,n.push(s);t.range=e.slice()},BM.Definition={type:\"ResolveFilter\",metadata:{},params:[{name:\"ignore\",type:\"number\",required:!0,description:\"A bit mask indicating which filters to ignore.\"},{name:\"filter\",type:\"object\",required:!0,description:\"Per-tuple filter bitmaps from a CrossFilter transform.\"}]},H(BM,zn).transform=function(t,e){var r=~(t.ignore||0),n=t.filter,i=n.mask;if(0==(i&r))return e.StopPropagation;var o=e.fork(e.ALL),s=n.data(),a=n.curr(),u=n.prev(),c=function(t){return a[t]&r?null:s[t]};return o.filter(o.MOD,c),i&i-1?(o.filter(o.ADD,function(t){var e=a[t]&r;return!e&&e^u[t]&r?s[t]:null}),o.filter(o.REM,function(t){var e=a[t]&r;return!e||e^e^u[t]&r?null:s[t]})):(o.filter(o.ADD,c),o.filter(o.REM,function(t){return(a[t]&r)===i?s[t]:null})),o.filter(o.SOURCE,function(t){return c(t._index)})};var HM=Object.freeze({crossfilter:jM,resolvefilter:BM}),GM=\"default\",WM=function(t){var e=t._signals.cursor;e||(t._signals.cursor=e=t.add({user:GM,item:null})),t.on(t.events(\"view\",\"mousemove\"),e,function(t,r){var n=e.value,i=n?u(n)?n:n.user:GM,o=r.item&&r.item.cursor||null;return n&&i===n.user&&o==n.item?n:{user:i,item:o}}),t.add(null,function(t){var e=t.cursor,r=this.value;return u(e)||(r=e.item,e=e.user),\"undefined\"!=typeof document&&document.body&&(document.body.style.cursor=e&&e!==GM?e:r||e),r},{cursor:e})};function qM(t,e){var r=t._runtime.data;return r.hasOwnProperty(e)||i(\"Unrecognized data set: \"+e),r[e]}function YM(t,e){mt(e)||i(\"Second argument to changes must be a changeset.\");var r=qM(this,t);return r.modified=!0,this.pulse(r.input,e)}function XM(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function $M(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function JM(t){var e=t.padding(),r=t._origin;return[e.left+r[0],e.top+r[1]]}function ZM(t){return t.item}function QM(t){var e=t.item.mark.source;return e.source||e}function KM(t){return function(e,r){return r.vega.view().changeset().encode(r.item,t)}}var tS=function(t,e,r){var n=document.createElement(t);for(var i in e)n.setAttribute(i,e[i]);return null!=r&&(n.textContent=r),n},eS=\"vega-bind-radio\",rS=\"vega-option-\";function nS(t,e,r,n){var i=tS(\"input\");for(var o in r)\"signal\"!==o&&\"element\"!==o&&i.setAttribute(\"input\"===o?\"type\":o,r[o]);i.setAttribute(\"name\",r.signal),i.value=n,e.appendChild(i),i.addEventListener(\"input\",function(){t.update(i.value)}),t.elements=[i],t.set=function(t){i.value=t}}function iS(t,e,r,n){var i={type:\"checkbox\",name:r.signal};n&&(i.checked=!0);var o=tS(\"input\",i);e.appendChild(o),o.addEventListener(\"change\",function(){t.update(o.checked)}),t.elements=[o],t.set=function(t){o.checked=!!t||null}}function oS(t,e,r,n){var i=tS(\"select\",{name:r.signal});r.options.forEach(function(t){var e={value:t};uS(t,n)&&(e.selected=!0),i.appendChild(tS(\"option\",e,t+\"\"))}),e.appendChild(i),i.addEventListener(\"change\",function(){t.update(r.options[i.selectedIndex])}),t.elements=[i],t.set=function(t){for(var e=0,n=r.options.length;e<n;++e)if(uS(r.options[e],t))return void(i.selectedIndex=e)}}function sS(t,e,r,n){var i=tS(\"span\",{class:eS});e.appendChild(i),t.elements=r.options.map(function(e){var o=rS+r.signal+\"-\"+e,s={id:o,type:\"radio\",name:r.signal,value:e};uS(e,n)&&(s.checked=!0);var a=tS(\"input\",s);return a.addEventListener(\"change\",function(){t.update(e)}),i.appendChild(a),i.appendChild(tS(\"label\",{for:o},e+\"\")),a}),t.set=function(e){for(var r=t.elements,n=0,i=r.length;n<i;++n)uS(r[n].value,e)&&(r[n].checked=!0)}}function aS(t,e,r,n){n=void 0!==n?n:(+r.max+ +r.min)/2;var i=r.min||Math.min(0,+n)||0,o=r.max||Math.max(100,+n)||100,s=r.step||di(i,o,100),a=tS(\"input\",{type:\"range\",name:r.signal,min:i,max:o,step:s});a.value=n;var u=tS(\"label\",{},+n);function c(){u.textContent=a.value,t.update(+a.value)}e.appendChild(a),e.appendChild(u),a.addEventListener(\"input\",c),a.addEventListener(\"change\",c),t.elements=[a],t.set=function(t){a.value=t,u.textContent=t}}function uS(t,e){return t===e||t+\"\"==e+\"\"}var cS=function(t,e,r,n,i){return(e=e||new n(t.loader())).initialize(r,XM(t),$M(t),JM(t),i).background(t._background)};function lS(t,e){if(\"string\"==typeof e){if(\"undefined\"==typeof document)return t.error(\"DOM document instance not found.\"),null;if(!(e=document.querySelector(e)))return t.error(\"Signal bind element not found: \"+e),null}if(e)try{e.innerHTML=\"\"}catch(r){e=null,t.error(r)}return e}var hS=function(t,e,r){var n=tl(e),i=n&&n.headless;return i?t.runAsync().then(function(){return cS(t,null,null,i,r).renderAsync(t._scenegraph.root)}):Promise.reject(\"Unrecognized renderer type: \"+e)};function fS(t){return+t||0}var dS=[\"value\",\"update\",\"react\",\"bind\"];function pS(t,e){i(t+' for \"outer\" push: '+c(e))}var mS,gS,vS,yS,wS=function(t,e){var r=t.name;if(\"outer\"===t.push)e.signals[r]||pS(\"No prior signal definition\",r),dS.forEach(function(e){void 0!==t[e]&&pS(\"Invalid property \",e)});else{var n=e.addSignal(r,t.value);!1===t.react&&(n.react=!1),t.bind&&e.addBinding(r,t.bind)}};function xS(t){this.type=t}xS.prototype.visit=function(t){var e,r,n;if(t(this))return 1;for(r=0,n=(e=function(t){switch(t.type){case\"ArrayExpression\":return t.elements;case\"BinaryExpression\":case\"LogicalExpression\":return[t.left,t.right];case\"CallExpression\":var e=t.arguments.slice();return e.unshift(t.callee),e;case\"ConditionalExpression\":return[t.test,t.consequent,t.alternate];case\"MemberExpression\":return[t.object,t.property];case\"ObjectExpression\":return t.properties;case\"Property\":return[t.key,t.value];case\"UnaryExpression\":return[t.argument];case\"Identifier\":case\"Literal\":case\"RawCode\":default:return[]}}(this)).length;r<n;++r)if(e[r].visit(t))return 1};var bS=1,_S=2,MS=3,SS=4,ES=5,TS=6,AS=7,RS=8,kS=\"ArrayExpression\",CS=\"BinaryExpression\",LS=\"CallExpression\",PS=\"ConditionalExpression\",DS=\"Identifier\",OS=\"Literal\",NS=\"LogicalExpression\",IS=\"MemberExpression\",FS=\"ObjectExpression\",zS=\"Property\",US=\"UnaryExpression\",jS=\"Unexpected token %0\",VS=\"Unexpected number\",BS=\"Unexpected string\",HS=\"Unexpected identifier\",GS=\"Unexpected reserved word\",WS=\"Unexpected end of input\",qS=\"Invalid regular expression\",YS=\"Invalid regular expression: missing /\",XS=\"Octal literals are not allowed in strict mode.\",$S=\"Duplicate data property in object literal not allowed in strict mode\",JS=\"ILLEGAL\",ZS=\"Disabled.\",QS=new RegExp(\"[\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u037f\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u052f\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0-\\u08b2\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f8\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191e\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua69d\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua7ad\\ua7b0\\ua7b1\\ua7f7-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\ua9e0-\\ua9e4\\ua9e6-\\ua9ef\\ua9fa-\\ua9fe\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa7e-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uab30-\\uab5a\\uab5c-\\uab5f\\uab64\\uab65\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc]\"),KS=new RegExp(\"[\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0300-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u037f\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u0483-\\u0487\\u048a-\\u052f\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0610-\\u061a\\u0620-\\u0669\\u066e-\\u06d3\\u06d5-\\u06dc\\u06df-\\u06e8\\u06ea-\\u06fc\\u06ff\\u0710-\\u074a\\u074d-\\u07b1\\u07c0-\\u07f5\\u07fa\\u0800-\\u082d\\u0840-\\u085b\\u08a0-\\u08b2\\u08e4-\\u0963\\u0966-\\u096f\\u0971-\\u0983\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bc-\\u09c4\\u09c7\\u09c8\\u09cb-\\u09ce\\u09d7\\u09dc\\u09dd\\u09df-\\u09e3\\u09e6-\\u09f1\\u0a01-\\u0a03\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a59-\\u0a5c\\u0a5e\\u0a66-\\u0a75\\u0a81-\\u0a83\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abc-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ad0\\u0ae0-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3c-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5c\\u0b5d\\u0b5f-\\u0b63\\u0b66-\\u0b6f\\u0b71\\u0b82\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd0\\u0bd7\\u0be6-\\u0bef\\u0c00-\\u0c03\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c39\\u0c3d-\\u0c44\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c58\\u0c59\\u0c60-\\u0c63\\u0c66-\\u0c6f\\u0c81-\\u0c83\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbc-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0cde\\u0ce0-\\u0ce3\\u0ce6-\\u0cef\\u0cf1\\u0cf2\\u0d01-\\u0d03\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d-\\u0d44\\u0d46-\\u0d48\\u0d4a-\\u0d4e\\u0d57\\u0d60-\\u0d63\\u0d66-\\u0d6f\\u0d7a-\\u0d7f\\u0d82\\u0d83\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0de6-\\u0def\\u0df2\\u0df3\\u0e01-\\u0e3a\\u0e40-\\u0e4e\\u0e50-\\u0e59\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb9\\u0ebb-\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0edc-\\u0edf\\u0f00\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f3e-\\u0f47\\u0f49-\\u0f6c\\u0f71-\\u0f84\\u0f86-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1049\\u1050-\\u109d\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u135d-\\u135f\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f8\\u1700-\\u170c\\u170e-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176c\\u176e-\\u1770\\u1772\\u1773\\u1780-\\u17d3\\u17d7\\u17dc\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18aa\\u18b0-\\u18f5\\u1900-\\u191e\\u1920-\\u192b\\u1930-\\u193b\\u1946-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19b0-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a1b\\u1a20-\\u1a5e\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1aa7\\u1ab0-\\u1abd\\u1b00-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1b80-\\u1bf3\\u1c00-\\u1c37\\u1c40-\\u1c49\\u1c4d-\\u1c7d\\u1cd0-\\u1cd2\\u1cd4-\\u1cf6\\u1cf8\\u1cf9\\u1d00-\\u1df5\\u1dfc-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u200c\\u200d\\u203f\\u2040\\u2054\\u2071\\u207f\\u2090-\\u209c\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d7f-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2de0-\\u2dff\\u2e2f\\u3005-\\u3007\\u3021-\\u302f\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u3099\\u309a\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua62b\\ua640-\\ua66f\\ua674-\\ua67d\\ua67f-\\ua69d\\ua69f-\\ua6f1\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua7ad\\ua7b0\\ua7b1\\ua7f7-\\ua827\\ua840-\\ua873\\ua880-\\ua8c4\\ua8d0-\\ua8d9\\ua8e0-\\ua8f7\\ua8fb\\ua900-\\ua92d\\ua930-\\ua953\\ua960-\\ua97c\\ua980-\\ua9c0\\ua9cf-\\ua9d9\\ua9e0-\\ua9fe\\uaa00-\\uaa36\\uaa40-\\uaa4d\\uaa50-\\uaa59\\uaa60-\\uaa76\\uaa7a-\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaef\\uaaf2-\\uaaf6\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uab30-\\uab5a\\uab5c-\\uab5f\\uab64\\uab65\\uabc0-\\uabea\\uabec\\uabed\\uabf0-\\uabf9\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe00-\\ufe0f\\ufe20-\\ufe2d\\ufe33\\ufe34\\ufe4d-\\ufe4f\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff10-\\uff19\\uff21-\\uff3a\\uff3f\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc]\");function tE(t,e){if(!t)throw new Error(\"ASSERT: \"+e)}function eE(t){return 48<=t&&t<=57}function rE(t){return 0<=\"0123456789abcdefABCDEF\".indexOf(t)}function nE(t){return 0<=\"01234567\".indexOf(t)}function iE(t){return 10===t||13===t||8232===t||8233===t}function oE(t){return 36===t||95===t||65<=t&&t<=90||97<=t&&t<=122||92===t||128<=t&&QS.test(String.fromCharCode(t))}function sE(t){return 36===t||95===t||65<=t&&t<=90||97<=t&&t<=122||48<=t&&t<=57||92===t||128<=t&&KS.test(String.fromCharCode(t))}var aE={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function uE(){for(var t,e;gS<vS&&(32===(e=t=mS.charCodeAt(gS))||9===e||11===e||12===e||160===e||5760<=e&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)||iE(t));)++gS}function cE(t){var e,r,n,i=0;for(r=\"u\"===t?4:2,e=0;e<r;++e)gS<vS&&rE(mS[gS])?(n=mS[gS++],i=16*i+\"0123456789abcdef\".indexOf(n.toLowerCase())):_E({},jS,JS);return String.fromCharCode(i)}function lE(){var t,e;for(e=0,\"}\"===(t=mS[gS])&&_E({},jS,JS);gS<vS&&rE(t=mS[gS++]);)e=16*e+\"0123456789abcdef\".indexOf(t.toLowerCase());return(1114111<e||\"}\"!==t)&&_E({},jS,JS),e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}function hE(){var t,e;for(t=mS.charCodeAt(gS++),e=String.fromCharCode(t),92===t&&(117!==mS.charCodeAt(gS)&&_E({},jS,JS),++gS,(t=cE(\"u\"))&&\"\\\\\"!==t&&oE(t.charCodeAt(0))||_E({},jS,JS),e=t);gS<vS&&sE(t=mS.charCodeAt(gS));)++gS,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==mS.charCodeAt(gS)&&_E({},jS,JS),++gS,(t=cE(\"u\"))&&\"\\\\\"!==t&&sE(t.charCodeAt(0))||_E({},jS,JS),e+=t);return e}function fE(){var t,e,r,n,i=gS,o=mS.charCodeAt(gS),s=mS[gS];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++gS,{type:AS,value:String.fromCharCode(o),start:i,end:gS};default:if(61===(t=mS.charCodeAt(gS+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return gS+=2,{type:AS,value:String.fromCharCode(o)+String.fromCharCode(t),start:i,end:gS};case 33:case 61:return 61===mS.charCodeAt(gS+=2)&&++gS,{type:AS,value:mS.slice(i,gS),start:i,end:gS}}}return\">>>=\"===(n=mS.substr(gS,4))?{type:AS,value:n,start:i,end:gS+=4}:\">>>\"===(r=n.substr(0,3))||\"<<=\"===r||\">>=\"===r?{type:AS,value:r,start:i,end:gS+=3}:s===(e=r.substr(0,2))[1]&&0<=\"+-<>&|\".indexOf(s)||\"=>\"===e?{type:AS,value:e,start:i,end:gS+=2}:0<=\"<>=!+-*%&|^/\".indexOf(s)?{type:AS,value:s,start:i,end:++gS}:void _E({},jS,JS)}function dE(){var t,e,r;if(tE(eE((r=mS[gS]).charCodeAt(0))||\".\"===r,\"Numeric literal must start with a decimal digit or a decimal point\"),e=gS,t=\"\",\".\"!==r){if(t=mS[gS++],r=mS[gS],\"0\"===t){if(\"x\"===r||\"X\"===r)return++gS,function(t){for(var e=\"\";gS<vS&&rE(mS[gS]);)e+=mS[gS++];return 0===e.length&&_E({},jS,JS),oE(mS.charCodeAt(gS))&&_E({},jS,JS),{type:TS,value:parseInt(\"0x\"+e,16),start:t,end:gS}}(e);if(nE(r))return function(t){for(var e=\"0\"+mS[gS++];gS<vS&&nE(mS[gS]);)e+=mS[gS++];return(oE(mS.charCodeAt(gS))||eE(mS.charCodeAt(gS)))&&_E({},jS,JS),{type:TS,value:parseInt(e,8),octal:!0,start:t,end:gS}}(e);r&&eE(r.charCodeAt(0))&&_E({},jS,JS)}for(;eE(mS.charCodeAt(gS));)t+=mS[gS++];r=mS[gS]}if(\".\"===r){for(t+=mS[gS++];eE(mS.charCodeAt(gS));)t+=mS[gS++];r=mS[gS]}if(\"e\"===r||\"E\"===r)if(t+=mS[gS++],\"+\"!==(r=mS[gS])&&\"-\"!==r||(t+=mS[gS++]),eE(mS.charCodeAt(gS)))for(;eE(mS.charCodeAt(gS));)t+=mS[gS++];else _E({},jS,JS);return oE(mS.charCodeAt(gS))&&_E({},jS,JS),{type:TS,value:parseFloat(t),start:e,end:gS}}function pE(){var t;return uE(),vS<=gS?{type:_S,start:gS,end:gS}:oE(t=mS.charCodeAt(gS))?function(){var t,e;return t=gS,{type:1===(e=92===mS.charCodeAt(gS)?hE():function(){var t,e;for(t=gS++;gS<vS;){if(92===(e=mS.charCodeAt(gS)))return gS=t,hE();if(!sE(e))break;++gS}return mS.slice(t,gS)}()).length?MS:aE.hasOwnProperty(e)?SS:\"null\"===e?ES:\"true\"===e||\"false\"===e?bS:MS,value:e,start:t,end:gS}}():40===t||41===t||59===t?fE():39===t||34===t?function(){var t,e,r,n,i=\"\",o=!1;for(tE(\"'\"===(t=mS[gS])||'\"'===t,\"String literal must starts with a quote\"),e=gS,++gS;gS<vS;){if((r=mS[gS++])===t){t=\"\";break}if(\"\\\\\"===r)if((r=mS[gS++])&&iE(r.charCodeAt(0)))\"\\r\"===r&&\"\\n\"===mS[gS]&&++gS;else switch(r){case\"u\":case\"x\":\"{\"===mS[gS]?(++gS,i+=lE()):i+=cE(r);break;case\"n\":i+=\"\\n\";break;case\"r\":i+=\"\\r\";break;case\"t\":i+=\"\\t\";break;case\"b\":i+=\"\\b\";break;case\"f\":i+=\"\\f\";break;case\"v\":i+=\"\\v\";break;default:nE(r)?(0!==(n=\"01234567\".indexOf(r))&&(o=!0),gS<vS&&nE(mS[gS])&&(o=!0,n=8*n+\"01234567\".indexOf(mS[gS++]),0<=\"0123\".indexOf(r)&&gS<vS&&nE(mS[gS])&&(n=8*n+\"01234567\".indexOf(mS[gS++]))),i+=String.fromCharCode(n)):i+=r}else{if(iE(r.charCodeAt(0)))break;i+=r}}return\"\"!==t&&_E({},jS,JS),{type:RS,value:i,octal:o,start:e,end:gS}}():46===t?eE(mS.charCodeAt(gS+1))?dE():fE():eE(t)?dE():fE()}function mE(){var t;return gS=(t=yS).end,yS=pE(),gS=t.end,t}function gE(){var t;t=gS,yS=pE(),gS=t}function vE(t,e,r){var n=new xS(\"||\"===t||\"&&\"===t?NS:CS);return n.operator=t,n.left=e,n.right=r,n}function yE(t){var e=new xS(DS);return e.name=t,e}function wE(t){var e=new xS(OS);return e.value=t.value,e.raw=mS.slice(t.start,t.end),t.regex&&(\"//\"===e.raw&&(e.raw=\"/(?:)/\"),e.regex=t.regex),e}function xE(t,e,r){var n=new xS(IS);return n.computed=\"[\"===t,n.object=e,n.property=r,n.computed||(r.member=!0),n}function bE(t,e,r){var n=new xS(zS);return n.key=e,n.value=r,n.kind=t,n}function _E(t,e){var r,n=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\\d)/g,function(t,e){return tE(e<n.length,\"Message reference must be in range\"),n[e]});throw(r=new Error(i)).index=gS,r.description=i,r}function ME(t){t.type===_S&&_E(t,WS),t.type===TS&&_E(t,VS),t.type===RS&&_E(t,BS),t.type===MS&&_E(t,HS),t.type===SS&&_E(t,GS),_E(t,jS,t.value)}function SE(t){var e=mE();e.type===AS&&e.value===t||ME(e)}function EE(t){return yS.type===AS&&yS.value===t}function TE(t){return yS.type===SS&&yS.value===t}function AE(){var t;return gS=yS.start,(t=mE()).type===RS||t.type===TS?(t.octal&&_E(t,XS),wE(t)):yE(t.value)}var RE={if:1,this:1};function kE(){var t=[];if(SE(\"(\"),!EE(\")\"))for(;gS<vS&&(t.push(OE()),!EE(\")\"));)SE(\",\");return SE(\")\"),t}function CE(){var t,e;return gS=yS.start,(e=t=mE()).type!==MS&&e.type!==SS&&e.type!==bS&&e.type!==ES&&ME(t),yE(t.value)}function LE(){var t=function(){var t,e,r,n,i;for(t=function(){var t,e,r,n;if(EE(\"(\"))return SE(\"(\"),n=NE(),SE(\")\"),n;if(EE(\"[\"))return function(){var t,e,r=[];for(gS=yS.start,SE(\"[\");!EE(\"]\");)EE(\",\")?(mE(),r.push(null)):(r.push(OE()),EE(\"]\")||SE(\",\"));return mE(),t=r,(e=new xS(kS)).elements=t,e}();if(EE(\"{\"))return function(){var t,e,r,n,i,o,s,a=[],u={},c=String;for(gS=yS.start,SE(\"{\");!EE(\"}\");)i=n=r=void 0,gS=yS.start,e=\"$\"+((t=(r=yS).type===MS?(i=AE(),SE(\":\"),bE(\"init\",i,OE())):r.type!==_S&&r.type!==AS?(n=AE(),SE(\":\"),bE(\"init\",n,OE())):void ME(r)).key.type===DS?t.key.name:c(t.key.value)),Object.prototype.hasOwnProperty.call(u,e)?_E({},$S):u[e]=!0,a.push(t),EE(\"}\")||SE(\",\");return SE(\"}\"),o=a,(s=new xS(FS)).properties=o,s}();if(gS=yS.start,(t=yS.type)===MS||RE[yS.value])r=yE(mE().value);else if(t===RS||t===TS)yS.octal&&_E(yS,XS),r=wE(mE());else{if(t===SS)throw new Error(ZS);t===bS?((e=mE()).value=\"true\"===e.value,r=wE(e)):t===ES?((e=mE()).value=null,r=wE(e)):EE(\"/\")||EE(\"/=\")?(r=wE(function(){var t,e,r,n;return yS=null,uE(),t=gS,e=function(){var t,e,r,n;for(tE(\"/\"===(t=mS[gS]),\"Regular expression literal must start with a slash\"),e=mS[gS++],n=r=!1;gS<vS;)if(e+=t=mS[gS++],\"\\\\\"===t)iE((t=mS[gS++]).charCodeAt(0))&&_E({},YS),e+=t;else if(iE(t.charCodeAt(0)))_E({},YS);else if(r)\"]\"===t&&(r=!1);else{if(\"/\"===t){n=!0;break}\"[\"===t&&(r=!0)}return n||_E({},YS),{value:e.substr(1,e.length-2),literal:e}}(),r=function(){var t,e,r;for(r=e=\"\";gS<vS&&sE((t=mS[gS]).charCodeAt(0));)++gS,\"\\\\\"===t&&gS<vS?_E({},jS,JS):(r+=t,e+=t);return 0<=r.search(/[^gimuy]/g)&&_E({},qS,r),{value:r,literal:e}}(),n=function(t,e){var r=t;0<=e.indexOf(\"u\")&&(r=r.replace(/\\\\u\\{([0-9a-fA-F]+)\\}/g,function(t,e){if(parseInt(e,16)<=1114111)return\"x\";_E({},qS)}).replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,\"x\"));try{new RegExp(r)}catch(t){_E({},qS)}try{return new RegExp(t,e)}catch(t){return null}}(e.value,r.value),{literal:e.literal+r.literal,value:n,regex:{pattern:e.value,flags:r.value},start:t,end:gS}}()),gE()):ME(mE())}return r}();;)if(EE(\".\"))SE(\".\"),t=xE(\".\",t,CE());else if(EE(\"(\"))r=t,n=kE(),i=void 0,(i=new xS(LS)).callee=r,i.arguments=n,t=i;else{if(!EE(\"[\"))break;e=void 0,SE(\"[\"),e=NE(),SE(\"]\"),t=xE(\"[\",t,e)}return t}();if(yS.type===AS&&(EE(\"++\")||EE(\"--\")))throw new Error(ZS);return t}function PE(){var t,e,r,n,i;if(yS.type!==AS&&yS.type!==SS)e=LE();else{if(EE(\"++\")||EE(\"--\"))throw new Error(ZS);if(EE(\"+\")||EE(\"-\")||EE(\"~\")||EE(\"!\"))t=mE(),e=PE(),r=t.value,n=e,(i=new xS(US)).operator=r,i.argument=n,i.prefix=!0,e=i;else{if(TE(\"delete\")||TE(\"void\")||TE(\"typeof\"))throw new Error(ZS);e=LE()}}return e}function DE(t){var e=0;if(t.type!==AS&&t.type!==SS)return 0;switch(t.value){case\"||\":e=1;break;case\"&&\":e=2;break;case\"|\":e=3;break;case\"^\":e=4;break;case\"&\":e=5;break;case\"==\":case\"!=\":case\"===\":case\"!==\":e=6;break;case\"<\":case\">\":case\"<=\":case\">=\":case\"instanceof\":case\"in\":e=7;break;case\"<<\":case\">>\":case\">>>\":e=8;break;case\"+\":case\"-\":e=9;break;case\"*\":case\"/\":case\"%\":e=11}return e}function OE(){var t,e,r,n,i,o;return t=function(){var t,e,r,n,i,o,s,a,u,c;if(t=yS,u=PE(),0===(i=DE(n=yS)))return u;for(n.prec=i,mE(),e=[t,yS],o=[u,n,s=PE()];0<(i=DE(yS));){for(;2<o.length&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,u=o.pop(),e.pop(),r=vE(a,u,s),o.push(r);(n=mE()).prec=i,o.push(n),e.push(yS),r=PE(),o.push(r)}for(r=o[c=o.length-1],e.pop();1<c;)e.pop(),r=vE(o[c-1].value,o[c-2],r),c-=2;return r}(),EE(\"?\")&&(mE(),e=OE(),SE(\":\"),r=t,n=e,i=OE(),(o=new xS(PS)).test=r,o.consequent=n,o.alternate=i,t=o),t}function NE(){var t=OE();if(EE(\",\"))throw new Error(ZS);return t}var IE={NaN:\"NaN\",E:\"Math.E\",LN2:\"Math.LN2\",LN10:\"Math.LN10\",LOG2E:\"Math.LOG2E\",LOG10E:\"Math.LOG10E\",PI:\"Math.PI\",SQRT1_2:\"Math.SQRT1_2\",SQRT2:\"Math.SQRT2\",MIN_VALUE:\"Number.MIN_VALUE\",MAX_VALUE:\"Number.MAX_VALUE\"},FE=function(t){function e(e,r,n){return function(i){return o=e,a=r,u=n,c=t((s=i)[0]),a&&(c=a+\"(\"+c+\")\",0===a.lastIndexOf(\"new \",0)&&(c=\"(\"+c+\")\")),c+\".\"+o+(u<0?\"\":0===u?\"()\":\"(\"+s.slice(1).map(t).join(\",\")+\")\");var o,s,a,u,c}}var r=\"new Date\",n=\"String\";return{isNaN:\"isNaN\",isFinite:\"isFinite\",abs:\"Math.abs\",acos:\"Math.acos\",asin:\"Math.asin\",atan:\"Math.atan\",atan2:\"Math.atan2\",ceil:\"Math.ceil\",cos:\"Math.cos\",exp:\"Math.exp\",floor:\"Math.floor\",log:\"Math.log\",max:\"Math.max\",min:\"Math.min\",pow:\"Math.pow\",random:\"Math.random\",round:\"Math.round\",sin:\"Math.sin\",sqrt:\"Math.sqrt\",tan:\"Math.tan\",clamp:function(e){e.length<3&&i(\"Missing arguments to clamp function.\"),3<e.length&&i(\"Too many arguments to clamp function.\");var r=e.map(t);return\"Math.max(\"+r[1]+\", Math.min(\"+r[2]+\",\"+r[0]+\"))\"},now:\"Date.now\",utc:\"Date.UTC\",datetime:r,date:e(\"getDate\",r,0),day:e(\"getDay\",r,0),year:e(\"getFullYear\",r,0),month:e(\"getMonth\",r,0),hours:e(\"getHours\",r,0),minutes:e(\"getMinutes\",r,0),seconds:e(\"getSeconds\",r,0),milliseconds:e(\"getMilliseconds\",r,0),time:e(\"getTime\",r,0),timezoneoffset:e(\"getTimezoneOffset\",r,0),utcdate:e(\"getUTCDate\",r,0),utcday:e(\"getUTCDay\",r,0),utcyear:e(\"getUTCFullYear\",r,0),utcmonth:e(\"getUTCMonth\",r,0),utchours:e(\"getUTCHours\",r,0),utcminutes:e(\"getUTCMinutes\",r,0),utcseconds:e(\"getUTCSeconds\",r,0),utcmilliseconds:e(\"getUTCMilliseconds\",r,0),length:e(\"length\",null,-1),indexof:e(\"indexOf\",null),lastindexof:e(\"lastIndexOf\",null),slice:e(\"slice\",null),parseFloat:\"parseFloat\",parseInt:\"parseInt\",upper:e(\"toUpperCase\",n,0),lower:e(\"toLowerCase\",n,0),substring:e(\"substring\",n),replace:e(\"replace\",n),regexp:\"RegExp\",test:e(\"test\",\"RegExp\"),if:function(e){e.length<3&&i(\"Missing arguments to if function.\"),3<e.length&&i(\"Too many arguments to if function.\");var r=e.map(t);return\"(\"+r[0]+\"?\"+r[1]+\":\"+r[2]+\")\"}}},zE={};function UE(t,e,r){var n=t+\":\"+r,i=zE[n];return i&&i[0]===e||(zE[n]=i=[e,e(r)]),i[1]}function jE(t,e){return UE(\"timeFormat\",rr,e)(t)}var VE=new Date(2e3,0,1);function BE(t,e,r){return VE.setMonth(t),VE.setDate(e),jE(VE,r)}function HE(t,e,r){try{t[e].apply(t,[\"EXPRESSION\"].concat([].slice.call(r)))}catch(e){t.warn(e)}return r[r.length-1]}var GE=\"undefined\"!=typeof window&&window||null,WE=\"Literal\",qE=\"Identifier\",YE=\"@\",XE=\"%\",$E=\":\";function JE(t,e){var r;return N(t)?t:u(t)?(r=e.scales[t])&&r.value:void 0}function ZE(t,e,r){var n=XE+r;if(!e.hasOwnProperty(n))try{e[n]=t.scaleRef(r)}catch(t){}}function QE(t,e,r,n){if(e[0].type===WE)ZE(r,n,e[0].value);else if(e[0].type===qE)for(t in r.scales)ZE(r,n,t)}function KE(t,e){return function(r,n,i){if(r){var o=JE(r,(i||this).context);return o&&o.path[t](n)}return e(n)}}var tT=KE(\"area\",function(t){return wv.reset(),vv(t,xv),2*wv}),eT=KE(\"bounds\",function(t){var e,r,n,i,o,s,a;if(fv=hv=-(cv=lv=1/0),Pv=[],vv(t,Nv),r=Pv.length){for(Pv.sort(Gv),e=1,o=[n=Pv[0]];e<r;++e)Wv(n,(i=Pv[e])[0])||Wv(n,i[1])?(Hv(n[0],i[1])>Hv(n[0],n[1])&&(n[1]=i[1]),Hv(i[0],n[1])>Hv(n[0],n[1])&&(n[0]=i[0])):o.push(n=i);for(s=-1/0,e=0,n=o[r=o.length-1];e<=r;n=i,++e)(a=Hv(n[1],(i=o[e])[0]))>s&&(s=a,cv=i[0],hv=n[1])}return Pv=Dv=null,cv===1/0||lv===1/0?[[NaN,NaN],[NaN,NaN]]:[[cv,lv],[hv,fv]]}),rT=KE(\"centroid\",function(t){qv=Yv=Xv=$v=Jv=Zv=Qv=Kv=ty=ey=ry=0,vv(t,uy);var e=ty,r=ey,n=ry,i=e*e+r*r+n*n;return i<1e-12&&(e=Zv,r=Qv,n=Kv,Yv<Lg&&(e=Xv,r=$v,n=Jv),(i=e*e+r*r+n*n)<1e-12)?[NaN,NaN]:[jg(r,e)*Ig,Zg(n/Xg(i))*Ig]});function nT(t){var e=this.context.data[t];return e?e.values.value:[]}function iT(t,e,r,n){e[0].type!==WE&&i(\"First argument to data functions must be a string literal.\");var o=e[0].value,s=$E+o;n.hasOwnProperty(s)||(n[s]=r.getData(o).tuplesRef())}var oT={};function sT(t){return t.data}function aT(t,e){var r=nT.call(e,t);return r.root&&r.root.lookup||oT}var uT=function(t,e,r,n){var i,o=e[0],s=e[e.length-1];return s<o&&(i=o,o=s,s=i),n=void 0===n||n,((r=void 0===r||r)?o<=t:o<t)&&(n?t<=s:t<s)};function cT(t,e){return t===e||t!=t&&e!=e||!(!s(t)||!s(e)||t.length!==e.length)&&function(t,e){for(var r=0,n=t.length;r<n;++r)if(!cT(t[r],e[r]))return!1;return!0}(t,e)}function lT(t){return function(e){for(var r in t)if(!cT(e[r],t[r]))return!1;return!0}}var hT=\"bin_\",fT=\"intersect\",dT=\"union\",pT=\"index:unit\";function mT(t,e){for(var r,n=e.fields,i=e.values,o=e.getter||(e.getter=[]),s=n.length,a=0;a<s;++a)if(o[a]=o[a]||l(n[a]),r=o[a](t),W(r)&&(r=_(r)),W(i[a])&&(i[a]=_(i[a])),e[hT+n[a]]){if(W(i[a][0])&&(i[a]=i[a].map(_)),!uT(r,i[a],!0,!1))return!1}else if(r!==i[a])return!1;return!0}function gT(t,e){for(var r,n,i=e.intervals,o=i.length,s=0;s<o;++s){if(r=i[s].extent,n=(i[s].getter||(i[s].getter=l(i[s].field)))(t),!r||r[0]===r[1])return!1;if(W(n)&&(n=_(n)),W(r[0])&&(r=i[s].extent=r.map(_)),q(r[0])&&!uT(n,r))return!1;if(u(r[0])&&r.indexOf(n)<0)return!1}return!0}function vT(t,e,r,n){for(var i,o,s,a,u,c=this.context.data[t],l=c?c.values.value:[],h=c?c[pT]&&c[pT].value:void 0,f=r===fT,d=l.length,p=0;p<d;++p)if(i=l[p],h&&f){if(-1===(s=(o=o||{})[a=i.unit]||0))continue;if(u=n(e,i),o[a]=u?-1:++s,u&&1===h.size)return!0;if(!u&&s===h.get(a).count)return!1}else if(f^(u=n(e,i)))return u;return d&&f}function yT(t,e,r){return vT.call(this,t,e,r,mT)}function wT(t,e,r,n){e[0].type!==WE&&i(\"First argument to indata must be a string literal.\");var o=e[0].value,s=YE+\"unit\";(2<=e.length&&e[e.length-1].value)!==fT||n.hasOwnProperty(s)||(n[s]=r.getData(o).indataRef(r,\"unit\")),iT(0,e,r,n)}function xT(t,e,r,n){var i,o,s,a,u,c=this.context.data[t],l=c?c.values.value:[],h=c?c[pT]&&c[pT].value:void 0,f=l[0],d=0;if(f){for(i=e?f.encodings.length:f.fields.length;d<i;++d)if(e&&f.encodings[d]===e||r&&f.fields[d]===r){o=d,a=f[hT+f.fields[d]];break}return h&&1===h.size&&(n=dT),h&&n===fT?(u=l.reduce(function(t,e){return(t[e.unit]||(t[e.unit]=[])).push({unit:e.unit,value:e.values[o]}),t},{}),s=Object.keys(u).map(function(t){return{unit:t,value:a?_T(u[t],dT):bT(u[t],dT)}})):s=l.map(function(t){return{unit:t.unit,value:t.values[o]}}),a?_T(s,n):bT(s,n)}}function bT(t,e){for(var r,n,i,o,s={},a=0,u={},c=[],l=0,h=t.length;l<h;++l)n=(r=t[l]).unit,o=r.value,s[n]||(s[n]=++a),(i=u[o])||(u[o]=i={value:o,units:{},count:0}),i.units[n]||(i.units[n]=++i.count);for(o in u)i=u[o],e===fT&&i.count!==a||c.push(i.value);return c.length?c:void 0}function _T(t,e){for(var r,n,i,o,s=e===fT?ST:MT,a=0,u=t.length;a<u;++a)W((r=t[a].value)[0])&&(r=r.map(_)),(o=r[1])<(i=r[0])&&(o=r[0],i=r[1]),n=n?s(n,i,o):[i,o];return n&&n.length&&+n[0]!=+n[1]?n:void 0}function MT(t,e,r){return t[0]>e&&(t[0]=e),t[1]<r&&(t[1]=r),t}function ST(t,e,r){return r<t[0]||t[1]<e?[]:(t[0]<e&&(t[0]=e),t[1]>r&&(t[1]=r),t)}var ET={random:function(){return t.random()},isArray:s,isBoolean:G,isDate:W,isNumber:q,isObject:a,isRegExp:Y,isString:u,isTuple:ut,toBoolean:Q,toDate:tt,toNumber:_,toString:et,pad:Z,peek:b,truncate:nt,rgb:_h,lab:zh,hcl:Gh,hsl:Eh,sequence:ai,format:function(t,e){return UE(\"format\",ad,e)(t)},utcFormat:function(t,e){return UE(\"utcFormat\",ir,e)(t)},utcParse:function(t,e){return UE(\"utcParse\",or,e)(t)},timeFormat:jE,timeParse:function(t,e){return UE(\"timeParse\",nr,e)(t)},monthFormat:function(t){return BE(t,1,\"%B\")},monthAbbrevFormat:function(t){return BE(t,1,\"%b\")},dayFormat:function(t){return BE(0,2+t,\"%A\")},dayAbbrevFormat:function(t){return BE(0,2+t,\"%a\")},quarter:function(t){return 1+~~(new Date(t).getMonth()/3)},utcquarter:function(t){return 1+~~(new Date(t).getUTCMonth()/3)},warn:function(){return HE(this.context.dataflow,\"warn\",arguments)},info:function(){return HE(this.context.dataflow,\"info\",arguments)},debug:function(){return HE(this.context.dataflow,\"debug\",arguments)},inScope:function(t){var e=this.context.group,r=!1;if(e)for(;t;){if(t===e){r=!0;break}t=t.mark.group}return r},clampRange:function(t,e,r){var n,i=t[0],o=t[1];return o<i&&(n=o,o=i,i=n),r-e<=(n=o-i)?[e,r]:[Math.min(Math.max(i,e),r-n),Math.min(Math.max(o,n),r)]},pinchDistance:function(t){var e=t.touches,r=e[0].clientX-e[1].clientX,n=e[0].clientY-e[1].clientY;return Math.sqrt(r*r+n*n)},pinchAngle:function(t){var e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)},screen:function(){return GE?GE.screen:{}},containerSize:function(){var t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]},windowSize:function(){return GE?[GE.innerWidth,GE.innerHeight]:[void 0,void 0]},span:function(t){return t[t.length-1]-t[0]||0},flush:function(t,e,r,n,i,o){var s=Math.abs(e-t[0]),a=Math.abs(b(t)-e);return s<a&&s<=r?n:a<=r?i:o},bandspace:function(t,e,r){return Jl(t||0,e||0,r||0)},inrange:uT,setdata:function(t,e){var r=this.context.dataflow;return r.pulse(this.context.data[t].input,r.changeset().remove(g).insert(e)),1},pathShape:function(t){var e=null;return function(r){return r?ma(r,e=e||ua(t)):t}},panLinear:A,panLog:R,panPow:k,zoomLinear:L,zoomLog:P,zoomPow:D,encode:function(t,e,r){if(t){var n=this.context.dataflow;n.pulse(t.mark.source,n.changeset().encode(t,e))}return void 0!==r?r:t},modify:function(t,e,r,n,i,o){var a,u,c=this.context.dataflow,l=this.context.data[t],h=l.input,f=l.changes,d=c.stamp();if(!1===c._trigger||!(h.value.length||e||n))return 0;if((!f||f.stamp<d)&&(l.changes=f=c.changeset(),f.stamp=d,c.runAfter(function(){l.modified=!0,c.pulse(h,f).run()},!0,1)),r&&(a=!0===r?g:s(r)||ut(r)?r:lT(r),f.remove(a)),e&&f.insert(e),n&&(a=lT(n),h.value.some(a)?f.remove(a):f.insert(n)),i)for(u in o)f.modify(i,u,o[u]);return 1}},TT=[\"view\",\"item\",\"group\",\"xy\",\"x\",\"y\"],AT=\"this.\",RT={};function kT(t,e,r){return 1===arguments.length?ET[t]:(ET[t]=e,r&&(RT[t]=r),LT&&(LT.functions[t]=AT+t),this)}kT(\"bandwidth\",function(t,e){var r=JE(t,(e||this).context);return r&&r.bandwidth?r.bandwidth():0},QE),kT(\"copy\",function(t,e){var r=JE(t,(e||this).context);return r?r.copy():void 0},QE),kT(\"domain\",function(t,e){var r=JE(t,(e||this).context);return r?r.domain():[]},QE),kT(\"range\",function(t,e){var r=JE(t,(e||this).context);return r&&r.range?r.range():[]},QE),kT(\"invert\",function(t,e,r){var n=JE(t,(r||this).context);return n?s(e)?(n.invertRange||n.invert)(e):(n.invert||n.invertExtent)(e):void 0},QE),kT(\"scale\",function(t,e,r){var n=JE(t,(r||this).context);return n?n(e):void 0},QE),kT(\"gradient\",function(t,e,r,n,i){t=JE(t,(i||this).context);var o=jo(e,r),s=t.domain(),a=s[0],u=s[s.length-1],c=bm(t,a,u);t.ticks&&(a!==(s=t.ticks(+n||15))[0]&&s.unshift(a),u!==s[s.length-1]&&s.push(u));for(var l=0,h=s.length;l<h;++l)o.stop(c(s[l]),t(s[l]));return o},QE),kT(\"geoArea\",tT,QE),kT(\"geoBounds\",eT,QE),kT(\"geoCentroid\",rT,QE),kT(\"geoShape\",function(t,e,r){var n=JE(t,(r||this).context);return function(t){return n?n.path.context(t)(e):\"\"}},QE),kT(\"indata\",function(t,e,r){var n=this.context.data[t][\"index:\"+e],i=n?n.value.get(r):void 0;return i?i.count:i},function(t,e,r,n){e[0].type!==WE&&i(\"First argument to indata must be a string literal.\"),e[1].type!==WE&&i(\"Second argument to indata must be a string literal.\");var o=e[0].value,s=e[1].value,a=YE+s;n.hasOwnProperty(a)||(n[a]=r.getData(o).indataRef(r,s))}),kT(\"data\",nT,iT),kT(\"vlSingle\",yT,iT),kT(\"vlSingleDomain\",xT,iT),kT(\"vlMulti\",yT,wT),kT(\"vlMultiDomain\",xT,wT),kT(\"vlInterval\",function(t,e,r){return vT.call(this,t,e,r,gT)},iT),kT(\"vlIntervalDomain\",function(t,e,r,n){var i,o,s,a,u,c=this.context.data[t],l=c?c.values.value:[],h=l[0],f=0;if(h){for(i=h.intervals.length;f<i;++f)if(o=h.intervals[f],e&&o.encoding===e||r&&o.field===r){if(!o.extent)return;s=f,u=2<o.extent.length;break}return a=l.reduce(function(t,e){var r=e.intervals[s].extent,n=u?r.map(function(t){return{unit:e.unit,value:t}}):{unit:e.unit,value:r};return u?t.push.apply(t,n):t.push(n),t},[]),u?bT(a,n):_T(a,n)}},iT),kT(\"treePath\",function(t,e,r){var n=aT(t,this),i=n[e],o=n[r];return i&&o?i.path(o).map(sT):void 0},iT),kT(\"treeAncestors\",function(t,e){var r=aT(t,this)[e];return r?r.ancestors().map(sT):void 0},iT);var CT={blacklist:[\"_\"],whitelist:[\"datum\",\"event\",\"item\"],fieldvar:\"datum\",globalvar:function(t){return\"_[\"+c(\"$\"+t)+\"]\"},functions:function(t){var e=FE(t);for(var r in TT.forEach(function(t){e[t]=\"event.vega.\"+t}),ET)e[r]=AT+r;return e},constants:IE,visitors:RT},LT=function(t){var e=(t=t||{}).whitelist?rt(t.whitelist):{},r=t.blacklist?rt(t.blacklist):{},n=t.constants||IE,o=(t.functions||FE)(d),s=t.globalvar,a=t.fieldvar,c={},l={},h=0,f=N(s)?s:function(t){return s+'[\"'+t+'\"]'};function d(t){if(u(t))return t;var e=p[t.type];return null==e&&i(\"Unsupported type: \"+t.type),e(t)}var p={Literal:function(t){return t.raw},Identifier:function(t){var o=t.name;return 0<h?o:r.hasOwnProperty(o)?i(\"Illegal identifier: \"+o):n.hasOwnProperty(o)?n[o]:e.hasOwnProperty(o)?o:(c[o]=1,f(o))},MemberExpression:function(t){var e=!t.computed,r=d(t.object);e&&(h+=1);var n=d(t.property);return r===a&&(l[n]=1),e&&(h-=1),r+(e?\".\"+n:\"[\"+n+\"]\")},CallExpression:function(t){\"Identifier\"!==t.callee.type&&i(\"Illegal callee type: \"+t.callee.type);var e=t.callee.name,r=t.arguments,n=o.hasOwnProperty(e)&&o[e];return n||i(\"Unrecognized function: \"+e),N(n)?n(r):n+\"(\"+r.map(d).join(\",\")+\")\"},ArrayExpression:function(t){return\"[\"+t.elements.map(d).join(\",\")+\"]\"},BinaryExpression:function(t){return\"(\"+d(t.left)+t.operator+d(t.right)+\")\"},UnaryExpression:function(t){return\"(\"+t.operator+d(t.argument)+\")\"},ConditionalExpression:function(t){return\"(\"+d(t.test)+\"?\"+d(t.consequent)+\":\"+d(t.alternate)+\")\"},LogicalExpression:function(t){return\"(\"+d(t.left)+t.operator+d(t.right)+\")\"},ObjectExpression:function(t){return\"{\"+t.properties.map(d).join(\",\")+\"}\"},Property:function(t){h+=1;var e=d(t.key);return h-=1,e+\":\"+d(t.value)}};function m(t){var e={code:d(t),globals:Object.keys(c),fields:Object.keys(l)};return c={},l={},e}return m.functions=o,m.constants=n,m}(CT),PT=function(t,e,r){var n,o,s={};try{n=function(t){gS=0,vS=(mS=t).length,yS=null,gE();var e=NE();if(yS.type!==_S)throw new Error(\"Unexpect token after expression.\");return e}(t)}catch(r){i(\"Expression parse error: \"+c(t))}return n.visit(function(t){if(\"CallExpression\"===t.type){var r=t.callee.name,n=CT.visitors[r];n&&n(r,t.arguments,e,s)}}),(o=LT(n)).globals.forEach(function(t){var r=\"$\"+t;!s.hasOwnProperty(r)&&e.getSignal(t)&&(s[r]=e.signalRef(t))}),{$expr:r?r+\"return(\"+o.code+\");\":o.code,$fields:o.fields,$params:s}};function DT(t,e,r,n){this.id=-1,this.type=t,this.value=e,this.params=r,n&&(this.parent=n)}function OT(t,e,r,n){return new DT(t,e,r,n)}function NT(t,e){return OT(\"operator\",t,e)}function IT(t){var e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}var FT={$tupleid:1,toString:function(){return\":_tupleid_:\"}};function zT(t,e){return e?{$field:t,$name:e}:{$field:t}}var UT=zT(\"key\");function jT(t,e){return{$compare:t,$order:e}}var VT=\"descending\";function BT(t,e){return(t&&t.signal?\"$\"+t.signal:t||\"\")+(t&&e?\"_\":\"\")+(e&&e.signal?\"$\"+e.signal:e||\"\")}var HT=\"scope\",GT=\"view\";function WT(t){return t&&t.signal}function qT(t,e){return null!=t?t:e}function YT(t,e){return(t.merge?function(t,e){var r=XT({merge:t.merge.map(function(t){return YT(t,e)})},t,e);return e.addStream(r).id}:t.stream?function(t,e){var r=XT({stream:YT(t.stream,e)},t,e);return e.addStream(r).id}:t.type?function(t,e){var r,n=e.event((r=t.source)===HT?GT:r||GT,t.type),i=XT({stream:n},t,e);return 1===Object.keys(i).length?n:e.addStream(i).id}:i(\"Invalid stream specification: \"+c(t)))(t,e)}function XT(t,e,r){var n,o,s,a,u=e.between;return u&&(2!==u.length&&i('Stream \"between\" parameter must have 2 entries: '+c(e)),t.between=[YT(u[0],r),YT(u[1],r)]),u=e.filter?O(e.filter):[],(e.marktype||e.markname||e.markrole)&&u.push((o=e.markname,s=e.markrole,(a=\"event.item\")+((n=e.marktype)&&\"*\"!==n?\"&&\"+a+\".mark.marktype==='\"+n+\"'\":\"\")+(s?\"&&\"+a+\".mark.role==='\"+s+\"'\":\"\")+(o?\"&&\"+a+\".mark.name==='\"+o+\"'\":\"\"))),e.source===HT&&u.push(\"inScope(event.item)\"),u.length&&(t.filter=PT(\"(\"+u.join(\")&&(\")+\")\").$expr),null!=(u=e.throttle)&&(t.throttle=+u),null!=(u=e.debounce)&&(t.debounce=+u),e.consume&&(t.consume=!0),t}var $T,JT,ZT=\"[\",QT=\"]\",KT=\"{\",tA=\"}\",eA=\":\",rA=\",\",nA=\"@\",iA=\">\",oA=/[[\\]{}]/,sA={\"*\":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function aA(t,e,r,n,i){for(var o,s=0,a=t.length;e<a;++e){if(o=t[e],!s&&o===r)return e;i&&0<=i.indexOf(o)?--s:n&&0<=n.indexOf(o)&&++s}return e}function uA(t){for(var e=[],r=0,n=t.length,i=0;i<n;)i=aA(t,i,rA,ZT+KT,QT+tA),e.push(t.substring(r,i).trim()),r=++i;if(0===e.length)throw\"Empty event selector: \"+t;return e}function cA(t){return\"[\"===t[0]?function(t){var e,r,n=t.length,i=1;if((i=aA(t,i,QT,ZT,QT))===n)throw\"Empty between selector: \"+t;if(2!==(e=uA(t.substring(1,i))).length)throw\"Between selector must have two elements: \"+t;if((t=t.slice(i+1).trim())[0]!==iA)throw\"Expected '>' after between selector: \"+t;return e=e.map(cA),(r=cA(t.slice(1).trim())).between?{between:e,stream:r}:(r.between=e,r)}(t):function(t){var e,r,n={source:$T},i=[],o=[0,0],s=0,a=0,u=t.length,c=0;if(t[u-1]===tA){if(!(0<=(c=t.lastIndexOf(KT))))throw\"Unmatched right brace: \"+t;try{o=function(t){var e=t.split(rA);if(!t.length||2<e.length)throw t;return e.map(function(e){var r=+e;if(r!=r)throw t;return r})}(t.substring(c+1,u-1))}catch(e){throw\"Invalid throttle specification: \"+t}u=(t=t.slice(0,c).trim()).length,c=0}if(!u)throw t;if(t[0]===nA&&(s=++c),(e=aA(t,c,eA))<u&&(i.push(t.substring(a,e).trim()),a=c=++e),(c=aA(t,c,ZT))===u)i.push(t.substring(a,u).trim());else if(i.push(t.substring(a,c).trim()),r=[],(a=++c)===u)throw\"Unmatched left bracket: \"+t;for(;c<u;){if((c=aA(t,c,QT))===u)throw\"Unmatched left bracket: \"+t;if(r.push(t.substring(a,c).trim()),c<u-1&&t[++c]!==ZT)throw\"Expected left bracket: \"+t;a=++c}if(!(u=i.length)||oA.test(i[u-1]))throw\"Invalid event selector: \"+t;return 1<u?(n.type=i[1],s?n.markname=i[0].slice(1):JT.hasOwnProperty(i[0])?n.marktype=i[0]:n.source=i[0]):n.type=i[0],\"!\"===n.type.slice(-1)&&(n.consume=!0,n.type=n.type.slice(0,-1)),null!=r&&(n.filter=r),o[0]&&(n.throttle=o[0]),o[1]&&(n.debounce=o[1]),n}(t)}var lA=\"var datum=event.item&&event.item.datum;\";function hA(t){return function(e,r,n){return OT(t,r,e||void 0,n)}}var fA=hA(\"aggregate\"),dA=hA(\"axisticks\"),pA=hA(\"bound\"),mA=hA(\"collect\"),gA=hA(\"compare\"),vA=hA(\"datajoin\"),yA=hA(\"encode\"),wA=hA(\"facet\"),xA=hA(\"field\"),bA=hA(\"key\"),_A=hA(\"legendentries\"),MA=hA(\"mark\"),SA=hA(\"multiextent\"),EA=hA(\"multivalues\"),TA=hA(\"overlap\"),AA=hA(\"params\"),RA=hA(\"prefacet\"),kA=hA(\"projection\"),CA=hA(\"proxy\"),LA=hA(\"relay\"),PA=hA(\"render\"),DA=hA(\"scale\"),OA=hA(\"sieve\"),NA=hA(\"sortitems\"),IA=hA(\"viewlayout\"),FA=hA(\"values\"),zA=0,UA=[\"identity\",\"ordinal\",\"band\",\"point\",\"bin-linear\",\"bin-ordinal\",\"linear\",\"pow\",\"sqrt\",\"log\",\"sequential\",\"time\",\"utc\",\"quantize\",\"quantile\",\"threshold\"],jA=rt(UA),VA=rt(UA.slice(1,6));function BA(t){return VA.hasOwnProperty(t)}function HA(t){return\"quantile\"===t}function GA(t,e){return a(t)?t.signal?e.signalRef(t.signal):i(\"Unsupported object: \"+c(t)):t}function WA(t){i(\"Can not find data set: \"+c(t))}function qA(t,e,r){if(t)return t.signal?r.signalRef(t.signal):(s(t)?function(t,e,r){return t.map(function(t){return GA(t,r)})}:t.fields?function(t,e,r){var n=t.data,i=t.fields.reduce(function(t,e){return e=u(e)?{data:n,field:e}:s(e)||e.signal?function(t,e){var r=\"_:vega:_\"+zA++,n=mA({});if(s(t))n.value={$ingest:t};else if(t.signal){var i=\"setdata(\"+c(r)+\",\"+t.signal+\")\";n.params.input=e.signalRef(i)}return e.addDataPipeline(r,[n,OA({})]),{data:r,field:\"data\"}}(e,r):e,t.push(e),t},[]);return(BA(e.type)?function(t,e,r){var n,i,o;return n=r.map(function(t){var r=e.getData(t.data);return r||WA(t.data),r.countsRef(e,t.field)}),i=e.add(fA({groupby:UT,ops:[\"sum\"],fields:[e.fieldRef(\"count\")],as:[\"count\"],pulse:n})),o=e.add(mA({pulse:IT(i)})),IT(e.add(FA({field:UT,sort:e.sortRef(YA(t.sort,!0)),pulse:IT(o)})))}:HA(e.type)?function(t,e,r){var n=r.map(function(t){var r=e.getData(t.data);return r||WA(t.data),r.domainRef(e,t.field)});return IT(e.add(EA({values:n})))}:function(t,e,r){var n=r.map(function(t){var r=e.getData(t.data);return r||WA(t.data),r.extentRef(e,t.field)});return IT(e.add(SA({extents:n})))})(t,r,i)}:function(t,e,r){var n=r.getData(t.data);return n||WA(t.data),BA(e.type)?n.valuesRef(r,t.field,YA(t.sort,!1)):HA(e.type)?n.domainRef(r,t.field):n.extentRef(r,t.field)})(t,e,r);null==e.domainMin&&null==e.domainMax||i(\"No scale domain defined for domainMin/domainMax to override.\")}function YA(t,e){return t&&(t.field||t.op?t.field||\"count\"===t.op?e&&t.field?i(\"Multiple domain scales can not sort by field.\"):e&&t.op&&\"count\"!==t.op&&i(\"Multiple domain scales support op count only.\"):i(\"No field provided for sort aggregate op: \"+t.op):a(t)?t.field=\"key\":t={field:\"key\"}),t}function XA(t,e,r){return s(t)?t.map(function(t){return XA(t,e,r)}):a(t)?t.signal?r.signalRef(t.signal):\"fit\"===e?t:i(\"Unsupported parameter object: \"+c(t)):t}var $A=\"top\",JA=\"left\",ZA=\"bottom\",QA=\"label\",KA=\"value\",tR=\"guide-label\",eR=\"guide-title\",rR=[\"shape\",\"size\",\"fill\",\"stroke\",\"strokeDash\",\"opacity\"],nR={name:1,interactive:1},iR=rt([\"rule\"]),oR=rt([\"group\",\"image\",\"rect\"]),sR=function(t,e){var r=\"\";return iR[e]||(t.x2&&(t.x?(oR[e]&&(r+=\"if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;\"),r+=\"o.width=o.x2-o.x;\"):r+=\"o.x=o.x2-(o.width||0);\"),t.xc&&(r+=\"o.x=o.xc-(o.width||0)/2;\"),t.y2&&(t.y?(oR[e]&&(r+=\"if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;\"),r+=\"o.height=o.y2-o.y;\"):r+=\"o.y=o.y2-(o.height||0);\"),t.yc&&(r+=\"o.y=o.yc-(o.height||0)/2;\")),r},aR=function(t,e,r,n){var i=PT(t,e);return i.$fields.forEach(function(t){n[t]=1}),U(r,i.$params),i.$expr},uR=function(t,e,r,n){return function t(e,r,n,s){var a,l,h;if(e.signal)a=\"datum\",h=aR(e.signal,r,n,s);else if(e.group||e.parent){for(l=Math.max(1,e.level||1),a=\"item\";0<l--;)a+=\".mark.group\";e.parent?(h=e.parent,a+=\".datum\"):h=e.group}else e.datum?(a=\"datum\",h=e.datum):i(\"Invalid field reference: \"+c(e));return e.signal||(u(h)?(s[h]=1,h=o(h).map(c).join(\"][\")):h=t(h,r,n,s)),a+\"[\"+h+\"]\"}(a(t)?t:{datum:t},e,r,n)};function cR(t,e,r,n){var i;if(u(t))r.hasOwnProperty(i=XE+t)||(r[i]=e.scaleRef(t)),i=c(i);else{for(i in e.scales)r[XE+i]=e.scaleRef(i);i=c(XE)+\"+\"+(t.signal?\"(\"+aR(t.signal,e,r,n)+\")\":uR(t,e,r,n))}return\"_[\"+i+\"]\"}var lR=function(t,e,r,n){return a(t)?\"(\"+hR(null,t,e,r,n)+\")\":t},hR=function(t,e,r,n,i){if(null!=e.gradient)return\"this.gradient(\"+cR((o=e).gradient,r,n,i)+\",\"+c(o.start)+\",\"+c(o.stop)+\",\"+c(o.count)+\")\";var o,s=e.signal?aR(e.signal,r,n,i):e.color?function(t,e,r,n){function i(t,i,o,s){return\"this.\"+t+\"(\"+[hR(null,i,e,r,n),hR(null,o,e,r,n),hR(null,s,e,r,n)].join(\",\")+\").toString()\"}return t.c?i(\"hcl\",t.h,t.c,t.l):t.h||t.s?i(\"hsl\",t.h,t.s,t.l):t.l||t.a?i(\"lab\",t.l,t.a,t.b):t.r||t.g||t.b?i(\"rgb\",t.r,t.g,t.b):null}(e.color,r,n,i):null!=e.field?uR(e.field,r,n,i):void 0!==e.value?c(e.value):void 0;return null!=e.scale&&(s=function(t,e,r,n,i){var o,s,a,c=cR(t.scale,r,n,i);return null!=t.range?(s=c+\".range()\",e=0==(o=+t.range)?s+\"[0]\":\"($=\"+s+\",\"+(1===o?\"$[$.length-1]\":\"$[0]+\"+o+\"*($[$.length-1]-$[0])\")+\")\"):(void 0!==e&&(e=c+\"(\"+e+\")\"),t.band&&(a=function(t,e){if(!u(t))return-1;var r=e.scaleType(t);return\"band\"===r||\"point\"===r?1:0}(t.scale,r))&&(o=(s=c+\".bandwidth\")+\"()\"+(1==(o=+t.band)?\"\":\"*\"+o),a<0&&(o=\"(\"+s+\"?\"+o+\":0)\"),e=(e?e+\"+\":\"\")+o,t.extra&&(e=\"(datum.extra?\"+c+\"(datum.extra.value):\"+e+\")\")),null==e&&(e=\"0\")),e}(e,s,r,n,i)),void 0===s&&(s=null),null!=e.exponent&&(s=\"Math.pow(\"+s+\",\"+lR(e.exponent,r,n,i)+\")\"),null!=e.mult&&(s+=\"*\"+lR(e.mult,r,n,i)),null!=e.offset&&(s+=\"+\"+lR(e.offset,r,n,i)),e.round&&(s=\"Math.round(\"+s+\")\"),s},fR=function(t,e,r){return t+\"[\"+c(e)+\"]=\"+r+\";\"},dR=function(t,e,r,n,i){var o=\"\";return e.forEach(function(e){var s=hR(t,e,r,n,i);o+=e.test?aR(e.test,r,n,i)+\"?\"+s+\":\":s}),fR(\"o\",t,o)};function pR(t,e,r,n){var i,o,a,u={},c=\"var o=item,datum=o.datum,$;\";for(i in t)s(o=t[i])?c+=dR(i,o,n,r,u):(a=hR(i,o,n,r,u),c+=fR(\"o\",i,a));return c+=sR(t,e),{$expr:c+=\"return 1;\",$fields:Object.keys(u),$output:Object.keys(t)}}var mR=\"mark\",gR=\"frame\",vR=\"legend-label\";function yR(t){return a(t)?t:{value:t}}function wR(t,e,r){return null!=r?(t[e]=a(r)&&!s(r)?r:{value:r},1):0}function xR(t,e,r){for(var n in e)r&&r.hasOwnProperty(n)||(t[n]=U(t[n]||{},e[n]));return t}function bR(t,e,r,n,i,o){var s,a;for(a in(o=o||{}).encoders={$encode:s={}},t=function(t,e,r,n,i){var o,s,a={};for(o in\"legend\"!=r&&0!==String(r).indexOf(\"axis\")||(r=null),s=r===gR?i.group:r===mR?U({},i.mark,i[e]):null)_R(o,t)||(\"fill\"===o||\"stroke\"===o)&&(_R(\"fill\",t)||_R(\"stroke\",t))||(a[o]={value:s[o]});return O(n).forEach(function(e){var r=i.style&&i.style[e];for(var n in r)_R(n,t)||(a[n]={value:r[n]})}),(t=U({},t)).enter=U(a,t.enter),t}(t,e,r,n,i.config))s[a]=pR(t[a],e,o,i);return o}function _R(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}var MR=function(t,e,r,n,i,o,s){return{type:t,name:s?s.name:void 0,role:e,style:s&&s.style||r,key:n,from:i,interactive:!(!s||!s.interactive),encode:xR(o,s,nR)}},SR=\"group\",ER=\"rule\",TR=\"text\",AR=function(t,e,r,n,i,o,s){return{type:SR,name:r,role:t,style:e,from:n,interactive:i||!1,encode:o,marks:s}};function RR(t){return a(t)&&t.signal?t.signal:c(t)}var kR=function(t){var e=t.role||\"\";return e.indexOf(\"axis\")&&e.indexOf(\"legend\")?t.type===SR?\"scope\":e||mR:e},CR=function(t,e){var r=Vn(t.type);r||i(\"Unrecognized transform type: \"+c(t.type));var n=OT(r.type.toLowerCase(),null,LR(r,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(n)),n.metadata=r.metadata||{},n};function LR(t,e,r){var n,i,o,s={};for(i=0,o=t.params.length;i<o;++i)s[(n=t.params[i]).name]=PR(n,e,r);return s}function PR(t,e,r){var n,o,a,l=t.type,h=e[t.name];return\"index\"===l?function(t,e,r){return u(e.from)||i('Lookup \"from\" parameter must be a string literal.'),r.getData(e.from).lookupRef(r,e.key)}(0,e,r):void 0!==h?\"param\"===l?(o=r,a=e[(n=t).name],n.array?(s(a)||i(\"Expected an array of sub-parameters. Instead: \"+c(a)),a.map(function(t){return OR(n,t,o)})):OR(n,a,o)):\"projection\"===l?r.projectionRef(e[t.name]):t.array&&!WT(h)?h.map(function(e){return DR(t,e,r)}):DR(t,h,r):void(t.required&&i(\"Missing required \"+c(e.type)+\" parameter: \"+c(t.name)))}function DR(t,e,r){var n=t.type;if(WT(e))return NR(n)?i(\"Expression references can not be signals.\"):IR(n)?r.fieldRef(e):FR(n)?r.compareRef(e):r.signalRef(e.signal);var o,s,a=t.expr||IR(n);return a&&(s=e)&&s.expr?PT(e.expr,r):a&&(o=e)&&o.field?zT(e.field):NR(n)?PT(e,r):\"data\"===n?IT(r.getData(e).values):IR(n)?zT(e):FR(n)?r.compareRef(e):e}function OR(t,e,r){var n,o,s,a,u;for(a=0,u=t.params.length;a<u;++a){for(s in(o=t.params[a]).key)if(o.key[s]!==e[s]){o=null;break}if(o)break}return o||i(\"Unsupported parameter: \"+c(e)),n=U(LR(o,e,r),o.key),IT(r.add(AA(n)))}function NR(t){return\"expr\"===t}function IR(t){return\"field\"===t}function FR(t){return\"compare\"===t}function zR(t,e,r,n,i){this.scope=t,this.input=e,this.output=r,this.values=n,this.aggregate=i,this.index={}}zR.fromEntries=function(t,e){var r=e.length,n=1,i=e[0],o=e[r-1],s=e[r-2],a=null;for(t.add(e[0]);n<r;++n)e[n].params.pulse=IT(e[n-1]),t.add(e[n]),\"aggregate\"===e[n].type&&(a=e[n]);return new zR(t,i,s,o,a)};var UR=zR.prototype;function jR(t){return u(t)?t:null}function VR(t,e,r){var n,i=BT(r.op,r.field);if(e.ops){for(var o=0,s=e.as.length;o<s;++o)if(e.as[o]===i)return}else e.ops=[\"count\"],e.fields=[null],e.as=[\"count\"];r.op&&(e.ops.push((n=r.op.signal)?t.signalRef(n):r.op),e.fields.push(t.fieldRef(r.field)),e.as.push(i))}function BR(t,e,r,n,i,o,s){var u,c,l,h=e[r]||(e[r]={}),f=a(l=o)?(l.order===VT?\"-\":\"+\")+BT(l.op,l.field):\"\",d=jR(i);if(null!=d&&(t=e.scope,u=h[d+=f?\"|\"+f:\"\"]),!u){var p=o?{field:UT,pulse:e.countsRef(t,i,o)}:{field:t.fieldRef(i),pulse:IT(e.output)};f&&(p.sort=t.sortRef(o)),c=t.add(OT(n,void 0,p)),s&&(e.index[i]=c),u=IT(c),null!=d&&(h[d]=u)}return u}UR.countsRef=function(t,e,r){var n,i,o,s=this.counts||(this.counts={}),a=jR(e);return null!=a&&(t=this.scope,n=s[a]),n?r&&r.field&&VR(t,n.agg.params,r):(o={groupby:t.fieldRef(e,\"key\"),pulse:IT(this.output)},r&&r.field&&VR(t,o,r),n={agg:i=t.add(fA(o)),ref:IT(n=t.add(mA({pulse:IT(i)})))},null!=a&&(s[a]=n)),n.ref},UR.tuplesRef=function(){return IT(this.values)},UR.extentRef=function(t,e){return BR(t,this,\"extent\",\"extent\",e,!1)},UR.domainRef=function(t,e){return BR(t,this,\"domain\",\"values\",e,!1)},UR.valuesRef=function(t,e,r){return BR(t,this,\"vals\",\"values\",e,r||!0)},UR.lookupRef=function(t,e){return BR(t,this,\"lookup\",\"tupleindex\",e,!1)},UR.indataRef=function(t,e){return BR(t,this,\"indata\",\"tupleindex\",e,!0,!0)};var HR=function(t,e,r){var n,i,o=t.remove,s=t.insert,a=t.toggle,u=t.modify,c=t.values,l=e.add(NT());n=\"if(\"+t.trigger+',modify(\"'+r+'\",'+[s,o,a,u,c].map(function(t){return null==t?\"null\":t}).join(\",\")+\"),0)\",i=PT(n,e),l.update=i.$expr,l.params=i.$params},GR=function(t,e){var r,n,o,s,u,l,h,f,d,p,m,g,v,y,w,x,b,_,M,S,E,T,A,R,k,C,L,P,D,N,I,F,z,j,V,B,H,G,W,q,Y=kR(t),X=t.type===SR,$=t.from&&t.from.facet,J=t.layout||\"scope\"===Y||Y===gR,Z=Y===mR||J||$,Q=t.overlap;w=e,(y=t.from)?(x=y.facet)&&(X||i(\"Only group marks can be faceted.\"),null!=x.field?M=S=IT(w.getData(x.data).output):(y.data?S=IT(w.getData(y.data).aggregate):((_=CR(U({type:\"aggregate\",groupby:O(x.groupby)},x.aggregate),w)).params.key=w.keyRef(x.groupby),_.params.pulse=IT(w.getData(x.data).output),M=S=IT(w.add(_))),b=w.keyRef(x.groupby,!0))):M=IT(w.add(mA(null,[{}]))),M||(M=y.$ref?y:IT(w.getData(y.data).output)),d=IT(n=e.add(vA({key:(o={key:b,pulse:M,parent:S}).key||(t.key?zT(t.key):void 0),pulse:o.pulse,clean:!X}))),n=s=e.add(mA({pulse:d})),p=IT(n=e.add(MA({markdef:(C=t,{marktype:C.type,name:C.name||void 0,role:C.role||kR(C),zindex:+C.zindex||void 0}),interactive:(R=t.interactive,k=e,R&&R.signal?k.signalRef(R.signal):!1!==R),clip:(E=t.clip,T=e,a(E)&&(E.signal?A=E.signal:E.path?A=\"pathShape(\"+RR(E.path)+\")\":E.sphere&&(A=\"geoShape(\"+RR(E.sphere)+', {type: \"Sphere\"})')),A?T.signalRef(A):!!E),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef(\"parent\"):null,index:e.markpath(),pulse:IT(n)}))),(n=e.add(yA(bR(t.encode,t.type,Y,t.style,e,{pulse:p})))).params.parent=e.encode(),t.transform&&t.transform.forEach(function(t){var r=CR(t,e);(r.metadata.generates||r.metadata.changes)&&i(\"Mark transforms should not generate new data.\"),r.params.pulse=IT(n),e.add(n=r)}),t.sort&&(n=e.add(NA({sort:e.compareRef(t.sort,!0),pulse:IT(n)}))),m=IT(n),($||J)&&(g=IT(J=e.add(IA({layout:e.objectProperty(t.layout),legendMargin:e.config.legendMargin,mark:p,pulse:m})))),v=IT(u=e.add(pA({mark:p,pulse:g||m}))),X&&(Z&&((r=e.operators).pop(),J&&r.pop()),e.pushState(m,g||v,d),$?(z=o,W=(G=(I=t).from.facet).name,q=IT((F=e).getData(G.data).output),G.name||i(\"Facet must have a name: \"+c(G)),G.data||i(\"Facet must reference a data set: \"+c(G)),G.field?H=F.add(RA({field:F.fieldRef(G.field),pulse:q})):G.groupby?H=F.add(wA({key:F.keyRef(G.groupby),group:IT(F.proxy(z.parent)),pulse:q})):i(\"Facet must specify groupby or field: \"+c(G)),V=(j=F.fork()).add(mA()),B=j.add(OA({pulse:IT(V)})),j.addData(W,new zR(j,V,V,B)),j.addSignal(\"parent\",null),H.params.subflow={$subflow:JR(I,j).toRuntime()}):Z?(L=t,D=(P=e).add(RA({pulse:o.pulse})),(N=P.fork()).add(OA()),N.addSignal(\"parent\",null),D.params.subflow={$subflow:JR(L,N).toRuntime()}):JR(t,e),e.popState(),Z&&(J&&r.push(J),r.push(u))),Q&&(n={method:!0===Q.method?\"parity\":Q.method,pulse:v},Q.order&&(n.sort=e.compareRef({field:Q.order})),Q.bound&&(n.boundScale=e.scaleRef(Q.bound.scale),n.boundOrient=Q.bound.orient,n.boundTolerance=Q.bound.tolerance),v=IT(e.add(TA(n)))),l=e.add(PA({pulse:v})),h=e.add(OA({pulse:IT(l)},void 0,e.parent())),null!=t.name&&(e.addData(f=t.name,new zR(e,s,l,h)),t.on&&t.on.forEach(function(t){(t.insert||t.remove||t.toggle)&&i(\"Marks only support modify triggers.\"),HR(t,e,f)}))};function WR(t){return t&&t.signal||t}function qR(t,e,r,n){var i=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return i&&i.signal?i:i?+i.value:(i=r.config.style[n])&&+i[t]}function YR(t){var e=mA({},t);return e.metadata={source:!0},e}function XR(t,e){return{scale:t.scale,range:e}}function $R(t,e,r,n,i){return{signal:'flush(range(\"'+t+'\"), scale(\"'+t+'\", datum.value), '+e+\",\"+r+\",\"+n+\",\"+i+\")\"}}var JR=function(t,e,r){var n=O(t.signals),o=O(t.scales);return r||n.forEach(function(t){wS(t,e)}),O(t.projections).forEach(function(t){!function(t,e){var r={};for(var n in t)\"name\"!==n&&(r[n]=XA(t[n],n,e));e.addProjection(t.name,r)}(t,e)}),o.forEach(function(t){var r,n,o;n=e,o=(r=t).type||\"linear\",jA.hasOwnProperty(o)||i(\"Unrecognized scale type: \"+c(o)),n.addScale(r.name,{type:o,domain:void 0})}),O(t.data).forEach(function(t){var r,n,i;n=e,i=[],(r=t).transform&&r.transform.forEach(function(t){i.push(CR(t,n))}),r.on&&r.on.forEach(function(t){HR(t,n,r.name)}),n.addDataPipeline(r.name,function(t,e,r){var n,i,o,s,a,u=[],c=null,l=!1,h=!1;for(t.values?u.push(c=YR({$ingest:t.values,$format:t.format})):t.url?u.push(c=YR({$request:t.url,$format:t.format})):t.source&&(c=n=O(t.source).map(function(t){return IT(e.getData(t).output)}),u.push(null)),i=0,o=r.length;i<o;++i)a=(s=r[i]).metadata,c||a.source||u.push(c=YR()),u.push(s),a.generates&&(h=!0),a.modifies&&!h&&(l=!0),a.source?c=s:a.changes&&(c=null);return n&&(u[0]=LA({derive:l,pulse:(o=n.length-1)?n:n[0]}),(l||o)&&u.splice(1,0,YR())),c||u.push(YR()),u.push(OA({})),u}(r,n,i))}),o.forEach(function(t){!function(t,e){var r,n,o,l,h=e.getScale(t.name).params;for(r in h.domain=qA(t.domain,t,e),null!=t.range&&(h.range=function t(e,r,n){var o,a,l=e.range,h=r.config.range;if(l.signal)return r.signalRef(l.signal);if(u(l)){if(h&&h.hasOwnProperty(l))return t(e=U({},e,{range:h[l]}),r,n);\"width\"===l?l=[0,{signal:\"width\"}]:\"height\"===l?l=BA(e.type)?[0,{signal:\"height\"}]:[{signal:\"height\"},0]:i(\"Unrecognized scale range value: \"+c(l))}else{if(l.scheme)return n.scheme=GA(l.scheme,r),l.extent&&(n.schemeExtent=(a=r,(o=l.extent).signal?a.signalRef(o.signal):o.map(function(t){return GA(t,a)}))),void(l.count&&(n.schemeCount=GA(l.count,r)));if(l.step)return void(n.rangeStep=GA(l.step,r));if(BA(e.type)&&!s(l))return qA(l,e,r);s(l)||i(\"Unsupported range type: \"+c(l))}return l.map(function(t){return GA(t,r)})}(t,e,h)),null!=t.interpolate&&((o=h).interpolate=GA((n=t.interpolate).type||n),null!=n.gamma&&(o.interpolateGamma=GA(n.gamma))),null!=t.nice&&(h.nice=a(l=t.nice)?{interval:GA(l.interval),step:GA(l.step)}:GA(l)),t)h.hasOwnProperty(r)||\"name\"===r||(h[r]=GA(t[r],e))}(t,e)}),n.forEach(function(t){!function(t,e){var r=e.getSignal(t.name);if(t.update){var n=PT(t.update,e);r.update=n.$expr,r.params=n.$params}t.on&&t.on.forEach(function(t){!function(t,e,r){var n,o,s,a,l=t.events,h=t.update,f=t.encode,d=[];l||i(\"Signal update missing events specification.\"),u(l)&&(s=l,a=e.isSubscope()?HT:GT,$T=a||\"view\",JT=sA,l=uA(s.trim()).map(cA)),(l=O(l).filter(function(t){return t.signal||t.scale?(d.push(t),0):1})).length&&d.push(1<l.length?{merge:l}:l[0]),null!=f&&(h&&i(\"Signal encode and update are mutually exclusive.\"),h=\"encode(item(),\"+c(f)+\")\"),n=u(h)?PT(h,e,lA):null!=h.expr?PT(h.expr,e,lA):null!=h.value?h.value:null!=h.signal?{$expr:\"_.value\",$params:{value:e.signalRef(h.signal)}}:i(\"Invalid signal update specification.\"),o={target:r,update:n},t.force&&(o.options={force:!0}),d.forEach(function(t){var r,n;t={source:(r=t,n=e,r.signal?n.getSignal(r.signal).id:r.scale?n.getScale(r.scale).id:YT(r,n))},e.addUpdate(U(t,o))})}(t,e,r.id)})}(t,e)}),O(t.axes).forEach(function(t){!function(t,e){var r,n,i,o,s,a,u,c,l,h,f,d,p,m,g,v,y,w,x,b,_,M,S,E,T,A,R,k,C,L,P,D,O,N,I,F,z,j,V,B,H,G,W,q,Y,X,$,J,Z,Q,K,tt,et,rt,nt,it,ot,st,at,ut,ct,lt,ht,ft,dt,pt,mt,gt,vt,yt,wt,xt,bt,_t,Mt,St,Et,Tt,At,Rt,kt,Ct,Lt,Pt,Dt,Ot,Nt,It,Ft,zt=(l=(c=e).config,f=(h=(u=t).orient)===$A||h===ZA?l.axisX:l.axisY,d=l[\"axis\"+h[0].toUpperCase()+h.slice(1)],p=\"band\"===c.scaleType(u.scale)&&l.axisBand,f||d||p?U({},l.axis,f,d,p):l.axis),Ut=t.encode||{},jt=Ut.axis||{},Vt=jt.name||void 0,Bt=jt.interactive,Ht=jt.style;r={orient:t.orient,ticks:!!qT(t.ticks,zt.ticks),labels:!!qT(t.labels,zt.labels),grid:!!qT(t.grid,zt.grid),domain:!!qT(t.domain,zt.domain),title:!!qT(t.title,!1)},n=IT(e.add(mA({},[r]))),jt=xR({update:{range:{signal:'abs(span(range(\"'+t.scale+'\")))'},offset:yR(qT(t.offset,0)),position:yR(qT(t.position,0)),titlePadding:yR(qT(t.titlePadding,zt.titlePadding)),minExtent:yR(qT(t.minExtent,zt.minExtent)),maxExtent:yR(qT(t.maxExtent,zt.maxExtent))}},Ut.axis,nR),i=IT(e.add(dA({scale:e.scaleRef(t.scale),extra:zt.tickExtra,count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),formatSpecifier:e.property(t.format)}))),a=[],r.grid&&a.push((g=zt,v=Ut.grid,y=i,A=(m=t).gridScale,k=(R=(T=m.orient)===JA||T===$A?1:-1)*m.offset||0,(L={}).enter=w={opacity:C={value:0}},wR(w,\"stroke\",g.gridColor),wR(w,\"strokeWidth\",g.gridWidth),wR(w,\"strokeDash\",g.gridDash),L.exit=x={opacity:C},L.update=b={},wR(b,\"opacity\",g.gridOpacity),T===$A||T===ZA?(_=\"x\",M=\"y\",E=\"height\"):(_=\"y\",M=\"x\",E=\"width\"),S=M+\"2\",b[_]=w[_]=x[_]={scale:m.scale,field:KA,band:g.bandPosition,round:g.tickRound,extra:g.tickExtra,offset:g.tickOffset},A?(w[M]={scale:A,range:0,mult:R,offset:k},b[S]=w[S]={scale:A,range:1,mult:R,offset:k}):(w[M]={value:k},b[S]=w[S]={signal:E,mult:R,offset:k}),MR(ER,\"axis-grid\",null,KA,y,L,v))),r.ticks&&(o=qT(t.tickSize,zt.tickSize),a.push((D=zt,O=Ut.ticks,N=i,I=o,G=(H=(P=t).orient)===JA||H===$A?-1:1,(q={}).enter=F={opacity:W={value:0}},wR(F,\"stroke\",D.tickColor),wR(F,\"strokeWidth\",D.tickWidth),q.exit=z={opacity:W},q.update=j={opacity:{value:1}},(V=yR(I)).mult=G,B={scale:P.scale,field:KA,band:D.bandPosition,round:D.tickRound,extra:D.tickExtra,offset:D.tickOffset},H===$A||H===ZA?(j.y=F.y=W,j.y2=F.y2=V,j.x=F.x=z.x=B):(j.x=F.x=W,j.x2=F.x2=V,j.y=F.y=z.y=B),MR(ER,\"axis-tick\",null,KA,N,q,O)))),r.labels&&a.push((X=zt,$=Ut.labels,J=i,Z=o=r.ticks?o:0,it=(nt=(Y=t).orient)===JA||nt===$A?-1:1,ot=Y.scale,st=qT(Y.labelPadding,X.labelPadding),at=qT(Y.labelBound,X.labelBound),ct=null!=(ut=qT(Y.labelFlush,X.labelFlush))&&!1!==ut&&(ut=+ut)===ut,lt=+qT(Y.labelFlushOffset,X.labelFlushOffset),ht=qT(Y.labelOverlap,X.labelOverlap),(dt={}).enter=Q={opacity:ft={value:0}},wR(Q,\"angle\",X.labelAngle),wR(Q,\"fill\",X.labelColor),wR(Q,\"font\",X.labelFont),wR(Q,\"fontSize\",X.labelFontSize),wR(Q,\"fontWeight\",X.labelFontWeight),wR(Q,\"limit\",X.labelLimit),dt.exit=K={opacity:ft},dt.update=tt={opacity:{value:1},text:{field:QA}},(et=yR(Z)).mult=it,et.offset=yR(st),et.offset.mult=it,rt={scale:ot,field:KA,band:.5,offset:X.tickOffset},nt===$A||nt===ZA?(tt.y=Q.y=et,tt.x=Q.x=K.x=rt,wR(tt,\"align\",ct?$R(ot,ut,'\"left\"','\"right\"','\"center\"'):\"center\"),ct&&lt&&wR(tt,\"dx\",$R(ot,ut,-lt,lt,0)),wR(tt,\"baseline\",nt===$A?\"bottom\":\"top\")):(tt.x=Q.x=et,tt.y=Q.y=K.y=rt,wR(tt,\"align\",\"right\"===nt?\"left\":\"right\"),wR(tt,\"baseline\",ct?$R(ot,ut,'\"bottom\"','\"top\"','\"middle\"'):\"middle\"),ct&&lt&&wR(tt,\"dy\",$R(ot,ut,lt,-lt,0))),Y=MR(TR,\"axis-label\",tR,KA,J,dt,$),(ht||at)&&(Y.overlap={method:ht,order:\"datum.index\",bound:at?{scale:ot,orient:nt,tolerance:+at}:null}),Y)),r.domain&&a.push((mt=zt,gt=Ut.domain,vt=n,Mt=(pt=t).orient,(Et={}).enter=yt={opacity:St={value:0}},wR(yt,\"stroke\",mt.domainColor),wR(yt,\"strokeWidth\",mt.domainWidth),Et.exit={opacity:St},Et.update=wt={opacity:{value:1}},Mt===$A||Mt===ZA?(xt=\"x\",_t=\"y\"):(xt=\"y\",_t=\"x\"),bt=xt+\"2\",yt[_t]=St,wt[xt]=yt[xt]=XR(pt,0),wt[bt]=yt[bt]=XR(pt,1),MR(ER,\"axis-domain\",null,null,vt,Et,gt))),r.title&&a.push((At=zt,Rt=Ut.title,kt=n,Ot=(Tt=t).title,Nt=(Dt=Tt.orient)===JA||Dt===$A?-1:1,It=Dt===$A||Dt===ZA,(Ft={}).enter=Ct={opacity:{value:0}},wR(Ct,\"align\",At.titleAlign),wR(Ct,\"fill\",At.titleColor),wR(Ct,\"font\",At.titleFont),wR(Ct,\"fontSize\",At.titleFontSize),wR(Ct,\"fontWeight\",At.titleFontWeight),wR(Ct,\"limit\",At.titleLimit),Ft.exit={opacity:{value:0}},Ft.update=Lt={opacity:{value:1},text:Ot&&Ot.signal?{signal:Ot.signal}:{value:Ot+\"\"}},Pt={scale:Tt.scale,range:.5},It?(Lt.x=Pt,Lt.angle={value:0},Lt.baseline={value:Dt===$A?\"bottom\":\"top\"}):(Lt.y=Pt,Lt.angle={value:90*Nt},Lt.baseline={value:\"bottom\"}),wR(Lt,\"angle\",At.titleAngle),wR(Lt,\"baseline\",At.titleBaseline),!wR(Lt,\"x\",At.titleX)&&It&&!_R(\"x\",Rt)&&(Ft.enter.auto={value:!0}),!wR(Lt,\"y\",At.titleY)&&!It&&!_R(\"y\",Rt)&&(Ft.enter.auto={value:!0}),MR(TR,\"axis-title\",eR,null,kt,Ft,Rt))),s=AR(\"axis\",Ht,Vt,n,Bt,jt,a),t.zindex&&(s.zindex=t.zindex),GR(s,e)}(t,e)}),O(t.marks).forEach(function(t){GR(t,e)}),O(t.legends).forEach(function(t){!function(t,e){var r,n,o,s,a,u,c,l,h,f,d,p,m,g,v,y,w,x,b,_,M,S,E,T,A,R,k,C,L,P,D,O,N,I,F,z,U,j,V,B,H,G,W,q,Y,X,$,J,Z,Q,K,tt=t.type||\"symbol\",et=e.config.legend,rt=t.encode||{},nt=rt.legend||{},it=nt.name||void 0,ot=nt.interactive,st=nt.style,at=t.size||t.shape||t.fill||t.stroke||t.strokeDash||t.opacity;at||i(\"Missing valid scale for legend.\"),r={orient:qT(t.orient,et.orient),title:null!=t.title},n=IT(e.add(mA(null,[r]))),nt=xR({enter:(h=et,f={},wR(f,\"fill\",h.fillColor)+wR(f,\"stroke\",h.strokeColor)+wR(f,\"strokeWidth\",h.strokeWidth)+wR(f,\"strokeDash\",h.strokeDash)+wR(f,\"cornerRadius\",h.cornerRadius)?f:void 0),update:{offset:yR(qT(t.offset,et.offset)),padding:yR(qT(t.padding,et.padding)),titlePadding:yR(qT(t.titlePadding,et.titlePadding))}},nt,nR),u={update:{x:{field:{group:\"padding\"}},y:{field:{group:\"padding\"}},entryPadding:yR(qT(t.entryPadding,et.entryPadding))}},\"gradient\"===tt?(o=IT(e.add(_A({type:\"gradient\",scale:e.scaleRef(at),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),formatSpecifier:e.property(t.format)}))),l=[(j=at,V=et,B=rt.gradient,W={value:0},q={},q.enter=H={opacity:W,x:W,y:W},wR(H,\"width\",V.gradientWidth),wR(H,\"height\",V.gradientHeight),wR(H,\"stroke\",V.gradientStrokeColor),wR(H,\"strokeWidth\",V.gradientStrokeWidth),q.exit={opacity:W},q.update=G={x:W,y:W,fill:{gradient:j,start:[0,0],stop:[1,0]},opacity:{value:1}},wR(G,\"width\",V.gradientWidth),wR(G,\"height\",V.gradientHeight),MR(\"rect\",\"legend-gradient\",null,void 0,void 0,q,B)),(D=et,O=rt.labels,N=o,z={value:0},U={},U.enter=I={opacity:z},wR(I,\"fill\",D.labelColor),wR(I,\"font\",D.labelFont),wR(I,\"fontSize\",D.labelFontSize),wR(I,\"fontWeight\",D.labelFontWeight),wR(I,\"baseline\",D.gradientLabelBaseline),wR(I,\"limit\",D.gradientLabelLimit),U.exit={opacity:z},U.update=F={opacity:{value:1},text:{field:QA}},I.x=F.x={field:\"perc\",mult:D.gradientWidth},I.y=F.y={value:D.gradientHeight,offset:D.gradientLabelOffset},I.align=F.align={signal:'datum.perc<=0?\"left\":datum.perc>=1?\"right\":\"center\"'},MR(TR,vR,tR,\"perc\",N,U,O))]):(o=IT(e.add(_A(c={scale:e.scaleRef(at),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),formatSpecifier:e.property(t.format)}))),l=[(E=t,T=et,A=rt.symbols,R=o,L={value:0},P={},P.enter=k={opacity:L},wR(k,\"shape\",T.symbolType),wR(k,\"size\",T.symbolSize),wR(k,\"strokeWidth\",T.symbolStrokeWidth),E.fill||(wR(k,\"fill\",T.symbolFillColor),wR(k,\"stroke\",T.symbolStrokeColor)),P.exit={opacity:L},P.update=C={opacity:{value:1}},k.x=C.x={field:\"offset\",mult:.5},k.y=C.y={field:\"size\",mult:.5,offset:{field:\"total\",offset:{field:{group:\"entryPadding\"},mult:{field:\"index\"}}}},rR.forEach(function(t){E[t]&&(C[t]=k[t]={scale:E[t],field:KA})}),MR(\"symbol\",\"legend-symbol\",null,KA,R,P,A)),(y=et,w=rt.labels,x=o,M={value:0},S={},S.enter=b={opacity:M},wR(b,\"align\",y.labelAlign),wR(b,\"baseline\",y.labelBaseline),wR(b,\"fill\",y.labelColor),wR(b,\"font\",y.labelFont),wR(b,\"fontSize\",y.labelFontSize),wR(b,\"fontWeight\",y.labelFontWeight),wR(b,\"limit\",y.labelLimit),S.exit={opacity:M},S.update=_={opacity:{value:1},text:{field:QA}},b.x=_.x={field:\"offset\",offset:y.labelOffset},b.y=_.y={field:\"size\",mult:.5,offset:{field:\"total\",offset:{field:{group:\"entryPadding\"},mult:{field:\"index\"}}}},MR(TR,vR,tR,KA,x,S,w))],c.size=(d=t,g=qR(\"fontSize\",(m=l)[1].encode,p=e,tR),v=\"max(ceil(sqrt(\"+(d.size?'scale(\"'+d.size+'\",datum)':WR(qR(\"size\",m[0].encode,p)))+\")),\"+WR(g)+\")\",PT(v,p))),l=[AR(\"legend-entry\",null,null,n,ot,u,l)],r.title&&(Y=et,X=rt.title,$=n,Q=t.title,(K={}).enter=J={x:{field:{group:\"padding\"}},y:{field:{group:\"padding\"}},opacity:Z={value:0}},wR(J,\"align\",Y.titleAlign),wR(J,\"baseline\",Y.titleBaseline),wR(J,\"fill\",Y.titleColor),wR(J,\"font\",Y.titleFont),wR(J,\"fontSize\",Y.titleFontSize),wR(J,\"fontWeight\",Y.titleFontWeight),wR(J,\"limit\",Y.titleLimit),K.exit={opacity:Z},K.update={opacity:{value:1},text:Q&&Q.signal?{signal:Q.signal}:{value:Q+\"\"}},a=MR(TR,\"legend-title\",eR,null,$,K,X),u.update.y.offset={field:{group:\"titlePadding\"},offset:qR(\"fontSize\",a.encode,e,eR)},l.push(a)),s=AR(\"legend\",st,it,n,ot,nt,l),t.zindex&&(s.zindex=t.zindex),GR(s,e)}(t,e)}),t.title&&function(t,e){t=u(t)?{text:t}:t;var r,n,i=e.config.title,o=U({},t.encode);r=IT(e.add(mA(null,[{orient:null!=t.orient?t.orient:i.orient}]))),o.name=t.name,o.interactive=t.interactive,n=function(t,e,r,n){var i,o,s,u,c,l,h=t.text,f=t.orient||e.orient,d=t.anchor||e.anchor,p=f===JA||f===$A?-1:1,m=f===$A||f===ZA,g={group:m?\"width\":\"height\"},v={};return v.enter=i={opacity:{value:0}},wR(i,\"fill\",e.color),wR(i,\"font\",e.font),wR(i,\"fontSize\",e.fontSize),wR(i,\"fontWeight\",e.fontWeight),v.exit={opacity:{value:0}},v.update=o={opacity:{value:1},text:a(h)?h:{value:h+\"\"},offset:yR((null!=t.offset?t.offset:e.offset)||0)},\"start\"===d?(c=0,l=\"left\"):\"end\"===d?(c=1,l=\"right\"):(c=.5,l=\"center\"),s={field:g,mult:c},u=p<0?{value:0}:m?{field:{group:\"height\"}}:{field:{group:\"width\"}},m?(o.x=s,o.y=u,o.angle={value:0},o.baseline={value:f===$A?\"bottom\":\"top\"}):(o.x=u,o.y=s,o.angle={value:90*p},o.baseline={value:\"bottom\"}),o.align={value:l},o.limit={field:g},wR(o,\"angle\",e.angle),wR(o,\"baseline\",e.baseline),wR(o,\"limit\",e.limit),MR(TR,\"title\",t.style||\"group-title\",null,n,v,r)}(t,i,o,r),t.zindex&&(n.zindex=t.zindex),GR(n,e)}(t.title,e),e.parseLambdas(),e},ZR=rt([\"width\",\"height\",\"padding\",\"autosize\"]);function QR(t){this.config=t,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function KR(t){this.config=t.config,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}var tk=QR.prototype=KR.prototype;tk.fork=function(){return new KR(this)},tk.isSubscope=function(){return 0<this._subid},tk.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},tk.id=function(){return(this._subid?this._subid+\":\":0)+this._id++},tk.add=function(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(function(e){e.$ref=t.id}),t.refs=null),t},tk.proxy=function(t){var e=t instanceof DT?IT(t):t;return this.add(CA({value:e}))},tk.addStream=function(t){return this.streams.push(t),t.id=this.id(),t},tk.addUpdate=function(t){return this.updates.push(t),t},tk.finish=function(){var t,e;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function r(t,e,r){var n;t&&((n=t.data||(t.data={}))[e]||(n[e]=[])).push(r)}for(t in this.data)for(var n in r((e=this.data[t]).input,t,\"input\"),r(e.output,t,\"output\"),r(e.values,t,\"values\"),e.index)r(e.index[n],t,\"index:\"+n);return this},tk.pushState=function(t,e,r){this._encode.push(IT(this.add(OA({pulse:t})))),this._parent.push(e),this._lookup.push(r?IT(this.proxy(r)):null),this._markpath.push(-1)},tk.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},tk.parent=function(){return b(this._parent)},tk.encode=function(){return b(this._encode)},tk.lookup=function(){return b(this._lookup)},tk.markpath=function(){var t=this._markpath;return++t[t.length-1]},tk.fieldRef=function(t,e){if(u(t))return zT(t,e);t.signal||i(\"Unsupported field reference: \"+c(t));var r,n=t.signal,o=this.field[n];return o||(r={name:this.signalRef(n)},e&&(r.as=e),this.field[n]=o=IT(this.add(xA(r)))),o},tk.compareRef=function(t,e){function r(t){return WT(t)?(i=!0,IT(n[t.signal])):t}var n=this.signals,i=!1,o=O(t.field).map(r),s=O(t.order).map(r);return e&&o.push(FT),i?IT(this.add(gA({fields:o,orders:s}))):jT(o,s)},tk.keyRef=function(t,e){var r,n=this.signals,i=!1;return t=O(t).map(function(t){return WT(t)?(i=!0,IT(n[t.signal])):t}),i?IT(this.add(bA({fields:t,flat:e}))):(r={$key:t},e&&(r.$flat=!0),r)},tk.sortRef=function(t){if(!t)return t;var e=[BT(t.op,t.field),FT],r=t.order||\"ascending\";return r.signal?IT(this.add(gA({fields:e,orders:[r=this.signalRef(r.signal),r]}))):jT(e,[r,r])},tk.event=function(t,e){var r=t+\":\"+e;if(!this.events[r]){var n=this.id();this.streams.push({id:n,source:t,type:e}),this.events[r]=n}return this.events[r]},tk.addSignal=function(t,e){this.signals.hasOwnProperty(t)&&i(\"Duplicate signal name: \"+c(t));var r=e instanceof DT?e:this.add(NT(e));return this.signals[t]=r},tk.getSignal=function(t){return this.signals[t]||i(\"Unrecognized signal name: \"+c(t)),this.signals[t]},tk.signalRef=function(t){return this.signals[t]?IT(this.signals[t]):(this.lambdas.hasOwnProperty(t)||(this.lambdas[t]=this.add(NT(null))),IT(this.lambdas[t]))},tk.parseLambdas=function(){for(var t=Object.keys(this.lambdas),e=0,r=t.length;e<r;++e){var n=t[e],i=PT(n,this),o=this.lambdas[n];o.params=i.$params,o.update=i.$expr}},tk.property=function(t){return t&&t.signal?this.signalRef(t.signal):t},tk.objectProperty=function(t){return t&&a(t)?this.signalRef(t.signal||function t(e){return(s(e)?function(e){for(var r,n=\"[\",i=0,o=e.length;i<o;++i)r=e[i],n+=(0<i?\",\":\"\")+(a(r)?r.signal||t(r):c(r));return n+\"]\"}:function(e){var r,n,i=\"{\",o=0;for(r in e)n=e[r],i+=(1<++o?\",\":\"\")+c(r)+\":\"+(a(n)?n.signal||t(n):c(n));return i+\"}\"})(e)}(t)):t},tk.addBinding=function(t,e){this.bindings||i(\"Nested signals do not support binding: \"+c(t)),this.bindings.push(U({signal:t},e))},tk.addScaleProj=function(t,e){this.scales.hasOwnProperty(t)&&i(\"Duplicate scale or projection name: \"+c(t)),this.scales[t]=this.add(e)},tk.addScale=function(t,e){this.addScaleProj(t,DA(e))},tk.addProjection=function(t,e){this.addScaleProj(t,kA(e))},tk.getScale=function(t){return this.scales[t]||i(\"Unrecognized scale name: \"+c(t)),this.scales[t]},tk.projectionRef=tk.scaleRef=function(t){return IT(this.getScale(t))},tk.projectionType=tk.scaleType=function(t){return this.getScale(t).params.type},tk.addData=function(t,e){return this.data.hasOwnProperty(t)&&i(\"Duplicate data set name: \"+c(t)),this.data[t]=e},tk.getData=function(t){return this.data[t]||i(\"Undefined data set name: \"+c(t)),this.data[t]},tk.addDataPipeline=function(t,e){return this.data.hasOwnProperty(t)&&i(\"Duplicate data set name: \"+c(t)),this.addData(t,zR.fromEntries(this,e))};var ek=\"sans-serif\",rk=\"#4c78a8\",nk=\"#000\",ik=\"#888\",ok=\"#ddd\";function sk(t,e,r){\";\"!==e[e.length-1]&&(e=\"return(\"+e+\");\");var n=Function.apply(null,t.concat(e));return r&&r.functions?n.bind(r.functions):n}function ak(t,e){return sk([\"event\"],t,e)}function uk(t,e,r){var n,i;for(n in r=r||{},t)(i=t[n])&&i.$expr&&i.$params&&uk(i.$params,e,r),r[n]=s(i)?i.map(function(t){return ck(t,e)}):ck(i,e);return r}function ck(t,e){if(!t||!a(t))return t;for(var r,n=0,i=lk.length;n<i;++n)if(t.hasOwnProperty((r=lk[n]).key))return r.parse(t,e);return t}var lk=[{key:\"$ref\",parse:function(t,e){return e.get(t.$ref)||i(\"Operator not defined: \"+t.$ref)}},{key:\"$key\",parse:function(t,e){var r=\"k:\"+t.$key+\"_\"+!!t.$flat;return e.fn[r]||(e.fn[r]=X(t.$key,t.$flat))}},{key:\"$expr\",parse:function(t,r){var n=\"e:\"+t.$expr;return r.fn[n]||(r.fn[n]=e(sk([\"datum\",\"_\"],t.$expr,r),t.$fields,t.$name))}},{key:\"$field\",parse:function(t,e){if(!t.$field)return null;var r=\"f:\"+t.$field+\"_\"+t.$name;return e.fn[r]||(e.fn[r]=l(t.$field,t.$name))}},{key:\"$encode\",parse:function(t,r){var n,i,o=t.$encode,s={};for(n in o)s[n]=e(sk([\"item\",\"_\"],(i=o[n]).$expr,r),i.$fields),s[n].output=i.$output;return s}},{key:\"$compare\",parse:function(t,e){var r=\"c:\"+t.$compare+\"_\"+t.$order,n=O(t.$compare).map(function(t){return t&&t.$tupleid?ct:t});return e.fn[r]||(e.fn[r]=I(n,t.$order))}},{key:\"$context\",parse:function(t,e){return e}},{key:\"$subflow\",parse:function(t,e){var r=t.$subflow;return function(t,n,i){var o=fk(r,e.fork()),s=o.get(r.operators[0].id),a=o.signals.parent;return a&&a.set(i),s}}},{key:\"$tupleid\",parse:function(){return ct}}];function hk(t){return(t+\"\").toLowerCase()}var fk=function(t,e){var r=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),r.forEach(function(t){!function(t,e){\"operator\"!==hk(t.type)&&t.type?e.transform(t,t.type):e.operator(t,t.update?sk([\"_\"],t.update,e):null)}(t,e)}),r.forEach(function(t){var r,n,o,s;n=e,(r=t).params&&((o=n.get(r.id))||i(\"Invalid operator id: \"+r.id),s=uk(r.params,n),n.dataflow.connect(o,o.parameters(s)))}),(t.streams||[]).forEach(function(t){var r,n,o,s,a;n=e,s=null!=(r=t).filter?ak(r.filter,n):void 0,a=null!=r.stream?n.get(r.stream):void 0,r.source?a=n.events(r.source,r.type,s):r.merge&&(a=(o=r.merge.map(n.get.bind(n)))[0].merge.apply(o[0],o.slice(1))),r.between&&(o=r.between.map(n.get.bind(n)),a=a.between(o[0],o[1])),r.filter&&(a=a.filter(s)),null!=r.throttle&&(a=a.throttle(+r.throttle)),null!=r.debounce&&(a=a.debounce(+r.debounce)),null==a&&i(\"Invalid stream definition: \"+JSON.stringify(r)),r.consume&&a.consume(!0),n.stream(r,a)}),(t.updates||[]).forEach(function(t){!function(t,e){var r,n=e.get(t.source),o=t.update,s=void 0;n||i(\"Source not defined: \"+t.source),r=t.target&&t.target.$expr?ak(t.target.$expr,e):e.get(t.target),o&&o.$expr&&(o.$params&&(s=uk(o.$params,e)),o=sk([\"_\",\"event\"],o.$expr,e)),e.update(t,n,r,o,s)}(t,e)}),e.resolve()},dk={skip:!0},pk=function(t,e,r){return new mk(t,e,r)};function mk(t,e,r){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},r&&(this.functions=Object.create(r),this.functions.context=this)}function gk(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.functions=t.functions,this.events=t.events,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}mk.prototype=gk.prototype={fork:function(){var t=new gk(this);return(this.subcontext||(this.subcontext=[])).push(t),t},get:function(t){return this.nodes[t]},set:function(t,e){return this.nodes[t]=e},add:function(t,e){var r,n=this,i=n.dataflow;if(n.set(t.id,e),\"collect\"===hk(t.type)&&(r=t.value)&&(r.$ingest?i.ingest(e,r.$ingest,r.$format):r.$request?i.request(e,r.$request,r.$format):i.pulse(e,i.changeset().insert(r))),t.root&&(n.root=e),t.parent){var o=n.get(t.parent.$ref);o?(i.connect(o,[e]),e.targets().add(o)):(n.unresolved=n.unresolved||[]).push(function(){o=n.get(t.parent.$ref),i.connect(o,[e]),e.targets().add(o)})}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data)for(var s in t.data)r=n.data[s]||(n.data[s]={}),t.data[s].forEach(function(t){r[t]=e})},resolve:function(){return(this.unresolved||[]).forEach(function(t){t()}),delete this.unresolved,this},operator:function(t,e,r){this.add(t,this.dataflow.add(t.value,e,r,t.react))},transform:function(t,e,r){this.add(t,this.dataflow.add(this.transforms[hk(e)],r))},stream:function(t,e){this.set(t.id,e)},update:function(t,e,r,n,i){this.dataflow.on(e,r,n,i,t.options)},getState:function(t){var e=this,r={};if(t.signals){var n=r.signals={};Object.keys(e.signals).forEach(function(r){var i=e.signals[r];t.signals(r,i)&&(n[r]=i.value)})}if(t.data){var i=r.data={};Object.keys(e.data).forEach(function(r){var n=e.data[r];t.data(r,n)&&(i[r]=n.input.value)})}return e.subcontext&&!1!==t.recurse&&(r.subcontext=e.subcontext.map(function(e){return e.getState(t)})),r},setState:function(t){var e=this,r=e.dataflow,n=t.data,i=t.signals;Object.keys(i||{}).forEach(function(t){r.update(e.signals[t],i[t],dk)}),Object.keys(n||{}).forEach(function(t){r.pulse(e.data[t].input,r.changeset().remove(g).insert(n[t]))}),(t.subcontext||[]).forEach(function(t,r){var n=e.subcontext[r];n&&n.setState(t)})}};var vk=function(t,e,r){return fk(e,pk(t,jn,r||ET))},yk=\"width\",wk=\"height\",xk=\"padding\",bk={skip:!0};function _k(t,e){var r=t.autosize(),n=t.padding();return e-(r&&r.contains===xk?n.left+n.right:0)}function Mk(t,e){var r=t.autosize(),n=t.padding();return e-(r&&r.contains===xk?n.top+n.bottom:0)}function Sk(t,e){return e.modified&&s(e.input.value)&&t.indexOf(\"_:vega:_\")}function Ek(t,e){return!(\"parent\"===t||e instanceof jn.proxy)}var Tk=function(t,e,r,n){var i,o;t.element().setAttribute(\"title\",null==(i=n)?\"\":s(i)?Ak(i):a(i)&&!W(i)?(o=i,Object.keys(o).map(function(t){var e=o[t];return t+\": \"+(s(e)?Ak(e):Rk(e))}).join(\"\\n\")):i+\"\")};function Ak(t){return\"[\"+t.map(Rk).join(\", \")+\"]\"}function Rk(t){return s(t)?\"[\\u2026]\":a(t)&&!W(t)?\"{\\u2026}\":t}function kk(t,e){var r=this;e=e||{},Nn.call(r),r.loader(e.loader||r._loader),r.logLevel(e.logLevel||0),r._el=null,r._renderType=e.renderer||Qc.Canvas,r._scenegraph=new nc;var n=r._scenegraph.root;r._renderer=null,r._tooltip=e.tooltip||Tk,r._redraw=!0,r._handler=(new vc).scene(n),r._preventDefault=!1,r._eventListeners=[],r._resizeListeners=[];var i,o,a=vk(r,t,e.functions);r._runtime=a,r._signals=a.signals,r._bind=(t.bindings||[]).map(function(t){return{state:null,param:U({},t)}}),a.root&&a.root.set(n),n.source=a.data.root.input,r.pulse(a.data.root.input,r.changeset().insert(n.items)),r._background=a.background||null,r._eventConfig=((o=(i=U({},i=a.eventConfig)).defaults)&&(s(o.prevent)&&(o.prevent=rt(o.prevent)),s(o.allow)&&(o.allow=rt(o.allow))),i),r._width=r.width(),r._height=r.height(),r._viewWidth=_k(r,r._width),r._viewHeight=Mk(r,r._height),r._origin=[0,0],r._resize=0,r._autosize=1,function(t){var e=t._signals,r=e[yk],n=e[wk],i=e[xk];function o(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,function(e){t._width=e.size,t._viewWidth=_k(t,e.size),o()},{size:r}),t._resizeHeight=t.add(null,function(e){t._height=e.size,t._viewHeight=Mk(t,e.size),o()},{size:n});var s=t.add(null,o,{pad:i});t._resizeWidth.rank=r.rank+1,t._resizeHeight.rank=n.rank+1,s.rank=i.rank+1}(r),WM(r)}var Ck=H(kk,Nn);function Lk(t,e){return t._signals.hasOwnProperty(e)?t._signals[e]:i(\"Unrecognized signal name: \"+c(e))}function Pk(t,e){var r=(t._targets||[]).filter(function(t){var r=t._update;return r&&r.handler===e});return r.length?r[0]:null}Ck.run=function(t){if(Nn.prototype.run.call(this,t),this._redraw||this._resize)try{this.render()}catch(t){this.error(t)}return this},Ck.render=function(){var t,e,r,n;return this._renderer&&(this._resize&&(this._resize=0,e=JM(t=this),r=XM(t),n=$M(t),t._renderer.background(t._background),t._renderer.resize(r,n,e),t._handler.origin(e),t._resizeListeners.forEach(function(t){t(r,n)})),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},Ck.dirty=function(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},Ck.container=function(){return this._el},Ck.scenegraph=function(){return this._scenegraph},Ck.origin=function(){return this._origin.slice()},Ck.signal=function(t,e,r){var n=Lk(this,t);return 1===arguments.length?n.value:this.update(n,e,r)},Ck.background=function(t){return arguments.length?(this._background=t,this._resize=1,this):this._background},Ck.width=function(t){return arguments.length?this.signal(\"width\",t):this.signal(\"width\")},Ck.height=function(t){return arguments.length?this.signal(\"height\",t):this.signal(\"height\")},Ck.padding=function(t){return arguments.length?this.signal(\"padding\",t):this.signal(\"padding\")},Ck.autosize=function(t){return arguments.length?this.signal(\"autosize\",t):this.signal(\"autosize\")},Ck.renderer=function(t){return arguments.length?(tl(t)||i(\"Unrecognized renderer type: \"+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},Ck.tooltip=function(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},Ck.loader=function(t){return arguments.length?(t!==this._loader&&(Nn.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},Ck.resize=function(){return this._autosize=1,this},Ck._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el))},Ck._resizeView=function(t,e,r,n,i,o){this.runAfter(function(s){var a=0;s._autosize=0,s.width()!==r&&(a=1,s.signal(yk,r,bk),s._resizeWidth.skip(!0)),s.height()!==n&&(a=1,s.signal(wk,n,bk),s._resizeHeight.skip(!0)),s._viewWidth!==t&&(s._resize=1,s._viewWidth=t),s._viewHeight!==e&&(s._resize=1,s._viewHeight=e),s._origin[0]===i[0]&&s._origin[1]===i[1]||(s._resize=1,s._origin=i),a&&s.run(\"enter\"),o&&s.runAfter(function(){s.resize()})},!1,1)},Ck.addEventListener=function(t,e){return this._handler.on(t,e),this},Ck.removeEventListener=function(t,e){return this._handler.off(t,e),this},Ck.addResizeListener=function(t){var e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},Ck.removeResizeListener=function(t){var e=this._resizeListeners,r=e.indexOf(t);return 0<=r&&e.splice(r,1),this},Ck.addSignalListener=function(t,e){var r=Lk(this,t),n=Pk(r,e);return n||((n=function(){e(t,r.value)}).handler=e,this.on(r,null,n)),this},Ck.removeSignalListener=function(t,e){var r=Lk(this,t),n=Pk(r,e);return n&&r._targets.remove(n),this},Ck.preventDefault=function(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},Ck.tooltipHandler=function(t){var e=this._handler;return arguments.length?(e.handleTooltip=t||hc.prototype.handleTooltip,this):e.handleTooltip},Ck.events=function(t,e,r){var n,i=this,o=new Tt(r),s=function(r,n){var s,a,c,l,h;\"view\"!==t||(a=e,l=(c=(s=i)._eventConfig.defaults)&&c.prevent,h=c&&c.allow,!1===l||!0===h||!0!==l&&!1!==h&&(l?!l[a]:h?h[a]:!s.preventDefault()))||r.preventDefault();try{o.receive(function(t,e,r){var n,i,o=t._renderer.scene();return o&&(i=JM(t),(n=gc(e.changedTouches?e.changedTouches[0]:e,o))[0]-=i[0],n[1]-=i[1]),e.dataflow=t,e.vega=function(t,e,r){var n=e?\"group\"===e.mark.marktype?e:e.mark.group:null;function i(t){var r,i=n;if(t)for(r=e;r;r=r.mark.group)if(r.mark.name===t){i=r;break}return i&&i.mark&&i.mark.interactive?i:{}}function o(t){if(!t)return r;u(t)&&(t=i(t));for(var e=r.slice();t;)e[0]-=t.x||0,e[1]-=t.y||0,t=t.mark&&t.mark.group;return e}return{view:F(t),item:F(e||{}),group:i,xy:o,x:function(t){return o(t)[0]},y:function(t){return o(t)[1]}}}(t,r,n),e.item=r,e}(i,r,n))}catch(r){i.error(r)}finally{i.run()}};if(\"view\"===t)return i.addEventListener(e,s),o;if(\"window\"===t?\"undefined\"!=typeof window&&(n=[window]):\"undefined\"!=typeof document&&(n=document.querySelectorAll(t)),!n)return i.warn(\"Can not resolve event source: \"+t),o;for(var a=0,c=n.length;a<c;++a)n[a].addEventListener(e,s);return i._eventListeners.push({type:e,sources:n,handler:s}),o},Ck.finalize=function(){for(var t,e,r=this._eventListeners,n=r.length;0<=--n;)for(t=(e=r[n]).sources.length;0<=--t;)e.sources[t].removeEventListener(e.type,e.handler)},Ck.hover=function(t,e){return e=[e||\"update\",(t=[t||\"hover\"])[0]],this.on(this.events(\"view\",\"mouseover\",ZM),QM,KM(t)),this.on(this.events(\"view\",\"mouseout\",ZM),QM,KM(e)),this},Ck.data=function(t){return qM(this,t).values.value},Ck.change=YM,Ck.insert=function(t,e){return YM.call(this,t,gt().insert(e))},Ck.remove=function(t,e){return YM.call(this,t,gt().remove(e))},Ck.initialize=function(t,e){var r,n,i,o,s,a,u,c,l,h=this,f=h._renderType,d=tl(f);return t=h._el=t?lS(h,t):null,d||h.error(\"Unrecognized renderer type: \"+f),r=d.handler||vc,h._renderer=(n=t?d.renderer:d.headless)?cS(h,h._renderer,t,n):null,h._handler=(o=(i=h)._handler,s=t,a=new r(i.loader(),(u=i,c=u.tooltip(),l=null,c&&(l=function(){try{c.apply(this,arguments)}catch(t){u.error(t)}}),l)).scene(i.scenegraph().root).initialize(s,JM(i),i),o&&o.handlers().forEach(function(t){a.on(t.type,t.handler)}),a),h._redraw=!0,t&&(e=e?lS(h,e):t.appendChild(tS(\"div\",{class:\"vega-bindings\"})),h._bind.forEach(function(t){t.param.element&&(t.element=lS(h,t.param.element))}),h._bind.forEach(function(t){!function(t,e,r){if(e){var n=r.param,i=r.state;i||(i=r.state={elements:null,active:!1,set:null,update:function(e){i.source=!0,t.signal(n.signal,e).run()}},n.debounce&&(i.update=z(n.debounce,i.update))),function(t,e,r,n){var i=tS(\"div\",{class:\"vega-bind\"});i.appendChild(tS(\"span\",{class:\"vega-bind-name\"},r.name||r.signal)),e.appendChild(i);var o=nS;switch(r.input){case\"checkbox\":o=iS;break;case\"select\":o=oS;break;case\"radio\":o=sS;break;case\"range\":o=aS}o(t,i,r,n)}(i,e,n,t.signal(n.signal)),i.active||(t.on(t._signals[n.signal],null,function(){i.source?i.source=!1:i.set(t.signal(n.signal))}),i.active=!0)}}(h,t.element||e,t)})),h},Ck.toImageURL=function(t,e){return t!==Qc.Canvas&&t!==Qc.SVG&&t!==Qc.PNG?Promise.reject(\"Unrecognized image type: \"+t):hS(this,t,e).then(function(e){return t===Qc.SVG?(r=e.svg(),n=new Blob([r],{type:\"image/svg+xml\"}),window.URL.createObjectURL(n)):e.canvas().toDataURL(\"image/png\");var r,n})},Ck.toCanvas=function(t){return hS(this,Qc.Canvas,t).then(function(t){return t.canvas()})},Ck.toSVG=function(t){return hS(this,Qc.SVG,t).then(function(t){return t.svg()})},Ck.getState=function(t){return this._runtime.getState(t||{data:Sk,signals:Ek,recurse:!0})},Ck.setState=function(t){var e=this;return e.runAfter(function(){e._trigger=!1,e._runtime.setState(t),e.run().runAfter(function(){e._trigger=!0})}),this},U(jn,No,zl,ug,Ox,Rb,U_,bM,NM,HM),t.version=\"3.3.1\",t.Dataflow=Nn,t.EventStream=Tt,t.Parameters=yt,t.Pulse=_n,t.MultiPulse=An,t.Operator=_t,t.Transform=zn,t.changeset=gt,t.ingest=ht,t.isTuple=ut,t.definition=Vn,t.transform=Bn,t.transforms=jn,t.tupleid=ct,t.scale=Ud,t.scheme=wm,t.interpolate=Mm,t.interpolateRange=xm,t.timeInterval=Tm,t.utcInterval=Am,t.projection=Sx,t.View=kk,t.parse=function(t,e){return a(t)||i(\"Input Vega specification must be an object.\"),(r=t,n=new QR(function(t){var e={padding:0,autosize:\"pad\",background:null,events:{defaults:{allow:[\"wheel\"]}},group:null,mark:null,arc:{fill:rk},area:{fill:rk},image:null,line:{stroke:rk,strokeWidth:2},path:{stroke:rk},rect:{fill:rk},rule:{stroke:nk},shape:{stroke:rk},symbol:{fill:rk,size:64},text:{fill:nk,font:ek,fontSize:11},style:{\"guide-label\":{fill:nk,font:ek,fontSize:10},\"guide-title\":{fill:nk,font:ek,fontSize:11,fontWeight:\"bold\"},\"group-title\":{fill:nk,font:ek,fontSize:13,fontWeight:\"bold\"},point:{size:30,strokeWidth:2,shape:\"circle\"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:\"square\"},cell:{fill:\"transparent\",stroke:ok}},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:ik,grid:!1,gridWidth:1,gridColor:ok,gridOpacity:1,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:ik,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:\"center\",titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:\"right\",offset:18,padding:0,entryPadding:5,titlePadding:5,gradientWidth:100,gradientHeight:20,gradientStrokeColor:ok,gradientStrokeWidth:0,gradientLabelBaseline:\"top\",gradientLabelOffset:2,labelAlign:\"left\",labelBaseline:\"middle\",labelOffset:8,labelLimit:160,symbolType:\"circle\",symbolSize:100,symbolFillColor:\"transparent\",symbolStrokeColor:ik,symbolStrokeWidth:1.5,titleAlign:\"left\",titleBaseline:\"top\",titleLimit:180},title:{orient:\"top\",anchor:\"middle\",offset:4},range:{category:{scheme:\"tableau10\"},ordinal:{scheme:\"blues\",extent:[.2,1]},heatmap:{scheme:\"viridis\"},ramp:{scheme:\"blues\",extent:[.2,1]},diverging:{scheme:\"blueorange\"},symbol:[\"circle\",\"square\",\"triangle-up\",\"cross\",\"diamond\",\"triangle-right\",\"triangle-down\",\"triangle-left\"]}};return(t||[]).forEach(function(t){var r,n,i;if(t)for(r in t)if(\"style\"===r)for(r in i=e.style||(e.style={}),t.style)i[r]=U(i[r]||{},t.style[r]);else e[r]=a(n=t[r])&&!s(n)?U(a(e[r])?e[r]:{},n):n}),e}([e,t.config])),f=n.config,n.background=r.background||f.background,n.eventConfig=f.events,h=IT(n.root=n.add(NT())),n.addSignal(\"width\",r.width||0),n.addSignal(\"height\",r.height||0),n.addSignal(\"padding\",function(t,e){return a(t=t||f.padding)?{top:fS(t.top),bottom:fS(t.bottom),left:fS(t.left),right:fS(t.right)}:{top:r=fS(t),bottom:r,left:r,right:r};var r}(r.padding)),n.addSignal(\"autosize\",function(t,e){return a(t=t||f.autosize)?t:{type:t=t||\"pad\"}}(r.autosize)),O(r.signals).forEach(function(t){ZR[t.name]||wS(t,n)}),u=n.add(mA()),c=xR({enter:{x:{value:0},y:{value:0}},update:{width:{signal:\"width\"},height:{signal:\"height\"}}},r.encode),c=n.add(yA(bR(c,SR,gR,r.style,n,{pulse:IT(u)}))),l=n.add(IA({layout:n.objectProperty(r.layout),legendMargin:f.legendMargin,autosize:n.signalRef(\"autosize\"),mark:h,pulse:IT(c)})),n.operators.pop(),n.pushState(IT(c),IT(l),null),JR(r,n,!0),n.operators.push(l),o=n.add(pA({mark:h,pulse:IT(l)})),o=n.add(PA({pulse:IT(o)})),o=n.add(OA({pulse:IT(o)})),n.addData(\"root\",new zR(n,u,u,o)),n).toRuntime();var r,n,o,u,c,l,h,f},t.expressionFunction=kT,t.formatLocale=fd,t.timeFormatLocale=vn,t.runtime=fk,t.runtimeContext=pk,t.bin=Zn,t.bootstrapCI=wi,t.quartiles=xi,t.setRandom=function(e){t.random=e},t.randomInteger=function(e,r){null==r&&(r=e,e=0);var n,i,o,s={min:function(t){return arguments.length?(o=i-(n=t||0),s):n},max:function(t){return arguments.length?(o=(i=t||0)-n,s):i},sample:function(){return n+Math.floor(o*t.random())},pdf:function(t){return t===Math.floor(t)&&n<=t&&t<i?1/o:0},cdf:function(t){var e=Math.floor(t);return e<n?0:i<=e?1:(e-n+1)/o},icdf:function(t){return 0<=t&&t<=1?n-1+Math.floor(t*o):NaN}};return s.min(e).max(r)},t.randomKDE=_i,t.randomMixture=Mi,t.randomNormal=bi,t.randomUniform=Si,t.accessor=e,t.accessorName=r,t.accessorFields=n,t.id=f,t.identity=d,t.zero=p,t.one=m,t.truthy=g,t.falsy=v,t.logger=x,t.None=0,t.Error=w,t.Warn=2,t.Info=3,t.Debug=4,t.panLinear=A,t.panLog=R,t.panPow=k,t.zoomLinear=L,t.zoomLog=P,t.zoomPow=D,t.array=O,t.compare=I,t.constant=F,t.debounce=z,t.error=i,t.extend=U,t.extentIndex=j,t.fastmap=B,t.field=l,t.inherits=H,t.isArray=s,t.isBoolean=G,t.isDate=W,t.isFunction=N,t.isNumber=q,t.isObject=a,t.isRegExp=Y,t.isString=u,t.key=X,t.merge=$,t.pad=Z,t.peek=b,t.repeat=J,t.splitAccessPath=o,t.stringValue=c,t.toBoolean=Q,t.toDate=tt,t.toNumber=_,t.toString=et,t.toSet=rt,t.truncate=nt,t.visitArray=it,t.loader=te,t.read=wn,t.inferType=he,t.inferTypes=fe,t.typeParsers=ue,t.formats=Ee,t.Bounds=Io,t.Gradient=jo,t.GroupItem=Bo,t.ResourceLoader=Go,t.Item=Vo,t.Scenegraph=nc,t.Handler=hc,t.Renderer=pc,t.CanvasHandler=vc,t.CanvasRenderer=_c,t.SVGHandler=Tc,t.SVGRenderer=Nc,t.SVGStringRenderer=qc,t.RenderType=Qc,t.renderModule=tl,t.Marks=Ju,t.boundClip=rl,t.boundContext=Ya,t.boundStroke=Ha,t.boundItem=Zu,t.boundMark=Ku,t.pathCurves=oa,t.pathSymbols=xa,t.pathRectangle=Aa,t.pathTrail=ka,t.pathParse=ua,t.pathRender=ma,t.point=gc,t.domCreate=sc,t.domFind=ac,t.domChild=uc,t.domClear=cc,t.openTag=kc,t.closeTag=Cc,t.font=Wu,t.textMetrics=Fu,t.resetSVGClipId=function(){gu=1},t.sceneEqual=il,t.pathEqual=ol,t.sceneToJSON=ec,t.sceneFromJSON=rc,t.sceneZOrder=eu,t.sceneVisit=ru,t.scenePickVisit=nu,Object.defineProperty(t,\"__esModule\",{value:!0})}),function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e(t.vegaTooltip={})}(this,function(t){\"use strict\";var e=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r={offsetX:10,offsetY:10,id:\"vg-tooltip-element\",styleId:\"vega-tooltip-style\",theme:\"light\",disableDefaultStyle:!1,sanitize:n,maxDepth:2};function n(t){return String(t).replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\")}function i(t){if(!/^[A-Za-z]+[-:.\\w]*$/.test(t))throw new Error(\"Invalid HTML ID\");return\"\\n#\"+t+\" {\\n  visibility: hidden;\\n  padding: 8px;\\n  position: fixed;\\n  z-index: 1000;\\n  font-family: sans-serif;\\n  font-size: 11px;\\n  border-radius: 3px;\\n  box-shadow: 2px 2px 4px rgba(0,0,0,0.1);\\n\\n  /* The default theme is the light theme. */\\n  background-color: rgba(255, 255, 255, 0.95);\\n  border: 1px solid #d9d9d9;\\n  color: black;\\n}\\n#\"+t+\".visible {\\n  visibility: visible;\\n}\\n#\"+t+\" h2 {\\n  margin-top: 0;\\n  margin-bottom: 10px;\\n  font-size: 13px;\\n}\\n#\"+t+\" table {\\n  border-spacing: 0;\\n}\\n#\"+t+\" td {\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  padding-top: 2px;\\n  padding-bottom: 2px;\\n}\\n#\"+t+\" td.key {\\n  color: #808080;\\n  max-width: 150px;\\n  text-align: right;\\n  padding-right: 4px;\\n}\\n#\"+t+\" td.value {\\n  display: block;\\n  max-width: 300px;\\n  max-height: 7em;\\n  text-align: left;\\n}\\n\\n/* Dark and light color themes */\\n#\"+t+\".dark-theme {\\n  background-color: rgba(32, 32, 32, 0.9);\\n  border: 1px solid #f5f5f5;\\n  color: white;\\n}\\n#\"+t+\".dark-theme td.key {\\n  color: #bfbfbf;\\n}\\n\\n#\"+t+\".light-theme {\\n  background-color: rgba(255, 255, 255, 0.95);\\n  border: 1px solid #d9d9d9;\\n  color: black;\\n}\\n#\"+t+\".light-theme td.key {\\n  color: #808080;\\n}\\n\"}function o(t,e,r){return t.fields=e||[],t.fname=r,t}function s(t){throw Error(t)}var a=Array.isArray;function u(t){return t===Object(t)}function c(t){return\"string\"==typeof t}var l,h,f,d=[];function p(t,e,r){if(a(t))return\"[\"+t.map(function(t){return e(c(t)?t:g(t,r))}).join(\", \")+\"]\";if(u(t)){var n=\"\",i=t.title,o=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&(r[n[i]]=t[n[i]])}return r}(t,[\"title\"]);i&&(n+=\"<h2>\"+e(i)+\"</h2>\");var s=Object.keys(o);if(0<s.length){n+=\"<table>\";for(var l=0,h=s;l<h.length;l++){var f=h[l],d=o[f];u(d)&&(d=g(d,r)),n+='<tr><td class=\"key\">'+e(f)+':</td><td class=\"value\">'+e(d)+\"</td></tr>\"}n+=\"</table>\"}return n||\"{}\"}return e(t)}function m(t){var e=[];return function(r,n){if(\"object\"!=typeof n||null===n)return n;var i=e.indexOf(this)+1;return e.length=i,e.length>t?\"[Object]\":0<=e.indexOf(n)?\"[Circular]\":(e.push(n),n)}}function g(t,e){return JSON.stringify(t,m(e))}function v(t,e,r,n){var i=t.clientX+r;i+e.width>window.innerWidth&&(i=+t.clientX-r-e.width);var o=t.clientY+n;return o+e.height>window.innerHeight&&(o=+t.clientY-n-e.height),{x:i,y:o}}f=\"return _[\"+(h=function(t){var e,r,n,i=[],o=null,a=0,u=t.length,c=\"\";function l(){i.push(c+t.substring(e,r)),c=\"\",e=r+1}for(t+=\"\",e=r=0;r<u;++r)if(\"\\\\\"===(n=t[r]))c+=t.substring(e,r),e=++r;else if(n===o)l(),o=null,a=-1;else{if(o)continue;e===a&&'\"'===n?(e=r+1,o=n):e===a&&\"'\"===n?(e=r+1,o=n):\".\"!==n||a?\"[\"===n?(e<r&&l(),a=e=r+1):\"]\"===n&&(a||s(\"Access path missing open bracket: \"+t),0<a&&l(),a=0,e=r+1):e<r?l():e=r+1}return a&&s(\"Access path missing closing bracket: \"+t),o&&s(\"Access path missing closing quote: \"+t),e<r&&(r++,l()),i}(l=\"id\")).map(function t(e){return a(e)?\"[\"+e.map(t)+\"]\":u(e)||c(e)?JSON.stringify(e).replace(\"\\u2028\",\"\\\\u2028\").replace(\"\\u2029\",\"\\\\u2029\"):e}).join(\"][\")+\"];\",o(Function(\"_\",f),[l=1===h.length?h[0]:l],l),o(function(t){return t},d,\"identity\"),o(function(){return 0},d,\"zero\"),o(function(){return 1},d,\"one\"),o(function(){return!0},d,\"true\"),o(function(){return!1},d,\"false\");var y=function(){function t(t){this.options=e({},r,t);var n=this.options.id;if(this.call=this.tooltip_handler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var o=document.createElement(\"style\");o.setAttribute(\"id\",this.options.styleId),o.innerHTML=i(n),0<document.head.childNodes.length?document.head.insertBefore(o,document.head.childNodes[0]):document.head.appendChild(o)}this.el=document.getElementById(n),this.el||(this.el=document.createElement(\"div\"),this.el.setAttribute(\"id\",n),this.el.classList.add(\"vg-tooltip\"),document.body.appendChild(this.el))}return t.prototype.tooltip_handler=function(t,e,r,i){if(null!=i&&\"\"!==i){this.el.innerHTML=p(i,n,this.options.maxDepth),this.el.classList.add(\"visible\",this.options.theme+\"-theme\");var o=v(e,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute(\"style\",\"top: \"+o.y+\"px; left: \"+o.x+\"px\")}else this.el.classList.remove(\"visible\",this.options.theme+\"-theme\")},t}();t.default=function(t,e){var r=new y(e);return t.tooltip(r.call).run(),r},t.DEFAULT_OPTIONS=r,t.escapeHTML=n,t.createDefaultStyle=i,t.formatValue=p,t.replacer=m,t.stringify=g,t.calculatePosition=v,t.Handler=y,Object.defineProperty(t,\"__esModule\",{value:!0})}),function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.ML=e():t.ML=e()}(this,function(){var e=Number.MAX_VALUE,t=Number.MIN_VALUE,n=Math.tanh,o=Math.exp,s=Math.ceil,r=Math.log,c=Math.pow,u=Math.abs,a=Number.EPSILON,M=Math.max,v=Math.min,g=Math.floor,m=Number.isInteger,R=Math.sqrt;return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,\"a\",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=103)}([function(t){\"use strict\";function e(t,e){for(var r=0,n=0;n<t.length;n++)r+=(t[n]-e[n])*(t[n]-e[n]);return r}function r(t,r){return R(e(t,r))}t.exports=r,r.squared=e},function(t,e,r){\"use strict\";t.exports=e=r(105),e.getEquallySpacedData=r(107).getEquallySpacedData,e.SNV=r(108).SNV},function(t,e,r){\"use strict\";e.array=r(52),e.matrix=r(106)},function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(125);Object.defineProperty(e,\"maybeToPrecision\",{enumerable:!0,get:function(){return n(i).default}});var o=r(126);Object.defineProperty(e,\"checkArrayLength\",{enumerable:!0,get:function(){return n(o).default}});class s{constructor(){if(new.target===s)throw new Error(\"BaseRegression must be subclassed\")}predict(t){if(\"number\"==typeof t)return this._predict(t);if(Array.isArray(t)){for(var e=Array(t.length),r=0;r<t.length;r++)e[r]=this._predict(t[r]);return e}throw new TypeError(\"x must be a number or array\")}_predict(){throw new Error(\"_predict must be implemented\")}train(){}toString(){return\"\"}toLaTeX(){return\"\"}score(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)throw new Error(\"x and y must be arrays of the same length\");for(var r=t.length,n=Array(r),i=0;i<r;i++)n[i]=this._predict(t[i]);for(var o=0,s=0,a=0,u=0,c=0,l=0,h=0,f=0;f<r;f++)o+=n[f],s+=e[f],c+=n[f]*n[f],l+=e[f]*e[f],h+=n[f]*e[f],0!==e[f]&&(a+=(e[f]-n[f])*(e[f]-n[f])/e[f]),u=(e[f]-n[f])*(e[f]-n[f]);var d=(r*h-o*s)/R((r*c-o*o)*(r*l-s*s));return{r:d,r2:d*d,chi2:a,rmsd:u*u/r}}}e.default=s},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),r(104);var n=r(32),i=n&&n.__esModule?n:{default:n},o=r(23);class s extends((0,i.default)(Array)){constructor(t,e){var r;if(1===arguments.length&&\"number\"==typeof t)return Array(t);if(s.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError(\"nColumns must be a positive integer\");for(r=0;r<t;r++)this[r]=Array(e)}else{if(!Array.isArray(t))throw new TypeError(\"First argument must be a positive number or an array\");var n=t;if(t=n.length,\"number\"!=typeof(e=n[0].length)||0===e)throw new TypeError(\"Data must be a 2D array with at least one element\");for(super(t),r=0;r<t;r++){if(n[r].length!==e)throw new RangeError(\"Inconsistent array dimensions\");this[r]=[].concat(n[r])}}return this.rows=t,this.columns=e,this}set(t,e,r){return this[t][e]=r,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}removeRow(t){if((0,o.checkRowIndex)(this,t),1===this.rows)throw new RangeError(\"A matrix cannot have less than one row\");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),(0,o.checkRowIndex)(this,t,!0),e=(0,o.checkRowVector)(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if((0,o.checkColumnIndex)(this,t),1===this.columns)throw new RangeError(\"A matrix cannot have less than one column\");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),(0,o.checkColumnIndex)(this,t,!0),e=(0,o.checkColumnVector)(this,e);for(var r=0;r<this.rows;r++)this[r].splice(t,0,e[r]);return this.columns+=1,this}}e.default=s},function(t,e,r){\"use strict\";r(193);var n=r(69),i=r(24);class o extends(n(Array)){constructor(t,e){var r;if(1===arguments.length&&\"number\"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError(\"nColumns must be a positive integer\");for(r=0;r<t;r++)this[r]=Array(e)}else{if(!Array.isArray(t))throw new TypeError(\"First argument must be a positive number or an array\");var n=t;if(t=n.length,\"number\"!=typeof(e=n[0].length)||0===e)throw new TypeError(\"Data must be a 2D array with at least one element\");for(super(t),r=0;r<t;r++){if(n[r].length!==e)throw new RangeError(\"Inconsistent array dimensions\");this[r]=[].concat(n[r])}}return this.rows=t,this.columns=e,this}set(t,e,r){return this[t][e]=r,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError(\"A matrix cannot have less than one row\");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError(\"A matrix cannot have less than one column\");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this[r].splice(t,0,e[r]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=n},function(t,e,r){\"use strict\";r(211);var n=r(73),i=r(25);class o extends(n(Array)){constructor(t,e){var r;if(1===arguments.length&&\"number\"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError(\"nColumns must be a positive integer\");for(r=0;r<t;r++)this[r]=Array(e)}else{if(!Array.isArray(t))throw new TypeError(\"First argument must be a positive number or an array\");var n=t;if(t=n.length,\"number\"!=typeof(e=n[0].length)||0===e)throw new TypeError(\"Data must be a 2D array with at least one element\");for(super(t),r=0;r<t;r++){if(n[r].length!==e)throw new RangeError(\"Inconsistent array dimensions\");this[r]=[].concat(n[r])}}return this.rows=t,this.columns=e,this}set(t,e,r){return this[t][e]=r,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError(\"A matrix cannot have less than one row\");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError(\"A matrix cannot have less than one column\");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this[r].splice(t,0,e[r]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=n},function(t,e,r){\"use strict\";r(228);var n=r(76),i=r(26);class o extends(n(Array)){constructor(t,e){var r;if(1===arguments.length&&\"number\"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError(\"nColumns must be a positive integer\");for(r=0;r<t;r++)this[r]=Array(e)}else{if(!Array.isArray(t))throw new TypeError(\"First argument must be a positive number or an array\");var n=t;if(t=n.length,\"number\"!=typeof(e=n[0].length)||0===e)throw new TypeError(\"Data must be a 2D array with at least one element\");for(super(t),r=0;r<t;r++){if(n[r].length!==e)throw new RangeError(\"Inconsistent array dimensions\");this[r]=[].concat(n[r])}}return this.rows=t,this.columns=e,this}set(t,e,r){return this[t][e]=r,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError(\"A matrix cannot have less than one row\");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError(\"A matrix cannot have less than one column\");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this[r].splice(t,0,e[r]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=n},function(t,e,r){\"use strict\";r(241);var n=r(80),i=r(27);class o extends(n(Array)){constructor(t,e){var r;if(1===arguments.length&&\"number\"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError(\"nColumns must be a positive integer\");for(r=0;r<t;r++)this[r]=Array(e)}else{if(!Array.isArray(t))throw new TypeError(\"First argument must be a positive number or an array\");var n=t;if(t=n.length,\"number\"!=typeof(e=n[0].length)||0===e)throw new TypeError(\"Data must be a 2D array with at least one element\");for(super(t),r=0;r<t;r++){if(n[r].length!==e)throw new RangeError(\"Inconsistent array dimensions\");this[r]=[].concat(n[r])}}return this.rows=t,this.columns=e,this}set(t,e,r){return this[t][e]=r,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError(\"A matrix cannot have less than one row\");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError(\"A matrix cannot have less than one column\");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this[r].splice(t,0,e[r]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=n},function(t,e,r){\"use strict\";r(257);var n=r(83),i=r(28);class o extends(n(Array)){constructor(t,e){var r;if(1===arguments.length&&\"number\"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError(\"nColumns must be a positive integer\");for(r=0;r<t;r++)this[r]=Array(e)}else{if(!Array.isArray(t))throw new TypeError(\"First argument must be a positive number or an array\");var n=t;if(t=n.length,\"number\"!=typeof(e=n[0].length)||0===e)throw new TypeError(\"Data must be a 2D array with at least one element\");for(super(t),r=0;r<t;r++){if(n[r].length!==e)throw new RangeError(\"Inconsistent array dimensions\");this[r]=[].concat(n[r])}}return this.rows=t,this.columns=e,this}set(t,e,r){return this[t][e]=r,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError(\"A matrix cannot have less than one row\");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError(\"A matrix cannot have less than one column\");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this[r].splice(t,0,e[r]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=n},function(t,e,r){\"use strict\";r(277);var n=r(88),i=r(29);class o extends(n(Array)){constructor(t,e){var r;if(1===arguments.length&&\"number\"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError(\"nColumns must be a positive integer\");for(r=0;r<t;r++)this[r]=Array(e)}else{if(!Array.isArray(t))throw new TypeError(\"First argument must be a positive number or an array\");var n=t;if(t=n.length,\"number\"!=typeof(e=n[0].length)||0===e)throw new TypeError(\"Data must be a 2D array with at least one element\");for(super(t),r=0;r<t;r++){if(n[r].length!==e)throw new RangeError(\"Inconsistent array dimensions\");this[r]=[].concat(n[r])}}return this.rows=t,this.columns=e,this}set(t,e,r){return this[t][e]=r,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError(\"A matrix cannot have less than one row\");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError(\"A matrix cannot have less than one column\");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this[r].splice(t,0,e[r]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=n},function(t,e,r){\"use strict\";r(291);var n=r(91),i=r(30);class o extends(n(Array)){constructor(t,e){var r;if(1===arguments.length&&\"number\"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError(\"nColumns must be a positive integer\");for(r=0;r<t;r++)this[r]=Array(e)}else{if(!Array.isArray(t))throw new TypeError(\"First argument must be a positive number or an array\");var n=t;if(t=n.length,\"number\"!=typeof(e=n[0].length)||0===e)throw new TypeError(\"Data must be a 2D array with at least one element\");for(super(t),r=0;r<t;r++){if(n[r].length!==e)throw new RangeError(\"Inconsistent array dimensions\");this[r]=[].concat(n[r])}}return this.rows=t,this.columns=e,this}set(t,e,r){return this[t][e]=r,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError(\"A matrix cannot have less than one row\");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError(\"A matrix cannot have less than one column\");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this[r].splice(t,0,e[r]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=n},function(t,e,r){\"use strict\";r(322);var n=r(97),i=r(31);class o extends(n(Array)){constructor(t,e){var r;if(1===arguments.length&&\"number\"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError(\"nColumns must be a positive integer\");for(r=0;r<t;r++)this[r]=Array(e)}else{if(!Array.isArray(t))throw new TypeError(\"First argument must be a positive number or an array\");var n=t;if(t=n.length,\"number\"!=typeof(e=n[0].length)||0===e)throw new TypeError(\"Data must be a 2D array with at least one element\");for(super(t),r=0;r<t;r++){if(n[r].length!==e)throw new RangeError(\"Inconsistent array dimensions\");this[r]=[].concat(n[r])}}return this.rows=t,this.columns=e,this}set(t,e,r){return this[t][e]=r,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError(\"A matrix cannot have less than one row\");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError(\"A matrix cannot have less than one column\");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this[r].splice(t,0,e[r]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=n},function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(4);Object.defineProperty(e,\"default\",{enumerable:!0,get:function(){return n(i).default}}),Object.defineProperty(e,\"Matrix\",{enumerable:!0,get:function(){return n(i).default}});var o=r(32);Object.defineProperty(e,\"abstractMatrix\",{enumerable:!0,get:function(){return n(o).default}});var s=r(116);Object.defineProperty(e,\"solve\",{enumerable:!0,get:function(){return s.solve}}),Object.defineProperty(e,\"inverse\",{enumerable:!0,get:function(){return s.inverse}});var a=r(51);Object.defineProperty(e,\"SingularValueDecomposition\",{enumerable:!0,get:function(){return n(a).default}}),Object.defineProperty(e,\"SVD\",{enumerable:!0,get:function(){return n(a).default}});var u=r(117);Object.defineProperty(e,\"EigenvalueDecomposition\",{enumerable:!0,get:function(){return n(u).default}}),Object.defineProperty(e,\"EVD\",{enumerable:!0,get:function(){return n(u).default}});var c=r(118);Object.defineProperty(e,\"CholeskyDecomposition\",{enumerable:!0,get:function(){return n(c).default}}),Object.defineProperty(e,\"CHO\",{enumerable:!0,get:function(){return n(c).default}});var l=r(33);Object.defineProperty(e,\"LuDecomposition\",{enumerable:!0,get:function(){return n(l).default}}),Object.defineProperty(e,\"LU\",{enumerable:!0,get:function(){return n(l).default}});var h=r(53);Object.defineProperty(e,\"QrDecomposition\",{enumerable:!0,get:function(){return n(h).default}}),Object.defineProperty(e,\"QR\",{enumerable:!0,get:function(){return n(h).default}})},function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var i=n(r(32)),o=n(r(4));e.default=class extends((0,i.default)()){constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}static get[Symbol.species](){return o.default}}},function(t,e,r){\"use strict\";var n=r(69),i=r(5);t.exports=class extends(n()){constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}static get[Symbol.species](){return i.Matrix}}},function(t,e,r){\"use strict\";var n=r(73),i=r(6);t.exports=class extends(n()){constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}static get[Symbol.species](){return i.Matrix}}},function(t,e,r){\"use strict\";var n=r(76),i=r(7);t.exports=class extends(n()){constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}static get[Symbol.species](){return i.Matrix}}},function(t,e,r){\"use strict\";var n=r(80),i=r(8);t.exports=class extends(n()){constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}static get[Symbol.species](){return i.Matrix}}},function(t,e,r){\"use strict\";var n=r(83),i=r(9);t.exports=class extends(n()){constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}static get[Symbol.species](){return i.Matrix}}},function(t,e,r){\"use strict\";var n=r(88),i=r(10);t.exports=class extends(n()){constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}static get[Symbol.species](){return i.Matrix}}},function(t,e,r){\"use strict\";var n=r(91),i=r(11);t.exports=class extends(n()){constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}static get[Symbol.species](){return i.Matrix}}},function(t,e,r){\"use strict\";var n=r(97),i=r(12);t.exports=class extends(n()){constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}static get[Symbol.species](){return i.Matrix}}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.checkRowIndex=function(t,e,r){if(0>e||e>(r?t.rows:t.rows-1))throw new RangeError(\"Row index out of range\")},e.checkColumnIndex=function(t,e,r){if(0>e||e>(r?t.columns:t.columns-1))throw new RangeError(\"Column index out of range\")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError(\"vector size must be the same as the number of columns\");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError(\"vector size must be the same as the number of rows\");return e},e.checkIndices=function(t,e,r){var n=e.some(e=>0>e||e>=t.rows),i=r.some(e=>0>e||e>=t.columns);if(n||i)throw new RangeError(\"Indices are out of range\");if(\"object\"!=typeof e||\"object\"!=typeof r)throw new TypeError(\"Unexpected type for row/column indices\");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(r)||(e=Array.from(r)),{row:e,column:r}},e.checkRange=function(t,e,r,n,i){if(5!==arguments.length)throw new TypeError(\"Invalid argument type\");if(Array.from(arguments).slice(1).some(function(t){return\"number\"!=typeof t}))throw new TypeError(\"Invalid argument type\");if(e>r||n>i||0>e||e>=t.rows||0>r||r>=t.rows||0>n||n>=t.columns||0>i||i>=t.columns)throw new RangeError(\"Submatrix indices are out of range\")},e.getRange=function(t,e){for(var r=Array(e-t+1),n=0;n<r.length;n++)r[n]=t+n;return r},e.sumByRow=function(t){for(var e=i.default.zeros(t.rows,1),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e.set(r,0,e.get(r,0)+t.get(r,n));return e},e.sumByColumn=function(t){for(var e=i.default.zeros(1,t.columns),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e.set(0,n,e.get(0,n)+t.get(r,n));return e},e.sumAll=function(t){for(var e=0,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e+=t.get(r,n);return e};var n=r(4),i=n&&n.__esModule?n:{default:n}},function(t,e,r){\"use strict\";var n=r(5);e.checkRowIndex=function(t,e,r){if(0>e||e>(r?t.rows:t.rows-1))throw new RangeError(\"Row index out of range\")},e.checkColumnIndex=function(t,e,r){if(0>e||e>(r?t.columns:t.columns-1))throw new RangeError(\"Column index out of range\")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError(\"vector size must be the same as the number of columns\");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError(\"vector size must be the same as the number of rows\");return e},e.checkIndices=function(t,e,r){var n=e.some(e=>0>e||e>=t.rows),i=r.some(e=>0>e||e>=t.columns);if(n||i)throw new RangeError(\"Indices are out of range\");if(\"object\"!=typeof e||\"object\"!=typeof r)throw new TypeError(\"Unexpected type for row/column indices\");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(r)||(e=Array.from(r)),{row:e,column:r}},e.checkRange=function(t,e,r,n,i){if(5!==arguments.length)throw new TypeError(\"Invalid argument type\");if(Array.from(arguments).slice(1).some(function(t){return\"number\"!=typeof t}))throw new TypeError(\"Invalid argument type\");if(e>r||n>i||0>e||e>=t.rows||0>r||r>=t.rows||0>n||n>=t.columns||0>i||i>=t.columns)throw new RangeError(\"Submatrix indices are out of range\")},e.getRange=function(t,e){for(var r=Array(e-t+1),n=0;n<r.length;n++)r[n]=t+n;return r},e.sumByRow=function(t){for(var e=n.Matrix.zeros(t.rows,1),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(r,0,e.get(r,0)+t.get(r,i));return e},e.sumByColumn=function(t){for(var e=n.Matrix.zeros(1,t.columns),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(r,i));return e},e.sumAll=function(t){for(var e=0,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e+=t.get(r,n);return e}},function(t,e,r){\"use strict\";var n=r(6);e.checkRowIndex=function(t,e,r){if(0>e||e>(r?t.rows:t.rows-1))throw new RangeError(\"Row index out of range\")},e.checkColumnIndex=function(t,e,r){if(0>e||e>(r?t.columns:t.columns-1))throw new RangeError(\"Column index out of range\")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError(\"vector size must be the same as the number of columns\");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError(\"vector size must be the same as the number of rows\");return e},e.checkIndices=function(t,e,r){var n=e.some(e=>0>e||e>=t.rows),i=r.some(e=>0>e||e>=t.columns);if(n||i)throw new RangeError(\"Indices are out of range\");if(\"object\"!=typeof e||\"object\"!=typeof r)throw new TypeError(\"Unexpected type for row/column indices\");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(r)||(e=Array.from(r)),{row:e,column:r}},e.checkRange=function(t,e,r,n,i){if(5!==arguments.length)throw new TypeError(\"Invalid argument type\");if(Array.from(arguments).slice(1).some(function(t){return\"number\"!=typeof t}))throw new TypeError(\"Invalid argument type\");if(e>r||n>i||0>e||e>=t.rows||0>r||r>=t.rows||0>n||n>=t.columns||0>i||i>=t.columns)throw new RangeError(\"Submatrix indices are out of range\")},e.getRange=function(t,e){for(var r=Array(e-t+1),n=0;n<r.length;n++)r[n]=t+n;return r},e.sumByRow=function(t){for(var e=n.Matrix.zeros(t.rows,1),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(r,0,e.get(r,0)+t.get(r,i));return e},e.sumByColumn=function(t){for(var e=n.Matrix.zeros(1,t.columns),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(r,i));return e},e.sumAll=function(t){for(var e=0,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e+=t.get(r,n);return e}},function(t,e,r){\"use strict\";var n=r(7);e.checkRowIndex=function(t,e,r){if(0>e||e>(r?t.rows:t.rows-1))throw new RangeError(\"Row index out of range\")},e.checkColumnIndex=function(t,e,r){if(0>e||e>(r?t.columns:t.columns-1))throw new RangeError(\"Column index out of range\")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError(\"vector size must be the same as the number of columns\");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError(\"vector size must be the same as the number of rows\");return e},e.checkIndices=function(t,e,r){var n=e.some(e=>0>e||e>=t.rows),i=r.some(e=>0>e||e>=t.columns);if(n||i)throw new RangeError(\"Indices are out of range\");if(\"object\"!=typeof e||\"object\"!=typeof r)throw new TypeError(\"Unexpected type for row/column indices\");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(r)||(e=Array.from(r)),{row:e,column:r}},e.checkRange=function(t,e,r,n,i){if(5!==arguments.length)throw new TypeError(\"Invalid argument type\");if(Array.from(arguments).slice(1).some(function(t){return\"number\"!=typeof t}))throw new TypeError(\"Invalid argument type\");if(e>r||n>i||0>e||e>=t.rows||0>r||r>=t.rows||0>n||n>=t.columns||0>i||i>=t.columns)throw new RangeError(\"Submatrix indices are out of range\")},e.getRange=function(t,e){for(var r=Array(e-t+1),n=0;n<r.length;n++)r[n]=t+n;return r},e.sumByRow=function(t){for(var e=n.Matrix.zeros(t.rows,1),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(r,0,e.get(r,0)+t.get(r,i));return e},e.sumByColumn=function(t){for(var e=n.Matrix.zeros(1,t.columns),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(r,i));return e},e.sumAll=function(t){for(var e=0,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e+=t.get(r,n);return e}},function(t,e,r){\"use strict\";var n=r(8);e.checkRowIndex=function(t,e,r){if(0>e||e>(r?t.rows:t.rows-1))throw new RangeError(\"Row index out of range\")},e.checkColumnIndex=function(t,e,r){if(0>e||e>(r?t.columns:t.columns-1))throw new RangeError(\"Column index out of range\")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError(\"vector size must be the same as the number of columns\");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError(\"vector size must be the same as the number of rows\");return e},e.checkIndices=function(t,e,r){var n=e.some(e=>0>e||e>=t.rows),i=r.some(e=>0>e||e>=t.columns);if(n||i)throw new RangeError(\"Indices are out of range\");if(\"object\"!=typeof e||\"object\"!=typeof r)throw new TypeError(\"Unexpected type for row/column indices\");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(r)||(e=Array.from(r)),{row:e,column:r}},e.checkRange=function(t,e,r,n,i){if(5!==arguments.length)throw new TypeError(\"Invalid argument type\");if(Array.from(arguments).slice(1).some(function(t){return\"number\"!=typeof t}))throw new TypeError(\"Invalid argument type\");if(e>r||n>i||0>e||e>=t.rows||0>r||r>=t.rows||0>n||n>=t.columns||0>i||i>=t.columns)throw new RangeError(\"Submatrix indices are out of range\")},e.getRange=function(t,e){for(var r=Array(e-t+1),n=0;n<r.length;n++)r[n]=t+n;return r},e.sumByRow=function(t){for(var e=n.Matrix.zeros(t.rows,1),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(r,0,e.get(r,0)+t.get(r,i));return e},e.sumByColumn=function(t){for(var e=n.Matrix.zeros(1,t.columns),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(r,i));return e},e.sumAll=function(t){for(var e=0,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e+=t.get(r,n);return e}},function(t,e,r){\"use strict\";var n=r(9);e.checkRowIndex=function(t,e,r){if(0>e||e>(r?t.rows:t.rows-1))throw new RangeError(\"Row index out of range\")},e.checkColumnIndex=function(t,e,r){if(0>e||e>(r?t.columns:t.columns-1))throw new RangeError(\"Column index out of range\")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError(\"vector size must be the same as the number of columns\");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError(\"vector size must be the same as the number of rows\");return e},e.checkIndices=function(t,e,r){var n=e.some(e=>0>e||e>=t.rows),i=r.some(e=>0>e||e>=t.columns);if(n||i)throw new RangeError(\"Indices are out of range\");if(\"object\"!=typeof e||\"object\"!=typeof r)throw new TypeError(\"Unexpected type for row/column indices\");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(r)||(e=Array.from(r)),{row:e,column:r}},e.checkRange=function(t,e,r,n,i){if(5!==arguments.length)throw new TypeError(\"Invalid argument type\");if(Array.from(arguments).slice(1).some(function(t){return\"number\"!=typeof t}))throw new TypeError(\"Invalid argument type\");if(e>r||n>i||0>e||e>=t.rows||0>r||r>=t.rows||0>n||n>=t.columns||0>i||i>=t.columns)throw new RangeError(\"Submatrix indices are out of range\")},e.getRange=function(t,e){for(var r=Array(e-t+1),n=0;n<r.length;n++)r[n]=t+n;return r},e.sumByRow=function(t){for(var e=n.Matrix.zeros(t.rows,1),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(r,0,e.get(r,0)+t.get(r,i));return e},e.sumByColumn=function(t){for(var e=n.Matrix.zeros(1,t.columns),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(r,i));return e},e.sumAll=function(t){for(var e=0,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e+=t.get(r,n);return e}},function(t,e,r){\"use strict\";var n=r(10);e.checkRowIndex=function(t,e,r){if(0>e||e>(r?t.rows:t.rows-1))throw new RangeError(\"Row index out of range\")},e.checkColumnIndex=function(t,e,r){if(0>e||e>(r?t.columns:t.columns-1))throw new RangeError(\"Column index out of range\")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError(\"vector size must be the same as the number of columns\");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError(\"vector size must be the same as the number of rows\");return e},e.checkIndices=function(t,e,r){var n=e.some(e=>0>e||e>=t.rows),i=r.some(e=>0>e||e>=t.columns);if(n||i)throw new RangeError(\"Indices are out of range\");if(\"object\"!=typeof e||\"object\"!=typeof r)throw new TypeError(\"Unexpected type for row/column indices\");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(r)||(e=Array.from(r)),{row:e,column:r}},e.checkRange=function(t,e,r,n,i){if(5!==arguments.length)throw new TypeError(\"Invalid argument type\");if(Array.from(arguments).slice(1).some(function(t){return\"number\"!=typeof t}))throw new TypeError(\"Invalid argument type\");if(e>r||n>i||0>e||e>=t.rows||0>r||r>=t.rows||0>n||n>=t.columns||0>i||i>=t.columns)throw new RangeError(\"Submatrix indices are out of range\")},e.getRange=function(t,e){for(var r=Array(e-t+1),n=0;n<r.length;n++)r[n]=t+n;return r},e.sumByRow=function(t){for(var e=n.Matrix.zeros(t.rows,1),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(r,0,e.get(r,0)+t.get(r,i));return e},e.sumByColumn=function(t){for(var e=n.Matrix.zeros(1,t.columns),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(r,i));return e},e.sumAll=function(t){for(var e=0,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e+=t.get(r,n);return e}},function(t,e,r){\"use strict\";var n=r(11);e.checkRowIndex=function(t,e,r){if(0>e||e>(r?t.rows:t.rows-1))throw new RangeError(\"Row index out of range\")},e.checkColumnIndex=function(t,e,r){if(0>e||e>(r?t.columns:t.columns-1))throw new RangeError(\"Column index out of range\")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError(\"vector size must be the same as the number of columns\");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError(\"vector size must be the same as the number of rows\");return e},e.checkIndices=function(t,e,r){var n=e.some(e=>0>e||e>=t.rows),i=r.some(e=>0>e||e>=t.columns);if(n||i)throw new RangeError(\"Indices are out of range\");if(\"object\"!=typeof e||\"object\"!=typeof r)throw new TypeError(\"Unexpected type for row/column indices\");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(r)||(e=Array.from(r)),{row:e,column:r}},e.checkRange=function(t,e,r,n,i){if(5!==arguments.length)throw new TypeError(\"Invalid argument type\");if(Array.from(arguments).slice(1).some(function(t){return\"number\"!=typeof t}))throw new TypeError(\"Invalid argument type\");if(e>r||n>i||0>e||e>=t.rows||0>r||r>=t.rows||0>n||n>=t.columns||0>i||i>=t.columns)throw new RangeError(\"Submatrix indices are out of range\")},e.getRange=function(t,e){for(var r=Array(e-t+1),n=0;n<r.length;n++)r[n]=t+n;return r},e.sumByRow=function(t){for(var e=n.Matrix.zeros(t.rows,1),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(r,0,e.get(r,0)+t.get(r,i));return e},e.sumByColumn=function(t){for(var e=n.Matrix.zeros(1,t.columns),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(r,i));return e},e.sumAll=function(t){for(var e=0,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e+=t.get(r,n);return e}},function(t,e,r){\"use strict\";var n=r(12);e.checkRowIndex=function(t,e,r){if(0>e||e>(r?t.rows:t.rows-1))throw new RangeError(\"Row index out of range\")},e.checkColumnIndex=function(t,e,r){if(0>e||e>(r?t.columns:t.columns-1))throw new RangeError(\"Column index out of range\")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError(\"vector size must be the same as the number of columns\");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError(\"vector size must be the same as the number of rows\");return e},e.checkIndices=function(t,e,r){var n=e.some(e=>0>e||e>=t.rows),i=r.some(e=>0>e||e>=t.columns);if(n||i)throw new RangeError(\"Indices are out of range\");if(\"object\"!=typeof e||\"object\"!=typeof r)throw new TypeError(\"Unexpected type for row/column indices\");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(r)||(e=Array.from(r)),{row:e,column:r}},e.checkRange=function(t,e,r,n,i){if(5!==arguments.length)throw new TypeError(\"Invalid argument type\");if(Array.from(arguments).slice(1).some(function(t){return\"number\"!=typeof t}))throw new TypeError(\"Invalid argument type\");if(e>r||n>i||0>e||e>=t.rows||0>r||r>=t.rows||0>n||n>=t.columns||0>i||i>=t.columns)throw new RangeError(\"Submatrix indices are out of range\")},e.getRange=function(t,e){for(var r=Array(e-t+1),n=0;n<r.length;n++)r[n]=t+n;return r},e.sumByRow=function(t){for(var e=n.Matrix.zeros(t.rows,1),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(r,0,e.get(r,0)+t.get(r,i));return e},e.sumByColumn=function(t){for(var e=n.Matrix.zeros(1,t.columns),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(r,i));return e},e.sumAll=function(t){for(var e=0,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e+=t.get(r,n);return e}},function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){function e(t,e){return t-e}function r(t,e){for(var r in e)t=t.replace(new RegExp(\"%\"+r+\"%\",\"g\"),e[r]);return t}void 0===t&&(t=Object);class n extends t{static get[Symbol.species](){return this}static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError(\"Data length does not match given dimensions\");for(var n=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r[i*e+o]);return n}static rowVector(t){for(var e=new this(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){for(var e=new this(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,r){void 0===r&&(r=Math.random);for(var n=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r());return n}static randInt(t,e,r,n){void 0===r&&(r=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var s,a=0;a<e;a++)s=g(n()*r),i.set(o,a,s);return i}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);for(var n=v(t,e),i=this.zeros(t,e),o=0;o<n;o++)i.set(o,o,r);return i}static diag(t,e,r){var n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);for(var i=v(n,e,r),o=this.zeros(e,r),s=0;s<i;s++)o.set(s,s,t[s]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,v(t.get(o,s),e.get(o,s)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,M(t.get(o,s),e.get(o,s)));return i}static checkMatrix(t){return n.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&\"Matrix\"===t.klass}get size(){return this.rows*this.columns}apply(t){if(\"function\"!=typeof t)throw new TypeError(\"callback must be a function\");for(var e=this.rows,r=this.columns,n=0;n<e;n++)for(var i=0;i<r;i++)t.call(this,n,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t[e*this.columns+r]=this.get(e,r);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var r=0;r<this.columns;r++)t[e][r]=this.get(e,r)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error(\"set method is unimplemented\")}get(){throw new Error(\"get method is unimplemented\")}repeat(t,e){t=t||1,e=e||1;for(var r=new this.constructor[Symbol.species](this.rows*t,this.columns*e),n=0;n<t;n++)for(var i=0;i<e;i++)r.setSubMatrix(this,this.rows*n,this.columns*i);return r}fill(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){c.checkRowIndex(this,t);for(var e=Array(this.columns),r=0;r<this.columns;r++)e[r]=this.get(t,r);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){c.checkRowIndex(this,t),e=c.checkRowVector(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){c.checkRowIndex(this,t),c.checkRowIndex(this,e);for(var r,n=0;n<this.columns;n++)r=this.get(t,n),this.set(t,n,this.get(e,n)),this.set(e,n,r);return this}getColumn(t){c.checkColumnIndex(this,t);for(var e=Array(this.rows),r=0;r<this.rows;r++)e[r]=this.get(r,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){c.checkColumnIndex(this,t),e=c.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){c.checkColumnIndex(this,t),c.checkColumnIndex(this,e);for(var r,n=0;n<this.rows;n++)r=this.get(n,t),this.set(n,t,this.get(n,e)),this.set(n,e,r);return this}addRowVector(t){t=c.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=c.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=c.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=c.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=c.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=c.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=c.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=c.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){c.checkRowIndex(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){c.checkColumnIndex(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){c.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){c.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){c.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){c.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){c.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){c.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){c.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){c.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){for(var t=v(this.rows,this.columns),e=Array(t),r=0;r<t;r++)e[r]=this.get(r,r);return e}sum(t){return\"row\"===t?c.sumByRow(this):\"column\"===t?c.sumByColumn(this):c.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t*=this.get(e,r);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){n.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError(\"vectors do not have the same size\");for(var r=0,i=0;i<e.length;i++)r+=e[i]*t[i];return r}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn(\"Number of columns of left matrix are not equal to number of rows of right matrix.\");for(var e=this.rows,r=this.columns,n=t.columns,i=new this.constructor[Symbol.species](e,n),o=Array(r),s=0;s<n;s++){for(var a=0;a<r;a++)o[a]=t.get(a,s);for(var u,c=0;c<e;c++){for(u=0,a=0;a<r;a++)u+=this.get(c,a)*o[a];i.set(c,s,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(r+u)*(n+c),h=(s+u)*n,f=r*(o-c),d=u*(a-n),p=(r+i)*c;return e.set(0,0,l+d-p+(i-u)*(a+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(s-r)*(n+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(r-o)*(-f+m),b=(-r+o+s)*(h-f+m),_=(o+s)*(-h+f),M=r*h,S=(-r+u+c)*(h-d+g),E=(-r+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),R=(i-l)*(m-y),k=i*v,C=(c+l)*(-v+y),L=(-i+s+a)*(g+v-w),P=(i-a)*(g-w),D=(s+a)*(-v+w);return e.set(0,0,M+k+n*p),e.set(0,1,(r+n+i-o-s-c-l)*m+b+_+M+A+k+C),e.set(0,2,M+S+T+(r+n+i-s-a-u-c)*g+k+L+D),e.set(1,0,x+s*(-h+f+p-m-g-v+w)+b+M+k+L+P),e.set(1,1,x+b+_+M+a*y),e.set(1,2,k+L+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+R+k),e.set(2,1,A+R+k+C+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,r){return t.rows===e&&t.columns===r?t:n.zeros(e,r).setSubMatrix(t,0,0)}var r=this.clone(),i=r.rows,o=r.columns,s=t.rows,a=t.columns;o!==s&&console.warn(`Multiplying ${i} x ${o} and ${s} x ${a} matrix: dimensions do not match.`);var u=M(i,s),c=M(o,a);return function t(r,i,o,s){if(512>=o||512>=s)return r.mmul(i);1==o%2&&1==s%2?(r=e(r,o+1,s+1),i=e(i,o+1,s+1)):1==o%2?(r=e(r,o+1,s),i=e(i,o+1,s)):1==s%2&&(r=e(r,o,s+1),i=e(i,o,s+1));var a=parseInt(r.rows/2),u=parseInt(r.columns/2),c=r.subMatrix(0,a-1,0,u-1),l=i.subMatrix(0,a-1,0,u-1),h=r.subMatrix(0,a-1,u,r.columns-1),f=i.subMatrix(0,a-1,u,i.columns-1),d=r.subMatrix(a,r.rows-1,0,u-1),p=i.subMatrix(a,i.rows-1,0,u-1),m=r.subMatrix(a,r.rows-1,u,r.columns-1),g=i.subMatrix(a,i.rows-1,u,i.columns-1),v=t(n.add(c,m),n.add(l,g),a,u),y=t(n.add(d,m),l,a,u),w=t(c,n.sub(f,g),a,u),x=t(m,n.sub(p,l),a,u),b=t(n.add(c,h),g,a,u),_=t(n.sub(d,c),n.add(l,f),a,u),M=t(n.sub(h,m),n.add(p,g),a,u),S=n.add(v,x);S.sub(b),S.add(M);var E=n.add(w,b),T=n.add(y,x),A=n.sub(v,y);A.add(w),A.add(_);var R=n.zeros(2*S.rows,2*S.columns);return(R=(R=(R=(R=R.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,o-1,0,s-1)}(r=e(r,u,c),t=e(t,u,c),u,c)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)r=(0,s.scale)(this.getRow(i),{min:t,max:e}),n.setRow(i,r);return n}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)r=(0,s.scale)(this.getColumn(i),{min:t,max:e}),n.setColumn(i,r);return n}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*n,r*i),s=0;s<e;s++)for(var a=0;a<r;a++)for(var u=0;u<n;u++)for(var c=0;c<i;c++)o[n*s+u][i*a+c]=this.get(s,a)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t){void 0===t&&(t=e);for(var r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(t));return this}sortColumns(t){void 0===t&&(t=e);for(var r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(t));return this}subMatrix(t,e,r,n){c.checkRange(this,t,e,r,n);for(var i=new this.constructor[Symbol.species](e-t+1,n-r+1),o=t;o<=e;o++)for(var s=r;s<=n;s++)i[o-t][s-r]=this.get(o,s);return i}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||0>e||e>=this.columns||0>r||r>=this.columns)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](t.length,r-e+1),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError(\"Row index out of range: \"+t[i]);n.set(i,o-e,this.get(t[i],o))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||0>e||e>=this.rows||0>r||r>=this.rows)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](r-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError(\"Column index out of range: \"+t[i]);n.set(o-e,i,this.get(o,t[i]))}return n}setSubMatrix(t,e,r){t=this.constructor.checkMatrix(t),c.checkRange(this,e,e+t.rows-1,r,r+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[e+n][r+i]=t.get(n,i);return this}selection(t,e){for(var r,n=c.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<n.row.length;o++){r=n.row[o];for(var s=0;s<n.column.length;s++)i[o][s]=this.get(r,n.column[s])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}transposeView(){return new l.default(this)}rowView(t){return c.checkRowIndex(this,t),new h.default(this,t)}columnView(t){return c.checkColumnIndex(this,t),new p.default(this,t)}flipRowView(){return new m.default(this)}flipColumnView(){return new y.default(this)}subMatrixView(t,e,r,n){return new f.default(this,t,e,r,n)}selectionView(t,e){return new d.default(this,t,e)}det(){var t,e,r,n,o,s;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),r=this.get(1,0),t*this.get(1,1)-e*r):3===this.columns?(n=this.selectionView([1,2],[1,2]),o=this.selectionView([1,2],[0,2]),s=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),r=this.get(0,2),t*n.det()-e*o.det()+r*s.det()):new i.default(this).determinant;throw Error(\"Determinant can only be calculated for a square matrix.\")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new o.default(this,{autoTranspose:!0}),r=e.leftSingularVectors,n=e.rightSingularVectors,i=e.diagonal,s=0;s<i.length;s++)i[s]=u(i[s])>t?1/i[s]:0;return i=this.constructor[Symbol.species].diag(i),n.mmul(i.mmul(r.transposeView()))}}n.prototype.klass=\"Matrix\",n.random=n.rand,n.diagonal=n.diag,n.prototype.diagonal=n.prototype.diag,n.identity=n.eye,n.prototype.negate=n.prototype.neg,n.prototype.tensorProduct=n.prototype.kroneckerProduct,n.prototype.determinant=n.prototype.det;var w,x,b=\"\\n(function %name%(matrix, %args%) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(%args%);\\n})\\n\",_=eval,S=!0,E=!1;try{for(var T,A=[[\"+\",\"add\"],[\"-\",\"sub\",\"subtract\"],[\"*\",\"mul\",\"multiply\"],[\"/\",\"div\",\"divide\"],[\"%\",\"mod\",\"modulus\"],[\"&\",\"and\"],[\"|\",\"or\"],[\"^\",\"xor\"],[\"<<\",\"leftShift\"],[\">>\",\"signPropagatingRightShift\"],[\">>>\",\"rightShift\",\"zeroFillRightShift\"]][Symbol.iterator]();!(S=(T=A.next()).done);S=!0){var R=T.value,k=_(r(\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",{name:R[1],op:R[0]})),C=_(r(\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% value);\\n        }\\n    }\\n    return this;\\n})\\n\",{name:R[1]+\"S\",op:R[0]})),L=_(r(\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    if (this.rows !== matrix.rows ||\\n        this.columns !== matrix.columns) {\\n        throw new RangeError('Matrices dimensions must be equal');\\n    }\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\\n        }\\n    }\\n    return this;\\n})\\n\",{name:R[1]+\"M\",op:R[0]})),P=_(r(\"\\n(function %name%(matrix, value) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(value);\\n})\\n\",{name:R[1]}));for(w=1;w<R.length;w++)n.prototype[R[w]]=k,n.prototype[R[w]+\"S\"]=C,n.prototype[R[w]+\"M\"]=L,n[R[w]]=P}}catch(t){E=!0,x=t}finally{try{!S&&A.return&&A.return()}finally{if(E)throw x}}var D=[[\"~\",\"not\"]];[\"abs\",\"acos\",\"acosh\",\"asin\",\"asinh\",\"atan\",\"atanh\",\"cbrt\",\"ceil\",\"clz32\",\"cos\",\"cosh\",\"exp\",\"expm1\",\"floor\",\"fround\",\"log\",\"log1p\",\"log10\",\"log2\",\"round\",\"sign\",\"sin\",\"sinh\",\"sqrt\",\"tan\",\"tanh\",\"trunc\"].forEach(function(t){D.push([\"Math.\"+t,t])});var O,N=!0,I=!1;try{for(var F,z=D[Symbol.iterator]();!(N=(F=z.next()).done);N=!0){var U=F.value,j=_(r(\"\\n(function %name%() {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",{name:U[1],method:U[0]})),V=_(r(\"\\n(function %name%(matrix) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%();\\n})\\n\",{name:U[1]}));for(w=1;w<U.length;w++)n.prototype[U[w]]=j,n[U[w]]=V}}catch(t){I=!0,O=t}finally{try{!N&&z.return&&z.return()}finally{if(I)throw O}}var B,H=!0,G=!1;try{for(var W,q=[[\"Math.pow\",1,\"pow\"]][Symbol.iterator]();!(H=(W=q.next()).done);H=!0){var Y=W.value,X=\"arg0\";for(w=1;w<Y[1];w++)X+=`, arg${w}`;if(1!==Y[1]){var $=_(r(\"\\n(function %name%(%args%) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), %args%));\\n        }\\n    }\\n    return this;\\n})\\n\",{name:Y[2],method:Y[0],args:X})),J=_(r(b,{name:Y[2],args:X}));for(w=2;w<Y.length;w++)n.prototype[Y[w]]=$,n[Y[w]]=J}else{var Z={name:Y[2],args:X,method:Y[0]},Q=_(r(\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",Z)),K=_(r(\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), value));\\n        }\\n    }\\n    return this;\\n})\\n\",Z)),tt=_(r(\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    if (this.rows !== matrix.rows ||\\n        this.columns !== matrix.columns) {\\n        throw new RangeError('Matrices dimensions must be equal');\\n    }\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",Z)),et=_(r(b,Z));for(w=2;w<Y.length;w++)n.prototype[Y[w]]=Q,n.prototype[Y[w]+\"M\"]=tt,n.prototype[Y[w]+\"S\"]=K,n[Y[w]]=et}}}catch(t){G=!0,B=t}finally{try{!H&&q.return&&q.return()}finally{if(G)throw B}}return n};var i=n(r(33)),o=n(r(51)),s=r(1),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(23)),l=n(r(109)),h=n(r(110)),f=n(r(111)),d=n(r(112)),p=n(r(113)),m=n(r(114)),y=n(r(115))},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,i,s,a,c,l,h,f,d,p=(t=o.default.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),r=0;r<g;r++){for(e=0;e<m;e++)f[e]=p[e][r];for(e=0;e<m;e++){for(h=p[e],d=v(e,r),a=0,i=0;i<d;i++)a+=h[i]*f[i];h[r]=f[e]-=a}for(s=r,e=r+1;e<m;e++)u(f[e])>u(f[s])&&(s=e);if(s!==r){for(i=0;i<g;i++)c=p[s][i],p[s][i]=p[r][i],p[r][i]=c;l=y[s],y[s]=y[r],y[r]=l,w=-w}if(r<m&&0!==p[r][r])for(e=r+1;e<m;e++)p[e][r]/=p[r][r]}this.LU=p,this.pivotVector=y,this.pivotSign=w}Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(4),o=i&&i.__esModule?i:{default:i};n.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,r=0;r<e;r++)if(0===t[r][r])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error(\"Matrix must be square\");for(var e=this.pivotSign,r=t.columns,n=0;n<r;n++)e*=t[n][n];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new o.default(e,r),i=0;i<e;i++)for(var s=0;s<r;s++)n[i][s]=i>s?t[i][s]:i===s?1:0;return n},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new o.default(e,r),i=0;i<e;i++)for(var s=0;s<r;s++)n[i][s]=i<=s?t[i][s]:0;return n},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=o.default.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error(\"Invalid matrix dimensions\");if(this.isSingular())throw new Error(\"LU matrix is singular\");var r,n,i,s=t.columns,a=t.subMatrixRow(this.pivotVector,0,s-1),u=e.columns;for(i=0;i<u;i++)for(r=i+1;r<u;r++)for(n=0;n<s;n++)a[r][n]-=a[i][n]*e[r][i];for(i=u-1;0<=i;i--){for(n=0;n<s;n++)a[i][n]/=e[i][i];for(r=0;r<i;r++)for(n=0;n<s;n++)a[r][n]-=a[i][n]*e[r][i]}return a}},e.default=n},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.hypotenuse=function(t,e){var r;return u(t)>u(e)?(r=e/t,u(t)*R(1+r*r)):0===e?0:(r=t/e,u(e)*R(1+r*r))},e.getEmpty2DArray=function(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=Array(e);return r},e.getFilled2DArray=function(t,e,r){for(var n=Array(t),i=0;i<t;i++){n[i]=Array(e);for(var o=0;o<e;o++)n[i][o]=r}return n}},function(t){\"use strict\";var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=function(t){return\"function\"==typeof Array.isArray?Array.isArray(t):\"[object Array]\"===r.call(t)},i=function(t){if(!t||\"[object Object]\"!==r.call(t))return!1;var n=e.call(t,\"constructor\"),i=t.constructor&&t.constructor.prototype&&e.call(t.constructor.prototype,\"isPrototypeOf\");if(t.constructor&&!n&&!i)return!1;for(var o in t);return void 0===o||e.call(t,o)};t.exports=function t(){var e,r,o,s,a,u,c=arguments[0],l=1,h=arguments.length,f=!1;for(\"boolean\"==typeof c&&(f=c,c=arguments[1]||{},l=2),(null==c||\"object\"!=typeof c&&\"function\"!=typeof c)&&(c={});l<h;++l)if(null!=(e=arguments[l]))for(r in e)o=c[r],c!==(s=e[r])&&(f&&s&&(i(s)||(a=n(s)))?(a?(a=!1,u=o&&n(o)?o:[]):u=o&&i(o)?o:{},c[r]=t(f,u,s)):void 0!==s&&(c[r]=s));return c}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(3),i=n&&n.__esModule?n:{default:n};class o extends i.default{constructor(t,e){super(),!0===t?(this.slope=e.slope,this.intercept=e.intercept,this.coefficients=[e.intercept,e.slope]):((0,n.checkArrayLength)(t,e),function(t,e,r){for(var n=e.length,i=0,o=0,s=0,a=0,u=0;u<n;u++)i+=e[u],o+=r[u],s+=e[u]*e[u],a+=e[u]*r[u];t.slope=(n*a-i*o)/(n*s-i*i),t.intercept=1/n*o-t.slope*(1/n)*i,t.coefficients=[t.intercept,t.slope]}(this,t,e))}toJSON(){return{name:\"simpleLinearRegression\",slope:this.slope,intercept:this.intercept}}_predict(t){return this.slope*t+this.intercept}computeX(t){return(t-this.intercept)/this.slope}toString(t){var e=\"f(x) = \";if(0!==this.slope){var r=(0,n.maybeToPrecision)(this.slope,t);if(e+=(\"1\"===r?\"\":r+\" * \")+\"x\",this.intercept){var i=u(this.intercept);e+=` ${i===this.intercept?\"+\":\"-\"} ${(0,n.maybeToPrecision)(i,t)}`}}else e+=(0,n.maybeToPrecision)(this.intercept,t);return e}toLaTeX(t){return this.toString(t)}static load(t){if(\"simpleLinearRegression\"!==t.name)throw new TypeError(\"not a SLR model\");return new o(!0,t)}}e.default=o},function(t,e,r){\"use strict\";var n=r(13).Matrix,i=r(131),o=r(132),s=r(133),a=r(134),u=r(135),c=r(136),l=r(137),h=r(138),f=r(139),d=r(140),p={gaussian:i,rbf:i,polynomial:o,poly:o,anova:s,cauchy:a,exponential:u,histogram:c,min:c,laplacian:l,multiquadratic:h,rational:f,sigmoid:d,mlp:d};t.exports=class{constructor(t,e){if(this.kernelType=t,\"linear\"!==t)if(\"string\"==typeof t){t=t.toLowerCase();var r=p[t];if(!r)throw new Error(\"unsupported kernel type: \"+t);this.kernelFunction=new r(e)}else{if(\"object\"!=typeof t||\"function\"!=typeof t.compute)throw new TypeError(\"first argument must be a valid kernel type or instance\");this.kernelFunction=t}}compute(t,e){if(void 0===e&&(e=t),\"linear\"===this.kernelType)return new n(t).mmul(new n(e).transposeView());var r,i,o=new n(t.length,e.length);if(t===e)for(r=0;r<t.length;r++)for(i=r;i<t.length;i++)o[r][i]=o[i][r]=this.kernelFunction.compute(t[r],t[i]);else for(r=0;r<t.length;r++)for(i=0;i<e.length;i++)o[r][i]=this.kernelFunction.compute(t[r],e[i]);return o}}},function(t,e){\"use strict\";e.hypotenuse=function(t,e){var r;return u(t)>u(e)?(r=e/t,u(t)*R(1+r*r)):0===e?0:(r=t/e,u(e)*R(1+r*r))},e.getEmpty2DArray=function(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=Array(e);return r},e.getFilled2DArray=function(t,e,r){for(var n=Array(t),i=0;i<t;i++){n[i]=Array(e);for(var o=0;o<e;o++)n[i][o]=r}return n}},function(t,e){\"use strict\";e.hypotenuse=function(t,e){var r;return u(t)>u(e)?(r=e/t,u(t)*R(1+r*r)):0===e?0:(r=t/e,u(e)*R(1+r*r))},e.getEmpty2DArray=function(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=Array(e);return r},e.getFilled2DArray=function(t,e,r){for(var n=Array(t),i=0;i<t;i++){n[i]=Array(e);for(var o=0;o<e;o++)n[i][o]=r}return n}},function(t,e,r){\"use strict\";t.exports=r(7).Matrix,t.exports.Decompositions=t.exports.DC=r(236)},function(t,e){\"use strict\";e.hypotenuse=function(t,e){var r;return u(t)>u(e)?(r=e/t,u(t)*R(1+r*r)):0===e?0:(r=t/e,u(e)*R(1+r*r))},e.getEmpty2DArray=function(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=Array(e);return r},e.getFilled2DArray=function(t,e,r){for(var n=Array(t),i=0;i<t;i++){n[i]=Array(e);for(var o=0;o<e;o++)n[i][o]=r}return n}},function(t,e){\"use strict\";e.hypotenuse=function(t,e){var r;return u(t)>u(e)?(r=e/t,u(t)*R(1+r*r)):0===e?0:(r=t/e,u(e)*R(1+r*r))},e.getEmpty2DArray=function(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=Array(e);return r},e.getFilled2DArray=function(t,e,r){for(var n=Array(t),i=0;i<t;i++){n[i]=Array(e);for(var o=0;o<e;o++)n[i][o]=r}return n}},function(t,e){\"use strict\";e.hypotenuse=function(t,e){var r;return u(t)>u(e)?(r=e/t,u(t)*R(1+r*r)):0===e?0:(r=t/e,u(e)*R(1+r*r))},e.getEmpty2DArray=function(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=Array(e);return r},e.getFilled2DArray=function(t,e,r){for(var n=Array(t),i=0;i<t;i++){n[i]=Array(e);for(var o=0;o<e;o++)n[i][o]=r}return n}},function(t,e){\"use strict\";e.hypotenuse=function(t,e){var r;return u(t)>u(e)?(r=e/t,u(t)*R(1+r*r)):0===e?0:(r=t/e,u(e)*R(1+r*r))},e.getEmpty2DArray=function(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=Array(e);return r},e.getFilled2DArray=function(t,e,r){for(var n=Array(t),i=0;i<t;i++){n[i]=Array(e);for(var o=0;o<e;o++)n[i][o]=r}return n}},function(t,e,r){\"use strict\";t.exports=r(11).Matrix,t.exports.Decompositions=t.exports.DC=r(299)},function(t,e){\"use strict\";e.hypotenuse=function(t,e){var r;return u(t)>u(e)?(r=e/t,u(t)*R(1+r*r)):0===e?0:(r=t/e,u(e)*R(1+r*r))},e.getEmpty2DArray=function(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=Array(e);return r},e.getFilled2DArray=function(t,e,r){for(var n=Array(t),i=0;i<t;i++){n[i]=Array(e);for(var o=0;o<e;o++)n[i][o]=r}return n}},function(t,e,r){\"use strict\";function n(t,e){return this[t][e]*=this[t][e],this}var i=r(45),o=r(2);t.exports={norm:function(t){return R(t.clone().apply(n).sum())},pow2array:n,featureNormalize:function(t){var e=o.matrix.mean(t),r=o.matrix.standardDeviation(t,e,!0);return{result:i.checkMatrix(t).subRowVector(e).divRowVector(r),means:e,std:r}}}},function(t,e,r){\"use strict\";function n(){this.children=[],this.distance=-1,this.index=[]}var i=r(311);n.prototype.cut=function(t){if(0>t)throw new RangeError(\"Threshold too small\");var e=new n;e.children=this.children,e.distance=this.distance,e.index=this.index;for(var r=[e],i=[];0<r.length;){var o=r.shift();t>=o.distance?i.push(o):r=r.concat(o.children)}return i},n.prototype.group=function(t){if(!m(t)||1>t)throw new RangeError(\"Number of groups must be a positive integer\");var e=new i(function(t,e){return e.distance-t.distance});for(e.push(this);e.size()<t;){var r=e.pop();if(0===r.children.length)break;r.children.forEach(t=>e.push(t))}var o=new n;return o.children=e.toArray(),o.distance=this.distance,o},n.prototype.traverse=function(t){!function t(e,r){if(r(e),e.children)for(var n=e.children.length-1;0<=n;n--)t(e.children[n],r)}(this,t)},t.exports=n},function(t,e,r){\"use strict\";t.exports=r(12).Matrix,t.exports.Decompositions=t.exports.DC=r(330)},function(t,e){\"use strict\";e.hypotenuse=function(t,e){var r;return u(t)>u(e)?(r=e/t,u(t)*R(1+r*r)):0===e?0:(r=t/e,u(e)*R(1+r*r))},e.getEmpty2DArray=function(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=Array(e);return r},e.getFilled2DArray=function(t,e,r){for(var n=Array(t),i=0;i<t;i++){n[i]=Array(e);for(var o=0;o<e;o++)n[i][o]=r}return n}},function(t,e,r){\"use strict\";function n(t,e){if(!(this instanceof n))return new n(t,e);t=o.default.checkMatrix(t),e=e||{};var r=t.rows,i=t.columns,a=v(r,i),c=!0,l=!0;!1===e.computeLeftSingularVectors&&(c=!1),!1===e.computeRightSingularVectors&&(l=!1);var h,f=!1;if(r<i)if(!0===e.autoTranspose){r=(h=t.transpose()).rows,i=h.columns,f=!0;var d=c;c=l,l=d}else h=t.clone(),console.warn(\"Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose\");else h=t.clone();var p,m,g,y,w,x,b,_,S,E,T,A,k,C,L,P,D,O,N,I,F,z=Array(v(r+1,i)),U=(0,s.getFilled2DArray)(r,a,0),j=(0,s.getFilled2DArray)(i,i,0),V=Array(i),B=Array(r),H=v(r-1,i),G=M(0,v(i-2,r));for(g=0,E=M(H,G);g<E;g++){if(g<H){for(z[g]=0,p=g;p<r;p++)z[g]=(0,s.hypotenuse)(z[g],h[p][g]);if(0!==z[g]){for(0>h[g][g]&&(z[g]=-z[g]),p=g;p<r;p++)h[p][g]/=z[g];h[g][g]+=1}z[g]=-z[g]}for(m=g+1;m<i;m++){if(g<H&&0!==z[g]){for(w=0,p=g;p<r;p++)w+=h[p][g]*h[p][m];for(w=-w/h[g][g],p=g;p<r;p++)h[p][m]+=w*h[p][g]}V[m]=h[g][m]}if(c&&g<H)for(p=g;p<r;p++)U[p][g]=h[p][g];if(g<G){for(V[g]=0,p=g+1;p<i;p++)V[g]=(0,s.hypotenuse)(V[g],V[p]);if(0!==V[g]){for(0>V[g+1]&&(V[g]=0-V[g]),p=g+1;p<i;p++)V[p]/=V[g];V[g+1]+=1}if(V[g]=-V[g],g+1<r&&0!==V[g]){for(p=g+1;p<r;p++)B[p]=0;for(m=g+1;m<i;m++)for(p=g+1;p<r;p++)B[p]+=V[m]*h[p][m];for(m=g+1;m<i;m++)for(w=-V[m]/V[g+1],p=g+1;p<r;p++)h[p][m]+=w*B[p]}if(l)for(p=g+1;p<i;p++)j[p][g]=V[p]}}if(y=v(i,r+1),H<i&&(z[H]=h[H][H]),r<y&&(z[y-1]=0),G+1<y&&(V[G]=h[G][y-1]),V[y-1]=0,c){for(m=H;m<a;m++){for(p=0;p<r;p++)U[p][m]=0;U[m][m]=1}for(g=H-1;0<=g;g--)if(0!==z[g]){for(m=g+1;m<a;m++){for(w=0,p=g;p<r;p++)w+=U[p][g]*U[p][m];for(w=-w/U[g][g],p=g;p<r;p++)U[p][m]+=w*U[p][g]}for(p=g;p<r;p++)U[p][g]=-U[p][g];for(U[g][g]=1+U[g][g],p=0;p<g-1;p++)U[p][g]=0}else{for(p=0;p<r;p++)U[p][g]=0;U[g][g]=1}}if(l)for(g=i-1;0<=g;g--){if(g<G&&0!==V[g])for(m=g+1;m<i;m++){for(w=0,p=g+1;p<i;p++)w+=j[p][g]*j[p][m];for(w=-w/j[g+1][g],p=g+1;p<i;p++)j[p][m]+=w*j[p][g]}for(p=0;p<i;p++)j[p][g]=0;j[g][g]=1}for(var W=y-1,q=2.220446049250313e-16;0<y;){for(g=y-2;-1<=g&&-1!==g;g--)if(u(V[g])<=q*(u(z[g])+u(z[g+1]))){V[g]=0;break}if(g===y-2)T=4;else{for(x=y-1;x>=g&&x!==g;x--)if(w=(x===y?0:u(V[x]))+(x===g+1?0:u(V[x-1])),u(z[x])<=q*w){z[x]=0;break}x===g?T=3:x===y-1?T=1:(T=2,g=x)}switch(g++,T){case 1:for(b=V[y-2],V[y-2]=0,m=y-2;m>=g;m--)if(w=(0,s.hypotenuse)(z[m],b),_=z[m]/w,S=b/w,z[m]=w,m!==g&&(b=-S*V[m-1],V[m-1]=_*V[m-1]),l)for(p=0;p<i;p++)w=_*j[p][m]+S*j[p][y-1],j[p][y-1]=-S*j[p][m]+_*j[p][y-1],j[p][m]=w;break;case 2:for(b=V[g-1],V[g-1]=0,m=g;m<y;m++)if(w=(0,s.hypotenuse)(z[m],b),_=z[m]/w,S=b/w,z[m]=w,b=-S*V[m],V[m]=_*V[m],c)for(p=0;p<r;p++)w=_*U[p][m]+S*U[p][g-1],U[p][g-1]=-S*U[p][m]+_*U[p][g-1],U[p][m]=w;break;case 3:for(A=M(M(M(M(u(z[y-1]),u(z[y-2])),u(V[y-2])),u(z[g])),u(V[g])),P=z[g]/A,D=V[g]/A,N=(k=z[y-1]/A)*(L=V[y-2]/A)*(k*L),I=0,(0!=(O=(((C=z[y-2]/A)+k)*(C-k)+L*L)/2)||0!==N)&&(I=R(O*O+N),0>O&&(I=-I),I=N/(O+I)),b=(P+k)*(P-k)+I,F=P*D,m=g;m<y-1;m++){if(_=b/(w=(0,s.hypotenuse)(b,F)),S=F/w,m!==g&&(V[m-1]=w),b=_*z[m]+S*V[m],V[m]=_*V[m]-S*z[m],F=S*z[m+1],z[m+1]=_*z[m+1],l)for(p=0;p<i;p++)w=_*j[p][m]+S*j[p][m+1],j[p][m+1]=-S*j[p][m]+_*j[p][m+1],j[p][m]=w;if(_=b/(w=(0,s.hypotenuse)(b,F)),S=F/w,z[m]=w,b=_*V[m]+S*z[m+1],z[m+1]=-S*V[m]+_*z[m+1],F=S*V[m+1],V[m+1]=_*V[m+1],c&&m<r-1)for(p=0;p<r;p++)w=_*U[p][m]+S*U[p][m+1],U[p][m+1]=-S*U[p][m]+_*U[p][m+1],U[p][m]=w}V[y-2]=b;break;case 4:if(0>=z[g]&&(z[g]=0>z[g]?-z[g]:0,l))for(p=0;p<=W;p++)j[p][g]=-j[p][g];for(;g<W&&!(z[g]>=z[g+1]);){if(w=z[g],z[g]=z[g+1],z[g+1]=w,l&&g<i-1)for(p=0;p<i;p++)w=j[p][g+1],j[p][g+1]=j[p][g],j[p][g]=w;if(c&&g<r-1)for(p=0;p<r;p++)w=U[p][g+1],U[p][g+1]=U[p][g],U[p][g]=w;g++}y--}}if(f){var Y=j;j=U,U=Y}this.m=r,this.n=i,this.s=z,this.U=U,this.V=j}Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(4),o=i&&i.__esModule?i:{default:i},s=r(34);n.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,r=this.s,n=0,i=r.length;n<i;n++)r[n]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return o.default.isMatrix(this.U)||(this.U=new o.default(this.U)),this.U},get rightSingularVectors(){return o.default.isMatrix(this.V)||(this.V=new o.default(this.V)),this.V},get diagonalMatrix(){return o.default.diag(this.s)},solve:function(t){var e,r=this.threshold,n=this.s.length,i=o.default.zeros(n,n);for(e=0;e<n;e++)i[e][e]=u(this.s[e])<=r?0:1/this.s[e];var s,a,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(i),d=h.rows,p=l.length,m=o.default.zeros(d,p);for(e=0;e<d;e++)for(s=0;s<p;s++){for(c=0,a=0;a<n;a++)c+=f[e][a]*l[s][a];m[e][s]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(o.default.diag(t))},inverse:function(){var t,e,r=this.V,n=this.threshold,i=r.length,s=r[0].length,a=new o.default(i,this.s.length);for(t=0;t<i;t++)for(e=0;e<s;e++)a[t][e]=u(this.s[e])>n?r[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new o.default(i,f);for(t=0;t<i;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=a[t][c]*h[e][c];p[t][e]=l}return p}},e.default=n},function(t,e){\"use strict\";function n(t,e){return t-e}e.sum=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e},e.max=function(t){for(var e=t[0],r=t.length,n=1;n<r;n++)t[n]>e&&(e=t[n]);return e},e.min=function(t){for(var e=t[0],r=t.length,n=1;n<r;n++)t[n]<e&&(e=t[n]);return e},e.minMax=function(t){for(var e=t[0],r=t[0],n=t.length,i=1;i<n;i++)t[i]<e&&(e=t[i]),t[i]>r&&(r=t[i]);return{min:e,max:r}},e.arithmeticMean=function(t){for(var e=0,r=t.length,n=0;n<r;n++)e+=t[n];return e/r},e.mean=e.arithmeticMean,e.geometricMean=function(t){for(var e=1,r=t.length,n=0;n<r;n++)e*=t[n];return c(e,1/r)},e.logMean=function(t){for(var e=0,n=t.length,i=0;i<n;i++)e+=r(t[i]);return e/n},e.grandMean=function(t,e){for(var r=0,n=0,i=t.length,o=0;o<i;o++)r+=e[o]*t[o],n+=e[o];return r/n},e.truncatedMean=function(t,e,r){void 0===r&&(r=!1),r||(t=[].concat(t).sort(n));for(var i=t.length,o=g(i*e),s=0,a=o;a<i-o;a++)s+=t[a];return s/(i-2*o)},e.harmonicMean=function(t){for(var e=0,r=t.length,n=0;n<r;n++){if(0===t[n])throw new RangeError(\"value at index \"+n+\"is zero\");e+=1/t[n]}return r/e},e.contraHarmonicMean=function(t){for(var e=0,r=0,n=t.length,i=0;i<n;i++)e+=t[i]*t[i],r+=t[i];if(0>r)throw new RangeError(\"sum of values is negative\");return e/r},e.median=function(t,e){void 0===e&&(e=!1),e||(t=[].concat(t).sort(n));var r=t.length,i=g(r/2);return 0==r%2?.5*(t[i-1]+t[i]):t[i]},e.variance=function(t,r){void 0===r&&(r=!0);for(var n,i=e.mean(t),o=0,s=t.length,a=0;a<s;a++)o+=(n=t[a]-i)*n;return r?o/(s-1):o/s},e.standardDeviation=function(t,r){return R(e.variance(t,r))},e.standardError=function(t){return e.standardDeviation(t)/R(t.length)},e.robustMeanAndStdev=function(t){var e=0,r=t.length,i=0;for(i=0;i<r;i++)e+=t[i];e/=r;var o=Array(r);for(i=0;i<r;i++)o[i]=u(t[i]-e);return o.sort(n),{mean:e,stdev:1==r%2?o[(r-1)/2]/.6745:.5*(o[r/2]+o[r/2-1])/.6745}},e.quartiles=function(t,r){void 0===r&&(r=!1),r||(t=[].concat(t).sort(n));var i=t.length/4;return{q1:t[s(i)-1],q2:e.median(t,!0),q3:t[s(3*i)-1]}},e.pooledStandardDeviation=function(t,r){return R(e.pooledVariance(t,r))},e.pooledVariance=function(t,r){void 0===r&&(r=!0);for(var n=0,i=0,o=t.length,s=0;s<o;s++){var a=t[s],u=e.variance(a);n+=(a.length-1)*u,i+=r?a.length-1:a.length}return n/i},e.mode=function(t){var e,r=t.length,n=Array(r);for(e=0;e<r;e++)n[e]=0;var i=Array(r),o=0;for(e=0;e<r;e++){var s=i.indexOf(t[e]);0<=s?n[s]++:(i[o]=t[e],n[o]=1,o++)}var a=0,u=0;for(e=0;e<o;e++)n[e]>a&&(a=n[e],u=e);return i[u]},e.covariance=function(t,r,n){void 0===n&&(n=!0);var i=e.mean(t),o=e.mean(r);if(t.length!==r.length)throw\"Vectors do not have the same dimensions\";for(var s=0,a=t.length,u=0;u<a;u++)s+=(t[u]-i)*(r[u]-o);return n?s/(a-1):s/a},e.skewness=function(t,r){void 0===r&&(r=!0);for(var n,i=e.mean(t),o=0,s=0,a=t.length,u=0;u<a;u++)o+=(n=t[u]-i)*n,s+=n*n*n;var l=s/a/c(o/a,1.5);return r?R(a*(a-1))/(a-2)*l:l},e.kurtosis=function(t,r){void 0===r&&(r=!0);for(var n,i=e.mean(t),o=t.length,s=0,a=0,u=0;u<o;u++)s+=(n=t[u]-i)*n,a+=n*n*n*n;var c=s/o,l=a/o;if(r){var h=s/(o-1);return o*(o+1)/((o-1)*(o-2)*(o-3))*(a/(h*h))-(o-1)*(o-1)/((o-2)*(o-3))*3}return l/(c*c)-3},e.entropy=function(t,e){void 0===e&&(e=0);for(var n=0,i=t.length,o=0;o<i;o++)n+=t[o]*r(t[o]+e);return-n},e.weightedMean=function(t,e){for(var r=0,n=t.length,i=0;i<n;i++)r+=t[i]*e[i];return r},e.weightedStandardDeviation=function(t,r){return R(e.weightedVariance(t,r))},e.weightedVariance=function(t,r){for(var n=e.weightedMean(t,r),i=0,o=t.length,s=0,a=0,u=0;u<o;u++){var c=t[u]-n,l=r[u];i+=l*(c*c),a+=l,s+=l*l}return i*(a/(a*a-s))},e.center=function(t,r){void 0===r&&(r=!1);var n=t;r||(n=[].concat(t));for(var i=e.mean(n),o=n.length,s=0;s<o;s++)n[s]-=i},e.standardize=function(t,r,n){void 0===r&&(r=e.standardDeviation(t)),void 0===n&&(n=!1);for(var i=t.length,o=n?t:Array(i),s=0;s<i;s++)o[s]=t[s]/r;return o},e.cumulativeSum=function(t){var e=t.length,r=Array(e);r[0]=t[0];for(var n=1;n<e;n++)r[n]=r[n-1]+t[n];return r}},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,i,a,u=(t=o.default.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(i=0;i<l;i++){var f=0;for(e=i;e<c;e++)f=(0,s.hypotenuse)(f,u[e][i]);if(0!==f){for(0>u[i][i]&&(f=-f),e=i;e<c;e++)u[e][i]/=f;for(u[i][i]+=1,r=i+1;r<l;r++){for(a=0,e=i;e<c;e++)a+=u[e][i]*u[e][r];for(a=-a/u[i][i],e=i;e<c;e++)u[e][r]+=a*u[e][i]}}h[i]=-f}this.QR=u,this.Rdiag=h}Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(4),o=i&&i.__esModule?i:{default:i},s=r(34);n.prototype={solve:function(t){t=o.default.checkMatrix(t);var e=this.QR,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix row dimensions must agree\");if(!this.isFullRank())throw new Error(\"Matrix is rank deficient\");var n,i,s,a,u=t.columns,c=t.clone(),l=e.columns;for(s=0;s<l;s++)for(i=0;i<u;i++){for(a=0,n=s;n<r;n++)a+=e[n][s]*c[n][i];for(a=-a/e[s][s],n=s;n<r;n++)c[n][i]+=a*e[n][s]}for(s=l-1;0<=s;s--){for(i=0;i<u;i++)c[s][i]/=this.Rdiag[s];for(n=0;n<s;n++)for(i=0;i<u;i++)c[n][i]-=c[s][i]*e[n][s]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,r=this.QR,n=r.columns,i=new o.default(n,n);for(t=0;t<n;t++)for(e=0;e<n;e++)i[t][e]=t<e?r[t][e]:t===e?this.Rdiag[t]:0;return i},get orthogonalMatrix(){var t,e,r,n,i=this.QR,s=i.rows,a=i.columns,u=new o.default(s,a);for(r=a-1;0<=r;r--){for(t=0;t<s;t++)u[t][r]=0;for(u[r][r]=1,e=r;e<a;e++)if(0!==i[r][r]){for(n=0,t=r;t<s;t++)n+=i[t][r]*u[t][e];for(n=-n/i[r][r],t=r;t<s;t++)u[t][e]+=n*i[t][r]}}return u}},e.default=n},function(t,e,r){\"use strict\";function n(t,e){return v(t-2,0|t*e)}function i(t,e,r){return a(M(t+1,0|4*t/(3*e+r)))}var o=r(121),s=r(122),a=s.nextPrime,u=s.largestPrime,c=0,l=1,h=2;class f{constructor(t={}){if(t instanceof f)return this.table=t.table.slice(),this.values=t.values.slice(),this.state=t.state.slice(),this.minLoadFactor=t.minLoadFactor,this.maxLoadFactor=t.maxLoadFactor,this.distinct=t.distinct,this.freeEntries=t.freeEntries,this.lowWaterMark=t.lowWaterMark,void(this.highWaterMark=t.maxLoadFactor);var e=void 0===t.initialCapacity?150:t.initialCapacity;if(0>e)throw new RangeError(`initial capacity must not be less than zero: ${e}`);var r=void 0===t.minLoadFactor?1/6:t.minLoadFactor,i=void 0===t.maxLoadFactor?2/3:t.maxLoadFactor;if(0>r||1<=r)throw new RangeError(`invalid minLoadFactor: ${r}`);if(0>=i||1<=i)throw new RangeError(`invalid maxLoadFactor: ${i}`);if(r>=i)throw new RangeError(`minLoadFactor (${r}) must be smaller than maxLoadFactor (${i})`);var s=e;0===(s=a(s=0|s/i))&&(s=1),this.table=o(s,0),this.values=o(s,0),this.state=o(s,0),this.minLoadFactor=r,this.maxLoadFactor=s===u?1:i,this.distinct=0,this.freeEntries=s,this.lowWaterMark=0,this.highWaterMark=n(s,this.maxLoadFactor)}clone(){return new f(this)}get size(){return this.distinct}get(t){var e=this.indexOfKey(t);return 0>e?0:this.values[e]}set(t,e){var r=this.indexOfInsertion(t);if(0>r)return this.values[r=-r-1]=e,!1;if(this.distinct>this.highWaterMark){var n=i(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);return this.rehash(n),this.set(t,e)}if(this.table[r]=t,this.values[r]=e,this.state[r]===c&&this.freeEntries--,this.state[r]=l,this.distinct++,1>this.freeEntries){var o=i(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);this.rehash(o)}return!0}remove(t,e){var r=this.indexOfKey(t);return!(0>r||(this.state[r]=h,this.distinct--,e||this.maybeShrinkCapacity(),0))}delete(t,e){var r=this.indexOfKey(t);return!(0>r||(this.state[r]=c,this.distinct--,e||this.maybeShrinkCapacity(),0))}maybeShrinkCapacity(){if(this.distinct<this.lowWaterMark){var t=function(t,e,r){return a(M(t+1,0|4*t/(e+3*r)))}(this.distinct,this.minLoadFactor,this.maxLoadFactor);this.rehash(t)}}containsKey(t){return 0<=this.indexOfKey(t)}indexOfKey(t){var e=this.table,r=this.state,n=this.table.length,i=2147483647&t,o=i%n,s=i%(n-2);for(0==s&&(s=1);r[o]!==c&&(r[o]===h||e[o]!==t);)0>(o-=s)&&(o+=n);return r[o]===c?-1:o}containsValue(t){return 0<=this.indexOfValue(t)}indexOfValue(t){for(var e=this.values,r=this.state,n=0;n<r.length;n++)if(r[n]===l&&e[n]===t)return n;return-1}indexOfInsertion(t){var e=this.table,r=this.state,n=e.length,i=2147483647&t,o=i%n,s=i%(n-2);for(0==s&&(s=1);r[o]===l&&e[o]!==t;)0>(o-=s)&&(o+=n);if(r[o]===h){for(var a=o;r[o]!==c&&(r[o]===h||e[o]!==t);)0>(o-=s)&&(o+=n);r[o]===c&&(o=a)}return r[o]===l?-o-1:o}ensureCapacity(t){if(this.table.length<t){var e=a(t);this.rehash(e)}}rehash(t){var e=this.table.length;if(t<=this.distinct)throw new Error(\"Unexpected\");var r=this.table,i=this.values,s=this.state,a=o(t,0),u=o(t,0),c=o(t,0);this.lowWaterMark=function(t,e){return 0|t*e}(t,this.minLoadFactor),this.highWaterMark=n(t,this.maxLoadFactor),this.table=a,this.values=u,this.state=c,this.freeEntries=t-this.distinct;for(var h=0;h<e;h++)if(s[h]===l){var f=r[h],d=this.indexOfInsertion(f);a[d]=f,u[d]=i[h],c[d]=l}}forEachKey(t){for(var e=0;e<this.state.length;e++)if(this.state[e]===l&&!t(this.table[e]))return!1;return!0}forEachValue(t){for(var e=0;e<this.state.length;e++)if(this.state[e]===l&&!t(this.values[e]))return!1;return!0}forEachPair(t){for(var e=0;e<this.state.length;e++)if(this.state[e]===l&&!t(this.table[e],this.values[e]))return!1;return!0}}t.exports=f},function(t){\"use strict\";t.exports=function(t,e,r,n,i){var o,s;if(void 0===n)n=0;else if(0>(n|=0)||n>=t.length)throw new RangeError(\"invalid lower bound\");if(void 0===i)i=t.length-1;else if((i|=0)<n||i>=t.length)throw new RangeError(\"invalid upper bound\");for(;n<=i;)if(0>(s=+r(t[o=n+(i-n>>1)],e,o,t)))n=o+1;else{if(!(0<s))return o;i=o-1}return~n}},function(t,e,r){\"use strict\";function n(t){if(\"number\"!=typeof t||i(t))throw new TypeError(\"Expected a number\")}var i=r(123);e.asc=function(t,e){return n(t),n(e),t-e},e.desc=function(t,e){return n(t),n(e),e-t}},function(t,e,r){\"use strict\";var n=r(35),i={size:1,value:0};t.exports=function(t,e){if(e=n({},i,e),Array.isArray(t))return Array.isArray(t[0])?function(t,e){throw void 0===e.size[0]&&(e.size=[e.size,e.size,e.size,e.size]),new Error(\"matrix not supported yet, sorry\")}(0,e):function(t,e){var r=t.length;\"number\"==typeof e.size&&(e.size=[e.size,e.size]);var n,i,o=r+e.size[0]+e.size[1];if(e.output){if(e.output.length!==o)throw new RangeError(\"Wrong output size\");n=e.output}else n=Array(o);if(\"circular\"===e.value)for(i=0;i<o;i++)n[i]=i<e.size[0]?t[(r-e.size[0]%r+i)%r]:i<e.size[0]+r?t[i-e.size[0]]:t[(i-e.size[0])%r];else if(\"replicate\"===e.value)for(i=0;i<o;i++)n[i]=i<e.size[0]?t[0]:i<e.size[0]+r?t[i-e.size[0]]:t[r-1];else if(\"symmetric\"===e.value){if(e.size[0]>r||e.size[1]>r)throw new RangeError(\"expanded value should not be bigger than the data length\");for(i=0;i<o;i++)n[i]=i<e.size[0]?t[e.size[0]-1-i]:i<e.size[0]+r?t[i-e.size[0]]:t[2*r+e.size[0]-i-1]}else for(i=0;i<o;i++)n[i]=i<e.size[0]?e.value:i<e.size[0]+r?t[i-e.size[0]]:e.value;return n}(t,e);throw new TypeError(\"data should be an array\")}},function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(3),o=n(i),s=r(13),a=n(s);class u extends o.default{constructor(t,e,r){super(),!0===t?(this.degree=e.degree,this.powers=e.powers,this.coefficients=e.coefficients):((0,i.checkArrayLength)(t,e),function(t,e,r,n){var i,o=e.length;if(Array.isArray(n))n=(i=n).length;else{n++,i=Array(n);for(var u=0;u<n;u++)i[u]=u}for(var l=new a.default(o,n),h=new a.default([r]),f=0;f<n;f++)for(var d=0;d<o;d++)l[d][f]=0===i[f]?1:c(e[d],i[f]);var p=l.transposeView(),m=p.mmul(l),g=p.mmul(h.transposeView());t.degree=n-1,t.powers=i,t.coefficients=(0,s.solve)(m,g).to1DArray()}(this,t,e,r))}_predict(t){for(var e=0,r=0;r<this.powers.length;r++)e+=this.coefficients[r]*c(t,this.powers[r]);return e}toJSON(){return{name:\"polynomialRegression\",degree:this.degree,powers:this.powers,coefficients:this.coefficients}}toString(t){return this._toFormula(t,!1)}toLaTeX(t){return this._toFormula(t,!0)}_toFormula(t,e){var r=\"^\",n=\"\",o=\" * \";e&&(r=\"^{\",n=\"}\",o=\"\");for(var s=\"\",a=\"\",u=0;u<this.coefficients.length;u++)a=\"\",0!==this.coefficients[u]&&(a=0===this.powers[u]?(0,i.maybeToPrecision)(this.coefficients[u],t):1===this.powers[u]?(0,i.maybeToPrecision)(this.coefficients[u],t)+o+\"x\":(0,i.maybeToPrecision)(this.coefficients[u],t)+o+\"x\"+r+this.powers[u]+n,0<this.coefficients[u]&&u!==this.coefficients.length-1?a=\" + \"+a:u!==this.coefficients.length-1&&(a=\" \"+a)),s=a+s;return\"+\"===s.charAt(0)&&(s=s.slice(1)),\"f(x) = \"+s}static load(t){if(\"polynomialRegression\"!==t.name)throw new TypeError(\"not a polynomial regression model\");return new u(!0,t)}}e.default=u},function(t){\"use strict\";t.exports=function(t,e){for(var r=0,n=0,i=0;i<t.length;i++)r+=v(t[i],e[i]),n+=t[i]+e[i];return 2*r/n}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0,s=0;s<r;s++)n+=t[s]*t[s],i+=e[s]*e[s],o+=(t[s]-e[s])*(t[s]-e[s]);return o/(n+i)}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=v(t[i],e[i]);return 1-n}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0,s=0,a=0;a<r;a++)n+=t[a]*e[a],i+=t[a]*t[a],o+=e[a]*e[a],s+=(t[a]-e[a])*(t[a]-e[a]);return s/(i+o-n)}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0;o<r;o++)n+=u(t[o]-e[o]),i+=v(t[o],e[o]);return n/i}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0;o<r;o++)n+=v(t[o],e[o]),i+=t[o]+e[o];return 1-n/i}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=(R(t[i])-R(e[i]))*(R(t[i])-R(e[i]));return n}},function(t){\"use strict\";t.exports=function(t,e,r){if(r){for(var n=0,i=0,o=0;o<t.length;o++)n+=t[o]&&e[o],i+=t[o]||e[o];return 0===i?1:n/i}for(var s=t.length,a=0,u=0,c=0,l=0;l<s;l++)a+=t[l],u+=e[l],c+=v(t[l],e[l]);return 1-(a+u-2*c)/(a+u-c)}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0,s=0;s<r;s++)n+=t[s]*e[s],i+=t[s]*t[s],o+=e[s]*e[s];return n/(R(i)*R(o))}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=Array.from({length:r}).map(()=>Array.from({length:r})),i=0;i<r;i++)for(var o=0;o<=i;o++)n[i][o]=e(t[i],t[o]);for(var s=0;s<r;s++)for(var a=s+1;a<r;a++)n[s][a]=n[a][s];return n}},function(e,t,i){\"use strict\";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError(\"Matrices dimensions must be equal\")}function n(t,e){return t-e}function x(t,e){for(var r in e)t=t.replace(new RegExp(\"%\"+r+\"%\",\"g\"),e[r]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError(\"Data length does not match given dimensions\");for(var n=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r[i*e+o]);return n}static rowVector(t){for(var e=new this(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){for(var e=new this(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,r){void 0===r&&(r=Math.random);for(var n=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r());return n}static randInt(t,e,r,n){void 0===r&&(r=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var s,a=0;a<e;a++)s=g(n()*r),i.set(o,a,s);return i}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);for(var n=v(t,e),i=this.zeros(t,e),o=0;o<n;o++)i.set(o,o,r);return i}static diag(t,e,r){var n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);for(var i=v(n,e,r),o=this.zeros(e,r),s=0;s<i;s++)o.set(s,s,t[s]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,v(t.get(o,s),e.get(o,s)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,M(t.get(o,s),e.get(o,s)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&\"Matrix\"===t.klass}get size(){return this.rows*this.columns}apply(t){if(\"function\"!=typeof t)throw new TypeError(\"callback must be a function\");for(var e=this.rows,r=this.columns,n=0;n<e;n++)for(var i=0;i<r;i++)t.call(this,n,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t[e*this.columns+r]=this.get(e,r);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var r=0;r<this.columns;r++)t[e][r]=this.get(e,r)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error(\"set method is unimplemented\")}get(){throw new Error(\"get method is unimplemented\")}repeat(t,e){t=t||1,e=e||1;for(var r=new this.constructor[Symbol.species](this.rows*t,this.columns*e),n=0;n<t;n++)for(var i=0;i<e;i++)r.setSubMatrix(this,this.rows*n,this.columns*i);return r}fill(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),r=0;r<this.columns;r++)e[r]=this.get(t,r);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var r,n=0;n<this.columns;n++)r=this.get(t,n),this.set(t,n,this.get(e,n)),this.set(e,n,r);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),r=0;r<this.rows;r++)e[r]=this.get(r,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var r,n=0;n<this.rows;n++)r=this.get(n,t),this.set(n,t,this.get(n,e)),this.set(n,e,r);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){for(var t=v(this.rows,this.columns),e=Array(t),r=0;r<t;r++)e[r]=this.get(r,r);return e}sum(t){return\"row\"===t?l.sumByRow(this):\"column\"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t*=this.get(e,r);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError(\"vectors do not have the same size\");for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[n];return r}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn(\"Number of columns of left matrix are not equal to number of rows of right matrix.\");for(var e=this.rows,r=this.columns,n=t.columns,i=new this.constructor[Symbol.species](e,n),o=Array(r),s=0;s<n;s++){for(var a=0;a<r;a++)o[a]=t.get(a,s);for(var u,c=0;c<e;c++){for(u=0,a=0;a<r;a++)u+=this.get(c,a)*o[a];i.set(c,s,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(r+u)*(n+c),h=(s+u)*n,f=r*(o-c),d=u*(a-n),p=(r+i)*c;return e.set(0,0,l+d-p+(i-u)*(a+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(s-r)*(n+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(r-o)*(-f+m),b=(-r+o+s)*(h-f+m),_=(o+s)*(-h+f),M=r*h,S=(-r+u+c)*(h-d+g),E=(-r+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),R=(i-l)*(m-y),k=i*v,C=(c+l)*(-v+y),L=(-i+s+a)*(g+v-w),P=(i-a)*(g-w),D=(s+a)*(-v+w);return e.set(0,0,M+k+n*p),e.set(0,1,(r+n+i-o-s-c-l)*m+b+_+M+A+k+C),e.set(0,2,M+S+T+(r+n+i-s-a-u-c)*g+k+L+D),e.set(1,0,x+s*(-h+f+p-m-g-v+w)+b+M+k+L+P),e.set(1,1,x+b+_+M+a*y),e.set(1,2,k+L+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+R+k),e.set(2,1,A+R+k+C+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,r){return t.rows===e&&t.columns===r?t:w.zeros(e,r).setSubMatrix(t,0,0)}var r=this.clone(),n=r.rows,i=r.columns,o=t.rows,s=t.columns;i!==o&&console.warn(`Multiplying ${n} x ${i} and ${o} x ${s} matrix: dimensions do not match.`);var a=M(n,o),u=M(i,s);return function t(r,n,i,o){if(512>=i||512>=o)return r.mmul(n);1==i%2&&1==o%2?(r=e(r,i+1,o+1),n=e(n,i+1,o+1)):1==i%2?(r=e(r,i+1,o),n=e(n,i+1,o)):1==o%2&&(r=e(r,i,o+1),n=e(n,i,o+1));var s=parseInt(r.rows/2),a=parseInt(r.columns/2),u=r.subMatrix(0,s-1,0,a-1),c=n.subMatrix(0,s-1,0,a-1),l=r.subMatrix(0,s-1,a,r.columns-1),h=n.subMatrix(0,s-1,a,n.columns-1),f=r.subMatrix(s,r.rows-1,0,a-1),d=n.subMatrix(s,n.rows-1,0,a-1),p=r.subMatrix(s,r.rows-1,a,r.columns-1),m=n.subMatrix(s,n.rows-1,a,n.columns-1),g=t(w.add(u,p),w.add(c,m),s,a),v=t(w.add(f,p),c,s,a),y=t(u,w.sub(h,m),s,a),x=t(p,w.sub(d,c),s,a),b=t(w.add(u,l),m,s,a),_=t(w.sub(f,u),w.add(c,h),s,a),M=t(w.sub(l,p),w.add(d,m),s,a),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var R=w.zeros(2*S.rows,2*S.columns);return(R=(R=(R=(R=R.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(r=e(r,a,u),t=e(t,a,u),a,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)r=s.scale(this.getRow(i),{min:t,max:e}),n.setRow(i,r);return n}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)r=s.scale(this.getColumn(i),{min:t,max:e}),n.setColumn(i,r);return n}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*n,r*i),s=0;s<e;s++)for(var a=0;a<r;a++)for(var u=0;u<n;u++)for(var c=0;c<i;c++)o[n*s+u][i*a+c]=this.get(s,a)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){l.checkRange(this,t,e,r,n);for(var i=new this.constructor[Symbol.species](e-t+1,n-r+1),o=t;o<=e;o++)for(var s=r;s<=n;s++)i[o-t][s-r]=this.get(o,s);return i}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||0>e||e>=this.columns||0>r||r>=this.columns)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](t.length,r-e+1),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError(\"Row index out of range: \"+t[i]);n.set(i,o-e,this.get(t[i],o))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||0>e||e>=this.rows||0>r||r>=this.rows)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](r-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError(\"Column index out of range: \"+t[i]);n.set(o-e,i,this.get(o,t[i]))}return n}setSubMatrix(t,e,r){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,r,r+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[e+n][r+i]=t.get(n,i);return this}selection(t,e){for(var r,n=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<n.row.length;o++){r=n.row[o];for(var s=0;s<n.column.length;s++)i[o][s]=this.get(r,n.column[s])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,r,n){return new d(this,t,e,r,n)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,r,n,i,s;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),r=this.get(1,0),t*this.get(1,1)-e*r):3===this.columns?(n=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),s=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),r=this.get(0,2),t*n.det()-e*i.det()+r*s.det()):new o(this).determinant;throw Error(\"Determinant can only be calculated for a square matrix.\")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass=\"Matrix\",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",y=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% value);\\n        }\\n    }\\n    return this;\\n})\\n\",b=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\\n        }\\n    }\\n    return this;\\n})\\n\",R=\"\\n(function %name%(matrix, value) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(value);\\n})\\n\",I=\"\\n(function %name%() {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",S=\"\\n(function %name%(matrix) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%();\\n})\\n\",C=\"\\n(function %name%(%args%) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), %args%));\\n        }\\n    }\\n    return this;\\n})\\n\",V=\"\\n(function %name%(matrix, %args%) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(%args%);\\n})\\n\",D=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), value));\\n        }\\n    }\\n    return this;\\n})\\n\",z=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",_=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",P=V,A=[[\"+\",\"add\"],[\"-\",\"sub\",\"subtract\"],[\"*\",\"mul\",\"multiply\"],[\"/\",\"div\",\"divide\"],[\"%\",\"mod\",\"modulus\"],[\"&\",\"and\"],[\"|\",\"or\"],[\"^\",\"xor\"],[\"<<\",\"leftShift\"],[\">>\",\"signPropagatingRightShift\"],[\">>>\",\"rightShift\",\"zeroFillRightShift\"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+\"S\",op:N[0]})),B=eval(x(b,{name:N[1]+\"M\",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+\"S\"]=E,w.prototype[N[F]+\"M\"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[[\"~\",\"not\"]];[\"abs\",\"acos\",\"acosh\",\"asin\",\"asinh\",\"atan\",\"atanh\",\"cbrt\",\"ceil\",\"clz32\",\"cos\",\"cosh\",\"exp\",\"expm1\",\"floor\",\"fround\",\"log\",\"log1p\",\"log10\",\"log2\",\"round\",\"sign\",\"sin\",\"sinh\",\"sqrt\",\"tan\",\"tanh\",\"trunc\"].forEach(function(t){W.push([\"Math.\"+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[[\"Math.pow\",1,\"pow\"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae=\"arg0\";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+\"M\"]=ge,w.prototype[re[F]+\"S\"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(70),r=i(71),s=i(1),l=i(24),c=i(194),m=i(195),d=i(196),h=i(197),p=i(198),k=i(199),j=i(200)},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,o,s,a,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),r=0;r<g;r++){for(e=0;e<m;e++)f[e]=p[e][r];for(e=0;e<m;e++){for(h=p[e],d=v(e,r),a=0,o=0;o<d;o++)a+=h[o]*f[o];h[r]=f[e]-=a}for(s=r,e=r+1;e<m;e++)u(f[e])>u(f[s])&&(s=e);if(s!==r){for(o=0;o<g;o++)c=p[s][o],p[s][o]=p[r][o],p[r][o]=c;l=y[s],y[s]=y[r],y[r]=l,w=-w}if(r<m&&0!==p[r][r])for(e=r+1;e<m;e++)p[e][r]/=p[r][r]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=r(5);n.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,r=0;r<e;r++)if(0===t[r][r])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error(\"Matrix must be square\");for(var e=this.pivotSign,r=t.columns,n=0;n<r;n++)e*=t[n][n];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o>s?t[o][s]:o===s?1:0;return n},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o<=s?t[o][s]:0;return n},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error(\"Invalid matrix dimensions\");if(this.isSingular())throw new Error(\"LU matrix is singular\");var r,n,o,s=t.columns,a=t.subMatrixRow(this.pivotVector,0,s-1),u=e.columns;for(o=0;o<u;o++)for(r=o+1;r<u;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o];for(o=u-1;0<=o;o--){for(n=0;n<s;n++)a[o][n]/=e[o][o];for(r=0;r<o;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o]}return a}},t.exports=n},function(t,e,r){\"use strict\";function n(t,e){if(!(this instanceof n))return new n(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var r=t.rows,o=t.columns,c=v(r,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(r<o)if(!0===e.autoTranspose){r=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn(\"Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose\");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,k,C,L,P,D,O,N,I,F,z,U=Array(v(r+1,o)),j=a(r,c,0),V=a(o,o,0),B=Array(o),H=Array(r),G=v(r-1,o),W=M(0,v(o-2,r));for(y=0,T=M(G,W);y<T;y++){if(y<G){for(U[y]=0,m=y;m<r;m++)U[y]=s(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<r;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<r;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<r;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<r;m++)j[m][y]=f[m][y];if(y<W){for(B[y]=0,m=y+1;m<o;m++)B[y]=s(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<r&&0!==B[y]){for(m=y+1;m<r;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<r;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<r;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,r+1),G<o&&(U[G]=f[G][G]),r<w&&(U[w-1]=0),W+1<w&&(B[W]=f[W][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<r;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<r;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<r;m++)j[m][g]+=x*j[m][y]}for(m=y;m<r;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<r;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<W&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var q=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(k=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/k,O=B[y]/k,I=(C=U[w-1]/k)*(P=B[w-2]/k)*(C*P),F=0,(0!=(N=(((L=U[w-2]/k)+C)*(L-C)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+C)*(D-C)+F,z=D*O,g=y;g<w-1;g++){if(S=_/(x=s(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=s(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<r-1)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=q;m++)V[m][y]=-V[m][y];for(;y<q&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<r-1)for(m=0;m<r;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=r,this.n=o,this.s=U,this.U=j,this.V=V}var i=r(5),o=r(38),s=o.hypotenuse,a=o.getFilled2DArray;n.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,r=this.s,n=0,i=r.length;n<i;n++)r[n]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,r=this.threshold,n=this.s.length,o=i.Matrix.zeros(n,n);for(e=0;e<n;e++)o[e][e]=u(this.s[e])<=r?0:1/this.s[e];var s,a,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(s=0;s<p;s++){for(c=0,a=0;a<n;a++)c+=f[e][a]*l[s][a];m[e][s]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,r=this.V,n=this.threshold,o=r.length,s=r[0].length,a=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<s;e++)a[t][e]=u(this.s[e])>n?r[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=a[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=n},function(t,e){\"use strict\";function n(t,e){return t-e}e.sum=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e},e.max=function(t){for(var e=-1/0,r=t.length,n=0;n<r;n++)t[n]>e&&(e=t[n]);return e},e.min=function(t){for(var e=1/0,r=t.length,n=0;n<r;n++)t[n]<e&&(e=t[n]);return e},e.minMax=function(t){for(var e=1/0,r=-1/0,n=t.length,i=0;i<n;i++)t[i]<e&&(e=t[i]),t[i]>r&&(r=t[i]);return{min:e,max:r}},e.arithmeticMean=function(t){for(var e=0,r=t.length,n=0;n<r;n++)e+=t[n];return e/r},e.mean=e.arithmeticMean,e.geometricMean=function(t){for(var e=1,r=t.length,n=0;n<r;n++)e*=t[n];return c(e,1/r)},e.logMean=function(t){for(var e=0,n=t.length,i=0;i<n;i++)e+=r(t[i]);return e/n},e.grandMean=function(t,e){for(var r=0,n=0,i=t.length,o=0;o<i;o++)r+=e[o]*t[o],n+=e[o];return r/n},e.truncatedMean=function(t,e,r){void 0===r&&(r=!1),r||(t=t.slice().sort(n));for(var i=t.length,o=g(i*e),s=0,a=o;a<i-o;a++)s+=t[a];return s/(i-2*o)},e.harmonicMean=function(t){for(var e=0,r=t.length,n=0;n<r;n++){if(0===t[n])throw new RangeError(\"value at index \"+n+\"is zero\");e+=1/t[n]}return r/e},e.contraHarmonicMean=function(t){for(var e=0,r=0,n=t.length,i=0;i<n;i++)e+=t[i]*t[i],r+=t[i];if(0>r)throw new RangeError(\"sum of values is negative\");return e/r},e.median=function(t,e){void 0===e&&(e=!1),e||(t=t.slice().sort(n));var r=t.length,i=g(r/2);return 0==r%2?.5*(t[i-1]+t[i]):t[i]},e.variance=function(t,r){void 0===r&&(r=!0);for(var n,i=e.mean(t),o=0,s=t.length,a=0;a<s;a++)o+=(n=t[a]-i)*n;return r?o/(s-1):o/s},e.standardDeviation=function(t,r){return R(e.variance(t,r))},e.standardError=function(t){return e.standardDeviation(t)/R(t.length)},e.quartiles=function(t,r){void 0===r&&(r=!1),r||(t=t.slice()).sort(n);var i=t.length/4;return{q1:t[s(i)-1],q2:e.median(t,!0),q3:t[s(3*i)-1]}},e.pooledStandardDeviation=function(t,r){return R(e.pooledVariance(t,r))},e.pooledVariance=function(t,r){void 0===r&&(r=!0);for(var n=0,i=0,o=t.length,s=0;s<o;s++){var a=t[s],u=e.variance(a);n+=(a.length-1)*u,i+=r?a.length-1:a.length}return n/i},e.mode=function(t){var e,r=t.length,n=Array(r);for(e=0;e<r;e++)n[e]=0;var i=Array(r),o=0;for(e=0;e<r;e++){var s=i.indexOf(t[e]);0<=s?n[s]++:(i[o]=t[e],n[o]=1,o++)}var a=0,u=0;for(e=0;e<o;e++)n[e]>a&&(a=n[e],u=e);return i[u]},e.covariance=function(t,r,n){void 0===n&&(n=!0);var i=e.mean(t),o=e.mean(r);if(t.length!==r.length)throw\"Vectors do not have the same dimensions\";for(var s=0,a=t.length,u=0;u<a;u++)s+=(t[u]-i)*(r[u]-o);return n?s/(a-1):s/a},e.skewness=function(t,r){void 0===r&&(r=!0);for(var n,i=e.mean(t),o=0,s=0,a=t.length,u=0;u<a;u++)o+=(n=t[u]-i)*n,s+=n*n*n;var l=s/a/c(o/a,1.5);return r?R(a*(a-1))/(a-2)*l:l},e.kurtosis=function(t,r){void 0===r&&(r=!0);for(var n,i=e.mean(t),o=t.length,s=0,a=0,u=0;u<o;u++)s+=(n=t[u]-i)*n,a+=n*n*n*n;var c=s/o,l=a/o;if(r){var h=s/(o-1);return o*(o+1)/((o-1)*(o-2)*(o-3))*(a/(h*h))-(o-1)*(o-1)/((o-2)*(o-3))*3}return l/(c*c)-3},e.entropy=function(t,e){void 0===e&&(e=0);for(var n=0,i=t.length,o=0;o<i;o++)n+=t[o]*r(t[o]+e);return-n},e.weightedMean=function(t,e){for(var r=0,n=t.length,i=0;i<n;i++)r+=t[i]*e[i];return r},e.weightedStandardDeviation=function(t,r){return R(e.weightedVariance(t,r))},e.weightedVariance=function(t,r){for(var n=e.weightedMean(t,r),i=0,o=t.length,s=0,a=0,u=0;u<o;u++){var c=t[u]-n,l=r[u];i+=l*(c*c),a+=l,s+=l*l}return i*(a/(a*a-s))},e.center=function(t,r){void 0===r&&(r=!1);var n=t;r||(n=t.slice());for(var i=e.mean(n),o=n.length,s=0;s<o;s++)n[s]-=i},e.standardize=function(t,r,n){void 0===r&&(r=e.standardDeviation(t)),void 0===n&&(n=!1);for(var i=t.length,o=n?t:Array(i),s=0;s<i;s++)o[s]=t[s]/r;return o},e.cumulativeSum=function(t){var e=t.length,r=Array(e);r[0]=t[0];for(var n=1;n<e;n++)r[n]=r[n-1]+t[n];return r}},function(e,t,i){\"use strict\";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError(\"Matrices dimensions must be equal\")}function n(t,e){return t-e}function x(t,e){for(var r in e)t=t.replace(new RegExp(\"%\"+r+\"%\",\"g\"),e[r]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError(\"Data length does not match given dimensions\");for(var n=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r[i*e+o]);return n}static rowVector(t){for(var e=new this(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){for(var e=new this(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,r){void 0===r&&(r=Math.random);for(var n=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r());return n}static randInt(t,e,r,n){void 0===r&&(r=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var s,a=0;a<e;a++)s=g(n()*r),i.set(o,a,s);return i}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);for(var n=v(t,e),i=this.zeros(t,e),o=0;o<n;o++)i.set(o,o,r);return i}static diag(t,e,r){var n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);for(var i=v(n,e,r),o=this.zeros(e,r),s=0;s<i;s++)o.set(s,s,t[s]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,v(t.get(o,s),e.get(o,s)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,M(t.get(o,s),e.get(o,s)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&\"Matrix\"===t.klass}get size(){return this.rows*this.columns}apply(t){if(\"function\"!=typeof t)throw new TypeError(\"callback must be a function\");for(var e=this.rows,r=this.columns,n=0;n<e;n++)for(var i=0;i<r;i++)t.call(this,n,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t[e*this.columns+r]=this.get(e,r);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var r=0;r<this.columns;r++)t[e][r]=this.get(e,r)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error(\"set method is unimplemented\")}get(){throw new Error(\"get method is unimplemented\")}repeat(t,e){t=t||1,e=e||1;for(var r=new this.constructor[Symbol.species](this.rows*t,this.columns*e),n=0;n<t;n++)for(var i=0;i<e;i++)r.setSubMatrix(this,this.rows*n,this.columns*i);return r}fill(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),r=0;r<this.columns;r++)e[r]=this.get(t,r);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var r,n=0;n<this.columns;n++)r=this.get(t,n),this.set(t,n,this.get(e,n)),this.set(e,n,r);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),r=0;r<this.rows;r++)e[r]=this.get(r,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var r,n=0;n<this.rows;n++)r=this.get(n,t),this.set(n,t,this.get(n,e)),this.set(n,e,r);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){for(var t=v(this.rows,this.columns),e=Array(t),r=0;r<t;r++)e[r]=this.get(r,r);return e}sum(t){return\"row\"===t?l.sumByRow(this):\"column\"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t*=this.get(e,r);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError(\"vectors do not have the same size\");for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[n];return r}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn(\"Number of columns of left matrix are not equal to number of rows of right matrix.\");for(var e=this.rows,r=this.columns,n=t.columns,i=new this.constructor[Symbol.species](e,n),o=Array(r),s=0;s<n;s++){for(var a=0;a<r;a++)o[a]=t.get(a,s);for(var u,c=0;c<e;c++){for(u=0,a=0;a<r;a++)u+=this.get(c,a)*o[a];i.set(c,s,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(r+u)*(n+c),h=(s+u)*n,f=r*(o-c),d=u*(a-n),p=(r+i)*c;return e.set(0,0,l+d-p+(i-u)*(a+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(s-r)*(n+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(r-o)*(-f+m),b=(-r+o+s)*(h-f+m),_=(o+s)*(-h+f),M=r*h,S=(-r+u+c)*(h-d+g),E=(-r+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),R=(i-l)*(m-y),k=i*v,C=(c+l)*(-v+y),L=(-i+s+a)*(g+v-w),P=(i-a)*(g-w),D=(s+a)*(-v+w);return e.set(0,0,M+k+n*p),e.set(0,1,(r+n+i-o-s-c-l)*m+b+_+M+A+k+C),e.set(0,2,M+S+T+(r+n+i-s-a-u-c)*g+k+L+D),e.set(1,0,x+s*(-h+f+p-m-g-v+w)+b+M+k+L+P),e.set(1,1,x+b+_+M+a*y),e.set(1,2,k+L+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+R+k),e.set(2,1,A+R+k+C+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,r){return t.rows===e&&t.columns===r?t:w.zeros(e,r).setSubMatrix(t,0,0)}var r=this.clone(),n=r.rows,i=r.columns,o=t.rows,s=t.columns;i!==o&&console.warn(`Multiplying ${n} x ${i} and ${o} x ${s} matrix: dimensions do not match.`);var a=M(n,o),u=M(i,s);return function t(r,n,i,o){if(512>=i||512>=o)return r.mmul(n);1==i%2&&1==o%2?(r=e(r,i+1,o+1),n=e(n,i+1,o+1)):1==i%2?(r=e(r,i+1,o),n=e(n,i+1,o)):1==o%2&&(r=e(r,i,o+1),n=e(n,i,o+1));var s=parseInt(r.rows/2),a=parseInt(r.columns/2),u=r.subMatrix(0,s-1,0,a-1),c=n.subMatrix(0,s-1,0,a-1),l=r.subMatrix(0,s-1,a,r.columns-1),h=n.subMatrix(0,s-1,a,n.columns-1),f=r.subMatrix(s,r.rows-1,0,a-1),d=n.subMatrix(s,n.rows-1,0,a-1),p=r.subMatrix(s,r.rows-1,a,r.columns-1),m=n.subMatrix(s,n.rows-1,a,n.columns-1),g=t(w.add(u,p),w.add(c,m),s,a),v=t(w.add(f,p),c,s,a),y=t(u,w.sub(h,m),s,a),x=t(p,w.sub(d,c),s,a),b=t(w.add(u,l),m,s,a),_=t(w.sub(f,u),w.add(c,h),s,a),M=t(w.sub(l,p),w.add(d,m),s,a),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var R=w.zeros(2*S.rows,2*S.columns);return(R=(R=(R=(R=R.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(r=e(r,a,u),t=e(t,a,u),a,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)r=s.scale(this.getRow(i),{min:t,max:e}),n.setRow(i,r);return n}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)r=s.scale(this.getColumn(i),{min:t,max:e}),n.setColumn(i,r);return n}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*n,r*i),s=0;s<e;s++)for(var a=0;a<r;a++)for(var u=0;u<n;u++)for(var c=0;c<i;c++)o[n*s+u][i*a+c]=this.get(s,a)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){l.checkRange(this,t,e,r,n);for(var i=new this.constructor[Symbol.species](e-t+1,n-r+1),o=t;o<=e;o++)for(var s=r;s<=n;s++)i[o-t][s-r]=this.get(o,s);return i}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||0>e||e>=this.columns||0>r||r>=this.columns)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](t.length,r-e+1),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError(\"Row index out of range: \"+t[i]);n.set(i,o-e,this.get(t[i],o))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||0>e||e>=this.rows||0>r||r>=this.rows)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](r-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError(\"Column index out of range: \"+t[i]);n.set(o-e,i,this.get(o,t[i]))}return n}setSubMatrix(t,e,r){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,r,r+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[e+n][r+i]=t.get(n,i);return this}selection(t,e){for(var r,n=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<n.row.length;o++){r=n.row[o];for(var s=0;s<n.column.length;s++)i[o][s]=this.get(r,n.column[s])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,r,n){return new d(this,t,e,r,n)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,r,n,i,s;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),r=this.get(1,0),t*this.get(1,1)-e*r):3===this.columns?(n=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),s=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),r=this.get(0,2),t*n.det()-e*i.det()+r*s.det()):new o(this).determinant;throw Error(\"Determinant can only be calculated for a square matrix.\")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass=\"Matrix\",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",y=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% value);\\n        }\\n    }\\n    return this;\\n})\\n\",b=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\\n        }\\n    }\\n    return this;\\n})\\n\",R=\"\\n(function %name%(matrix, value) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(value);\\n})\\n\",I=\"\\n(function %name%() {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",S=\"\\n(function %name%(matrix) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%();\\n})\\n\",C=\"\\n(function %name%(%args%) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), %args%));\\n        }\\n    }\\n    return this;\\n})\\n\",V=\"\\n(function %name%(matrix, %args%) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(%args%);\\n})\\n\",D=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), value));\\n        }\\n    }\\n    return this;\\n})\\n\",z=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",_=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",P=V,A=[[\"+\",\"add\"],[\"-\",\"sub\",\"subtract\"],[\"*\",\"mul\",\"multiply\"],[\"/\",\"div\",\"divide\"],[\"%\",\"mod\",\"modulus\"],[\"&\",\"and\"],[\"|\",\"or\"],[\"^\",\"xor\"],[\"<<\",\"leftShift\"],[\">>\",\"signPropagatingRightShift\"],[\">>>\",\"rightShift\",\"zeroFillRightShift\"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+\"S\",op:N[0]})),B=eval(x(b,{name:N[1]+\"M\",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+\"S\"]=E,w.prototype[N[F]+\"M\"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[[\"~\",\"not\"]];[\"abs\",\"acos\",\"acosh\",\"asin\",\"asinh\",\"atan\",\"atanh\",\"cbrt\",\"ceil\",\"clz32\",\"cos\",\"cosh\",\"exp\",\"expm1\",\"floor\",\"fround\",\"log\",\"log1p\",\"log10\",\"log2\",\"round\",\"sign\",\"sin\",\"sinh\",\"sqrt\",\"tan\",\"tanh\",\"trunc\"].forEach(function(t){W.push([\"Math.\"+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[[\"Math.pow\",1,\"pow\"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae=\"arg0\";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+\"M\"]=ge,w.prototype[re[F]+\"S\"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(74),r=i(75),s=i(1),l=i(25),c=i(212),m=i(213),d=i(214),h=i(215),p=i(216),k=i(217),j=i(218)},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,o,s,a,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),r=0;r<g;r++){for(e=0;e<m;e++)f[e]=p[e][r];for(e=0;e<m;e++){for(h=p[e],d=v(e,r),a=0,o=0;o<d;o++)a+=h[o]*f[o];h[r]=f[e]-=a}for(s=r,e=r+1;e<m;e++)u(f[e])>u(f[s])&&(s=e);if(s!==r){for(o=0;o<g;o++)c=p[s][o],p[s][o]=p[r][o],p[r][o]=c;l=y[s],y[s]=y[r],y[r]=l,w=-w}if(r<m&&0!==p[r][r])for(e=r+1;e<m;e++)p[e][r]/=p[r][r]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=r(6);n.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,r=0;r<e;r++)if(0===t[r][r])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error(\"Matrix must be square\");for(var e=this.pivotSign,r=t.columns,n=0;n<r;n++)e*=t[n][n];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o>s?t[o][s]:o===s?1:0;return n},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o<=s?t[o][s]:0;return n},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error(\"Invalid matrix dimensions\");if(this.isSingular())throw new Error(\"LU matrix is singular\");var r,n,o,s=t.columns,a=t.subMatrixRow(this.pivotVector,0,s-1),u=e.columns;for(o=0;o<u;o++)for(r=o+1;r<u;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o];for(o=u-1;0<=o;o--){for(n=0;n<s;n++)a[o][n]/=e[o][o];for(r=0;r<o;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o]}return a}},t.exports=n},function(t,e,r){\"use strict\";function n(t,e){if(!(this instanceof n))return new n(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var r=t.rows,o=t.columns,c=v(r,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(r<o)if(!0===e.autoTranspose){r=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn(\"Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose\");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,k,C,L,P,D,O,N,I,F,z,U=Array(v(r+1,o)),j=a(r,c,0),V=a(o,o,0),B=Array(o),H=Array(r),G=v(r-1,o),W=M(0,v(o-2,r));for(y=0,T=M(G,W);y<T;y++){if(y<G){for(U[y]=0,m=y;m<r;m++)U[y]=s(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<r;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<r;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<r;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<r;m++)j[m][y]=f[m][y];if(y<W){for(B[y]=0,m=y+1;m<o;m++)B[y]=s(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<r&&0!==B[y]){for(m=y+1;m<r;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<r;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<r;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,r+1),G<o&&(U[G]=f[G][G]),r<w&&(U[w-1]=0),W+1<w&&(B[W]=f[W][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<r;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<r;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<r;m++)j[m][g]+=x*j[m][y]}for(m=y;m<r;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<r;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<W&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var q=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(k=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/k,O=B[y]/k,I=(C=U[w-1]/k)*(P=B[w-2]/k)*(C*P),F=0,(0!=(N=(((L=U[w-2]/k)+C)*(L-C)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+C)*(D-C)+F,z=D*O,g=y;g<w-1;g++){if(S=_/(x=s(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=s(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<r-1)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=q;m++)V[m][y]=-V[m][y];for(;y<q&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<r-1)for(m=0;m<r;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=r,this.n=o,this.s=U,this.U=j,this.V=V}var i=r(6),o=r(39),s=o.hypotenuse,a=o.getFilled2DArray;n.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,r=this.s,n=0,i=r.length;n<i;n++)r[n]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,r=this.threshold,n=this.s.length,o=i.Matrix.zeros(n,n);for(e=0;e<n;e++)o[e][e]=u(this.s[e])<=r?0:1/this.s[e];var s,a,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(s=0;s<p;s++){for(c=0,a=0;a<n;a++)c+=f[e][a]*l[s][a];m[e][s]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,r=this.V,n=this.threshold,o=r.length,s=r[0].length,a=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<s;e++)a[t][e]=u(this.s[e])>n?r[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=a[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=n},function(e,t,i){\"use strict\";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError(\"Matrices dimensions must be equal\")}function n(t,e){return t-e}function x(t,e){for(var r in e)t=t.replace(new RegExp(\"%\"+r+\"%\",\"g\"),e[r]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError(\"Data length does not match given dimensions\");for(var n=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r[i*e+o]);return n}static rowVector(t){for(var e=new this(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){for(var e=new this(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,r){void 0===r&&(r=Math.random);for(var n=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r());return n}static randInt(t,e,r,n){void 0===r&&(r=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var s,a=0;a<e;a++)s=g(n()*r),i.set(o,a,s);return i}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);for(var n=v(t,e),i=this.zeros(t,e),o=0;o<n;o++)i.set(o,o,r);return i}static diag(t,e,r){var n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);for(var i=v(n,e,r),o=this.zeros(e,r),s=0;s<i;s++)o.set(s,s,t[s]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,v(t.get(o,s),e.get(o,s)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,M(t.get(o,s),e.get(o,s)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&\"Matrix\"===t.klass}get size(){return this.rows*this.columns}apply(t){if(\"function\"!=typeof t)throw new TypeError(\"callback must be a function\");for(var e=this.rows,r=this.columns,n=0;n<e;n++)for(var i=0;i<r;i++)t.call(this,n,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t[e*this.columns+r]=this.get(e,r);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var r=0;r<this.columns;r++)t[e][r]=this.get(e,r)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error(\"set method is unimplemented\")}get(){throw new Error(\"get method is unimplemented\")}repeat(t,e){t=t||1,e=e||1;for(var r=new this.constructor[Symbol.species](this.rows*t,this.columns*e),n=0;n<t;n++)for(var i=0;i<e;i++)r.setSubMatrix(this,this.rows*n,this.columns*i);return r}fill(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),r=0;r<this.columns;r++)e[r]=this.get(t,r);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var r,n=0;n<this.columns;n++)r=this.get(t,n),this.set(t,n,this.get(e,n)),this.set(e,n,r);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),r=0;r<this.rows;r++)e[r]=this.get(r,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var r,n=0;n<this.rows;n++)r=this.get(n,t),this.set(n,t,this.get(n,e)),this.set(n,e,r);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){for(var t=v(this.rows,this.columns),e=Array(t),r=0;r<t;r++)e[r]=this.get(r,r);return e}sum(t){return\"row\"===t?l.sumByRow(this):\"column\"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t*=this.get(e,r);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError(\"vectors do not have the same size\");for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[n];return r}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn(\"Number of columns of left matrix are not equal to number of rows of right matrix.\");for(var e=this.rows,r=this.columns,n=t.columns,i=new this.constructor[Symbol.species](e,n),o=Array(r),s=0;s<n;s++){for(var a=0;a<r;a++)o[a]=t.get(a,s);for(var u,c=0;c<e;c++){for(u=0,a=0;a<r;a++)u+=this.get(c,a)*o[a];i.set(c,s,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(r+u)*(n+c),h=(s+u)*n,f=r*(o-c),d=u*(a-n),p=(r+i)*c;return e.set(0,0,l+d-p+(i-u)*(a+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(s-r)*(n+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(r-o)*(-f+m),b=(-r+o+s)*(h-f+m),_=(o+s)*(-h+f),M=r*h,S=(-r+u+c)*(h-d+g),E=(-r+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),R=(i-l)*(m-y),k=i*v,C=(c+l)*(-v+y),L=(-i+s+a)*(g+v-w),P=(i-a)*(g-w),D=(s+a)*(-v+w);return e.set(0,0,M+k+n*p),e.set(0,1,(r+n+i-o-s-c-l)*m+b+_+M+A+k+C),e.set(0,2,M+S+T+(r+n+i-s-a-u-c)*g+k+L+D),e.set(1,0,x+s*(-h+f+p-m-g-v+w)+b+M+k+L+P),e.set(1,1,x+b+_+M+a*y),e.set(1,2,k+L+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+R+k),e.set(2,1,A+R+k+C+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,r){return t.rows===e&&t.columns===r?t:w.zeros(e,r).setSubMatrix(t,0,0)}var r=this.clone(),n=r.rows,i=r.columns,o=t.rows,s=t.columns;i!==o&&console.warn(`Multiplying ${n} x ${i} and ${o} x ${s} matrix: dimensions do not match.`);var a=M(n,o),u=M(i,s);return function t(r,n,i,o){if(512>=i||512>=o)return r.mmul(n);1==i%2&&1==o%2?(r=e(r,i+1,o+1),n=e(n,i+1,o+1)):1==i%2?(r=e(r,i+1,o),n=e(n,i+1,o)):1==o%2&&(r=e(r,i,o+1),n=e(n,i,o+1));var s=parseInt(r.rows/2),a=parseInt(r.columns/2),u=r.subMatrix(0,s-1,0,a-1),c=n.subMatrix(0,s-1,0,a-1),l=r.subMatrix(0,s-1,a,r.columns-1),h=n.subMatrix(0,s-1,a,n.columns-1),f=r.subMatrix(s,r.rows-1,0,a-1),d=n.subMatrix(s,n.rows-1,0,a-1),p=r.subMatrix(s,r.rows-1,a,r.columns-1),m=n.subMatrix(s,n.rows-1,a,n.columns-1),g=t(w.add(u,p),w.add(c,m),s,a),v=t(w.add(f,p),c,s,a),y=t(u,w.sub(h,m),s,a),x=t(p,w.sub(d,c),s,a),b=t(w.add(u,l),m,s,a),_=t(w.sub(f,u),w.add(c,h),s,a),M=t(w.sub(l,p),w.add(d,m),s,a),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var R=w.zeros(2*S.rows,2*S.columns);return(R=(R=(R=(R=R.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(r=e(r,a,u),t=e(t,a,u),a,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)r=s.scale(this.getRow(i),{min:t,max:e}),n.setRow(i,r);return n}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)r=s.scale(this.getColumn(i),{min:t,max:e}),n.setColumn(i,r);return n}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*n,r*i),s=0;s<e;s++)for(var a=0;a<r;a++)for(var u=0;u<n;u++)for(var c=0;c<i;c++)o[n*s+u][i*a+c]=this.get(s,a)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){l.checkRange(this,t,e,r,n);for(var i=new this.constructor[Symbol.species](e-t+1,n-r+1),o=t;o<=e;o++)for(var s=r;s<=n;s++)i[o-t][s-r]=this.get(o,s);return i}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||0>e||e>=this.columns||0>r||r>=this.columns)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](t.length,r-e+1),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError(\"Row index out of range: \"+t[i]);n.set(i,o-e,this.get(t[i],o))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||0>e||e>=this.rows||0>r||r>=this.rows)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](r-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError(\"Column index out of range: \"+t[i]);n.set(o-e,i,this.get(o,t[i]))}return n}setSubMatrix(t,e,r){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,r,r+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[e+n][r+i]=t.get(n,i);return this}selection(t,e){for(var r,n=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<n.row.length;o++){r=n.row[o];for(var s=0;s<n.column.length;s++)i[o][s]=this.get(r,n.column[s])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,r,n){return new d(this,t,e,r,n)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,r,n,i,s;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),r=this.get(1,0),t*this.get(1,1)-e*r):3===this.columns?(n=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),s=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),r=this.get(0,2),t*n.det()-e*i.det()+r*s.det()):new o(this).determinant;throw Error(\"Determinant can only be calculated for a square matrix.\")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass=\"Matrix\",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",y=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% value);\\n        }\\n    }\\n    return this;\\n})\\n\",b=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\\n        }\\n    }\\n    return this;\\n})\\n\",R=\"\\n(function %name%(matrix, value) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(value);\\n})\\n\",I=\"\\n(function %name%() {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",S=\"\\n(function %name%(matrix) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%();\\n})\\n\",C=\"\\n(function %name%(%args%) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), %args%));\\n        }\\n    }\\n    return this;\\n})\\n\",V=\"\\n(function %name%(matrix, %args%) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(%args%);\\n})\\n\",D=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), value));\\n        }\\n    }\\n    return this;\\n})\\n\",z=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",_=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",P=V,A=[[\"+\",\"add\"],[\"-\",\"sub\",\"subtract\"],[\"*\",\"mul\",\"multiply\"],[\"/\",\"div\",\"divide\"],[\"%\",\"mod\",\"modulus\"],[\"&\",\"and\"],[\"|\",\"or\"],[\"^\",\"xor\"],[\"<<\",\"leftShift\"],[\">>\",\"signPropagatingRightShift\"],[\">>>\",\"rightShift\",\"zeroFillRightShift\"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+\"S\",op:N[0]})),B=eval(x(b,{name:N[1]+\"M\",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+\"S\"]=E,w.prototype[N[F]+\"M\"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[[\"~\",\"not\"]];[\"abs\",\"acos\",\"acosh\",\"asin\",\"asinh\",\"atan\",\"atanh\",\"cbrt\",\"ceil\",\"clz32\",\"cos\",\"cosh\",\"exp\",\"expm1\",\"floor\",\"fround\",\"log\",\"log1p\",\"log10\",\"log2\",\"round\",\"sign\",\"sin\",\"sinh\",\"sqrt\",\"tan\",\"tanh\",\"trunc\"].forEach(function(t){W.push([\"Math.\"+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[[\"Math.pow\",1,\"pow\"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae=\"arg0\";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+\"M\"]=ge,w.prototype[re[F]+\"S\"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(77),r=i(78),s=i(1),l=i(26),c=i(229),m=i(230),d=i(231),h=i(232),p=i(233),k=i(234),j=i(235)},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,o,s,a,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),r=0;r<g;r++){for(e=0;e<m;e++)f[e]=p[e][r];for(e=0;e<m;e++){for(h=p[e],d=v(e,r),a=0,o=0;o<d;o++)a+=h[o]*f[o];h[r]=f[e]-=a}for(s=r,e=r+1;e<m;e++)u(f[e])>u(f[s])&&(s=e);if(s!==r){for(o=0;o<g;o++)c=p[s][o],p[s][o]=p[r][o],p[r][o]=c;l=y[s],y[s]=y[r],y[r]=l,w=-w}if(r<m&&0!==p[r][r])for(e=r+1;e<m;e++)p[e][r]/=p[r][r]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=r(7);n.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,r=0;r<e;r++)if(0===t[r][r])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error(\"Matrix must be square\");for(var e=this.pivotSign,r=t.columns,n=0;n<r;n++)e*=t[n][n];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o>s?t[o][s]:o===s?1:0;return n},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o<=s?t[o][s]:0;return n},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error(\"Invalid matrix dimensions\");if(this.isSingular())throw new Error(\"LU matrix is singular\");var r,n,o,s=t.columns,a=t.subMatrixRow(this.pivotVector,0,s-1),u=e.columns;for(o=0;o<u;o++)for(r=o+1;r<u;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o];for(o=u-1;0<=o;o--){for(n=0;n<s;n++)a[o][n]/=e[o][o];for(r=0;r<o;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o]}return a}},t.exports=n},function(t,e,r){\"use strict\";function n(t,e){if(!(this instanceof n))return new n(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var r=t.rows,o=t.columns,c=v(r,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(r<o)if(!0===e.autoTranspose){r=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn(\"Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose\");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,k,C,L,P,D,O,N,I,F,z,U=Array(v(r+1,o)),j=a(r,c,0),V=a(o,o,0),B=Array(o),H=Array(r),G=v(r-1,o),W=M(0,v(o-2,r));for(y=0,T=M(G,W);y<T;y++){if(y<G){for(U[y]=0,m=y;m<r;m++)U[y]=s(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<r;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<r;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<r;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<r;m++)j[m][y]=f[m][y];if(y<W){for(B[y]=0,m=y+1;m<o;m++)B[y]=s(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<r&&0!==B[y]){for(m=y+1;m<r;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<r;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<r;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,r+1),G<o&&(U[G]=f[G][G]),r<w&&(U[w-1]=0),W+1<w&&(B[W]=f[W][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<r;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<r;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<r;m++)j[m][g]+=x*j[m][y]}for(m=y;m<r;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<r;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<W&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var q=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(k=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/k,O=B[y]/k,I=(C=U[w-1]/k)*(P=B[w-2]/k)*(C*P),F=0,(0!=(N=(((L=U[w-2]/k)+C)*(L-C)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+C)*(D-C)+F,z=D*O,g=y;g<w-1;g++){if(S=_/(x=s(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=s(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<r-1)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=q;m++)V[m][y]=-V[m][y];for(;y<q&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<r-1)for(m=0;m<r;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=r,this.n=o,this.s=U,this.U=j,this.V=V}var i=r(7),o=r(41),s=o.hypotenuse,a=o.getFilled2DArray;n.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,r=this.s,n=0,i=r.length;n<i;n++)r[n]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,r=this.threshold,n=this.s.length,o=i.Matrix.zeros(n,n);for(e=0;e<n;e++)o[e][e]=u(this.s[e])<=r?0:1/this.s[e];var s,a,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(s=0;s<p;s++){for(c=0,a=0;a<n;a++)c+=f[e][a]*l[s][a];m[e][s]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,r=this.V,n=this.threshold,o=r.length,s=r[0].length,a=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<s;e++)a[t][e]=u(this.s[e])>n?r[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=a[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=n},function(t,e,r){\"use strict\";var n=r(40);t.exports={transpose:function(t){return\"number\"==typeof t?t:t.clone().transpose()},add:function(t,e){return\"number\"==typeof t&&\"number\"==typeof e?t+e:\"number\"==typeof t?this.add(e,t):t.clone().add(e)},subtract:function(t,e){return\"number\"==typeof t&&\"number\"==typeof e?t-e:\"number\"==typeof t?this.subtract(e,t):t.clone().sub(e)},multiply:function(t,e){if(\"number\"==typeof t&&\"number\"==typeof e)return t*e;if(\"number\"==typeof t)return this.multiply(e,t);var r=t.clone();return\"number\"==typeof e?r.mul(e):r=r.mmul(e),1==r.rows&&1==r.columns?r[0][0]:r},dotMultiply:function(t,e){return t.clone().mul(e)},dotDivide:function(t,e){return t.clone().div(e)},diag:function(t){var e,r,i=null,o=t.rows,s=t.columns;if(void 0===s&&\"object\"==typeof t)if(t[0]&&t[0].length)for(r=v(o=t.length,s=t[0].length),i=n.zeros(s,s),e=0;e<s;e++)i[e][e]=t[e][e];else for(i=n.zeros(s=t.length,s),e=0;e<s;e++)i[e][e]=t[e];if(1==o)for(i=n.zeros(s,s),e=0;e<s;e++)i[e][e]=t[0][e];else if(0<o&&0<s)for(r=v(o,s),i=Array(r),e=0;e<r;e++)i[e]=t[e][e];return i},min:function(t,e){if(\"number\"==typeof t&&\"number\"==typeof e)return v(t,e);for(var r=t.rows,i=t.columns,o=new n(r,i),s=0;s<r;s++)for(var a=0;a<i;a++)o[s][a]=t[s][a]<e[s][a]?t[s][a]:e[s][a];return o},max:function(t,e){if(\"number\"==typeof t&&\"number\"==typeof e)return M(t,e);for(var r=t.rows,i=t.columns,o=new n(r,i),s=0;s<r;s++)for(var a=0;a<i;a++)o[s][a]=t[s][a]>e[s][a]?t[s][a]:e[s][a];return o},solve:function(t,e){return t.solve(e)},inv:function(t){return\"number\"==typeof t?1/t:t.inverse()},sqrt:function(t){if(\"number\"==typeof t)return R(t);for(var e=t.rows,r=t.columns,i=new n(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)i[o][s]=R(t[o][s]);return i},exp:function(t){if(\"number\"==typeof t)return R(t);for(var e=t.rows,r=t.columns,i=new n(e,r),s=0;s<e;s++)for(var a=0;a<r;a++)i[s][a]=o(t[s][a]);return i},dotPow:function(t,e){if(\"number\"==typeof t)return c(t,e);for(var r=t.rows,i=t.columns,o=new n(r,i),s=0;s<r;s++)for(var a=0;a<i;a++)o[s][a]=c(t[s][a],e);return o},abs:function(t){if(\"number\"==typeof t)return u(t);for(var e=t.rows,r=t.columns,i=new n(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)i[o][s]=u(t[o][s]);return i},matrix:function(t,e){return new n(t,e)},ones:function(t,e){return n.ones(t,e)},zeros:function(t,e){return n.zeros(t,e)},random:function(t,e){return n.rand(t,e)},eye:function(t,e){return n.eye(t,e)}}},function(e,t,i){\"use strict\";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError(\"Matrices dimensions must be equal\")}function n(t,e){return t-e}function x(t,e){for(var r in e)t=t.replace(new RegExp(\"%\"+r+\"%\",\"g\"),e[r]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError(\"Data length does not match given dimensions\");for(var n=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r[i*e+o]);return n}static rowVector(t){for(var e=new this(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){for(var e=new this(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,r){void 0===r&&(r=Math.random);for(var n=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r());return n}static randInt(t,e,r,n){void 0===r&&(r=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var s,a=0;a<e;a++)s=g(n()*r),i.set(o,a,s);return i}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);for(var n=v(t,e),i=this.zeros(t,e),o=0;o<n;o++)i.set(o,o,r);return i}static diag(t,e,r){var n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);for(var i=v(n,e,r),o=this.zeros(e,r),s=0;s<i;s++)o.set(s,s,t[s]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,v(t.get(o,s),e.get(o,s)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,M(t.get(o,s),e.get(o,s)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&\"Matrix\"===t.klass}get size(){return this.rows*this.columns}apply(t){if(\"function\"!=typeof t)throw new TypeError(\"callback must be a function\");for(var e=this.rows,r=this.columns,n=0;n<e;n++)for(var i=0;i<r;i++)t.call(this,n,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t[e*this.columns+r]=this.get(e,r);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var r=0;r<this.columns;r++)t[e][r]=this.get(e,r)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error(\"set method is unimplemented\")}get(){throw new Error(\"get method is unimplemented\")}repeat(t,e){t=t||1,e=e||1;for(var r=new this.constructor[Symbol.species](this.rows*t,this.columns*e),n=0;n<t;n++)for(var i=0;i<e;i++)r.setSubMatrix(this,this.rows*n,this.columns*i);return r}fill(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),r=0;r<this.columns;r++)e[r]=this.get(t,r);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var r,n=0;n<this.columns;n++)r=this.get(t,n),this.set(t,n,this.get(e,n)),this.set(e,n,r);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),r=0;r<this.rows;r++)e[r]=this.get(r,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var r,n=0;n<this.rows;n++)r=this.get(n,t),this.set(n,t,this.get(n,e)),this.set(n,e,r);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){for(var t=v(this.rows,this.columns),e=Array(t),r=0;r<t;r++)e[r]=this.get(r,r);return e}sum(t){return\"row\"===t?l.sumByRow(this):\"column\"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t*=this.get(e,r);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError(\"vectors do not have the same size\");for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[n];return r}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn(\"Number of columns of left matrix are not equal to number of rows of right matrix.\");for(var e=this.rows,r=this.columns,n=t.columns,i=new this.constructor[Symbol.species](e,n),o=Array(r),s=0;s<n;s++){for(var a=0;a<r;a++)o[a]=t.get(a,s);for(var u,c=0;c<e;c++){for(u=0,a=0;a<r;a++)u+=this.get(c,a)*o[a];i.set(c,s,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(r+u)*(n+c),h=(s+u)*n,f=r*(o-c),d=u*(a-n),p=(r+i)*c;return e.set(0,0,l+d-p+(i-u)*(a+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(s-r)*(n+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(r-o)*(-f+m),b=(-r+o+s)*(h-f+m),_=(o+s)*(-h+f),M=r*h,S=(-r+u+c)*(h-d+g),E=(-r+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),R=(i-l)*(m-y),k=i*v,C=(c+l)*(-v+y),L=(-i+s+a)*(g+v-w),P=(i-a)*(g-w),D=(s+a)*(-v+w);return e.set(0,0,M+k+n*p),e.set(0,1,(r+n+i-o-s-c-l)*m+b+_+M+A+k+C),e.set(0,2,M+S+T+(r+n+i-s-a-u-c)*g+k+L+D),e.set(1,0,x+s*(-h+f+p-m-g-v+w)+b+M+k+L+P),e.set(1,1,x+b+_+M+a*y),e.set(1,2,k+L+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+R+k),e.set(2,1,A+R+k+C+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,r){return t.rows===e&&t.columns===r?t:w.zeros(e,r).setSubMatrix(t,0,0)}var r=this.clone(),n=r.rows,i=r.columns,o=t.rows,s=t.columns;i!==o&&console.warn(`Multiplying ${n} x ${i} and ${o} x ${s} matrix: dimensions do not match.`);var a=M(n,o),u=M(i,s);return function t(r,n,i,o){if(512>=i||512>=o)return r.mmul(n);1==i%2&&1==o%2?(r=e(r,i+1,o+1),n=e(n,i+1,o+1)):1==i%2?(r=e(r,i+1,o),n=e(n,i+1,o)):1==o%2&&(r=e(r,i,o+1),n=e(n,i,o+1));var s=parseInt(r.rows/2),a=parseInt(r.columns/2),u=r.subMatrix(0,s-1,0,a-1),c=n.subMatrix(0,s-1,0,a-1),l=r.subMatrix(0,s-1,a,r.columns-1),h=n.subMatrix(0,s-1,a,n.columns-1),f=r.subMatrix(s,r.rows-1,0,a-1),d=n.subMatrix(s,n.rows-1,0,a-1),p=r.subMatrix(s,r.rows-1,a,r.columns-1),m=n.subMatrix(s,n.rows-1,a,n.columns-1),g=t(w.add(u,p),w.add(c,m),s,a),v=t(w.add(f,p),c,s,a),y=t(u,w.sub(h,m),s,a),x=t(p,w.sub(d,c),s,a),b=t(w.add(u,l),m,s,a),_=t(w.sub(f,u),w.add(c,h),s,a),M=t(w.sub(l,p),w.add(d,m),s,a),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var R=w.zeros(2*S.rows,2*S.columns);return(R=(R=(R=(R=R.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(r=e(r,a,u),t=e(t,a,u),a,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)r=s.scale(this.getRow(i),{min:t,max:e}),n.setRow(i,r);return n}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)r=s.scale(this.getColumn(i),{min:t,max:e}),n.setColumn(i,r);return n}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*n,r*i),s=0;s<e;s++)for(var a=0;a<r;a++)for(var u=0;u<n;u++)for(var c=0;c<i;c++)o[n*s+u][i*a+c]=this.get(s,a)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){l.checkRange(this,t,e,r,n);for(var i=new this.constructor[Symbol.species](e-t+1,n-r+1),o=t;o<=e;o++)for(var s=r;s<=n;s++)i[o-t][s-r]=this.get(o,s);return i}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||0>e||e>=this.columns||0>r||r>=this.columns)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](t.length,r-e+1),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError(\"Row index out of range: \"+t[i]);n.set(i,o-e,this.get(t[i],o))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||0>e||e>=this.rows||0>r||r>=this.rows)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](r-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError(\"Column index out of range: \"+t[i]);n.set(o-e,i,this.get(o,t[i]))}return n}setSubMatrix(t,e,r){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,r,r+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[e+n][r+i]=t.get(n,i);return this}selection(t,e){for(var r,n=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<n.row.length;o++){r=n.row[o];for(var s=0;s<n.column.length;s++)i[o][s]=this.get(r,n.column[s])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,r,n){return new d(this,t,e,r,n)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,r,n,i,s;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),r=this.get(1,0),t*this.get(1,1)-e*r):3===this.columns?(n=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),s=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),r=this.get(0,2),t*n.det()-e*i.det()+r*s.det()):new o(this).determinant;throw Error(\"Determinant can only be calculated for a square matrix.\")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass=\"Matrix\",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",y=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% value);\\n        }\\n    }\\n    return this;\\n})\\n\",b=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\\n        }\\n    }\\n    return this;\\n})\\n\",R=\"\\n(function %name%(matrix, value) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(value);\\n})\\n\",I=\"\\n(function %name%() {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",S=\"\\n(function %name%(matrix) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%();\\n})\\n\",C=\"\\n(function %name%(%args%) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), %args%));\\n        }\\n    }\\n    return this;\\n})\\n\",V=\"\\n(function %name%(matrix, %args%) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(%args%);\\n})\\n\",D=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), value));\\n        }\\n    }\\n    return this;\\n})\\n\",z=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",_=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",P=V,A=[[\"+\",\"add\"],[\"-\",\"sub\",\"subtract\"],[\"*\",\"mul\",\"multiply\"],[\"/\",\"div\",\"divide\"],[\"%\",\"mod\",\"modulus\"],[\"&\",\"and\"],[\"|\",\"or\"],[\"^\",\"xor\"],[\"<<\",\"leftShift\"],[\">>\",\"signPropagatingRightShift\"],[\">>>\",\"rightShift\",\"zeroFillRightShift\"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+\"S\",op:N[0]})),B=eval(x(b,{name:N[1]+\"M\",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+\"S\"]=E,w.prototype[N[F]+\"M\"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[[\"~\",\"not\"]];[\"abs\",\"acos\",\"acosh\",\"asin\",\"asinh\",\"atan\",\"atanh\",\"cbrt\",\"ceil\",\"clz32\",\"cos\",\"cosh\",\"exp\",\"expm1\",\"floor\",\"fround\",\"log\",\"log1p\",\"log10\",\"log2\",\"round\",\"sign\",\"sin\",\"sinh\",\"sqrt\",\"tan\",\"tanh\",\"trunc\"].forEach(function(t){W.push([\"Math.\"+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[[\"Math.pow\",1,\"pow\"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae=\"arg0\";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+\"M\"]=ge,w.prototype[re[F]+\"S\"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(81),r=i(82),s=i(1),l=i(27),c=i(242),m=i(243),d=i(244),h=i(245),p=i(246),k=i(247),j=i(248)},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,o,s,a,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),r=0;r<g;r++){for(e=0;e<m;e++)f[e]=p[e][r];for(e=0;e<m;e++){for(h=p[e],d=v(e,r),a=0,o=0;o<d;o++)a+=h[o]*f[o];h[r]=f[e]-=a}for(s=r,e=r+1;e<m;e++)u(f[e])>u(f[s])&&(s=e);if(s!==r){for(o=0;o<g;o++)c=p[s][o],p[s][o]=p[r][o],p[r][o]=c;l=y[s],y[s]=y[r],y[r]=l,w=-w}if(r<m&&0!==p[r][r])for(e=r+1;e<m;e++)p[e][r]/=p[r][r]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=r(8);n.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,r=0;r<e;r++)if(0===t[r][r])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error(\"Matrix must be square\");for(var e=this.pivotSign,r=t.columns,n=0;n<r;n++)e*=t[n][n];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o>s?t[o][s]:o===s?1:0;return n},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o<=s?t[o][s]:0;return n},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error(\"Invalid matrix dimensions\");if(this.isSingular())throw new Error(\"LU matrix is singular\");var r,n,o,s=t.columns,a=t.subMatrixRow(this.pivotVector,0,s-1),u=e.columns;for(o=0;o<u;o++)for(r=o+1;r<u;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o];for(o=u-1;0<=o;o--){for(n=0;n<s;n++)a[o][n]/=e[o][o];for(r=0;r<o;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o]}return a}},t.exports=n},function(t,e,r){\"use strict\";function n(t,e){if(!(this instanceof n))return new n(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var r=t.rows,o=t.columns,c=v(r,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(r<o)if(!0===e.autoTranspose){r=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn(\"Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose\");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,k,C,L,P,D,O,N,I,F,z,U=Array(v(r+1,o)),j=a(r,c,0),V=a(o,o,0),B=Array(o),H=Array(r),G=v(r-1,o),W=M(0,v(o-2,r));for(y=0,T=M(G,W);y<T;y++){if(y<G){for(U[y]=0,m=y;m<r;m++)U[y]=s(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<r;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<r;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<r;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<r;m++)j[m][y]=f[m][y];if(y<W){for(B[y]=0,m=y+1;m<o;m++)B[y]=s(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<r&&0!==B[y]){for(m=y+1;m<r;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<r;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<r;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,r+1),G<o&&(U[G]=f[G][G]),r<w&&(U[w-1]=0),W+1<w&&(B[W]=f[W][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<r;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<r;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<r;m++)j[m][g]+=x*j[m][y]}for(m=y;m<r;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<r;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<W&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var q=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(k=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/k,O=B[y]/k,I=(C=U[w-1]/k)*(P=B[w-2]/k)*(C*P),F=0,(0!=(N=(((L=U[w-2]/k)+C)*(L-C)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+C)*(D-C)+F,z=D*O,g=y;g<w-1;g++){if(S=_/(x=s(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=s(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<r-1)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=q;m++)V[m][y]=-V[m][y];for(;y<q&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<r-1)for(m=0;m<r;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=r,this.n=o,this.s=U,this.U=j,this.V=V}var i=r(8),o=r(42),s=o.hypotenuse,a=o.getFilled2DArray;n.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,r=this.s,n=0,i=r.length;n<i;n++)r[n]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,r=this.threshold,n=this.s.length,o=i.Matrix.zeros(n,n);for(e=0;e<n;e++)o[e][e]=u(this.s[e])<=r?0:1/this.s[e];var s,a,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(s=0;s<p;s++){for(c=0,a=0;a<n;a++)c+=f[e][a]*l[s][a];m[e][s]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,r=this.V,n=this.threshold,o=r.length,s=r[0].length,a=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<s;e++)a[t][e]=u(this.s[e])>n?r[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=a[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=n},function(e,t,i){\"use strict\";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError(\"Matrices dimensions must be equal\")}function n(t,e){return t-e}function x(t,e){for(var r in e)t=t.replace(new RegExp(\"%\"+r+\"%\",\"g\"),e[r]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError(\"Data length does not match given dimensions\");for(var n=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r[i*e+o]);return n}static rowVector(t){for(var e=new this(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){for(var e=new this(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,r){void 0===r&&(r=Math.random);for(var n=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r());return n}static randInt(t,e,r,n){void 0===r&&(r=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var s,a=0;a<e;a++)s=g(n()*r),i.set(o,a,s);return i}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);for(var n=v(t,e),i=this.zeros(t,e),o=0;o<n;o++)i.set(o,o,r);return i}static diag(t,e,r){var n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);for(var i=v(n,e,r),o=this.zeros(e,r),s=0;s<i;s++)o.set(s,s,t[s]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,v(t.get(o,s),e.get(o,s)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,M(t.get(o,s),e.get(o,s)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&\"Matrix\"===t.klass}get size(){return this.rows*this.columns}apply(t){if(\"function\"!=typeof t)throw new TypeError(\"callback must be a function\");for(var e=this.rows,r=this.columns,n=0;n<e;n++)for(var i=0;i<r;i++)t.call(this,n,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t[e*this.columns+r]=this.get(e,r);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var r=0;r<this.columns;r++)t[e][r]=this.get(e,r)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error(\"set method is unimplemented\")}get(){throw new Error(\"get method is unimplemented\")}repeat(t,e){t=t||1,e=e||1;for(var r=new this.constructor[Symbol.species](this.rows*t,this.columns*e),n=0;n<t;n++)for(var i=0;i<e;i++)r.setSubMatrix(this,this.rows*n,this.columns*i);return r}fill(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),r=0;r<this.columns;r++)e[r]=this.get(t,r);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var r,n=0;n<this.columns;n++)r=this.get(t,n),this.set(t,n,this.get(e,n)),this.set(e,n,r);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),r=0;r<this.rows;r++)e[r]=this.get(r,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var r,n=0;n<this.rows;n++)r=this.get(n,t),this.set(n,t,this.get(n,e)),this.set(n,e,r);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){for(var t=v(this.rows,this.columns),e=Array(t),r=0;r<t;r++)e[r]=this.get(r,r);return e}sum(t){return\"row\"===t?l.sumByRow(this):\"column\"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t*=this.get(e,r);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError(\"vectors do not have the same size\");for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[n];return r}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn(\"Number of columns of left matrix are not equal to number of rows of right matrix.\");for(var e=this.rows,r=this.columns,n=t.columns,i=new this.constructor[Symbol.species](e,n),o=Array(r),s=0;s<n;s++){for(var a=0;a<r;a++)o[a]=t.get(a,s);for(var u,c=0;c<e;c++){for(u=0,a=0;a<r;a++)u+=this.get(c,a)*o[a];i.set(c,s,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(r+u)*(n+c),h=(s+u)*n,f=r*(o-c),d=u*(a-n),p=(r+i)*c;return e.set(0,0,l+d-p+(i-u)*(a+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(s-r)*(n+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(r-o)*(-f+m),b=(-r+o+s)*(h-f+m),_=(o+s)*(-h+f),M=r*h,S=(-r+u+c)*(h-d+g),E=(-r+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),R=(i-l)*(m-y),k=i*v,C=(c+l)*(-v+y),L=(-i+s+a)*(g+v-w),P=(i-a)*(g-w),D=(s+a)*(-v+w);return e.set(0,0,M+k+n*p),e.set(0,1,(r+n+i-o-s-c-l)*m+b+_+M+A+k+C),e.set(0,2,M+S+T+(r+n+i-s-a-u-c)*g+k+L+D),e.set(1,0,x+s*(-h+f+p-m-g-v+w)+b+M+k+L+P),e.set(1,1,x+b+_+M+a*y),e.set(1,2,k+L+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+R+k),e.set(2,1,A+R+k+C+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,r){return t.rows===e&&t.columns===r?t:w.zeros(e,r).setSubMatrix(t,0,0)}var r=this.clone(),n=r.rows,i=r.columns,o=t.rows,s=t.columns;i!==o&&console.warn(`Multiplying ${n} x ${i} and ${o} x ${s} matrix: dimensions do not match.`);var a=M(n,o),u=M(i,s);return function t(r,n,i,o){if(512>=i||512>=o)return r.mmul(n);1==i%2&&1==o%2?(r=e(r,i+1,o+1),n=e(n,i+1,o+1)):1==i%2?(r=e(r,i+1,o),n=e(n,i+1,o)):1==o%2&&(r=e(r,i,o+1),n=e(n,i,o+1));var s=parseInt(r.rows/2),a=parseInt(r.columns/2),u=r.subMatrix(0,s-1,0,a-1),c=n.subMatrix(0,s-1,0,a-1),l=r.subMatrix(0,s-1,a,r.columns-1),h=n.subMatrix(0,s-1,a,n.columns-1),f=r.subMatrix(s,r.rows-1,0,a-1),d=n.subMatrix(s,n.rows-1,0,a-1),p=r.subMatrix(s,r.rows-1,a,r.columns-1),m=n.subMatrix(s,n.rows-1,a,n.columns-1),g=t(w.add(u,p),w.add(c,m),s,a),v=t(w.add(f,p),c,s,a),y=t(u,w.sub(h,m),s,a),x=t(p,w.sub(d,c),s,a),b=t(w.add(u,l),m,s,a),_=t(w.sub(f,u),w.add(c,h),s,a),M=t(w.sub(l,p),w.add(d,m),s,a),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var R=w.zeros(2*S.rows,2*S.columns);return(R=(R=(R=(R=R.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(r=e(r,a,u),t=e(t,a,u),a,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)r=s.scale(this.getRow(i),{min:t,max:e}),n.setRow(i,r);return n}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)r=s.scale(this.getColumn(i),{min:t,max:e}),n.setColumn(i,r);return n}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*n,r*i),s=0;s<e;s++)for(var a=0;a<r;a++)for(var u=0;u<n;u++)for(var c=0;c<i;c++)o[n*s+u][i*a+c]=this.get(s,a)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){l.checkRange(this,t,e,r,n);for(var i=new this.constructor[Symbol.species](e-t+1,n-r+1),o=t;o<=e;o++)for(var s=r;s<=n;s++)i[o-t][s-r]=this.get(o,s);return i}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||0>e||e>=this.columns||0>r||r>=this.columns)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](t.length,r-e+1),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError(\"Row index out of range: \"+t[i]);n.set(i,o-e,this.get(t[i],o))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||0>e||e>=this.rows||0>r||r>=this.rows)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](r-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError(\"Column index out of range: \"+t[i]);n.set(o-e,i,this.get(o,t[i]))}return n}setSubMatrix(t,e,r){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,r,r+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[e+n][r+i]=t.get(n,i);return this}selection(t,e){for(var r,n=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<n.row.length;o++){r=n.row[o];for(var s=0;s<n.column.length;s++)i[o][s]=this.get(r,n.column[s])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,r,n){return new d(this,t,e,r,n)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,r,n,i,s;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),r=this.get(1,0),t*this.get(1,1)-e*r):3===this.columns?(n=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),s=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),r=this.get(0,2),t*n.det()-e*i.det()+r*s.det()):new o(this).determinant;throw Error(\"Determinant can only be calculated for a square matrix.\")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass=\"Matrix\",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",y=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% value);\\n        }\\n    }\\n    return this;\\n})\\n\",b=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\\n        }\\n    }\\n    return this;\\n})\\n\",R=\"\\n(function %name%(matrix, value) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(value);\\n})\\n\",I=\"\\n(function %name%() {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",S=\"\\n(function %name%(matrix) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%();\\n})\\n\",C=\"\\n(function %name%(%args%) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), %args%));\\n        }\\n    }\\n    return this;\\n})\\n\",V=\"\\n(function %name%(matrix, %args%) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(%args%);\\n})\\n\",D=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), value));\\n        }\\n    }\\n    return this;\\n})\\n\",z=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",_=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",P=V,A=[[\"+\",\"add\"],[\"-\",\"sub\",\"subtract\"],[\"*\",\"mul\",\"multiply\"],[\"/\",\"div\",\"divide\"],[\"%\",\"mod\",\"modulus\"],[\"&\",\"and\"],[\"|\",\"or\"],[\"^\",\"xor\"],[\"<<\",\"leftShift\"],[\">>\",\"signPropagatingRightShift\"],[\">>>\",\"rightShift\",\"zeroFillRightShift\"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+\"S\",op:N[0]})),B=eval(x(b,{name:N[1]+\"M\",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+\"S\"]=E,w.prototype[N[F]+\"M\"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[[\"~\",\"not\"]];[\"abs\",\"acos\",\"acosh\",\"asin\",\"asinh\",\"atan\",\"atanh\",\"cbrt\",\"ceil\",\"clz32\",\"cos\",\"cosh\",\"exp\",\"expm1\",\"floor\",\"fround\",\"log\",\"log1p\",\"log10\",\"log2\",\"round\",\"sign\",\"sin\",\"sinh\",\"sqrt\",\"tan\",\"tanh\",\"trunc\"].forEach(function(t){W.push([\"Math.\"+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[[\"Math.pow\",1,\"pow\"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae=\"arg0\";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+\"M\"]=ge,w.prototype[re[F]+\"S\"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(84),r=i(85),s=i(1),l=i(28),c=i(258),m=i(259),d=i(260),h=i(261),p=i(262),k=i(263),j=i(264)},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,o,s,a,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),r=0;r<g;r++){for(e=0;e<m;e++)f[e]=p[e][r];for(e=0;e<m;e++){for(h=p[e],d=v(e,r),a=0,o=0;o<d;o++)a+=h[o]*f[o];h[r]=f[e]-=a}for(s=r,e=r+1;e<m;e++)u(f[e])>u(f[s])&&(s=e);if(s!==r){for(o=0;o<g;o++)c=p[s][o],p[s][o]=p[r][o],p[r][o]=c;l=y[s],y[s]=y[r],y[r]=l,w=-w}if(r<m&&0!==p[r][r])for(e=r+1;e<m;e++)p[e][r]/=p[r][r]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=r(9);n.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,r=0;r<e;r++)if(0===t[r][r])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error(\"Matrix must be square\");for(var e=this.pivotSign,r=t.columns,n=0;n<r;n++)e*=t[n][n];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o>s?t[o][s]:o===s?1:0;return n},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o<=s?t[o][s]:0;return n},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error(\"Invalid matrix dimensions\");if(this.isSingular())throw new Error(\"LU matrix is singular\");var r,n,o,s=t.columns,a=t.subMatrixRow(this.pivotVector,0,s-1),u=e.columns;for(o=0;o<u;o++)for(r=o+1;r<u;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o];for(o=u-1;0<=o;o--){for(n=0;n<s;n++)a[o][n]/=e[o][o];for(r=0;r<o;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o]}return a}},t.exports=n},function(t,e,r){\"use strict\";function n(t,e){if(!(this instanceof n))return new n(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var r=t.rows,o=t.columns,c=v(r,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(r<o)if(!0===e.autoTranspose){r=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn(\"Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose\");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,k,C,L,P,D,O,N,I,F,z,U=Array(v(r+1,o)),j=a(r,c,0),V=a(o,o,0),B=Array(o),H=Array(r),G=v(r-1,o),W=M(0,v(o-2,r));for(y=0,T=M(G,W);y<T;y++){if(y<G){for(U[y]=0,m=y;m<r;m++)U[y]=s(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<r;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<r;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<r;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<r;m++)j[m][y]=f[m][y];if(y<W){for(B[y]=0,m=y+1;m<o;m++)B[y]=s(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<r&&0!==B[y]){for(m=y+1;m<r;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<r;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<r;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,r+1),G<o&&(U[G]=f[G][G]),r<w&&(U[w-1]=0),W+1<w&&(B[W]=f[W][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<r;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<r;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<r;m++)j[m][g]+=x*j[m][y]}for(m=y;m<r;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<r;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<W&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var q=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(k=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/k,O=B[y]/k,I=(C=U[w-1]/k)*(P=B[w-2]/k)*(C*P),F=0,(0!=(N=(((L=U[w-2]/k)+C)*(L-C)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+C)*(D-C)+F,z=D*O,g=y;g<w-1;g++){if(S=_/(x=s(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=s(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<r-1)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=q;m++)V[m][y]=-V[m][y];for(;y<q&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<r-1)for(m=0;m<r;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=r,this.n=o,this.s=U,this.U=j,this.V=V}var i=r(9),o=r(43),s=o.hypotenuse,a=o.getFilled2DArray;n.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,r=this.s,n=0,i=r.length;n<i;n++)r[n]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,r=this.threshold,n=this.s.length,o=i.Matrix.zeros(n,n);for(e=0;e<n;e++)o[e][e]=u(this.s[e])<=r?0:1/this.s[e];var s,a,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(s=0;s<p;s++){for(c=0,a=0;a<n;a++)c+=f[e][a]*l[s][a];m[e][s]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,r=this.V,n=this.threshold,o=r.length,s=r[0].length,a=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<s;e++)a[t][e]=u(this.s[e])>n?r[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=a[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=n},function(t){\"use strict\";class e{constructor(t,e){if(t.length!==t[0].length)throw new Error(\"Confusion matrix must be square\");if(e.length!==t.length)throw new Error(\"Confusion matrix and labels should have the same length\");this.labels=e,this.matrix=t}static fromLabels(t,r,n={}){if(r.length!==t.length)throw new Error(\"predicted and actual must have the same length\");var i;i=n.labels?new Set(n.labels):new Set([...t,...r]),i=Array.from(i),n.sort&&i.sort(n.sort);for(var o=Array.from({length:i.length}),s=0;s<o.length;s++)o[s]=Array(o.length),o[s].fill(0);for(var a=0;a<r.length;a++){var u=i.indexOf(t[a]),c=i.indexOf(r[a]);0<=u&&0<=c&&o[u][c]++}return new e(o,i)}getMatrix(){return this.matrix}getLabels(){return this.labels}getTotalCount(){for(var t=0,e=0;e<this.matrix.length;e++)for(var r=0;r<this.matrix.length;r++)t+=this.matrix[e][r];return t}getTrueCount(){for(var t=0,e=0;e<this.matrix.length;e++)t+=this.matrix[e][e];return t}getFalseCount(){return this.getTotalCount()-this.getTrueCount()}getTruePositiveCount(t){var e=this.getIndex(t);return this.matrix[e][e]}getTrueNegativeCount(t){for(var e=this.getIndex(t),r=0,n=0;n<this.matrix.length;n++)for(var i=0;i<this.matrix.length;i++)n!==e&&i!==e&&(r+=this.matrix[n][i]);return r}getFalsePositiveCount(t){for(var e=this.getIndex(t),r=0,n=0;n<this.matrix.length;n++)n!==e&&(r+=this.matrix[n][e]);return r}getFalseNegativeCount(t){for(var e=this.getIndex(t),r=0,n=0;n<this.matrix.length;n++)n!==e&&(r+=this.matrix[e][n]);return r}getPositiveCount(t){return this.getTruePositiveCount(t)+this.getFalseNegativeCount(t)}getNegativeCount(t){return this.getTrueNegativeCount(t)+this.getFalsePositiveCount(t)}getIndex(t){var e=this.labels.indexOf(t);if(-1===e)throw new Error(\"The label does not exist\");return e}getTruePositiveRate(t){return this.getTruePositiveCount(t)/this.getPositiveCount(t)}getTrueNegativeRate(t){return this.getTrueNegativeCount(t)/this.getNegativeCount(t)}getPositivePredictiveValue(t){var e=this.getTruePositiveCount(t);return e/(e+this.getFalsePositiveCount(t))}getNegativePredictiveValue(t){var e=this.getTrueNegativeCount(t);return e/(e+this.getFalseNegativeCount(t))}getFalseNegativeRate(t){return 1-this.getTruePositiveRate(t)}getFalsePositiveRate(t){return 1-this.getTrueNegativeRate(t)}getFalseDiscoveryRate(t){var e=this.getFalsePositiveCount(t);return e/(e+this.getTruePositiveCount(t))}getFalseOmissionRate(t){var e=this.getFalseNegativeCount(t);return e/(e+this.getTruePositiveCount(t))}getF1Score(t){var e=this.getTruePositiveCount(t);return 2*e/(2*e+this.getFalsePositiveCount(t)+this.getFalseNegativeCount(t))}getMatthewsCorrelationCoefficient(t){var e=this.getTruePositiveCount(t),r=this.getTrueNegativeCount(t),n=this.getFalsePositiveCount(t),i=this.getFalseNegativeCount(t);return(e*r-n*i)/R((e+n)*(e+i)*(r+n)*(r+i))}getInformedness(t){return this.getTruePositiveRate(t)+this.getTrueNegativeRate(t)-1}getMarkedness(t){return this.getPositivePredictiveValue(t)+this.getNegativePredictiveValue(t)-1}getConfusionTable(t){return[[this.getTruePositiveCount(t),this.getFalseNegativeCount(t)],[this.getFalsePositiveCount(t),this.getTrueNegativeCount(t)]]}getAccuracy(){for(var t=0,e=0,r=0;r<this.matrix.length;r++)for(var n=0;n<this.matrix.length;n++)r===n?t+=this.matrix[r][n]:e+=this.matrix[r][n];return t/(t+e)}getCount(t,e){var r=this.getIndex(t),n=this.getIndex(e);return this.matrix[r][n]}get accuracy(){return this.getAccuracy()}get total(){return this.getTotalCount()}}t.exports=e},function(t,e,n){\"use strict\";function i(t,e){t&&(this.means=e.means,this.calculateProbabilities=e.calculateProbabilities)}function s(t,e,r){for(var n,i=0,s=-1,u=0;u<r.length;++u){n=r[u][0];for(var c=1;c<r[0][1].length+1;++c)n+=a(t[c-1],e[u][c-1],r[u][c][0],r[u][c][1]);(n=o(n))>i&&(i=n,s=u)}return s}function a(t,e,n,i){return r(n*o((t-=e)*t/i))}function u(t,e){for(var r=t.columns,n=0,i=Array(100),o=0;o<e.length;o++)void 0===i[e[o]]&&(i[e[o]]=0,n++),i[e[o]]++;var s=Array(n),a=Array(n);for(o=0;o<n;++o)s[o]=new c(i[o],r),a[o]=0;for(o=0;o<t.rows;++o)s[e[o]].setRow(a[e[o]],t.getRow(o)),a[e[o]]++;return s}var c=n(276),l=n(2);t.exports.NaiveBayes=i,t.exports.separateClasses=u,i.prototype.train=function(t,e){var n=R(2*Math.PI);if((t=c.isMatrix(t)?t.clone():new c(t)).rows!==e.length)throw new RangeError(\"the size of the training set and the training labels must be the same.\");var i=u(t,e),o=Array(i.length);this.means=Array(i.length);for(var s=0;s<i.length;++s){var a=l.matrix.mean(i[s]),h=l.matrix.standardDeviation(i[s],a),f=r(i[s].rows/t.rows);o[s]=Array(a.length+1),o[s][0]=f;for(var d,p=1;p<a.length+1;++p)o[s][p]=[1/(n*(d=h[p-1])),-2*d*d];this.means[s]=a}this.calculateProbabilities=o},i.prototype.predict=function(t){if(t[0].length===this.calculateProbabilities[0].length)throw new RangeError(\"the dataset must have the same features as the training set\");for(var e=Array(t.length),r=0;r<e.length;++r)e[r]=s(t[r],this.means,this.calculateProbabilities);return e},i.prototype.export=function(){return{modelName:\"NaiveBayes\",means:this.means,calculateProbabilities:this.calculateProbabilities}},i.load=function(t){if(\"NaiveBayes\"!==t.modelName)throw new RangeError(\"The given model is invalid!\");return new i(!0,t)}},function(e,t,i){\"use strict\";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError(\"Matrices dimensions must be equal\")}function n(t,e){return t-e}function x(t,e){for(var r in e)t=t.replace(new RegExp(\"%\"+r+\"%\",\"g\"),e[r]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError(\"Data length does not match given dimensions\");for(var n=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r[i*e+o]);return n}static rowVector(t){for(var e=new this(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){for(var e=new this(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,r){void 0===r&&(r=Math.random);for(var n=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r());return n}static randInt(t,e,r,n){void 0===r&&(r=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var s,a=0;a<e;a++)s=g(n()*r),i.set(o,a,s);return i}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);for(var n=v(t,e),i=this.zeros(t,e),o=0;o<n;o++)i.set(o,o,r);return i}static diag(t,e,r){var n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);for(var i=v(n,e,r),o=this.zeros(e,r),s=0;s<i;s++)o.set(s,s,t[s]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,v(t.get(o,s),e.get(o,s)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,M(t.get(o,s),e.get(o,s)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&\"Matrix\"===t.klass}get size(){return this.rows*this.columns}apply(t){if(\"function\"!=typeof t)throw new TypeError(\"callback must be a function\");for(var e=this.rows,r=this.columns,n=0;n<e;n++)for(var i=0;i<r;i++)t.call(this,n,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t[e*this.columns+r]=this.get(e,r);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var r=0;r<this.columns;r++)t[e][r]=this.get(e,r)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error(\"set method is unimplemented\")}get(){throw new Error(\"get method is unimplemented\")}repeat(t,e){t=t||1,e=e||1;for(var r=new this.constructor[Symbol.species](this.rows*t,this.columns*e),n=0;n<t;n++)for(var i=0;i<e;i++)r.setSubMatrix(this,this.rows*n,this.columns*i);return r}fill(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),r=0;r<this.columns;r++)e[r]=this.get(t,r);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var r,n=0;n<this.columns;n++)r=this.get(t,n),this.set(t,n,this.get(e,n)),this.set(e,n,r);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),r=0;r<this.rows;r++)e[r]=this.get(r,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var r,n=0;n<this.rows;n++)r=this.get(n,t),this.set(n,t,this.get(n,e)),this.set(n,e,r);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){for(var t=v(this.rows,this.columns),e=Array(t),r=0;r<t;r++)e[r]=this.get(r,r);return e}sum(t){return\"row\"===t?l.sumByRow(this):\"column\"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t*=this.get(e,r);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError(\"vectors do not have the same size\");for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[n];return r}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn(\"Number of columns of left matrix are not equal to number of rows of right matrix.\");for(var e=this.rows,r=this.columns,n=t.columns,i=new this.constructor[Symbol.species](e,n),o=Array(r),s=0;s<n;s++){for(var a=0;a<r;a++)o[a]=t.get(a,s);for(var u,c=0;c<e;c++){for(u=0,a=0;a<r;a++)u+=this.get(c,a)*o[a];i.set(c,s,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(r+u)*(n+c),h=(s+u)*n,f=r*(o-c),d=u*(a-n),p=(r+i)*c;return e.set(0,0,l+d-p+(i-u)*(a+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(s-r)*(n+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(r-o)*(-f+m),b=(-r+o+s)*(h-f+m),_=(o+s)*(-h+f),M=r*h,S=(-r+u+c)*(h-d+g),E=(-r+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),R=(i-l)*(m-y),k=i*v,C=(c+l)*(-v+y),L=(-i+s+a)*(g+v-w),P=(i-a)*(g-w),D=(s+a)*(-v+w);return e.set(0,0,M+k+n*p),e.set(0,1,(r+n+i-o-s-c-l)*m+b+_+M+A+k+C),e.set(0,2,M+S+T+(r+n+i-s-a-u-c)*g+k+L+D),e.set(1,0,x+s*(-h+f+p-m-g-v+w)+b+M+k+L+P),e.set(1,1,x+b+_+M+a*y),e.set(1,2,k+L+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+R+k),e.set(2,1,A+R+k+C+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,r){return t.rows===e&&t.columns===r?t:w.zeros(e,r).setSubMatrix(t,0,0)}var r=this.clone(),n=r.rows,i=r.columns,o=t.rows,s=t.columns;i!==o&&console.warn(`Multiplying ${n} x ${i} and ${o} x ${s} matrix: dimensions do not match.`);var a=M(n,o),u=M(i,s);return function t(r,n,i,o){if(512>=i||512>=o)return r.mmul(n);1==i%2&&1==o%2?(r=e(r,i+1,o+1),n=e(n,i+1,o+1)):1==i%2?(r=e(r,i+1,o),n=e(n,i+1,o)):1==o%2&&(r=e(r,i,o+1),n=e(n,i,o+1));var s=parseInt(r.rows/2),a=parseInt(r.columns/2),u=r.subMatrix(0,s-1,0,a-1),c=n.subMatrix(0,s-1,0,a-1),l=r.subMatrix(0,s-1,a,r.columns-1),h=n.subMatrix(0,s-1,a,n.columns-1),f=r.subMatrix(s,r.rows-1,0,a-1),d=n.subMatrix(s,n.rows-1,0,a-1),p=r.subMatrix(s,r.rows-1,a,r.columns-1),m=n.subMatrix(s,n.rows-1,a,n.columns-1),g=t(w.add(u,p),w.add(c,m),s,a),v=t(w.add(f,p),c,s,a),y=t(u,w.sub(h,m),s,a),x=t(p,w.sub(d,c),s,a),b=t(w.add(u,l),m,s,a),_=t(w.sub(f,u),w.add(c,h),s,a),M=t(w.sub(l,p),w.add(d,m),s,a),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var R=w.zeros(2*S.rows,2*S.columns);return(R=(R=(R=(R=R.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(r=e(r,a,u),t=e(t,a,u),a,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)r=s.scale(this.getRow(i),{min:t,max:e}),n.setRow(i,r);return n}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)r=s.scale(this.getColumn(i),{min:t,max:e}),n.setColumn(i,r);return n}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*n,r*i),s=0;s<e;s++)for(var a=0;a<r;a++)for(var u=0;u<n;u++)for(var c=0;c<i;c++)o[n*s+u][i*a+c]=this.get(s,a)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){l.checkRange(this,t,e,r,n);for(var i=new this.constructor[Symbol.species](e-t+1,n-r+1),o=t;o<=e;o++)for(var s=r;s<=n;s++)i[o-t][s-r]=this.get(o,s);return i}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||0>e||e>=this.columns||0>r||r>=this.columns)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](t.length,r-e+1),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError(\"Row index out of range: \"+t[i]);n.set(i,o-e,this.get(t[i],o))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||0>e||e>=this.rows||0>r||r>=this.rows)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](r-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError(\"Column index out of range: \"+t[i]);n.set(o-e,i,this.get(o,t[i]))}return n}setSubMatrix(t,e,r){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,r,r+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[e+n][r+i]=t.get(n,i);return this}selection(t,e){for(var r,n=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<n.row.length;o++){r=n.row[o];for(var s=0;s<n.column.length;s++)i[o][s]=this.get(r,n.column[s])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,r,n){return new d(this,t,e,r,n)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,r,n,i,s;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),r=this.get(1,0),t*this.get(1,1)-e*r):3===this.columns?(n=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),s=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),r=this.get(0,2),t*n.det()-e*i.det()+r*s.det()):new o(this).determinant;throw Error(\"Determinant can only be calculated for a square matrix.\")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass=\"Matrix\",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",y=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% value);\\n        }\\n    }\\n    return this;\\n})\\n\",b=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\\n        }\\n    }\\n    return this;\\n})\\n\",R=\"\\n(function %name%(matrix, value) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(value);\\n})\\n\",I=\"\\n(function %name%() {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",S=\"\\n(function %name%(matrix) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%();\\n})\\n\",C=\"\\n(function %name%(%args%) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), %args%));\\n        }\\n    }\\n    return this;\\n})\\n\",V=\"\\n(function %name%(matrix, %args%) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(%args%);\\n})\\n\",D=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), value));\\n        }\\n    }\\n    return this;\\n})\\n\",z=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",_=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",P=V,A=[[\"+\",\"add\"],[\"-\",\"sub\",\"subtract\"],[\"*\",\"mul\",\"multiply\"],[\"/\",\"div\",\"divide\"],[\"%\",\"mod\",\"modulus\"],[\"&\",\"and\"],[\"|\",\"or\"],[\"^\",\"xor\"],[\"<<\",\"leftShift\"],[\">>\",\"signPropagatingRightShift\"],[\">>>\",\"rightShift\",\"zeroFillRightShift\"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+\"S\",op:N[0]})),B=eval(x(b,{name:N[1]+\"M\",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+\"S\"]=E,w.prototype[N[F]+\"M\"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[[\"~\",\"not\"]];[\"abs\",\"acos\",\"acosh\",\"asin\",\"asinh\",\"atan\",\"atanh\",\"cbrt\",\"ceil\",\"clz32\",\"cos\",\"cosh\",\"exp\",\"expm1\",\"floor\",\"fround\",\"log\",\"log1p\",\"log10\",\"log2\",\"round\",\"sign\",\"sin\",\"sinh\",\"sqrt\",\"tan\",\"tanh\",\"trunc\"].forEach(function(t){W.push([\"Math.\"+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[[\"Math.pow\",1,\"pow\"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae=\"arg0\";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+\"M\"]=ge,w.prototype[re[F]+\"S\"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(89),r=i(90),s=i(1),l=i(29),c=i(278),m=i(279),d=i(280),h=i(281),p=i(282),k=i(283),j=i(284)},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,o,s,a,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),r=0;r<g;r++){for(e=0;e<m;e++)f[e]=p[e][r];for(e=0;e<m;e++){for(h=p[e],d=v(e,r),a=0,o=0;o<d;o++)a+=h[o]*f[o];h[r]=f[e]-=a}for(s=r,e=r+1;e<m;e++)u(f[e])>u(f[s])&&(s=e);if(s!==r){for(o=0;o<g;o++)c=p[s][o],p[s][o]=p[r][o],p[r][o]=c;l=y[s],y[s]=y[r],y[r]=l,w=-w}if(r<m&&0!==p[r][r])for(e=r+1;e<m;e++)p[e][r]/=p[r][r]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=r(10);n.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,r=0;r<e;r++)if(0===t[r][r])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error(\"Matrix must be square\");for(var e=this.pivotSign,r=t.columns,n=0;n<r;n++)e*=t[n][n];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o>s?t[o][s]:o===s?1:0;return n},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o<=s?t[o][s]:0;return n},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error(\"Invalid matrix dimensions\");if(this.isSingular())throw new Error(\"LU matrix is singular\");var r,n,o,s=t.columns,a=t.subMatrixRow(this.pivotVector,0,s-1),u=e.columns;for(o=0;o<u;o++)for(r=o+1;r<u;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o];for(o=u-1;0<=o;o--){for(n=0;n<s;n++)a[o][n]/=e[o][o];for(r=0;r<o;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o]}return a}},t.exports=n},function(t,e,r){\"use strict\";function n(t,e){if(!(this instanceof n))return new n(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var r=t.rows,o=t.columns,c=v(r,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(r<o)if(!0===e.autoTranspose){r=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn(\"Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose\");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,k,C,L,P,D,O,N,I,F,z,U=Array(v(r+1,o)),j=a(r,c,0),V=a(o,o,0),B=Array(o),H=Array(r),G=v(r-1,o),W=M(0,v(o-2,r));for(y=0,T=M(G,W);y<T;y++){if(y<G){for(U[y]=0,m=y;m<r;m++)U[y]=s(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<r;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<r;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<r;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<r;m++)j[m][y]=f[m][y];if(y<W){for(B[y]=0,m=y+1;m<o;m++)B[y]=s(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<r&&0!==B[y]){for(m=y+1;m<r;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<r;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<r;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,r+1),G<o&&(U[G]=f[G][G]),r<w&&(U[w-1]=0),W+1<w&&(B[W]=f[W][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<r;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<r;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<r;m++)j[m][g]+=x*j[m][y]}for(m=y;m<r;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<r;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<W&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var q=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(k=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/k,O=B[y]/k,I=(C=U[w-1]/k)*(P=B[w-2]/k)*(C*P),F=0,(0!=(N=(((L=U[w-2]/k)+C)*(L-C)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+C)*(D-C)+F,z=D*O,g=y;g<w-1;g++){if(S=_/(x=s(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=s(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<r-1)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=q;m++)V[m][y]=-V[m][y];for(;y<q&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<r-1)for(m=0;m<r;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=r,this.n=o,this.s=U,this.U=j,this.V=V}var i=r(10),o=r(44),s=o.hypotenuse,a=o.getFilled2DArray;n.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,r=this.s,n=0,i=r.length;n<i;n++)r[n]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,r=this.threshold,n=this.s.length,o=i.Matrix.zeros(n,n);for(e=0;e<n;e++)o[e][e]=u(this.s[e])<=r?0:1/this.s[e];var s,a,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(s=0;s<p;s++){for(c=0,a=0;a<n;a++)c+=f[e][a]*l[s][a];m[e][s]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,r=this.V,n=this.threshold,o=r.length,s=r[0].length,a=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<s;e++)a[t][e]=u(this.s[e])>n?r[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=a[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=n},function(e,t,i){\"use strict\";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError(\"Matrices dimensions must be equal\")}function n(t,e){return t-e}function x(t,e){for(var r in e)t=t.replace(new RegExp(\"%\"+r+\"%\",\"g\"),e[r]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError(\"Data length does not match given dimensions\");for(var n=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r[i*e+o]);return n}static rowVector(t){for(var e=new this(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){for(var e=new this(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,r){void 0===r&&(r=Math.random);for(var n=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r());return n}static randInt(t,e,r,n){void 0===r&&(r=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var s,a=0;a<e;a++)s=g(n()*r),i.set(o,a,s);return i}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);for(var n=v(t,e),i=this.zeros(t,e),o=0;o<n;o++)i.set(o,o,r);return i}static diag(t,e,r){var n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);for(var i=v(n,e,r),o=this.zeros(e,r),s=0;s<i;s++)o.set(s,s,t[s]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,v(t.get(o,s),e.get(o,s)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,M(t.get(o,s),e.get(o,s)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&\"Matrix\"===t.klass}get size(){return this.rows*this.columns}apply(t){if(\"function\"!=typeof t)throw new TypeError(\"callback must be a function\");for(var e=this.rows,r=this.columns,n=0;n<e;n++)for(var i=0;i<r;i++)t.call(this,n,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t[e*this.columns+r]=this.get(e,r);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var r=0;r<this.columns;r++)t[e][r]=this.get(e,r)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error(\"set method is unimplemented\")}get(){throw new Error(\"get method is unimplemented\")}repeat(t,e){t=t||1,e=e||1;for(var r=new this.constructor[Symbol.species](this.rows*t,this.columns*e),n=0;n<t;n++)for(var i=0;i<e;i++)r.setSubMatrix(this,this.rows*n,this.columns*i);return r}fill(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),r=0;r<this.columns;r++)e[r]=this.get(t,r);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var r,n=0;n<this.columns;n++)r=this.get(t,n),this.set(t,n,this.get(e,n)),this.set(e,n,r);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),r=0;r<this.rows;r++)e[r]=this.get(r,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var r,n=0;n<this.rows;n++)r=this.get(n,t),this.set(n,t,this.get(n,e)),this.set(n,e,r);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){for(var t=v(this.rows,this.columns),e=Array(t),r=0;r<t;r++)e[r]=this.get(r,r);return e}sum(t){return\"row\"===t?l.sumByRow(this):\"column\"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t*=this.get(e,r);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError(\"vectors do not have the same size\");for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[n];return r}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn(\"Number of columns of left matrix are not equal to number of rows of right matrix.\");for(var e=this.rows,r=this.columns,n=t.columns,i=new this.constructor[Symbol.species](e,n),o=Array(r),s=0;s<n;s++){for(var a=0;a<r;a++)o[a]=t.get(a,s);for(var u,c=0;c<e;c++){for(u=0,a=0;a<r;a++)u+=this.get(c,a)*o[a];i.set(c,s,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(r+u)*(n+c),h=(s+u)*n,f=r*(o-c),d=u*(a-n),p=(r+i)*c;return e.set(0,0,l+d-p+(i-u)*(a+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(s-r)*(n+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(r-o)*(-f+m),b=(-r+o+s)*(h-f+m),_=(o+s)*(-h+f),M=r*h,S=(-r+u+c)*(h-d+g),E=(-r+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),R=(i-l)*(m-y),k=i*v,C=(c+l)*(-v+y),L=(-i+s+a)*(g+v-w),P=(i-a)*(g-w),D=(s+a)*(-v+w);return e.set(0,0,M+k+n*p),e.set(0,1,(r+n+i-o-s-c-l)*m+b+_+M+A+k+C),e.set(0,2,M+S+T+(r+n+i-s-a-u-c)*g+k+L+D),e.set(1,0,x+s*(-h+f+p-m-g-v+w)+b+M+k+L+P),e.set(1,1,x+b+_+M+a*y),e.set(1,2,k+L+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+R+k),e.set(2,1,A+R+k+C+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,r){return t.rows===e&&t.columns===r?t:w.zeros(e,r).setSubMatrix(t,0,0)}var r=this.clone(),n=r.rows,i=r.columns,o=t.rows,s=t.columns;i!==o&&console.warn(`Multiplying ${n} x ${i} and ${o} x ${s} matrix: dimensions do not match.`);var a=M(n,o),u=M(i,s);return function t(r,n,i,o){if(512>=i||512>=o)return r.mmul(n);1==i%2&&1==o%2?(r=e(r,i+1,o+1),n=e(n,i+1,o+1)):1==i%2?(r=e(r,i+1,o),n=e(n,i+1,o)):1==o%2&&(r=e(r,i,o+1),n=e(n,i,o+1));var s=parseInt(r.rows/2),a=parseInt(r.columns/2),u=r.subMatrix(0,s-1,0,a-1),c=n.subMatrix(0,s-1,0,a-1),l=r.subMatrix(0,s-1,a,r.columns-1),h=n.subMatrix(0,s-1,a,n.columns-1),f=r.subMatrix(s,r.rows-1,0,a-1),d=n.subMatrix(s,n.rows-1,0,a-1),p=r.subMatrix(s,r.rows-1,a,r.columns-1),m=n.subMatrix(s,n.rows-1,a,n.columns-1),g=t(w.add(u,p),w.add(c,m),s,a),v=t(w.add(f,p),c,s,a),y=t(u,w.sub(h,m),s,a),x=t(p,w.sub(d,c),s,a),b=t(w.add(u,l),m,s,a),_=t(w.sub(f,u),w.add(c,h),s,a),M=t(w.sub(l,p),w.add(d,m),s,a),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var R=w.zeros(2*S.rows,2*S.columns);return(R=(R=(R=(R=R.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(r=e(r,a,u),t=e(t,a,u),a,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)r=s.scale(this.getRow(i),{min:t,max:e}),n.setRow(i,r);return n}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)r=s.scale(this.getColumn(i),{min:t,max:e}),n.setColumn(i,r);return n}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*n,r*i),s=0;s<e;s++)for(var a=0;a<r;a++)for(var u=0;u<n;u++)for(var c=0;c<i;c++)o[n*s+u][i*a+c]=this.get(s,a)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){l.checkRange(this,t,e,r,n);for(var i=new this.constructor[Symbol.species](e-t+1,n-r+1),o=t;o<=e;o++)for(var s=r;s<=n;s++)i[o-t][s-r]=this.get(o,s);return i}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||0>e||e>=this.columns||0>r||r>=this.columns)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](t.length,r-e+1),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError(\"Row index out of range: \"+t[i]);n.set(i,o-e,this.get(t[i],o))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||0>e||e>=this.rows||0>r||r>=this.rows)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](r-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError(\"Column index out of range: \"+t[i]);n.set(o-e,i,this.get(o,t[i]))}return n}setSubMatrix(t,e,r){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,r,r+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[e+n][r+i]=t.get(n,i);return this}selection(t,e){for(var r,n=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<n.row.length;o++){r=n.row[o];for(var s=0;s<n.column.length;s++)i[o][s]=this.get(r,n.column[s])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,r,n){return new d(this,t,e,r,n)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,r,n,i,s;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),r=this.get(1,0),t*this.get(1,1)-e*r):3===this.columns?(n=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),s=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),r=this.get(0,2),t*n.det()-e*i.det()+r*s.det()):new o(this).determinant;throw Error(\"Determinant can only be calculated for a square matrix.\")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass=\"Matrix\",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",y=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% value);\\n        }\\n    }\\n    return this;\\n})\\n\",b=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\\n        }\\n    }\\n    return this;\\n})\\n\",R=\"\\n(function %name%(matrix, value) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(value);\\n})\\n\",I=\"\\n(function %name%() {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",S=\"\\n(function %name%(matrix) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%();\\n})\\n\",C=\"\\n(function %name%(%args%) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), %args%));\\n        }\\n    }\\n    return this;\\n})\\n\",V=\"\\n(function %name%(matrix, %args%) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(%args%);\\n})\\n\",D=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), value));\\n        }\\n    }\\n    return this;\\n})\\n\",z=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",_=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",P=V,A=[[\"+\",\"add\"],[\"-\",\"sub\",\"subtract\"],[\"*\",\"mul\",\"multiply\"],[\"/\",\"div\",\"divide\"],[\"%\",\"mod\",\"modulus\"],[\"&\",\"and\"],[\"|\",\"or\"],[\"^\",\"xor\"],[\"<<\",\"leftShift\"],[\">>\",\"signPropagatingRightShift\"],[\">>>\",\"rightShift\",\"zeroFillRightShift\"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+\"S\",op:N[0]})),B=eval(x(b,{name:N[1]+\"M\",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+\"S\"]=E,w.prototype[N[F]+\"M\"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[[\"~\",\"not\"]];[\"abs\",\"acos\",\"acosh\",\"asin\",\"asinh\",\"atan\",\"atanh\",\"cbrt\",\"ceil\",\"clz32\",\"cos\",\"cosh\",\"exp\",\"expm1\",\"floor\",\"fround\",\"log\",\"log1p\",\"log10\",\"log2\",\"round\",\"sign\",\"sin\",\"sinh\",\"sqrt\",\"tan\",\"tanh\",\"trunc\"].forEach(function(t){W.push([\"Math.\"+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[[\"Math.pow\",1,\"pow\"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae=\"arg0\";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+\"M\"]=ge,w.prototype[re[F]+\"S\"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(92),r=i(93),s=i(1),l=i(30),c=i(292),m=i(293),d=i(294),h=i(295),p=i(296),k=i(297),j=i(298)},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,o,s,a,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),r=0;r<g;r++){for(e=0;e<m;e++)f[e]=p[e][r];for(e=0;e<m;e++){for(h=p[e],d=v(e,r),a=0,o=0;o<d;o++)a+=h[o]*f[o];h[r]=f[e]-=a}for(s=r,e=r+1;e<m;e++)u(f[e])>u(f[s])&&(s=e);if(s!==r){for(o=0;o<g;o++)c=p[s][o],p[s][o]=p[r][o],p[r][o]=c;l=y[s],y[s]=y[r],y[r]=l,w=-w}if(r<m&&0!==p[r][r])for(e=r+1;e<m;e++)p[e][r]/=p[r][r]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=r(11);n.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,r=0;r<e;r++)if(0===t[r][r])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error(\"Matrix must be square\");for(var e=this.pivotSign,r=t.columns,n=0;n<r;n++)e*=t[n][n];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o>s?t[o][s]:o===s?1:0;return n},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o<=s?t[o][s]:0;return n},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error(\"Invalid matrix dimensions\");if(this.isSingular())throw new Error(\"LU matrix is singular\");var r,n,o,s=t.columns,a=t.subMatrixRow(this.pivotVector,0,s-1),u=e.columns;for(o=0;o<u;o++)for(r=o+1;r<u;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o];for(o=u-1;0<=o;o--){for(n=0;n<s;n++)a[o][n]/=e[o][o];for(r=0;r<o;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o]}return a}},t.exports=n},function(t,e,r){\"use strict\";function n(t,e){if(!(this instanceof n))return new n(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var r=t.rows,o=t.columns,c=v(r,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(r<o)if(!0===e.autoTranspose){r=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn(\"Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose\");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,k,C,L,P,D,O,N,I,F,z,U=Array(v(r+1,o)),j=a(r,c,0),V=a(o,o,0),B=Array(o),H=Array(r),G=v(r-1,o),W=M(0,v(o-2,r));for(y=0,T=M(G,W);y<T;y++){if(y<G){for(U[y]=0,m=y;m<r;m++)U[y]=s(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<r;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<r;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<r;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<r;m++)j[m][y]=f[m][y];if(y<W){for(B[y]=0,m=y+1;m<o;m++)B[y]=s(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<r&&0!==B[y]){for(m=y+1;m<r;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<r;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<r;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,r+1),G<o&&(U[G]=f[G][G]),r<w&&(U[w-1]=0),W+1<w&&(B[W]=f[W][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<r;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<r;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<r;m++)j[m][g]+=x*j[m][y]}for(m=y;m<r;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<r;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<W&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var q=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(k=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/k,O=B[y]/k,I=(C=U[w-1]/k)*(P=B[w-2]/k)*(C*P),F=0,(0!=(N=(((L=U[w-2]/k)+C)*(L-C)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+C)*(D-C)+F,z=D*O,g=y;g<w-1;g++){if(S=_/(x=s(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=s(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<r-1)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=q;m++)V[m][y]=-V[m][y];for(;y<q&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<r-1)for(m=0;m<r;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=r,this.n=o,this.s=U,this.U=j,this.V=V}var i=r(11),o=r(46),s=o.hypotenuse,a=o.getFilled2DArray;n.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,r=this.s,n=0,i=r.length;n<i;n++)r[n]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,r=this.threshold,n=this.s.length,o=i.Matrix.zeros(n,n);for(e=0;e<n;e++)o[e][e]=u(this.s[e])<=r?0:1/this.s[e];var s,a,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(s=0;s<p;s++){for(c=0,a=0;a<n;a++)c+=f[e][a]*l[s][a];m[e][s]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,r=this.V,n=this.threshold,o=r.length,s=r[0].length,a=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<s;e++)a[t][e]=u(this.s[e])>n?r[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=a[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=n},function(t,e,r){\"use strict\";var n=r(305);e.updateClusterID=function(t,e,r,i){for(var o=0;o<t.length;o++)r[o]=n(e,t[o],{distanceFunction:i});return r},e.updateCenters=function(t,e,r){for(var n=t[0].length,i=Array(r),o=Array(r),s=0;s<r;s++){i[s]=Array(n),o[s]=0;for(var a=0;a<n;a++)i[s][a]=0}for(var u=0;u<t.length;u++){o[e[u]]++;for(var c=0;c<n;c++)i[e[u]][c]+=t[u][c]}for(var l=0;l<r;l++)for(var h=0;h<n;h++)i[l][h]/=o[l];return i},e.calculateDistanceMatrix=function(t,e){for(var r=Array(t.length),n=0;n<t.length;++n)for(var i=n;i<t.length;++i){r[n]||(r[n]=Array(t.length)),r[i]||(r[i]=Array(t.length));var o=e(t[n],t[i]);r[n][i]=o,r[i][n]=o}return r},e.converged=function(t,e,r,n){for(var i=0;i<t.length;i++)if(r(t[i],e[i])>n)return!1;return!0}},function(t,e,r){\"use strict\";function n(t){i.call(this),this.index=t,this.distance=0,this.children=[]}var i=r(48);r(313).inherits(n,i),t.exports=n},function(t){\"use strict\";function e(t,e,r,n){this.x=t,this.y=e,this.weights=r,this.som=n,this.neighbors={}}e.prototype.adjustWeights=function(t,e,r){for(var n=0,i=this.weights.length;n<i;n++)this.weights[n]+=e*r*(t[n]-this.weights[n])},e.prototype.getDistance=function(t){return M(u(this.x-t.x),u(this.y-t.y))},e.prototype.getDistanceTorus=function(t){var e=u(this.x-t.x),r=u(this.y-t.y);return M(v(e,this.som.gridDim.x-e),v(r,this.som.gridDim.y-r))},e.prototype.getNeighbors=function(t){var e,r,n,i;return this.neighbors[t]||(this.neighbors[t]=[,,],0<this[t]?e=this[t]-1:this.som.torus&&(e=this.som.gridDim[t]-1),void 0!==e&&(\"x\"===t?(r=e,n=this.y):(r=this.x,n=e),this.neighbors[t][0]=this.som.nodes[r][n]),this[t]<this.som.gridDim[t]-1?i=this[t]+1:this.som.torus&&(i=0),void 0!==i&&(\"x\"===t?(r=i,n=this.y):(r=this.x,n=i),this.neighbors[t][1]=this.som.nodes[r][n])),this.neighbors[t]},e.prototype.getPos=function(t,e){var r,n,i=this.getNeighbors(t),o=this.som.distance;i[0]?i[1]?o(e,i[0].weights)<o(e,i[1].weights)?(r=i[0],n=-1):(r=i[1],n=1):(r=i[0],n=-1):(r=i[1],n=1);var s=1-o(e,this.weights),a=1-o(e,r.weights);return.5+(s-a)/(2-s-a)*.5*n},e.prototype.getPosition=function(t){return[this.getPos(\"x\",t),this.getPos(\"y\",t)]},t.exports=e},function(e,t,i){\"use strict\";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError(\"Matrices dimensions must be equal\")}function n(t,e){return t-e}function x(t,e){for(var r in e)t=t.replace(new RegExp(\"%\"+r+\"%\",\"g\"),e[r]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError(\"Data length does not match given dimensions\");for(var n=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r[i*e+o]);return n}static rowVector(t){for(var e=new this(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){for(var e=new this(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,r){void 0===r&&(r=Math.random);for(var n=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r());return n}static randInt(t,e,r,n){void 0===r&&(r=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var s,a=0;a<e;a++)s=g(n()*r),i.set(o,a,s);return i}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);for(var n=v(t,e),i=this.zeros(t,e),o=0;o<n;o++)i.set(o,o,r);return i}static diag(t,e,r){var n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);for(var i=v(n,e,r),o=this.zeros(e,r),s=0;s<i;s++)o.set(s,s,t[s]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,v(t.get(o,s),e.get(o,s)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,M(t.get(o,s),e.get(o,s)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&\"Matrix\"===t.klass}get size(){return this.rows*this.columns}apply(t){if(\"function\"!=typeof t)throw new TypeError(\"callback must be a function\");for(var e=this.rows,r=this.columns,n=0;n<e;n++)for(var i=0;i<r;i++)t.call(this,n,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t[e*this.columns+r]=this.get(e,r);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var r=0;r<this.columns;r++)t[e][r]=this.get(e,r)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error(\"set method is unimplemented\")}get(){throw new Error(\"get method is unimplemented\")}repeat(t,e){t=t||1,e=e||1;for(var r=new this.constructor[Symbol.species](this.rows*t,this.columns*e),n=0;n<t;n++)for(var i=0;i<e;i++)r.setSubMatrix(this,this.rows*n,this.columns*i);return r}fill(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),r=0;r<this.columns;r++)e[r]=this.get(t,r);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var r,n=0;n<this.columns;n++)r=this.get(t,n),this.set(t,n,this.get(e,n)),this.set(e,n,r);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),r=0;r<this.rows;r++)e[r]=this.get(r,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var r,n=0;n<this.rows;n++)r=this.get(n,t),this.set(n,t,this.get(n,e)),this.set(n,e,r);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){for(var t=v(this.rows,this.columns),e=Array(t),r=0;r<t;r++)e[r]=this.get(r,r);return e}sum(t){return\"row\"===t?l.sumByRow(this):\"column\"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t*=this.get(e,r);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError(\"vectors do not have the same size\");for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[n];return r}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn(\"Number of columns of left matrix are not equal to number of rows of right matrix.\");for(var e=this.rows,r=this.columns,n=t.columns,i=new this.constructor[Symbol.species](e,n),o=Array(r),s=0;s<n;s++){for(var a=0;a<r;a++)o[a]=t.get(a,s);for(var u,c=0;c<e;c++){for(u=0,a=0;a<r;a++)u+=this.get(c,a)*o[a];i.set(c,s,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(r+u)*(n+c),h=(s+u)*n,f=r*(o-c),d=u*(a-n),p=(r+i)*c;return e.set(0,0,l+d-p+(i-u)*(a+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(s-r)*(n+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(r-o)*(-f+m),b=(-r+o+s)*(h-f+m),_=(o+s)*(-h+f),M=r*h,S=(-r+u+c)*(h-d+g),E=(-r+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),R=(i-l)*(m-y),k=i*v,C=(c+l)*(-v+y),L=(-i+s+a)*(g+v-w),P=(i-a)*(g-w),D=(s+a)*(-v+w);return e.set(0,0,M+k+n*p),e.set(0,1,(r+n+i-o-s-c-l)*m+b+_+M+A+k+C),e.set(0,2,M+S+T+(r+n+i-s-a-u-c)*g+k+L+D),e.set(1,0,x+s*(-h+f+p-m-g-v+w)+b+M+k+L+P),e.set(1,1,x+b+_+M+a*y),e.set(1,2,k+L+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+R+k),e.set(2,1,A+R+k+C+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,r){return t.rows===e&&t.columns===r?t:w.zeros(e,r).setSubMatrix(t,0,0)}var r=this.clone(),n=r.rows,i=r.columns,o=t.rows,s=t.columns;i!==o&&console.warn(`Multiplying ${n} x ${i} and ${o} x ${s} matrix: dimensions do not match.`);var a=M(n,o),u=M(i,s);return function t(r,n,i,o){if(512>=i||512>=o)return r.mmul(n);1==i%2&&1==o%2?(r=e(r,i+1,o+1),n=e(n,i+1,o+1)):1==i%2?(r=e(r,i+1,o),n=e(n,i+1,o)):1==o%2&&(r=e(r,i,o+1),n=e(n,i,o+1));var s=parseInt(r.rows/2),a=parseInt(r.columns/2),u=r.subMatrix(0,s-1,0,a-1),c=n.subMatrix(0,s-1,0,a-1),l=r.subMatrix(0,s-1,a,r.columns-1),h=n.subMatrix(0,s-1,a,n.columns-1),f=r.subMatrix(s,r.rows-1,0,a-1),d=n.subMatrix(s,n.rows-1,0,a-1),p=r.subMatrix(s,r.rows-1,a,r.columns-1),m=n.subMatrix(s,n.rows-1,a,n.columns-1),g=t(w.add(u,p),w.add(c,m),s,a),v=t(w.add(f,p),c,s,a),y=t(u,w.sub(h,m),s,a),x=t(p,w.sub(d,c),s,a),b=t(w.add(u,l),m,s,a),_=t(w.sub(f,u),w.add(c,h),s,a),M=t(w.sub(l,p),w.add(d,m),s,a),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var R=w.zeros(2*S.rows,2*S.columns);return(R=(R=(R=(R=R.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(r=e(r,a,u),t=e(t,a,u),a,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)r=s.scale(this.getRow(i),{min:t,max:e}),n.setRow(i,r);return n}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError(\"min should be strictly smaller than max\");for(var r,n=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)r=s.scale(this.getColumn(i),{min:t,max:e}),n.setColumn(i,r);return n}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*n,r*i),s=0;s<e;s++)for(var a=0;a<r;a++)for(var u=0;u<n;u++)for(var c=0;c<i;c++)o[n*s+u][i*a+c]=this.get(s,a)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){l.checkRange(this,t,e,r,n);for(var i=new this.constructor[Symbol.species](e-t+1,n-r+1),o=t;o<=e;o++)for(var s=r;s<=n;s++)i[o-t][s-r]=this.get(o,s);return i}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||0>e||e>=this.columns||0>r||r>=this.columns)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](t.length,r-e+1),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError(\"Row index out of range: \"+t[i]);n.set(i,o-e,this.get(t[i],o))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||0>e||e>=this.rows||0>r||r>=this.rows)throw new RangeError(\"Argument out of range\");for(var n=new this.constructor[Symbol.species](r-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError(\"Column index out of range: \"+t[i]);n.set(o-e,i,this.get(o,t[i]))}return n}setSubMatrix(t,e,r){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,r,r+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[e+n][r+i]=t.get(n,i);return this}selection(t,e){for(var r,n=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<n.row.length;o++){r=n.row[o];for(var s=0;s<n.column.length;s++)i[o][s]=this.get(r,n.column[s])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,r,n){return new d(this,t,e,r,n)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,r,n,i,s;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),r=this.get(1,0),t*this.get(1,1)-e*r):3===this.columns?(n=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),s=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),r=this.get(0,2),t*n.det()-e*i.det()+r*s.det()):new o(this).determinant;throw Error(\"Determinant can only be calculated for a square matrix.\")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass=\"Matrix\",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",y=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% value);\\n        }\\n    }\\n    return this;\\n})\\n\",b=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\\n        }\\n    }\\n    return this;\\n})\\n\",R=\"\\n(function %name%(matrix, value) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(value);\\n})\\n\",I=\"\\n(function %name%() {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",S=\"\\n(function %name%(matrix) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%();\\n})\\n\",C=\"\\n(function %name%(%args%) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), %args%));\\n        }\\n    }\\n    return this;\\n})\\n\",V=\"\\n(function %name%(matrix, %args%) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(%args%);\\n})\\n\",D=\"\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), value));\\n        }\\n    }\\n    return this;\\n})\\n\",z=\"\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    checkDimensions(this, matrix);\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n\",_=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",P=V,A=[[\"+\",\"add\"],[\"-\",\"sub\",\"subtract\"],[\"*\",\"mul\",\"multiply\"],[\"/\",\"div\",\"divide\"],[\"%\",\"mod\",\"modulus\"],[\"&\",\"and\"],[\"|\",\"or\"],[\"^\",\"xor\"],[\"<<\",\"leftShift\"],[\">>\",\"signPropagatingRightShift\"],[\">>>\",\"rightShift\",\"zeroFillRightShift\"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+\"S\",op:N[0]})),B=eval(x(b,{name:N[1]+\"M\",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+\"S\"]=E,w.prototype[N[F]+\"M\"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[[\"~\",\"not\"]];[\"abs\",\"acos\",\"acosh\",\"asin\",\"asinh\",\"atan\",\"atanh\",\"cbrt\",\"ceil\",\"clz32\",\"cos\",\"cosh\",\"exp\",\"expm1\",\"floor\",\"fround\",\"log\",\"log1p\",\"log10\",\"log2\",\"round\",\"sign\",\"sin\",\"sinh\",\"sqrt\",\"tan\",\"tanh\",\"trunc\"].forEach(function(t){W.push([\"Math.\"+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[[\"Math.pow\",1,\"pow\"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae=\"arg0\";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+\"M\"]=ge,w.prototype[re[F]+\"S\"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(98),r=i(99),s=i(1),l=i(31),c=i(323),m=i(324),d=i(325),h=i(326),p=i(327),k=i(328),j=i(329)},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,o,s,a,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),r=0;r<g;r++){for(e=0;e<m;e++)f[e]=p[e][r];for(e=0;e<m;e++){for(h=p[e],d=v(e,r),a=0,o=0;o<d;o++)a+=h[o]*f[o];h[r]=f[e]-=a}for(s=r,e=r+1;e<m;e++)u(f[e])>u(f[s])&&(s=e);if(s!==r){for(o=0;o<g;o++)c=p[s][o],p[s][o]=p[r][o],p[r][o]=c;l=y[s],y[s]=y[r],y[r]=l,w=-w}if(r<m&&0!==p[r][r])for(e=r+1;e<m;e++)p[e][r]/=p[r][r]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=r(12);n.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,r=0;r<e;r++)if(0===t[r][r])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error(\"Matrix must be square\");for(var e=this.pivotSign,r=t.columns,n=0;n<r;n++)e*=t[n][n];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o>s?t[o][s]:o===s?1:0;return n},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new i.Matrix(e,r),o=0;o<e;o++)for(var s=0;s<r;s++)n[o][s]=o<=s?t[o][s]:0;return n},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error(\"Invalid matrix dimensions\");if(this.isSingular())throw new Error(\"LU matrix is singular\");var r,n,o,s=t.columns,a=t.subMatrixRow(this.pivotVector,0,s-1),u=e.columns;for(o=0;o<u;o++)for(r=o+1;r<u;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o];for(o=u-1;0<=o;o--){for(n=0;n<s;n++)a[o][n]/=e[o][o];for(r=0;r<o;r++)for(n=0;n<s;n++)a[r][n]-=a[o][n]*e[r][o]}return a}},t.exports=n},function(t,e,r){\"use strict\";function n(t,e){if(!(this instanceof n))return new n(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var r=t.rows,o=t.columns,c=v(r,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(r<o)if(!0===e.autoTranspose){r=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn(\"Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose\");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,k,C,L,P,D,O,N,I,F,z,U=Array(v(r+1,o)),j=a(r,c,0),V=a(o,o,0),B=Array(o),H=Array(r),G=v(r-1,o),W=M(0,v(o-2,r));for(y=0,T=M(G,W);y<T;y++){if(y<G){for(U[y]=0,m=y;m<r;m++)U[y]=s(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<r;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<r;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<r;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<r;m++)j[m][y]=f[m][y];if(y<W){for(B[y]=0,m=y+1;m<o;m++)B[y]=s(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<r&&0!==B[y]){for(m=y+1;m<r;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<r;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<r;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,r+1),G<o&&(U[G]=f[G][G]),r<w&&(U[w-1]=0),W+1<w&&(B[W]=f[W][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<r;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<r;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<r;m++)j[m][g]+=x*j[m][y]}for(m=y;m<r;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<r;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<W&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var q=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=s(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(k=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/k,O=B[y]/k,I=(C=U[w-1]/k)*(P=B[w-2]/k)*(C*P),F=0,(0!=(N=(((L=U[w-2]/k)+C)*(L-C)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+C)*(D-C)+F,z=D*O,g=y;g<w-1;g++){if(S=_/(x=s(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=s(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<r-1)for(m=0;m<r;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=q;m++)V[m][y]=-V[m][y];for(;y<q&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<r-1)for(m=0;m<r;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=r,this.n=o,this.s=U,this.U=j,this.V=V}var i=r(12),o=r(50),s=o.hypotenuse,a=o.getFilled2DArray;n.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,r=this.s,n=0,i=r.length;n<i;n++)r[n]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,r=this.threshold,n=this.s.length,o=i.Matrix.zeros(n,n);for(e=0;e<n;e++)o[e][e]=u(this.s[e])<=r?0:1/this.s[e];var s,a,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(s=0;s<p;s++){for(c=0,a=0;a<n;a++)c+=f[e][a]*l[s][a];m[e][s]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,r=this.V,n=this.threshold,o=r.length,s=r[0].length,a=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<s;e++)a[t][e]=u(this.s[e])>n?r[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=a[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=n},function(t,e,r){\"use strict\";var n=r(49),i=r(101),o=r(102);class s{constructor(t){this.inputSize=t.inputSize,this.outputSize=t.outputSize,this.regularization=t.regularization,this.epsilon=t.epsilon,this.activation=t.activation,this.activationParam=t.activationParam;var e=o[t.activation],r=e.activation.length,i=1<r?r=>e.activation(r,t.activationParam):e.activation,s=1<r?r=>e.derivate(r,t.activationParam):e.derivate;this.activationFunction=function(t,e){this[t][e]=i(this[t][e])},this.derivate=function(t,e){this[t][e]=s(this[t][e])},t.model?(this.W=n.checkMatrix(t.W),this.b=n.checkMatrix(t.b)):(this.W=n.rand(this.inputSize,this.outputSize),this.b=n.zeros(1,this.outputSize),this.W.apply(function(e,r){this[e][r]/=R(t.inputSize)}))}forward(t){var e=t.mmul(this.W).addRowVector(this.b);return e.apply(this.activationFunction),this.a=e.clone(),e}backpropagation(t,e){this.dW=e.transposeView().mmul(t),this.db=i.sumCol(t);var r=e.clone();return t.mmul(this.W.transposeView()).mul(r.apply(this.derivate))}update(){this.dW.add(this.W.clone().mul(this.regularization)),this.W.add(this.dW.mul(-this.epsilon)),this.b.add(this.db.mul(-this.epsilon))}toJSON(){return{model:\"Layer\",inputSize:this.inputSize,outputSize:this.outputSize,regularization:this.regularization,epsilon:this.epsilon,activation:this.activation,W:this.W,b:this.b}}static load(t){if(\"Layer\"!==t.model)throw new RangeError(\"the current model is not a Layer model\");return new s(t)}}t.exports=s},function(t,e,r){\"use strict\";var n=r(49);t.exports={dictOutputs:function(t){for(var e={},r={},n=t.length,i=0,o=0;o<n;o+=1)void 0===e[t[o]]&&(e[t[o]]=i,r[i]=t[o],i++);return{inputs:e,outputs:r}},sumCol:function(t){for(var e=n.zeros(1,t.columns),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e[0][i]+=t[r][i];return e},sumRow:function(t){for(var e=n.zeros(t.rows,1),r=0;r<t.rows;++r)for(var i=0;i<t.columns;++i)e[r][0]+=t[r][i];return e}}},function(t){\"use strict\";function e(t){return 1/(1+o(-t))}function i(t,e){return 0>t?e*(o(t)-1):t}var s=Math.cos,a=Math.sin,c={tanh:{activation:n,derivate:t=>1-t*t},identity:{activation:t=>t,derivate:()=>1},logistic:{activation:e,derivate:t=>e(t)*(1-e(t))},arctan:{activation:Math.atan,derivate:t=>1/(t*t+1)},softsign:{activation:t=>t/(1+u(t)),derivate:t=>1/((1+u(t))*(1+u(t)))},relu:{activation:t=>0>t?0:t,derivate:t=>0>t?0:1},softplus:{activation:t=>r(1+o(t)),derivate:t=>1/(1+o(-t))},bent:{activation:t=>(R(t*t+1)-1)/2+t,derivate:t=>t/(2*R(t*t+1))+1},sinusoid:{activation:a,derivate:s},sinc:{activation:t=>0===t?1:a(t)/t,derivate:t=>0===t?0:s(t)/t-a(t)/(t*t)},gaussian:{activation:t=>o(-t*t),derivate:t=>-2*t*o(-t*t)},\"parametric-relu\":{activation:(t,e)=>0>t?e*t:t,derivate:(t,e)=>0>t?e:1},\"exponential-elu\":{activation:i,derivate:(t,e)=>0>t?i(t,e)+e:1},\"soft-exponential\":{activation:function(t,e){return 0>e?-r(1-e*(t+e))/e:0<e?(o(e*t)-1)/e+e:t},derivate:function(t,e){return 0>e?1/(1-e*(e+t)):o(e*t)}}};t.exports=c},function(t,e,r){\"use strict\";var n=r(13);e.ArrayUtils=e.AU=r(1),e.BitArray=r(119),e.HashTable=r(54),e.Matrix=n.default,e.PadArray=r(57),e.Regression=r(124),e.binarySearch=r(55),e.numSort=r(56);var i=e.Math={},o=r(145);i.Distance=o.distance,i.Similarity=o.similarity,i.DistanceMatrix=r(68),i.SG=r(191),i.SGG=r(205),i.Matrix=n,i.SparseMatrix=r(208),i.Kernel=r(37);var s=e.Stat={};s.array=r(2).array,s.matrix=r(2).matrix,s.PCA=r(209),s.Performance=r(223);var a=e.Optimization={};a.BellOptimizer=r(225),a.LevenbergMarquardt=r(253),(e.RNG={}).XSadd=r(269);var u=e.SL={};u.CV=r(270),u.CrossValidation=u.CV,u.CM=r(86),u.ConfusionMatrix=u.CM,u.SVM=r(272),u.KNN=r(273),u.NaiveBayes=r(275),u.PLS=r(289);var c=e.Clust={};c.kmeans=r(304),c.hclust=r(309);var l=e.NN=e.nn={};l.SOM=r(319),l.FNN=r(321)},function(){\"use strict\";Symbol.species||(Symbol.species=Symbol.for(\"@@species\"))},function(t,e,r){\"use strict\";function n(t){for(var e=Array(t[0].length),r=0;r<e.length;++r)e[r]=Array(t.length);for(r=0;r<t.length;++r)for(var n=0;n<t[0].length;++n)e[n][r]=t[r][n];return e}var i=r(2).array;t.exports={coordArrayToPoints:function(t,e){if(0!=t.length%e)throw new RangeError(\"Dimensions number must be accordance with the size of the array.\");for(var r,n=Array(t.length/e),i=0,o=0;o<t.length;o+=e){r=Array(e);for(var s=0;s<e;++s)r[s]=t[o+s];n[i]=r,i++}return n},coordArrayToCoordMatrix:function(t,e){if(0!=t.length%e)throw new RangeError(\"Dimensions number must be accordance with the size of the array.\");for(var r=Array(e),n=t.length/e,i=0;i<r.length;i++)r[i]=Array(n);for(i=0;i<t.length;i+=e)for(var o,s=0;s<e;++s)o=g(i/e),r[s][o]=t[i+s];return r},coordMatrixToCoordArray:function(t){for(var e=Array(t.length*t[0].length),r=0,n=0;n<t[0].length;++n)for(var i=0;i<t.length;++i)e[r]=t[i][n],++r;return e},coordMatrixToPoints:n,pointsToCoordArray:function(t){for(var e=Array(t.length*t[0].length),r=0,n=0;n<t.length;++n)for(var i=0;i<t[0].length;++i)e[r]=t[n][i],++r;return e},pointsToCoordMatrix:n,applyDotProduct:function(t,e){var r,n;t.length<=e.length?(n=t,r=e):(n=e,r=t);for(var i,o=r.length-n.length+1,s=Array(o),a=0;a<o;++a){i=0;for(var u=0;u<n.length;++u)i+=n[u]*r[a+u];s[a]=i}return s},scale:function(t,e){var r=e.inPlace?t:Array(t.length),n=e.max,o=e.min;if(\"number\"==typeof n)if(\"number\"==typeof o)for(var s=i.minMax(t),a=(n-o)/(s.max-s.min),u=0;u<r.length;u++)r[u]=(t[u]-s.min)*a+o;else for(a=n/i.max(t),u=0;u<r.length;u++)r[u]=t[u]*a;else if(\"number\"==typeof o)for(a=o/i.min(t),u=0;u<r.length;u++)r[u]=t[u]*a;return r}}},function(t,e,n){\"use strict\";function i(t,e){return t-e}var o=n(52);e.max=function(t){for(var e=-1/0,r=0;r<t.length;r++)for(var n=0;n<t[r].length;n++)t[r][n]>e&&(e=t[r][n]);return e},e.min=function(t){for(var e=1/0,r=0;r<t.length;r++)for(var n=0;n<t[r].length;n++)t[r][n]<e&&(e=t[r][n]);return e},e.minMax=function(t){for(var e=1/0,r=-1/0,n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)t[n][i]<e&&(e=t[n][i]),t[n][i]>r&&(r=t[n][i]);return{min:e,max:r}},e.entropy=function(t,e){void 0===e&&(e=0);for(var n=0,i=t.length,o=t[0].length,s=0;s<i;s++)for(var a=0;a<o;a++)n+=t[s][a]*r(t[s][a]+e);return-n},e.mean=function(t,e){void 0===e&&(e=0);var r,n,i,o,s=t.length,a=t[0].length;if(-1===e){for(r=[0],n=s*a,i=0;i<s;i++)for(o=0;o<a;o++)r[0]+=t[i][o];r[0]/=n}else if(0===e)for(r=Array(a),n=s,o=0;o<a;o++){for(r[o]=0,i=0;i<s;i++)r[o]+=t[i][o];r[o]/=n}else{if(1!==e)throw new Error(\"Invalid dimension\");for(r=Array(s),n=a,o=0;o<s;o++){for(r[o]=0,i=0;i<a;i++)r[o]+=t[o][i];r[o]/=n}}return r},e.sum=function(t,e){void 0===e&&(e=0);var r,n,i,o=t.length,s=t[0].length;if(-1===e)for(r=[0],n=0;n<o;n++)for(i=0;i<s;i++)r[0]+=t[n][i];else if(0===e)for(r=Array(s),i=0;i<s;i++)for(r[i]=0,n=0;n<o;n++)r[i]+=t[n][i];else{if(1!==e)throw new Error(\"Invalid dimension\");for(r=Array(o),i=0;i<o;i++)for(r[i]=0,n=0;n<s;n++)r[i]+=t[i][n]}return r},e.product=function(t,e){void 0===e&&(e=0);var r,n,i,o=t.length,s=t[0].length;if(-1===e)for(r=[1],n=0;n<o;n++)for(i=0;i<s;i++)r[0]*=t[n][i];else if(0===e)for(r=Array(s),i=0;i<s;i++)for(r[i]=1,n=0;n<o;n++)r[i]*=t[n][i];else{if(1!==e)throw new Error(\"Invalid dimension\");for(r=Array(o),i=0;i<o;i++)for(r[i]=1,n=0;n<s;n++)r[i]*=t[i][n]}return r},e.standardDeviation=function(t,r,n){for(var i=e.variance(t,r,n),o=i.length,s=0;s<o;s++)i[s]=R(i[s]);return i},e.variance=function(t,r,n){void 0===n&&(n=!0),r=r||e.mean(t);var i=t.length;if(0===i)return[];for(var o=t[0].length,s=Array(o),a=0;a<o;a++){for(var u=0,c=0,l=0,h=0;h<i;h++)u+=l=t[h][a]-r[a],c+=l*l;s[a]=n?(c-u*u/i)/(i-1):(c-u*u/i)/i}return s},e.median=function(t){for(var e,r=t.length,n=t[0].length,o=Array(n),s=0;s<n;s++){e=Array(r);for(var a=0;a<r;a++)e[a]=t[a][s];e.sort(i);var u=e.length;o[s]=0==u%2?.5*(e[u/2]+e[u/2-1]):e[g(u/2)]}return o},e.mode=function(t){var e,r,n=t.length,i=t[0].length,o=Array(i);for(e=0;e<i;e++){for(var s=Array(n),a=0;a<n;a++)s[a]=0;var u=Array(n),c=0;for(r=0;r<n;r++){var l=u.indexOf(t[r][e]);0<=l?s[l]++:(u[c]=t[r][e],s[c]=1,c++)}var h=0,f=0;for(r=0;r<c;r++)s[r]>h&&(h=s[r],f=r);o[e]=u[f]}return o},e.skewness=function(t,r){void 0===r&&(r=!0);for(var n=e.mean(t),i=t.length,o=n.length,s=Array(o),a=0;a<o;a++){for(var u,l=0,h=0,f=0;f<i;f++)l+=(u=t[f][a]-n[a])*u,h+=u*u*u;var d=h/i/c(l/i,1.5);if(r){var p=R(i*(i-1));s[a]=p/(i-2)*d}else s[a]=d}return s},e.kurtosis=function(t,r){void 0===r&&(r=!0);for(var n=e.mean(t),i=t.length,o=t[0].length,s=Array(o),a=0;a<o;a++){for(var u,c=0,l=0,h=0;h<i;h++)c+=(u=t[h][a]-n[a])*u,l+=u*u*u*u;var f=c/i,d=l/i;if(r){var p=c/(i-1);s[a]=i*(i+1)/((i-1)*(i-2)*(i-3))*(l/(p*p))-(i-1)*(i-1)/((i-2)*(i-3))*3}else s[a]=d/(f*f)-3}return s},e.standardError=function(t){for(var r=t.length,n=e.standardDeviation(t),i=n.length,o=Array(i),s=R(r),a=0;a<i;a++)o[a]=n[a]/s;return o},e.covariance=function(t,r){return e.scatter(t,void 0,r)},e.scatter=function(t,r,n){void 0===n&&(n=0),void 0===r&&(0===n?r=t.length-1:1===n&&(r=t[0].length-1));var i=e.mean(t,n),o=t.length;if(0===o)return[[]];var s,a,u,c,l,h=t[0].length;if(0===n){for(s=Array(h),a=0;a<h;a++)s[a]=Array(h);for(a=0;a<h;a++)for(u=a;u<h;u++){for(c=0,l=0;l<o;l++)c+=(t[l][u]-i[u])*(t[l][a]-i[a]);s[a][u]=c/=r,s[u][a]=c}}else{if(1!==n)throw new Error(\"Invalid dimension\");for(s=Array(o),a=0;a<o;a++)s[a]=Array(o);for(a=0;a<o;a++)for(u=a;u<o;u++){for(c=0,l=0;l<h;l++)c+=(t[u][l]-i[u])*(t[a][l]-i[a]);s[a][u]=c/=r,s[u][a]=c}}return s},e.correlation=function(t){var r,n,i=e.mean(t),o=e.standardDeviation(t,!0,i),s=e.zScores(t,i,o),a=t.length,u=t[0].length,c=Array(u);for(r=0;r<u;r++)c[r]=Array(u);for(r=0;r<u;r++)for(n=r;n<u;n++){for(var l=0,h=0,f=s.length;h<f;h++)l+=s[h][n]*s[h][r];c[r][n]=l/=a-1,c[n][r]=l}return c},e.zScores=function(t,r,n){return r=r||e.mean(t),void 0===n&&(n=e.standardDeviation(t,!0,r)),e.standardize(e.center(t,r,!1),n,!0)},e.center=function(t,r,n){r=r||e.mean(t);var i,o,s,a=t,u=t.length;if(!n)for(a=Array(u),i=0;i<u;i++)a[i]=Array(t[i].length);for(i=0;i<u;i++){var c=a[i];for(o=0,s=c.length;o<s;o++)c[o]=t[i][o]-r[o]}return a},e.standardize=function(t,r,n){void 0===r&&(r=e.standardDeviation(t));var i,o,s,a=t,u=t.length;if(!n)for(a=Array(u),i=0;i<u;i++)a[i]=Array(t[i].length);for(i=0;i<u;i++){var c=a[i],l=t[i];for(o=0,s=c.length;o<s;o++)0===r[o]||isNaN(r[o])||(c[o]=l[o]/r[o])}return a},e.weightedVariance=function(t,r){var n=e.mean(t),i=t.length;if(0===i)return[];for(var o=t[0].length,s=Array(o),a=0;a<o;a++){for(var u=0,c=0,l=0,h=0;h<i;h++){var f=t[h][a]-n[a],d=r[h];u+=d*(f*f),l+=d,c+=d*d}s[a]=u*(l/(l*l-c))}return s},e.weightedMean=function(t,e,r){void 0===r&&(r=0);var n=t.length;if(0===n)return[];var i,s,a,u,c,l,h=t[0].length;if(0===r){for(i=Array(h),s=0;s<h;s++)i[s]=0;for(s=0;s<n;s++)for(l=t[s],c=e[s],u=0;u<h;u++)i[u]+=l[u]*c}else{if(1!==r)throw new Error(\"Invalid dimension\");for(i=Array(n),s=0;s<n;s++)i[s]=0;for(u=0;u<n;u++)for(l=t[u],c=e[u],s=0;s<h;s++)i[u]+=l[s]*c}var f=o.sum(e);if(0!==f)for(s=0,a=i.length;s<a;s++)i[s]/=f;return i},e.weightedCovariance=function(t,r,n,i){i=i||0,n=n||e.weightedMean(t,r,i);for(var o=0,s=0,a=0,u=r.length;a<u;a++)o+=r[a],s+=r[a]*r[a];return e.weightedScatter(t,r,n,o/(o*o-s),i)},e.weightedScatter=function(t,r,n,i,o){o=o||0,n=n||e.weightedMean(t,r,o),void 0===i&&(i=1);var s=t.length;if(0===s)return[[]];var a,u,c,l,h,f=t[0].length;if(0===o){for(a=Array(f),u=0;u<f;u++)a[u]=Array(f);for(u=0;u<f;u++)for(c=u;c<f;c++){for(h=0,l=0;l<s;l++)h+=r[l]*(t[l][c]-n[c])*(t[l][u]-n[u]);a[u][c]=h*i,a[c][u]=h*i}}else{if(1!==o)throw new Error(\"Invalid dimension\");for(a=Array(s),u=0;u<s;u++)a[u]=Array(s);for(u=0;u<s;u++)for(c=u;c<s;c++){for(h=0,l=0;l<f;l++)h+=r[l]*(t[c][l]-n[c])*(t[u][l]-n[u]);a[u][c]=h*i,a[c][u]=h*i}}return a}},function(r,n){\"use strict\";function i(e,r,n,i,o){function a(t,e,r,n){return(n-e)/(r-t)}var u=e.length,c=(i-n)/(o-1),l=n-c/2,h=Array(o),f=e[e.length-1]-e[e.length-2],d=l,p=l+c,m=t,g=0,v=e[0]-(e[1]-e[0]),y=0,w=0,x=0,b=0,_=0,M=0,S=0,E=0;t:for(;;){for(;0<=v-p;){var T=s(0,p-m,x,g);if(h[E]=((M=w+T)-_)/c,++E===o)break t;d=p,p+=c,_=M}m<=d&&d<=v&&(_=w+(T=s(0,d-m,x,g))),w+=s(m,v,x,b),m=v,g=y,S<u?(v=e[S],y=r[S],S++):S===u&&(v+=f,y=0),b=-(x=a(m,g,v,y))*m+g}return h}function o(t,r,n,i,o){var s=t.length,a=(i-n)/(o-1),u=t[t.length-1]-t[t.length-2],c=n-a/2,l=Array(o),h=c,f=c+a,d=-e,p=0,m=t[0],g=r[0],v=0,y=!0,w=0,x=0,b=1,_=0;t:for(;;){if(d>=m)throw new Error(\"x must be an increasing serie\");for(;0<d-f;){if(y&&(x++,y=!1),l[_]=0>=x?0:w/x,++_===o)break t;h=f,f+=a,w=0,x=0}d>h&&(w+=p,x++),(d==-e||1<v)&&x--,d=m,p=g,b<s?(m=t[b],g=r[b],b++):(m+=u,g=0,v++)}return l}function s(t,e,r,n){return.5*r*e*e+n*e-(.5*r*t*t+n*t)}n.getEquallySpacedData=function(t,e,r){if(1<t.length&&t[0]>t[1]&&(t=t.slice().reverse(),e=e.slice().reverse()),t.length!==e.length)throw new RangeError(\"the x and y vector doesn't have the same size.\");void 0===r&&(r={});var n=void 0===r.from?t[0]:r.from;if(isNaN(n)||!isFinite(n))throw new RangeError(\"'From' value must be a number\");var s=void 0===r.to?t[t.length-1]:r.to;if(isNaN(s)||!isFinite(s))throw new RangeError(\"'To' value must be a number\");var a=n>s;if(a){var u=n;n=s,s=u}var c=void 0===r.numberOfPoints?100:r.numberOfPoints;if(isNaN(c)||!isFinite(c))throw new RangeError(\"'Number of points' value must be a number\");if(1>c)throw new RangeError(\"the number of point must be higher than 1\");var l=\"slot\"==(\"slot\"===r.variant?\"slot\":\"smooth\")?o(t,e,n,s,c):i(t,e,n,s,c);return a?l.reverse():l},n.integral=s},function(t,e,r){\"use strict\";e.SNV=function(t){for(var e=n.mean(t),r=n.standardDeviation(t),i=t.slice(),o=0;o<t.length;o++)i[o]=(i[o]-e)/r;return i};var n=r(2).array},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(14),i=n&&n.__esModule?n:{default:n};e.default=class extends i.default{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(14),i=n&&n.__esModule?n:{default:n};e.default=class extends i.default{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(14),i=n&&n.__esModule?n:{default:n},o=r(23);e.default=class extends i.default{constructor(t,e,r,n,i){(0,o.checkRange)(t,e,r,n,i),super(t,r-e+1,i-n+1),this.startRow=e,this.startColumn=n}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(14),i=n&&n.__esModule?n:{default:n},o=r(23);e.default=class extends i.default{constructor(t,e,r){var n=(0,o.checkIndices)(t,e,r);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(14),i=n&&n.__esModule?n:{default:n};e.default=class extends i.default{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(14),i=n&&n.__esModule?n:{default:n};e.default=class extends i.default{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(14),i=n&&n.__esModule?n:{default:n};e.default=class extends i.default{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return t=o.default.checkMatrix(t),e=o.default.checkMatrix(e),t.isSquare()?new s.default(t).solve(e):new a.default(t).solve(e)}Object.defineProperty(e,\"__esModule\",{value:!0}),e.inverse=function(t){return i(t=o.default.checkMatrix(t),o.default.eye(t.rows))},e.solve=i;var o=n(r(4)),s=n(r(33)),a=n(r(53))},function(t,e,r){\"use strict\";function n(t,e){if(e=Object.assign({},d,e),!(this instanceof n))return new n(t,e);if(!(t=h.default.checkMatrix(t)).isSquare())throw new Error(\"Matrix is not a square matrix\");var r,u,c=t.columns,l=(0,f.getFilled2DArray)(c,c,0),p=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(r=0;r<c;r++)for(u=0;u<c;u++)l[r][u]=g.get(r,u);i(c,m,p,l),o(c,m,p,l)}else{var v=(0,f.getFilled2DArray)(c,c,0),y=Array(c);for(u=0;u<c;u++)for(r=0;r<c;r++)v[r][u]=g.get(r,u);s(c,v,y,l),a(c,m,p,l,v)}this.n=c,this.e=m,this.d=p,this.V=l}function i(t,e,r,n){var i,o,s,a,c,l,h,f;for(c=0;c<t;c++)r[c]=n[t-1][c];for(a=t-1;0<a;a--){for(f=0,s=0,l=0;l<a;l++)f+=u(r[l]);if(0===f)for(e[a]=r[a-1],c=0;c<a;c++)r[c]=n[a-1][c],n[a][c]=0,n[c][a]=0;else{for(l=0;l<a;l++)r[l]/=f,s+=r[l]*r[l];for(i=r[a-1],o=R(s),0<i&&(o=-o),e[a]=f*o,s-=i*o,r[a-1]=i-o,c=0;c<a;c++)e[c]=0;for(c=0;c<a;c++){for(n[c][a]=i=r[c],o=e[c]+n[c][c]*i,l=c+1;l<=a-1;l++)o+=n[l][c]*r[l],e[l]+=n[l][c]*i;e[c]=o}for(i=0,c=0;c<a;c++)e[c]/=s,i+=e[c]*r[c];for(h=i/(s+s),c=0;c<a;c++)e[c]-=h*r[c];for(c=0;c<a;c++){for(i=r[c],o=e[c],l=c;l<=a-1;l++)n[l][c]-=i*e[l]+o*r[l];r[c]=n[a-1][c],n[a][c]=0}}r[a]=s}for(a=0;a<t-1;a++){if(n[t-1][a]=n[a][a],n[a][a]=1,0!==(s=r[a+1])){for(l=0;l<=a;l++)r[l]=n[l][a+1]/s;for(c=0;c<=a;c++){for(o=0,l=0;l<=a;l++)o+=n[l][a+1]*n[l][c];for(l=0;l<=a;l++)n[l][c]-=o*r[l]}}for(l=0;l<=a;l++)n[l][a+1]=0}for(c=0;c<t;c++)r[c]=n[t-1][c],n[t-1][c]=0;n[t-1][t-1]=1,e[0]=0}function o(t,e,r,n){var i,o,s,a,c,l,h,d,p,m,g,v,y,w,x,b;for(s=1;s<t;s++)e[s-1]=e[s];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(r[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=(0,f.hypotenuse)(d=(r[l+1]-(i=r[l]))/(2*e[l]),1),0>d&&(p=-p),r[l]=e[l]/(d+p),r[l+1]=e[l]*(d+p),m=r[l+1],o=i-r[l],s=l+2;s<t;s++)r[s]-=o;for(_+=o,d=r[h],v=g=1,y=g,w=e[l+1],x=0,b=0,s=h-1;s>=l;s--)for(y=v,v=g,b=x,i=g*e[s],o=g*d,p=(0,f.hypotenuse)(d,e[s]),e[s+1]=x*p,d=(g=d/p)*r[s]-(x=e[s]/p)*i,r[s+1]=o+x*(g*i+x*r[s]),c=0;c<t;c++)n[c][s+1]=x*n[c][s]+g*(o=n[c][s+1]),n[c][s]=g*n[c][s]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),r[l]=g*d}while(u(e[l])>E*S);r[l]+=_,e[l]=0}for(s=0;s<t-1;s++){for(c=s,d=r[s],a=s+1;a<t;a++)r[a]<d&&(c=a,d=r[a]);if(c!==s)for(r[c]=r[s],r[s]=d,a=0;a<t;a++)d=n[a][s],n[a][s]=n[a][c],n[a][c]=d}}function s(t,e,r,n){var i,o,s,a,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,a=l;a<=f;a++)h+=u(e[a][l-1]);if(0!==h){for(s=0,a=f;a>=l;a--)r[a]=e[a][l-1]/h,s+=r[a]*r[a];for(o=R(s),0<r[l]&&(o=-o),s-=r[l]*o,r[l]-=o,c=l;c<t;c++){for(i=0,a=f;a>=l;a--)i+=r[a]*e[a][c];for(i/=s,a=l;a<=f;a++)e[a][c]-=i*r[a]}for(a=0;a<=f;a++){for(i=0,c=f;c>=l;c--)i+=r[c]*e[a][c];for(i/=s,c=l;c<=f;c++)e[a][c]-=i*r[c]}r[l]=h*r[l],e[l][l-1]=h*o}}for(a=0;a<t;a++)for(c=0;c<t;c++)n[a][c]=a===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(a=l+1;a<=f;a++)r[a]=e[a][l-1];for(c=l;c<=f;c++){for(o=0,a=l;a<=f;a++)o+=r[a]*n[a][c];for(o=o/r[l]/e[l][l-1],a=l;a<=f;a++)n[a][c]+=o*r[a]}}}function a(t,e,r,n,i){var o,s,a,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,k=0,C=0,L=0,P=0,D=0,O=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(r[o]=i[o][o],e[o]=0),s=M(o-1,0);s<t;s++)k+=u(i[o][s]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=k),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,r[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(O=R(u(L=(C=(i[S-1][S-1]-i[S][S])/2)*C+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=L){for(r[S-1]=p+(O=0<=C?C+O:C-O),r[S]=r[S-1],0!==O&&(r[S]=p-d/O),e[S-1]=0,e[S]=0,C=(p=i[S][S-1])/(D=u(p)+u(O)),C/=P=R(C*C+(L=O/D)*L),L/=P,s=S-1;s<t;s++)i[S-1][s]=L*(O=i[S-1][s])+C*i[S][s],i[S][s]=L*i[S][s]-C*O;for(o=0;o<=S;o++)i[o][S-1]=L*(O=i[o][S-1])+C*i[o][S],i[o][S]=L*i[o][S]-C*O;for(o=0;o<=E;o++)n[o][S-1]=L*(O=n[o][S-1])+C*n[o][S],n[o][S]=L*n[o][S]-C*O}else r[S-1]=p+C,r[S]=p+C,e[S-1]=O,e[S]=-O;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(C=((P=p-(O=i[h][h]))*(D=m-O)-d)/i[h+1][h]+i[h][h+1],L=i[h+1][h+1]-O-P-D,P=i[h+2][h+1],C/=D=u(C)+u(L)+u(P),L/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(L)+u(P))<T*(u(C)*(u(i[h-1][h-1])+u(O)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(a=h;a<=S-1&&(b=a!==S-1,a!==h&&(C=i[a][a-1],L=i[a+1][a-1],P=b?i[a+2][a-1]:0,0!==(p=u(C)+u(L)+u(P))&&(C/=p,L/=p,P/=p)),0!==p);a++)if(D=R(C*C+L*L+P*P),0>C&&(D=-D),0!==D){for(a===h?l!==h&&(i[a][a-1]=-i[a][a-1]):i[a][a-1]=-D*p,p=(C+=D)/D,m=L/D,O=P/D,L/=C,P/=C,s=a;s<t;s++)C=i[a][s]+L*i[a+1][s],b&&(i[a+2][s]=i[a+2][s]-(C+=P*i[a+2][s])*O),i[a][s]-=C*p,i[a+1][s]=i[a+1][s]-C*m;for(o=0;o<=v(S,a+3);o++)C=p*i[o][a]+m*i[o][a+1],b&&(i[o][a+2]=i[o][a+2]-(C+=O*i[o][a+2])*P),i[o][a]-=C,i[o][a+1]=i[o][a+1]-C*L;for(o=0;o<=E;o++)C=p*n[o][a]+m*n[o][a+1],b&&(n[o][a+2]=n[o][a+2]-(C+=O*n[o][a+2])*P),n[o][a]-=C,n[o][a+1]=n[o][a+1]-C*L}}}if(0!==k){for(S=t-1;0<=S;S--)if(C=r[S],0===(L=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-C,P=0,s=l;s<=S;s++)P+=i[o][s]*i[s][S];if(0>e[o])O=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*k):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-O*P)/(L=(r[o]-C)*(r[o]-C)+e[o]*e[o]),i[o+1][S]=u(p)>u(O)?(-P-d*f)/p:(-D-m*f)/O),1<T*(f=u(i[o][S]))*f)for(s=o;s<=S;s++)i[s][S]/=f}else if(0>L)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=L/i[S][S-1],i[S-1][S]=-(i[S][S]-C)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-C,L),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,s=l;s<=S;s++)g+=i[o][s]*i[s][S-1],y+=i[o][s]*i[s][S];if(d=i[o][o]-C,0>e[o])O=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,L),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(r[o]-C)*L,0==(w=(r[o]-C)*(r[o]-C)+e[o]*e[o]-L*L)&&0===x&&(w=T*k*(u(d)+u(L)+u(p)+u(m)+u(O))),_=c(p*P-O*g+L*y,p*D-O*y-L*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(O)+u(L)?(i[o+1][S-1]=(-g-d*i[o][S-1]+L*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-L*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],O,L),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(s=o;s<=S;s++)i[s][S-1]=i[s][S-1]/f,i[s][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(s=o;s<t;s++)n[o][s]=i[o][s];for(s=t-1;s>=0;s--)for(o=0;o<=E;o++){for(O=0,a=0;a<=v(s,E);a++)O+=n[o][a]*i[a][s];n[o][s]=O}}}function c(t,e,r,n){var i,o;return u(r)>u(n)?[(t+(i=n/r)*e)/(o=r+i*n),(e-i*t)/o]:[((i=r/n)*t+e)/(o=n+i*r),(i*e-t)/o]}Object.defineProperty(e,\"__esModule\",{value:!0});var l=r(4),h=l&&l.__esModule?l:{default:l},f=r(34),d={assumeSymmetric:!1};n.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return h.default.isMatrix(this.V)||(this.V=new h.default(this.V)),this.V},get diagonalMatrix(){var t,e,r=this.n,n=this.e,i=this.d,o=new h.default(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)o[t][e]=0;o[t][t]=i[t],0<n[t]?o[t][t+1]=n[t]:0>n[t]&&(o[t][t-1]=n[t])}return o}},e.default=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);if(!(t=o.default.checkMatrix(t)).isSymmetric())throw new Error(\"Matrix is not symmetric\");var e,r,i,s=t,a=s.rows,u=new o.default(a,a),c=!0;for(r=0;r<a;r++){var l=u[r],h=0;for(i=0;i<r;i++){var f=u[i],d=0;for(e=0;e<i;e++)d+=f[e]*l[e];l[i]=d=(s[r][i]-d)/u[i][i],h+=d*d}for(c&=0<(h=s[r][r]-h),u[r][r]=R(M(h,0)),i=r+1;i<a;i++)u[r][i]=0}if(!c)throw new Error(\"Matrix is not positive definite\");this.L=u}Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(4),o=i&&i.__esModule?i:{default:i};n.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=o.default.checkMatrix(t);var e=this.L,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix dimensions do not match\");var n,i,s,a=t.columns,u=t.clone();for(s=0;s<r;s++)for(i=0;i<a;i++){for(n=0;n<s;n++)u[s][i]-=u[n][i]*e[s][n];u[s][i]/=e[s][s]}for(s=r-1;0<=s;s--)for(i=0;i<a;i++){for(n=s+1;n<r;n++)u[s][i]-=u[n][i]*e[n][s];u[s][i]/=e[s][s]}return u}},e.default=n},function(t,e,r){\"use strict\";function n(t){for(var e,r=\"\",n=0;n<t.length;n++)e=(t[n]>>>0).toString(2),r+=\"00000000000000000000000000000000\".substr(e.length)+e;return r}var i=r(120);t.exports={count:function(t){for(var e=0,r=0;r<t.length;r++)e+=i[255&t[r]]+i[255&t[r]>>8]+i[255&t[r]>>16]+i[255&t[r]>>24];return e},and:function(t,e){for(var r=Array(t.length),n=0;n<t.length;n++)r[n]=t[n]&e[n];return r},or:function(t,e){for(var r=Array(t.length),n=0;n<t.length;n++)r[n]=t[n]|e[n];return r},xor:function(t,e){for(var r=Array(t.length),n=0;n<t.length;n++)r[n]=t[n]^e[n];return r},not:function(t){for(var e=Array(t.length),r=0;r<e.length;r++)e[r]=~t[r];return e},getBit:function(t,e){return!!(t[e>>5]&1<<31-e%32)},setBit:function(t,e,r){var n=e>>5,i=1<<31-e%32;return t[n]=r?i|t[n]:~i&t[n],t},toBinaryString:n,parseBinaryString:function(t){for(var e=t.length/32,r=Array(e),n=0;n<e;n++)r[n]=0|parseInt(t.substr(32*n,32),2);return r},toHexString:function(t){for(var e,r=\"\",n=0;n<t.length;n++)e=(t[n]>>>0).toString(16),r+=\"00000000\".substr(e.length)+e;return r},parseHexString:function(t){for(var e=t.length/8,r=Array(e),n=0;n<e;n++)r[n]=0|parseInt(t.substr(8*n,8),16);return r},toDebug:function(t){for(var e=n(t),r=\"\",i=0;i<t.length;i++){r+=\"0000\".substr((32*i).toString(16).length)+(32*i).toString(16)+\":\";for(var o=0;32>o;o+=4)r+=\" \"+e.substr(32*i+o,4);i<t.length-1&&(r+=\"\\n\")}return r}}},function(t){\"use strict\";for(var e=Array(256),r=0;256>r;r++){for(var n=r,i=0;n;)n&=n-1,i++;e[r]=i}t.exports=e},function(t){\"use strict\";t.exports=function(t,e){t=t||0;for(var r=Array(t),n=0;n<t;n++)r[n]=e;return r}},function(t,e,r){\"use strict\";var n=r(55),i=r(56).asc,o=2147483647,s=[o,5,11,23,47,97,197,397,797,1597,3203,6421,12853,25717,51437,102877,205759,411527,823117,1646237,3292489,6584983,13169977,26339969,52679969,105359939,210719881,421439783,842879579,1685759167,433,877,1759,3527,7057,14143,28289,56591,113189,226379,452759,905551,1811107,3622219,7244441,14488931,28977863,57955739,115911563,231823147,463646329,927292699,1854585413,953,1907,3821,7643,15287,30577,61169,122347,244703,489407,978821,1957651,3915341,7830701,15661423,31322867,62645741,125291483,250582987,501165979,1002331963,2004663929,1039,2081,4177,8363,16729,33461,66923,133853,267713,535481,1070981,2141977,4283963,8567929,17135863,34271747,68543509,137087021,274174111,548348231,1096696463,31,67,137,277,557,1117,2237,4481,8963,17929,35863,71741,143483,286973,573953,1147921,2295859,4591721,9183457,18366923,36733847,73467739,146935499,293871013,587742049,1175484103,599,1201,2411,4831,9677,19373,38747,77509,155027,310081,620171,1240361,2480729,4961459,9922933,19845871,39691759,79383533,158767069,317534141,635068283,1270136683,311,631,1277,2557,5119,10243,20507,41017,82037,164089,328213,656429,1312867,2625761,5251529,10503061,21006137,42012281,84024581,168049163,336098327,672196673,1344393353,3,7,17,37,79,163,331,673,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,43,89,179,359,719,1439,2879,5779,11579,23159,46327,92657,185323,370661,741337,1482707,2965421,5930887,11861791,23723597,47447201,94894427,189788857,379577741,759155483,1518310967,379,761,1523,3049,6101,12203,24407,48817,97649,195311,390647,781301,1562611,3125257,6250537,12501169,25002389,50004791,100009607,200019221,400038451,800076929,1600153859,13,29,59,127,257,521,1049,2099,4201,8419,16843,33703,67409,134837,269683,539389,1078787,2157587,4315183,8630387,17260781,34521589,69043189,138086407,276172823,552345671,1104691373,19,41,83,167,337,677,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,53,107,223,449,907,1823,3659,7321,14653,29311,58631,117269,234539,469099,938207,1876417,3752839,7505681,15011389,30022781,60045577,120091177,240182359,480364727,960729461,1921458943];s.sort(i),e.nextPrime=function(t){var e=n(s,t,i);return 0>e&&(e=~e),s[e]},e.largestPrime=o},function(t){\"use strict\";t.exports=Number.isNaN||function(t){return t!=t}},function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.RobustPolynomialRegression=e.TheilSenRegression=e.PolinomialFitting2D=e.KRR=e.KernelRidgeRegression=e.NonLinearRegression=e.NLR=e.MultivariateLinearRegression=e.PowerRegression=e.ExponentialRegression=e.PolynomialRegression=e.SLR=e.SimpleLinearRegression=void 0;var i=r(36);Object.defineProperty(e,\"SimpleLinearRegression\",{enumerable:!0,get:function(){return n(i).default}}),Object.defineProperty(e,\"SLR\",{enumerable:!0,get:function(){return n(i).default}});var o=r(58);Object.defineProperty(e,\"PolynomialRegression\",{enumerable:!0,get:function(){return n(o).default}});var s=r(127);Object.defineProperty(e,\"ExponentialRegression\",{enumerable:!0,get:function(){return n(s).default}});var a=r(128);Object.defineProperty(e,\"PowerRegression\",{enumerable:!0,get:function(){return n(a).default}});var u=r(129);Object.defineProperty(e,\"MultivariateLinearRegression\",{enumerable:!0,get:function(){return n(u).default}});var c=r(130);Object.defineProperty(e,\"KernelRidgeRegression\",{enumerable:!0,get:function(){return n(c).default}}),Object.defineProperty(e,\"KRR\",{enumerable:!0,get:function(){return n(c).default}});var l=r(141);Object.defineProperty(e,\"PolinomialFitting2D\",{enumerable:!0,get:function(){return n(l).default}});var h=r(142);Object.defineProperty(e,\"TheilSenRegression\",{enumerable:!0,get:function(){return n(h).default}});var f=r(143);Object.defineProperty(e,\"RobustPolynomialRegression\",{enumerable:!0,get:function(){return n(f).default}});var d={PotentialRegression:n(r(144)).default};e.NLR=d,e.NonLinearRegression=d},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t,e){return 0>t?(t=0-t,\"number\"==typeof e?\"- \"+t.toPrecision(e):\"- \"+t.toString()):\"number\"==typeof e?t.toPrecision(e):t.toString()}},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t,e){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError(\"x and y must be arrays\");if(t.length!==e.length)throw new RangeError(\"x and y arrays must have the same length\")}},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var s=n(3),a=i(s),u=i(n(36));class c extends a.default{constructor(t,e){super(),!0===t?(this.A=e.A,this.B=e.B):((0,s.checkArrayLength)(t,e),function(t,e,n){for(var i=e.length,s=Array(i),a=0;a<i;a++)s[a]=r(n[a]);var c=new u.default(e,s);t.A=c.slope,t.B=o(c.intercept)}(this,t,e))}_predict(t){return this.B*o(t*this.A)}toJSON(){return{name:\"exponentialRegression\",A:this.A,B:this.B}}toString(t){return\"f(x) = \"+(0,s.maybeToPrecision)(this.B,t)+\" * e^(\"+(0,s.maybeToPrecision)(this.A,t)+\" * x)\"}toLaTeX(t){return 0<=this.A?\"f(x) = \"+(0,s.maybeToPrecision)(this.B,t)+\"e^{\"+(0,s.maybeToPrecision)(this.A,t)+\"x}\":\"f(x) = \\\\frac{\"+(0,s.maybeToPrecision)(this.B,t)+\"}{e^{\"+(0,s.maybeToPrecision)(-this.A,t)+\"x}}\"}static load(t){if(\"exponentialRegression\"!==t.name)throw new TypeError(\"not a exponential regression model\");return new c(!0,t)}}e.default=c},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var s=n(3),a=i(s),u=i(n(36));class l extends a.default{constructor(t,e){super(),!0===t?(this.A=e.A,this.B=e.B):((0,s.checkArrayLength)(t,e),function(t,e,n){for(var i=e.length,s=Array(i),a=Array(i),c=0;c<i;c++)s[c]=r(e[c]),a[c]=r(n[c]);var l=new u.default(s,a);t.A=o(l.intercept),t.B=l.slope}(this,t,e))}_predict(t){return this.A*c(t,this.B)}toJSON(){return{name:\"powerRegression\",A:this.A,B:this.B}}toString(t){return\"f(x) = \"+(0,s.maybeToPrecision)(this.A,t)+\" * x^\"+(0,s.maybeToPrecision)(this.B,t)}toLaTeX(t){return 0<=this.B?\"f(x) = \"+(0,s.maybeToPrecision)(this.A,t)+\"x^{\"+(0,s.maybeToPrecision)(this.B,t)+\"}\":\"f(x) = \\\\frac{\"+(0,s.maybeToPrecision)(this.A,t)+\"}{x^{\"+(0,s.maybeToPrecision)(-this.B,t)+\"}}\"}static load(t){if(\"powerRegression\"!==t.name)throw new TypeError(\"not a power regression model\");return new l(!0,t)}}e.default=l},function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(13),o=n(i),s=n(r(3));class a extends s.default{constructor(t,e,r={}){var n=r.intercept,s=!(void 0!==n)||n;super(),!0===t?(this.weights=e.weights,this.inputs=e.inputs,this.outputs=e.outputs,this.intercept=e.intercept):(s&&(t=new o.default(t)).addColumn(Array(t.length).fill(1)),this.weights=new i.SVD(t,{autoTranspose:!0}).solve(e).to2DArray(),this.inputs=t[0].length,this.outputs=e[0].length,s&&this.inputs--,this.intercept=s)}predict(t){if(Array.isArray(t)){if(\"number\"==typeof t[0])return this._predict(t);if(Array.isArray(t[0])){for(var e=Array(t.length),r=0;r<t.length;r++)e[r]=this._predict(t[r]);return e}}throw new TypeError(\"x must be a matrix or array of numbers\")}_predict(t){var e=Array(this.outputs);if(this.intercept)for(var r=0;r<this.outputs;r++)e[r]=this.weights[this.inputs][r];else e.fill(0);for(var n=0;n<this.inputs;n++)for(var i=0;i<this.outputs;i++)e[i]+=this.weights[n][i]*t[n];return e}score(){throw new Error(\"score method is not implemented yet\")}toJSON(){return{name:\"multivariateLinearRegression\",weights:this.weights,inputs:this.inputs,outputs:this.outputs,intercept:this.intercept}}static load(t){if(\"multivariateLinearRegression\"!==t.name)throw new Error(\"not a MLR model\");return new a(!0,t)}}e.default=a},function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(13),o=n(r(37)),s=n(r(3)),a={lambda:.1,kernelType:\"gaussian\",kernelOptions:{},computeCoefficient:!1};class u extends s.default{constructor(t,e,r){if(super(),!0===t)this.alpha=e.alpha,this.inputs=e.inputs,this.kernelType=e.kernelType,this.kernelOptions=e.kernelOptions,this.kernel=new o.default(e.kernelType,e.kernelOptions);else{r=Object.assign({},a,r);var n=new o.default(r.kernelType,r.kernelOptions),s=n.compute(t),u=t.length;s.add(i.Matrix.eye(u,u).mul(r.lambda)),this.alpha=(0,i.solve)(s,e),this.inputs=t,this.kernelType=r.kernelType,this.kernelOptions=r.kernelOptions,this.kernel=n}}_predict(t){return this.kernel.compute([t],this.inputs).mmul(this.alpha)[0]}toJSON(){return{name:\"kernelRidgeRegression\",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(t){if(\"kernelRidgeRegression\"!==t.name)throw new TypeError(\"not a KRR model\");return new u(!0,t)}}e.default=u},function(t,e,r){\"use strict\";var n=r(0).squared,i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma,this.divisor=2*t.sigma*t.sigma}compute(t,e){var r=n(t,e);return o(-r/this.divisor)}}},function(t){\"use strict\";var e={degree:1,constant:1,scale:1};t.exports=class{constructor(t){t=Object.assign({},e,t),this.degree=t.degree,this.constant=t.constant,this.scale=t.scale}compute(t,e){for(var r=0,n=0;n<t.length;n++)r+=t[n]*e[n];return c(this.scale*r+this.constant,this.degree)}}},function(t){\"use strict\";var e={sigma:1,degree:1};t.exports=class{constructor(t){t=Object.assign({},e,t),this.sigma=t.sigma,this.degree=t.degree}compute(t,e){for(var r=0,n=v(t.length,e.length),i=1;i<=n;++i)r+=c(o(-this.sigma*c(c(t[i-1],i)-c(e[i-1],i),2)),this.degree);return r}}},function(t,e,r){\"use strict\";var n=r(0).squared,i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma}compute(t,e){return 1/(1+n(t,e)/(this.sigma*this.sigma))}}},function(t,e,r){\"use strict\";var n=r(0),i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma,this.divisor=2*t.sigma*t.sigma}compute(t,e){var r=n(t,e);return o(-r/this.divisor)}}},function(t){\"use strict\";t.exports=class{compute(t,e){for(var r=v(t.length,e.length),n=0,i=0;i<r;++i)n+=v(t[i],e[i]);return n}}},function(t,e,r){\"use strict\";var n=r(0),i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma}compute(t,e){var r=n(t,e);return o(-r/this.sigma)}}},function(t,e,r){\"use strict\";var n=r(0).squared,i={constant:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.constant=t.constant}compute(t,e){return R(n(t,e)+this.constant*this.constant)}}},function(t,e,r){\"use strict\";var n=r(0).squared,i={constant:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.constant=t.constant}compute(t,e){var r=n(t,e);return 1-r/(r+this.constant)}}},function(t){\"use strict\";var e={alpha:.01,constant:-Math.E};t.exports=class{constructor(t){t=Object.assign({},e,t),this.alpha=t.alpha,this.constant=t.constant}compute(t,e){for(var r=0,i=0;i<t.length;i++)r+=t[i]*e[i];return n(this.alpha*r+this.constant)}}},function(t,e,r){\"use strict\";function n(t,e){for(var r=t.clone(),n=0;n<t.rows;++n)r[n][0]=c(r[n][0],e);return r}function i(t,e){this[t][e]=u(this[t][e])}Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(13),s=r(3),a=s&&s.__esModule?s:{default:s},l={order:2};class h extends a.default{constructor(t,e,r){super(),!0===t?(this.coefficients=o.Matrix.columnVector(e.coefficients),this.order=e.order,e.r&&(this.r=e.r,this.r2=e.r2),e.chi2&&(this.chi2=e.chi2)):(r=Object.assign({},l,r),this.order=r.order,this.coefficients=[],this.X=t,this.y=e,this.train(this.X,this.y,r))}train(t,e){if(o.Matrix.isMatrix(t)||(t=new o.Matrix(t)),o.Matrix.isMatrix(e)||(e=o.Matrix.columnVector(e)),e.rows!==t.rows&&(e=e.transpose()),2!==t.columns)throw new RangeError(\"You give X with \"+t.columns+\" columns and it must be 2\");if(t.rows!==e.rows)throw new RangeError(\"X and y must have the same rows\");var r=t.rows,s=(this.order+2)*(this.order+1)/2;this.coefficients=Array(s);var a=t.getColumnVector(0),u=t.getColumnVector(1),l=1/a.clone().apply(i).max(),h=1/u.clone().apply(i).max(),f=1/e.clone().apply(i).max();a.mulColumn(0,l),u.mulColumn(0,h),e.mulColumn(0,f);for(var d,p=new o.Matrix(r,s),m=0,g=0;g<=this.order;++g){d=this.order-g;for(var v,y=0;y<=d;++y)v=n(a,g).mulColumnVector(n(u,y)),p.setColumn(m,v),m++}var w=new o.SVD(p.transpose(),{computeLeftSingularVectors:!0,computeRightSingularVectors:!0,autoTranspose:!1}),x=o.Matrix.rowVector(w.diagonal);x=x.apply(function(t,e){this[t][e]=1e-15<=this[t][e]?1/this[t][e]:0});var b=o.Matrix.zeros(r,s);for(g=0;g<s;++g)b[g][g]=x[0][g];var _=w.rightSingularVectors;for(this.coefficients=w.leftSingularVectors.mmul((x=b).transpose()).mmul(_.transpose()).mmul(e),m=0,g=0;g<=s;++g)for(d=this.order-g,y=0;y<=d;++y)this.coefficients[m][0]=this.coefficients[m][0]*c(l,g)*c(h,y)/f,m++}_predict(t){for(var e=t[0],r=t[1],n=0,i=0,o=0;o<=this.order;o++)for(var s=0;s<=this.order-o;s++)n+=c(e,o)*c(r,s)*this.coefficients[i][0],i++;return n}toJSON(){return{name:\"polyfit2D\",order:this.order,coefficients:this.coefficients}}static load(t){if(\"polyfit2D\"!==t.name)throw new TypeError(\"not a polyfit2D model\");return new h(!0,t)}}e.default=h},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(3),i=n&&n.__esModule?n:{default:n},o=r(2).array.median;class s extends i.default{constructor(t,e){super(),!0===t?(this.slope=e.slope,this.intercept=e.intercept,this.coefficients=e.coefficients):((0,n.checkArrayLength)(t,e),function(t,e,r){for(var n=e.length,i=Array(n*n),s=0,a=0;a<n;++a)for(var u=a+1;u<n;++u)e[a]!==e[u]&&(i[s++]=(r[u]-r[a])/(e[u]-e[a]));i.length=s;for(var c=o(i),l=Array(n),h=0;h<n;++h)l[h]=r[h]-c*e[h];t.slope=c,t.intercept=o(l),t.coefficients=[t.intercept,t.slope]}(this,t,e))}toJSON(){return{name:\"TheilSenRegression\",slope:this.slope,intercept:this.intercept}}_predict(t){return this.slope*t+this.intercept}computeX(t){return(t-this.intercept)/this.slope}toString(t){var e=\"f(x) = \";if(this.slope){var r=(0,n.maybeToPrecision)(this.slope,t);if(e+=(1e-5>u(r-1)?\"\":r+\" * \")+\"x\",this.intercept){var i=u(this.intercept);e+=\" \"+(i===this.intercept?\"+\":\"-\")+\" \"+(0,n.maybeToPrecision)(i,t)}}else e+=(0,n.maybeToPrecision)(this.intercept,t);return e}toLaTeX(t){return this.toString(t)}static load(t){if(\"TheilSenRegression\"!==t.name)throw new TypeError(\"not a Theil-Sen model\");return new s(!0,t)}}e.default=s},function(t,e,r){\"use strict\";function n(t,e){for(var r=t.slice(),n=t.slice(),i=0;i<r.length;i++){n[i]=[t[i].y],r[i]=Array(e.length);for(var o=0;o<e.length;o++)r[i][o]=c(t[i].x,e[o])}return(0,u.solve)(r,n).to1DArray()}function i(t,e,r){for(var n=0,i=0;i<e.length;i++)n+=r[i]*c(t,e[i]);return n}function o(t){t.sort((t,e)=>t.residual-e.residual);var e=t.length,r=g(e/2);return 0==e%2?t[r-1]:t[r]}Object.defineProperty(e,\"__esModule\",{value:!0});var s=r(3),a=s&&s.__esModule?s:{default:s},u=r(13);class l extends a.default{constructor(t,e,r){super(),!0===t?(this.degree=e.degree,this.powers=e.powers,this.coefficients=e.coefficients):((0,s.checkArrayLength)(t,e),function(t,e,r,s){for(var a=Array(s),u=0;u<s;u++)a[u]=u;for(var c,l=function(t,e,r){for(var n=g(t.length/r),i=Array(n),o=0;o<t.length;o++){for(var s=g(Math.random()*n),a=0;a<t.length;){if(!i[s]){i[s]=[{x:t[o],y:e[o]}];break}if(i[s].length<r){i[s].push({x:t[o],y:e[o]});break}a++,s=(s+1)%n}if(a===t.length)return i}return i}(e,r,s),h=0;h<l.length;h++){for(var f=n(l[h],a),d=e.slice(),p=0;p<e.length;p++)d[p]=r[p]-i(e[p],a,f),d[p]={residual:d[p]*d[p],coefficients:f};var m=o(d);(!c||m.residual<c.residual)&&(c=m)}t.degree=s,t.powers=a,t.coefficients=c.coefficients}(this,t,e,r))}toJSON(){return{name:\"robustPolynomialRegression\",degree:this.degree,powers:this.powers,coefficients:this.coefficients}}_predict(t){return i(t,this.powers,this.coefficients)}toString(t){return this._toFormula(t,!1)}toLaTeX(t){return this._toFormula(t,!0)}_toFormula(t,e){var r=\"^\",n=\"\",i=\" * \";e&&(r=\"^{\",n=\"}\",i=\"\");for(var o=\"\",a=\"\",u=0;u<this.coefficients.length;u++)a=\"\",0!==this.coefficients[u]&&(a=0===this.powers[u]?(0,s.maybeToPrecision)(this.coefficients[u],t):1===this.powers[u]?(0,s.maybeToPrecision)(this.coefficients[u],t)+i+\"x\":(0,s.maybeToPrecision)(this.coefficients[u],t)+i+\"x\"+r+this.powers[u]+n,0<this.coefficients[u]&&u!==this.coefficients.length-1?a=\" + \"+a:u!==this.coefficients.length-1&&(a=\" \"+a)),o=a+o;return\"+\"===o.charAt(0)&&(o=o.slice(1)),\"f(x) = \"+o}static load(t){if(\"robustPolynomialRegression\"!==t.name)throw new TypeError(\"not a RobustPolynomialRegression model\");return new l(!0,t)}}e.default=l},function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(3),o=n(i),s=n(r(58));class a extends o.default{constructor(t,e,r){if(super(),!0===t)this.A=e.A,this.M=e.M;else{if(t.length!==e.length)throw new RangeError(\"input and output array have a different length\");var n=new s.default(t,e,[r]);this.A=n.coefficients[0],this.M=r}}_predict(t){return this.A*c(t,this.M)}toJSON(){return{name:\"potentialRegression\",A:this.A,M:this.M}}toString(t){return\"f(x) = \"+(0,i.maybeToPrecision)(this.A,t)+\" * x^\"+this.M}toLaTeX(t){return 0<=this.M?\"f(x) = \"+(0,i.maybeToPrecision)(this.A,t)+\"x^{\"+this.M+\"}\":\"f(x) = \\\\frac{\"+(0,i.maybeToPrecision)(this.A,t)+\"}{x^{\"+-this.M+\"}}\"}static load(t){if(\"potentialRegression\"!==t.name)throw new TypeError(\"not a potential regression model\");return new a(!0,t)}}e.default=a},function(t,e,r){\"use strict\";e.distance=r(146),e.similarity=r(183)},function(t,e,r){\"use strict\";e.additiveSymmetric=r(147),e.avg=r(148),e.bhattacharyya=r(149),e.canberra=r(150),e.chebyshev=r(151),e.clark=r(152),e.czekanowski=r(153),e.dice=r(60),e.divergence=r(154),e.euclidean=r(0),e.fidelity=r(155),e.gower=r(156),e.harmonicMean=r(157),e.hellinger=r(158),e.innerProduct=r(159),e.intersection=r(61),e.jaccard=r(62),e.jeffreys=r(160),e.jensenDifference=r(161),e.jensenShannon=r(162),e.kdivergence=r(163),e.kulczynski=r(63),e.kullbackLeibler=r(164),e.kumarHassebrook=r(165),e.kumarJohnson=r(166),e.lorentzian=r(167),e.manhattan=r(168),e.matusita=r(169),e.minkowski=r(170),e.motyka=r(64),e.neyman=r(171),e.pearson=r(172),e.probabilisticSymmetric=r(173),e.ruzicka=r(174),e.soergel=r(175),e.sorensen=r(176),e.squared=r(177),e.squaredChord=r(65),e.squaredEuclidean=r(0).squared,e.taneja=r(178),e.tanimoto=r(179),e.topsoe=r(180),e.tree=r(181),e.waveHedges=r(182)},function(t){\"use strict\";t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=(t[r]-e[r])*(t[r]-e[r])*(t[r]+e[r])/(t[r]*e[r]);return 2*i}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0,s=0;s<r;s++)i+=o=u(t[s]-e[s]),n<o&&(n=o);return(n+i)/2}},function(t){\"use strict\";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=R(t[o]*e[o]);return-r(i)}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=u(t[i]-e[i])/(t[i]+e[i]);return n}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0;o<r;o++)n<(i=u(t[o]-e[o]))&&(n=i);return n}},function(t){\"use strict\";t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=R((t[r]-e[r])*(t[r]-e[r])/((t[r]+e[r])*(t[r]+e[r])));return 2*i}},function(t,e,r){\"use strict\";var n=r(59);t.exports=function(t,e){return 1-n(t,e)}},function(t){\"use strict\";t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=(t[r]-e[r])*(t[r]-e[r])/((t[r]+e[r])*(t[r]+e[r]));return 2*i}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=R(t[i]*e[i]);return n}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=u(t[i]-e[i]);return n/r}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=t[i]*e[i]/(t[i]+e[i]);return 2*n}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=R(t[i]*e[i]);return 2*R(1-n)}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=t[i]*e[i];return n}},function(t){\"use strict\";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=(t[o]-e[o])*r(t[o]/e[o]);return i}},function(t){\"use strict\";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=(t[o]*r(t[o])+e[o]*r(e[o]))/2-(t[o]+e[o])/2*r((t[o]+e[o])/2);return i}},function(t){\"use strict\";t.exports=function(t,e){for(var n=t.length,i=0,o=0,s=0;s<n;s++)i+=t[s]*r(2*t[s]/(t[s]+e[s])),o+=e[s]*r(2*e[s]/(t[s]+e[s]));return(i+o)/2}},function(t){\"use strict\";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=t[o]*r(2*t[o]/(t[o]+e[o]));return i}},function(t){\"use strict\";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=t[o]*r(t[o]/e[o]);return i}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0,s=0;s<r;s++)n+=t[s]*e[s],i+=t[s]*t[s],o+=e[s]*e[s];return n/(i+o-n)}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=c(t[i]*t[i]-e[i]*e[i],2)/(2*c(t[i]*e[i],1.5));return n}},function(t){\"use strict\";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=r(u(t[o]-e[o])+1);return i}},function(t){\"use strict\";t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=u(t[r]-e[r]);return i}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=R(t[i]*e[i]);return R(2-2*n)}},function(t){\"use strict\";t.exports=function(t,e,r){for(var n=0,i=t.length,o=0;n<i;n++)o+=c(u(t[n]-e[n]),r);return c(o,1/r)}},function(t){\"use strict\";t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=(t[r]-e[r])*(t[r]-e[r])/t[r];return i}},function(t){\"use strict\";t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=(t[r]-e[r])*(t[r]-e[r])/e[r];return i}},function(t){\"use strict\";t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=(t[r]-e[r])*(t[r]-e[r])/(t[r]+e[r]);return 2*i}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0;o<r;o++)n+=v(t[o],e[o]),i+=M(t[o],e[o]);return n/i}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0;o<r;o++)n+=u(t[o]-e[o]),i+=M(t[o],e[o]);return n/i}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0,o=0;o<r;o++)n+=u(t[o]-e[o]),i+=t[o]+e[o];return n/i}},function(t){\"use strict\";t.exports=function(t,e){for(var r=0,n=t.length,i=0;r<n;r++)i+=(t[r]-e[r])*(t[r]-e[r])/(t[r]+e[r]);return i}},function(t){\"use strict\";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=(t[o]+e[o])/2*r((t[o]+e[o])/(2*R(t[o]*e[o])));return i}},function(t,e,r){\"use strict\";var n=r(66);t.exports=function(t,e,r){if(r)return 1-n(t,e,r);for(var i=t.length,o=0,s=0,a=0,u=0;u<i;u++)o+=t[u],s+=e[u],a+=v(t[u],e[u]);return(o+s-2*a)/(o+s-a)}},function(t){\"use strict\";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=t[o]*r(2*t[o]/(t[o]+e[o]))+e[o]*r(2*e[o]/(t[o]+e[o]));return i}},function(t){\"use strict\";function e(t,r,n,i,o,s){if(o=o||.16,s=s||.01,!(i-n<o)){for(var a=0,u=0;t[u]<i;u++)t[u]>n&&(a+=r[u]);if(!(a<s)){for(var c=0,l=0;t[l]<i;l++)t[u]>n&&(c+=t[l]*r[l]);return 1e-5>(c/=a)-n||1e-5>i-c?void 0:c-n<o/4?e(t,r,c,i,o,s):i-c<o/4?e(t,r,n,c,o,s):{sum:a,center:c,left:e(t,r,n,c,o,s),right:e(t,r,c,i,o,s)}}}}var r={minWindow:.16,threshold:.01,alpha:.1,beta:.33,gamma:.001};t.exports={calc:function(t,n,i,s,a){for(var c in a=a||{},r)a.hasOwnProperty(c)||(a[c]=r[c]);return function t(e,r,n,i,s){return void 0===e||void 0===r?0:i*(n*v(e.sum,r.sum)/M(e.sum,r.sum)+(1-n)*o(-s*u(e.center-r.center)))+(1-i)*(t(e.left,r.left,n,i,s)+t(e.right,r.right,n,i,s))}(t.sum?t:e(t.x,t.y,i,s,a.minWindow,a.threshold),n.sum?n:e(n.x,n.y,i,s,a.minWindow,a.threshold),a.alpha,a.beta,a.gamma)},createTree:e}},function(t){\"use strict\";t.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)n+=1-v(t[i],e[i])/M(t[i],e[i]);return n}},function(t,e,r){\"use strict\";e.cosine=r(67),e.czekanowski=r(59),e.dice=r(184),e.intersection=r(185),e.jaccard=r(186),e.kulczynski=r(187),e.motyka=r(188),e.pearson=r(189),e.squaredChord=r(190),e.tanimoto=r(66)},function(t,e,r){\"use strict\";var n=r(60);t.exports=function(t,e){return 1-n(t,e)}},function(t,e,r){\"use strict\";var n=r(61);t.exports=function(t,e){return 1-n(t,e)}},function(t,e,r){\"use strict\";var n=r(62);t.exports=function(t,e){return 1-n(t,e)}},function(t,e,r){\"use strict\";var n=r(63);t.exports=function(t,e){return 1/n(t,e)}},function(t,e,r){\"use strict\";var n=r(64);t.exports=function(t,e){return 1-n(t,e)}},function(t,e,r){\"use strict\";var n=r(2).array,i=r(67);t.exports=function(t,e){for(var r=n.mean(t),o=n.mean(e),s=Array(t.length),a=Array(e.length),u=0;u<s.length;u++)s[u]=t[u]-r,a[u]=e[u]-o;return i(s,a)}},function(t,e,r){\"use strict\";var n=r(65);t.exports=function(t,e){return 1-n(t,e)}},function(t,e,r){\"use strict\";var n=r(192),i=r(57),o=r(35),s={windowSize:5,derivative:1,polynomial:2,pad:\"none\",padValue:\"replicate\"};t.exports=function(t,e,r){if(0==(r=o({},s,r)).windowSize%2||5>r.windowSize||!m(r.windowSize))throw new RangeError(\"Invalid window size (should be odd and at least 5 integer number)\");if(0>r.derivative||!m(r.derivative))throw new RangeError(\"Derivative should be a positive integer\");if(1>r.polynomial||!m(r.polynomial))throw new RangeError(\"Polynomial should be a positive integer\");var a,u,l=g(r.windowSize/2);\"pre\"===r.pad&&(t=i(t,{size:l,value:r.padValue}));var h=Array(t.length-2*l);if(5!==r.windowSize||2!==r.polynomial||1!==r.derivative&&2!==r.derivative){for(var f=n.ones(r.windowSize,r.polynomial+1),d=-(r.windowSize-1)/2,p=0;p<f.length;p++)for(var v=0;v<f[p].length;v++)(0!=d+1||0!==v)&&(f[p][v]=c(d+p,v));var y=f.transposeView();a=(a=y.mmul(f).inverse().mmul(y))[r.derivative],u=1}else 1===r.derivative?(a=[-2,-1,0,1,2],u=10):(a=[2,-1,-2,-1,2],u=7);for(var w,x=u*c(e,r.derivative),b=l;b<t.length-l;b++){w=0;for(var _=0;_<a.length;_++)w+=a[_]*t[_+b-l]/x;h[b-l]=w}return\"post\"===r.pad&&(h=i(h,{size:l,value:r.padValue})),h}},function(t,e,r){\"use strict\";t.exports=r(5).Matrix,t.exports.Decompositions=t.exports.DC=r(201)},function(){\"use strict\";Symbol.species||(Symbol.species=Symbol.for(\"@@species\"))},function(t,e,r){\"use strict\";var n=r(15);t.exports=class extends n{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,r){\"use strict\";var n=r(15);t.exports=class extends n{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,r){\"use strict\";var n=r(15),i=r(24);t.exports=class extends n{constructor(t,e,r,n,o){i.checkRange(t,e,r,n,o),super(t,r-e+1,o-n+1),this.startRow=e,this.startColumn=n}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,r){\"use strict\";var n=r(15),i=r(24);t.exports=class extends n{constructor(t,e,r){var n=i.checkIndices(t,e,r);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,r){\"use strict\";var n=r(15);t.exports=class extends n{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,r){\"use strict\";var n=r(15);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,r){\"use strict\";var n=r(15);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,r){\"use strict\";function n(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=r(5).Matrix,s=r(71),a=r(202),u=r(70),c=r(203),l=r(204);o.inverse=o.inv=n,o.prototype.inverse=o.prototype.inv=function(){return n(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:s,SVD:s,EigenvalueDecomposition:a,EVD:a,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:n,solve:i}},function(t,e,r){\"use strict\";function n(t,e){if(e=Object.assign({},p,e),!(this instanceof n))return new n(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error(\"Matrix is not a square matrix\");var r,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(r=0;r<c;r++)for(u=0;u<c;u++)h[r][u]=g.get(r,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(r=0;r<c;r++)v[r][u]=g.get(r,u);s(c,v,y,h),a(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,r,n){var i,o,s,a,c,l,h,f;for(c=0;c<t;c++)r[c]=n[t-1][c];for(a=t-1;0<a;a--){for(f=0,s=0,l=0;l<a;l++)f+=u(r[l]);if(0===f)for(e[a]=r[a-1],c=0;c<a;c++)r[c]=n[a-1][c],n[a][c]=0,n[c][a]=0;else{for(l=0;l<a;l++)r[l]/=f,s+=r[l]*r[l];for(i=r[a-1],o=R(s),0<i&&(o=-o),e[a]=f*o,s-=i*o,r[a-1]=i-o,c=0;c<a;c++)e[c]=0;for(c=0;c<a;c++){for(n[c][a]=i=r[c],o=e[c]+n[c][c]*i,l=c+1;l<=a-1;l++)o+=n[l][c]*r[l],e[l]+=n[l][c]*i;e[c]=o}for(i=0,c=0;c<a;c++)e[c]/=s,i+=e[c]*r[c];for(h=i/(s+s),c=0;c<a;c++)e[c]-=h*r[c];for(c=0;c<a;c++){for(i=r[c],o=e[c],l=c;l<=a-1;l++)n[l][c]-=i*e[l]+o*r[l];r[c]=n[a-1][c],n[a][c]=0}}r[a]=s}for(a=0;a<t-1;a++){if(n[t-1][a]=n[a][a],n[a][a]=1,0!==(s=r[a+1])){for(l=0;l<=a;l++)r[l]=n[l][a+1]/s;for(c=0;c<=a;c++){for(o=0,l=0;l<=a;l++)o+=n[l][a+1]*n[l][c];for(l=0;l<=a;l++)n[l][c]-=o*r[l]}}for(l=0;l<=a;l++)n[l][a+1]=0}for(c=0;c<t;c++)r[c]=n[t-1][c],n[t-1][c]=0;n[t-1][t-1]=1,e[0]=0}function o(t,e,r,n){var i,o,s,a,c,l,h,d,p,m,g,v,y,w,x,b;for(s=1;s<t;s++)e[s-1]=e[s];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(r[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(r[l+1]-(i=r[l]))/(2*e[l]),1),0>d&&(p=-p),r[l]=e[l]/(d+p),r[l+1]=e[l]*(d+p),m=r[l+1],o=i-r[l],s=l+2;s<t;s++)r[s]-=o;for(_+=o,d=r[h],v=g=1,y=g,w=e[l+1],x=0,b=0,s=h-1;s>=l;s--)for(y=v,v=g,b=x,i=g*e[s],o=g*d,p=f(d,e[s]),e[s+1]=x*p,d=(g=d/p)*r[s]-(x=e[s]/p)*i,r[s+1]=o+x*(g*i+x*r[s]),c=0;c<t;c++)n[c][s+1]=x*n[c][s]+g*(o=n[c][s+1]),n[c][s]=g*n[c][s]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),r[l]=g*d}while(u(e[l])>E*S);r[l]+=_,e[l]=0}for(s=0;s<t-1;s++){for(c=s,d=r[s],a=s+1;a<t;a++)r[a]<d&&(c=a,d=r[a]);if(c!==s)for(r[c]=r[s],r[s]=d,a=0;a<t;a++)d=n[a][s],n[a][s]=n[a][c],n[a][c]=d}}function s(t,e,r,n){var i,o,s,a,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,a=l;a<=f;a++)h+=u(e[a][l-1]);if(0!==h){for(s=0,a=f;a>=l;a--)r[a]=e[a][l-1]/h,s+=r[a]*r[a];for(o=R(s),0<r[l]&&(o=-o),s-=r[l]*o,r[l]-=o,c=l;c<t;c++){for(i=0,a=f;a>=l;a--)i+=r[a]*e[a][c];for(i/=s,a=l;a<=f;a++)e[a][c]-=i*r[a]}for(a=0;a<=f;a++){for(i=0,c=f;c>=l;c--)i+=r[c]*e[a][c];for(i/=s,c=l;c<=f;c++)e[a][c]-=i*r[c]}r[l]=h*r[l],e[l][l-1]=h*o}}for(a=0;a<t;a++)for(c=0;c<t;c++)n[a][c]=a===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(a=l+1;a<=f;a++)r[a]=e[a][l-1];for(c=l;c<=f;c++){for(o=0,a=l;a<=f;a++)o+=r[a]*n[a][c];for(o=o/r[l]/e[l][l-1],a=l;a<=f;a++)n[a][c]+=o*r[a]}}}function a(t,e,r,n,i){var o,s,a,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,k=0,C=0,L=0,P=0,D=0,O=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(r[o]=i[o][o],e[o]=0),s=M(o-1,0);s<t;s++)k+=u(i[o][s]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=k),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,r[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(O=R(u(L=(C=(i[S-1][S-1]-i[S][S])/2)*C+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=L){for(r[S-1]=p+(O=0<=C?C+O:C-O),r[S]=r[S-1],0!==O&&(r[S]=p-d/O),e[S-1]=0,e[S]=0,C=(p=i[S][S-1])/(D=u(p)+u(O)),C/=P=R(C*C+(L=O/D)*L),L/=P,s=S-1;s<t;s++)i[S-1][s]=L*(O=i[S-1][s])+C*i[S][s],i[S][s]=L*i[S][s]-C*O;for(o=0;o<=S;o++)i[o][S-1]=L*(O=i[o][S-1])+C*i[o][S],i[o][S]=L*i[o][S]-C*O;for(o=0;o<=E;o++)n[o][S-1]=L*(O=n[o][S-1])+C*n[o][S],n[o][S]=L*n[o][S]-C*O}else r[S-1]=p+C,r[S]=p+C,e[S-1]=O,e[S]=-O;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(C=((P=p-(O=i[h][h]))*(D=m-O)-d)/i[h+1][h]+i[h][h+1],L=i[h+1][h+1]-O-P-D,P=i[h+2][h+1],C/=D=u(C)+u(L)+u(P),L/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(L)+u(P))<T*(u(C)*(u(i[h-1][h-1])+u(O)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(a=h;a<=S-1&&(b=a!==S-1,a!==h&&(C=i[a][a-1],L=i[a+1][a-1],P=b?i[a+2][a-1]:0,0!==(p=u(C)+u(L)+u(P))&&(C/=p,L/=p,P/=p)),0!==p);a++)if(D=R(C*C+L*L+P*P),0>C&&(D=-D),0!==D){for(a===h?l!==h&&(i[a][a-1]=-i[a][a-1]):i[a][a-1]=-D*p,p=(C+=D)/D,m=L/D,O=P/D,L/=C,P/=C,s=a;s<t;s++)C=i[a][s]+L*i[a+1][s],b&&(i[a+2][s]=i[a+2][s]-(C+=P*i[a+2][s])*O),i[a][s]-=C*p,i[a+1][s]=i[a+1][s]-C*m;for(o=0;o<=v(S,a+3);o++)C=p*i[o][a]+m*i[o][a+1],b&&(i[o][a+2]=i[o][a+2]-(C+=O*i[o][a+2])*P),i[o][a]-=C,i[o][a+1]=i[o][a+1]-C*L;for(o=0;o<=E;o++)C=p*n[o][a]+m*n[o][a+1],b&&(n[o][a+2]=n[o][a+2]-(C+=O*n[o][a+2])*P),n[o][a]-=C,n[o][a+1]=n[o][a+1]-C*L}}}if(0!==k){for(S=t-1;0<=S;S--)if(C=r[S],0===(L=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-C,P=0,s=l;s<=S;s++)P+=i[o][s]*i[s][S];if(0>e[o])O=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*k):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-O*P)/(L=(r[o]-C)*(r[o]-C)+e[o]*e[o]),i[o+1][S]=u(p)>u(O)?(-P-d*f)/p:(-D-m*f)/O),1<T*(f=u(i[o][S]))*f)for(s=o;s<=S;s++)i[s][S]/=f}else if(0>L)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=L/i[S][S-1],i[S-1][S]=-(i[S][S]-C)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-C,L),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,s=l;s<=S;s++)g+=i[o][s]*i[s][S-1],y+=i[o][s]*i[s][S];if(d=i[o][o]-C,0>e[o])O=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,L),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(r[o]-C)*L,0==(w=(r[o]-C)*(r[o]-C)+e[o]*e[o]-L*L)&&0===x&&(w=T*k*(u(d)+u(L)+u(p)+u(m)+u(O))),_=c(p*P-O*g+L*y,p*D-O*y-L*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(O)+u(L)?(i[o+1][S-1]=(-g-d*i[o][S-1]+L*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-L*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],O,L),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(s=o;s<=S;s++)i[s][S-1]=i[s][S-1]/f,i[s][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(s=o;s<t;s++)n[o][s]=i[o][s];for(s=t-1;s>=0;s--)for(o=0;o<=E;o++){for(O=0,a=0;a<=v(s,E);a++)O+=n[o][a]*i[a][s];n[o][s]=O}}}function c(t,e,r,n){var i,o;return u(r)>u(n)?[(t+(i=n/r)*e)/(o=r+i*n),(e-i*t)/o]:[((i=r/n)*t+e)/(o=n+i*r),(i*e-t)/o]}var l=r(5).Matrix,h=r(38),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};n.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,r=this.n,n=this.e,i=this.d,o=new l(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)o[t][e]=0;o[t][t]=i[t],0<n[t]?o[t][t+1]=n[t]:0>n[t]&&(o[t][t-1]=n[t])}return o}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,s,a,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(s=0;s<l;s++){var f=0;for(e=s;e<c;e++)f=o(f,u[e][s]);if(0!==f){for(0>u[s][s]&&(f=-f),e=s;e<c;e++)u[e][s]/=f;for(u[s][s]+=1,r=s+1;r<l;r++){for(a=0,e=s;e<c;e++)a+=u[e][s]*u[e][r];for(a=-a/u[s][s],e=s;e<c;e++)u[e][r]+=a*u[e][s]}}h[s]=-f}this.QR=u,this.Rdiag=h}var i=r(5).Matrix,o=r(38).hypotenuse;n.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix row dimensions must agree\");if(!this.isFullRank())throw new Error(\"Matrix is rank deficient\");var n,o,s,a,u=t.columns,c=t.clone(),l=e.columns;for(s=0;s<l;s++)for(o=0;o<u;o++){for(a=0,n=s;n<r;n++)a+=e[n][s]*c[n][o];for(a=-a/e[s][s],n=s;n<r;n++)c[n][o]+=a*e[n][s]}for(s=l-1;0<=s;s--){for(o=0;o<u;o++)c[s][o]/=this.Rdiag[s];for(n=0;n<s;n++)for(o=0;o<u;o++)c[n][o]-=c[s][o]*e[n][s]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,r=this.QR,n=r.columns,o=new i(n,n);for(t=0;t<n;t++)for(e=0;e<n;e++)o[t][e]=t<e?r[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,r,n,o=this.QR,s=o.rows,a=o.columns,u=new i(s,a);for(r=a-1;0<=r;r--){for(t=0;t<s;t++)u[t][r]=0;for(u[r][r]=1,e=r;e<a;e++)if(0!==o[r][r]){for(n=0,t=r;t<s;t++)n+=o[t][r]*u[t][e];for(n=-n/o[r][r],t=r;t<s;t++)u[t][e]+=n*o[t][r]}}return u}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error(\"Matrix is not symmetric\");var e,r,o,s=t,a=s.rows,u=new i(a,a),c=!0;for(r=0;r<a;r++){var l=u[r],h=0;for(o=0;o<r;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(s[r][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=s[r][r]-h),u[r][r]=R(M(h,0)),o=r+1;o<a;o++)u[r][o]=0}if(!c)throw new Error(\"Matrix is not positive definite\");this.L=u}var i=r(5).Matrix;n.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix dimensions do not match\");var n,o,s,a=t.columns,u=t.clone();for(s=0;s<r;s++)for(o=0;o<a;o++){for(n=0;n<s;n++)u[s][o]-=u[n][o]*e[s][n];u[s][o]/=e[s][s]}for(s=r-1;0<=s;s--)for(o=0;o<a;o++){for(n=s+1;n<r;n++)u[s][o]-=u[n][o]*e[n][s];u[s][o]/=e[s][s]}return u}},t.exports=n},function(t,e,r){\"use strict\";function n(t,e,r,n){for(var i=0,o=0,s=e-r;s<e+r;s++)0<=s&&s<t.length-1&&(i+=t[s+1]-t[s],o++);return c(i/o,n)}function i(t,e,r,n){return 0<r?(4*r-2)/(r*(2*e-r+1))*(t*i(t,e,r-1,n)+n*i(t,e,r-1,n-1))-(r-1)*(2*e+r)/(r*(2*e-r+1))*i(t,e,r-2,n):0==r&&0==n?1:0}function o(t,e){var r=1;if(t>=e)for(var n=t-e+1;n<=t;n++)r*=n;return r}function s(t,e,r,n,s){for(var a=0,u=0;u<=n;u++)a+=(2*u+1)*(o(2*r,u)/o(2*r+u+1,u+1))*i(t,r,u,0)*i(e,r,u,s);return a}function a(t,e,r){for(var n=Array(t),i=g(t/2),o=-i;o<=i;o++){n[o+i]=Array(t);for(var a=-i;a<=i;a++)n[o+i][a+i]=s(a,o,i,e,r)}return n}var u=r(35),l=(r(206),{windowSize:9,derivative:0,polynomial:3});t.exports=function(t,e,r){if(0==(r=u({},l,r)).windowSize%2||5>r.windowSize||!m(r.windowSize))throw new RangeError(\"Invalid window size (should be odd and at least 5 integer number)\");if(r.windowSize>t.length)throw new RangeError(\"Window size is higher than the data length \"+r.windowSize+\">\"+t.length);if(0>r.derivative||!m(r.derivative))throw new RangeError(\"Derivative should be a positive integer\");if(1>r.polynomial||!m(r.polynomial))throw new RangeError(\"Polynomial should be a positive integer\");6<=r.polynomial&&console.warn(\"You should not use polynomial grade higher than 5 if you are not sure that your data arises from such a model. Possible polynomial oscillation problems\");var i=r.windowSize,o=g(i/2),s=t.length,h=Array(s),f=a(i,r.polynomial,r.derivative),d=0,p=!0;\"[object Array]\"===Object.prototype.toString.call(e)?p=!1:d=c(e,r.derivative);for(var v=0;v<o;v++){for(var y=f[o-v-1],w=f[o+v+1],x=0,b=0,_=0;_<i;_++)x+=y[_]*t[_],b+=w[_]*t[s-i+_-1];p?(h[o-v-1]=x/d,h[s-o+v]=b/d):(d=n(e,o-v-1,o,r.derivative),h[o-v-1]=x/d,d=n(e,s-o+v,o,r.derivative),h[s-o+v]=b/d)}var M,S=f[o];for(v=i;v<s+1;v++){for(M=0,_=0;_<i;_++)M+=S[_]*t[_+v-i];p||(d=n(e,v-o-1,o,r.derivative)),h[v-o-1]=M/d}return h}},function(t,e,r){\"use strict\";e.array=r(72),e.matrix=r(207)},function(t,e,n){\"use strict\";function i(t,e){void 0===e&&(e=0);var r,n,i,o,s=t.length,a=t[0].length;if(-1===e){for(r=[0],n=s*a,i=0;i<s;i++)for(o=0;o<a;o++)r[0]+=t[i][o];r[0]/=n}else if(0===e)for(r=Array(a),n=s,o=0;o<a;o++){for(r[o]=0,i=0;i<s;i++)r[o]+=t[i][o];r[o]/=n}else{if(1!==e)throw new Error(\"Invalid dimension\");for(r=Array(s),n=a,o=0;o<s;o++){for(r[o]=0,i=0;i<a;i++)r[o]+=t[o][i];r[o]/=n}}return r}function o(t,e,r){for(var n=s(t,e,r),i=n.length,o=0;o<i;o++)n[o]=R(n[o]);return n}function s(t,e,r){void 0===r&&(r=!0),e=e||i(t);var n=t.length;if(0===n)return[];for(var o=t[0].length,s=Array(o),a=0;a<o;a++){for(var u=0,c=0,l=0,h=0;h<n;h++)u+=l=t[h][a]-e[a],c+=l*l;s[a]=r?(c-u*u/n)/(n-1):(c-u*u/n)/n}return s}function a(t,e,r){void 0===r&&(r=0),void 0===e&&(0===r?e=t.length-1:1===r&&(e=t[0].length-1));var n=i(t,r),o=t.length;if(0===o)return[[]];var s,a,u,c,l,h=t[0].length;if(0===r){for(s=Array(h),a=0;a<h;a++)s[a]=Array(h);for(a=0;a<h;a++)for(u=a;u<h;u++){for(c=0,l=0;l<o;l++)c+=(t[l][u]-n[u])*(t[l][a]-n[a]);s[a][u]=c/=e,s[u][a]=c}}else{if(1!==r)throw new Error(\"Invalid dimension\");for(s=Array(o),a=0;a<o;a++)s[a]=Array(o);for(a=0;a<o;a++)for(u=a;u<o;u++){for(c=0,l=0;l<h;l++)c+=(t[u][l]-n[u])*(t[a][l]-n[a]);s[a][u]=c/=e,s[u][a]=c}}return s}function u(t,e,r){return e=e||i(t),void 0===r&&(r=o(t,!0,e)),h(l(t,e,!1),r,!0)}function l(t,e,r){e=e||i(t);var n,o,s,a=t,u=t.length;if(!r)for(a=Array(u),n=0;n<u;n++)a[n]=Array(t[n].length);for(n=0;n<u;n++){var c=a[n];for(o=0,s=c.length;o<s;o++)c[o]=t[n][o]-e[o]}return a}function h(t,e,r){void 0===e&&(e=o(t));var n,i,s,a=t,u=t.length;if(!r)for(a=Array(u),n=0;n<u;n++)a[n]=Array(t[n].length);for(n=0;n<u;n++){var c=a[n],l=t[n];for(i=0,s=c.length;i<s;i++)0===e[i]||isNaN(e[i])||(c[i]=l[i]/e[i])}return a}function f(t,e,r){void 0===r&&(r=0);var n=t.length;if(0===n)return[];var i,o,s,a,u,c,l=t[0].length;if(0===r){for(i=Array(l),o=0;o<l;o++)i[o]=0;for(o=0;o<n;o++)for(c=t[o],u=e[o],a=0;a<l;a++)i[a]+=c[a]*u}else{if(1!==r)throw new Error(\"Invalid dimension\");for(i=Array(n),o=0;o<n;o++)i[o]=0;for(a=0;a<n;a++)for(c=t[a],u=e[a],o=0;o<l;o++)i[a]+=c[o]*u}var h=p.sum(e);if(0!==h)for(o=0,s=i.length;o<s;o++)i[o]/=h;return i}function d(t,e,r,n,i){i=i||0,r=r||f(t,e,i),void 0===n&&(n=1);var o=t.length;if(0===o)return[[]];var s,a,u,c,l,h=t[0].length;if(0===i){for(s=Array(h),a=0;a<h;a++)s[a]=Array(h);for(a=0;a<h;a++)for(u=a;u<h;u++){for(l=0,c=0;c<o;c++)l+=e[c]*(t[c][u]-r[u])*(t[c][a]-r[a]);s[a][u]=l*n,s[u][a]=l*n}}else{if(1!==i)throw new Error(\"Invalid dimension\");for(s=Array(o),a=0;a<o;a++)s[a]=Array(o);for(a=0;a<o;a++)for(u=a;u<o;u++){for(l=0,c=0;c<h;c++)l+=e[c]*(t[u][c]-r[u])*(t[a][c]-r[a]);s[a][u]=l*n,s[u][a]=l*n}}return s}var p=n(72);t.exports={entropy:function(t,e){void 0===e&&(e=0);for(var n=0,i=t.length,o=t[0].length,s=0;s<i;s++)for(var a=0;a<o;a++)n+=t[s][a]*r(t[s][a]+e);return-n},mean:i,standardDeviation:o,variance:s,median:function(t){for(var e,r=t.length,n=t[0].length,i=Array(n),o=0;o<n;o++){e=Array(r);for(var s=0;s<r;s++)e[s]=t[s][o];e.sort();var a=e.length;i[o]=0==a%2?.5*(e[a/2]+e[a/2-1]):e[g(a/2)]}return i},mode:function(t){var e,r,n=t.length,i=t[0].length,o=Array(i);for(e=0;e<i;e++){for(var s=Array(n),a=0;a<n;a++)s[a]=0;var u=Array(n),c=0;for(r=0;r<n;r++){var l=u.indexOf(t[r][e]);0<=l?s[l]++:(u[c]=t[r][e],s[c]=1,c++)}var h=0,f=0;for(r=0;r<c;r++)s[r]>h&&(h=s[r],f=r);o[e]=u[f]}return o},skewness:function(t,e){void 0===e&&(e=!0);for(var r=i(t),n=t.length,o=r.length,s=Array(o),a=0;a<o;a++){for(var u,l=0,h=0,f=0;f<n;f++)l+=(u=t[f][a]-r[a])*u,h+=u*u*u;var d=h/n/c(l/n,1.5);if(e){var p=R(n*(n-1));s[a]=p/(n-2)*d}else s[a]=d}return s},kurtosis:function(t,e){void 0===e&&(e=!0);for(var r=i(t),n=t.length,o=t[0].length,s=Array(o),a=0;a<o;a++){for(var u,c=0,l=0,h=0;h<n;h++)c+=(u=t[h][a]-r[a])*u,l+=u*u*u*u;var f=c/n,d=l/n;if(e){var p=c/(n-1);s[a]=n*(n+1)/((n-1)*(n-2)*(n-3))*(l/(p*p))-(n-1)*(n-1)/((n-2)*(n-3))*3}else s[a]=d/(f*f)-3}return s},standardError:function(t){for(var e=t.length,r=o(t),n=r.length,i=Array(n),s=R(e),a=0;a<n;a++)i[a]=r[a]/s;return i},covariance:function(t,e){return a(t,void 0,e)},scatter:a,correlation:function(t){var e,r,n=i(t),s=u(t,n,o(t,!0,n)),a=t.length,c=t[0].length,l=Array(c);for(e=0;e<c;e++)l[e]=Array(c);for(e=0;e<c;e++)for(r=e;r<c;r++){for(var h=0,f=0,d=s.length;f<d;f++)h+=s[f][r]*s[f][e];l[e][r]=h/=a-1,l[r][e]=h}return l},zScores:u,center:l,standardize:h,weightedVariance:function(t,e){var r=i(t),n=t.length;if(0===n)return[];for(var o=t[0].length,s=Array(o),a=0;a<o;a++){for(var u=0,c=0,l=0,h=0;h<n;h++){var f=t[h][a]-r[a],d=e[h];u+=d*(f*f),l+=d,c+=d*d}s[a]=u*(l/(l*l-c))}return s},weightedMean:f,weightedCovariance:function(t,e,r,n){n=n||0,r=r||f(t,e,n);for(var i=0,o=0,s=0,a=e.length;s<a;s++)i+=e[s],o+=e[s]*e[s];return d(t,e,r,i/(i*i-o),n)},weightedScatter:d}},function(e,t,n){\"use strict\";function o(t,e){for(var r in e)t=t.replace(new RegExp(\"%\"+r+\"%\",\"g\"),e[r]);return t}var s=n(54);class r{constructor(t,e,n={}){if(t instanceof r){var i=t;this._init(i.rows,i.columns,i.elements.clone(),i.threshold)}else if(Array.isArray(t)){var o=t;t=o.length,n=e||{},this._init(t,e=o[0].length,new s(n),n.threshold);for(var a=0;a<t;a++)for(var c,l=0;l<e;l++)c=o[a][l],this.threshold&&u(c)<this.threshold&&(c=0),0!==c&&this.elements.set(a*e+l,o[a][l])}else this._init(t,e,new s(n),n.threshold)}_init(t,e,r,n){this.rows=t,this.columns=e,this.elements=r,this.threshold=n||0}static eye(t=1,e=t){for(var n=v(t,e),i=new r(t,e,{initialCapacity:n}),o=0;o<n;o++)i.set(o,o,1);return i}clone(){return new r(this)}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var r=0;r<this.columns;r++)t[e][r]=this.get(e,r)}return t}isSquare(){return this.rows===this.columns}isSymmetric(){if(!this.isSquare())return!1;var t=!0;return this.forEachNonZero((e,r,n)=>this.get(r,e)===n?n:(t=!1,!1)),t}get cardinality(){return this.elements.size}get size(){return this.rows*this.columns}get(t,e){return this.elements.get(t*this.columns+e)}set(t,e,r){return this.threshold&&u(r)<this.threshold&&(r=0),0===r?this.elements.remove(t*this.columns+e):this.elements.set(t*this.columns+e,r),this}mmul(t){this.columns!==t.rows&&console.warn(\"Number of columns of left matrix are not equal to number of rows of right matrix.\");var e=new r(this.rows,t.columns);return this.forEachNonZero((r,n,i)=>(t.forEachNonZero((t,o,s)=>(n===t&&e.set(r,o,e.get(r,o)+i*s),s)),i)),e}kroneckerProduct(t){var e=t.rows,n=t.columns,i=new r(this.rows*e,this.columns*n,{initialCapacity:this.cardinality*t.cardinality});return this.forEachNonZero((r,o,s)=>(t.forEachNonZero((t,a,u)=>(i.set(e*r+t,n*o+a,s*u),u)),s)),i}forEachNonZero(t){return this.elements.forEachPair((e,r)=>{var n=t(0|e/this.columns,e%this.columns,r);return!1!==n&&(this.threshold&&u(n)<this.threshold&&(n=0),n!==r&&(0===n?this.elements.remove(e,!0):this.elements.set(e,n)),!0)}),this.elements.maybeShrinkCapacity(),this}getNonZeros(){var t=this.cardinality,e=Array(t),r=Array(t),n=Array(t),i=0;return this.forEachNonZero((t,o,s)=>(e[i]=t,r[i]=o,n[i]=s,i++,s)),{rows:e,columns:r,values:n}}setThreshold(t){return 0!==t&&t!==this.threshold&&(this.threshold=t,this.forEachNonZero((t,e,r)=>r)),this}}r.prototype.klass=\"Matrix\",r.identity=r.eye,r.prototype.tensorProduct=r.prototype.kroneckerProduct,e.exports=r;var a=\"\\n(function %name%(value) {\\n    if (typeof value === 'number') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n\",l=\"\\n(function %name%S(value) {\\n    this.forEachNonZero((i, j, v) => v %op% value);\\n    return this;\\n})\\n\",c=\"\\n(function %name%M(matrix) {\\n    matrix.forEachNonZero((i, j, v) => {\\n        this.set(i, j, this.get(i, j) %op% v);\\n        return v;\\n    });\\n    return this;\\n})\\n\",m=\"\\n(function %name%(matrix, value) {\\n    var newMatrix = new SparseMatrix(matrix);\\n    return newMatrix.%name%(value);\\n})\\n\",d=\"\\n(function %name%() {\\n    this.forEachNonZero((i, j, v) => %method%(v));\\n    return this;\\n})\\n\",g=\"\\n(function %name%(matrix) {\\n    var newMatrix = new SparseMatrix(matrix);\\n    return newMatrix.%name%();\\n})\\n\",h=[[\"+\",\"add\"],[\"-\",\"sub\",\"subtract\"],[\"*\",\"mul\",\"multiply\"],[\"/\",\"div\",\"divide\"],[\"%\",\"mod\",\"modulus\"],[\"&\",\"and\"],[\"|\",\"or\"],[\"^\",\"xor\"],[\"<<\",\"leftShift\"],[\">>\",\"signPropagatingRightShift\"],[\">>>\",\"rightShift\",\"zeroFillRightShift\"]],p=!0,k=!1,j;try{for(var x=h[Symbol.iterator](),w,f;!(p=(w=x.next()).done);p=!0){f=w.value;for(var y=1;y<f.length;y++)r.prototype[f[y]]=eval(o(a,{name:f[y],op:f[0]})),r.prototype[f[y]+\"S\"]=eval(o(l,{name:f[y]+\"S\",op:f[0]})),r.prototype[f[y]+\"M\"]=eval(o(c,{name:f[y]+\"M\",op:f[0]})),r[f[y]]=eval(o(m,{name:f[y]}))}}catch(e){k=!0,j=e}finally{try{!p&&x.return&&x.return()}finally{if(k)throw j}}var i=[[\"~\",\"not\"]];[\"abs\",\"acos\",\"acosh\",\"asin\",\"asinh\",\"atan\",\"atanh\",\"cbrt\",\"ceil\",\"clz32\",\"cos\",\"cosh\",\"exp\",\"expm1\",\"floor\",\"fround\",\"log\",\"log1p\",\"log10\",\"log2\",\"round\",\"sign\",\"sin\",\"sinh\",\"sqrt\",\"tan\",\"tanh\",\"trunc\"].forEach(function(t){i.push([\"Math.\"+t,t])});var M=!0,b=!1,R;try{for(var I=i[Symbol.iterator](),S,C;!(M=(S=I.next()).done);M=!0){C=S.value;for(var y=1;y<C.length;y++)r.prototype[C[y]]=eval(o(d,{name:C[y],method:C[0]})),r[C[y]]=eval(o(g,{name:C[y]}))}}catch(e){b=!0,R=e}finally{try{!M&&I.return&&I.return()}finally{if(b)throw R}}},function(t,e,r){\"use strict\";var n=r(210),i=n.DC.EVD,o=n.DC.SVD,s=r(2).matrix,a=s.mean,u=s.standardDeviation,c={isCovarianceMatrix:!1,center:!0,scale:!1};class l{constructor(t,e){if(!0===t){var r=e;return this.center=r.center,this.scale=r.scale,this.means=r.means,this.stdevs=r.stdevs,this.U=n.checkMatrix(r.U),void(this.S=r.S)}if(e=Object.assign({},c,e),this.center=!1,this.scale=!1,this.means=null,this.stdevs=null,e.isCovarianceMatrix)this._computeFromCovarianceMatrix(t);else if(\"boolean\"==typeof e.useCovarianceMatrix?e.useCovarianceMatrix:t.length>t[0].length){var i=(t=this._adjust(t,e)).transposeView().mmul(t).div(t.rows-1);this._computeFromCovarianceMatrix(i)}else{t=this._adjust(t,e);var s=new o(t,{computeLeftSingularVectors:!1,computeRightSingularVectors:!0,autoTranspose:!0});this.U=s.rightSingularVectors;for(var a=s.diagonal,u=Array(a.length),l=0;l<a.length;l++)u[l]=a[l]*a[l]/(t.length-1);this.S=u}}static load(t){if(\"PCA\"!==t.name)throw new RangeError(\"Invalid model: \"+t.name);return new l(!0,t)}predict(t){return t=new n(t),this.center&&(t.subRowVector(this.means),this.scale&&t.divRowVector(this.stdevs)),t.mmul(this.U)}getExplainedVariance(){for(var t=0,e=0;e<this.S.length;e++)t+=this.S[e];return this.S.map(e=>e/t)}getCumulativeVariance(){for(var t=this.getExplainedVariance(),e=1;e<t.length;e++)t[e]+=t[e-1];return t}getEigenvectors(){return this.U}getEigenvalues(){return this.S}getStandardDeviations(){return this.S.map(t=>R(t))}getLoadings(){return this.U.transpose()}toJSON(){return{name:\"PCA\",center:this.center,scale:this.scale,means:this.means,stdevs:this.stdevs,U:this.U,S:this.S}}_adjust(t,e){if(this.center=!!e.center,this.scale=!!e.scale,t=new n(t),this.center){var r=a(t),i=this.scale?u(t,r,!0):null;if(this.means=r,t.subRowVector(r),this.scale){for(var o=0;o<i.length;o++)if(0===i[o])throw new RangeError(\"Cannot scale the dataset (standard deviation is zero at index \"+o);this.stdevs=i,t.divRowVector(i)}}return t}_computeFromCovarianceMatrix(t){var e=new i(t,{assumeSymmetric:!0});this.U=e.eigenvectorMatrix;for(var r=0;r<this.U.length;r++)this.U[r].reverse();this.S=e.realEigenvalues.reverse()}}t.exports=l},function(t,e,r){\"use strict\";t.exports=r(6).Matrix,t.exports.Decompositions=t.exports.DC=r(219)},function(){\"use strict\";Symbol.species||(Symbol.species=Symbol.for(\"@@species\"))},function(t,e,r){\"use strict\";var n=r(16);t.exports=class extends n{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,r){\"use strict\";var n=r(16);t.exports=class extends n{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,r){\"use strict\";var n=r(16),i=r(25);t.exports=class extends n{constructor(t,e,r,n,o){i.checkRange(t,e,r,n,o),super(t,r-e+1,o-n+1),this.startRow=e,this.startColumn=n}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,r){\"use strict\";var n=r(16),i=r(25);t.exports=class extends n{constructor(t,e,r){var n=i.checkIndices(t,e,r);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,r){\"use strict\";var n=r(16);t.exports=class extends n{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,r){\"use strict\";var n=r(16);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,r){\"use strict\";var n=r(16);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,r){\"use strict\";function n(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=r(6).Matrix,s=r(75),a=r(220),u=r(74),c=r(221),l=r(222);o.inverse=o.inv=n,o.prototype.inverse=o.prototype.inv=function(){return n(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:s,SVD:s,EigenvalueDecomposition:a,EVD:a,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:n,solve:i}},function(t,e,r){\"use strict\";function n(t,e){if(e=Object.assign({},p,e),!(this instanceof n))return new n(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error(\"Matrix is not a square matrix\");var r,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(r=0;r<c;r++)for(u=0;u<c;u++)h[r][u]=g.get(r,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(r=0;r<c;r++)v[r][u]=g.get(r,u);s(c,v,y,h),a(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,r,n){var i,o,s,a,c,l,h,f;for(c=0;c<t;c++)r[c]=n[t-1][c];for(a=t-1;0<a;a--){for(f=0,s=0,l=0;l<a;l++)f+=u(r[l]);if(0===f)for(e[a]=r[a-1],c=0;c<a;c++)r[c]=n[a-1][c],n[a][c]=0,n[c][a]=0;else{for(l=0;l<a;l++)r[l]/=f,s+=r[l]*r[l];for(i=r[a-1],o=R(s),0<i&&(o=-o),e[a]=f*o,s-=i*o,r[a-1]=i-o,c=0;c<a;c++)e[c]=0;for(c=0;c<a;c++){for(n[c][a]=i=r[c],o=e[c]+n[c][c]*i,l=c+1;l<=a-1;l++)o+=n[l][c]*r[l],e[l]+=n[l][c]*i;e[c]=o}for(i=0,c=0;c<a;c++)e[c]/=s,i+=e[c]*r[c];for(h=i/(s+s),c=0;c<a;c++)e[c]-=h*r[c];for(c=0;c<a;c++){for(i=r[c],o=e[c],l=c;l<=a-1;l++)n[l][c]-=i*e[l]+o*r[l];r[c]=n[a-1][c],n[a][c]=0}}r[a]=s}for(a=0;a<t-1;a++){if(n[t-1][a]=n[a][a],n[a][a]=1,0!==(s=r[a+1])){for(l=0;l<=a;l++)r[l]=n[l][a+1]/s;for(c=0;c<=a;c++){for(o=0,l=0;l<=a;l++)o+=n[l][a+1]*n[l][c];for(l=0;l<=a;l++)n[l][c]-=o*r[l]}}for(l=0;l<=a;l++)n[l][a+1]=0}for(c=0;c<t;c++)r[c]=n[t-1][c],n[t-1][c]=0;n[t-1][t-1]=1,e[0]=0}function o(t,e,r,n){var i,o,s,a,c,l,h,d,p,m,g,v,y,w,x,b;for(s=1;s<t;s++)e[s-1]=e[s];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(r[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(r[l+1]-(i=r[l]))/(2*e[l]),1),0>d&&(p=-p),r[l]=e[l]/(d+p),r[l+1]=e[l]*(d+p),m=r[l+1],o=i-r[l],s=l+2;s<t;s++)r[s]-=o;for(_+=o,d=r[h],v=g=1,y=g,w=e[l+1],x=0,b=0,s=h-1;s>=l;s--)for(y=v,v=g,b=x,i=g*e[s],o=g*d,p=f(d,e[s]),e[s+1]=x*p,d=(g=d/p)*r[s]-(x=e[s]/p)*i,r[s+1]=o+x*(g*i+x*r[s]),c=0;c<t;c++)n[c][s+1]=x*n[c][s]+g*(o=n[c][s+1]),n[c][s]=g*n[c][s]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),r[l]=g*d}while(u(e[l])>E*S);r[l]+=_,e[l]=0}for(s=0;s<t-1;s++){for(c=s,d=r[s],a=s+1;a<t;a++)r[a]<d&&(c=a,d=r[a]);if(c!==s)for(r[c]=r[s],r[s]=d,a=0;a<t;a++)d=n[a][s],n[a][s]=n[a][c],n[a][c]=d}}function s(t,e,r,n){var i,o,s,a,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,a=l;a<=f;a++)h+=u(e[a][l-1]);if(0!==h){for(s=0,a=f;a>=l;a--)r[a]=e[a][l-1]/h,s+=r[a]*r[a];for(o=R(s),0<r[l]&&(o=-o),s-=r[l]*o,r[l]-=o,c=l;c<t;c++){for(i=0,a=f;a>=l;a--)i+=r[a]*e[a][c];for(i/=s,a=l;a<=f;a++)e[a][c]-=i*r[a]}for(a=0;a<=f;a++){for(i=0,c=f;c>=l;c--)i+=r[c]*e[a][c];for(i/=s,c=l;c<=f;c++)e[a][c]-=i*r[c]}r[l]=h*r[l],e[l][l-1]=h*o}}for(a=0;a<t;a++)for(c=0;c<t;c++)n[a][c]=a===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(a=l+1;a<=f;a++)r[a]=e[a][l-1];for(c=l;c<=f;c++){for(o=0,a=l;a<=f;a++)o+=r[a]*n[a][c];for(o=o/r[l]/e[l][l-1],a=l;a<=f;a++)n[a][c]+=o*r[a]}}}function a(t,e,r,n,i){var o,s,a,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,k=0,C=0,L=0,P=0,D=0,O=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(r[o]=i[o][o],e[o]=0),s=M(o-1,0);s<t;s++)k+=u(i[o][s]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=k),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,r[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(O=R(u(L=(C=(i[S-1][S-1]-i[S][S])/2)*C+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=L){for(r[S-1]=p+(O=0<=C?C+O:C-O),r[S]=r[S-1],0!==O&&(r[S]=p-d/O),e[S-1]=0,e[S]=0,C=(p=i[S][S-1])/(D=u(p)+u(O)),C/=P=R(C*C+(L=O/D)*L),L/=P,s=S-1;s<t;s++)i[S-1][s]=L*(O=i[S-1][s])+C*i[S][s],i[S][s]=L*i[S][s]-C*O;for(o=0;o<=S;o++)i[o][S-1]=L*(O=i[o][S-1])+C*i[o][S],i[o][S]=L*i[o][S]-C*O;for(o=0;o<=E;o++)n[o][S-1]=L*(O=n[o][S-1])+C*n[o][S],n[o][S]=L*n[o][S]-C*O}else r[S-1]=p+C,r[S]=p+C,e[S-1]=O,e[S]=-O;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(C=((P=p-(O=i[h][h]))*(D=m-O)-d)/i[h+1][h]+i[h][h+1],L=i[h+1][h+1]-O-P-D,P=i[h+2][h+1],C/=D=u(C)+u(L)+u(P),L/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(L)+u(P))<T*(u(C)*(u(i[h-1][h-1])+u(O)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(a=h;a<=S-1&&(b=a!==S-1,a!==h&&(C=i[a][a-1],L=i[a+1][a-1],P=b?i[a+2][a-1]:0,0!==(p=u(C)+u(L)+u(P))&&(C/=p,L/=p,P/=p)),0!==p);a++)if(D=R(C*C+L*L+P*P),0>C&&(D=-D),0!==D){for(a===h?l!==h&&(i[a][a-1]=-i[a][a-1]):i[a][a-1]=-D*p,p=(C+=D)/D,m=L/D,O=P/D,L/=C,P/=C,s=a;s<t;s++)C=i[a][s]+L*i[a+1][s],b&&(i[a+2][s]=i[a+2][s]-(C+=P*i[a+2][s])*O),i[a][s]-=C*p,i[a+1][s]=i[a+1][s]-C*m;for(o=0;o<=v(S,a+3);o++)C=p*i[o][a]+m*i[o][a+1],b&&(i[o][a+2]=i[o][a+2]-(C+=O*i[o][a+2])*P),i[o][a]-=C,i[o][a+1]=i[o][a+1]-C*L;for(o=0;o<=E;o++)C=p*n[o][a]+m*n[o][a+1],b&&(n[o][a+2]=n[o][a+2]-(C+=O*n[o][a+2])*P),n[o][a]-=C,n[o][a+1]=n[o][a+1]-C*L}}}if(0!==k){for(S=t-1;0<=S;S--)if(C=r[S],0===(L=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-C,P=0,s=l;s<=S;s++)P+=i[o][s]*i[s][S];if(0>e[o])O=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*k):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-O*P)/(L=(r[o]-C)*(r[o]-C)+e[o]*e[o]),i[o+1][S]=u(p)>u(O)?(-P-d*f)/p:(-D-m*f)/O),1<T*(f=u(i[o][S]))*f)for(s=o;s<=S;s++)i[s][S]/=f}else if(0>L)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=L/i[S][S-1],i[S-1][S]=-(i[S][S]-C)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-C,L),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,s=l;s<=S;s++)g+=i[o][s]*i[s][S-1],y+=i[o][s]*i[s][S];if(d=i[o][o]-C,0>e[o])O=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,L),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(r[o]-C)*L,0==(w=(r[o]-C)*(r[o]-C)+e[o]*e[o]-L*L)&&0===x&&(w=T*k*(u(d)+u(L)+u(p)+u(m)+u(O))),_=c(p*P-O*g+L*y,p*D-O*y-L*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(O)+u(L)?(i[o+1][S-1]=(-g-d*i[o][S-1]+L*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-L*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],O,L),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(s=o;s<=S;s++)i[s][S-1]=i[s][S-1]/f,i[s][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(s=o;s<t;s++)n[o][s]=i[o][s];for(s=t-1;s>=0;s--)for(o=0;o<=E;o++){for(O=0,a=0;a<=v(s,E);a++)O+=n[o][a]*i[a][s];n[o][s]=O}}}function c(t,e,r,n){var i,o;return u(r)>u(n)?[(t+(i=n/r)*e)/(o=r+i*n),(e-i*t)/o]:[((i=r/n)*t+e)/(o=n+i*r),(i*e-t)/o]}var l=r(6).Matrix,h=r(39),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};n.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,r=this.n,n=this.e,i=this.d,o=new l(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)o[t][e]=0;o[t][t]=i[t],0<n[t]?o[t][t+1]=n[t]:0>n[t]&&(o[t][t-1]=n[t])}return o}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,s,a,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(s=0;s<l;s++){var f=0;for(e=s;e<c;e++)f=o(f,u[e][s]);if(0!==f){for(0>u[s][s]&&(f=-f),e=s;e<c;e++)u[e][s]/=f;for(u[s][s]+=1,r=s+1;r<l;r++){for(a=0,e=s;e<c;e++)a+=u[e][s]*u[e][r];for(a=-a/u[s][s],e=s;e<c;e++)u[e][r]+=a*u[e][s]}}h[s]=-f}this.QR=u,this.Rdiag=h}var i=r(6).Matrix,o=r(39).hypotenuse;n.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix row dimensions must agree\");if(!this.isFullRank())throw new Error(\"Matrix is rank deficient\");var n,o,s,a,u=t.columns,c=t.clone(),l=e.columns;for(s=0;s<l;s++)for(o=0;o<u;o++){for(a=0,n=s;n<r;n++)a+=e[n][s]*c[n][o];for(a=-a/e[s][s],n=s;n<r;n++)c[n][o]+=a*e[n][s]}for(s=l-1;0<=s;s--){for(o=0;o<u;o++)c[s][o]/=this.Rdiag[s];for(n=0;n<s;n++)for(o=0;o<u;o++)c[n][o]-=c[s][o]*e[n][s]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,r=this.QR,n=r.columns,o=new i(n,n);for(t=0;t<n;t++)for(e=0;e<n;e++)o[t][e]=t<e?r[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,r,n,o=this.QR,s=o.rows,a=o.columns,u=new i(s,a);for(r=a-1;0<=r;r--){for(t=0;t<s;t++)u[t][r]=0;for(u[r][r]=1,e=r;e<a;e++)if(0!==o[r][r]){for(n=0,t=r;t<s;t++)n+=o[t][r]*u[t][e];for(n=-n/o[r][r],t=r;t<s;t++)u[t][e]+=n*o[t][r]}}return u}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error(\"Matrix is not symmetric\");var e,r,o,s=t,a=s.rows,u=new i(a,a),c=!0;for(r=0;r<a;r++){var l=u[r],h=0;for(o=0;o<r;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(s[r][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=s[r][r]-h),u[r][r]=R(M(h,0)),o=r+1;o<a;o++)u[r][o]=0}if(!c)throw new Error(\"Matrix is not positive definite\");this.L=u}var i=r(6).Matrix;n.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix dimensions do not match\");var n,o,s,a=t.columns,u=t.clone();for(s=0;s<r;s++)for(o=0;o<a;o++){for(n=0;n<s;n++)u[s][o]-=u[n][o]*e[s][n];u[s][o]/=e[s][s]}for(s=r-1;0<=s;s--)for(o=0;o<a;o++){for(n=s+1;n<r;n++)u[s][o]-=u[n][o]*e[n][s];u[s][o]/=e[s][s]}return u}},t.exports=n},function(r,n,i){\"use strict\";var o=i(224);class a{constructor(r,n,i){if(i=i||{},r.length!==n.length||r[0].length!==n[0].length)throw new Error(\"dimensions of prediction and target do not match\");var o=r.length,s=r[0].length,a=!i.max,u=[];if(i.all)for(var c=0;c<o;c++)for(var l=0;l<s;l++)u.push({pred:r[c][l],targ:n[c][l]});else{if(3>o||o!==s)throw new Error('When \"all\" option is false, the prediction matrix must be square and have at least 3 columns');for(c=0;c<o-1;c++)for(l=c+1;l<s;l++)u.push({pred:r[c][l],targ:n[c][l]})}u.sort(a?(t,e)=>t.pred-e.pred:(t,e)=>e.pred-t.pred);var h=this.cutoffs=[a?t:e],f=this.fp=[0],d=this.tp=[0],p=0,m=0,g=u[0].pred,v=0,y=0;for(c=0;c<u.length;c++)u[c].pred!==g&&(h.push(g),f.push(y),d.push(v),g=u[c].pred),u[c].targ?(p++,v++):(m++,y++);h.push(g),f.push(y),d.push(v);var w=h.length,x=this.fn=Array(w),b=this.tn=Array(w),_=this.nPosPred=Array(w),M=this.nNegPred=Array(w);for(c=0;c<w;c++)x[c]=p-d[c],b[c]=m-f[c],_[c]=d[c]+f[c],M[c]=b[c]+x[c];this.nPos=p,this.nNeg=m,this.nSamples=p+m}getMeasure(t){if(\"string\"!=typeof t)throw new Error(\"No measure specified\");if(!o[t])throw new Error(`The specified measure (${t}) does not exist`);return o[t](this)}getAURC(){for(var t=this.cutoffs.length,e=Array(t),r=Array(t),n=0;n<t;n++)e[n]=this.fp[n]/this.nNeg,r[n]=this.tp[n]/this.nPos;var i=0;for(n=1;n<t;n++)i+=.5*(e[n]-e[n-1])*(r[n]+r[n-1]);return i}getAUDC(){for(var t=this.cutoffs.length,e=Array(t),r=Array(t),n=0;n<t;n++)e[n]=this.fn[n]/this.nPos,r[n]=this.fp[n]/this.nNeg;var i=0;for(n=1;n<t;n++)i+=.5*(e[n]+e[n-1])*(r[n]-r[n-1]);return i}getDistribution(t){for(var e=this.cutoffs.length,r=(t=t||{}).xMin||g(100*this.cutoffs[e-1])/100,n=t.xMax||s(100*this.cutoffs[1])/100,i=t.interval||g((n-r)/20*1e7-1)/1e7,o=[],a=[],u=[],c=[],l=[],h=this.tp[e-1],f=0,d=this.fp[e-1],p=0,m=r,v=e-1;m<=n;m+=i){for(;this.cutoffs[v]<m;)v--;o.push(m);var y=h-f-this.tp[v],w=d-p-this.fp[v];f+=y,p+=w,a.push(w),u.push(y),c.push(100-(d-this.fp[v])/d*100),l.push(100-(h-this.tp[v])/h*100)}return{xLabels:o,interValues:a,intraValues:u,interCumPercent:c,intraCumPercent:l}}}a.names={acc:\"Accuracy\",err:\"Error rate\",fpr:\"False positive rate\",tpr:\"True positive rate\",fnr:\"False negative rate\",tnr:\"True negative rate\",ppv:\"Positive predictive value\",npv:\"Negative predictive value\",pcfall:\"Prediction-conditioned fallout\",pcmiss:\"Prediction-conditioned miss\",lift:\"Lift value\",rpp:\"Rate of positive predictions\",rnp:\"Rate of negative predictions\",threshold:\"Threshold\"},r.exports=a},function(t,e){\"use strict\";e.acc=(t=>{for(var e=t.cutoffs.length,r=Array(e),n=0;n<e;n++)r[n]=(t.tn[n]+t.tp[n])/(e-1);return r}),e.err=(t=>{for(var e=t.cutoffs.length,r=Array(e),n=0;n<e;n++)r[n]=t.fn[n]+t.fp[n]/(e-1);return r}),e.fpr=(t=>{for(var e=t.cutoffs.length,r=Array(e),n=0;n<e;n++)r[n]=t.fp[n]/t.nNeg;return r}),e.tpr=(t=>{for(var e=t.cutoffs.length,r=Array(e),n=0;n<e;n++)r[n]=t.tp[n]/t.nPos;return r}),e.fnr=(t=>{for(var e=t.cutoffs.length,r=Array(e),n=0;n<e;n++)r[n]=t.fn[n]/t.nPos;return r}),e.tnr=(t=>{for(var e=t.cutoffs.length,r=Array(e),n=0;n<e;n++)r[n]=t.tn[n]/t.nNeg;return r}),e.ppv=(t=>{for(var e=t.cutoffs.length,r=Array(e),n=0;n<e;n++)r[n]=0===t.fp[n]+t.tp[n]?0:t.tp[n]/(t.fp[n]+t.tp[n]);return r}),e.npv=(t=>{for(var e=t.cutoffs.length,r=Array(e),n=0;n<e;n++)r[n]=0===t.fn[n]+t.tn[n]?0:t.tn[n]/(t.fn[n]+t.tn[n]);return r}),e.pcfall=(t=>{for(var e=t.cutoffs.length,r=Array(e),n=0;n<e;n++)r[n]=0===t.fp[n]+t.tp[n]?1:1-t.tp[n]/(t.fp[n]+t.tp[n]);return r}),e.pcmiss=(t=>{for(var e=t.cutoffs.length,r=Array(e),n=0;n<e;n++)r[n]=0===t.fn[n]+t.tn[n]?1:1-t.tn[n]/(t.fn[n]+t.tn[n]);return r}),e.lift=(t=>{for(var e=t.cutoffs.length,r=Array(e),n=0;n<e;n++)r[n]=0===t.nPosPred[n]?0:t.tp[n]/t.nPos/(t.nPosPred[n]/t.nSamples);return r}),e.rpp=(t=>{for(var e=t.cutoffs.length,r=Array(e),n=0;n<e;n++)r[n]=t.nPosPred[n]/t.nSamples;return r}),e.rnp=(t=>{for(var e=t.cutoffs.length,r=Array(e),n=0;n<e;n++)r[n]=t.nNegPred[n]/t.nSamples;return r}),e.threshold=(t=>{var e=t.cutoffs.slice();return e[0]=e[1],e})},function(t,e,r){\"use strict\";function n(t,e){var r,n,i,o,s=e.length/3,a=t.rows,u=p.zeros(t.length,1);for(n=0;n<s;n++)for(o=c(e[n+2*s][0]/2,2),r=e[n+s][0]*o,i=0;i<a;i++)u[i][0]+=r/(c(t[i][0]-e[n][0],2)+o);return u}function i(t,e){for(var r=e[1][0]*c(e[2][0]/2,2),n=t.rows,i=new p(t.rows,t.columns),o=0;o<n;o++)i[o][0]=r/(c(t[o][0]-e[0][0],2)+c(e[2][0]/2,2));return i}function s(t,e){for(var r=e[2][0]*e[2][0]/2,n=t.rows,i=new p(t.rows,t.columns),s=0;s<n;s++)i[s][0]=e[1][0]*o(-(t[s][0]-e[0][0])*(t[s][0]-e[0][0])/r);return i}function a(t,e,r){var n=h(t,(r=r||{}).percentage||0);if(null===n||3>n[0].rows)return null;var o=n[0],s=n[1],a=n[2],c=[o.rows/R(s.dot(s))],l=(r=Object.create(r.LMOptions||[3,100,.001,.001,.001,.01,.01,11,9,1]),u(o[0][0]-o[1][0])),d=new p([[-l/1e4],[-.001],[-l/1e4]]),m=new p([[e.x],[1],[e.width]]),g=new p([[e.x-l],[.75],[e.width/4]]),v=new p([[e.x+l],[1.25],[4*e.width]]),y=f.optimize(i,m,o,s,c,d,g,v,[],r);return[(y=y.p)[0],[y[1][0]*a],y[2]]}function l(t,e,r){var n=h(t,(r=r||{}).percentage||0);if(null===n||3>n[0].rows)return null;var i=n[0],o=n[1],a=n[2],c=[i.rows/R(o.dot(o))],l=(r=Object.create(r.LMOptions||[3,100,.001,.001,.001,.01,.01,11,9,1]),u(i[0][0]-i[1][0])),d=new p([[-l/1e4],[-.001],[-l/1e4]]),m=(d=new p([[-u(i[0][0]-i[1][0])/1e3],[-.001],[-e.width/1e3]]),new p([[e.x],[1],[e.width]])),g=new p([[e.x-l],[.75],[e.width/4]]),v=new p([[e.x+l],[1.25],[4*e.width]]),y=f.optimize(s,m,i,o,c,d,g,v,[],r);return[(y=y.p)[0],[y[1][0]*a],y[2]]}function h(t,e){var r,n,i,o=t.length,s=null,a=null,u=0;if(2==o){var c=t[0].length;if(s=Array(c),a=Array(c),n=t[1],\"number\"==typeof(r=t[0])[0])for(i=0;i<c;i++)s[i]=r[i],a[i]=n[i],n[i]>u&&(u=n[i]);else if(\"object\"==typeof r[0])for(i=0;i<c;i++)s[i]=r[i][0],a[i]=n[i][0],n[i][0]>u&&(u=n[i][0])}else for(c=o,s=Array(c),a=Array(c),i=0;i<c;i++)s[i]=t[i][0],a[i]=t[i][1],a[i]>u&&(u=a[i]);for(i=0;i<c;i++)a[i]/=u;if(e)for(i=c-1;0<=i;i--)a[i]<e&&(a.splice(i,1),s.splice(i,1));return 0<s.length?[new p([s]).transpose(),new p([a]).transpose(),u]:null}var f=r(226),d=f.Matrix.algebra,p=r(240);t.exports.optimizeSingleLorentzian=a,t.exports.optimizeLorentzianSum=function(t,e,r){var i=h(t);if(null===i||3>i[0].rows)return null;var o,s=i[0],a=i[1],c=i[2],l=[s.rows/d.sqrt(a.dot(a))],m=(r=Object.create(r||[3,100,.001,.001,.001,.01,.01,11,9,1]),e.length),g=new p(3*m,1),v=new p(3*m,1),y=new p(3*m,1),w=new p(3*m,1),x=u(s[0][0]-s[1][0]);for(o=0;o<m;o++)g[o][0]=e[o].x,g[o+m][0]=1,g[o+2*m][0]=e[o].width,v[o][0]=e[o].x-x,v[o+m][0]=0,v[o+2*m][0]=e[o].width/4,y[o][0]=e[o].x+x,y[o+m][0]=1.5,y[o+2*m][0]=4*e[o].width,w[o][0]=-x/1e3,w[o+m][0]=-.001,w[o+2*m][0]=-x/1e3;w=-u(s[0][0]-s[1][0])/1e4;var b=f.optimize(n,g,s,a,l,w,v,y,[],r);b=b.p;var _=Array(m);for(o=0;o<m;o++)_[o]=[b[o],[b[o+m][0]*c],b[o+2*m]];return _},t.exports.optimizeSingleGaussian=l,t.exports.optimizeGaussianSum=function(t,e,r){var i=h(t);if(null===i||3>i[0].rows)return null;var o,s=i[0],a=i[1],c=i[2],l=s.rows,m=new p(l,1),g=l/d.sqrt(a.dot(a));for(o=0;o<l;o++)m[o][0]=g;r=Object.create(r||[3,100,.001,.001,.001,.01,.01,11,9,2]);var v=e.length,y=new p(3*v,1),w=new p(3*v,1),x=new p(3*v,1),b=new p(3*v,1),_=u(s[0][0]-s[1][0]);for(o=0;o<v;o++)y[o][0]=e[o].x,y[o+v][0]=e[o].y/c,y[o+2*v][0]=e[o].width,w[o][0]=e[o].x-_,w[o+v][0]=.8*e[o].y/c,w[o+2*v][0]=e[o].width/2,x[o][0]=e[o].x+_,x[o+v][0]=1.2*e[o].y/c,x[o+2*v][0]=2*e[o].width,b[o][0]=-_/1e3,b[o+v][0]=-.001,b[o+2*v][0]=-_/1e3;var M=f.optimize(n,y,s,a,m,b,w,x,[],r);M=M.p;var S=Array(v);for(o=0;o<v;o++)S[o]=[M[o],[M[o+v][0]*c],M[o+2*v]];return S},t.exports.singleGaussian=s,t.exports.singleLorentzian=i,t.exports.optimizeGaussianTrain=function(t,e,r){var n=h(t);if(null===n||3>n[0].rows)return null;for(var i,o,s,a,u=n[0],c=n[1],f=n[2],d=0,p=u.length,m=[],g=0;g<e.length;g++){for(i=e[g].x-1.5*e[g].width;u[d++]<i&&d<p;);for(i=e[g].x+1.5*e[g].width,o=[],s=[];u[d]<=i&&d<p;)o.push(u[d][0]),s.push(c[d][0]*f),d++;a=l([o,s],e[g],r),m.push(a?{x:a[0][0],y:a[1][0],width:a[2][0],opt:!0}:{x:e[g].x,y:e[g].y,width:e[g].width,opt:!1})}return m},t.exports.optimizeLorentzianTrain=function(t,e,r){var n=h(t);if(null===n||3>n[0].rows)return null;for(var i,o,s,u,c=n[0],l=n[1],f=n[2],d=0,p=c.length,m=[],g=0;g<e.length;g++){for(i=e[g].x-1.5*e[g].width;c[d++]<i&&d<p;);for(i=e[g].x+1.5*e[g].width,o=[],s=[];c[d]<=i&&d<p;)o.push(c[d][0]),s.push(l[d][0]*f),d++;u=a([o,s],e[g],r),m.push(u?{x:u[0][0],y:u[1][0],width:u[2][0],opt:!0}:{x:e[g].x,y:e[g].y,width:e[g].width,opt:!1})}return m}},function(t,e,r){\"use strict\";t.exports=r(227),t.exports.Matrix=r(40),t.exports.Matrix.algebra=r(79)},function(t,e,r){\"use strict\";var n=r(40),i=r(79);t.exports={optimize:function(t,e,r,o,s,a,c,l,h,f){var d=0;if(\"object\"!=typeof e[0])for(var p=0;p<e.length;p++)e[p]=[e[p]];var m=e.length,g=o.length,y=n.zeros(m,1),w=n.zeros(g,1),x=-2e-4,b=-2e-4,_=n.zeros(g,m);if(r.length==o.length){s=s||R((g-m+1)/i.multiply(i.transpose(o),o)),a=a||.001,c=c||i.multiply(u(e),-100),l=l||i.multiply(u(e),100),h=h||1;var S=(f=f||[3,10*m,.001,.001,.001,.01,.01,11,9,1])[1],E=f[2],T=f[5],A=f[6],k=f[7],C=f[8],L=f[9];if(!a.length||1==a.length){var P=Array(m);for(p=0;p<m;p++)P[p]=[a];a=P}var D=[];for(p=0;p<a.length;p++)0!=a[p][0]&&D.push(p);var O=D.length,N=!1,I=null;if(!s.length||s.length<g){var F=i.multiply(n.ones(g,1),s[0]);I=i.dotMultiply(F,F)}else I=i.dotMultiply(s,s);var z=this.lm_matx(t,r,y,w,1,_,e,o,I,a,h),U=z.JtWJ,j=z.JtWdy,V=(x=z.Chi_sq,z.y_hat);_=z.J,M(u(j))<E&&(console.log(\" *** Your Initial Guess is Extremely Close to Optimal ***\"),console.log(\" *** epsilon_1 = \",E),N=!0),1===L?lambda=A:(lambda=A*M(i.diag(U)),nu=2),b=x;for(var B=null;!N&&d<=S;){++d,B=i.solve(i.add(U,i.multiply(1===L?i.diag(i.diag(U)):n.eye(m),lambda)),j);var H=Array(D.length);for($=0;$<D.length;$++)H[$]=B[D[$]];var G=i.add(e,H);for($=0;$<G.length;$++)G[$][0]=v(M(c[$][0],G[$][0]),l[$][0]);var W=i.subtract(o,t(r,G,h)),q=i.multiply(i.transpose(W),i.dotMultiply(W,I));if(2==L){var Y=i.multiply(i.transpose(j),B),X=i.multiply(Y,i.inv(i.add(i.multiply(i.subtract(q-x),.5)),i.multiply(Y,2)));B=i.multiply(X,B);for(var $=0;$<D.length;$++)H[$]=B[D[$]];G=i.add(e,H),G=i.min(i.max(c,G),l),W=i.subtract(o,t(r,G,h)),q=i.multiply(i.transpose(W),mat.dotMultiply(W,I))}var J=(x-q)/i.multiply(i.multiply(i.transpose(B),2),i.add(i.multiply(lambda,B),j));J>T?(dX2=x-b,b=x,y=e,e=G,U=(z=this.lm_matx(t,r,y,w=V,dX2,_,e,o,I,a,h)).JtWJ,j=z.JtWdy,x=z.Chi_sq,V=z.y_hat,_=z.J,1===L?lambda=M(lambda/C,1e-7):2===L?lambda=M(lambda/(1+X),1e-7):3===L&&(lambda=i.multiply(M(1/3,3^1-(2*J-1)),lambda),nu=2)):(x=b,0==d%(2*m)&&(U=(z=this.lm_matx(t,r,y,w,-1,_,e,o,I,a,h)).JtWJ,j=z.JtWdy,dX2=z.Chi_sq,V=z.y_hat,_=z.J),1===L?lambda=v(lambda*k,1e7):2===L?lambda+=u((q-x)/2/X):3===L&&(lambda*=nu,nu*=2))}return(I=i.multiply(i.multiply(i.transpose(W),W),n.ones(g,1))).apply(function(t,e){I[t][e]=(g-O+1)/I[t][e]}),U=(z=this.lm_matx(t,r,y,w,-1,_,e,o,I,a,h)).JtWJ,j=z.JtWdy,V=z.y_hat,_=z.J,{p:e,X2:x=z.Chi_sq}}console.log(\"lm.m error: the length of t must equal the length of y_dat\"),length_t=r.length,length_y_dat=o.length,x=0},lm_FD_J:function(t,e,r,o,s,a){var c=o.length,l=r.length;s=s||i.multiply(n.ones(l,1),.001);for(var h=r.clone(),f=new n(c,l),d=Array(l),p=0;p<l;p++){if(d[p]=s[p]*(1+u(r[p][0])),r[p]=[h[p][0]+d[p]],0!=d[p])if(y1=t(e,r,a),0>s[p][0])for(var m=i.dotDivide(i.subtract(y1,o),d[p]),g=0;g<c;g++)f[g][p]=m[g][0];else for(r[p][0]=h[p][0]-d[p],m=i.dotDivide(i.subtract(y1,t(e,r,a)),2*d[p]),g=0;g<c;g++)f[g][p]=m[g][0];r[p]=h[p]}return f},lm_Broyden_J:function(t,e,r,n,o){var s=i.subtract(n,t),a=i.transpose(s);return a.div(i.multiply(a,s)),i.add(r,i.multiply(i.subtract(o,i.add(e,i.multiply(r,s))),a))},lm_matx:function(t,e,r,o,s,a,u,c,l,h,f,d){var p=u.length;h=h||.001;var m=t(e,u,f);a=0==d%(2*p)||0<s?this.lm_FD_J(t,e,u,m,h,f):this.lm_Broyden_J(r,o,a,u,m);var g=i.subtract(c,m),v=i.multiply(i.transpose(g),i.dotMultiply(g,l)),y=i.transpose(a);return{JtWJ:i.multiply(y,i.dotMultiply(a,i.multiply(l,n.ones(1,p)))),JtWdy:i.multiply(y,i.dotMultiply(l,g)),Chi_sq:v,y_hat:m,J:a}}}},function(){\"use strict\";Symbol.species||(Symbol.species=Symbol.for(\"@@species\"))},function(t,e,r){\"use strict\";var n=r(17);t.exports=class extends n{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,r){\"use strict\";var n=r(17);t.exports=class extends n{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,r){\"use strict\";var n=r(17),i=r(26);t.exports=class extends n{constructor(t,e,r,n,o){i.checkRange(t,e,r,n,o),super(t,r-e+1,o-n+1),this.startRow=e,this.startColumn=n}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,r){\"use strict\";var n=r(17),i=r(26);t.exports=class extends n{constructor(t,e,r){var n=i.checkIndices(t,e,r);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,r){\"use strict\";var n=r(17);t.exports=class extends n{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,r){\"use strict\";var n=r(17);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,r){\"use strict\";var n=r(17);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,r){\"use strict\";function n(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=r(7).Matrix,s=r(78),a=r(237),u=r(77),c=r(238),l=r(239);o.inverse=o.inv=n,o.prototype.inverse=o.prototype.inv=function(){return n(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:s,SVD:s,EigenvalueDecomposition:a,EVD:a,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:n,solve:i}},function(t,e,r){\"use strict\";function n(t,e){if(e=Object.assign({},p,e),!(this instanceof n))return new n(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error(\"Matrix is not a square matrix\");var r,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(r=0;r<c;r++)for(u=0;u<c;u++)h[r][u]=g.get(r,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(r=0;r<c;r++)v[r][u]=g.get(r,u);s(c,v,y,h),a(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,r,n){var i,o,s,a,c,l,h,f;for(c=0;c<t;c++)r[c]=n[t-1][c];for(a=t-1;0<a;a--){for(f=0,s=0,l=0;l<a;l++)f+=u(r[l]);if(0===f)for(e[a]=r[a-1],c=0;c<a;c++)r[c]=n[a-1][c],n[a][c]=0,n[c][a]=0;else{for(l=0;l<a;l++)r[l]/=f,s+=r[l]*r[l];for(i=r[a-1],o=R(s),0<i&&(o=-o),e[a]=f*o,s-=i*o,r[a-1]=i-o,c=0;c<a;c++)e[c]=0;for(c=0;c<a;c++){for(n[c][a]=i=r[c],o=e[c]+n[c][c]*i,l=c+1;l<=a-1;l++)o+=n[l][c]*r[l],e[l]+=n[l][c]*i;e[c]=o}for(i=0,c=0;c<a;c++)e[c]/=s,i+=e[c]*r[c];for(h=i/(s+s),c=0;c<a;c++)e[c]-=h*r[c];for(c=0;c<a;c++){for(i=r[c],o=e[c],l=c;l<=a-1;l++)n[l][c]-=i*e[l]+o*r[l];r[c]=n[a-1][c],n[a][c]=0}}r[a]=s}for(a=0;a<t-1;a++){if(n[t-1][a]=n[a][a],n[a][a]=1,0!==(s=r[a+1])){for(l=0;l<=a;l++)r[l]=n[l][a+1]/s;for(c=0;c<=a;c++){for(o=0,l=0;l<=a;l++)o+=n[l][a+1]*n[l][c];for(l=0;l<=a;l++)n[l][c]-=o*r[l]}}for(l=0;l<=a;l++)n[l][a+1]=0}for(c=0;c<t;c++)r[c]=n[t-1][c],n[t-1][c]=0;n[t-1][t-1]=1,e[0]=0}function o(t,e,r,n){var i,o,s,a,c,l,h,d,p,m,g,v,y,w,x,b;for(s=1;s<t;s++)e[s-1]=e[s];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(r[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(r[l+1]-(i=r[l]))/(2*e[l]),1),0>d&&(p=-p),r[l]=e[l]/(d+p),r[l+1]=e[l]*(d+p),m=r[l+1],o=i-r[l],s=l+2;s<t;s++)r[s]-=o;for(_+=o,d=r[h],v=g=1,y=g,w=e[l+1],x=0,b=0,s=h-1;s>=l;s--)for(y=v,v=g,b=x,i=g*e[s],o=g*d,p=f(d,e[s]),e[s+1]=x*p,d=(g=d/p)*r[s]-(x=e[s]/p)*i,r[s+1]=o+x*(g*i+x*r[s]),c=0;c<t;c++)n[c][s+1]=x*n[c][s]+g*(o=n[c][s+1]),n[c][s]=g*n[c][s]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),r[l]=g*d}while(u(e[l])>E*S);r[l]+=_,e[l]=0}for(s=0;s<t-1;s++){for(c=s,d=r[s],a=s+1;a<t;a++)r[a]<d&&(c=a,d=r[a]);if(c!==s)for(r[c]=r[s],r[s]=d,a=0;a<t;a++)d=n[a][s],n[a][s]=n[a][c],n[a][c]=d}}function s(t,e,r,n){var i,o,s,a,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,a=l;a<=f;a++)h+=u(e[a][l-1]);if(0!==h){for(s=0,a=f;a>=l;a--)r[a]=e[a][l-1]/h,s+=r[a]*r[a];for(o=R(s),0<r[l]&&(o=-o),s-=r[l]*o,r[l]-=o,c=l;c<t;c++){for(i=0,a=f;a>=l;a--)i+=r[a]*e[a][c];for(i/=s,a=l;a<=f;a++)e[a][c]-=i*r[a]}for(a=0;a<=f;a++){for(i=0,c=f;c>=l;c--)i+=r[c]*e[a][c];for(i/=s,c=l;c<=f;c++)e[a][c]-=i*r[c]}r[l]=h*r[l],e[l][l-1]=h*o}}for(a=0;a<t;a++)for(c=0;c<t;c++)n[a][c]=a===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(a=l+1;a<=f;a++)r[a]=e[a][l-1];for(c=l;c<=f;c++){for(o=0,a=l;a<=f;a++)o+=r[a]*n[a][c];for(o=o/r[l]/e[l][l-1],a=l;a<=f;a++)n[a][c]+=o*r[a]}}}function a(t,e,r,n,i){var o,s,a,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,k=0,C=0,L=0,P=0,D=0,O=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(r[o]=i[o][o],e[o]=0),s=M(o-1,0);s<t;s++)k+=u(i[o][s]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=k),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,r[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(O=R(u(L=(C=(i[S-1][S-1]-i[S][S])/2)*C+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=L){for(r[S-1]=p+(O=0<=C?C+O:C-O),r[S]=r[S-1],0!==O&&(r[S]=p-d/O),e[S-1]=0,e[S]=0,C=(p=i[S][S-1])/(D=u(p)+u(O)),C/=P=R(C*C+(L=O/D)*L),L/=P,s=S-1;s<t;s++)i[S-1][s]=L*(O=i[S-1][s])+C*i[S][s],i[S][s]=L*i[S][s]-C*O;for(o=0;o<=S;o++)i[o][S-1]=L*(O=i[o][S-1])+C*i[o][S],i[o][S]=L*i[o][S]-C*O;for(o=0;o<=E;o++)n[o][S-1]=L*(O=n[o][S-1])+C*n[o][S],n[o][S]=L*n[o][S]-C*O}else r[S-1]=p+C,r[S]=p+C,e[S-1]=O,e[S]=-O;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(C=((P=p-(O=i[h][h]))*(D=m-O)-d)/i[h+1][h]+i[h][h+1],L=i[h+1][h+1]-O-P-D,P=i[h+2][h+1],C/=D=u(C)+u(L)+u(P),L/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(L)+u(P))<T*(u(C)*(u(i[h-1][h-1])+u(O)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(a=h;a<=S-1&&(b=a!==S-1,a!==h&&(C=i[a][a-1],L=i[a+1][a-1],P=b?i[a+2][a-1]:0,0!==(p=u(C)+u(L)+u(P))&&(C/=p,L/=p,P/=p)),0!==p);a++)if(D=R(C*C+L*L+P*P),0>C&&(D=-D),0!==D){for(a===h?l!==h&&(i[a][a-1]=-i[a][a-1]):i[a][a-1]=-D*p,p=(C+=D)/D,m=L/D,O=P/D,L/=C,P/=C,s=a;s<t;s++)C=i[a][s]+L*i[a+1][s],b&&(i[a+2][s]=i[a+2][s]-(C+=P*i[a+2][s])*O),i[a][s]-=C*p,i[a+1][s]=i[a+1][s]-C*m;for(o=0;o<=v(S,a+3);o++)C=p*i[o][a]+m*i[o][a+1],b&&(i[o][a+2]=i[o][a+2]-(C+=O*i[o][a+2])*P),i[o][a]-=C,i[o][a+1]=i[o][a+1]-C*L;for(o=0;o<=E;o++)C=p*n[o][a]+m*n[o][a+1],b&&(n[o][a+2]=n[o][a+2]-(C+=O*n[o][a+2])*P),n[o][a]-=C,n[o][a+1]=n[o][a+1]-C*L}}}if(0!==k){for(S=t-1;0<=S;S--)if(C=r[S],0===(L=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-C,P=0,s=l;s<=S;s++)P+=i[o][s]*i[s][S];if(0>e[o])O=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*k):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-O*P)/(L=(r[o]-C)*(r[o]-C)+e[o]*e[o]),i[o+1][S]=u(p)>u(O)?(-P-d*f)/p:(-D-m*f)/O),1<T*(f=u(i[o][S]))*f)for(s=o;s<=S;s++)i[s][S]/=f}else if(0>L)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=L/i[S][S-1],i[S-1][S]=-(i[S][S]-C)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-C,L),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,s=l;s<=S;s++)g+=i[o][s]*i[s][S-1],y+=i[o][s]*i[s][S];if(d=i[o][o]-C,0>e[o])O=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,L),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(r[o]-C)*L,0==(w=(r[o]-C)*(r[o]-C)+e[o]*e[o]-L*L)&&0===x&&(w=T*k*(u(d)+u(L)+u(p)+u(m)+u(O))),_=c(p*P-O*g+L*y,p*D-O*y-L*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(O)+u(L)?(i[o+1][S-1]=(-g-d*i[o][S-1]+L*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-L*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],O,L),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(s=o;s<=S;s++)i[s][S-1]=i[s][S-1]/f,i[s][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(s=o;s<t;s++)n[o][s]=i[o][s];for(s=t-1;s>=0;s--)for(o=0;o<=E;o++){for(O=0,a=0;a<=v(s,E);a++)O+=n[o][a]*i[a][s];n[o][s]=O}}}function c(t,e,r,n){var i,o;return u(r)>u(n)?[(t+(i=n/r)*e)/(o=r+i*n),(e-i*t)/o]:[((i=r/n)*t+e)/(o=n+i*r),(i*e-t)/o]}var l=r(7).Matrix,h=r(41),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};n.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,r=this.n,n=this.e,i=this.d,o=new l(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)o[t][e]=0;o[t][t]=i[t],0<n[t]?o[t][t+1]=n[t]:0>n[t]&&(o[t][t-1]=n[t])}return o}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,s,a,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(s=0;s<l;s++){var f=0;for(e=s;e<c;e++)f=o(f,u[e][s]);if(0!==f){for(0>u[s][s]&&(f=-f),e=s;e<c;e++)u[e][s]/=f;for(u[s][s]+=1,r=s+1;r<l;r++){for(a=0,e=s;e<c;e++)a+=u[e][s]*u[e][r];for(a=-a/u[s][s],e=s;e<c;e++)u[e][r]+=a*u[e][s]}}h[s]=-f}this.QR=u,this.Rdiag=h}var i=r(7).Matrix,o=r(41).hypotenuse;n.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix row dimensions must agree\");if(!this.isFullRank())throw new Error(\"Matrix is rank deficient\");var n,o,s,a,u=t.columns,c=t.clone(),l=e.columns;for(s=0;s<l;s++)for(o=0;o<u;o++){for(a=0,n=s;n<r;n++)a+=e[n][s]*c[n][o];for(a=-a/e[s][s],n=s;n<r;n++)c[n][o]+=a*e[n][s]}for(s=l-1;0<=s;s--){for(o=0;o<u;o++)c[s][o]/=this.Rdiag[s];for(n=0;n<s;n++)for(o=0;o<u;o++)c[n][o]-=c[s][o]*e[n][s]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,r=this.QR,n=r.columns,o=new i(n,n);for(t=0;t<n;t++)for(e=0;e<n;e++)o[t][e]=t<e?r[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,r,n,o=this.QR,s=o.rows,a=o.columns,u=new i(s,a);for(r=a-1;0<=r;r--){for(t=0;t<s;t++)u[t][r]=0;for(u[r][r]=1,e=r;e<a;e++)if(0!==o[r][r]){for(n=0,t=r;t<s;t++)n+=o[t][r]*u[t][e];for(n=-n/o[r][r],t=r;t<s;t++)u[t][e]+=n*o[t][r]}}return u}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error(\"Matrix is not symmetric\");var e,r,o,s=t,a=s.rows,u=new i(a,a),c=!0;for(r=0;r<a;r++){var l=u[r],h=0;for(o=0;o<r;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(s[r][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=s[r][r]-h),u[r][r]=R(M(h,0)),o=r+1;o<a;o++)u[r][o]=0}if(!c)throw new Error(\"Matrix is not positive definite\");this.L=u}var i=r(7).Matrix;n.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix dimensions do not match\");var n,o,s,a=t.columns,u=t.clone();for(s=0;s<r;s++)for(o=0;o<a;o++){for(n=0;n<s;n++)u[s][o]-=u[n][o]*e[s][n];u[s][o]/=e[s][s]}for(s=r-1;0<=s;s--)for(o=0;o<a;o++){for(n=s+1;n<r;n++)u[s][o]-=u[n][o]*e[n][s];u[s][o]/=e[s][s]}return u}},t.exports=n},function(t,e,r){\"use strict\";t.exports=r(8).Matrix,t.exports.Decompositions=t.exports.DC=r(249)},function(){\"use strict\";Symbol.species||(Symbol.species=Symbol.for(\"@@species\"))},function(t,e,r){\"use strict\";var n=r(18);t.exports=class extends n{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,r){\"use strict\";var n=r(18);t.exports=class extends n{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,r){\"use strict\";var n=r(18),i=r(27);t.exports=class extends n{constructor(t,e,r,n,o){i.checkRange(t,e,r,n,o),super(t,r-e+1,o-n+1),this.startRow=e,this.startColumn=n}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,r){\"use strict\";var n=r(18),i=r(27);t.exports=class extends n{constructor(t,e,r){var n=i.checkIndices(t,e,r);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,r){\"use strict\";var n=r(18);t.exports=class extends n{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,r){\"use strict\";var n=r(18);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,r){\"use strict\";var n=r(18);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,r){\"use strict\";function n(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=r(8).Matrix,s=r(82),a=r(250),u=r(81),c=r(251),l=r(252);o.inverse=o.inv=n,o.prototype.inverse=o.prototype.inv=function(){return n(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:s,SVD:s,EigenvalueDecomposition:a,EVD:a,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:n,solve:i}},function(t,e,r){\"use strict\";function n(t,e){if(e=Object.assign({},p,e),!(this instanceof n))return new n(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error(\"Matrix is not a square matrix\");var r,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(r=0;r<c;r++)for(u=0;u<c;u++)h[r][u]=g.get(r,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(r=0;r<c;r++)v[r][u]=g.get(r,u);s(c,v,y,h),a(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,r,n){var i,o,s,a,c,l,h,f;for(c=0;c<t;c++)r[c]=n[t-1][c];for(a=t-1;0<a;a--){for(f=0,s=0,l=0;l<a;l++)f+=u(r[l]);if(0===f)for(e[a]=r[a-1],c=0;c<a;c++)r[c]=n[a-1][c],n[a][c]=0,n[c][a]=0;else{for(l=0;l<a;l++)r[l]/=f,s+=r[l]*r[l];for(i=r[a-1],o=R(s),0<i&&(o=-o),e[a]=f*o,s-=i*o,r[a-1]=i-o,c=0;c<a;c++)e[c]=0;for(c=0;c<a;c++){for(n[c][a]=i=r[c],o=e[c]+n[c][c]*i,l=c+1;l<=a-1;l++)o+=n[l][c]*r[l],e[l]+=n[l][c]*i;e[c]=o}for(i=0,c=0;c<a;c++)e[c]/=s,i+=e[c]*r[c];for(h=i/(s+s),c=0;c<a;c++)e[c]-=h*r[c];for(c=0;c<a;c++){for(i=r[c],o=e[c],l=c;l<=a-1;l++)n[l][c]-=i*e[l]+o*r[l];r[c]=n[a-1][c],n[a][c]=0}}r[a]=s}for(a=0;a<t-1;a++){if(n[t-1][a]=n[a][a],n[a][a]=1,0!==(s=r[a+1])){for(l=0;l<=a;l++)r[l]=n[l][a+1]/s;for(c=0;c<=a;c++){for(o=0,l=0;l<=a;l++)o+=n[l][a+1]*n[l][c];for(l=0;l<=a;l++)n[l][c]-=o*r[l]}}for(l=0;l<=a;l++)n[l][a+1]=0}for(c=0;c<t;c++)r[c]=n[t-1][c],n[t-1][c]=0;n[t-1][t-1]=1,e[0]=0}function o(t,e,r,n){var i,o,s,a,c,l,h,d,p,m,g,v,y,w,x,b;for(s=1;s<t;s++)e[s-1]=e[s];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(r[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(r[l+1]-(i=r[l]))/(2*e[l]),1),0>d&&(p=-p),r[l]=e[l]/(d+p),r[l+1]=e[l]*(d+p),m=r[l+1],o=i-r[l],s=l+2;s<t;s++)r[s]-=o;for(_+=o,d=r[h],v=g=1,y=g,w=e[l+1],x=0,b=0,s=h-1;s>=l;s--)for(y=v,v=g,b=x,i=g*e[s],o=g*d,p=f(d,e[s]),e[s+1]=x*p,d=(g=d/p)*r[s]-(x=e[s]/p)*i,r[s+1]=o+x*(g*i+x*r[s]),c=0;c<t;c++)n[c][s+1]=x*n[c][s]+g*(o=n[c][s+1]),n[c][s]=g*n[c][s]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),r[l]=g*d}while(u(e[l])>E*S);r[l]+=_,e[l]=0}for(s=0;s<t-1;s++){for(c=s,d=r[s],a=s+1;a<t;a++)r[a]<d&&(c=a,d=r[a]);if(c!==s)for(r[c]=r[s],r[s]=d,a=0;a<t;a++)d=n[a][s],n[a][s]=n[a][c],n[a][c]=d}}function s(t,e,r,n){var i,o,s,a,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,a=l;a<=f;a++)h+=u(e[a][l-1]);if(0!==h){for(s=0,a=f;a>=l;a--)r[a]=e[a][l-1]/h,s+=r[a]*r[a];for(o=R(s),0<r[l]&&(o=-o),s-=r[l]*o,r[l]-=o,c=l;c<t;c++){for(i=0,a=f;a>=l;a--)i+=r[a]*e[a][c];for(i/=s,a=l;a<=f;a++)e[a][c]-=i*r[a]}for(a=0;a<=f;a++){for(i=0,c=f;c>=l;c--)i+=r[c]*e[a][c];for(i/=s,c=l;c<=f;c++)e[a][c]-=i*r[c]}r[l]=h*r[l],e[l][l-1]=h*o}}for(a=0;a<t;a++)for(c=0;c<t;c++)n[a][c]=a===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(a=l+1;a<=f;a++)r[a]=e[a][l-1];for(c=l;c<=f;c++){for(o=0,a=l;a<=f;a++)o+=r[a]*n[a][c];for(o=o/r[l]/e[l][l-1],a=l;a<=f;a++)n[a][c]+=o*r[a]}}}function a(t,e,r,n,i){var o,s,a,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,k=0,C=0,L=0,P=0,D=0,O=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(r[o]=i[o][o],e[o]=0),s=M(o-1,0);s<t;s++)k+=u(i[o][s]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=k),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,r[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(O=R(u(L=(C=(i[S-1][S-1]-i[S][S])/2)*C+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=L){for(r[S-1]=p+(O=0<=C?C+O:C-O),r[S]=r[S-1],0!==O&&(r[S]=p-d/O),e[S-1]=0,e[S]=0,C=(p=i[S][S-1])/(D=u(p)+u(O)),C/=P=R(C*C+(L=O/D)*L),L/=P,s=S-1;s<t;s++)i[S-1][s]=L*(O=i[S-1][s])+C*i[S][s],i[S][s]=L*i[S][s]-C*O;for(o=0;o<=S;o++)i[o][S-1]=L*(O=i[o][S-1])+C*i[o][S],i[o][S]=L*i[o][S]-C*O;for(o=0;o<=E;o++)n[o][S-1]=L*(O=n[o][S-1])+C*n[o][S],n[o][S]=L*n[o][S]-C*O}else r[S-1]=p+C,r[S]=p+C,e[S-1]=O,e[S]=-O;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(C=((P=p-(O=i[h][h]))*(D=m-O)-d)/i[h+1][h]+i[h][h+1],L=i[h+1][h+1]-O-P-D,P=i[h+2][h+1],C/=D=u(C)+u(L)+u(P),L/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(L)+u(P))<T*(u(C)*(u(i[h-1][h-1])+u(O)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(a=h;a<=S-1&&(b=a!==S-1,a!==h&&(C=i[a][a-1],L=i[a+1][a-1],P=b?i[a+2][a-1]:0,0!==(p=u(C)+u(L)+u(P))&&(C/=p,L/=p,P/=p)),0!==p);a++)if(D=R(C*C+L*L+P*P),0>C&&(D=-D),0!==D){for(a===h?l!==h&&(i[a][a-1]=-i[a][a-1]):i[a][a-1]=-D*p,p=(C+=D)/D,m=L/D,O=P/D,L/=C,P/=C,s=a;s<t;s++)C=i[a][s]+L*i[a+1][s],b&&(i[a+2][s]=i[a+2][s]-(C+=P*i[a+2][s])*O),i[a][s]-=C*p,i[a+1][s]=i[a+1][s]-C*m;for(o=0;o<=v(S,a+3);o++)C=p*i[o][a]+m*i[o][a+1],b&&(i[o][a+2]=i[o][a+2]-(C+=O*i[o][a+2])*P),i[o][a]-=C,i[o][a+1]=i[o][a+1]-C*L;for(o=0;o<=E;o++)C=p*n[o][a]+m*n[o][a+1],b&&(n[o][a+2]=n[o][a+2]-(C+=O*n[o][a+2])*P),n[o][a]-=C,n[o][a+1]=n[o][a+1]-C*L}}}if(0!==k){for(S=t-1;0<=S;S--)if(C=r[S],0===(L=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-C,P=0,s=l;s<=S;s++)P+=i[o][s]*i[s][S];if(0>e[o])O=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*k):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-O*P)/(L=(r[o]-C)*(r[o]-C)+e[o]*e[o]),i[o+1][S]=u(p)>u(O)?(-P-d*f)/p:(-D-m*f)/O),1<T*(f=u(i[o][S]))*f)for(s=o;s<=S;s++)i[s][S]/=f}else if(0>L)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=L/i[S][S-1],i[S-1][S]=-(i[S][S]-C)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-C,L),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,s=l;s<=S;s++)g+=i[o][s]*i[s][S-1],y+=i[o][s]*i[s][S];if(d=i[o][o]-C,0>e[o])O=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,L),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(r[o]-C)*L,0==(w=(r[o]-C)*(r[o]-C)+e[o]*e[o]-L*L)&&0===x&&(w=T*k*(u(d)+u(L)+u(p)+u(m)+u(O))),_=c(p*P-O*g+L*y,p*D-O*y-L*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(O)+u(L)?(i[o+1][S-1]=(-g-d*i[o][S-1]+L*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-L*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],O,L),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(s=o;s<=S;s++)i[s][S-1]=i[s][S-1]/f,i[s][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(s=o;s<t;s++)n[o][s]=i[o][s];for(s=t-1;s>=0;s--)for(o=0;o<=E;o++){for(O=0,a=0;a<=v(s,E);a++)O+=n[o][a]*i[a][s];n[o][s]=O}}}function c(t,e,r,n){var i,o;return u(r)>u(n)?[(t+(i=n/r)*e)/(o=r+i*n),(e-i*t)/o]:[((i=r/n)*t+e)/(o=n+i*r),(i*e-t)/o]}var l=r(8).Matrix,h=r(42),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};n.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,r=this.n,n=this.e,i=this.d,o=new l(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)o[t][e]=0;o[t][t]=i[t],0<n[t]?o[t][t+1]=n[t]:0>n[t]&&(o[t][t-1]=n[t])}return o}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,s,a,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(s=0;s<l;s++){var f=0;for(e=s;e<c;e++)f=o(f,u[e][s]);if(0!==f){for(0>u[s][s]&&(f=-f),e=s;e<c;e++)u[e][s]/=f;for(u[s][s]+=1,r=s+1;r<l;r++){for(a=0,e=s;e<c;e++)a+=u[e][s]*u[e][r];for(a=-a/u[s][s],e=s;e<c;e++)u[e][r]+=a*u[e][s]}}h[s]=-f}this.QR=u,this.Rdiag=h}var i=r(8).Matrix,o=r(42).hypotenuse;n.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix row dimensions must agree\");if(!this.isFullRank())throw new Error(\"Matrix is rank deficient\");var n,o,s,a,u=t.columns,c=t.clone(),l=e.columns;for(s=0;s<l;s++)for(o=0;o<u;o++){for(a=0,n=s;n<r;n++)a+=e[n][s]*c[n][o];for(a=-a/e[s][s],n=s;n<r;n++)c[n][o]+=a*e[n][s]}for(s=l-1;0<=s;s--){for(o=0;o<u;o++)c[s][o]/=this.Rdiag[s];for(n=0;n<s;n++)for(o=0;o<u;o++)c[n][o]-=c[s][o]*e[n][s]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,r=this.QR,n=r.columns,o=new i(n,n);for(t=0;t<n;t++)for(e=0;e<n;e++)o[t][e]=t<e?r[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,r,n,o=this.QR,s=o.rows,a=o.columns,u=new i(s,a);for(r=a-1;0<=r;r--){for(t=0;t<s;t++)u[t][r]=0;for(u[r][r]=1,e=r;e<a;e++)if(0!==o[r][r]){for(n=0,t=r;t<s;t++)n+=o[t][r]*u[t][e];for(n=-n/o[r][r],t=r;t<s;t++)u[t][e]+=n*o[t][r]}}return u}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error(\"Matrix is not symmetric\");var e,r,o,s=t,a=s.rows,u=new i(a,a),c=!0;for(r=0;r<a;r++){var l=u[r],h=0;for(o=0;o<r;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(s[r][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=s[r][r]-h),u[r][r]=R(M(h,0)),o=r+1;o<a;o++)u[r][o]=0}if(!c)throw new Error(\"Matrix is not positive definite\");this.L=u}var i=r(8).Matrix;n.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix dimensions do not match\");var n,o,s,a=t.columns,u=t.clone();for(s=0;s<r;s++)for(o=0;o<a;o++){for(n=0;n<s;n++)u[s][o]-=u[n][o]*e[s][n];u[s][o]/=e[s][s]}for(s=r-1;0<=s;s--)for(o=0;o<a;o++){for(n=s+1;n<r;n++)u[s][o]-=u[n][o]*e[n][s];u[s][o]/=e[s][s]}return u}},t.exports=n},function(t,e,r){\"use strict\";var n=r(254),i=r(255),o={damping:void 0,gradientDifference:.1,initialValues:void 0,maxIterations:100,errorTolerance:.01};t.exports=function(t,e,r){if(!r||!r.damping||0>=r.damping)throw new TypeError(\"The damping option should be a positive number\");if(!(r=Object.assign({},o,r)).initialValues){r.initialValues=Array(e.length);for(var s=0;s<e.length;s++)r.initialValues[s]=1}if(!t.x||!t.y)throw new TypeError(\"The data parameter should have a x and y elements\");if(t.x.constructor!==Array||2>t.x.length||t.y.constructor!==Array||2>t.y.length)throw new TypeError(\"The data parameter elements should be an array with more than 2 points\");if(t.x.length!==t.y.length)throw new RangeError(\"The data parameter elements should have the same size\");for(var a=r.initialValues,u=n(t,a,e),c=u<=r.errorTolerance,l=0;l<r.maxIterations&&!c;l++)a=i(t,a,r.damping,r.gradientDifference,e),c=(u=n(t,a,e))<=r.errorTolerance;return{parameterValues:a,parameterError:u,iterations:l}}},function(t){\"use strict\";t.exports=function(t,e,r){for(var n=0,i=r(...e),o=0;o<t.x.length;o++)n+=u(t.y[o]-i(t.x[o]));return n}},function(t,e,r){\"use strict\";var n=r(256);t.exports=function(t,e,r,i,o){var s=n.eye(o.length).mul(r*i*i),a=function(t,e,r,i){for(var o=i.length,s=t.x.length,a=Array(o),u=i(...e),c=0;c<o;c++){a[c]=Array(s);var l=e.concat();l[c]+=r;for(var h=i(...l),f=0;f<s;f++)a[c][f]=u(t.x[f])-h(t.x[f])}return new n(a)}(t,e,i,o),u=function(t,e,r){for(var i=t.x.length,o=Array(i),s=r(...e),a=0;a<i;a++)o[a]=t.y[a]-s(t.x[a]);return new n([o])}(t,e,o).transpose();e=new n([e]);var c=n.inv(s.add(a.mmul(a.transposeView())));return(e=e.sub(c.mmul(a).mmul(u).mul(i).transposeView())).to1DArray()}},function(t,e,r){\"use strict\";t.exports=r(9).Matrix,t.exports.Decompositions=t.exports.DC=r(265)},function(){\"use strict\";Symbol.species||(Symbol.species=Symbol.for(\"@@species\"))},function(t,e,r){\"use strict\";var n=r(19);t.exports=class extends n{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,r){\"use strict\";var n=r(19);t.exports=class extends n{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,r){\"use strict\";var n=r(19),i=r(28);t.exports=class extends n{constructor(t,e,r,n,o){i.checkRange(t,e,r,n,o),super(t,r-e+1,o-n+1),this.startRow=e,this.startColumn=n}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,r){\"use strict\";var n=r(19),i=r(28);t.exports=class extends n{constructor(t,e,r){var n=i.checkIndices(t,e,r);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,r){\"use strict\";var n=r(19);t.exports=class extends n{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,r){\"use strict\";var n=r(19);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,r){\"use strict\";var n=r(19);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,r){\"use strict\";function n(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=r(9).Matrix,s=r(85),a=r(266),u=r(84),c=r(267),l=r(268);o.inverse=o.inv=n,o.prototype.inverse=o.prototype.inv=function(){return n(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:s,SVD:s,EigenvalueDecomposition:a,EVD:a,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:n,solve:i}},function(t,e,r){\"use strict\";function n(t,e){if(e=Object.assign({},p,e),!(this instanceof n))return new n(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error(\"Matrix is not a square matrix\");var r,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(r=0;r<c;r++)for(u=0;u<c;u++)h[r][u]=g.get(r,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(r=0;r<c;r++)v[r][u]=g.get(r,u);s(c,v,y,h),a(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,r,n){var i,o,s,a,c,l,h,f;for(c=0;c<t;c++)r[c]=n[t-1][c];for(a=t-1;0<a;a--){for(f=0,s=0,l=0;l<a;l++)f+=u(r[l]);if(0===f)for(e[a]=r[a-1],c=0;c<a;c++)r[c]=n[a-1][c],n[a][c]=0,n[c][a]=0;else{for(l=0;l<a;l++)r[l]/=f,s+=r[l]*r[l];for(i=r[a-1],o=R(s),0<i&&(o=-o),e[a]=f*o,s-=i*o,r[a-1]=i-o,c=0;c<a;c++)e[c]=0;for(c=0;c<a;c++){for(n[c][a]=i=r[c],o=e[c]+n[c][c]*i,l=c+1;l<=a-1;l++)o+=n[l][c]*r[l],e[l]+=n[l][c]*i;e[c]=o}for(i=0,c=0;c<a;c++)e[c]/=s,i+=e[c]*r[c];for(h=i/(s+s),c=0;c<a;c++)e[c]-=h*r[c];for(c=0;c<a;c++){for(i=r[c],o=e[c],l=c;l<=a-1;l++)n[l][c]-=i*e[l]+o*r[l];r[c]=n[a-1][c],n[a][c]=0}}r[a]=s}for(a=0;a<t-1;a++){if(n[t-1][a]=n[a][a],n[a][a]=1,0!==(s=r[a+1])){for(l=0;l<=a;l++)r[l]=n[l][a+1]/s;for(c=0;c<=a;c++){for(o=0,l=0;l<=a;l++)o+=n[l][a+1]*n[l][c];for(l=0;l<=a;l++)n[l][c]-=o*r[l]}}for(l=0;l<=a;l++)n[l][a+1]=0}for(c=0;c<t;c++)r[c]=n[t-1][c],n[t-1][c]=0;n[t-1][t-1]=1,e[0]=0}function o(t,e,r,n){var i,o,s,a,c,l,h,d,p,m,g,v,y,w,x,b;for(s=1;s<t;s++)e[s-1]=e[s];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(r[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(r[l+1]-(i=r[l]))/(2*e[l]),1),0>d&&(p=-p),r[l]=e[l]/(d+p),r[l+1]=e[l]*(d+p),m=r[l+1],o=i-r[l],s=l+2;s<t;s++)r[s]-=o;for(_+=o,d=r[h],v=g=1,y=g,w=e[l+1],x=0,b=0,s=h-1;s>=l;s--)for(y=v,v=g,b=x,i=g*e[s],o=g*d,p=f(d,e[s]),e[s+1]=x*p,d=(g=d/p)*r[s]-(x=e[s]/p)*i,r[s+1]=o+x*(g*i+x*r[s]),c=0;c<t;c++)n[c][s+1]=x*n[c][s]+g*(o=n[c][s+1]),n[c][s]=g*n[c][s]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),r[l]=g*d}while(u(e[l])>E*S);r[l]+=_,e[l]=0}for(s=0;s<t-1;s++){for(c=s,d=r[s],a=s+1;a<t;a++)r[a]<d&&(c=a,d=r[a]);if(c!==s)for(r[c]=r[s],r[s]=d,a=0;a<t;a++)d=n[a][s],n[a][s]=n[a][c],n[a][c]=d}}function s(t,e,r,n){var i,o,s,a,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,a=l;a<=f;a++)h+=u(e[a][l-1]);if(0!==h){for(s=0,a=f;a>=l;a--)r[a]=e[a][l-1]/h,s+=r[a]*r[a];for(o=R(s),0<r[l]&&(o=-o),s-=r[l]*o,r[l]-=o,c=l;c<t;c++){for(i=0,a=f;a>=l;a--)i+=r[a]*e[a][c];for(i/=s,a=l;a<=f;a++)e[a][c]-=i*r[a]}for(a=0;a<=f;a++){for(i=0,c=f;c>=l;c--)i+=r[c]*e[a][c];for(i/=s,c=l;c<=f;c++)e[a][c]-=i*r[c]}r[l]=h*r[l],e[l][l-1]=h*o}}for(a=0;a<t;a++)for(c=0;c<t;c++)n[a][c]=a===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(a=l+1;a<=f;a++)r[a]=e[a][l-1];for(c=l;c<=f;c++){for(o=0,a=l;a<=f;a++)o+=r[a]*n[a][c];for(o=o/r[l]/e[l][l-1],a=l;a<=f;a++)n[a][c]+=o*r[a]}}}function a(t,e,r,n,i){var o,s,a,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,k=0,C=0,L=0,P=0,D=0,O=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(r[o]=i[o][o],e[o]=0),s=M(o-1,0);s<t;s++)k+=u(i[o][s]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=k),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,r[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(O=R(u(L=(C=(i[S-1][S-1]-i[S][S])/2)*C+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=L){for(r[S-1]=p+(O=0<=C?C+O:C-O),r[S]=r[S-1],0!==O&&(r[S]=p-d/O),e[S-1]=0,e[S]=0,C=(p=i[S][S-1])/(D=u(p)+u(O)),C/=P=R(C*C+(L=O/D)*L),L/=P,s=S-1;s<t;s++)i[S-1][s]=L*(O=i[S-1][s])+C*i[S][s],i[S][s]=L*i[S][s]-C*O;for(o=0;o<=S;o++)i[o][S-1]=L*(O=i[o][S-1])+C*i[o][S],i[o][S]=L*i[o][S]-C*O;for(o=0;o<=E;o++)n[o][S-1]=L*(O=n[o][S-1])+C*n[o][S],n[o][S]=L*n[o][S]-C*O}else r[S-1]=p+C,r[S]=p+C,e[S-1]=O,e[S]=-O;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(C=((P=p-(O=i[h][h]))*(D=m-O)-d)/i[h+1][h]+i[h][h+1],L=i[h+1][h+1]-O-P-D,P=i[h+2][h+1],C/=D=u(C)+u(L)+u(P),L/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(L)+u(P))<T*(u(C)*(u(i[h-1][h-1])+u(O)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(a=h;a<=S-1&&(b=a!==S-1,a!==h&&(C=i[a][a-1],L=i[a+1][a-1],P=b?i[a+2][a-1]:0,0!==(p=u(C)+u(L)+u(P))&&(C/=p,L/=p,P/=p)),0!==p);a++)if(D=R(C*C+L*L+P*P),0>C&&(D=-D),0!==D){for(a===h?l!==h&&(i[a][a-1]=-i[a][a-1]):i[a][a-1]=-D*p,p=(C+=D)/D,m=L/D,O=P/D,L/=C,P/=C,s=a;s<t;s++)C=i[a][s]+L*i[a+1][s],b&&(i[a+2][s]=i[a+2][s]-(C+=P*i[a+2][s])*O),i[a][s]-=C*p,i[a+1][s]=i[a+1][s]-C*m;for(o=0;o<=v(S,a+3);o++)C=p*i[o][a]+m*i[o][a+1],b&&(i[o][a+2]=i[o][a+2]-(C+=O*i[o][a+2])*P),i[o][a]-=C,i[o][a+1]=i[o][a+1]-C*L;for(o=0;o<=E;o++)C=p*n[o][a]+m*n[o][a+1],b&&(n[o][a+2]=n[o][a+2]-(C+=O*n[o][a+2])*P),n[o][a]-=C,n[o][a+1]=n[o][a+1]-C*L}}}if(0!==k){for(S=t-1;0<=S;S--)if(C=r[S],0===(L=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-C,P=0,s=l;s<=S;s++)P+=i[o][s]*i[s][S];if(0>e[o])O=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*k):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-O*P)/(L=(r[o]-C)*(r[o]-C)+e[o]*e[o]),i[o+1][S]=u(p)>u(O)?(-P-d*f)/p:(-D-m*f)/O),1<T*(f=u(i[o][S]))*f)for(s=o;s<=S;s++)i[s][S]/=f}else if(0>L)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=L/i[S][S-1],i[S-1][S]=-(i[S][S]-C)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-C,L),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,s=l;s<=S;s++)g+=i[o][s]*i[s][S-1],y+=i[o][s]*i[s][S];if(d=i[o][o]-C,0>e[o])O=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,L),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(r[o]-C)*L,0==(w=(r[o]-C)*(r[o]-C)+e[o]*e[o]-L*L)&&0===x&&(w=T*k*(u(d)+u(L)+u(p)+u(m)+u(O))),_=c(p*P-O*g+L*y,p*D-O*y-L*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(O)+u(L)?(i[o+1][S-1]=(-g-d*i[o][S-1]+L*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-L*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],O,L),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(s=o;s<=S;s++)i[s][S-1]=i[s][S-1]/f,i[s][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(s=o;s<t;s++)n[o][s]=i[o][s];for(s=t-1;s>=0;s--)for(o=0;o<=E;o++){for(O=0,a=0;a<=v(s,E);a++)O+=n[o][a]*i[a][s];n[o][s]=O}}}function c(t,e,r,n){var i,o;return u(r)>u(n)?[(t+(i=n/r)*e)/(o=r+i*n),(e-i*t)/o]:[((i=r/n)*t+e)/(o=n+i*r),(i*e-t)/o]}var l=r(9).Matrix,h=r(43),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};n.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,r=this.n,n=this.e,i=this.d,o=new l(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)o[t][e]=0;o[t][t]=i[t],0<n[t]?o[t][t+1]=n[t]:0>n[t]&&(o[t][t-1]=n[t])}return o}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,s,a,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(s=0;s<l;s++){var f=0;for(e=s;e<c;e++)f=o(f,u[e][s]);if(0!==f){for(0>u[s][s]&&(f=-f),e=s;e<c;e++)u[e][s]/=f;for(u[s][s]+=1,r=s+1;r<l;r++){for(a=0,e=s;e<c;e++)a+=u[e][s]*u[e][r];for(a=-a/u[s][s],e=s;e<c;e++)u[e][r]+=a*u[e][s]}}h[s]=-f}this.QR=u,this.Rdiag=h}var i=r(9).Matrix,o=r(43).hypotenuse;n.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix row dimensions must agree\");if(!this.isFullRank())throw new Error(\"Matrix is rank deficient\");var n,o,s,a,u=t.columns,c=t.clone(),l=e.columns;for(s=0;s<l;s++)for(o=0;o<u;o++){for(a=0,n=s;n<r;n++)a+=e[n][s]*c[n][o];for(a=-a/e[s][s],n=s;n<r;n++)c[n][o]+=a*e[n][s]}for(s=l-1;0<=s;s--){for(o=0;o<u;o++)c[s][o]/=this.Rdiag[s];for(n=0;n<s;n++)for(o=0;o<u;o++)c[n][o]-=c[s][o]*e[n][s]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,r=this.QR,n=r.columns,o=new i(n,n);for(t=0;t<n;t++)for(e=0;e<n;e++)o[t][e]=t<e?r[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,r,n,o=this.QR,s=o.rows,a=o.columns,u=new i(s,a);for(r=a-1;0<=r;r--){for(t=0;t<s;t++)u[t][r]=0;for(u[r][r]=1,e=r;e<a;e++)if(0!==o[r][r]){for(n=0,t=r;t<s;t++)n+=o[t][r]*u[t][e];for(n=-n/o[r][r],t=r;t<s;t++)u[t][e]+=n*o[t][r]}}return u}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error(\"Matrix is not symmetric\");var e,r,o,s=t,a=s.rows,u=new i(a,a),c=!0;for(r=0;r<a;r++){var l=u[r],h=0;for(o=0;o<r;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(s[r][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=s[r][r]-h),u[r][r]=R(M(h,0)),o=r+1;o<a;o++)u[r][o]=0}if(!c)throw new Error(\"Matrix is not positive definite\");this.L=u}var i=r(9).Matrix;n.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix dimensions do not match\");var n,o,s,a=t.columns,u=t.clone();for(s=0;s<r;s++)for(o=0;o<a;o++){for(n=0;n<s;n++)u[s][o]-=u[n][o]*e[s][n];u[s][o]/=e[s][s]}for(s=r-1;0<=s;s--)for(o=0;o<a;o++){for(n=s+1;n<r;n++)u[s][o]-=u[n][o]*e[n][s];u[s][o]/=e[s][s]}return u}},t.exports=n},function(t,e){\"use strict\";function r(t,e){var r=65535&(t>>>=0);return((t-r)*(e>>>=0)>>>0)+r*e>>>0}function n(t){var e=t.state[0];e^=e<<s,e^=e>>>a,e^=t.state[3]<<u,t.state[0]=t.state[1],t.state[1]=t.state[2],t.state[2]=t.state[3],t.state[3]=e}Object.defineProperty(e,\"__esModule\",{value:!0});var i=function(){function t(t,e){for(var r,n=0;n<e.length;n++)(r=e[n]).enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(){var e=0>=arguments.length||void 0===arguments[0]?Date.now():arguments[0];(function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")})(this,t),this.state=new Uint32Array(4),this.init(e)}return i(t,[{key:\"init\",value:function(t){this.state[0]=t,this.state[1]=0,this.state[2]=0,this.state[3]=0;for(var e=1;e<8;e++)this.state[3&e]^=e+r(1812433253,this.state[3&e-1]^this.state[3&e-1]>>>30>>>0)>>>0;for(function(t){0===t.state[0]&&0===t.state[1]&&0===t.state[2]&&0===t.state[3]&&(t.state[0]=88,t.state[1]=83,t.state[2]=65,t.state[3]=68)}(this),e=0;e<8;e++)n(this)}},{key:\"getUint32\",value:function(){return n(this),this.state[3]+this.state[2]>>>0}},{key:\"getFloat\",value:function(){return(this.getUint32()>>>8)*(1/16777216)}},{key:\"random\",get:function(){return this._random||(this._random=this.getFloat.bind(this)),this._random}}]),t}();e.default=o;var s=15,a=18,u=11;t.exports=e.default},function(t,e,r){\"use strict\";function n(t,e){if(t.length!==e.length)throw new Error(\"features and labels should have the same length\")}function i(t,e){return Array(t).fill(0).map(()=>Array(e).fill(0))}function o(t){for(var e=new Set,r=0;r<t.length;r++)e.add(t[r]);return Array.from(e)}function s(t,e,r,n,i,o,s,a){var u,c=i.map(function(t){return e[t]}),l=o.map(function(t){return e[t]}),h=i.map(function(t){return r[t]}),f=o.map(function(t){return r[t]});t.prototype.train?(u=new t(n)).train(l,f):u=new t(l,f,n);for(var d=u.predict(c),p=0;p<d.length;p++)s[a.indexOf(h[p])][a.indexOf(d[p])]++}var a=r(86),u={},c=r(271);u.leaveOneOut=function(t,e,r,n){return u.leavePOut(t,e,r,n,1)},u.leavePOut=function(t,e,r,u,l){n(e,r);for(var h=o(r),f=i(h.length,h.length),d=e.length,p=c(l,d),m=Array(d),g=0;g<d;g++)m[g]=g;var v,y=!0,w=!1;try{for(var x,b=p[Symbol.iterator]();!(y=(x=b.next()).done);y=!0){for(var _=x.value,M=m.slice(),S=_.length-1;0<=S;S--)M.splice(_[S],1);s(t,e,r,u,_,M,f,h)}}catch(t){w=!0,v=t}finally{try{!y&&b.return&&b.return()}finally{if(w)throw v}}return new a(f,h)},u.kFold=function(t,e,r,u,c){n(e,r);for(var l=o(r),h=i(l.length,l.length),f=e.length,d=Array(f),p=0;p<f;p++)d[p]=p;for(var m=g(f/c),v=[],y=[];d.length;){var w=g(Math.random()*d.length);v.push(d[w]),d.splice(w,1),v.length===m&&(y.push(v),v=[])}for(v.length&&y.push(v),y=y.slice(0,c),p=0;p<y.length;p++){for(var x=y[p],b=[],_=0;_<y.length;_++)_!==p&&(b=b.concat(y[_]));s(t,e,r,u,x,b,h,l)}return new a(h,l)},t.exports=u},function(t){\"use strict\";var e={mode:\"index\"};t.exports=function*(t,r,n){function i(){var t,e,r;for(e=1;0>=h[e];)e++;if(0===h[e-1]){for(t=e-1;1!==t;t--)h[t]=-1;h[e]=0,o=a=0,h[1]=1,s=e-1}else{1<e&&(h[e-1]=0);do{e++}while(0<h[e]);for(r=e-1,t=e;0===h[t];)h[t++]=-1;if(-1===h[t])h[t]=h[r],a=h[r]-1,o=t-1,s=r-1,h[r]=-1;else{if(t===h[0])return 0;h[e]=h[t],a=h[t]-1,h[t]=0,o=e-1,s=t-1}}return 1}n=Object.assign({},e,n);for(var o,s,a,u=Array(r),c=Array(t),l=Array(r),h=Array(r+2),f=0;f<r;f++)u[f]=f,l[f]=f<r-t?0:1;for(f=0;f<t;f++)c[f]=r-t+f;for(f=0;f<h.length;f++)h[f]=0===f?r+1:f<=r-t?0:f<=r?f-r+t:-2;if(\"index\"===n.mode)for(yield c.slice();i();)c[a]=u[o],yield c.slice();else{if(\"mask\"!==n.mode)throw new Error(\"Invalid mode\");for(yield l.slice();i();)l[o]=1,l[s]=0,yield l.slice()}}},function(t,e,r){\"use strict\";function n(t){this.options=Object.assign({},s,t),this.kernel=new i(this.options.kernel,this.options.kernelOptions),this.b=0}var i=r(37),o=r(2).array,s={C:1,tol:1e-4,maxPasses:10,maxIterations:1e4,kernel:\"linear\",alphaTol:1e-6,random:Math.random,whitening:!0};n.prototype.train=function(t,e){if(t.length!==e.length)throw new Error(\"Features and labels should have the same length\");if(2>t.length)throw new Error(\"Cannot train with less than 2 observations\");if(this._trained=!1,this._loaded=!1,this.N=e.length,this.D=t[0].length,this.options.whitening){this.X=Array(this.N);for(var r=0;r<this.N;r++)this.X[r]=Array(this.D);this.minMax=Array(this.D);for(var n,i=0;i<this.D;i++){for(n=Array(this.N),r=0;r<this.N;r++)n[r]=t[r][i];for(this.minMax[i]=o.minMax(n),r=0;r<this.N;r++)this.X[r][i]=(t[r][i]-this.minMax[i].min)/(this.minMax[i].max-this.minMax[i].min)}}else this.X=t;this.Y=e,this.b=0,this.W=void 0;var s=this.kernel.compute(this.X),a=e.length,c=Array(a).fill(0);this.alphas=c;for(var l=0;l<a;l++)c[l]=0;for(var h,f=0,d=0,p=0,m=0,y=0,w=0,x=0,b=0,_=0,S=0,E=0;m<this.options.maxPasses&&p<this.options.maxIterations;){for(h=0,r=0;r<a;r++)if(y=this._marginOnePrecomputed(r,s)-e[r],e[r]*y<-this.options.tol&&c[r]<this.options.C||e[r]*y>this.options.tol&&0<c[r]){for(i=r;i===r;)i=g(this.options.random()*a);if(w=this._marginOnePrecomputed(i,s)-e[i],x=c[r],b=c[i],e[r]===e[i]?(_=M(0,x+b-this.options.C),S=v(this.options.C,x+b)):(_=M(0,b-x),S=v(this.options.C,this.options.C+b+x)),1e-4>u(_-S))continue;if(0<=(E=2*s[r][i]-s[r][r]-s[i][i]))continue;var T=c[i]-e[i]*(y-w)/E;if(T>S?T=S:T<_&&(T=_),.001>u(b-T))continue;c[i]=T,c[r]+=e[r]*e[i]*(b-T),this.b=((f=this.b-y-e[r]*(c[r]-x)*s[r][r]-e[i]*(c[i]-b)*s[r][i])+(d=this.b-w-e[r]*(c[r]-x)*s[r][i]-e[i]*(c[i]-b)*s[i][i]))/2,c[r]<this.options.C&&0<c[r]&&(this.b=f),c[i]<this.options.C&&0<c[i]&&(this.b=d),h+=1}p++,0==h?m+=1:m=0}if(p===this.options.maxIterations)throw new Error(\"max iterations reached\");if(this.iterations=p,\"linear\"===this.options.kernel){this.W=Array(this.D);for(var A=0;A<this.D;A++){this.W[A]=0;for(var R=0;R<a;R++)this.W[A]+=e[R]*c[R]*this.X[R][A]}}var k=[],C=[],L=[];for(this._supportVectorIdx=[],r=0;r<this.N;r++)this.alphas[r]>this.options.alphaTol&&(k.push(this.X[r]),C.push(e[r]),L.push(this.alphas[r]),this._supportVectorIdx.push(r));this.X=k,this.Y=C,this.N=k.length,this.alphas=L,this._trained=!0},n.prototype.predictOne=function(t){return 0<this.marginOne(t)?1:-1},n.prototype.predict=function(t){if(!this._trained&&!this._loaded)throw new Error(\"Cannot predict, you need to train the SVM first\");return Array.isArray(t)&&Array.isArray(t[0])?t.map(this.predictOne.bind(this)):this.predictOne(t)},n.prototype.marginOne=function(t,e){this.options.whitening&&!e&&(t=this._applyWhitening(t));var r,n=this.b;if(\"linear\"===this.options.kernel&&this.W)for(r=0;r<this.W.length;r++)n+=this.W[r]*t[r];else for(r=0;r<this.N;r++)n+=this.alphas[r]*this.Y[r]*this.kernel.compute([t],[this.X[r]])[0][0];return n},n.prototype._marginOnePrecomputed=function(t,e){var r,n=this.b;for(r=0;r<this.N;r++)n+=this.alphas[r]*this.Y[r]*e[t][r];return n},n.prototype.margin=function(t){return Array.isArray(t)?t.map(this.marginOne.bind(this)):this.marginOne(t)},n.prototype.supportVectors=function(){if(!this._trained&&!this._loaded)throw new Error(\"Cannot get support vectors, you need to train the SVM first\");if(this._loaded&&\"linear\"===this.options.kernel)throw new Error(\"Cannot get support vectors from saved linear model, you need to train the SVM to have them\");return this._supportVectorIdx},n.load=function(t){this._loaded=!0,this._trained=!1;var e=new n(t.options);return\"linear\"===t.options.kernel?(e.W=t.W.slice(),e.D=e.W.length):(e.X=t.X.slice(),e.Y=t.Y.slice(),e.alphas=t.alphas.slice(),e.N=e.X.length,e.D=e.X[0].length),e.minMax=t.minMax,e.b=t.b,e._loaded=!0,e._trained=!1,e},n.prototype.toJSON=function(){if(!this._trained&&!this._loaded)throw new Error(\"Cannot export, you need to train the SVM first\");var t={};return t.options=Object.assign({},this.options),t.b=this.b,t.minMax=this.minMax,\"linear\"===t.options.kernel?t.W=this.W.slice():(t.X=this.X.slice(),t.Y=this.Y.slice(),t.alphas=this.alphas.slice()),t},n.prototype._applyWhitening=function(t){if(!this.minMax)throw new Error(\"Could not apply whitening\");for(var e=Array(t.length),r=0;r<t.length;r++)e[r]=(t[r]-this.minMax[r].min)/(this.minMax[r].max-this.minMax[r].min);return e},t.exports=n},function(t,e,r){\"use strict\";function n(t,e){for(var r=t.kdTree.nearest(e,t.k),n=Array(t.classes),i=-1,o=-1,s=r[0][0].length-1,a=0;a<n.length;++a)n[a]=0;for(a=0;a<r.length;++a){var u=r[a][0][s],c=++n[u];c>o&&(i=u,o=c)}return i}Object.defineProperty(e,\"__esModule\",{value:!0});var i=r(274),o=r(0),s=o&&o.__esModule?o:{default:o};class a{constructor(t,e,r={}){if(!0===t){var n=e;return this.kdTree=new i.kdTree(n.kdTree,r),this.k=n.k,this.classes=n.classes,void(this.isEuclidean=n.isEuclidean)}for(var o=r.distance,a=void 0===o?s.default:o,u=r.k,c=void 0===u?t[0].length+1:u,l=new Set(e).size,h=Array(t.length),f=0;f<h.length;++f)h[f]=t[f].slice();for(f=0;f<e.length;++f)h[f].push(e[f]);this.kdTree=new i.kdTree(h,a),this.k=c,this.classes=l,this.isEuclidean=a===s.default}static load(t,e=s.default){if(\"KNN\"!==t.name)throw new Error(\"invalid model: \"+t.name);if(!t.isEuclidean&&e===s.default)throw new Error(\"a custom distance function was used to create the model. Please provide it again\");if(t.isEuclidean&&e!==s.default)throw new Error(\"the model was created with the default distance function. Do not load it with another one\");return new a(!0,t,e)}toJSON(){return{name:\"KNN\",kdTree:this.kdTree.toJSON(),k:this.k,classes:this.classes,isEuclidean:this.isEuclidean}}predict(t){if(Array.isArray(t)){if(\"number\"==typeof t[0])return n(this,t);if(Array.isArray(t[0])&&\"number\"==typeof t[0][0]){for(var e=Array(t.length),r=0;r<t.length;r++)e[r]=n(this,t[r]);return e}}throw new TypeError(\"dataset to predict must be an array or a matrix\")}}e.default=a},function(t,e){\"use strict\";function n(t,e,r){this.obj=t,this.left=null,this.right=null,this.parent=r,this.dimension=e}function i(t){this.content=[],this.scoreFunction=t}Object.defineProperty(e,\"__esModule\",{value:!0}),i.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return 0<this.content.length&&(this.content[0]=e,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var e=this.content.length,r=0;r<e;r++)if(this.content[r]==t){var n=this.content.pop();return void(r!=e-1&&(this.content[r]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.bubbleUp(r):this.sinkDown(r)))}throw new Error(\"Node not found.\")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];0<t;){var r=g((t+1)/2)-1,n=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[r]=e,this.content[t]=n,t=r}},sinkDown:function(t){for(var e=this.content.length,r=this.content[t],n=this.scoreFunction(r);;){var i=2*(t+1),o=i-1,s=null;if(o<e){var a=this.scoreFunction(this.content[o]);a<n&&(s=o)}if(i<e&&this.scoreFunction(this.content[i])<(null==s?n:a)&&(s=i),null==s)break;this.content[t]=this.content[s],this.content[s]=r,t=s}}},e.kdTree=function(t,e){var o,s=this;if(Array.isArray(t)){o=Array(t[0].length);for(var a=0;a<o.length;++a)o[a]=a;this.root=function t(e,r,i){var s,a,u=r%o.length;return 0===e.length?null:1===e.length?new n(e[0],u,i):(e.sort(function(t,e){return t[o[u]]-e[o[u]]}),(a=new n(e[s=g(e.length/2)],u,i)).left=t(e.slice(0,s),r+1,a),a.right=t(e.slice(s+1),r+1,a),a)}(t,0,null)}else o=t.dimensions,function(t){s.root=t,function t(e){e.left&&(e.left.parent=e,t(e.left)),e.right&&(e.right.parent=e,t(e.right))}(s.root)}(t);this.toJSON=function(t,e=!0){t||(t=this.root);var r=new n(t.obj,t.dimension,null);return t.left&&(r.left=s.toJSON(t.left,!1)),t.right&&(r.right=s.toJSON(t.right,!1)),e&&(r.dimensions=o),r},this.insert=function(t){var e,r,i=function e(r,n){if(null===r)return n;var i=o[r.dimension];return e(t[i]<r.obj[i]?r.left:r.right,r)}(this.root,null);return null===i?void(this.root=new n(t,0,null)):(e=new n(t,(i.dimension+1)%o.length,i),void(t[r=o[i.dimension]]<i.obj[r]?i.left=e:i.right=e))},this.remove=function(t){var e=function e(r){if(null===r)return null;if(r.obj===t)return r;var n=o[r.dimension];return e(t[n]<r.obj[n]?r.left:r.right)}(s.root);null===e||function t(e){function r(t,e){var n,i,s,a,u;return null===t?null:(n=o[e],t.dimension===e?null===t.left?t:r(t.left,e):(i=t.obj[n],s=r(t.left,e),a=r(t.right,e),u=t,null!==s&&s.obj[n]<i&&(u=s),null!==a&&a.obj[n]<u.obj[n]&&(u=a),u))}var n,i,a;return null===e.left&&null===e.right?null===e.parent?void(s.root=null):void(e.obj[a=o[e.parent.dimension]]<e.parent.obj[a]?e.parent.left=null:e.parent.right=null):void(null===e.right?(n=r(e.left,e.dimension),i=n.obj,t(n),e.right=e.left,e.left=null,e.obj=i):(n=r(e.right,e.dimension),i=n.obj,t(n),e.obj=i))}(e)},this.nearest=function(t,r,n){var a,c,l;if(l=new i(function(t){return-t[1]}),n)for(a=0;a<r;a+=1)l.push([null,n]);for(s.root&&function n(i){function s(t,e){l.push([t,e]),l.size()>r&&l.pop()}var a,c,h,f,d=o[i.dimension],p=e(t,i.obj),m={};for(f=0;f<o.length;f+=1)m[o[f]]=f===i.dimension?t[o[f]]:i.obj[o[f]];return c=e(m,i.obj),null===i.right&&null===i.left?void((l.size()<r||p<l.peek()[1])&&s(i,p)):(n(a=null===i.right?i.left:null===i.left?i.right:t[d]<i.obj[d]?i.left:i.right),(l.size()<r||p<l.peek()[1])&&s(i,p),void((l.size()<r||u(c)<l.peek()[1])&&(h=a===i.left?i.right:i.left,null!==h&&n(h))))}(s.root),c=[],a=0;a<v(r,l.content.length);a+=1)l.content[a][0]&&c.push([l.content[a][0].obj,l.content[a][1]]);return c},this.balanceFactor=function(){return function t(e){return null===e?0:M(t(e.left),t(e.right))+1}(s.root)/(r(function t(e){return null===e?0:t(e.left)+t(e.right)+1}(s.root))/.6931471805599453)}},e.BinaryHeap=i},function(t,e,r){\"use strict\";t.exports=e=r(87).NaiveBayes,e.separateClasses=r(87).separateClasses},function(t,e,r){\"use strict\";t.exports=r(10).Matrix,t.exports.Decompositions=t.exports.DC=r(285)},function(){\"use strict\";Symbol.species||(Symbol.species=Symbol.for(\"@@species\"))},function(t,e,r){\"use strict\";var n=r(20);t.exports=class extends n{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,r){\"use strict\";var n=r(20);t.exports=class extends n{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,r){\"use strict\";var n=r(20),i=r(29);t.exports=class extends n{constructor(t,e,r,n,o){i.checkRange(t,e,r,n,o),super(t,r-e+1,o-n+1),this.startRow=e,this.startColumn=n}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,r){\"use strict\";var n=r(20),i=r(29);t.exports=class extends n{constructor(t,e,r){var n=i.checkIndices(t,e,r);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,r){\"use strict\";var n=r(20);t.exports=class extends n{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,r){\"use strict\";var n=r(20);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,r){\"use strict\";var n=r(20);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,r){\"use strict\";function n(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=r(10).Matrix,s=r(90),a=r(286),u=r(89),c=r(287),l=r(288);o.inverse=o.inv=n,o.prototype.inverse=o.prototype.inv=function(){return n(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:s,SVD:s,EigenvalueDecomposition:a,EVD:a,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:n,solve:i}},function(t,e,r){\"use strict\";function n(t,e){if(e=Object.assign({},p,e),!(this instanceof n))return new n(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error(\"Matrix is not a square matrix\");var r,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(r=0;r<c;r++)for(u=0;u<c;u++)h[r][u]=g.get(r,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(r=0;r<c;r++)v[r][u]=g.get(r,u);s(c,v,y,h),a(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,r,n){var i,o,s,a,c,l,h,f;for(c=0;c<t;c++)r[c]=n[t-1][c];for(a=t-1;0<a;a--){for(f=0,s=0,l=0;l<a;l++)f+=u(r[l]);if(0===f)for(e[a]=r[a-1],c=0;c<a;c++)r[c]=n[a-1][c],n[a][c]=0,n[c][a]=0;else{for(l=0;l<a;l++)r[l]/=f,s+=r[l]*r[l];for(i=r[a-1],o=R(s),0<i&&(o=-o),e[a]=f*o,s-=i*o,r[a-1]=i-o,c=0;c<a;c++)e[c]=0;for(c=0;c<a;c++){for(n[c][a]=i=r[c],o=e[c]+n[c][c]*i,l=c+1;l<=a-1;l++)o+=n[l][c]*r[l],e[l]+=n[l][c]*i;e[c]=o}for(i=0,c=0;c<a;c++)e[c]/=s,i+=e[c]*r[c];for(h=i/(s+s),c=0;c<a;c++)e[c]-=h*r[c];for(c=0;c<a;c++){for(i=r[c],o=e[c],l=c;l<=a-1;l++)n[l][c]-=i*e[l]+o*r[l];r[c]=n[a-1][c],n[a][c]=0}}r[a]=s}for(a=0;a<t-1;a++){if(n[t-1][a]=n[a][a],n[a][a]=1,0!==(s=r[a+1])){for(l=0;l<=a;l++)r[l]=n[l][a+1]/s;for(c=0;c<=a;c++){for(o=0,l=0;l<=a;l++)o+=n[l][a+1]*n[l][c];for(l=0;l<=a;l++)n[l][c]-=o*r[l]}}for(l=0;l<=a;l++)n[l][a+1]=0}for(c=0;c<t;c++)r[c]=n[t-1][c],n[t-1][c]=0;n[t-1][t-1]=1,e[0]=0}function o(t,e,r,n){var i,o,s,a,c,l,h,d,p,m,g,v,y,w,x,b;for(s=1;s<t;s++)e[s-1]=e[s];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(r[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(r[l+1]-(i=r[l]))/(2*e[l]),1),0>d&&(p=-p),r[l]=e[l]/(d+p),r[l+1]=e[l]*(d+p),m=r[l+1],o=i-r[l],s=l+2;s<t;s++)r[s]-=o;for(_+=o,d=r[h],v=g=1,y=g,w=e[l+1],x=0,b=0,s=h-1;s>=l;s--)for(y=v,v=g,b=x,i=g*e[s],o=g*d,p=f(d,e[s]),e[s+1]=x*p,d=(g=d/p)*r[s]-(x=e[s]/p)*i,r[s+1]=o+x*(g*i+x*r[s]),c=0;c<t;c++)n[c][s+1]=x*n[c][s]+g*(o=n[c][s+1]),n[c][s]=g*n[c][s]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),r[l]=g*d}while(u(e[l])>E*S);r[l]+=_,e[l]=0}for(s=0;s<t-1;s++){for(c=s,d=r[s],a=s+1;a<t;a++)r[a]<d&&(c=a,d=r[a]);if(c!==s)for(r[c]=r[s],r[s]=d,a=0;a<t;a++)d=n[a][s],n[a][s]=n[a][c],n[a][c]=d}}function s(t,e,r,n){var i,o,s,a,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,a=l;a<=f;a++)h+=u(e[a][l-1]);if(0!==h){for(s=0,a=f;a>=l;a--)r[a]=e[a][l-1]/h,s+=r[a]*r[a];for(o=R(s),0<r[l]&&(o=-o),s-=r[l]*o,r[l]-=o,c=l;c<t;c++){for(i=0,a=f;a>=l;a--)i+=r[a]*e[a][c];for(i/=s,a=l;a<=f;a++)e[a][c]-=i*r[a]}for(a=0;a<=f;a++){for(i=0,c=f;c>=l;c--)i+=r[c]*e[a][c];for(i/=s,c=l;c<=f;c++)e[a][c]-=i*r[c]}r[l]=h*r[l],e[l][l-1]=h*o}}for(a=0;a<t;a++)for(c=0;c<t;c++)n[a][c]=a===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(a=l+1;a<=f;a++)r[a]=e[a][l-1];for(c=l;c<=f;c++){for(o=0,a=l;a<=f;a++)o+=r[a]*n[a][c];for(o=o/r[l]/e[l][l-1],a=l;a<=f;a++)n[a][c]+=o*r[a]}}}function a(t,e,r,n,i){var o,s,a,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,k=0,C=0,L=0,P=0,D=0,O=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(r[o]=i[o][o],e[o]=0),s=M(o-1,0);s<t;s++)k+=u(i[o][s]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=k),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,r[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(O=R(u(L=(C=(i[S-1][S-1]-i[S][S])/2)*C+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=L){for(r[S-1]=p+(O=0<=C?C+O:C-O),r[S]=r[S-1],0!==O&&(r[S]=p-d/O),e[S-1]=0,e[S]=0,C=(p=i[S][S-1])/(D=u(p)+u(O)),C/=P=R(C*C+(L=O/D)*L),L/=P,s=S-1;s<t;s++)i[S-1][s]=L*(O=i[S-1][s])+C*i[S][s],i[S][s]=L*i[S][s]-C*O;for(o=0;o<=S;o++)i[o][S-1]=L*(O=i[o][S-1])+C*i[o][S],i[o][S]=L*i[o][S]-C*O;for(o=0;o<=E;o++)n[o][S-1]=L*(O=n[o][S-1])+C*n[o][S],n[o][S]=L*n[o][S]-C*O}else r[S-1]=p+C,r[S]=p+C,e[S-1]=O,e[S]=-O;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(C=((P=p-(O=i[h][h]))*(D=m-O)-d)/i[h+1][h]+i[h][h+1],L=i[h+1][h+1]-O-P-D,P=i[h+2][h+1],C/=D=u(C)+u(L)+u(P),L/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(L)+u(P))<T*(u(C)*(u(i[h-1][h-1])+u(O)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(a=h;a<=S-1&&(b=a!==S-1,a!==h&&(C=i[a][a-1],L=i[a+1][a-1],P=b?i[a+2][a-1]:0,0!==(p=u(C)+u(L)+u(P))&&(C/=p,L/=p,P/=p)),0!==p);a++)if(D=R(C*C+L*L+P*P),0>C&&(D=-D),0!==D){for(a===h?l!==h&&(i[a][a-1]=-i[a][a-1]):i[a][a-1]=-D*p,p=(C+=D)/D,m=L/D,O=P/D,L/=C,P/=C,s=a;s<t;s++)C=i[a][s]+L*i[a+1][s],b&&(i[a+2][s]=i[a+2][s]-(C+=P*i[a+2][s])*O),i[a][s]-=C*p,i[a+1][s]=i[a+1][s]-C*m;for(o=0;o<=v(S,a+3);o++)C=p*i[o][a]+m*i[o][a+1],b&&(i[o][a+2]=i[o][a+2]-(C+=O*i[o][a+2])*P),i[o][a]-=C,i[o][a+1]=i[o][a+1]-C*L;for(o=0;o<=E;o++)C=p*n[o][a]+m*n[o][a+1],b&&(n[o][a+2]=n[o][a+2]-(C+=O*n[o][a+2])*P),n[o][a]-=C,n[o][a+1]=n[o][a+1]-C*L}}}if(0!==k){for(S=t-1;0<=S;S--)if(C=r[S],0===(L=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-C,P=0,s=l;s<=S;s++)P+=i[o][s]*i[s][S];if(0>e[o])O=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*k):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-O*P)/(L=(r[o]-C)*(r[o]-C)+e[o]*e[o]),i[o+1][S]=u(p)>u(O)?(-P-d*f)/p:(-D-m*f)/O),1<T*(f=u(i[o][S]))*f)for(s=o;s<=S;s++)i[s][S]/=f}else if(0>L)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=L/i[S][S-1],i[S-1][S]=-(i[S][S]-C)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-C,L),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,s=l;s<=S;s++)g+=i[o][s]*i[s][S-1],y+=i[o][s]*i[s][S];if(d=i[o][o]-C,0>e[o])O=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,L),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(r[o]-C)*L,0==(w=(r[o]-C)*(r[o]-C)+e[o]*e[o]-L*L)&&0===x&&(w=T*k*(u(d)+u(L)+u(p)+u(m)+u(O))),_=c(p*P-O*g+L*y,p*D-O*y-L*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(O)+u(L)?(i[o+1][S-1]=(-g-d*i[o][S-1]+L*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-L*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],O,L),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(s=o;s<=S;s++)i[s][S-1]=i[s][S-1]/f,i[s][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(s=o;s<t;s++)n[o][s]=i[o][s];for(s=t-1;s>=0;s--)for(o=0;o<=E;o++){for(O=0,a=0;a<=v(s,E);a++)O+=n[o][a]*i[a][s];n[o][s]=O}}}function c(t,e,r,n){var i,o;return u(r)>u(n)?[(t+(i=n/r)*e)/(o=r+i*n),(e-i*t)/o]:[((i=r/n)*t+e)/(o=n+i*r),(i*e-t)/o]}var l=r(10).Matrix,h=r(44),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};n.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,r=this.n,n=this.e,i=this.d,o=new l(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)o[t][e]=0;o[t][t]=i[t],0<n[t]?o[t][t+1]=n[t]:0>n[t]&&(o[t][t-1]=n[t])}return o}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,s,a,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(s=0;s<l;s++){var f=0;for(e=s;e<c;e++)f=o(f,u[e][s]);if(0!==f){for(0>u[s][s]&&(f=-f),e=s;e<c;e++)u[e][s]/=f;for(u[s][s]+=1,r=s+1;r<l;r++){for(a=0,e=s;e<c;e++)a+=u[e][s]*u[e][r];for(a=-a/u[s][s],e=s;e<c;e++)u[e][r]+=a*u[e][s]}}h[s]=-f}this.QR=u,this.Rdiag=h}var i=r(10).Matrix,o=r(44).hypotenuse;n.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix row dimensions must agree\");if(!this.isFullRank())throw new Error(\"Matrix is rank deficient\");var n,o,s,a,u=t.columns,c=t.clone(),l=e.columns;for(s=0;s<l;s++)for(o=0;o<u;o++){for(a=0,n=s;n<r;n++)a+=e[n][s]*c[n][o];for(a=-a/e[s][s],n=s;n<r;n++)c[n][o]+=a*e[n][s]}for(s=l-1;0<=s;s--){for(o=0;o<u;o++)c[s][o]/=this.Rdiag[s];for(n=0;n<s;n++)for(o=0;o<u;o++)c[n][o]-=c[s][o]*e[n][s]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,r=this.QR,n=r.columns,o=new i(n,n);for(t=0;t<n;t++)for(e=0;e<n;e++)o[t][e]=t<e?r[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,r,n,o=this.QR,s=o.rows,a=o.columns,u=new i(s,a);for(r=a-1;0<=r;r--){for(t=0;t<s;t++)u[t][r]=0;for(u[r][r]=1,e=r;e<a;e++)if(0!==o[r][r]){for(n=0,t=r;t<s;t++)n+=o[t][r]*u[t][e];for(n=-n/o[r][r],t=r;t<s;t++)u[t][e]+=n*o[t][r]}}return u}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error(\"Matrix is not symmetric\");var e,r,o,s=t,a=s.rows,u=new i(a,a),c=!0;for(r=0;r<a;r++){var l=u[r],h=0;for(o=0;o<r;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(s[r][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=s[r][r]-h),u[r][r]=R(M(h,0)),o=r+1;o<a;o++)u[r][o]=0}if(!c)throw new Error(\"Matrix is not positive definite\");this.L=u}var i=r(10).Matrix;n.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix dimensions do not match\");var n,o,s,a=t.columns,u=t.clone();for(s=0;s<r;s++)for(o=0;o<a;o++){for(n=0;n<s;n++)u[s][o]-=u[n][o]*e[s][n];u[s][o]/=e[s][s]}for(s=r-1;0<=s;s--)for(o=0;o<a;o++){for(n=s+1;n<r;n++)u[s][o]-=u[n][o]*e[n][s];u[s][o]/=e[s][s]}return u}},t.exports=n},function(t,e,r){\"use strict\";t.exports=e=r(290),e.Utils=r(47),e.OPLS=r(303)},function(t,e,r){\"use strict\";function n(t,e){for(var r=0,n=0;n<t.rows;n++)r+=t[n][e];return r}function i(t){for(var e,r=0,i=-1/0,o=0;o<t.columns;++o)(e=n(t,o))>i&&(i=e,r=o);return r}var o=r(45),s=r(47);class a{constructor(t,e){if(!0===t){var r=e;this.meanX=r.meanX,this.stdDevX=r.stdDevX,this.meanY=r.meanY,this.stdDevY=r.stdDevY,this.PBQ=o.checkMatrix(r.PBQ),this.R2X=r.R2X}else{if(t.length!==e.length)throw new RangeError(\"The number of X rows must be equal to the number of Y rows\");var n=s.featureNormalize(t);this.X=n.result,this.meanX=n.means,this.stdDevX=n.std;var i=s.featureNormalize(e);this.Y=i.result,this.meanY=i.means,this.stdDevY=i.std}}train(t){void 0===t&&(t={});var e=t.latentVectors;void 0===e&&(e=v(this.X.length-1,this.X[0].length));var r=t.tolerance;void 0===r&&(r=1e-5);for(var n=this.X,a=this.Y,u=n.rows,c=n.columns,l=a.rows,h=a.columns,f=n.clone().mul(n).sum(),d=a.clone().mul(a).sum(),p=e,m=o.zeros(u,p),g=o.zeros(c,p),y=o.zeros(l,p),w=o.zeros(h,p),x=o.zeros(p,p),b=g.clone(),_=0;s.norm(a)>r&&_<p;){for(var M=n.transpose(),S=a.transpose(),E=i(n.clone().mulM(n)),T=i(a.clone().mulM(a)),A=n.getColumnVector(E),R=a.getColumnVector(T),k=o.zeros(u,1);s.norm(A.clone().sub(k))>r;){var C=M.mmul(R);C.div(s.norm(C)),k=A,A=n.mmul(C);var L=S.mmul(A);L.div(s.norm(L)),R=a.mmul(L)}var P=M.mmul(k=A),D=k.transpose().mmul(k)[0][0],O=P.div(D),N=s.norm(O);O.div(N),k.mul(N),C.mul(N),P=R.transpose().mmul(k),D=k.transpose().mmul(k)[0][0];var I=P.div(D)[0][0];n.sub(k.mmul(O.transpose())),a.sub(k.clone().mul(I).mmul(L.transpose())),m.setColumn(_,k),g.setColumn(_,O),y.setColumn(_,R),w.setColumn(_,L),b.setColumn(_,C),x[_][_]=I,_++}m=m.subMatrix(0,m.rows-1,0,--_),g=g.subMatrix(0,g.rows-1,0,_),y=y.subMatrix(0,y.rows-1,0,_),w=w.subMatrix(0,w.rows-1,0,_),b=b.subMatrix(0,b.rows-1,0,_),x=x.subMatrix(0,_,0,_),this.ssqYcal=d,this.E=n,this.F=a,this.T=m,this.P=g,this.U=y,this.Q=w,this.W=b,this.B=x,this.PBQ=g.mmul(x).mmul(w.transpose()),this.R2X=k.transpose().mmul(k).mmul(O.transpose().mmul(O)).div(f)[0][0]}predict(t){var e=o.checkMatrix(t);return(e=e.subRowVector(this.meanX).divRowVector(this.stdDevX)).mmul(this.PBQ).mulRowVector(this.stdDevY).addRowVector(this.meanY)}getExplainedVariance(){return this.R2X}toJSON(){return{name:\"PLS\",R2X:this.R2X,meanX:this.meanX,stdDevX:this.stdDevX,meanY:this.meanY,stdDevY:this.stdDevY,PBQ:this.PBQ}}static load(t){if(\"PLS\"!==t.name)throw new RangeError(\"Invalid model: \"+t.name);return new a(!0,t)}}t.exports=a},function(){\"use strict\";Symbol.species||(Symbol.species=Symbol.for(\"@@species\"))},function(t,e,r){\"use strict\";var n=r(21);t.exports=class extends n{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,r){\"use strict\";var n=r(21);t.exports=class extends n{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,r){\"use strict\";var n=r(21),i=r(30);t.exports=class extends n{constructor(t,e,r,n,o){i.checkRange(t,e,r,n,o),super(t,r-e+1,o-n+1),this.startRow=e,this.startColumn=n}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,r){\"use strict\";var n=r(21),i=r(30);t.exports=class extends n{constructor(t,e,r){var n=i.checkIndices(t,e,r);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,r){\"use strict\";var n=r(21);t.exports=class extends n{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,r){\"use strict\";var n=r(21);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,r){\"use strict\";var n=r(21);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,r){\"use strict\";function n(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=r(11).Matrix,s=r(93),a=r(300),u=r(92),c=r(301),l=r(302);o.inverse=o.inv=n,o.prototype.inverse=o.prototype.inv=function(){return n(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:s,SVD:s,EigenvalueDecomposition:a,EVD:a,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:n,solve:i}},function(t,e,r){\"use strict\";function n(t,e){if(e=Object.assign({},p,e),!(this instanceof n))return new n(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error(\"Matrix is not a square matrix\");var r,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(r=0;r<c;r++)for(u=0;u<c;u++)h[r][u]=g.get(r,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(r=0;r<c;r++)v[r][u]=g.get(r,u);s(c,v,y,h),a(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,r,n){var i,o,s,a,c,l,h,f;for(c=0;c<t;c++)r[c]=n[t-1][c];for(a=t-1;0<a;a--){for(f=0,s=0,l=0;l<a;l++)f+=u(r[l]);if(0===f)for(e[a]=r[a-1],c=0;c<a;c++)r[c]=n[a-1][c],n[a][c]=0,n[c][a]=0;else{for(l=0;l<a;l++)r[l]/=f,s+=r[l]*r[l];for(i=r[a-1],o=R(s),0<i&&(o=-o),e[a]=f*o,s-=i*o,r[a-1]=i-o,c=0;c<a;c++)e[c]=0;for(c=0;c<a;c++){for(n[c][a]=i=r[c],o=e[c]+n[c][c]*i,l=c+1;l<=a-1;l++)o+=n[l][c]*r[l],e[l]+=n[l][c]*i;e[c]=o}for(i=0,c=0;c<a;c++)e[c]/=s,i+=e[c]*r[c];for(h=i/(s+s),c=0;c<a;c++)e[c]-=h*r[c];for(c=0;c<a;c++){for(i=r[c],o=e[c],l=c;l<=a-1;l++)n[l][c]-=i*e[l]+o*r[l];r[c]=n[a-1][c],n[a][c]=0}}r[a]=s}for(a=0;a<t-1;a++){if(n[t-1][a]=n[a][a],n[a][a]=1,0!==(s=r[a+1])){for(l=0;l<=a;l++)r[l]=n[l][a+1]/s;for(c=0;c<=a;c++){for(o=0,l=0;l<=a;l++)o+=n[l][a+1]*n[l][c];for(l=0;l<=a;l++)n[l][c]-=o*r[l]}}for(l=0;l<=a;l++)n[l][a+1]=0}for(c=0;c<t;c++)r[c]=n[t-1][c],n[t-1][c]=0;n[t-1][t-1]=1,e[0]=0}function o(t,e,r,n){var i,o,s,a,c,l,h,d,p,m,g,v,y,w,x,b;for(s=1;s<t;s++)e[s-1]=e[s];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(r[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(r[l+1]-(i=r[l]))/(2*e[l]),1),0>d&&(p=-p),r[l]=e[l]/(d+p),r[l+1]=e[l]*(d+p),m=r[l+1],o=i-r[l],s=l+2;s<t;s++)r[s]-=o;for(_+=o,d=r[h],v=g=1,y=g,w=e[l+1],x=0,b=0,s=h-1;s>=l;s--)for(y=v,v=g,b=x,i=g*e[s],o=g*d,p=f(d,e[s]),e[s+1]=x*p,d=(g=d/p)*r[s]-(x=e[s]/p)*i,r[s+1]=o+x*(g*i+x*r[s]),c=0;c<t;c++)n[c][s+1]=x*n[c][s]+g*(o=n[c][s+1]),n[c][s]=g*n[c][s]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),r[l]=g*d}while(u(e[l])>E*S);r[l]+=_,e[l]=0}for(s=0;s<t-1;s++){for(c=s,d=r[s],a=s+1;a<t;a++)r[a]<d&&(c=a,d=r[a]);if(c!==s)for(r[c]=r[s],r[s]=d,a=0;a<t;a++)d=n[a][s],n[a][s]=n[a][c],n[a][c]=d}}function s(t,e,r,n){var i,o,s,a,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,a=l;a<=f;a++)h+=u(e[a][l-1]);if(0!==h){for(s=0,a=f;a>=l;a--)r[a]=e[a][l-1]/h,s+=r[a]*r[a];for(o=R(s),0<r[l]&&(o=-o),s-=r[l]*o,r[l]-=o,c=l;c<t;c++){for(i=0,a=f;a>=l;a--)i+=r[a]*e[a][c];for(i/=s,a=l;a<=f;a++)e[a][c]-=i*r[a]}for(a=0;a<=f;a++){for(i=0,c=f;c>=l;c--)i+=r[c]*e[a][c];for(i/=s,c=l;c<=f;c++)e[a][c]-=i*r[c]}r[l]=h*r[l],e[l][l-1]=h*o}}for(a=0;a<t;a++)for(c=0;c<t;c++)n[a][c]=a===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(a=l+1;a<=f;a++)r[a]=e[a][l-1];for(c=l;c<=f;c++){for(o=0,a=l;a<=f;a++)o+=r[a]*n[a][c];for(o=o/r[l]/e[l][l-1],a=l;a<=f;a++)n[a][c]+=o*r[a]}}}function a(t,e,r,n,i){var o,s,a,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,k=0,C=0,L=0,P=0,D=0,O=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(r[o]=i[o][o],e[o]=0),s=M(o-1,0);s<t;s++)k+=u(i[o][s]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=k),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,r[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(O=R(u(L=(C=(i[S-1][S-1]-i[S][S])/2)*C+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=L){for(r[S-1]=p+(O=0<=C?C+O:C-O),r[S]=r[S-1],0!==O&&(r[S]=p-d/O),e[S-1]=0,e[S]=0,C=(p=i[S][S-1])/(D=u(p)+u(O)),C/=P=R(C*C+(L=O/D)*L),L/=P,s=S-1;s<t;s++)i[S-1][s]=L*(O=i[S-1][s])+C*i[S][s],i[S][s]=L*i[S][s]-C*O;for(o=0;o<=S;o++)i[o][S-1]=L*(O=i[o][S-1])+C*i[o][S],i[o][S]=L*i[o][S]-C*O;for(o=0;o<=E;o++)n[o][S-1]=L*(O=n[o][S-1])+C*n[o][S],n[o][S]=L*n[o][S]-C*O}else r[S-1]=p+C,r[S]=p+C,e[S-1]=O,e[S]=-O;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(C=((P=p-(O=i[h][h]))*(D=m-O)-d)/i[h+1][h]+i[h][h+1],L=i[h+1][h+1]-O-P-D,P=i[h+2][h+1],C/=D=u(C)+u(L)+u(P),L/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(L)+u(P))<T*(u(C)*(u(i[h-1][h-1])+u(O)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(a=h;a<=S-1&&(b=a!==S-1,a!==h&&(C=i[a][a-1],L=i[a+1][a-1],P=b?i[a+2][a-1]:0,0!==(p=u(C)+u(L)+u(P))&&(C/=p,L/=p,P/=p)),0!==p);a++)if(D=R(C*C+L*L+P*P),0>C&&(D=-D),0!==D){for(a===h?l!==h&&(i[a][a-1]=-i[a][a-1]):i[a][a-1]=-D*p,p=(C+=D)/D,m=L/D,O=P/D,L/=C,P/=C,s=a;s<t;s++)C=i[a][s]+L*i[a+1][s],b&&(i[a+2][s]=i[a+2][s]-(C+=P*i[a+2][s])*O),i[a][s]-=C*p,i[a+1][s]=i[a+1][s]-C*m;for(o=0;o<=v(S,a+3);o++)C=p*i[o][a]+m*i[o][a+1],b&&(i[o][a+2]=i[o][a+2]-(C+=O*i[o][a+2])*P),i[o][a]-=C,i[o][a+1]=i[o][a+1]-C*L;for(o=0;o<=E;o++)C=p*n[o][a]+m*n[o][a+1],b&&(n[o][a+2]=n[o][a+2]-(C+=O*n[o][a+2])*P),n[o][a]-=C,n[o][a+1]=n[o][a+1]-C*L}}}if(0!==k){for(S=t-1;0<=S;S--)if(C=r[S],0===(L=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-C,P=0,s=l;s<=S;s++)P+=i[o][s]*i[s][S];if(0>e[o])O=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*k):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-O*P)/(L=(r[o]-C)*(r[o]-C)+e[o]*e[o]),i[o+1][S]=u(p)>u(O)?(-P-d*f)/p:(-D-m*f)/O),1<T*(f=u(i[o][S]))*f)for(s=o;s<=S;s++)i[s][S]/=f}else if(0>L)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=L/i[S][S-1],i[S-1][S]=-(i[S][S]-C)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-C,L),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,s=l;s<=S;s++)g+=i[o][s]*i[s][S-1],y+=i[o][s]*i[s][S];if(d=i[o][o]-C,0>e[o])O=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,L),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(r[o]-C)*L,0==(w=(r[o]-C)*(r[o]-C)+e[o]*e[o]-L*L)&&0===x&&(w=T*k*(u(d)+u(L)+u(p)+u(m)+u(O))),_=c(p*P-O*g+L*y,p*D-O*y-L*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(O)+u(L)?(i[o+1][S-1]=(-g-d*i[o][S-1]+L*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-L*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],O,L),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(s=o;s<=S;s++)i[s][S-1]=i[s][S-1]/f,i[s][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(s=o;s<t;s++)n[o][s]=i[o][s];for(s=t-1;s>=0;s--)for(o=0;o<=E;o++){for(O=0,a=0;a<=v(s,E);a++)O+=n[o][a]*i[a][s];n[o][s]=O}}}function c(t,e,r,n){var i,o;return u(r)>u(n)?[(t+(i=n/r)*e)/(o=r+i*n),(e-i*t)/o]:[((i=r/n)*t+e)/(o=n+i*r),(i*e-t)/o]}var l=r(11).Matrix,h=r(46),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};n.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,r=this.n,n=this.e,i=this.d,o=new l(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)o[t][e]=0;o[t][t]=i[t],0<n[t]?o[t][t+1]=n[t]:0>n[t]&&(o[t][t-1]=n[t])}return o}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,s,a,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(s=0;s<l;s++){var f=0;for(e=s;e<c;e++)f=o(f,u[e][s]);if(0!==f){for(0>u[s][s]&&(f=-f),e=s;e<c;e++)u[e][s]/=f;for(u[s][s]+=1,r=s+1;r<l;r++){for(a=0,e=s;e<c;e++)a+=u[e][s]*u[e][r];for(a=-a/u[s][s],e=s;e<c;e++)u[e][r]+=a*u[e][s]}}h[s]=-f}this.QR=u,this.Rdiag=h}var i=r(11).Matrix,o=r(46).hypotenuse;n.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix row dimensions must agree\");if(!this.isFullRank())throw new Error(\"Matrix is rank deficient\");var n,o,s,a,u=t.columns,c=t.clone(),l=e.columns;for(s=0;s<l;s++)for(o=0;o<u;o++){for(a=0,n=s;n<r;n++)a+=e[n][s]*c[n][o];for(a=-a/e[s][s],n=s;n<r;n++)c[n][o]+=a*e[n][s]}for(s=l-1;0<=s;s--){for(o=0;o<u;o++)c[s][o]/=this.Rdiag[s];for(n=0;n<s;n++)for(o=0;o<u;o++)c[n][o]-=c[s][o]*e[n][s]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,r=this.QR,n=r.columns,o=new i(n,n);for(t=0;t<n;t++)for(e=0;e<n;e++)o[t][e]=t<e?r[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,r,n,o=this.QR,s=o.rows,a=o.columns,u=new i(s,a);for(r=a-1;0<=r;r--){for(t=0;t<s;t++)u[t][r]=0;for(u[r][r]=1,e=r;e<a;e++)if(0!==o[r][r]){for(n=0,t=r;t<s;t++)n+=o[t][r]*u[t][e];for(n=-n/o[r][r],t=r;t<s;t++)u[t][e]+=n*o[t][r]}}return u}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error(\"Matrix is not symmetric\");var e,r,o,s=t,a=s.rows,u=new i(a,a),c=!0;for(r=0;r<a;r++){var l=u[r],h=0;for(o=0;o<r;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(s[r][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=s[r][r]-h),u[r][r]=R(M(h,0)),o=r+1;o<a;o++)u[r][o]=0}if(!c)throw new Error(\"Matrix is not positive definite\");this.L=u}var i=r(11).Matrix;n.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix dimensions do not match\");var n,o,s,a=t.columns,u=t.clone();for(s=0;s<r;s++)for(o=0;o<a;o++){for(n=0;n<s;n++)u[s][o]-=u[n][o]*e[s][n];u[s][o]/=e[s][s]}for(s=r-1;0<=s;s--)for(o=0;o<a;o++){for(n=s+1;n<r;n++)u[s][o]-=u[n][o]*e[n][s];u[s][o]/=e[s][s]}return u}},t.exports=n},function(t,e,r){\"use strict\";function n(t,e,r){var n=new i(t),s=new i(e);n=o.featureNormalize(n).result,s=o.featureNormalize(s).result;var a=n.clone().mul(n).sum(),u=n.transpose().mmul(s);u.div(o.norm(u));for(var c=Array(r),l=Array(r),h=Array(r),f=0;f<r;f++){var d=n.mmul(u),p=n.transpose().mmul(d),m=d.transpose().mmul(d)[0][0],g=p.div(m);p=u.transpose().mmul(g)[0][0],m=u.transpose().mmul(u)[0][0];var v=g.sub(u.clone().mul(p/m));v.div(o.norm(v));var y=n.mmul(v);p=n.transpose().mmul(y),m=y.transpose().mmul(y)[0][0];var w=p.div(m);n.sub(y.mmul(w.transpose())),c[f]=v.getColumn(0),l[f]=y.getColumn(0),h[f]=w.getColumn(0)}this.Xosc=n;var x=this.Xosc.clone().mul(this.Xosc).sum();this.R2X=1-x/a,this.W=c,this.T=l,this.P=h,this.numberOSC=r}var i=r(45),o=r(47);t.exports=n,n.prototype.correctDataset=function(t){for(var e=new i(t),r=e.clone().mul(e).sum(),n=0;n<this.numberOSC;n++){var o=this.W.getColumnVector(n),s=this.P.getColumnVector(n),a=e.mmul(o);e.sub(a.mmul(s))}return{datasetOsc:e,R2Dataset:1-e.clone().mul(e).sum()/r}}},function(t,r,n){\"use strict\";function i(t,e,r,n,i,s){r=o.updateClusterID(e,t,r,i.distanceFunction);var u=o.updateCenters(e,r,n),c=o.converged(u,t,i.distanceFunction,i.tolerance);return new a(r,u,c,s,i.distanceFunction)}var o=n(94),s=n(306),a=n(308),u={maxIterations:100,tolerance:1e-6,withIterations:!1,initialization:\"mostDistant\",distanceFunction:n(0).squared};t.exports=function(t,r,n){if(n=Object.assign({},u,n),0>=r||r>t.length||!m(r))throw new Error(\"K should be a positive integer bigger than the number of points\");var a;if(Array.isArray(n.initialization)){if(n.initialization.length!==r)throw new Error(\"The initial centers should have the same length as K\");a=n.initialization}else switch(n.initialization){case\"random\":a=s.random(t,r);break;case\"mostDistant\":a=s.mostDistant(t,r,o.calculateDistanceMatrix(t,n.distanceFunction));break;default:throw new Error('Unknown initialization method: \"'+n.initialization+'\"')}0===n.maxIterations&&(n.maxIterations=e);var c=Array(t.length);if(n.withIterations)return function*(t,e,r,n,o){for(var s,a=!1,u=0;!a&&u<o.maxIterations;)yield(s=i(t,e,r,n,o,++u)).computeInformation(e),a=s.converged,t=s.centroids}(a,t,c,r,n);for(var l,h=!1,f=0;!h&&f<n.maxIterations;)h=(l=i(a,t,c,r,n,++f)).converged,a=l.centroids;return l.computeInformation(t)}},function(r,n,i){\"use strict\";var o={distanceFunction:i(0).squared,similarityFunction:!1,returnVector:!1};r.exports=function(r,n,i){var s=(i=i||o).distanceFunction||o.distanceFunction,a=i.similarityFunction||o.similarityFunction,u=i.returnVector||o.returnVector,c=-1;if(\"function\"==typeof a)for(var l,h=t,f=0;f<r.length;f++)(l=a(n,r[f]))>h&&(h=l,c=f);else{if(\"function\"!=typeof s)throw new Error(\"A similarity or distance function it's required\");for(var d,p=e,m=0;m<r.length;m++)(d=s(n,r[m]))<p&&(p=d,c=m)}return u?r[c]:c}},function(t,r,n){\"use strict\";var i=n(307).Picker;r.random=function(t,e){for(var r=new i(t),n=Array(e),o=0;o<e;++o)n[o]=r.pick();return n},r.mostDistant=function(t,r,n){var i=Array(r);if(i[0]=g(Math.random()*t.length),1<r){for(var o={dist:-1,index:-1},s=0;s<t.length;++s)n[i[0]][s]>o.dist&&(o.dist=n[i[0]][s],o.index=s);if(i[1]=o.index,2<r)for(var a,u=2;u<r;++u){a={dist:-1,index:-1};for(var c,l=0;l<t.length;++l){c={dist:e,index:-1};for(var h=0;h<u;++h)n[h][l]<c.dist&&-1===i.indexOf(l)&&(c={dist:n[h][l],index:l});c.dist!==e&&c.dist>a.dist&&(a=Object.assign({},c))}i[u]=a.index}}return i.map(e=>t[e])}},function(t){\"use strict\";(function(){var e;(e=void 0!==t&&t.exports?t.exports:this.RandomSelection={}).Picker=function(t){this._originalOptions=t,this._remainingOptions=[]},e.Picker.prototype={pick:function(){0===this._remainingOptions.length&&(this._remainingOptions=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r]);return e}(this._originalOptions));var t=g(Math.random()*this._remainingOptions.length);return this._remainingOptions.splice(t,1)[0]}}}).call(void 0)},function(t,e,r){\"use strict\";function n(t,e,r,n,i){this.clusters=t,this.centroids=e,this.converged=r,this.iterations=n,this[o]=i}var i=r(94),o=Symbol(\"distance\");n.prototype.nearest=function(t){var e=Array(t.length),r=this.centroids.map(function(t){return t.centroid});return i.updateClusterID(t,r,e,this[o])},n.prototype.computeInformation=function(t){for(var e=this.centroids.map(function(t){return{centroid:t,error:0,size:0}}),r=0;r<t.length;r++)e[this.clusters[r]].error+=this[o](t[r],this.centroids[this.clusters[r]]),e[this.clusters[r]].size++;for(var i=0;i<this.centroids.length;i++)e[i].error/=e[i].size;return new n(this.clusters,e,this.converged,this.iterations,this[o])},t.exports=n},function(t,e,r){\"use strict\";e.agnes=r(310),e.diana=r(318)},function(t,e,r){\"use strict\";function n(t,e,r){for(var n=1e101,i=0;i<t.length;i++)for(var o=0;o<e.length;o++)n=v(r[t[i]][e[o]],n);return n}function i(t,e,r){for(var n=-1,i=0;i<t.length;i++)for(var o=0;o<e.length;o++)n=M(r[t[i]][e[o]],n);return n}function o(t,e,r){for(var n=0,i=0;i<t.length;i++)for(var o=0;o<e.length;o++)n+=r[t[i]][e[o]];return n/(t.length*e.length)}function s(t,e,r){for(var n=Array(t.length*e.length),i=0;i<t.length;i++)for(var o=0;o<e.length;o++)n[i*e.length+o]=r[t[i]][e[o]];return function(t,e){void 0===e&&(e=!1),e||(t=[].concat(t).sort(u));var r=t.length,n=g(r/2);return 0==r%2?.5*(t[n-1]+t[n]):t[n]}(n)}function a(t,e,r){return s(t,e,r)*t.length*e.length/(t.length+e.length)}function u(t,e){return t-e}var c=r(0),l=r(95),h=r(48),f=r(68),d={disFunc:c,kind:\"single\",isDistanceMatrix:!1};t.exports=function(t,e){e=Object.assign({},d,e);var r=t.length,u=t;if(e.isDistanceMatrix||(u=f(t,e.disFunc)),\"string\"==typeof e.kind)switch(e.kind){case\"single\":e.kind=n;break;case\"complete\":e.kind=i;break;case\"average\":e.kind=o;break;case\"centroid\":e.kind=s;break;case\"ward\":e.kind=a;break;default:throw new RangeError(\"Unknown kind of similarity\")}else if(\"function\"!=typeof e.kind)throw new TypeError(\"Undefined kind of similarity\");for(var c=Array(r),p=0;p<u.length;p++)c[p]=new l(p);for(var m=1e6,g={},y=0;1<c.length;){g={},m=1e6;for(var w=0;w<c.length;w++)for(var x=w+1;x<c.length;x++){var b,_;if(c[w]instanceof l)b=[c[w].index];else{b=Array(c[w].index.length);for(var M=0;M<b.length;M++)b[M]=c[w].index[M].index}if(c[x]instanceof l)_=[c[x].index];else{_=Array(c[x].index.length);for(var S=0;S<_.length;S++)_[S]=c[x].index[S].index}(y=e.kind(b,_,u).toFixed(4))in g?g[y].push([c[w],c[x]]):g[y]=[[c[w],c[x]]],m=v(y,m)}for(var E,T=g[m.toFixed(4)],A=Array(T.length),R=0;0<T.length;){E=T.shift();for(var k=0;k<T.length;k++)if(0<T[k].filter(function(t){return-1!==E.indexOf(t)}).length){var C=T[k].filter(function(t){return-1===E.indexOf(t)});E=E.concat(C),T.splice(k--,1)}A[R++]=E}A.length=R;for(var L,P=0;P<A.length;P++){(L=new h).children=A[P].concat(),L.distance=m,L.index=Array(r);for(var D=0,O=0;O<A[P].length;O++)A[P][O]instanceof l?L.index[D++]=A[P][O]:(D+=A[P][O].index.length,L.index=A[P][O].index.concat(L.index)),c.splice(c.indexOf(A[P][O]),1);L.index.length=D,c.push(L)}}return c[0]}},function(t,e,r){\"use strict\";t.exports=r(312)},function(t,e){\"use strict\";var r,n;(function(){var i,o,s,a,u,c,l,h,f,d,p,m,y,w,x;s=g,d=v,o=function(t,e){return t<e?-1:t>e?1:0},f=function(t,e,r,n,i){var a;if(null==r&&(r=0),null==i&&(i=o),0>r)throw new Error(\"lo must be non-negative\");for(null==n&&(n=t.length);r<n;)0>i(e,t[a=s((r+n)/2)])?n=a:r=a+1;return[].splice.apply(t,[r,r-r].concat(e)),e},c=function(t,e,r){return null==r&&(r=o),t.push(e),w(t,0,t.length-1,r)},u=function(t,e){var r,n;return null==e&&(e=o),r=t.pop(),t.length?(n=t[0],t[0]=r,x(t,0,e)):n=r,n},h=function(t,e,r){var n;return null==r&&(r=o),n=t[0],t[0]=e,x(t,0,r),n},l=function(t,e,r){var n;return null==r&&(r=o),t.length&&0>r(t[0],e)&&(e=(n=[t[0],e])[0],t[0]=n[1],x(t,0,r)),e},a=function(t,e){var r,n,i,a,u;for(null==e&&(e=o),i=(function(){u=[];for(var e=0,r=s(t.length/2);0<=r?e<r:e>r;0<=r?e++:e--)u.push(e);return u}).apply(this).reverse(),a=[],r=0,n=i.length;r<n;r++)a.push(x(t,i[r],e));return a},y=function(t,e,r){var n;if(null==r&&(r=o),-1!==(n=t.indexOf(e)))return w(t,0,n,r),x(t,n,r)},p=function(t,e,r){var n,i,s,u;if(null==r&&(r=o),!(n=t.slice(0,e)).length)return n;for(a(n,r),i=0,s=(u=t.slice(e)).length;i<s;i++)l(n,u[i],r);return n.sort(r).reverse()},m=function(t,e,r){var n,i,s,c,l,h,p,m,g;if(null==r&&(r=o),10*e<=t.length){if(!(s=t.slice(0,e).sort(r)).length)return s;for(i=s[s.length-1],c=0,h=(p=t.slice(e)).length;c<h;c++)0>r(n=p[c],i)&&(f(s,n,0,null,r),s.pop(),i=s[s.length-1]);return s}for(a(t,r),g=[],l=0,m=d(e,t.length);0<=m?l<m:l>m;0<=m?++l:--l)g.push(u(t,r));return g},w=function(t,e,r,n){var i,s,a;for(null==n&&(n=o),i=t[r];r>e&&0>n(i,s=t[a=r-1>>1]);)t[r]=s,r=a;return t[r]=i},x=function(t,e,r){var n,i,s,a,u;for(null==r&&(r=o),i=t.length,u=e,s=t[e],n=2*e+1;n<i;)(a=n+1)<i&&!(0>r(t[n],t[a]))&&(n=a),t[e]=t[n],n=2*(e=n)+1;return t[e]=s,w(t,u,e,r)},i=function(){function t(t){this.cmp=null==t?o:t,this.nodes=[]}return t.push=c,t.pop=u,t.replace=h,t.pushpop=l,t.heapify=a,t.updateItem=y,t.nlargest=p,t.nsmallest=m,t.prototype.push=function(t){return c(this.nodes,t,this.cmp)},t.prototype.pop=function(){return u(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return h(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return l(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return a(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return y(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),function(i,o){void 0!==(n=\"function\"==typeof(r=o)?r.apply(e,[]):r)&&(t.exports=n)}(0,function(){return i})}).call(void 0)},function(t,e,r){\"use strict\";(function(t,n){function i(t,r){var n={seen:[],stylize:s};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),f(r)?n.showHidden=r:r&&e._extend(n,r),g(n.showHidden)&&(n.showHidden=!1),g(n.depth)&&(n.depth=2),g(n.colors)&&(n.colors=!1),g(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),a(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?\"\\x1b[\"+i.colors[r][0]+\"m\"+t+\"\\x1b[\"+i.colors[r][1]+\"m\":t}function s(t){return t}function a(t,r,n){if(t.customInspect&&r&&b(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return m(i)||(i=a(t,i,n)),i}var o=u(t,r);if(o)return o;var s=Object.keys(r),f=function(t){var e={};return s.forEach(function(t){e[t]=!0}),e}();if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),x(r)&&(0<=s.indexOf(\"message\")||0<=s.indexOf(\"description\")))return c(r);if(0===s.length){if(b(r))return t.stylize(\"[Function\"+(r.name?\": \"+r.name:\"\")+\"]\",\"special\");if(v(r))return t.stylize(RegExp.prototype.toString.call(r),\"regexp\");if(w(r))return t.stylize(Date.prototype.toString.call(r),\"date\");if(x(r))return c(r)}var d,p=\"\",g=!1,y=[\"{\",\"}\"];return h(r)&&(g=!0,y=[\"[\",\"]\"]),b(r)&&(p=\" [Function\"+(r.name?\": \"+r.name:\"\")+\"]\"),v(r)&&(p=\" \"+RegExp.prototype.toString.call(r)),w(r)&&(p=\" \"+Date.prototype.toUTCString.call(r)),x(r)&&(p=\" \"+c(r)),0!==s.length||g&&0!=r.length?0>n?v(r)?t.stylize(RegExp.prototype.toString.call(r),\"regexp\"):t.stylize(\"[Object]\",\"special\"):(t.seen.push(r),d=g?function(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)S(e,s+\"\")?o.push(l(t,e,r,n,s+\"\",!0)):o.push(\"\");return i.forEach(function(i){i.match(/^\\d+$/)||o.push(l(t,e,r,n,i,!0))}),o}(t,r,n,f,s):s.map(function(e){return l(t,r,n,f,e,g)}),t.seen.pop(),function(t,e,r){return 60<t.reduce(function(t,e){return e.indexOf(\"\\n\"),t+e.replace(/\\u001b\\[\\d\\d?m/g,\"\").length+1},0)?r[0]+(\"\"===e?\"\":e+\"\\n \")+\" \"+t.join(\",\\n  \")+\" \"+r[1]:r[0]+e+\" \"+t.join(\", \")+\" \"+r[1]}(d,p,y)):y[0]+p+y[1]}function u(t,e){if(g(e))return t.stylize(\"undefined\",\"undefined\");if(m(e)){var r=\"'\"+JSON.stringify(e).replace(/^\"|\"$/g,\"\").replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"')+\"'\";return t.stylize(r,\"string\")}return p(e)?t.stylize(\"\"+e,\"number\"):f(e)?t.stylize(\"\"+e,\"boolean\"):d(e)?t.stylize(\"null\",\"null\"):void 0}function c(t){return\"[\"+Error.prototype.toString.call(t)+\"]\"}function l(t,e,r,n,i,o){var s,u,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?u=t.stylize(c.set?\"[Getter/Setter]\":\"[Getter]\",\"special\"):c.set&&(u=t.stylize(\"[Setter]\",\"special\")),S(n,i)||(s=\"[\"+i+\"]\"),u||(0>t.seen.indexOf(c.value)?-1<(u=d(r)?a(t,c.value,null):a(t,c.value,r-1)).indexOf(\"\\n\")&&(u=o?u.split(\"\\n\").map(function(t){return\"  \"+t}).join(\"\\n\").substr(2):\"\\n\"+u.split(\"\\n\").map(function(t){return\"   \"+t}).join(\"\\n\")):u=t.stylize(\"[Circular]\",\"special\")),g(s)){if(o&&i.match(/^\\d+$/))return u;(s=JSON.stringify(\"\"+i)).match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,\"name\")):(s=s.replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"').replace(/(^\"|\"$)/g,\"'\"),s=t.stylize(s,\"string\"))}return s+\": \"+u}function h(t){return Array.isArray(t)}function f(t){return\"boolean\"==typeof t}function d(t){return null===t}function p(t){return\"number\"==typeof t}function m(t){return\"string\"==typeof t}function g(t){return void 0===t}function v(t){return y(t)&&\"[object RegExp]\"===_(t)}function y(t){return\"object\"==typeof t&&null!==t}function w(t){return y(t)&&\"[object Date]\"===_(t)}function x(t){return y(t)&&(\"[object Error]\"===_(t)||t instanceof Error)}function b(t){return\"function\"==typeof t}function _(t){return Object.prototype.toString.call(t)}function M(t){return 10>t?\"0\"+t.toString(10):t.toString(10)}function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var E=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(\" \")}r=1;for(var n=arguments,o=n.length,s=(t+\"\").replace(E,function(t){if(\"%%\"===t)return\"%\";if(r>=o)return t;switch(t){case\"%s\":return n[r++]+\"\";case\"%d\":return+n[r++];case\"%j\":try{return JSON.stringify(n[r++])}catch(t){return\"[Circular]\"}default:return t}}),a=n[r];r<o;a=n[++r])s+=d(a)||!y(a)?\" \"+a:\" \"+i(a);return s},e.deprecate=function(r,i){if(g(t.process))return function(){return e.deprecate(r,i).apply(this,arguments)};if(!0===n.noDeprecation)return r;var o=!1;return function(){if(!o){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),o=!0}return r.apply(this,arguments)}};var T,A={};e.debuglog=function(t){if(g(T)&&(T=n.env.NODE_DEBUG||\"\"),t=t.toUpperCase(),!A[t])if(new RegExp(\"\\\\b\"+t+\"\\\\b\",\"i\").test(T)){var r=n.pid;A[t]=function(){var n=e.format.apply(e,arguments);console.error(\"%s %d: %s\",t,r,n)}}else A[t]=function(){};return A[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:\"cyan\",number:\"yellow\",boolean:\"yellow\",undefined:\"grey\",null:\"bold\",string:\"green\",date:\"magenta\",regexp:\"red\"},e.isArray=h,e.isBoolean=f,e.isNull=d,e.isNullOrUndefined=function(t){return null==t},e.isNumber=p,e.isString=m,e.isSymbol=function(t){return\"symbol\"==typeof t},e.isUndefined=g,e.isRegExp=v,e.isObject=y,e.isDate=w,e.isError=x,e.isFunction=b,e.isPrimitive=function(t){return null===t||\"boolean\"==typeof t||\"number\"==typeof t||\"string\"==typeof t||\"symbol\"==typeof t||void 0===t},e.isBuffer=r(316);var R=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];e.log=function(){console.log(\"%s - %s\",function(){var t=new Date,e=[M(t.getHours()),M(t.getMinutes()),M(t.getSeconds())].join(\":\");return[t.getDate(),R[t.getMonth()],e].join(\" \")}(),e.format.apply(e,arguments))},e.inherits=r(317),e._extend=function(t,e){if(!e||!y(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(e,r(314),r(315))},function(t){\"use strict\";var e=function(){return this}();try{e=e||Function(\"return this\")()||(0,eval)(\"this\")}catch(t){\"object\"==typeof window&&(e=window)}t.exports=e},function(t){\"use strict\";function e(){throw new Error(\"setTimeout has not been defined\")}function r(){throw new Error(\"clearTimeout has not been defined\")}function n(t){if(u===setTimeout)return setTimeout(t,0);if((u===e||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function i(){d&&h&&(d=!1,h.length?f=h.concat(f):p=-1,f.length&&o())}function o(){if(!d){var t=n(i);d=!0;for(var e=f.length;e;){for(h=f,f=[];++p<e;)h&&h[p].run();p=-1,e=f.length}h=null,d=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(t)}}function s(t,e){this.fun=t,this.array=e}function a(){}var u,c,l=t.exports={};!function(){try{u=\"function\"==typeof setTimeout?setTimeout:e}catch(t){u=e}try{c=\"function\"==typeof clearTimeout?clearTimeout:r}catch(t){c=r}}();var h,f=[],d=!1,p=-1;l.nextTick=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];f.push(new s(t,e)),1!==f.length||d||n(o)},s.prototype.run=function(){this.fun.apply(null,this.array)},l.title=\"browser\",l.browser=!0,l.env={},l.argv=[],l.version=\"\",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.prependListener=a,l.prependOnceListener=a,l.listeners=function(){return[]},l.binding=function(){throw new Error(\"process.binding is not supported\")},l.cwd=function(){return\"/\"},l.chdir=function(){throw new Error(\"process.chdir is not supported\")},l.umask=function(){return 0}},function(t){\"use strict\";t.exports=function(t){return t&&\"object\"==typeof t&&\"function\"==typeof t.copy&&\"function\"==typeof t.fill&&\"function\"==typeof t.readUInt8}},function(t){\"use strict\";t.exports=\"function\"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){\"use strict\";function n(t,e,r){for(var n=1e101,i=0;i<t.length;i++)for(var o,s=i;s<e.length;s++)o=r(t[i],e[s]),n=v(o,n);return n}function i(t,e,r){for(var n=-1,i=0;i<t.length;i++)for(var o,s=i;s<e.length;s++)o=r(t[i],e[s]),n=M(o,n);return n}function o(t,e,r){for(var n=0,i=0;i<t.length;i++)for(var o=0;o<e.length;o++)n+=r(t[i],e[o]);return n/(t.length*e.length)}function s(t,e,r){for(var n=0,i=0,o=0,s=0,a=0;a<t.length;a++)n+=t[a][0],i+=t[a][1];for(var u=0;u<e.length;u++)o+=e[u][0],s+=e[u][1];return r([n/=t.length,i/=t.length],[o/=e.length,s/=e.length])}function a(t,e,r){for(var n=0,i=0,o=0,s=0,a=0;a<t.length;a++)n+=t[a][0],i+=t[a][1];for(var u=0;u<e.length;u++)o+=e[u][0],s+=e[u][1];return r([n/=t.length,i/=t.length],[o/=e.length,s/=e.length])*t.length*e.length/(t.length+e.length)}function u(t,e,r){for(var n={d:0,p:0},i=Array(t[0].length),o=0;o<t[0].length;o++)i[o]=e[t[0][o]];for(var s=Array(t[1].length),a=0;a<t[1].length;a++)s[a]=e[t[1][a]];for(var u,c,l=0;l<i.length;l++){u=0;for(var h=0;h<i.length;h++)l!==h&&(u+=r(i[l],i[h]));u/=i.length-1,c=0;for(var f=0;f<s.length;f++)c+=r(i[l],s[f]);u-(c/=s.length)>n.d&&(n.d=u-c,n.p=l)}return n}function c(t,e,r){for(var n=0,i=0,o=0;o<t.length;o++)for(var s=o;s<t.length;s++)n+=r(e[t[o].index],e[t[s].index]),i++;return n/i}var l=r(0),h=r(95),f=r(48),d={dist:l,kind:\"single\"};t.exports=function(t,e){if(\"string\"==typeof(e=Object.assign({},d,e)).kind)switch(e.kind){case\"single\":e.kind=n;break;case\"complete\":e.kind=i;break;case\"average\":e.kind=o;break;case\"centroid\":e.kind=s;break;case\"ward\":e.kind=a;break;default:throw new RangeError(\"Unknown kind of similarity\")}else if(\"function\"!=typeof e.kind)throw new TypeError(\"Undefined kind of similarity\");var r=new f;r.children=Array(t.length),r.index=Array(t.length);for(var l=0;l<t.length;l++)r.children[l]=new h(l),r.index[l]=new h(l);r.distance=c(r.index,t,e.dist);for(var p,m,g,v,y,w=[r];0<w.length;){m=0,g=0;for(var x=0;x<w.length;x++){p=0;for(var b=0;b<w[x].length;b++)for(var _=b+1;_<w[x].length;_++)p=M(e.dist(t[w[x].index[b].index],t[w[x].index[_].index]),p);p>m&&(m=p,g=x)}if(m=0,2===w[g].index.length)w[g].children=[w[g].index[0],w[g].index[1]],w[g].distance=e.dist(t[w[g].index[0].index],t[w[g].index[1].index]);else if(3===w[g].index.length){w[g].children=[w[g].index[0],w[g].index[1],w[g].index[2]];var S=[e.dist(t[w[g].index[0].index],t[w[g].index[1].index]),e.dist(t[w[g].index[1].index],t[w[g].index[2].index])];w[g].distance=(S[0]+S[1])/2}else{for(var E=new f,T=new f,A=[Array(w[g].index.length),[]],R=0;R<A[0].length;R++)A[0][R]=R;for(var k=0;k<A[0].length;k++){v=0;for(var C=0;C<A[0].length;C++)k!==C&&(v+=e.dist(t[w[g].index[A[0][C]].index],t[w[g].index[A[0][k]].index]));(v/=A[0].length-1)>m&&(m=v,y=k)}for(A[1]=[y],A[0].splice(y,1),v=u(A,t,e.dist);0<v.d;)A[1].push(A[0][v.p]),A[0].splice(v.p,1),v=u(A,t,e.dist);var L=Array(A[0].length);E.index=Array(A[0].length);for(var P=0;P<L.length;P++)L[P]=t[w[g].index[A[0][P]].index],E.index[P]=w[g].index[A[0][P]],E.children[P]=w[g].index[A[0][P]];var D=Array(A[1].length);T.index=Array(A[1].length);for(var O=0;O<D.length;O++)D[O]=t[w[g].index[A[1][O]].index],T.index[O]=w[g].index[A[1][O]],T.children[O]=w[g].index[A[1][O]];E.distance=c(E.index,t,e.dist),T.distance=c(T.index,t,e.dist),w.push(E),w.push(T),w[g].children=[E,T]}w.splice(g,1)}return r}},function(e,t,i){\"use strict\";function n(t,e,r,n){for(var i in this.x=t,this.y=e,r=r||{},this.options={},p)this.options[i]=r.hasOwnProperty(i)?r[i]:p[i];if(\"number\"==typeof this.options.fields)this.numWeights=this.options.fields;else{if(!Array.isArray(this.options.fields))throw new Error(\"Invalid fields definition\");this.numWeights=this.options.fields.length;var o=s(this.options.fields);this.extractor=o.extractor,this.creator=o.creator}if(\"rect\"===this.options.gridType)this.nodeType=d,this.gridDim={x:t,y:e};else{this.nodeType=h;var a=this.x-g(this.y/2);this.gridDim={x:a,y:this.y,z:-(0-a-this.y)}}if(this.torus=this.options.torus,this.distanceMethod=this.torus?\"getDistanceTorus\":\"getDistance\",this.distance=this.options.distance,this.maxDistance=m(this.distance,this.numWeights),!0!==n){if(!(0<t&&0<e))throw new Error(\"x and y must be positive\");this.times={findBMU:0,adjust:0},this.randomizer=this.options.randomizer,this.iterationCount=0,this.iterations=this.options.iterations,this.startLearningRate=this.learningRate=this.options.learningRate,this.mapRadius=g(M(t,e)/2),this.algorithmMethod=this.options.method,this._initNodes(),this.done=!1}else this.done=!0}function s(t){for(var e=t.length,r=Array(e),n=Array(e),i=0;i<e;i++)r[i]=a(t[i].range),n[i]=c(t[i].range);return{extractor:function(n){for(var i=Array(e),o=0;o<e;o++)i[o]=r[o](n[t[o].name]);return i},creator:function(r){for(var i={},o=0;o<e;o++)i[t[o].name]=n[o](r[o]);return i}}}function a(t){return function(e){return(e-t[0])/(t[1]-t[0])}}function c(t){return function(e){return t[0]+e*(t[1]-t[0])}}function l(t,e){for(var r=0,n=0,i=t.length;n<i;n++)r+=(t[n]-e[n])*(t[n]-e[n]);return r}function u(t,e){return t[g(e()*t.length)]}function m(t,e){for(var r=Array(e),n=Array(e),i=0;i<e;i++)r[i]=0,n[i]=1;return t(r,n)}var d=i(96),h=i(320),p={fields:3,randomizer:Math.random,distance:l,iterations:10,learningRate:.1,gridType:\"rect\",torus:!0,method:\"random\"};n.load=function(e,t){if(\"SOM\"===e.name){var o=e.data.length,s=e.data[0].length;t?e.options.distance=t:e.options.distance&&(e.options.distance=eval(\"(\"+e.options.distance+\")\"));var r=new n(o,s,e.options,!0);r.nodes=Array(o);for(var a=0;a<o;a++){r.nodes[a]=Array(s);for(var i=0;i<s;i++)r.nodes[a][i]=new r.nodeType(a,i,e.data[a][i],r)}return r}throw new Error(\"expecting a SOM model\")},n.prototype.export=function(t){if(!this.done)throw new Error(\"model is not ready yet\");for(var e={name:\"SOM\",options:{fields:this.options.fields,gridType:this.options.gridType,torus:this.options.torus},data:Array(this.x)},r=0;r<this.x;r++){e.data[r]=Array(this.y);for(var n=0;n<this.y;n++)e.data[r][n]=this.nodes[r][n].weights}return t&&(e.options.distance=this.distance.toString()),e},n.prototype._initNodes=function(){var t,e,r,n=Date.now();for(this.nodes=Array(this.x),t=0;t<this.x;t++)for(this.nodes[t]=Array(this.y),e=0;e<this.y;e++){var i=Array(this.numWeights);for(r=0;r<this.numWeights;r++)i[r]=this.randomizer();this.nodes[t][e]=new this.nodeType(t,e,i,this)}this.times.initNodes=Date.now()-n},n.prototype.setTraining=function(t){if(this.trainingSet)throw new Error(\"training set has already been set\");var e,n=Date.now(),i=t,o=t.length;if(this.extractor)for(i=Array(o),e=0;e<o;e++)i[e]=this.extractor(t[e]);this.numIterations=this.iterations*o,this.timeConstant=\"random\"===this.algorithmMethod?this.numIterations/r(this.mapRadius):o/r(this.mapRadius),this.trainingSet=i,this.times.setTraining=Date.now()-n},n.prototype.trainOne=function(){return!this.done&&(0<this.numIterations--?(\"random\"===this.algorithmMethod?(t=this.mapRadius*o(-this.iterationCount/this.timeConstant),e=u(this.trainingSet,this.randomizer),this._adjust(e,t),this.learningRate=this.startLearningRate*o(-this.iterationCount/this.numIterations)):(r=-g(this.iterationCount/this.trainingSet.length),t=this.mapRadius*o(r/this.timeConstant),this._adjust(e=this.trainingSet[this.iterationCount%this.trainingSet.length],t),0==(this.iterationCount+1)%this.trainingSet.length&&(this.learningRate=this.startLearningRate*o(r/g(this.numIterations/this.trainingSet.length)))),this.iterationCount++,!0):(this.done=!0,!1));var t,e,r},n.prototype._adjust=function(t,e){var r,n,i,s,a=Date.now(),u=this._findBestMatchingUnit(t),c=Date.now();this.times.findBMU+=c-a;var l=g(e),h=u.x+l,f=u.y-l,d=u.y+l;for(r=u.x-l;r<=h;r++){var p=r;for(0>r?p+=this.x:r>=this.x&&(p-=this.x),n=f;n<=d;n++){var m=n;0>n?m+=this.y:n>=this.y&&(m-=this.y),(i=u[this.distanceMethod](this.nodes[p][m]))<e&&(s=o(-i/(2*e)),this.nodes[p][m].adjustWeights(t,this.learningRate,s))}}this.times.adjust+=Date.now()-c},n.prototype.train=function(t){if(!this.done)for(this.setTraining(t);this.trainOne(););},n.prototype.getConvertedNodes=function(){for(var t=Array(this.x),e=0;e<this.x;e++){t[e]=Array(this.y);for(var r,n=0;n<this.y;n++)r=this.nodes[e][n],t[e][n]=this.creator?this.creator(r.weights):r.weights}return t},n.prototype._findBestMatchingUnit=function(t){for(var e,r,n=1/0,i=0;i<this.x;i++)for(var o=0;o<this.y;o++)(r=this.distance(this.nodes[i][o].weights,t))<n&&(n=r,e=this.nodes[i][o]);return e},n.prototype.predict=function(t,e){if(\"boolean\"==typeof t&&(e=t,t=null),t||(t=this.trainingSet),Array.isArray(t)&&(Array.isArray(t[0])||\"object\"==typeof t[0])){var r=this;return t.map(function(t){return r._predict(t,e)})}return this._predict(t,e)},n.prototype._predict=function(t,e){Array.isArray(t)||(t=this.extractor(t));var r=this._findBestMatchingUnit(t),n=[r.x,r.y];return e&&(n[2]=r.getPosition(t)),n},n.prototype.getQuantizationError=function(){for(var t=this.getFit(),e=t.length,r=0,n=0;n<e;n++)r+=t[n];return r/e},n.prototype.getFit=function(t){t||(t=this.trainingSet);for(var e,r=t.length,n=Array(r),i=0;i<r;i++)e=this._findBestMatchingUnit(t[i]),n[i]=R(this.distance(t[i],e.weights));return n},e.exports=n},function(t,e,r){\"use strict\";function n(t,e,r,n){i.call(this,t,e,r,n),this.hX=t-g(e/2),this.z=0-this.hX-e}var i=r(96);(n.prototype=new i).constructor=n,n.prototype.getDistance=function(t){return M(u(this.hX-t.hX),u(this.y-t.y),u(this.z-t.z))},n.prototype.getDistanceTorus=function(t){var e=u(this.hX-t.hX),r=u(this.y-t.y),n=u(this.z-t.z);return M(v(e,this.som.gridDim.x-e),v(r,this.som.gridDim.y-r),v(n,this.som.gridDim.z-n))},n.prototype.getPosition=function(){throw new Error(\"Unimplemented : cannot get position of the points for hexagonal grid\")},t.exports=n},function(t,e,r){\"use strict\";var n=r(49),i=r(100),o=r(334),s=r(101),a=r(102);class u{constructor(t){if((t=t||{}).model){this.hiddenLayers=t.hiddenLayers,this.iterations=t.iterations,this.learningRate=t.learningRate,this.regularization=t.regularization,this.dicts=t.dicts,this.activation=t.activation,this.activationParam=t.activationParam,this.model=Array(t.layers.length);for(var e=0;e<this.model.length-1;++e)this.model[e]=i.load(t.layers[e]);this.model[this.model.length-1]=o.load(t.layers[this.model.length-1])}else this.hiddenLayers=void 0===t.hiddenLayers?[10]:t.hiddenLayers,this.iterations=void 0===t.iterations?50:t.iterations,this.learningRate=void 0===t.learningRate?.01:t.learningRate,this.regularization=void 0===t.regularization?.01:t.regularization,this.activation=void 0===t.activation?\"tanh\":t.activation,this.activationParam=void 0===t.activationParam?1:t.activationParam,this.activation in Object.keys(a)||(this.activation=\"tanh\")}buildNetwork(t,e){var r=this.hiddenLayers.length-1+2;this.model=Array(r),this.model[0]=new i({inputSize:t,outputSize:this.hiddenLayers[0],activation:this.activation,activationParam:this.activationParam,regularization:this.regularization,epsilon:this.learningRate});for(var n=1;n<this.hiddenLayers.length;++n)this.model[n]=new i({inputSize:this.hiddenLayers[n-1],outputSize:this.hiddenLayers[n],activation:this.activation,activationParam:this.activationParam,regularization:this.regularization,epsilon:this.learningRate});this.model[r-1]=new o({inputSize:this.hiddenLayers[this.hiddenLayers.length-1],outputSize:e,activation:this.activation,activationParam:this.activationParam,regularization:this.regularization,epsilon:this.learningRate})}train(t,e){t=n.checkMatrix(t),this.dicts=s.dictOutputs(e);var r=t.columns,i=Object.keys(this.dicts.inputs).length;this.buildNetwork(r,i);for(var o,a=0;a<this.iterations;++a)o=this.propagate(t),this.backpropagation(t,e,o)}propagate(t){for(var e=t,r=0;r<this.model.length;++r)e=this.model[r].forward(e);return e.divColumnVector(s.sumRow(e))}backpropagation(t,e,r){for(var n=0;n<r.length;++n)r[n][this.dicts.inputs[e[n]]]-=1;var i=r;for(n=this.model.length-1;0<=n;--n)i=this.model[n].backpropagation(i,0<n?this.model[n-1].a:t);for(n=0;n<this.model.length;++n)this.model[n].update()}predict(t){t=n.checkMatrix(t);for(var e=Array(t.rows),r=this.propagate(t),i=0;i<t.rows;++i)e[i]=this.dicts.outputs[r.maxRowIndex(i)[1]];return e}toJSON(){for(var t={model:\"FNN\",hiddenLayers:this.hiddenLayers,iterations:this.iterations,learningRate:this.learningRate,regularization:this.regularization,activation:this.activation,activationParam:this.activationParam,dicts:this.dicts,layers:Array(this.model.length)},e=0;e<this.model.length;++e)t.layers[e]=this.model[e].toJSON();return t}static load(t){if(\"FNN\"!==t.model)throw new RangeError(\"the current model is not a feed forward network\");return new u(t)}}t.exports=u},function(){\"use strict\";Symbol.species||(Symbol.species=Symbol.for(\"@@species\"))},function(t,e,r){\"use strict\";var n=r(22);t.exports=class extends n{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,r){\"use strict\";var n=r(22);t.exports=class extends n{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,r){\"use strict\";var n=r(22),i=r(31);t.exports=class extends n{constructor(t,e,r,n,o){i.checkRange(t,e,r,n,o),super(t,r-e+1,o-n+1),this.startRow=e,this.startColumn=n}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,r){\"use strict\";var n=r(22),i=r(31);t.exports=class extends n{constructor(t,e,r){var n=i.checkIndices(t,e,r);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,r){\"use strict\";var n=r(22);t.exports=class extends n{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,r){\"use strict\";var n=r(22);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,r){\"use strict\";var n=r(22);t.exports=class extends n{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,r){\"use strict\";function n(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=r(12).Matrix,s=r(99),a=r(331),u=r(98),c=r(332),l=r(333);o.inverse=o.inv=n,o.prototype.inverse=o.prototype.inv=function(){return n(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:s,SVD:s,EigenvalueDecomposition:a,EVD:a,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:n,solve:i}},function(t,e,r){\"use strict\";function n(t,e){if(e=Object.assign({},p,e),!(this instanceof n))return new n(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error(\"Matrix is not a square matrix\");var r,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(r=0;r<c;r++)for(u=0;u<c;u++)h[r][u]=g.get(r,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(r=0;r<c;r++)v[r][u]=g.get(r,u);s(c,v,y,h),a(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,r,n){var i,o,s,a,c,l,h,f;for(c=0;c<t;c++)r[c]=n[t-1][c];for(a=t-1;0<a;a--){for(f=0,s=0,l=0;l<a;l++)f+=u(r[l]);if(0===f)for(e[a]=r[a-1],c=0;c<a;c++)r[c]=n[a-1][c],n[a][c]=0,n[c][a]=0;else{for(l=0;l<a;l++)r[l]/=f,s+=r[l]*r[l];for(i=r[a-1],o=R(s),0<i&&(o=-o),e[a]=f*o,s-=i*o,r[a-1]=i-o,c=0;c<a;c++)e[c]=0;for(c=0;c<a;c++){for(n[c][a]=i=r[c],o=e[c]+n[c][c]*i,l=c+1;l<=a-1;l++)o+=n[l][c]*r[l],e[l]+=n[l][c]*i;e[c]=o}for(i=0,c=0;c<a;c++)e[c]/=s,i+=e[c]*r[c];for(h=i/(s+s),c=0;c<a;c++)e[c]-=h*r[c];for(c=0;c<a;c++){for(i=r[c],o=e[c],l=c;l<=a-1;l++)n[l][c]-=i*e[l]+o*r[l];r[c]=n[a-1][c],n[a][c]=0}}r[a]=s}for(a=0;a<t-1;a++){if(n[t-1][a]=n[a][a],n[a][a]=1,0!==(s=r[a+1])){for(l=0;l<=a;l++)r[l]=n[l][a+1]/s;for(c=0;c<=a;c++){for(o=0,l=0;l<=a;l++)o+=n[l][a+1]*n[l][c];for(l=0;l<=a;l++)n[l][c]-=o*r[l]}}for(l=0;l<=a;l++)n[l][a+1]=0}for(c=0;c<t;c++)r[c]=n[t-1][c],n[t-1][c]=0;n[t-1][t-1]=1,e[0]=0}function o(t,e,r,n){var i,o,s,a,c,l,h,d,p,m,g,v,y,w,x,b;for(s=1;s<t;s++)e[s-1]=e[s];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(r[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(r[l+1]-(i=r[l]))/(2*e[l]),1),0>d&&(p=-p),r[l]=e[l]/(d+p),r[l+1]=e[l]*(d+p),m=r[l+1],o=i-r[l],s=l+2;s<t;s++)r[s]-=o;for(_+=o,d=r[h],v=g=1,y=g,w=e[l+1],x=0,b=0,s=h-1;s>=l;s--)for(y=v,v=g,b=x,i=g*e[s],o=g*d,p=f(d,e[s]),e[s+1]=x*p,d=(g=d/p)*r[s]-(x=e[s]/p)*i,r[s+1]=o+x*(g*i+x*r[s]),c=0;c<t;c++)n[c][s+1]=x*n[c][s]+g*(o=n[c][s+1]),n[c][s]=g*n[c][s]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),r[l]=g*d}while(u(e[l])>E*S);r[l]+=_,e[l]=0}for(s=0;s<t-1;s++){for(c=s,d=r[s],a=s+1;a<t;a++)r[a]<d&&(c=a,d=r[a]);if(c!==s)for(r[c]=r[s],r[s]=d,a=0;a<t;a++)d=n[a][s],n[a][s]=n[a][c],n[a][c]=d}}function s(t,e,r,n){var i,o,s,a,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,a=l;a<=f;a++)h+=u(e[a][l-1]);if(0!==h){for(s=0,a=f;a>=l;a--)r[a]=e[a][l-1]/h,s+=r[a]*r[a];for(o=R(s),0<r[l]&&(o=-o),s-=r[l]*o,r[l]-=o,c=l;c<t;c++){for(i=0,a=f;a>=l;a--)i+=r[a]*e[a][c];for(i/=s,a=l;a<=f;a++)e[a][c]-=i*r[a]}for(a=0;a<=f;a++){for(i=0,c=f;c>=l;c--)i+=r[c]*e[a][c];for(i/=s,c=l;c<=f;c++)e[a][c]-=i*r[c]}r[l]=h*r[l],e[l][l-1]=h*o}}for(a=0;a<t;a++)for(c=0;c<t;c++)n[a][c]=a===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(a=l+1;a<=f;a++)r[a]=e[a][l-1];for(c=l;c<=f;c++){for(o=0,a=l;a<=f;a++)o+=r[a]*n[a][c];for(o=o/r[l]/e[l][l-1],a=l;a<=f;a++)n[a][c]+=o*r[a]}}}function a(t,e,r,n,i){var o,s,a,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,k=0,C=0,L=0,P=0,D=0,O=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(r[o]=i[o][o],e[o]=0),s=M(o-1,0);s<t;s++)k+=u(i[o][s]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=k),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,r[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(O=R(u(L=(C=(i[S-1][S-1]-i[S][S])/2)*C+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=L){for(r[S-1]=p+(O=0<=C?C+O:C-O),r[S]=r[S-1],0!==O&&(r[S]=p-d/O),e[S-1]=0,e[S]=0,C=(p=i[S][S-1])/(D=u(p)+u(O)),C/=P=R(C*C+(L=O/D)*L),L/=P,s=S-1;s<t;s++)i[S-1][s]=L*(O=i[S-1][s])+C*i[S][s],i[S][s]=L*i[S][s]-C*O;for(o=0;o<=S;o++)i[o][S-1]=L*(O=i[o][S-1])+C*i[o][S],i[o][S]=L*i[o][S]-C*O;for(o=0;o<=E;o++)n[o][S-1]=L*(O=n[o][S-1])+C*n[o][S],n[o][S]=L*n[o][S]-C*O}else r[S-1]=p+C,r[S]=p+C,e[S-1]=O,e[S]=-O;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(C=((P=p-(O=i[h][h]))*(D=m-O)-d)/i[h+1][h]+i[h][h+1],L=i[h+1][h+1]-O-P-D,P=i[h+2][h+1],C/=D=u(C)+u(L)+u(P),L/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(L)+u(P))<T*(u(C)*(u(i[h-1][h-1])+u(O)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(a=h;a<=S-1&&(b=a!==S-1,a!==h&&(C=i[a][a-1],L=i[a+1][a-1],P=b?i[a+2][a-1]:0,0!==(p=u(C)+u(L)+u(P))&&(C/=p,L/=p,P/=p)),0!==p);a++)if(D=R(C*C+L*L+P*P),0>C&&(D=-D),0!==D){for(a===h?l!==h&&(i[a][a-1]=-i[a][a-1]):i[a][a-1]=-D*p,p=(C+=D)/D,m=L/D,O=P/D,L/=C,P/=C,s=a;s<t;s++)C=i[a][s]+L*i[a+1][s],b&&(i[a+2][s]=i[a+2][s]-(C+=P*i[a+2][s])*O),i[a][s]-=C*p,i[a+1][s]=i[a+1][s]-C*m;for(o=0;o<=v(S,a+3);o++)C=p*i[o][a]+m*i[o][a+1],b&&(i[o][a+2]=i[o][a+2]-(C+=O*i[o][a+2])*P),i[o][a]-=C,i[o][a+1]=i[o][a+1]-C*L;for(o=0;o<=E;o++)C=p*n[o][a]+m*n[o][a+1],b&&(n[o][a+2]=n[o][a+2]-(C+=O*n[o][a+2])*P),n[o][a]-=C,n[o][a+1]=n[o][a+1]-C*L}}}if(0!==k){for(S=t-1;0<=S;S--)if(C=r[S],0===(L=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-C,P=0,s=l;s<=S;s++)P+=i[o][s]*i[s][S];if(0>e[o])O=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*k):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-O*P)/(L=(r[o]-C)*(r[o]-C)+e[o]*e[o]),i[o+1][S]=u(p)>u(O)?(-P-d*f)/p:(-D-m*f)/O),1<T*(f=u(i[o][S]))*f)for(s=o;s<=S;s++)i[s][S]/=f}else if(0>L)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=L/i[S][S-1],i[S-1][S]=-(i[S][S]-C)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-C,L),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,s=l;s<=S;s++)g+=i[o][s]*i[s][S-1],y+=i[o][s]*i[s][S];if(d=i[o][o]-C,0>e[o])O=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,L),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(r[o]-C)*L,0==(w=(r[o]-C)*(r[o]-C)+e[o]*e[o]-L*L)&&0===x&&(w=T*k*(u(d)+u(L)+u(p)+u(m)+u(O))),_=c(p*P-O*g+L*y,p*D-O*y-L*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(O)+u(L)?(i[o+1][S-1]=(-g-d*i[o][S-1]+L*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-L*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],O,L),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(s=o;s<=S;s++)i[s][S-1]=i[s][S-1]/f,i[s][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(s=o;s<t;s++)n[o][s]=i[o][s];for(s=t-1;s>=0;s--)for(o=0;o<=E;o++){for(O=0,a=0;a<=v(s,E);a++)O+=n[o][a]*i[a][s];n[o][s]=O}}}function c(t,e,r,n){var i,o;return u(r)>u(n)?[(t+(i=n/r)*e)/(o=r+i*n),(e-i*t)/o]:[((i=r/n)*t+e)/(o=n+i*r),(i*e-t)/o]}var l=r(12).Matrix,h=r(50),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};n.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,r=this.n,n=this.e,i=this.d,o=new l(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)o[t][e]=0;o[t][t]=i[t],0<n[t]?o[t][t+1]=n[t]:0>n[t]&&(o[t][t-1]=n[t])}return o}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);var e,r,s,a,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(s=0;s<l;s++){var f=0;for(e=s;e<c;e++)f=o(f,u[e][s]);if(0!==f){for(0>u[s][s]&&(f=-f),e=s;e<c;e++)u[e][s]/=f;for(u[s][s]+=1,r=s+1;r<l;r++){for(a=0,e=s;e<c;e++)a+=u[e][s]*u[e][r];for(a=-a/u[s][s],e=s;e<c;e++)u[e][r]+=a*u[e][s]}}h[s]=-f}this.QR=u,this.Rdiag=h}var i=r(12).Matrix,o=r(50).hypotenuse;n.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix row dimensions must agree\");if(!this.isFullRank())throw new Error(\"Matrix is rank deficient\");var n,o,s,a,u=t.columns,c=t.clone(),l=e.columns;for(s=0;s<l;s++)for(o=0;o<u;o++){for(a=0,n=s;n<r;n++)a+=e[n][s]*c[n][o];for(a=-a/e[s][s],n=s;n<r;n++)c[n][o]+=a*e[n][s]}for(s=l-1;0<=s;s--){for(o=0;o<u;o++)c[s][o]/=this.Rdiag[s];for(n=0;n<s;n++)for(o=0;o<u;o++)c[n][o]-=c[s][o]*e[n][s]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,r=this.QR,n=r.columns,o=new i(n,n);for(t=0;t<n;t++)for(e=0;e<n;e++)o[t][e]=t<e?r[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,r,n,o=this.QR,s=o.rows,a=o.columns,u=new i(s,a);for(r=a-1;0<=r;r--){for(t=0;t<s;t++)u[t][r]=0;for(u[r][r]=1,e=r;e<a;e++)if(0!==o[r][r]){for(n=0,t=r;t<s;t++)n+=o[t][r]*u[t][e];for(n=-n/o[r][r],t=r;t<s;t++)u[t][e]+=n*o[t][r]}}return u}},t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error(\"Matrix is not symmetric\");var e,r,o,s=t,a=s.rows,u=new i(a,a),c=!0;for(r=0;r<a;r++){var l=u[r],h=0;for(o=0;o<r;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(s[r][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=s[r][r]-h),u[r][r]=R(M(h,0)),o=r+1;o<a;o++)u[r][o]=0}if(!c)throw new Error(\"Matrix is not positive definite\");this.L=u}var i=r(12).Matrix;n.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,r=e.rows;if(t.rows!==r)throw new Error(\"Matrix dimensions do not match\");var n,o,s,a=t.columns,u=t.clone();for(s=0;s<r;s++)for(o=0;o<a;o++){for(n=0;n<s;n++)u[s][o]-=u[n][o]*e[s][n];u[s][o]/=e[s][s]}for(s=r-1;0<=s;s--)for(o=0;o<a;o++){for(n=s+1;n<r;n++)u[s][o]-=u[n][o]*e[n][s];u[s][o]/=e[s][s]}return u}},t.exports=n},function(t,e,r){\"use strict\";var n=r(100);class i extends n{constructor(t){super(t),this.activationFunction=function(t,e){this[t][e]=o(this[t][e])}}static load(t){if(\"Layer\"!==t.model)throw new RangeError(\"the current model is not a Layer model\");return new i(t)}}t.exports=i}])});","extractedComments":[]}