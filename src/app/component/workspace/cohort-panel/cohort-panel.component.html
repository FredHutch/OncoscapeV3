<div class='panel'>
  <div>
    <a href='#' class='modalClose' (click)='closeClick()'>
    </a>
    <h1 class='panel-header'>Cohorts</h1>
    <h2 class='panel-header-desc'>Create, manage and apply custom cohorts to your visualizations </h2>
  </div>
  <!-- <a href='https://www.youtube.com/embed/XQu8TTBmGhA' target='_blank'>
                <i class='small material-icons modalWatchVideoIcon'>ondemand_video</i>Watch Tutorial</a> -->

  <!-- My Cohorts -->
  <div fxLayout.xs='column'>
    <div fxFlex.sm='1 1 30%' fxFlex.md='1 1 20%' fxFlex.lg='1 1 25%' fxFlex.xl='1 1 20%'>
      <h2 class='panel-column-title'>My Cohorts</h2>
      <div *ngFor='let myCohort of cohorts'>
        <div class='cohort-myRow' (click)='deleteClick(myCohort)'>
          <i class='material-icons md-18 cohort-myRow-delete'>remove_circle_outline</i>
          <span>{{myCohort.n}}</span>
        </div>
      </div>
    </div>
    <!-- Create Cohorts -->
    <div fxFlex.sm='1 1 70%' fxFlex.md='1 1 80%' fxFlex.lg='1 1 75%' fxFlex.xl='1 1 80%'>
      <h2 class='panel-column-title'>Build A Cohort</h2>
      <div class='cohort-field '>
        <label for='cohortName'>Name</label>
        <mat-form-field class='example-full-width'>
          <input matInput id='cohortName' type='text' [(ngModel)]='activeCohort.n'>
        </mat-form-field>
      </div>
      <div class=' cohort-field' [class.cohort-field-or]='condition.condition==="or"' *ngFor='let condition of activeCohort.conditions'>
        <label>{{condition.condition}}</label>
        <mat-form-field>
          <mat-select placeholder="" style="margin-top: 10px;" [(value)]='condition.field'>
            <mat-option *ngFor="let option of fields" [value]="option">
              {{option.name}}
            </mat-option>
          </mat-select>
        </mat-form-field>



        <!-- old -->
        <!-- <select class='cohort-field-dropdown browser-default' [(ngModel)]='condition.field' materialize='material_select'>
          <option *ngFor='let option of fields' [ngValue]='option'>{{option.name}}</option>
        </select> -->

        <!-- new -->
        <div *ngIf='condition.field.type==="category"'>
          <mat-form-field>
            <mat-select [(value)]='condition.value'>
              <mat-option *ngFor="let option of condition.field.options" [value]="option.value">
                {{option.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- old -->
        <!-- <select *ngIf='condition.field.type==="category"' class='cohort-field-dropdown browser-default' [(ngModel)]='condition.value'
          materialize='material_select'>
          <option *ngFor='let option of condition.field.options' [ngValue]='option.value'>{{option.name}}</option>
        </select> -->

        <!-- new -->
        <span *ngIf='condition.field.type==="number"' class='cohort-minMax'>
          <mat-form-field>
            <input matInput type='number' [(value)]='condition.min' placeholder='Min' style='margin-bottom:5px;border-color:#EEE;width:65px;padding-left: 6px;'>
          </mat-form-field>
          <mat-form-field>
            <input matInput type='number' [(value)]='condition.max' placeholder='Max' style='margin-bottom:5px;border-color:#EEE;width:65px;padding-left: 6px;'>
          </mat-form-field>
        </span>

        <!-- <mat-form-field>
          <span *ngIf='condition.field.type==="number"' class='cohort-minMax'>
            <input matInput type='number' [(ngModel)]='condition.min' placeholder='Min' style='margin-bottom:5px;border-color:#EEE;width:65px;padding-left: 6px;'>
            <input matInput type='number' [(ngModel)]='condition.max' placeholder='Max' style='margin-bottom:5px;border-color:#EEE;width:65px;padding-left: 6px;'>
          </span>
        </mat-form-field> -->

        <div class='cohort-field-buttons'>
          <a class='os-link' href='#' (click)='fieldAnd(condition)'>And</a> |
          <a class='os-link' href='#' (click)='fieldOr(condition)'>Or</a>
          <span *ngIf='condition.condition !== "where"'> |
            <a href='#' (click)='fieldDel(condition)'>Remove</a>
          </span>
        </div>
      </div>
      <!-- <div class='button'> -->
      <button class='button' (click)='saveClick()' mat-raised-button>Save</button>
      <!-- <a class='cohort-save' href='#' (click)='saveClick()'>Save</a> -->
      <!-- </div> -->
    </div>

  </div>
</div>
