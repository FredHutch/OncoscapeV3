<form [formGroup]='form' novalidate>
    <div class='form-group'>
        <label class='center-block'>
            <span class='form-label'>Align By</span>
            <select formControlName='align' materialize='material_select'>
                <optgroup *ngFor='let group of eventGroups' label='{{group.label}}'>
                    <option *ngFor='let evt of group.events' [ngValue]='evt.label'>{{evt.label}}</option>
                </optgroup>
            </select>
        </label>
    </div>
    <div class='form-group'>
        <label class='center-block'>
            <span class='form-label'>Sort By</span>
            <select formControlName='sort' [compareWith]='byLabel' materialize='material_select'>
                <optgroup *ngFor='let group of sortOptions' label='{{group.label}}'>
                    <option *ngFor='let item of group.items' [ngValue]='item'>{{item.label}}</option>
                </optgroup>
            </select>
        </label>
    </div>
    <div class='form-group'>
        <label class='center-block'>
            <span class='form-label'>Group By</span>
            <select formControlName='group' [compareWith]='byLabel' materialize='material_select'>
                <optgroup *ngFor='let group of groupOptions' label='{{group.label}}'>
                    <option *ngFor='let item of group.items' [ngValue]='item'>{{item.label}}</option>
                </optgroup>
            </select>
        </label>
    </div>
    <div class='form-group'>
        <label class='center-block'>
            <span class='form-label'>Heat Map</span>
            <select formControlName='attrs' multiple='true' materialize='material_select'>
                <option *ngFor='let pa of this.patientAttributes' [ngValue]='pa.label'>{{pa.label}}</option>
            </select>
        </label>
    </div>
    <div formArrayName='bars'>
        <div *ngFor='let bar of ctrls; let i=index'>
            <div [formGroupName]='i'>
                <span class='form-label' style='
              text-align:left;width:100%;font-weight:700;padding:10px 0px 0px 0px;font-size:.9rem;'>
                    {{ctrls[i].get('label').value}} Events</span>
                <div class='form-group'>
                    <label class='center-block'>
                        <span class='form-label'>Visualize</span>
                        <select materialize='material_select' formControlName='style'>
                            <option *ngFor='let style of styleOptions' [ngValue]='style'>{{style}}</option>
                        </select>
                    </label>
                </div>
                <div class='form-group'>
                    <label class='center-block'>
                        <span class='form-label'>Visible</span>
                        <select materialize='material_select' formControlName='events' multiple>
                            <option *ngFor='let item of eventTypes[ctrls[i].get("label").value]' [ngValue]='item.subtype'>{{item.subtype}}</option>
                        </select>
                    </label>
                </div>
            </div>
        </div>
    </div>
</form>
<!--
      <div>
        <span class='form-label' style='text-align:left;width:100%;font-weight:700;padding:10px 0px 0px 0px;font-size:.9rem;'>
        Visible Day Range
        </span>
        <div style='padding:0px 6px;'>
          <nouislider [connect]='true' [min]='0' [max]='100' [step]='1' [(ngModel)]='this.rv'
            (change)='rangeChange()'></nouislider>
        </div>
      </div>
      -->