!function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)t.d(r,i,function(e){return n[e]}.bind(null,i));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=2)}([function(n,e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(n){"object"==typeof window&&(t=window)}n.exports=t},function(n,e){var t,r,i=n.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(n){if(t===setTimeout)return setTimeout(n,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(n,0);try{return t(n,0)}catch(e){try{return t.call(null,n,0)}catch(e){return t.call(this,n,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(n){t=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(n){r=a}}();var s,c=[],f=!1,l=-1;function h(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!f){var n=u(h);f=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,f=!1,function(n){if(r===clearTimeout)return clearTimeout(n);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(n);try{r(n)}catch(e){try{return r.call(null,n)}catch(e){return r.call(this,n)}}}(n)}}function p(n,e){this.fun=n,this.array=e}function v(){}i.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];c.push(new p(n,e)),1!==c.length||f||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(n){return[]},i.binding=function(n){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(n){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t(3),i=t(6),o=t(7),a=t(8),u={1:"Missense",2:"Silent",4:"Frame_Shift_Del",8:"Splice_Site",16:"Nonsense_Mutation",32:"Frame_Shift_Ins",64:"RNA",128:"In_Frame_Del",256:"In_Frame_Ins",512:"Nonstop_Mutation",1024:"Translation_Start_Site",2048:"De_novo_Start_OutOfFrame",4096:"De_novo_Start_InFrame",8192:"Intron",16384:"3'UTR",32768:"IGR",65536:"5'UTR",131072:"Targeted_Region",262144:"Read-through",524288:"5'Flank",1048576:"3'Flank",2097152:"Splice_Site_SNP",4194304:"Splice_Site_Del",8388608:"Splice_Site_Ins",16777216:"Indel",33554432:"Other"},s="https://oncoscape.v3.sttrcancer.org/data/tcga/",c=function(n){if(""==n)return l();var e=new Headers;return e.append("Content-Type","application/json"),e.append("Accept-Encoding","gzip"),e.append("zager",n),{method:"GET",headers:e,mode:"cors",cache:"default"}},f=null,l=function(){if(!f){var n=new Headers;n.append("Content-Type","application/json"),n.append("Accept-Encoding","gzip"),f={method:"GET",headers:n,mode:"cors",cache:"default"}}return f},h=function(n){new Date;var e=self,t=JSON.stringify({cmd:"msg",msg:n});e.postMessage(t)},d=function(n){new Date,self,JSON.stringify({cmd:"log",msg:n})},p=function(n,e,t,r,a,u,f){return void 0===r&&(r=!1),i.AccessS3.fetchSupportingPresigned(n,s+t+".gz",c(a),r,u,null,f).then(function(n){return h("Loading Events"),n.json()}).then(function(n){h("Events Parsed");var t=null;try{t=Object.keys(n.map).reduce(function(e,t){return e.push({type:n.map[t],subtype:t}),e},[])}catch(n){console.error("In loadevents, response reduce error is..."),console.dir(n)}var r=n.data.map(function(n){return Object.assign({p:n[0].toLowerCase(),start:n[2],end:n[3],data:n[4]},t[n[1]])});h("Processing Events");var i=[{visEnum:o.VisualizationEnum.TIMELINES,settings:JSON.stringify(n.barsConfig)}];return new Promise(function(n,t){n([{tbl:e,data:r,visSettings:i}])})})},v=function(n,e,t,r,o,a,u){void 0===r&&(r=!1),h("Loading Subjects #00001 ..."),h("loadPatient, grantee=["+a+"]");var f=null;try{f=i.AccessS3.fetchSupportingPresigned(n,s+t+".gz",c(o),r,a,self,u).then(function(n){return h("Subjects Loaded"),n.json()}).then(function(n){h("Parsing Subjects");var e=Object.keys(n.fields).map(function(e,t){return{ctype:2,key:e.toLowerCase(),label:e.replace(/_/gi," "),tbl:"patient",type:Array.isArray(n.fields[e])?"STRING":"NUMBER",values:n.fields[e]}}),t=n.ids.map(function(t,r){return e.reduce(function(e,t,i){var o=n.values[r][i];return e[t.key.toLowerCase()]="NUMBER"===t.type?o:t.values[o],e},{p:t.toLowerCase()})});return h("Processing Clinical"),new Promise(function(n,e){n([{tbl:"patient",data:t}])})}).catch(function(n){h("Error in Loading Subjects..."),h(JSON.stringify(n)),d("Caught error in loadPatient : "+JSON.stringify(n))})}catch(n){h("Exception in loadPatient in loader. Exception...."),h(JSON.stringify(n))}return f},m=function(n,e,t,r,o,a,u){void 0===r&&(r=!1),h("Loading Molecular Matrix");return i.AccessS3.fetchSupportingPresigned(n,s+t+".gz",c(o),r,a,null,u).then(function(n){return h("Molecular Matrix Loaded"),n.json()}).then(function(n){h("Parsing Molecular Matrix");var t=n.ids.map(function(n,e){return{i:e,s:n.toLowerCase()}});void 0===n.values&&(n.values=n.data);var r=n.values.map(function(e,t){var r=e.reduce(function(n,e){return n.min=Math.min(n.min,e),n.max=Math.max(n.max,e),n.mean+=e,n},{m:n.genes[t],d:e,min:1/0,max:-1/0,mean:0});return r.mean/=e.length,r});return h("Processing Molecular Matrix"),new Promise(function(n,i){n([{tbl:e,data:r},{tbl:e+"Map",data:t}])})})},g=function(n,e,t,r,o,a,u){return void 0===r&&(r=!1),h("Loading Gistic Scores"),i.AccessS3.fetchSupportingPresigned(n,s+t+".gz",c(o),r,a,null,u).then(function(n){return h("Gistic Loaded"),n.json()}).then(function(n){h("Parsing Gistic Scores");var t=n.ids.map(function(n,e){return{i:e,s:n.toLowerCase()}}),r=n.values.map(function(e,t){var r=e.reduce(function(n,e){return n.min=Math.min(n.min,e),n.max=Math.max(n.max,e),n.mean+=e,n},{m:n.genes[t],d:e,min:1/0,max:-1/0,mean:0});return r.mean/=e.length,r});return h("Processing Gistic Scores"),new Promise(function(n,i){n([{tbl:e,data:r},{tbl:e+"Map",data:t}])})})},y=function(n,e,t,r,o,a,u){return void 0===r&&(r=!1),h("Loading Patient Sample Maps"),i.AccessS3.fetchSupportingPresigned(n,s+t+".gz",c(o),r,a,null,u).then(function(n){return h("Parsing Patient Sample Maps"),n.json()}).then(function(n){h("Processing Patient Sample Maps");var e=Object.keys(n).reduce(function(e,t){return n[t].forEach(function(n){e.push({p:t.toLowerCase(),s:n.toLowerCase()})}),e},[]);return new Promise(function(n,t){n([{tbl:"patientSampleMap",data:e}])})})},_=function(n,e,t,r,o,a,f){return void 0===r&&(r=!1),h("Loading Mutation Data"),i.AccessS3.fetchSupportingPresigned(n,s+t+".gz",c(o),r,a,null,f).then(function(n){return h("Parsing Mutation Data"),n.json()}).then(function(n){h("Processing Mutation Data");var e=n.ids,t=n.genes,r=u,i=Object.keys(r),o=n.values.map(function(n){return n.split("-").map(function(n){return parseInt(n,10)}).map(function(n,r){return 0===r?t[n]:1===r?e[n]:n})}).reduce(function(n,e){return n.push.apply(n,i.filter(function(n){return parseInt(n,10)&e[2]}).map(function(n){return{m:e[0],s:e[1].toLowerCase(),t:r[n]}})),n},[]);try{var a={};o.forEach(function(n){a.hasOwnProperty(n.s)?a[n.s]=a[n.s]+1:a[n.s]=1});var s=[];for(var c in a)s.push({name:c.replace('"',""),value:a[c]})}catch(n){d("Error = "+n.name+",   "+n.message)}return new Promise(function(n,e){n([{tbl:"mut",data:o}])})})},S=function(n,e,t,r,o,a,u){return void 0===r&&(r=!1),h("Loading RNA Data"),i.AccessS3.fetchSupportingPresigned(n,s+t+".gz",c(o),r,a,null,u).then(function(n){return h("Parsing Rna Data"),n.json()}).then(function(n){h("Processing RNA Data");var t=n.ids.map(function(n,e){return{i:e,s:n.toLowerCase()}}),r=n.values.map(function(e,t){var r=e.reduce(function(n,e){return n.min=Math.min(n.min,e),n.max=Math.max(n.max,e),n.mean+=e,n},{m:n.genes[t],d:e,min:1/0,max:-1/0,mean:0});return r.mean/=e.length,r});return new Promise(function(n,i){n([{tbl:e,data:r},{tbl:e+"Map",data:t}])})})},E=function(n,e,t,r,o,a){switch(h("in processV31, file=["+e.file+"] grantee=["+JSON.stringify(o)+"] owner=["+JSON.stringify(a)+"]"),e.dataType.toLowerCase().trim()){case"patient":return v(n,e.name,e.file,t,r,o,a);case"sample":return function(n,e,t,r,o,a,u){return void 0===r&&(r=!1),h("Loading Samples"),i.AccessS3.fetchSupportingPresigned(n,s+t+".gz",c(o),r,a,null,u).then(function(n){return h("Samples Loaded"),n.json()}).then(function(n){h("Parsing Samples");var e=Object.keys(n.fields).map(function(e,t){return{ctype:1,key:e.toLowerCase(),label:e.replace(/_/gi," "),tbl:"sample",type:Array.isArray(n.fields[e])?"STRING":"NUMBER",values:n.fields[e]}}),t=n.ids.map(function(t,r){return e.reduce(function(e,t,i){var o=n.values[r][i];return e[t.key.toLowerCase().replace(/\s/gi,"_")]="NUMBER"===t.type?o:t.values[o],e},{s:t.toLowerCase()})});return h("Processing Samples"),new Promise(function(n,e){n([{tbl:"sample",data:t}])})})}(n,e.name,e.file,t,r,o,a);case"matrix":return m(n,e.name,e.file,t,r,o,a);case"events":return p(n,e.name,e.file,t,r,o,a);case"mut":return function(n,e,t,r,o,a,u){return void 0===r&&(r=!1),h("Loading Mutation Data"),i.AccessS3.fetchSupportingPresigned(n,s+t+".gz",c(o),r,a,null,u).then(function(n){return h("Parsing Mutation Data"),n.json()}).then(function(n){h("Processing Mutation Data");var e=Object.keys(n.muts).reduce(function(e,t){return e[n.muts[t]]=t,e},{}),t=n.ids,r=n.genes,i=e,o=Object.keys(i),a=n.values.map(function(n){return n.split("-").map(function(n){return parseInt(n,10)}).map(function(n,e){return 0===e?r[n]:1===e?t[n]:n})}).reduce(function(n,e){return n.push.apply(n,o.filter(function(n){return parseInt(n,10)&e[2]}).map(function(n){return{m:e[0],s:e[1].toLowerCase(),t:i[n]}})),n},[]);return new Promise(function(n,e){n([{tbl:"mut",data:a,mType:i}])})})}(n,e.name,e.file,t,r,o,a);case"psmap":return y(n,e.name,e.file,t,r,o,a);default:return new Promise(function(n,e){n()})}},b=function(n,e){return e[0].tbl,new Promise(function(n,e){n(!0)})};onmessage=function(n){var e=self;switch(n.data.cmd){case"load":var t=new r.default("notitia-"+n.data.uid);s=n.data.baseUrl;var i=n.data.token;t.open().then(function(r){if(n.data.hasOwnProperty("version"))if("3.1"===n.data.version)try{h("loader onmessage, e.data..."),h("e.Data:"+JSON.stringify(n.data)),h("loader e.Data written."),E(n.data.env,n.data.file,n.data.fromPrivate,i,n.data.grantee,n.data.owner).then(function(r){h("processV31 success, got values.");var i=r;i.map(function(n){return{tbl:n.tbl,numItems:n.data.length}});Promise.all(i.map(function(e){if(h("processV31 now doing table "+e.tbl),"sample"===e.tbl.toLowerCase().trim()||"patient"===e.tbl.toLowerCase().trim()){var r=e.data.map(function(n){return Object.keys(n).reduce(function(e,t){return e[t.trim().replace(/ /gi,"_")]=n[t],e},{})});return t.table(e.tbl).bulkAdd(r)}var o=[],a="m";e.tbl.endsWith("Map")&&(a="s");var u=null;e.mType&&"mut"===e.tbl.toLowerCase().trim()&&(u=e.mType);var s="matrix"==n.data.file.dataType,c=new Set;return e.data.map(function(n){s&&c.has(n[a])?(d("TBD: Compile notes on which keys have been seen before."),d("TEMPNOTE: Table "+e.tbl+", Have already seen key'"+n.m+"'.")):(o.push(n),s&&c.add(n[a]))}),t.table(e.tbl).bulkAdd(o).then(function(n){if(u)return t.table("miscMeta").add({type:"mutationTypes",data:u}).then(function(n){return b(0,i)})})})).catch(function(n){return d("#2 probably failed to bulkAdd.. "+a.inspect(n)+"."),n}).then(function(n){if(i[0].visSettings&&i[0].visSettings.length>0)return h("Saving related settings ... "),t.table("visSettings").bulkAdd(i[0].visSettings)}).then(function(n){h("Now Saving "+i[0].tbl),e.postMessage(JSON.stringify({cmd:"terminate"}))})})}catch(n){d("LOADER error e is...."),d("err: "+JSON.stringify(n))}else d("ERROR - Unknown version seen in Loader.onmessage: ["+JSON.stringify(n.data.version)+"].");else try{h("e.data is? ..."),h(JSON.stringify(n.data)),h("processResource needs to be called with real granteee"),(o=n.data.env,u=n.data.file,s=null,c=null,h("processResource grantee=["+s+"]"),u.name=u.name.replace(/ /gi,"").toLowerCase(),"clinical"===u.dataType||"patient"===u.dataType?v(o,u.name,u.file,!1,"",null,c):"psmap"===u.dataType?y(o,u.name,u.file,!1,"",null,c):"matrix"===u.dataType?m(o,u.name,u.file,!1,"",null,c):"gistic_threshold"===u.dataType?m(o,u.name,u.file,!1,"",null,c):"gistic"===u.dataType?g(o,u.name,u.file,!1,"",null,c):"mut"===u.dataType?_(o,u.name,u.file,!1,"",null,c):"rna"===u.dataType?S(o,u.name,u.file,!1,"",null,c):"events"===u.dataType?p(o,u.name,u.file,!1,"",null,c):null).then(function(n){var r=n;r.forEach(function(n){0===n.tbl.indexOf("matrix")&&(n.tbl=n.tbl.replace("matrix","").replace(/_/gi,""))}),Promise.all(r.map(function(n){return t.table(n.tbl).bulkAdd(n.data)})).then(function(n){return b(0,r)}).then(function(){h("Saving "+r[0].tbl),e.postMessage(JSON.stringify({cmd:"terminate"}))}).catch(function(n){d("Loader error after processResource = "+JSON.stringify(n)+".")})})}catch(n){d("Loader err2."),d("Loader err2 = "+JSON.stringify(n)+".")}var o,u,s,c})}}},function(n,e,t){"use strict";t.r(e),function(n,t){var r=Object.keys,i=Array.isArray,o="undefined"!=typeof self?self:"undefined"!=typeof window?window:n;function a(n,e){return"object"!=typeof e?n:(r(e).forEach(function(t){n[t]=e[t]}),n)}var u=Object.getPrototypeOf,s={}.hasOwnProperty;function c(n,e){return s.call(n,e)}function f(n,e){"function"==typeof e&&(e=e(u(n))),r(e).forEach(function(t){h(n,t,e[t])})}var l=Object.defineProperty;function h(n,e,t,r){l(n,e,a(t&&c(t,"get")&&"function"==typeof t.get?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},r))}function d(n){return{from:function(e){return n.prototype=Object.create(e.prototype),h(n.prototype,"constructor",n),{extend:f.bind(null,n.prototype)}}}}var p=Object.getOwnPropertyDescriptor;var v=[].slice;function m(n,e,t){return v.call(n,e,t)}function g(n,e){return e(n)}function y(n){if(!n)throw new Error("Assertion Failed")}function _(n){o.setImmediate?t(n):setTimeout(n,0)}function S(n,e){return n.reduce(function(n,t,r){var i=e(t,r);return i&&(n[i[0]]=i[1]),n},{})}function E(n,e){return function(){try{n.apply(this,arguments)}catch(n){e(n)}}}function b(n,e,t){try{n.apply(null,t)}catch(n){e&&e(n)}}function A(n,e){if(c(n,e))return n[e];if(!e)return n;if("string"!=typeof e){for(var t=[],r=0,i=e.length;r<i;++r){var o=A(n,e[r]);t.push(o)}return t}var a=e.indexOf(".");if(-1!==a){var u=n[e.substr(0,a)];return void 0===u?void 0:A(u,e.substr(a+1))}}function w(n,e,t){if(n&&void 0!==e&&!("isFrozen"in Object&&Object.isFrozen(n)))if("string"!=typeof e&&"length"in e){y("string"!=typeof t&&"length"in t);for(var r=0,i=e.length;r<i;++r)w(n,e[r],t[r])}else{var o=e.indexOf(".");if(-1!==o){var a=e.substr(0,o),u=e.substr(o+1);if(""===u)void 0===t?delete n[a]:n[a]=t;else{var s=n[a];s||(s=n[a]={}),w(s,u,t)}}else void 0===t?delete n[e]:n[e]=t}}function N(n){var e={};for(var t in n)c(n,t)&&(e[t]=n[t]);return e}var I=[].concat;function O(n){return I.apply([],n)}var T="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(O([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(e){return e+n+"Array"})}))).filter(function(n){return o[n]}).map(function(n){return o[n]});function P(n){if(!n||"object"!=typeof n)return n;var e;if(i(n)){e=[];for(var t=0,r=n.length;t<r;++t)e.push(P(n[t]))}else if(T.indexOf(n.constructor)>=0)e=n;else for(var o in e=n.constructor?Object.create(n.constructor.prototype):{},n)c(n,o)&&(e[o]=P(n[o]));return e}function D(n,e,t,i){return t=t||{},i=i||"",r(n).forEach(function(r){if(c(e,r)){var o=n[r],a=e[r];"object"==typeof o&&"object"==typeof a&&o&&a&&""+o.constructor==""+a.constructor?D(o,a,t,i+r+"."):o!==a&&(t[i+r]=e[r])}else t[i+r]=void 0}),r(e).forEach(function(r){c(n,r)||(t[i+r]=e[r])}),t}var R="undefined"!=typeof Symbol&&Symbol.iterator,C=R?function(n){var e;return null!=n&&(e=n[R])&&e.apply(n)}:function(){return null},M={};function x(n){var e,t,r,o;if(1===arguments.length){if(i(n))return n.slice();if(this===M&&"string"==typeof n)return[n];if(o=C(n)){for(t=[];!(r=o.next()).done;)t.push(r.value);return t}if(null==n)return[n];if("number"==typeof(e=n.length)){for(t=new Array(e);e--;)t[e]=n[e];return t}return[n]}for(e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return t}var k="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function L(n,e){k=n,j=e}var j=function(){return!0},F=!new Error("").stack;function G(){if(F)try{throw G.arguments,new Error}catch(n){return n}return new Error}function U(n,e){var t=n.stack;return t?(e=e||0,0===t.indexOf(n.name)&&(e+=(n.name+n.message).split("\n").length),t.split("\n").slice(e).filter(j).map(function(n){return"\n"+n}).join("")):""}var B=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],K=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(B),H={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function V(n,e){this._e=G(),this.name=n,this.message=e}function z(n,e,t,r){this._e=G(),this.failures=e,this.failedKeys=r,this.successCount=t}function q(n,e){this._e=G(),this.name="BulkError",this.failures=e,this.message=function(n,e){return n+". Errors: "+e.map(function(n){return n.toString()}).filter(function(n,e,t){return t.indexOf(n)===e}).join("\n")}(n,e)}d(V).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+U(this._e,2))}},toString:function(){return this.name+": "+this.message}}),d(z).from(V),d(q).from(V);var J=K.reduce(function(n,e){return n[e]=e+"Error",n},{}),W=V,Y=K.reduce(function(n,e){var t=e+"Error";function r(n,r){this._e=G(),this.name=t,n?"string"==typeof n?(this.message=n,this.inner=r||null):"object"==typeof n&&(this.message=n.name+" "+n.message,this.inner=n):(this.message=H[e]||t,this.inner=null)}return d(r).from(W),n[e]=r,n},{});Y.Syntax=SyntaxError,Y.Type=TypeError,Y.Range=RangeError;var Q=B.reduce(function(n,e){return n[e+"Error"]=Y[e],n},{});var Z=K.reduce(function(n,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(n[e+"Error"]=Y[e]),n},{});function $(){}function X(n){return n}function nn(n,e){return null==n||n===X?e:function(t){return e(n(t))}}function en(n,e){return function(){n.apply(this,arguments),e.apply(this,arguments)}}function tn(n,e){return n===$?e:function(){var t=n.apply(this,arguments);void 0!==t&&(arguments[0]=t);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?en(r,this.onsuccess):r),i&&(this.onerror=this.onerror?en(i,this.onerror):i),void 0!==o?o:t}}function rn(n,e){return n===$?e:function(){n.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?en(t,this.onsuccess):t),r&&(this.onerror=this.onerror?en(r,this.onerror):r)}}function on(n,e){return n===$?e:function(t){var r=n.apply(this,arguments);a(t,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var u=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?en(i,this.onsuccess):i),o&&(this.onerror=this.onerror?en(o,this.onerror):o),void 0===r?void 0===u?void 0:u:a(r,u)}}function an(n,e){return n===$?e:function(){return!1!==e.apply(this,arguments)&&n.apply(this,arguments)}}function un(n,e){return n===$?e:function(){var t=n.apply(this,arguments);if(t&&"function"==typeof t.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return t.then(function(){return e.apply(r,o)})}return e.apply(this,arguments)}}Z.ModifyError=z,Z.DexieError=V,Z.BulkError=q;var sn={},cn=100,fn=7,ln=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(e){var n=o.Promise;return n?[n.resolve(),n.prototype,n.resolve()]:[]}}(),hn=ln[0],dn=ln[1],pn=ln[2],vn=dn&&dn.then,mn=hn&&hn.constructor,gn=ln[3],yn=!!pn,_n=!1,Sn=pn?function(){pn.then(Bn)}:o.setImmediate?t.bind(null,Bn):o.MutationObserver?function(){var n=document.createElement("div");new MutationObserver(function(){Bn(),n=null}).observe(n,{attributes:!0}),n.setAttribute("i","1")}:function(){setTimeout(Bn,0)},En=function(n,e){Dn.push([n,e]),An&&(Sn(),An=!1)},bn=!0,An=!0,wn=[],Nn=[],In=null,On=X,Tn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:fe,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(n){try{fe(n[0],n[1])}catch(n){}})}},Pn=Tn,Dn=[],Rn=0,Cn=[];function Mn(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=$,this._lib=!1;var e=this._PSD=Pn;if(k&&(this._stackHolder=G(),this._prev=null,this._numPrev=0),"function"!=typeof n){if(n!==sn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ln(this,this._value))}this._state=null,this._value=null,++e.ref,function n(e,t){try{t(function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Kn();t&&"function"==typeof t.then?n(e,function(n,e){t instanceof Mn?t._then(n,e):t.then(n,e)}):(e._state=!0,e._value=t,jn(e)),r&&Hn()}},Ln.bind(null,e))}catch(n){Ln(e,n)}}(this,n)}var xn={get:function(){var n=Pn,e=Zn;function t(t,r){var i=this,o=!n.global&&(n!==Pn||e!==Zn);o&&ee();var a=new Mn(function(e,a){Fn(i,new kn(ue(t,n,o),ue(r,n,o),e,a,n))});return k&&Un(a,this),a}return t.prototype=sn,t},set:function(n){h(this,"then",n&&n.prototype===sn?xn:{get:function(){return n},set:xn.set})}};function kn(n,e,t,r,i){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof e?e:null,this.resolve=t,this.reject=r,this.psd=i}function Ln(n,e){if(Nn.push(e),null===n._state){var t=n._lib&&Kn();e=On(e),n._state=!1,n._value=e,k&&null!==e&&"object"==typeof e&&!e._promise&&b(function(){var t=function n(e,t){var r;return p(e,t)||(r=u(e))&&n(r,t)}(e,"stack");e._promise=n,h(e,"stack",{get:function(){return _n?t&&(t.get?t.get.apply(e):t.value):n.stack}})}),function(n){wn.some(function(e){return e._value===n._value})||wn.push(n)}(n),jn(n),t&&Hn()}}function jn(n){var e=n._listeners;n._listeners=[];for(var t=0,r=e.length;t<r;++t)Fn(n,e[t]);var i=n._PSD;--i.ref||i.finalize(),0===Rn&&(++Rn,En(function(){0==--Rn&&Vn()},[]))}function Fn(n,e){if(null!==n._state){var t=n._state?e.onFulfilled:e.onRejected;if(null===t)return(n._state?e.resolve:e.reject)(n._value);++e.psd.ref,++Rn,En(Gn,[t,n,e])}else n._listeners.push(e)}function Gn(n,e,t){try{In=e;var r,i=e._value;e._state?r=n(i):(Nn.length&&(Nn=[]),r=n(i),-1===Nn.indexOf(i)&&function(n){var e=wn.length;for(;e;)if(wn[--e]._value===n._value)return void wn.splice(e,1)}(e)),t.resolve(r)}catch(n){t.reject(n)}finally{In=null,0==--Rn&&Vn(),--t.psd.ref||t.psd.finalize()}}function Un(n,e){var t=e?e._numPrev+1:0;t<cn&&(n._prev=e,n._numPrev=t)}function Bn(){Kn()&&Hn()}function Kn(){var n=bn;return bn=!1,An=!1,n}function Hn(){var n,e,t;do{for(;Dn.length>0;)for(n=Dn,Dn=[],t=n.length,e=0;e<t;++e){var r=n[e];r[0].apply(null,r[1])}}while(Dn.length>0);bn=!0,An=!0}function Vn(){var n=wn;wn=[],n.forEach(function(n){n._PSD.onunhandled.call(null,n._value,n)});for(var e=Cn.slice(0),t=e.length;t;)e[--t]()}function zn(n){return new Mn(sn,!1,n)}function qn(n,e){var t=Pn;return function(){var r=Kn(),i=Pn;try{return ie(t,!0),n.apply(this,arguments)}catch(n){e&&e(n)}finally{ie(i,!1),r&&Hn()}}}f(Mn.prototype,{then:xn,_then:function(n,e){Fn(this,new kn(null,null,n,e,Pn))},catch:function(n){if(1===arguments.length)return this.then(null,n);var e=arguments[0],t=arguments[1];return"function"==typeof e?this.then(null,function(n){return n instanceof e?t(n):zn(n)}):this.then(null,function(n){return n&&n.name===e?t(n):zn(n)})},finally:function(n){return this.then(function(e){return n(),e},function(e){return n(),zn(e)})},stack:{get:function(){if(this._stack)return this._stack;try{_n=!0;var n=function n(e,t,r){if(t.length===r)return t;var i="";if(!1===e._state){var o,a,u=e._value;null!=u?(o=u.name||"Error",a=u.message||u,i=U(u,0)):(o=u,a=""),t.push(o+(a?": "+a:"")+i)}k&&((i=U(e._stackHolder,2))&&-1===t.indexOf(i)&&t.push(i),e._prev&&n(e._prev,t,r));return t}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=n),n}finally{_n=!1}}},timeout:function(n,e){var t=this;return n<1/0?new Mn(function(r,i){var o=setTimeout(function(){return i(new Y.Timeout(e))},n);t.then(r,i).finally(clearTimeout.bind(null,o))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(Mn.prototype,Symbol.toStringTag,"Promise"),Tn.env=oe(),f(Mn,{all:function(){var n=x.apply(null,arguments).map(te);return new Mn(function(e,t){0===n.length&&e([]);var r=n.length;n.forEach(function(i,o){return Mn.resolve(i).then(function(t){n[o]=t,--r||e(n)},t)})})},resolve:function(n){if(n instanceof Mn)return n;if(n&&"function"==typeof n.then)return new Mn(function(e,t){n.then(e,t)});var e=new Mn(sn,!0,n);return Un(e,In),e},reject:zn,race:function(){var n=x.apply(null,arguments).map(te);return new Mn(function(e,t){n.map(function(n){return Mn.resolve(n).then(e,t)})})},PSD:{get:function(){return Pn},set:function(n){return Pn=n}},newPSD:Xn,usePSD:ae,scheduler:{get:function(){return En},set:function(n){En=n}},rejectionMapper:{get:function(){return On},set:function(n){On=n}},follow:function(n,e){return new Mn(function(t,r){return Xn(function(e,t){var r=Pn;r.unhandleds=[],r.onunhandled=t,r.finalize=en(function(){var n=this;!function(n){Cn.push(function e(){n();Cn.splice(Cn.indexOf(e),1)}),++Rn,En(function(){0==--Rn&&Vn()},[])}(function(){0===n.unhandleds.length?e():t(n.unhandleds[0])})},r.finalize),n()},e,t,r)})}});var Jn={awaits:0,echoes:0,id:0},Wn=0,Yn=[],Qn=0,Zn=0,$n=0;function Xn(n,e,t,r){var i=Pn,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++$n;var u=Tn.env;o.env=yn?{Promise:Mn,PromiseProp:{value:Mn,configurable:!0,writable:!0},all:Mn.all,race:Mn.race,resolve:Mn.resolve,reject:Mn.reject,nthen:se(u.nthen,o),gthen:se(u.gthen,o)}:{},e&&a(o,e),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=ae(o,n,t,r);return 0===o.ref&&o.finalize(),s}function ne(){return Jn.id||(Jn.id=++Wn),++Jn.awaits,Jn.echoes+=fn,Jn.id}function ee(n){!Jn.awaits||n&&n!==Jn.id||(0==--Jn.awaits&&(Jn.id=0),Jn.echoes=Jn.awaits*fn)}function te(n){return Jn.echoes&&n&&n.constructor===mn?(ne(),n.then(function(n){return ee(),n},function(n){return ee(),le(n)})):n}function re(){var n=Yn[Yn.length-1];Yn.pop(),ie(n,!1)}function ie(n,e){var t,r=Pn;if((e?!Jn.echoes||Qn++&&n===Pn:!Qn||--Qn&&n===Pn)||(t=e?function(n){++Zn,Jn.echoes&&0!=--Jn.echoes||(Jn.echoes=Jn.id=0),Yn.push(Pn),ie(n,!0)}.bind(null,n):re,vn.call(hn,t)),n!==Pn&&(Pn=n,r===Tn&&(Tn.env=oe()),yn)){var i=Tn.env.Promise,a=n.env;dn.then=a.nthen,i.prototype.then=a.gthen,(r.global||n.global)&&(Object.defineProperty(o,"Promise",a.PromiseProp),i.all=a.all,i.race=a.race,i.resolve=a.resolve,i.reject=a.reject)}}function oe(){var n=o.Promise;return yn?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:n.all,race:n.race,resolve:n.resolve,reject:n.reject,nthen:dn.then,gthen:n.prototype.then}:{}}function ae(n,e,t,r,i){var o=Pn;try{return ie(n,!0),e(t,r,i)}finally{ie(o,!1)}}function ue(n,e,t){return"function"!=typeof n?n:function(){var r=Pn;t&&ne(),ie(e,!0);try{return n.apply(this,arguments)}finally{ie(r,!1)}}}function se(n,e){return function(t,r){return n.call(this,ue(t,e,!1),ue(r,e,!1))}}var ce="unhandledrejection";function fe(n,e){var t;try{t=e.onuncatched(n)}catch(n){}if(!1!==t)try{var r,i={promise:e,reason:n};if(o.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(ce,!0,!0),a(r,i)):o.CustomEvent&&a(r=new CustomEvent(ce,{detail:i}),i),r&&o.dispatchEvent&&(dispatchEvent(r),!o.PromiseRejectionEvent&&o.onunhandledrejection))try{o.onunhandledrejection(r)}catch(n){}r.defaultPrevented||console.warn("Unhandled rejection: "+(n.stack||n))}catch(n){}}var le=Mn.reject;function he(n){var e={},t=function(t,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return e[t].subscribe.apply(null,o),n}if("string"==typeof t)return e[t]};t.addEventType=u;for(var o=1,a=arguments.length;o<a;++o)u(arguments[o]);return t;function u(n,o,a){if("object"!=typeof n){var s;o||(o=an),a||(a=$);var c={subscribers:[],fire:a,subscribe:function(n){-1===c.subscribers.indexOf(n)&&(c.subscribers.push(n),c.fire=o(c.fire,n))},unsubscribe:function(n){c.subscribers=c.subscribers.filter(function(e){return e!==n}),c.fire=c.subscribers.reduce(o,a)}};return e[n]=t[n]=c,c}r(s=n).forEach(function(n){var e=s[n];if(i(e))u(n,s[n][0],s[n][1]);else{if("asap"!==e)throw new Y.InvalidArgument("Invalid event config");var t=u(n,X,function(){for(var n=arguments.length,e=new Array(n);n--;)e[n]=arguments[n];t.subscribers.forEach(function(n){_(function(){n.apply(null,e)})})})}})}}var de,pe=String.fromCharCode(65535),ve=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(n){return pe}}(),me=-1/0,ge="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ye="String expected.",_e=[],Se="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ee=Se,be=Se,Ae=function(n){return!/(dexie\.js|dexie\.min\.js)/.test(n)};function we(n,e){var t,u,s,l,d,p=we.dependencies,v=a({addons:we.addons,autoOpen:!0,indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},e),_=v.addons,I=v.autoOpen,T=v.indexedDB,R=v.IDBKeyRange,C=this._dbSchema={},L=[],j=[],F={},B=null,K=null,H=!1,V=null,J=!1,W="readwrite",Q=this,Z=new Mn(function(n){t=n}),en=new Mn(function(n,e){u=e}),an=!0,sn=!!ke(T);function cn(n){this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function fn(n,e,t){var i=Q._createTransaction(W,j,C);i.create(e),i._completion.catch(t);var o=i._reject.bind(i);Xn(function(){Pn.trans=i,0===n?(r(C).forEach(function(n){ln(e,n,C[n].primKey,C[n].indexes)}),Mn.follow(function(){return Q.on.populate.fire(i)}).catch(o)):function(n,e,t){var i=[],o=L.filter(function(e){return e._cfg.version===n})[0];if(!o)throw new Y.Upgrade("Dexie specification of currently installed DB version is missing");C=Q._dbSchema=o._cfg.dbschema;var a=!1;return L.filter(function(e){return e._cfg.version>n}).forEach(function(n){i.push(function(){var r=C,i=n._cfg.dbschema;xn(r,t),xn(i,t),C=Q._dbSchema=i;var o=function(n,e){var t={del:[],add:[],change:[]};for(var r in n)e[r]||t.del.push(r);for(r in e){var i=n[r],o=e[r];if(i){var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)a.recreate=!0,t.change.push(a);else{var u=i.idxByName,s=o.idxByName;for(var c in u)s[c]||a.del.push(c);for(c in s){var f=u[c],l=s[c];f?f.src!==l.src&&a.change.push(l):a.add.push(l)}(a.del.length>0||a.add.length>0||a.change.length>0)&&t.change.push(a)}}else t.add.push([r,o])}return t}(r,i);if(o.add.forEach(function(n){ln(t,n[0],n[1].primKey,n[1].indexes)}),o.change.forEach(function(n){if(n.recreate)throw new Y.Upgrade("Not yet support for changing primary key");var e=t.objectStore(n.name);n.add.forEach(function(n){hn(e,n)}),n.change.forEach(function(n){e.deleteIndex(n.name),hn(e,n)}),n.del.forEach(function(n){e.deleteIndex(n)})}),n._cfg.contentUpgrade)return a=!0,Mn.follow(function(){n._cfg.contentUpgrade(e)})}),i.push(function(e){a&&Ee||function(n,e){for(var t=0;t<e.db.objectStoreNames.length;++t){var r=e.db.objectStoreNames[t];null==n[r]&&e.db.deleteObjectStore(r)}}(n._cfg.dbschema,e)})}),function n(){return i.length?Mn.resolve(i.shift()(e.idbtrans)).then(n):Mn.resolve()}().then(function(){!function(n,e){r(n).forEach(function(t){e.db.objectStoreNames.contains(t)||ln(e,t,n[t].primKey,n[t].indexes)})}(C,t)})}(n,i,e).catch(o)})}function ln(n,e,t,r){var i=n.db.createObjectStore(e,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return r.forEach(function(n){hn(i,n)}),i}function hn(n,e){n.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function dn(n,e,t){this.name=n,this.schema=e,this._tx=t,this.hook=F[n]?F[n].hook:he(null,{creating:[tn,$],reading:[nn,X],updating:[on,$],deleting:[rn,$]})}function pn(n,e,t){return(t?Pe:Oe)(function(t){n.push(t),e&&e()})}function vn(n,e,t,r,i){return new Mn(function(o,a){var u=t.length,s=u-1;if(0===u)return o();if(r){var c,f=Pe(a),l=Ie(null);b(function(){for(var r=0;r<u;++r){c={onsuccess:null,onerror:null};var a=t[r];i.call(c,a[0],a[1],e);var h=n.delete(a[0]);h._hookCtx=c,h.onerror=f,h.onsuccess=r===s?Ie(o):l}},function(n){throw c.onerror&&c.onerror(n),n})}else for(var h=0;h<u;++h){var d=n.delete(t[h]);d.onerror=Oe(a),h===s&&(d.onsuccess=qn(function(){return o()}))}})}function yn(n,e,t,r){var i=this;this.db=Q,this.mode=n,this.storeNames=e,this.idbtrans=null,this.on=he(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Mn(function(n,e){i._resolve=n,i._reject=e}),this._completion.then(function(){i.active=!1,i.on.complete.fire()},function(n){var e=i.active;return i.active=!1,i.on.error.fire(n),i.parent?i.parent._reject(n):e&&i.idbtrans&&i.idbtrans.abort(),le(n)})}function _n(n,e,t){this._ctx={table:n,index:":id"===e?null:e,or:t}}function Sn(n,e){var t=null,r=null;if(e)try{t=e()}catch(n){r=n}var i=n._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:t,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function En(n,e){return!(n.filter||n.algorithm||n.or)&&(e?n.justLimit:!n.replayFilter)}function bn(n,e){return n._cfg.version-e._cfg.version}function An(n,e,t){e.forEach(function(e){var r=t[e];n.forEach(function(n){e in n||(n===yn.prototype||n instanceof yn?h(n,e,{get:function(){return this.table(e)}}):n[e]=new dn(e,r))})})}function wn(n,e,t,r,i,o){var a=qn(o?function(n,e,r){return t(o(n),e,r)}:t,i);n.onerror||(n.onerror=Oe(i)),n.onsuccess=E(e?function(){var t=n.result;if(t){var o=function(){t.continue()};e(t,function(n){o=n},r,i)&&a(t.value,t,function(n){o=n}),o()}else r()}:function(){var e=n.result;if(e){var t=function(){e.continue()};a(e.value,e,function(n){t=n}),t()}else r()},i)}function Nn(n,e){return T.cmp(n,e)}function In(n,e){return Nn(n,e)>0?n:e}function On(n,e){return T.cmp(n,e)}function Tn(n,e){return T.cmp(e,n)}function Dn(n,e){return n<e?-1:n===e?0:1}function Rn(n,e){return n>e?-1:n===e?0:1}function Cn(n,e){return n?e?function(){return n.apply(this,arguments)&&e.apply(this,arguments)}:n:e}function xn(n,e){for(var t=e.db.objectStoreNames,r=0;r<t.length;++r){var i=t[r],a=e.objectStore(i);s="getAll"in a;for(var u=0;u<a.indexNames.length;++u){var c=a.indexNames[u],f=a.index(c).keyPath,l="string"==typeof f?f:"["+m(f).join("+")+"]";if(n[i]){var h=n[i].idxByName[l];h&&(h.name=c)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s=!1)}function kn(n){Q.on("blocked").fire(n),_e.filter(function(n){return n.name===Q.name&&n!==Q&&!n._vcFired}).map(function(e){return e.on("versionchange").fire(n)})}this.version=function(n){if(B||H)throw new Y.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var e=L.filter(function(e){return e._cfg.version===n})[0];return e||(e=new cn(n),L.push(e),L.sort(bn),an=!1,e)},a(cn.prototype,{stores:function(n){this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,n):n;var e={};L.forEach(function(n){a(e,n._cfg.storesSource)});var t=this._cfg.dbschema={};return this._parseStoresSpec(e,t),C=Q._dbSchema=t,[F,Q,yn.prototype].forEach(function(n){for(var e in n)n[e]instanceof dn&&delete n[e]}),An([F,Q,yn.prototype,this._cfg.tables],r(t),t),j=r(t),this},upgrade:function(n){return this._cfg.contentUpgrade=n,this},_parseStoresSpec:function(n,e){r(n).forEach(function(t){if(null!==n[t]){var r={},o=function(n){var e=[];return n.split(",").forEach(function(n){var t=(n=n.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(t)?t.match(/^\[(.*)\]$/)[1].split("+"):t;e.push(new Ce(t,r||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),i(r),/\./.test(n)))}),e}(n[t]),a=o.shift();if(a.multi)throw new Y.Schema("Primary key cannot be multi-valued");a.keyPath&&w(r,a.keyPath,a.auto?0:a.keyPath),o.forEach(function(n){if(n.auto)throw new Y.Schema("Only primary key can be marked as autoIncrement (++)");if(!n.keyPath)throw new Y.Schema("Index must have a name and cannot be an empty string");w(r,n.keyPath,n.compound?n.keyPath.map(function(){return""}):"")}),e[t]=new Me(t,a,o,r)}})}}),this._allTables=F,this._createTransaction=function(n,e,t,r){return new yn(n,e,t,r)},this._whenReady=function(n){return J||Pn.letThrough?n():new Mn(function(n,e){if(!H){if(!I)return void e(new Y.DatabaseClosed);Q.open().catch($)}Z.then(n,e)}).then(n)},this.verno=0,this.open=function(){if(H||B)return Z.then(function(){return K?le(K):Q});k&&(en._stackHolder=G()),H=!0,K=null,J=!1;var e=t,i=null;return Mn.race([en,new Mn(function(e,t){if(!T)throw new Y.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=an?T.open(n):T.open(n,Math.round(10*Q.verno));if(!o)throw new Y.MissingAPI("IndexedDB API not available");o.onerror=Oe(t),o.onblocked=qn(kn),o.onupgradeneeded=qn(function(e){if(i=o.transaction,an&&!Q._allowEmptyDB){o.onerror=De,i.abort(),o.result.close();var r=T.deleteDatabase(n);r.onsuccess=r.onerror=qn(function(){t(new Y.NoSuchDatabase("Database "+n+" doesnt exist"))})}else{i.onerror=Oe(t),fn((e.oldVersion>Math.pow(2,62)?0:e.oldVersion)/10,i,t)}},t),o.onsuccess=qn(function(){if(i=null,B=o.result,_e.push(Q),an)!function(){if(Q.verno=B.version/10,Q._dbSchema=C={},0===(j=m(B.objectStoreNames,0)).length)return;var n=B.transaction(xe(j),"readonly");j.forEach(function(e){for(var t=n.objectStore(e),r=t.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),o=new Ce(r,r||"",!1,!1,!!t.autoIncrement,r&&"string"!=typeof r,i),a=[],u=0;u<t.indexNames.length;++u){var s=t.index(t.indexNames[u]);r=s.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf(".");var c=new Ce(s.name,r,!!s.unique,!!s.multiEntry,!1,r&&"string"!=typeof r,i);a.push(c)}C[e]=new Me(e,o,a,{})}),An([F],r(C),C)}();else if(B.objectStoreNames.length>0)try{xn(C,B.transaction(xe(B.objectStoreNames),"readonly"))}catch(n){}B.onversionchange=qn(function(n){Q._vcFired=!0,Q.on("versionchange").fire(n)}),sn||"__dbnames"===n||de.dbnames.put({name:n}).catch($),e()},t)})]).then(function(){return V=[],Mn.resolve(we.vip(Q.on.ready.fire)).then(function n(){if(V.length>0){var e=V.reduce(un,$);return V=[],Mn.resolve(we.vip(e)).then(n)}})}).finally(function(){V=null}).then(function(){return H=!1,Q}).catch(function(n){try{i&&i.abort()}catch(n){}return H=!1,Q.close(),le(K=n)}).finally(function(){J=!0,e()})},this.close=function(){var n=_e.indexOf(Q);if(n>=0&&_e.splice(n,1),B){try{B.close()}catch(n){}B=null}I=!1,K=new Y.DatabaseClosed,H&&u(K),Z=new Mn(function(n){t=n}),en=new Mn(function(n,e){u=e})},this.delete=function(){var e=arguments.length>0;return new Mn(function(t,r){if(e)throw new Y.InvalidArgument("Arguments not allowed in db.delete()");function i(){Q.close();var e=T.deleteDatabase(n);e.onsuccess=qn(function(){sn||de.dbnames.delete(n).catch($),t()}),e.onerror=Oe(r),e.onblocked=kn}H?Z.then(i):i()})},this.backendDB=function(){return B},this.isOpen=function(){return null!==B},this.hasBeenClosed=function(){return K&&K instanceof Y.DatabaseClosed},this.hasFailed=function(){return null!==K},this.dynamicallyOpened=function(){return an},this.name=n,f(this,{tables:{get:function(){return r(F).map(function(n){return F[n]})}}}),this.on=he(this,"populate","blocked","versionchange",{ready:[un,$]}),this.on.ready.subscribe=g(this.on.ready.subscribe,function(n){return function(e,t){we.vip(function(){J?(K||Mn.resolve().then(e),t&&n(e)):V?(V.push(e),t&&n(e)):(n(e),t||n(function n(){Q.on.ready.unsubscribe(e),Q.on.ready.unsubscribe(n)}))})}}),this.transaction=function(){var n=function(n,e,t){var r=arguments.length;if(r<2)throw new Y.InvalidArgument("Too few arguments");var i=new Array(r-1);for(;--r;)i[r-1]=arguments[r];t=i.pop();var o=O(i);return[n,o,t]}.apply(this,arguments);return this._transaction.apply(this,n)},this._transaction=function(n,e,t){var r=Pn.trans;r&&r.db===Q&&-1===n.indexOf("!")||(r=null);var i=-1!==n.indexOf("?");n=n.replace("!","").replace("?","");try{var o=e.map(function(n){var e=n instanceof dn?n.name:n;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e});if("r"==n||"readonly"==n)n="readonly";else{if("rw"!=n&&n!=W)throw new Y.InvalidArgument("Invalid transaction mode: "+n);n=W}if(r){if("readonly"===r.mode&&n===W){if(!i)throw new Y.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&o.forEach(function(n){if(r&&-1===r.storeNames.indexOf(n)){if(!i)throw new Y.SubTransaction("Table "+n+" not included in parent transaction.");r=null}}),i&&r&&!r.active&&(r=null)}}catch(n){return r?r._promise(null,function(e,t){t(n)}):le(n)}return r?r._promise(n,a,"lock"):Pn.trans?ae(Pn.transless,function(){return Q._whenReady(a)}):Q._whenReady(a);function a(){return Mn.resolve().then(function(){var e,i=Pn.transless||Pn,a=Q._createTransaction(n,o,C,r),u={trans:a,transless:i};r?a.idbtrans=r.idbtrans:a.create(),t.constructor===gn&&ne();var s=Mn.follow(function(){if(e=t.call(a,a))if(e.constructor===mn){var n=ee.bind(null,null);e.then(n,n)}else"function"==typeof e.next&&"function"==typeof e.throw&&(e=Re(e))},u);return(e&&"function"==typeof e.then?Mn.resolve(e).then(function(n){return a.active?n:le(new Y.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):s.then(function(){return e})).then(function(n){return r&&a._resolve(),a._completion.then(function(){return n})}).catch(function(n){return a._reject(n),le(n)})})}},this.table=function(n){if(!c(F,n))throw new Y.InvalidTable("Table "+n+" does not exist");return F[n]},f(dn.prototype,{_trans:function(n,e,t){var r=this._tx||Pn.trans;return r&&r.db===Q?r===Pn.trans?r._promise(n,e,t):Xn(function(){return r._promise(n,e,t)},{trans:r,transless:Pn.transless||Pn}):function n(e,t,r){if(J||Pn.letThrough){var i=Q._createTransaction(e,t,C);try{i.create()}catch(n){return le(n)}return i._promise(e,function(n,e){return Xn(function(){return Pn.trans=i,r(n,e,i)})}).then(function(n){return i._completion.then(function(){return n})})}if(!H){if(!I)return le(new Y.DatabaseClosed);Q.open().catch($)}return Z.then(function(){return n(e,t,r)})}(n,[this.name],e)},_idbstore:function(n,e,t){var r=this.name;return this._trans(n,function(n,t,i){if(-1===i.storeNames.indexOf(r))throw new Y.NotFound("Table"+r+" not part of transaction");return e(n,t,i.idbtrans.objectStore(r),i)},t)},get:function(n,e){if(n&&n.constructor===Object)return this.where(n).first(e);var t=this;return this._idbstore("readonly",function(e,r,i){var o=i.get(n);o.onerror=Oe(r),o.onsuccess=qn(function(){e(t.hook.reading.fire(o.result))},r)}).then(e)},where:function(n){if("string"==typeof n)return new _n(this,n);if(i(n))return new _n(this,"["+n.join("+")+"]");var e=r(n);if(1===e.length)return this.where(e[0]).equals(n[e[0]]);var t=this.schema.indexes.concat(this.schema.primKey).filter(function(n){return n.compound&&e.every(function(e){return n.keyPath.indexOf(e)>=0})&&n.keyPath.every(function(n){return e.indexOf(n)>=0})})[0];if(t&&ve!==pe)return this.where(t.name).equals(t.keyPath.map(function(e){return n[e]}));t||console.warn("The query "+JSON.stringify(n)+" on "+this.name+" would benefit of a compound index ["+e.join("+")+"]");var o=this.schema.idxByName,a=e.reduce(function(e,t){return[e[0]||o[t],e[0]||!o[t]?Cn(e[1],function(e){return""+A(e,t)==""+n[t]}):e[1]]},[null,null]),u=a[0];return u?this.where(u.name).equals(n[u.keyPath]).filter(a[1]):t?this.filter(a[1]):this.where(e).equals("")},count:function(n){return this.toCollection().count(n)},offset:function(n){return this.toCollection().offset(n)},limit:function(n){return this.toCollection().limit(n)},reverse:function(){return this.toCollection().reverse()},filter:function(n){return this.toCollection().and(n)},each:function(n){return this.toCollection().each(n)},toArray:function(n){return this.toCollection().toArray(n)},orderBy:function(n){return new Sn(new _n(this,i(n)?"["+n.join("+")+"]":n))},toCollection:function(){return new Sn(new _n(this))},mapToClass:function(n,e){this.schema.mappedClass=n;var t=Object.create(n.prototype);e&&Ne(t,e),this.schema.instanceTemplate=t;var r=function(e){if(!e)return e;var t=Object.create(n.prototype);for(var r in e)if(c(e,r))try{t[r]=e[r]}catch(n){}return t};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),n},defineClass:function(n){return this.mapToClass(we.defineClass(n),n)},bulkDelete:function(n){return this.hook.deleting.fire===$?this._idbstore(W,function(e,t,r,i){e(vn(r,i,n,!1,$))}):this.where(":id").anyOf(n).delete().then(function(){})},bulkPut:function(n,e){var t=this;return this._idbstore(W,function(r,i,o){if(!o.keyPath&&!t.schema.primKey.auto&&!e)throw new Y.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&e)throw new Y.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(e&&e.length!==n.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");if(0===n.length)return r();var a,u,s=function(n){0===c.length?r(n):i(new q(t.name+".bulkPut(): "+c.length+" of "+f+" operations failed",c))},c=[],f=n.length,l=t;if(t.hook.creating.fire===$&&t.hook.updating.fire===$){u=pn(c);for(var h=0,d=n.length;h<d;++h)(a=e?o.put(n[h],e[h]):o.put(n[h])).onerror=u;a.onerror=pn(c,s),a.onsuccess=Te(s)}else{var p=e||o.keyPath&&n.map(function(n){return A(n,o.keyPath)}),v=p&&S(p,function(e,t){return null!=e&&[e,n[t]]});(p?l.where(":id").anyOf(p.filter(function(n){return null!=n})).modify(function(){this.value=v[this.primKey],v[this.primKey]=null}).catch(z,function(n){c=n.failures}).then(function(){for(var t=[],r=e&&[],i=p.length-1;i>=0;--i){var o=p[i];(null==o||v[o])&&(t.push(n[i]),e&&r.push(o),null!=o&&(v[o]=null))}return t.reverse(),e&&r.reverse(),l.bulkAdd(t,r)}).then(function(n){var e=p[p.length-1];return null!=e?e:n}):l.bulkAdd(n)).then(s).catch(q,function(n){c=c.concat(n.failures),s()}).catch(i)}},"locked")},bulkAdd:function(n,e){var t=this,r=this.hook.creating.fire;return this._idbstore(W,function(i,o,a,u){if(!a.keyPath&&!t.schema.primKey.auto&&!e)throw new Y.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(a.keyPath&&e)throw new Y.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(e&&e.length!==n.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");if(0===n.length)return i();function s(n){0===h.length?i(n):o(new q(t.name+".bulkAdd(): "+h.length+" of "+d+" operations failed",h))}var c,f,l,h=[],d=n.length;if(r!==$){var p,v=a.keyPath;f=pn(h,null,!0),l=Ie(null),b(function(){for(var t=0,i=n.length;t<i;++t){p={onerror:null,onsuccess:null};var o=e&&e[t],s=n[t],h=e?o:v?A(s,v):void 0,d=r.call(p,h,s,u);null==h&&null!=d&&(v?w(s=P(s),v,d):o=d),(c=null!=o?a.add(s,o):a.add(s))._hookCtx=p,t<i-1&&(c.onerror=f,p.onsuccess&&(c.onsuccess=l))}},function(n){throw p.onerror&&p.onerror(n),n}),c.onerror=pn(h,s,!0),c.onsuccess=Ie(s)}else{f=pn(h);for(var m=0,g=n.length;m<g;++m)(c=e?a.add(n[m],e[m]):a.add(n[m])).onerror=f;c.onerror=pn(h,s),c.onsuccess=Te(s)}})},add:function(n,e){var t=this.hook.creating.fire;return this._idbstore(W,function(r,i,o,a){var u={onsuccess:null,onerror:null};if(t!==$){var s=null!=e?e:o.keyPath?A(n,o.keyPath):void 0,c=t.call(u,s,n,a);null==s&&null!=c&&(o.keyPath?w(n,o.keyPath,c):e=c)}try{var f=null!=e?o.add(n,e):o.add(n);f._hookCtx=u,f.onerror=Pe(i),f.onsuccess=Ie(function(e){var t=o.keyPath;t&&w(n,t,e),r(e)})}catch(n){throw u.onerror&&u.onerror(n),n}})},put:function(n,e){var t=this,r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==$||i!==$){var o=this.schema.primKey.keyPath,a=void 0!==e?e:o&&A(n,o);return null==a?this.add(n):(n=P(n),this._trans(W,function(){return t.where(":id").equals(a).modify(function(){this.value=n}).then(function(r){return 0===r?t.add(n,e):a})},"locked"))}return this._idbstore(W,function(t,r,i){var o=void 0!==e?i.put(n,e):i.put(n);o.onerror=Oe(r),o.onsuccess=qn(function(e){var r=i.keyPath;r&&w(n,r,e.target.result),t(o.result)})})},delete:function(n){return this.hook.deleting.subscribers.length?this.where(":id").equals(n).delete():this._idbstore(W,function(e,t,r){var i=r.delete(n);i.onerror=Oe(t),i.onsuccess=qn(function(){e(i.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(W,function(n,e,t){var r=t.clear();r.onerror=Oe(e),r.onsuccess=qn(function(){n(r.result)})})},update:function(n,e){if("object"!=typeof e||i(e))throw new Y.InvalidArgument("Modifications must be an object.");if("object"!=typeof n||i(n))return this.where(":id").equals(n).modify(e);r(e).forEach(function(t){w(n,t,e[t])});var t=A(n,this.schema.primKey.keyPath);return void 0===t?le(new Y.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(e)}}),f(yn.prototype,{_lock:function(){return y(!Pn.global),++this._reculock,1!==this._reculock||Pn.global||(Pn.lockOwnerFor=this),this},_unlock:function(){if(y(!Pn.global),0==--this._reculock)for(Pn.global||(Pn.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{ae(n[1],n[0])}catch(n){}}return this},_locked:function(){return this._reculock&&Pn.lockOwnerFor!==this},create:function(n){var e=this;if(!this.mode)return this;if(y(!this.idbtrans),!n&&!B)switch(K&&K.name){case"DatabaseClosedError":throw new Y.DatabaseClosed(K);case"MissingAPIError":throw new Y.MissingAPI(K.message,K);default:throw new Y.OpenFailed(K)}if(!this.active)throw new Y.TransactionInactive;return y(null===this._completion._state),(n=this.idbtrans=n||B.transaction(xe(this.storeNames),this.mode)).onerror=qn(function(t){De(t),e._reject(n.error)}),n.onabort=qn(function(t){De(t),e.active&&e._reject(new Y.Abort(n.error)),e.active=!1,e.on("abort").fire(t)}),n.oncomplete=qn(function(){e.active=!1,e._resolve()}),this},_promise:function(n,e,t){var r=this;if(n===W&&this.mode!==W)return le(new Y.ReadOnly("Transaction is readonly"));if(!this.active)return le(new Y.TransactionInactive);if(this._locked())return new Mn(function(i,o){r._blockedFuncs.push([function(){r._promise(n,e,t).then(i,o)},Pn])});if(t)return Xn(function(){var n=new Mn(function(n,t){r._lock();var i=e(n,t,r);i&&i.then&&i.then(n,t)});return n.finally(function(){return r._unlock()}),n._lib=!0,n});var i=new Mn(function(n,t){var i=e(n,t,r);i&&i.then&&i.then(n,t)});return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(n){var e=this._root();if(n=Mn.resolve(n),e._waitingFor)e._waitingFor=e._waitingFor.then(function(){return n});else{e._waitingFor=n,e._waitingQueue=[];var t=e.idbtrans.objectStore(e.storeNames[0]);!function n(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(t.get(-1/0).onsuccess=n)}()}var r=e._waitingFor;return new Mn(function(t,i){n.then(function(n){return e._waitingQueue.push(qn(t.bind(null,n)))},function(n){return e._waitingQueue.push(qn(i.bind(null,n)))}).finally(function(){e._waitingFor===r&&(e._waitingFor=null)})})},abort:function(){this.active&&this._reject(new Y.Abort),this.active=!1},tables:{get:(l="Transaction.tables",d=function(){return F},function(){return console.warn(l+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+U(G(),1)),d.apply(this,arguments)})},table:function(n){return new dn(n,Q.table(n).schema,this)}}),f(_n.prototype,function(){function n(n,e,t){var r=n instanceof _n?new Sn(n):n;return r._ctx.error=t?new t(e):new TypeError(e),r}function e(n){return new Sn(n,function(){return R.only("")}).limit(0)}function t(n,e,t,r,i,o){for(var a=Math.min(n.length,r.length),u=-1,s=0;s<a;++s){var c=e[s];if(c!==r[s])return i(n[s],t[s])<0?n.substr(0,s)+t[s]+t.substr(s+1):i(n[s],r[s])<0?n.substr(0,s)+r[s]+t.substr(s+1):u>=0?n.substr(0,u)+e[u]+t.substr(u+1):null;i(n[s],c)<0&&(u=s)}return a<r.length&&"next"===o?n+t.substr(n.length):a<n.length&&"prev"===o?n.substr(0,t.length):u<0?null:n.substr(0,u)+r[u]+t.substr(u+1)}function r(e,r,i,o){var a,u,s,c,f,l,h,d=i.length;if(!i.every(function(n){return"string"==typeof n}))return n(e,ye);function p(n){a=function(n){return"next"===n?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}(n),u=function(n){return"next"===n?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}(n),s="next"===n?Dn:Rn;var e=i.map(function(n){return{lower:u(n),upper:a(n)}}).sort(function(n,e){return s(n.lower,e.lower)});c=e.map(function(n){return n.upper}),f=e.map(function(n){return n.lower}),l=n,h="next"===n?"":o}p("next");var v=new Sn(e,function(){return R.bound(c[0],f[d-1]+o)});v._ondirectionchange=function(n){p(n)};var m=0;return v._addAlgorithm(function(n,e,i){var o=n.key;if("string"!=typeof o)return!1;var a=u(o);if(r(a,f,m))return!0;for(var p=null,v=m;v<d;++v){var g=t(o,a,c[v],f[v],s,l);null===g&&null===p?m=v+1:(null===p||s(p,g)>0)&&(p=g)}return e(null!==p?function(){n.continue(p+h)}:i),!1}),v}return{between:function(t,r,i,o){i=!1!==i,o=!0===o;try{return Nn(t,r)>0||0===Nn(t,r)&&(i||o)&&(!i||!o)?e(this):new Sn(this,function(){return R.bound(t,r,!i,!o)})}catch(e){return n(this,ge)}},equals:function(n){return new Sn(this,function(){return R.only(n)})},above:function(n){return new Sn(this,function(){return R.lowerBound(n,!0)})},aboveOrEqual:function(n){return new Sn(this,function(){return R.lowerBound(n)})},below:function(n){return new Sn(this,function(){return R.upperBound(n,!0)})},belowOrEqual:function(n){return new Sn(this,function(){return R.upperBound(n)})},startsWith:function(e){return"string"!=typeof e?n(this,ye):this.between(e,e+pe,!0,!0)},startsWithIgnoreCase:function(n){return""===n?this.startsWith(n):r(this,function(n,e){return 0===n.indexOf(e[0])},[n],pe)},equalsIgnoreCase:function(n){return r(this,function(n,e){return n===e[0]},[n],"")},anyOfIgnoreCase:function(){var n=x.apply(M,arguments);return 0===n.length?e(this):r(this,function(n,e){return-1!==e.indexOf(n)},n,"")},startsWithAnyOfIgnoreCase:function(){var n=x.apply(M,arguments);return 0===n.length?e(this):r(this,function(n,e){return e.some(function(e){return 0===n.indexOf(e)})},n,pe)},anyOf:function(){var t=x.apply(M,arguments),r=On;try{t.sort(r)}catch(e){return n(this,ge)}if(0===t.length)return e(this);var i=new Sn(this,function(){return R.bound(t[0],t[t.length-1])});i._ondirectionchange=function(n){r="next"===n?On:Tn,t.sort(r)};var o=0;return i._addAlgorithm(function(n,e,i){for(var a=n.key;r(a,t[o])>0;)if(++o===t.length)return e(i),!1;return 0===r(a,t[o])||(e(function(){n.continue(t[o])}),!1)}),i},notEqual:function(n){return this.inAnyRange([[me,n],[n,ve]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var e=x.apply(M,arguments);if(0===e.length)return new Sn(this);try{e.sort(On)}catch(e){return n(this,ge)}var t=e.reduce(function(n,e){return n?n.concat([[n[n.length-1][1],e]]):[[me,e]]},null);return t.push([e[e.length-1],ve]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(t,r){if(0===t.length)return e(this);if(!t.every(function(n){return void 0!==n[0]&&void 0!==n[1]&&On(n[0],n[1])<=0}))return n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Y.InvalidArgument);var i=!r||!1!==r.includeLowers,o=r&&!0===r.includeUppers;var a,u=On;function s(n,e){return u(n[0],e[0])}try{(a=t.reduce(function(n,e){for(var t=0,r=n.length;t<r;++t){var i=n[t];if(Nn(e[0],i[1])<0&&Nn(e[1],i[0])>0){i[0]=(o=i[0],a=e[0],Nn(o,a)<0?o:a),i[1]=In(i[1],e[1]);break}}var o,a;return t===r&&n.push(e),n},[])).sort(s)}catch(e){return n(this,ge)}var c=0,f=o?function(n){return On(n,a[c][1])>0}:function(n){return On(n,a[c][1])>=0},l=i?function(n){return Tn(n,a[c][0])>0}:function(n){return Tn(n,a[c][0])>=0};var h=f,d=new Sn(this,function(){return R.bound(a[0][0],a[a.length-1][1],!i,!o)});return d._ondirectionchange=function(n){"next"===n?(h=f,u=On):(h=l,u=Tn),a.sort(s)},d._addAlgorithm(function(n,e,t){for(var r=n.key;h(r);)if(++c===a.length)return e(t),!1;return!!function(n){return!f(n)&&!l(n)}(r)||0!==Nn(r,a[c][1])&&0!==Nn(r,a[c][0])&&(e(function(){u===On?n.continue(a[c][0]):n.continue(a[c][1])}),!1)}),d},startsWithAnyOf:function(){var t=x.apply(M,arguments);return t.every(function(n){return"string"==typeof n})?0===t.length?e(this):this.inAnyRange(t.map(function(n){return[n,n+pe]})):n(this,"startsWithAnyOf() only works with strings")}}}),f(Sn.prototype,function(){function n(n,e){n.filter=Cn(n.filter,e)}function e(n,e,t){var r=n.replayFilter;n.replayFilter=r?function(){return Cn(r(),e())}:e,n.justLimit=t&&!r}function t(n,e){if(n.isPrimKey)return e;var t=n.table.schema.idxByName[n.index];if(!t)throw new Y.Schema("KeyPath "+n.index+" on object store "+e.name+" is not indexed");return e.index(t.name)}function i(n,e){var r=t(n,e);return n.keysOnly&&"openKeyCursor"in r?r.openKeyCursor(n.range||null,n.dir+n.unique):r.openCursor(n.range||null,n.dir+n.unique)}function o(n,e,t,r,o){var a=n.replayFilter?Cn(n.filter,n.replayFilter()):n.filter;n.or?function(){var u={},s=0;function f(){2==++s&&t()}function l(n,t,i){if(!a||a(t,i,f,r)){var o=t.primaryKey,s=""+o;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(o)),c(u,s)||(u[s]=!0,e(n,t,i))}}n.or._iterate(l,f,r,o),wn(i(n,o),n.algorithm,l,f,r,!n.keysOnly&&n.valueMapper)}():wn(i(n,o),Cn(n.algorithm,a),e,t,r,!n.keysOnly&&n.valueMapper)}return{_read:function(n,e){var t=this._ctx;return t.error?t.table._trans(null,le.bind(null,t.error)):t.table._idbstore("readonly",n).then(e)},_write:function(n){var e=this._ctx;return e.error?e.table._trans(null,le.bind(null,e.error)):e.table._idbstore(W,n,"locked")},_addAlgorithm:function(n){var e=this._ctx;e.algorithm=Cn(e.algorithm,n)},_iterate:function(n,e,t,r){return o(this._ctx,n,e,t,r)},clone:function(n){var e=Object.create(this.constructor.prototype),t=Object.create(this._ctx);return n&&a(t,n),e._ctx=t,e},raw:function(){return this._ctx.valueMapper=null,this},each:function(n){var e=this._ctx;return this._read(function(t,r,i){o(e,n,t,r,i)})},count:function(n){var e=this._ctx;if(En(e,!0))return this._read(function(n,r,i){var o=t(e,i),a=e.range?o.count(e.range):o.count();a.onerror=Oe(r),a.onsuccess=function(t){n(Math.min(t.target.result,e.limit))}},n);var r=0;return this._read(function(n,t,i){o(e,function(){return++r,!1},function(){n(r)},t,i)},n)},sortBy:function(n,e){var t=n.split(".").reverse(),r=t[0],i=t.length-1;function o(n,e){return e?o(n[t[e]],e-1):n[r]}var a="next"===this._ctx.dir?1:-1;function u(n,e){var t=o(n,i),r=o(e,i);return t<r?-a:t>r?a:0}return this.toArray(function(n){return n.sort(u)}).then(e)},toArray:function(n){var e=this._ctx;return this._read(function(n,r,i){if(s&&"next"===e.dir&&En(e,!0)&&e.limit>0){var a=e.table.hook.reading.fire,u=t(e,i),c=e.limit<1/0?u.getAll(e.range,e.limit):u.getAll(e.range);c.onerror=Oe(r),c.onsuccess=Te(a===X?n:function(e){try{n(e.map(a))}catch(n){r(n)}})}else{var f=[];o(e,function(n){f.push(n)},function(){n(f)},r,i)}},n)},offset:function(n){var t=this._ctx;return n<=0?this:(t.offset+=n,En(t)?e(t,function(){var e=n;return function(n,t){return 0===e||(1===e?(--e,!1):(t(function(){n.advance(e),e=0}),!1))}}):e(t,function(){var e=n;return function(){return--e<0}}),this)},limit:function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),e(this._ctx,function(){var e=n;return function(n,t,r){return--e<=0&&t(r),e>=0}},!0),this},until:function(e,t){return n(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},first:function(n){return this.limit(1).toArray(function(n){return n[0]}).then(n)},last:function(n){return this.reverse().first(n)},filter:function(e){var t,r;return n(this._ctx,function(n){return e(n.value)}),t=this._ctx,r=e,t.isMatch=Cn(t.isMatch,r),this},and:function(n){return this.filter(n)},or:function(n){return new _n(this._ctx.table,n,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(n){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,t){n(t.key,t)})},eachUniqueKey:function(n){return this._ctx.unique="unique",this.eachKey(n)},eachPrimaryKey:function(n){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,t){n(t.primaryKey,t)})},keys:function(n){var e=this._ctx;e.keysOnly=!e.isMatch;var t=[];return this.each(function(n,e){t.push(e.key)}).then(function(){return t}).then(n)},primaryKeys:function(n){var e=this._ctx;if(s&&"next"===e.dir&&En(e,!0)&&e.limit>0)return this._read(function(n,r,i){var o=t(e,i),a=e.limit<1/0?o.getAllKeys(e.range,e.limit):o.getAllKeys(e.range);a.onerror=Oe(r),a.onsuccess=Te(n)}).then(n);e.keysOnly=!e.isMatch;var r=[];return this.each(function(n,e){r.push(e.primaryKey)}).then(function(){return r}).then(n)},uniqueKeys:function(n){return this._ctx.unique="unique",this.keys(n)},firstKey:function(n){return this.limit(1).keys(function(n){return n[0]}).then(n)},lastKey:function(n){return this.reverse().firstKey(n)},distinct:function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var r={};return n(this._ctx,function(n){var e=n.primaryKey.toString(),t=c(r,e);return r[e]=!0,!t}),this},modify:function(n){var e=this,t=this._ctx.table.hook,i=t.updating.fire,o=t.deleting.fire;return this._write(function(t,u,s,f){var l;if("function"==typeof n)l=i===$&&o===$?n:function(e){var t=P(e);if(!1===n.call(this,e,this))return!1;if(c(this,"value")){var a=D(t,this.value),u=i.call(this,a,this.primKey,t,f);u&&(e=this.value,r(u).forEach(function(n){w(e,n,u[n])}))}else o.call(this,this.primKey,e,f)};else if(i===$){var h=r(n),d=h.length;l=function(e){for(var t=!1,r=0;r<d;++r){var i=h[r],o=n[i];A(e,i)!==o&&(w(e,i,o),t=!0)}return t}}else{var p=n;n=N(p),l=function(e){var t=!1,o=i.call(this,n,this.primKey,P(e),f);return o&&a(n,o),r(n).forEach(function(r){var i=n[r];A(e,r)!==i&&(w(e,r,i),t=!0)}),o&&(n=N(p)),t}}var v=0,m=0,g=!1,y=[],_=[],S=null;function E(n){return n&&(y.push(n),_.push(S)),u(new z("Error modifying one or more objects",y,m,_))}function I(){g&&m+y.length===v&&(y.length>0?E():t(m))}e.clone().raw()._iterate(function(n,e){S=e.primaryKey;var t={primKey:e.primaryKey,value:n,onsuccess:null,onerror:null};function r(n){return y.push(n),_.push(t.primKey),I(),!0}if(!1!==l.call(t,n,t)){var i=!c(t,"value");++v,b(function(){var n=i?e.delete():e.update(t.value);n._hookCtx=t,n.onerror=Pe(r),n.onsuccess=Ie(function(){++m,I()})},r)}else t.onsuccess&&t.onsuccess(t.value)},function(){g=!0,I()},E,s)})},delete:function(){var n=this,e=this._ctx,t=e.range,r=e.table.hook.deleting.fire,i=r!==$;if(!i&&En(e)&&(e.isPrimKey&&!be||!t))return this._write(function(n,e,r){var i=Oe(e),o=t?r.count(t):r.count();o.onerror=i,o.onsuccess=function(){var a=o.result;b(function(){var e=t?r.delete(t):r.clear();e.onerror=i,e.onsuccess=function(){return n(a)}},function(n){return e(n)})}});var o=i?2e3:1e4;return this._write(function(t,a,u,s){var c=0,f=n.clone({keysOnly:!e.isMatch&&!i}).distinct().limit(o).raw(),l=[],h=function(){return f.each(i?function(n,e){l.push([e.primaryKey,e.value])}:function(n,e){l.push(e.primaryKey)}).then(function(){return i?l.sort(function(n,e){return On(n[0],e[0])}):l.sort(On),vn(u,s,l,i,r)}).then(function(){var n=l.length;return c+=n,l=[],n<o?c:h()})};t(h())})}}}),a(this,{Collection:Sn,Table:dn,Transaction:yn,Version:cn,WhereClause:_n}),Q.on("versionchange",function(n){n.newVersion>0?console.warn("Another connection wants to upgrade database '"+Q.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+Q.name+"'. Closing db now to resume the delete request."),Q.close()}),Q.on("blocked",function(n){!n.newVersion||n.newVersion<n.oldVersion?console.warn("Dexie.delete('"+Q.name+"') was blocked"):console.warn("Upgrade '"+Q.name+"' blocked by other connection holding version "+n.oldVersion/10)}),_.forEach(function(n){n(Q)})}function Ne(n,e){return r(e).forEach(function(t){var r=function n(e){if("function"==typeof e)return new e;if(i(e))return[n(e[0])];if(e&&"object"==typeof e){var t={};return Ne(t,e),t}return e}(e[t]);n[t]=r}),n}function Ie(n){return qn(function(e){var t=e.target,r=t._hookCtx,i=r.value||t.result,o=r&&r.onsuccess;o&&o(i),n&&n(i)},n)}function Oe(n){return qn(function(e){return De(e),n(e.target.error),!1})}function Te(n){return qn(function(e){n(e.target.result)})}function Pe(n){return qn(function(e){var t=e.target,r=t.error,i=t._hookCtx,o=i&&i.onerror;return o&&o(r),De(e),n(r),!1})}function De(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}function Re(n){var e=function(e){return n.next(e)},t=o(e),r=o(function(e){return n.throw(e)});function o(n){return function(e){var o=n(e),a=o.value;return o.done?a:a&&"function"==typeof a.then?a.then(t,r):i(a)?Mn.all(a).then(t,r):t(a)}}return o(e)()}function Ce(n,e,t,r,i,o,a){this.name=n,this.keyPath=e,this.unique=t,this.multi=r,this.auto=i,this.compound=o,this.dotted=a;var u="string"==typeof e?e:e&&"["+[].join.call(e,"+")+"]";this.src=(t?"&":"")+(r?"*":"")+(i?"++":"")+u}function Me(n,e,t,r){this.name=n,this.primKey=e||new Ce,this.indexes=t||[new Ce],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=S(t,function(n){return[n.name,n]})}function xe(n){return 1===n.length?n[0]:n}function ke(n){var e=n&&(n.getDatabaseNames||n.webkitGetDatabaseNames);return e&&e.bind(n)}L(k,Ae),f(we,Z),f(we,{delete:function(n){var e=new we(n),t=e.delete();return t.onblocked=function(n){return e.on("blocked",n),this},t},exists:function(n){return new we(n).open().then(function(n){return n.close(),!0}).catch(we.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(n){var e=ke(we.dependencies.indexedDB);return e?new Mn(function(n,t){var r=e();r.onsuccess=function(e){n(m(e.target.result,0))},r.onerror=Oe(t)}).then(n):de.dbnames.toCollection().primaryKeys(n)},defineClass:function(){return function(n){n&&a(this,n)}},applyStructure:Ne,ignoreTransaction:function(n){return Pn.trans?ae(Pn.transless,n):n()},vip:function(n){return Xn(function(){return Pn.letThrough=!0,n()})},async:function(n){return function(){try{var e=Re(n.apply(this,arguments));return e&&"function"==typeof e.then?e:Mn.resolve(e)}catch(n){return le(n)}}},spawn:function(n,e,t){try{var r=Re(n.apply(t,e||[]));return r&&"function"==typeof r.then?r:Mn.resolve(r)}catch(n){return le(n)}},currentTransaction:{get:function(){return Pn.trans||null}},waitFor:function(n,e){var t=Mn.resolve("function"==typeof n?we.ignoreTransaction(n):n).timeout(e||6e4);return Pn.trans?Pn.trans.waitFor(t):t},Promise:Mn,debug:{get:function(){return k},set:function(n){L(n,"dexie"===n?function(){return!0}:Ae)}},derive:d,extend:a,props:f,override:g,Events:he,getByKeyPath:A,setByKeyPath:w,delByKeyPath:function(n,e){"string"==typeof e?w(n,e,void 0):"length"in e&&[].map.call(e,function(e){w(n,e,void 0)})},shallowClone:N,deepClone:P,getObjectDiff:D,asap:_,maxKey:ve,minKey:me,addons:[],connections:_e,MultiModifyError:Y.Modify,errnames:J,IndexSpec:Ce,TableSchema:Me,dependencies:function(){try{return{indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(n){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"{version}",version:"{version}".split(".").map(function(n){return parseInt(n)}).reduce(function(n,e,t){return n+e/Math.pow(10,2*t)}),default:we,Dexie:we}),Mn.rejectionMapper=function(n,e){if(!n||n instanceof V||n instanceof TypeError||n instanceof SyntaxError||!n.name||!Q[n.name])return n;var t=new Q[n.name](e||n.message,n);return"stack"in n&&h(t,"stack",{get:function(){return this.inner.stack}}),t},(de=new we("__dbnames")).version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==o.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach(function(n){return de.dbnames.put({name:n}).catch($)}),localStorage.removeItem("Dexie.DatabaseNames"))}catch(n){}}(),e.default=we}.call(this,t(0),t(4).setImmediate)},function(n,e,t){(function(n){var r=void 0!==n&&n||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(n,e){this._id=n,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(n){n&&n.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(n,e){clearTimeout(n._idleTimeoutId),n._idleTimeout=e},e.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},e._unrefActive=e.active=function(n){clearTimeout(n._idleTimeoutId);var e=n._idleTimeout;e>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},e))},t(5),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==n&&n.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==n&&n.clearImmediate||this&&this.clearImmediate}).call(this,t(0))},function(n,e,t){(function(n,e){!function(n,t){"use strict";if(!n.setImmediate){var r,i,o,a,u,s=1,c={},f=!1,l=n.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(n);h=h&&h.setTimeout?h:n,"[object process]"==={}.toString.call(n.process)?r=function(n){e.nextTick(function(){p(n)})}:!function(){if(n.postMessage&&!n.importScripts){var e=!0,t=n.onmessage;return n.onmessage=function(){e=!1},n.postMessage("","*"),n.onmessage=t,e}}()?n.MessageChannel?((o=new MessageChannel).port1.onmessage=function(n){p(n.data)},r=function(n){o.port2.postMessage(n)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,r=function(n){var e=l.createElement("script");e.onreadystatechange=function(){p(n),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(n){setTimeout(p,0,n)}:(a="setImmediate$"+Math.random()+"$",u=function(e){e.source===n&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},n.addEventListener?n.addEventListener("message",u,!1):n.attachEvent("onmessage",u),r=function(e){n.postMessage(a+e,"*")}),h.setImmediate=function(n){"function"!=typeof n&&(n=new Function(""+n));for(var e=new Array(arguments.length-1),t=0;t<e.length;t++)e[t]=arguments[t+1];var i={callback:n,args:e};return c[s]=i,r(s),s++},h.clearImmediate=d}function d(n){delete c[n]}function p(n){if(f)setTimeout(p,0,n);else{var e=c[n];if(e){f=!0;try{!function(n){var e=n.callback,r=n.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(t,r)}}(e)}finally{d(n),f=!1}}}}}("undefined"==typeof self?void 0===n?this:n:self)}).call(this,t(0),t(1))},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function n(){}return n.getMyUserId=function(n,e){return n||e},n.fetchSupportingPresigned=function(e,t,r,i,o,a,u){if(i){console.log("fetchSupportingPresigned, owner="+JSON.stringify(u)+"."),console.log("fetchSupportingPresigned, grantee="+JSON.stringify(o)+".");var s=t.toString().split("/");console.log("fetchSupportingPresigned, inputParts=...."),console.dir(s);var c=s[s.length-1],f=(s[s.length-2],s[s.length-3]),l=decodeURIComponent(s[s.length-4]);console.log("fetchSupportingPresigned, after decodeURIComponent call.");var h=r,d="https://jwjvsfcl6c.execute-api.us-west-2.amazonaws.com/"+e.toLocaleUpperCase()+"/onco-private-dev-getsignedurl?user="+encodeURIComponent(l)+"&environment="+e+"&itemId="+f+"&filename="+c;console.log("fetchSupportingPresigned, before getMyUserId call.");var p=n.getMyUserId(o,l);return console.log("fetchSupportingPresigned, after getMyUserId call."),l!=p?(console.log("=== Grantee needed for:["+p+"]"),d=d+"&grantee="+p):console.warn("===== GRANTEE not needed. user=me"),o&&(d=d+"&grantee="+o),h.headers.zager=self.zagerToken,fetch(d,h).then(function(n){return n.json().then(function(n){return console.log("=== body.signedUrl = "+n.signedUrl),fetch(n.signedUrl)})}).catch(function(n){return console.error("MJ private signing error is ["+JSON.stringify(n)+"]"),Promise.reject(new Response("HTML error: "+n.message))})}var v={"Content-Type":"application/json","Accept-Encoding":"gzip","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET","Access-Control-Allow-Headers":"content-type, content-encoding"};return fetch(t,{method:"GET",headers:v,mode:"cors",cache:"default"})},n}();e.AccessS3=r},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function n(){}return n.NUMERIC="numeric",n.CATEGORICAL="categorical",n}();e.PreprocessingType=r,e.Colors=[65280,13959168,12915042,11141375,6422762,3166206,2201331,37354,47316,49061,6610199,11463168,16766464,16755456,16739584,14494720,6111287,4545124];var i=function(){function n(){}return n.SIGN_IN="SIGN_IN",n.SIGN_UP="SIGN_UP",n.SIGN_IN_CONFIRM="SIGN_IN_CONFIRM",n.SIGN_UP_CONFIRM="SIGN_UP_CONFIRM",n.CHANGE_PASSWORD="CHANGE_PASSWORD",n.UPDATE_PASSWORD="UPDATE_PASSWORD",n.FORGOT_PASSWORD="FORGOT_PASSWORD",n.RESEND_CODE="RESEND_CODE",n.PROJECT_LIST="PROJECT_LIST",n.BLANK="BLANK",n}();e.UserPanelFormEnum=i;var o=function(){function n(){}return n.BLAST="./assets/shapes/shape-blast-solid-legend.png",n.BLOB="./assets/shapes/shape-blob-solid-legend.png",n.CIRCLE="./assets/shapes/shape-circle-solid-legend.png",n.DIAMOND="./assets/shapes/shape-diamond-solid-legend.png",n.POLYGON="./assets/shapes/shape-polygon-solid-legend.png",n.SQUARE="./assets/shapes/shape-square-solid-legend.png",n.STAR="./assets/shapes/shape-star-solid-legend.png",n.TRIANGLE="./assets/shapes/shape-triangle-solid-legend.png",n.NA="./assets/shapes/shape-na-solid-legend.png",n}();e.SpriteMaterialEnum=o;var a=function(){function n(){}return n.EUCLIDEAN="euclidean",n.MANHATTAN="manhattan",n.JACCARD="jaccard",n.DICE="dice",n}();e.DistanceEnum=a;var u=function(){function n(){}return n.SPARSE="sparse",n.DENSE="dense",n}();e.DenseSparseEnum=u;var s=function(){function n(){}return n.ONE_D="One Dimension",n.TWO_D="Two Dimension",n.THREE_D="Three Dimension",n}();e.DimensionEnum=s;var c=function(){function n(){}return n.BREAST="BREAST",n.BRAIN="BRAIN",n.LUNG="LUNG",n}();e.DiseaseEnum=c;var f=function(){function n(){}return n.UNDEFINED="UNDEFINED",n.STRING="STRING",n.NUMBER="NUMBER",n.FUNCTION="FUNCTION",n}();e.DataTypeEnum=f;var l=function(){function n(){}return n.COPY_NUMBER_GAIN_HIGH="Copy_Number_Gain_High",n.COPY_NUMBER_GAIN_LOW="Copy_Number_Gain_Low",n.COPY_NUMBER_LOSS_HIGH="Copy_Number_Loss_High",n.COPY_NUMBER_LOSS_LOW="Copy_Number_Loss_Low",n.MISSENSE="Missense",n.SILENT="Silent",n.FRAME_SHIFT_DEL="Frame_Shift_Del",n.SPLICE_SITE="Splice_Site",n.NONSENSE_MUTATION="Nonsense_Mutation",n.FRAME_SHIFT_INS="Frame_Shift_Ins",n.RNA="RNA",n.IN_FRAME_DEL="In_Frame_Del",n.IN_FRAME_INS="In_Frame_Ins",n.NONSTOP_MUTATION="Nonstop_Mutation",n.TRANSLATION_START_SITE="Translation_Start_Site",n.DE_NOVO_START_OUTOFFRAME="De_novo_Start_OutOfFrame",n.DE_NOVO_START_INFRAME="De_novo_Start_InFrame",n.INTRON="Intron",n.THREE_PRIME_UTR="3'UTR",n.IGR="IGR",n.FIVE_PRIME_UTR="5'UTR",n.TARGETED_REGION="Targeted_Region",n.READ_THROUGH="Read-through",n.FIVE_PRIME_FLANK="5'Flank",n.THREE_PRIME_FLANK="3'Flank",n.SPLICE_SITE_SNP="Splice_Site_SNP",n.SPLICE_SITE_DEL="Splice_Site_Del",n.SPLICE_SITE_INS="Splice_Site_Ins",n.INDEL="Indel",n.OTHER="Other",n}();e.MutationTypeEnum=l;var h=function(){function n(){}return n.createFromEntities=function(e,t){switch(console.log("entity==========="),[e,t].sort().map(function(n){return n.toString().toUpperCase()}).join("-")){case n.PATIENTS_PATIENTS:return n.PATIENTS_PATIENTS;case n.GENES_GENES:return n.GENES_GENES;case n.GENES_PATIENTS:return n.GENES_PATIENTS;case n.GENES_SAMPLES:return n.GENES_SAMPLES;case n.PATIENTS_PATIENTS:return n.PATIENTS_PATIENTS;case n.SAMPLES_PATIENTS:return n.SAMPLES_PATIENTS;case n.SAMPLES_SAMPLES:return n.SAMPLES_SAMPLES}return n.NONE},n.NONE="None",n.UNKNOWN="Unknown",n.PATIENTS_PATIENTS="PATIENTS-PATIENTS",n.SAMPLES_SAMPLES="SAMPLES-SAMPLES",n.GENES_GENES="GENES-GENES",n.SAMPLES_PATIENTS="PATIENTS-SAMPLES",n.GENES_SAMPLES="GENES-SAMPLES",n.GENES_PATIENTS="GENES-PATIENTS",n}();e.ConnectionTypeEnum=h;var d=function(){function n(){}return n.NONE="None",n.UNKNOWN="Unknown",n.PATIENT="Patients",n.GENE="Genes",n.SAMPLE="Samples",n.EVENT="Events",n.EDGE="Edge",n.MIXED="Mixed",n.PROTEIN="Protein",n}();e.EntityTypeEnum=d;var p=function(){function n(){}return n.PIE="Pie",n.DONUT="Donut",n.HISTOGRAM="Histogram",n.LINE="Line",n.LABEL="Label",n.SCATTER="Scatter",n}();e.ChartTypeEnum=p,function(n){n[n.DECOMPOSITION=-1]="DECOMPOSITION",n[n.MANIFOLDLEARNING=-2]="MANIFOLDLEARNING",n[n.SUPPORT_VECTOR_MACHINES=-3]="SUPPORT_VECTOR_MACHINES",n[n.NONE=0]="NONE",n[n.PCA=1]="PCA",n[n.PLS=2]="PLS",n[n.CHROMOSOME=3]="CHROMOSOME",n[n.TSNE=4]="TSNE",n[n.EDGES=8]="EDGES",n[n.SURVIVAL=16]="SURVIVAL",n[n.HEATMAP=32]="HEATMAP",n[n.HISTOGRAM=64]="HISTOGRAM",n[n.TIMELINES=128]="TIMELINES",n[n.PATHWAYS=256]="PATHWAYS",n[n.KMEANS=512]="KMEANS",n[n.KMEDIAN=1024]="KMEDIAN",n[n.KMEDOIDS=2048]="KMEDOIDS",n[n.SOM=4096]="SOM",n[n.MDS=8192]="MDS",n[n.DA=16384]="DA",n[n.DE=32768]="DE",n[n.FA=65536]="FA",n[n.TRUNCATED_SVD=131072]="TRUNCATED_SVD",n[n.INCREMENTAL_PCA=262144]="INCREMENTAL_PCA",n[n.KERNAL_PCA=524288]="KERNAL_PCA",n[n.SPARSE_PCA=1048576]="SPARSE_PCA",n[n.PROBABILISTIC_PCA=2097152]="PROBABILISTIC_PCA",n[n.RANDOMIZED_PCA=4194304]="RANDOMIZED_PCA",n[n.FAST_ICA=8388608]="FAST_ICA",n[n.DICTIONARY_LEARNING=16777216]="DICTIONARY_LEARNING",n[n.LDA=33554432]="LDA",n[n.NMF=67108864]="NMF",n[n.ISOMAP=134217728]="ISOMAP",n[n.LOCALLY_LINEAR_EMBEDDING=268435456]="LOCALLY_LINEAR_EMBEDDING",n[n.SPECTRAL_EMBEDDING=536870912]="SPECTRAL_EMBEDDING",n[n.LINKED_GENE=1073741824]="LINKED_GENE",n[n.GENOME=2147483648]="GENOME",n[n.BOX_WHISKERS=4294967296]="BOX_WHISKERS",n[n.PARALLEL_COORDS=8589934592]="PARALLEL_COORDS",n[n.HIC=17179869184]="HIC",n[n.MINI_BATCH_DICTIONARY_LEARNING=34359738368]="MINI_BATCH_DICTIONARY_LEARNING",n[n.MINI_BATCH_SPARSE_PCA=68719476736]="MINI_BATCH_SPARSE_PCA",n[n.LINEAR_DISCRIMINANT_ANALYSIS=137438953472]="LINEAR_DISCRIMINANT_ANALYSIS",n[n.QUADRATIC_DISCRIMINANT_ANALYSIS=274877906944]="QUADRATIC_DISCRIMINANT_ANALYSIS",n[n.DENDOGRAM=549755813888]="DENDOGRAM",n[n.SPREADSHEET=1099511627776]="SPREADSHEET",n[n.SPARSE_CODER=2199023255552]="SPARSE_CODER",n[n.HAZARD=4398046511104]="HAZARD",n[n.DASHBOARD=8796093022208]="DASHBOARD",n[n.UMAP=17592186044416]="UMAP",n[n.SCATTER=35184372088832]="SCATTER",n[n.PLSSVD=70368744177664]="PLSSVD",n[n.PLSREGRESSION=0x800000000000]="PLSREGRESSION",n[n.PLSCANONICAL=281474976710656]="PLSCANONICAL",n[n.CCA=562949953421312]="CCA",n[n.LINEAR_SVC=0x3fffffffffffc]="LINEAR_SVC",n[n.LINEAR_SVR=0x7fffffffffff8]="LINEAR_SVR",n[n.NU_SVC=0xffffffffffff0]="NU_SVC",n[n.NU_SVR=9007199254740960]="NU_SVR",n[n.ONE_CLASS_SVM=1.439850948e27]="ONE_CLASS_SVM",n[n.SVR=2.879701896e27]="SVR",n[n.PROTEINS=5.759403792e27]="PROTEINS",n[n.SAVED_POINTS=0x40000000000000]="SAVED_POINTS",n[n.TABLE_LOADER=0x80000000000000]="TABLE_LOADER"}(e.VisualizationEnum||(e.VisualizationEnum={})),e.VisualizationNameFromValue=function(n){var t="Unknown";return Object.keys(e.VisualizationNameList).forEach(function(r){e.VisualizationNameList[r]!=n||(t=r)}),t},e.VisualizationNameList={DECOMPOSITION:-1,MANIFOLDLEARNING:-2,SUPPORT_VECTOR_MACHINES:-3,NONE:0,PCA:1,PLS:2,CHROMOSOME:3,TSNE:4,EDGES:8,SURVIVAL:16,HEATMAP:32,HISTOGRAM:64,TIMELINES:128,PATHWAYS:256,KMEANS:512,KMEDIAN:1024,KMEDOIDS:2048,SOM:4096,MDS:8192,DA:16384,DE:32768,FA:65536,TRUNCATED_SVD:131072,INCREMENTAL_PCA:262144,KERNAL_PCA:524288,SPARSE_PCA:1048576,PROBABILISTIC_PCA:2097152,RANDOMIZED_PCA:4194304,FAST_ICA:8388608,DICTIONARY_LEARNING:16777216,LDA:33554432,NMF:67108864,ISOMAP:134217728,LOCALLY_LINEAR_EMBEDDING:268435456,SPECTRAL_EMBEDDING:536870912,LINKED_GENE:1073741824,GENOME:2147483648,BOX_WHISKERS:4294967296,PARALLEL_COORDS:8589934592,HIC:17179869184,MINI_BATCH_DICTIONARY_LEARNING:34359738368,MINI_BATCH_SPARSE_PCA:68719476736,LINEAR_DISCRIMINANT_ANALYSIS:137438953472,QUADRATIC_DISCRIMINANT_ANALYSIS:274877906944,DENDOGRAM:549755813888,SPREADSHEET:1099511627776,SPARSE_CODER:2199023255552,HAZARD:4398046511104,DASHBOARD:8796093022208,UMAP:17592186044416,SCATTER:35184372088832,PLSSVD:70368744177664,PLSREGRESSION:0x800000000000,PLSCANONICAL:281474976710656,CCA:562949953421312,LINEAR_SVC:0x3fffffffffffc,LINEAR_SVR:0x7fffffffffff8,NU_SVC:0xffffffffffff0,NU_SVR:9007199254740960,ONE_CLASS_SVM:1.439850948e27,SVR:2.879701896e27,PROTEINS:5.759403792e27,SAVED_POINTS:0x40000000000000,TABLE_LOADER:0x80000000000000};var v=function(){function n(){}return n.SINGLE="Single",n.HORIZONTAL="Horizontal",n.VERTICAL="Vertical",n.OVERLAY="Overlay",n}();e.WorkspaceLayoutEnum=v;var m=function(){function n(){}return n.AGNES="agnes",n.DIANA="diana",n}();e.HClustMethodEnum=m;var g=function(){function n(){}return n.SINGLE="single",n.COMPLETE="complete",n.AVERAGE="average",n.CENTROID="centroid",n.WARD="ward",n}();e.HClustDistanceEnum=g},function(n,e,t){(function(n){var r=Object.getOwnPropertyDescriptors||function(n){for(var e=Object.keys(n),t={},r=0;r<e.length;r++)t[e[r]]=Object.getOwnPropertyDescriptor(n,e[r]);return t},i=/%[sdj%]/g;e.format=function(n){if(!g(n)){for(var e=[],t=0;t<arguments.length;t++)e.push(u(arguments[t]));return e.join(" ")}t=1;for(var r=arguments,o=r.length,a=String(n).replace(i,function(n){if("%%"===n)return"%";if(t>=o)return n;switch(n){case"%s":return String(r[t++]);case"%d":return Number(r[t++]);case"%j":try{return JSON.stringify(r[t++])}catch(n){return"[Circular]"}default:return n}}),s=r[t];t<o;s=r[++t])v(s)||!S(s)?a+=" "+s:a+=" "+u(s);return a},e.deprecate=function(t,r){if(void 0!==n&&!0===n.noDeprecation)return t;if(void 0===n)return function(){return e.deprecate(t,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),i=!0}return t.apply(this,arguments)}};var o,a={};function u(n,t){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(t)?r.showHidden=t:t&&e._extend(r,t),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),f(r,n,r.depth)}function s(n,e){var t=u.styles[e];return t?"["+u.colors[t][0]+"m"+n+"["+u.colors[t][1]+"m":n}function c(n,e){return n}function f(n,t,r){if(n.customInspect&&t&&A(t.inspect)&&t.inspect!==e.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,n);return g(i)||(i=f(n,i,r)),i}var o=function(n,e){if(y(e))return n.stylize("undefined","undefined");if(g(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return n.stylize(t,"string")}if(m(e))return n.stylize(""+e,"number");if(p(e))return n.stylize(""+e,"boolean");if(v(e))return n.stylize("null","null")}(n,t);if(o)return o;var a=Object.keys(t),u=function(n){var e={};return n.forEach(function(n,t){e[n]=!0}),e}(a);if(n.showHidden&&(a=Object.getOwnPropertyNames(t)),b(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(t);if(0===a.length){if(A(t)){var s=t.name?": "+t.name:"";return n.stylize("[Function"+s+"]","special")}if(_(t))return n.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return n.stylize(Date.prototype.toString.call(t),"date");if(b(t))return l(t)}var c,S="",w=!1,N=["{","}"];(d(t)&&(w=!0,N=["[","]"]),A(t))&&(S=" [Function"+(t.name?": "+t.name:"")+"]");return _(t)&&(S=" "+RegExp.prototype.toString.call(t)),E(t)&&(S=" "+Date.prototype.toUTCString.call(t)),b(t)&&(S=" "+l(t)),0!==a.length||w&&0!=t.length?r<0?_(t)?n.stylize(RegExp.prototype.toString.call(t),"regexp"):n.stylize("[Object]","special"):(n.seen.push(t),c=w?function(n,e,t,r,i){for(var o=[],a=0,u=e.length;a<u;++a)O(e,String(a))?o.push(h(n,e,t,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(n,e,t,r,i,!0))}),o}(n,t,r,u,a):a.map(function(e){return h(n,t,r,u,e,w)}),n.seen.pop(),function(n,e,t){if(n.reduce(function(n,e){return 0,e.indexOf("\n")>=0&&0,n+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return t[0]+(""===e?"":e+"\n ")+" "+n.join(",\n  ")+" "+t[1];return t[0]+e+" "+n.join(", ")+" "+t[1]}(c,S,N)):N[0]+S+N[1]}function l(n){return"["+Error.prototype.toString.call(n)+"]"}function h(n,e,t,r,i,o){var a,u,s;if((s=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?u=s.set?n.stylize("[Getter/Setter]","special"):n.stylize("[Getter]","special"):s.set&&(u=n.stylize("[Setter]","special")),O(r,i)||(a="["+i+"]"),u||(n.seen.indexOf(s.value)<0?(u=v(t)?f(n,s.value,null):f(n,s.value,t-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(n){return"  "+n}).join("\n").substr(2):"\n"+u.split("\n").map(function(n){return"   "+n}).join("\n")):u=n.stylize("[Circular]","special")),y(a)){if(o&&i.match(/^\d+$/))return u;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=n.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=n.stylize(a,"string"))}return a+": "+u}function d(n){return Array.isArray(n)}function p(n){return"boolean"==typeof n}function v(n){return null===n}function m(n){return"number"==typeof n}function g(n){return"string"==typeof n}function y(n){return void 0===n}function _(n){return S(n)&&"[object RegExp]"===w(n)}function S(n){return"object"==typeof n&&null!==n}function E(n){return S(n)&&"[object Date]"===w(n)}function b(n){return S(n)&&("[object Error]"===w(n)||n instanceof Error)}function A(n){return"function"==typeof n}function w(n){return Object.prototype.toString.call(n)}function N(n){return n<10?"0"+n.toString(10):n.toString(10)}e.debuglog=function(t){if(y(o)&&(o=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var r=n.pid;a[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else a[t]=function(){};return a[t]},e.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=p,e.isNull=v,e.isNullOrUndefined=function(n){return null==n},e.isNumber=m,e.isString=g,e.isSymbol=function(n){return"symbol"==typeof n},e.isUndefined=y,e.isRegExp=_,e.isObject=S,e.isDate=E,e.isError=b,e.isFunction=A,e.isPrimitive=function(n){return null===n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n||"symbol"==typeof n||void 0===n},e.isBuffer=t(9);var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(n,e){return Object.prototype.hasOwnProperty.call(n,e)}e.log=function(){var n,t;console.log("%s - %s",(n=new Date,t=[N(n.getHours()),N(n.getMinutes()),N(n.getSeconds())].join(":"),[n.getDate(),I[n.getMonth()],t].join(" ")),e.format.apply(e,arguments))},e.inherits=t(10),e._extend=function(n,e){if(!e||!S(e))return n;for(var t=Object.keys(e),r=t.length;r--;)n[t[r]]=e[t[r]];return n};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(n,e){if(!n){var t=new Error("Promise was rejected with a falsy value");t.reason=n,n=t}return e(n)}e.promisify=function(n){if("function"!=typeof n)throw new TypeError('The "original" argument must be of type Function');if(T&&n[T]){var e;if("function"!=typeof(e=n[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,t,r=new Promise(function(n,r){e=n,t=r}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(n,r){n?t(n):e(r)});try{n.apply(this,i)}catch(n){t(n)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(n)),T&&Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(n))},e.promisify.custom=T,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,t).then(function(e){n.nextTick(a,null,e)},function(e){n.nextTick(P,e,a)})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,r(e)),t}}).call(this,t(1))},function(n,e){n.exports=function(n){return n&&"object"==typeof n&&"function"==typeof n.copy&&"function"==typeof n.fill&&"function"==typeof n.readUInt8}},function(n,e){"function"==typeof Object.create?n.exports=function(n,e){n.super_=e,n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(n,e){n.super_=e;var t=function(){};t.prototype=e.prototype,n.prototype=new t,n.prototype.constructor=n}}]);