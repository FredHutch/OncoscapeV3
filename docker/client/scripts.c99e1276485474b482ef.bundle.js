!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";var n=[],r=t.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,c={},l=c.toString,h=c.hasOwnProperty,f=h.toString,d=f.call(Object),p={},m=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},g=function(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function y(t,e,n){var i,o=(e=e||r).createElement("script");if(o.text=t,n)for(i in v)n[i]&&(o[i]=n[i]);e.head.appendChild(o).parentNode.removeChild(o)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?c[l.call(t)]||"object":typeof t}var x=function(t,e){return new x.fn.init(t,e)},b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function _(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!m(t)&&!g(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}x.fn=x.prototype={jquery:"3.3.1",constructor:x,length:0,toArray:function(){return o.call(this)},get:function(t){return null==t?o.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=x.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return x.each(this,t)},map:function(t){return this.pushStack(x.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},x.extend=x.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],a!==(r=t[e])&&(c&&r&&(x.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&x.isPlainObject(n)?n:{},a[e]=x.extend(c,o,r)):void 0!==r&&(a[e]=r));return a},x.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==l.call(t)||(e=i(t))&&("function"!=typeof(n=h.call(e,"constructor")&&e.constructor)||f.call(n)!==d))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){y(t)},each:function(t,e){var n,r=0;if(_(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(b,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(_(Object(t))?x.merge(n,"string"==typeof t?[t]:t):s.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,s=[];if(_(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&s.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&s.push(i);return a.apply([],s)},guid:1,support:p}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=n[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){c["[object "+e+"]"]=e.toLowerCase()});var M=function(t){var e,n,r,i,o,a,s,u,c,l,h,f,d,p,m,g,v,y,w,x="sizzle"+1*new Date,b=t.document,_=0,M=0,S=at(),E=at(),T=at(),A=function(t,e){return t===e&&(h=!0),0},C={}.hasOwnProperty,k=[],R=k.pop,O=k.push,P=k.push,D=k.slice,L=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",z="\\["+I+"*("+F+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+I+"*\\]",U=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",j=new RegExp(I+"+","g"),V=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),B=new RegExp("^"+I+"*,"+I+"*"),H=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),G=new RegExp("="+I+"*([^\\]'\"]*?)"+I+"*\\]","g"),q=new RegExp(U),W=new RegExp("^"+F+"$"),Y={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,K=new RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),tt=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){f()},it=yt(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{P.apply(k=D.call(b.childNodes),b.childNodes)}catch(t){P={apply:k.length?function(t,e){O.apply(t,D.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function ot(t,e,r,i){var o,s,c,l,h,p,v,y=e&&e.ownerDocument,_=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==_&&9!==_&&11!==_)return r;if(!i&&((e?e.ownerDocument||e:b)!==d&&f(e),e=e||d,m)){if(11!==_&&(h=Z.exec(t)))if(o=h[1]){if(9===_){if(!(c=e.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(y&&(c=y.getElementById(o))&&w(e,c)&&c.id===o)return r.push(c),r}else{if(h[2])return P.apply(r,e.getElementsByTagName(t)),r;if((o=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return P.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!T[t+" "]&&(!g||!g.test(t))){if(1!==_)y=e,v=t;else if("object"!==e.nodeName.toLowerCase()){for((l=e.getAttribute("id"))?l=l.replace(et,nt):e.setAttribute("id",l=x),s=(p=a(t)).length;s--;)p[s]="#"+l+" "+vt(p[s]);v=p.join(","),y=J.test(t)&&mt(e.parentNode)||e}if(v)try{return P.apply(r,y.querySelectorAll(v)),r}catch(t){}finally{l===x&&e.removeAttribute("id")}}}return u(t.replace(V,"$1"),e,r,i)}function at(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function st(t){return t[x]=!0,t}function ut(t){var e=d.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function lt(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ht(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function dt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&it(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function pt(t){return st(function(e){return e=+e,st(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function mt(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}for(e in n=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},f=ot.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:b;return a!==d&&9===a.nodeType&&a.documentElement?(p=(d=a).documentElement,m=!o(d),b!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",rt,!1):i.attachEvent&&i.attachEvent("onunload",rt)),n.attributes=ut(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=ut(function(t){return t.appendChild(d.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(d.getElementsByClassName),n.getById=ut(function(t){return p.appendChild(t).id=x,!d.getElementsByName||!d.getElementsByName(x).length}),n.getById?(r.filter.ID=function(t){var e=t.replace(K,tt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&m){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(K,tt);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&m){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&m)return e.getElementsByClassName(t)},v=[],g=[],(n.qsa=Q.test(d.querySelectorAll))&&(ut(function(t){p.appendChild(t).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+I+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+I+"*(?:value|"+N+")"),t.querySelectorAll("[id~="+x+"-]").length||g.push("~="),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+x+"+*").length||g.push(".#.+[+~]")}),ut(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=d.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+I+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=Q.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ut(function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",U)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),e=Q.test(p.compareDocumentPosition),w=e||Q.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return h=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===d||t.ownerDocument===b&&w(b,t)?-1:e===d||e.ownerDocument===b&&w(b,e)?1:l?L(l,t)-L(l,e):0:4&r?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!i||!o)return t===d?-1:e===d?1:i?-1:o?1:l?L(l,t)-L(l,e):0;if(i===o)return lt(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?lt(a[r],s[r]):a[r]===b?-1:s[r]===b?1:0},d):d},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==d&&f(t),e=e.replace(G,"='$1']"),n.matchesSelector&&m&&!T[e+" "]&&(!v||!v.test(e))&&(!g||!g.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return ot(e,d,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==d&&f(t),w(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==d&&f(t);var i=r.attrHandle[e.toLowerCase()],o=i&&C.call(r.attrHandle,e.toLowerCase())?i(t,e,!m):void 0;return void 0!==o?o:n.attributes||!m?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ot.escape=function(t){return(t+"").replace(et,nt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,r=[],i=0,o=0;if(h=!n.detectDuplicates,l=!n.sortStable&&t.slice(0),t.sort(A),h){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return l=null,t},i=ot.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=ot.selectors={cacheLength:50,createPseudo:st,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(K,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(K,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Y.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&q.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(K,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|"+I+")"+t+"("+I+"|$)"))&&S(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var i=ot.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(j," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var c,l,h,f,d,p,m=o!==a?"nextSibling":"previousSibling",g=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!u&&!s,w=!1;if(g){if(o){for(;m;){for(f=e;f=f[m];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&y){for(w=(d=(c=(l=(h=(f=g)[x]||(f[x]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]||[])[0]===_&&c[1])&&c[2],f=d&&g.childNodes[d];f=++d&&f&&f[m]||(w=d=0)||p.pop();)if(1===f.nodeType&&++w&&f===e){l[t]=[_,d,w];break}}else if(y&&(w=d=(c=(l=(h=(f=e)[x]||(f[x]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]||[])[0]===_&&c[1]),!1===w)for(;(f=++d&&f&&f[m]||(w=d=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++w||(y&&((l=(h=f[x]||(f[x]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]=[_,w]),f!==e)););return(w-=i)===r||w%r==0&&w/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return i[x]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=L(t,o[a])]=!(n[r]=o[a])}):function(t){return i(t,0,n)}):i}},pseudos:{not:st(function(t){var e=[],n=[],r=s(t.replace(V,"$1"));return r[x]?st(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:st(function(t){return function(e){return ot(t,e).length>0}}),contains:st(function(t){return t=t.replace(K,tt),function(e){return(e.textContent||e.innerText||i(e)).indexOf(t)>-1}}),lang:st(function(t){return W.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(K,tt).toLowerCase(),function(e){var n;do{if(n=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:dt(!1),disabled:dt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,n){return[n<0?n+e:n]}),even:pt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:pt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:pt(function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t}),gt:pt(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=ft(e);function gt(){}function vt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function yt(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,s=M++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,u){var c,l,h,f=[_,s];if(u){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,u))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(l=(h=e[x]||(e[x]={}))[e.uniqueID]||(h[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((c=l[o])&&c[0]===_&&c[1]===s)return f[2]=c[2];if(l[o]=f,f[2]=t(e,n,u))return!0}return!1}}function wt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function xt(t,e,n,r,i){for(var o,a=[],s=0,u=t.length,c=null!=e;s<u;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),c&&e.push(s)));return a}function bt(t,e,n,r,i,o){return r&&!r[x]&&(r=bt(r)),i&&!i[x]&&(i=bt(i,o)),st(function(o,a,s,u){var c,l,h,f=[],d=[],p=a.length,m=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)ot(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),g=!t||!o&&e?m:xt(m,f,t,s,u),v=n?i||(o?t:p||r)?[]:a:g;if(n&&n(g,v,s,u),r)for(c=xt(v,d),r(c,[],s,u),l=c.length;l--;)(h=c[l])&&(v[d[l]]=!(g[d[l]]=h));if(o){if(i||t){if(i){for(c=[],l=v.length;l--;)(h=v[l])&&c.push(g[l]=h);i(null,v=[],c,u)}for(l=v.length;l--;)(h=v[l])&&(c=i?L(o,h):f[l])>-1&&(o[c]=!(a[c]=h))}}else v=xt(v===a?v.splice(p,v.length):v),i?i(null,a,v,u):P.apply(a,v)})}function _t(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],s=a||r.relative[" "],u=a?1:0,l=yt(function(t){return t===e},s,!0),h=yt(function(t){return L(e,t)>-1},s,!0),f=[function(t,n,r){var i=!a&&(r||n!==c)||((e=n).nodeType?l(t,n,r):h(t,n,r));return e=null,i}];u<o;u++)if(n=r.relative[t[u].type])f=[yt(wt(f),n)];else{if((n=r.filter[t[u].type].apply(null,t[u].matches))[x]){for(i=++u;i<o&&!r.relative[t[i].type];i++);return bt(u>1&&wt(f),u>1&&vt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(V,"$1"),n,u<i&&_t(t.slice(u,i)),i<o&&_t(t=t.slice(i)),i<o&&vt(t))}f.push(n)}return wt(f)}return gt.prototype=r.filters=r.pseudos,r.setFilters=new gt,a=ot.tokenize=function(t,e){var n,i,o,a,s,u,c,l=E[t+" "];if(l)return e?0:l.slice(0);for(s=t,u=[],c=r.preFilter;s;){for(a in n&&!(i=B.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=H.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(V," ")}),s=s.slice(n.length)),r.filter)!(i=Y[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?ot.error(t):E(t,u).slice(0)},s=ot.compile=function(t,e){var n,i=[],o=[],s=T[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=_t(e[n]))[x]?i.push(s):o.push(s);(s=T(t,function(t,e){var n=e.length>0,i=t.length>0,o=function(o,a,s,u,l){var h,p,g,v=0,y="0",w=o&&[],x=[],b=c,M=o||i&&r.find.TAG("*",l),S=_+=null==b?1:Math.random()||.1,E=M.length;for(l&&(c=a===d||a||l);y!==E&&null!=(h=M[y]);y++){if(i&&h){for(p=0,a||h.ownerDocument===d||(f(h),s=!m);g=t[p++];)if(g(h,a||d,s)){u.push(h);break}l&&(_=S)}n&&((h=!g&&h)&&v--,o&&w.push(h))}if(v+=y,n&&y!==v){for(p=0;g=e[p++];)g(w,x,a,s);if(o){if(v>0)for(;y--;)w[y]||x[y]||(x[y]=R.call(u));x=xt(x)}P.apply(u,x),l&&!o&&x.length>0&&v+e.length>1&&ot.uniqueSort(u)}return l&&(_=S,c=b),w};return n?st(o):o}(o,i))).selector=t}return s},u=ot.select=function(t,e,n,i){var o,u,c,l,h,f="function"==typeof t&&t,d=!i&&a(t=f.selector||t);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&9===e.nodeType&&m&&r.relative[u[1].type]){if(!(e=(r.find.ID(c.matches[0].replace(K,tt),e)||[])[0]))return n;f&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(o=Y.needsContext.test(t)?0:u.length;o--&&!r.relative[l=(c=u[o]).type];)if((h=r.find[l])&&(i=h(c.matches[0].replace(K,tt),J.test(u[0].type)&&mt(e.parentNode)||e))){if(u.splice(o,1),!(t=i.length&&vt(u)))return P.apply(n,i),n;break}}return(f||s(t,d))(i,e,!m,n,!e||J.test(t)&&mt(e.parentNode)||e),n},n.sortStable=x.split("").sort(A).join("")===x,n.detectDuplicates=!!h,f(),n.sortDetached=ut(function(t){return 1&t.compareDocumentPosition(d.createElement("fieldset"))}),ut(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&ut(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ut(function(t){return null==t.getAttribute("disabled")})||ct(N,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),ot}(t);x.find=M,x.expr=M.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=M.uniqueSort,x.text=M.getText,x.isXMLDoc=M.isXML,x.contains=M.contains,x.escapeSelector=M.escape;var S=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&x(t).is(n))break;r.push(t)}return r},E=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},T=x.expr.match.needsContext;function A(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function k(t,e,n){return m(e)?x.grep(t,function(t,r){return!!e.call(t,r,t)!==n}):e.nodeType?x.grep(t,function(t){return t===e!==n}):"string"!=typeof e?x.grep(t,function(t){return u.call(e,t)>-1!==n}):x.filter(e,t,n)}x.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?x.find.matchesSelector(r,t)?[r]:[]:x.find.matches(t,x.grep(e,function(t){return 1===t.nodeType}))},x.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(x(t).filter(function(){for(e=0;e<r;e++)if(x.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)x.find(t,i[e],n);return r>1?x.uniqueSort(n):n},filter:function(t){return this.pushStack(k(this,t||[],!1))},not:function(t){return this.pushStack(k(this,t||[],!0))},is:function(t){return!!k(this,"string"==typeof t&&T.test(t)?x(t):t||[],!1).length}});var R,O=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(t,e,n){var i,o;if(!t)return this;if(n=n||R,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:O.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(x.merge(this,x.parseHTML(i[1],(e=e instanceof x?e[0]:e)&&e.nodeType?e.ownerDocument||e:r,!0)),C.test(i[1])&&x.isPlainObject(e))for(i in e)m(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==n.ready?n.ready(t):t(x):x.makeArray(t,this)}).prototype=x.fn,R=x(r);var P=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function L(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}x.fn.extend({has:function(t){var e=x(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(x.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&x(t);if(!T.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?x.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?u.call(x(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),x.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return S(t,"parentNode")},parentsUntil:function(t,e,n){return S(t,"parentNode",n)},next:function(t){return L(t,"nextSibling")},prev:function(t){return L(t,"previousSibling")},nextAll:function(t){return S(t,"nextSibling")},prevAll:function(t){return S(t,"previousSibling")},nextUntil:function(t,e,n){return S(t,"nextSibling",n)},prevUntil:function(t,e,n){return S(t,"previousSibling",n)},siblings:function(t){return E((t.parentNode||{}).firstChild,t)},children:function(t){return E(t.firstChild)},contents:function(t){return A(t,"iframe")?t.contentDocument:(A(t,"template")&&(t=t.content||t),x.merge([],t.childNodes))}},function(t,e){x.fn[t]=function(n,r){var i=x.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(D[t]||x.uniqueSort(i),P.test(t)&&i.reverse()),this.pushStack(i)}});var N=/[^\x20\t\r\n\f]+/g;function I(t){return t}function F(t){throw t}function z(t,e,n,r){var i;try{t&&m(i=t.promise)?i.call(t).done(e).fail(n):t&&m(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}x.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return x.each(t.match(N)||[],function(t,n){e[n]=!0}),e}(t):x.extend({},t);var e,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||t.once,r=e=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){x.each(n,function(n,r){m(r)?t.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==w(r)&&e(r)})}(arguments),n&&!e&&u()),this},remove:function(){return x.each(arguments,function(t,e){for(var n;(n=x.inArray(e,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(t){return t?x.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},x.extend({Deferred:function(e){var n=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return x.Deferred(function(e){x.each(n,function(n,r){var i=m(t[r[4]])&&t[r[4]];o[r[1]](function(){var t=i&&i.apply(this,arguments);t&&m(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[r[0]+"With"](this,i?[t]:arguments)})}),t=null}).promise()},then:function(e,r,i){var o=0;function a(e,n,r,i){return function(){var s=this,u=arguments,c=function(){var t,c;if(!(e<o)){if((t=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");m(c=t&&("object"==typeof t||"function"==typeof t)&&t.then)?i?c.call(t,a(o,n,I,i),a(o,n,F,i)):c.call(t,a(++o,n,I,i),a(o,n,F,i),a(o,n,I,n.notifyWith)):(r!==I&&(s=void 0,u=[t]),(i||n.resolveWith)(s,u))}},l=i?c:function(){try{c()}catch(t){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(t,l.stackTrace),e+1>=o&&(r!==F&&(s=void 0,u=[t]),n.rejectWith(s,u))}};e?l():(x.Deferred.getStackHook&&(l.stackTrace=x.Deferred.getStackHook()),t.setTimeout(l))}}return x.Deferred(function(t){n[0][3].add(a(0,t,m(i)?i:I,t.notifyWith)),n[1][3].add(a(0,t,m(e)?e:I)),n[2][3].add(a(0,t,m(r)?r:F))}).promise()},promise:function(t){return null!=t?x.extend(t,i):i}},o={};return x.each(n,function(t,e){var a=e[2],s=e[5];i[e[1]]=a.add,s&&a.add(function(){r=s},n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),a.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=o.call(arguments),a=x.Deferred(),s=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?o.call(arguments):n,--e||a.resolveWith(r,i)}};if(e<=1&&(z(t,a.done(s(n)).resolve,a.reject,!e),"pending"===a.state()||m(i[n]&&i[n].then)))return a.then();for(;n--;)z(i[n],s(n),a.reject);return a.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&U.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},x.readyException=function(e){t.setTimeout(function(){throw e})};var j=x.Deferred();function V(){r.removeEventListener("DOMContentLoaded",V),t.removeEventListener("load",V),x.ready()}x.fn.ready=function(t){return j.then(t).catch(function(t){x.readyException(t)}),this},x.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==t&&--x.readyWait>0||j.resolveWith(r,[x]))}}),x.ready.then=j.then,"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?t.setTimeout(x.ready):(r.addEventListener("DOMContentLoaded",V),t.addEventListener("load",V));var B=function(t,e,n,r,i,o,a){var s=0,u=t.length,c=null==n;if("object"===w(n))for(s in i=!0,n)B(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),c&&(a?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(x(t),n)})),e))for(;s<u;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:c?e.call(t):u?e(t[0],n):o},H=/^-ms-/,G=/-([a-z])/g;function q(t,e){return e.toUpperCase()}function W(t){return t.replace(H,"ms-").replace(G,q)}var Y=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function X(){this.expando=x.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Y(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[W(e)]=n;else for(r in e)i[W(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][W(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(W):(e=W(e))in r?[e]:e.match(N)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||x.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!x.isEmptyObject(e)}};var $=new X,Q=new X,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function K(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(J,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Z.test(t)?JSON.parse(t):t)}(n)}catch(t){}Q.set(t,e,n)}else n=void 0;return n}x.extend({hasData:function(t){return Q.hasData(t)||$.hasData(t)},data:function(t,e,n){return Q.access(t,e,n)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,n){return $.access(t,e,n)},_removeData:function(t,e){$.remove(t,e)}}),x.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=Q.get(o),1===o.nodeType&&!$.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=W(r.slice(5)),K(o,r,i[r]));$.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){Q.set(this,t)}):B(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=Q.get(o,t))?n:void 0!==(n=K(o,t))?n:void 0;this.each(function(){Q.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Q.remove(this,t)})}}),x.extend({queue:function(t,e,n){var r;if(t)return r=$.get(t,e=(e||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=$.access(t,e,x.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){var n=x.queue(t,e=e||"fx"),r=n.length,i=n.shift(),o=x._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){x.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return $.get(t,n)||$.access(t,n,{empty:x.Callbacks("once memory").add(function(){$.remove(t,[e+"queue",n])})})}}),x.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?x.queue(this[0],t):void 0===e?this:this.each(function(){var n=x.queue(this,t,e);x._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&x.dequeue(this,t)})},dequeue:function(t){return this.each(function(){x.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=x.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=$.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],rt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&x.contains(t.ownerDocument,t)&&"none"===x.css(t,"display")},it=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=a[o];return i};function ot(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return x.css(t,e,"")},u=s(),c=n&&n[3]||(x.cssNumber[e]?"":"px"),l=(x.cssNumber[e]||"px"!==c&&+u)&&et.exec(x.css(t,e));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;a--;)x.style(t,e,l+c),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),l/=o;x.style(t,e,(l*=2)+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var at={};function st(t){var e,n=t.ownerDocument,r=t.nodeName,i=at[r];return i||(e=n.body.appendChild(n.createElement(r)),i=x.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),at[r]=i,i)}function ut(t,e){for(var n,r,i=[],o=0,a=t.length;o<a;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=$.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&rt(r)&&(i[o]=st(r))):"none"!==n&&(i[o]="none",$.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}x.fn.extend({show:function(){return ut(this,!0)},hide:function(){return ut(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){rt(this)?x(this).show():x(this).hide()})}});var ct=/^(?:checkbox|radio)$/i,lt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ht=/^$|^module$|\/(?:java|ecma)script/i,ft={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function dt(t,e){var n;return n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&A(t,e)?x.merge([t],n):n}function pt(t,e){for(var n=0,r=t.length;n<r;n++)$.set(t[n],"globalEval",!e||$.get(e[n],"globalEval"))}ft.optgroup=ft.option,ft.tbody=ft.tfoot=ft.colgroup=ft.caption=ft.thead,ft.th=ft.td;var mt,gt,vt=/<|&#?\w+;/;function yt(t,e,n,r,i){for(var o,a,s,u,c,l,h=e.createDocumentFragment(),f=[],d=0,p=t.length;d<p;d++)if((o=t[d])||0===o)if("object"===w(o))x.merge(f,o.nodeType?[o]:o);else if(vt.test(o)){for(a=a||h.appendChild(e.createElement("div")),s=(lt.exec(o)||["",""])[1].toLowerCase(),a.innerHTML=(u=ft[s]||ft._default)[1]+x.htmlPrefilter(o)+u[2],l=u[0];l--;)a=a.lastChild;x.merge(f,a.childNodes),(a=h.firstChild).textContent=""}else f.push(e.createTextNode(o));for(h.textContent="",d=0;o=f[d++];)if(r&&x.inArray(o,r)>-1)i&&i.push(o);else if(c=x.contains(o.ownerDocument,o),a=dt(h.appendChild(o),"script"),c&&pt(a),n)for(l=0;o=a[l++];)ht.test(o.type||"")&&n.push(o);return h}mt=r.createDocumentFragment().appendChild(r.createElement("div")),(gt=r.createElement("input")).setAttribute("type","radio"),gt.setAttribute("checked","checked"),gt.setAttribute("name","t"),mt.appendChild(gt),p.checkClone=mt.cloneNode(!0).cloneNode(!0).lastChild.checked,mt.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!mt.cloneNode(!0).lastChild.defaultValue;var wt=r.documentElement,xt=/^key/,bt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_t=/^([^.]*)(?:\.(.+)|)/;function Mt(){return!0}function St(){return!1}function Et(){try{return r.activeElement}catch(t){}}function Tt(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)Tt(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=St;else if(!i)return t;return 1===o&&(a=i,(i=function(t){return x().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=x.guid++)),t.each(function(){x.event.add(this,e,i,r,n)})}x.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,c,l,h,f,d,p,m,g=$.get(t);if(g)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&x.find.matchesSelector(wt,i),n.guid||(n.guid=x.guid++),(u=g.events)||(u=g.events={}),(a=g.handle)||(a=g.handle=function(e){return"undefined"!=typeof x&&x.event.triggered!==e.type?x.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(N)||[""]).length;c--;)d=m=(s=_t.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),d&&(h=x.event.special[d]||{},h=x.event.special[d=(i?h.delegateType:h.bindType)||d]||{},l=x.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&x.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=u[d])||((f=u[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,r,p,a)||t.addEventListener&&t.addEventListener(d,a)),h.add&&(h.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),x.event.global[d]=!0)},remove:function(t,e,n,r,i){var o,a,s,u,c,l,h,f,d,p,m,g=$.hasData(t)&&$.get(t);if(g&&(u=g.events)){for(c=(e=(e||"").match(N)||[""]).length;c--;)if(d=m=(s=_t.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),d){for(h=x.event.special[d]||{},f=u[d=(r?h.delegateType:h.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)l=f[o],!i&&m!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(t,l));a&&!f.length&&(h.teardown&&!1!==h.teardown.call(t,p,g.handle)||x.removeEvent(t,d,g.handle),delete u[d])}else for(d in u)x.event.remove(t,d+e[c],n,r,!0);x.isEmptyObject(u)&&$.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=x.event.fix(t),u=new Array(arguments.length),c=($.get(this,"events")||{})[s.type]||[],l=x.event.special[s.type]||{};for(u[0]=s,e=1;e<arguments.length;e++)u[e]=arguments[e];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(a=x.event.handlers.call(this,s,c),e=0;(i=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((x.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,r,i,o,a,s=[],u=e.delegateCount,c=t.target;if(u&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?x(i,this).index(c)>-1:x.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,u<e.length&&s.push({elem:c,handlers:e.slice(u)}),s},addProp:function(t,e){Object.defineProperty(x.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[x.expando]?t:new x.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Et()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Et()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&A(this,"input"))return this.click(),!1},_default:function(t){return A(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},x.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},x.Event=function(t,e){if(!(this instanceof x.Event))return new x.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Mt:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&x.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Mt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Mt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Mt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&xt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&bt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},x.event.addProp),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){x.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||x.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),x.fn.extend({on:function(t,e,n,r){return Tt(this,t,e,n,r)},one:function(t,e,n,r){return Tt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,x(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=St),this.each(function(){x.event.remove(this,t,n,e)})}});var At=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ct=/<script|<style|<link/i,kt=/checked\s*(?:[^=]|=\s*.checked.)/i,Rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ot(t,e){return A(t,"table")&&A(11!==e.nodeType?e:e.firstChild,"tr")&&x(t).children("tbody")[0]||t}function Pt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Dt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Lt(t,e){var n,r,i,o,a,s,u,c;if(1===e.nodeType){if($.hasData(t)&&(o=$.access(t),a=$.set(e,o),c=o.events))for(i in delete a.handle,a.events={},c)for(n=0,r=c[i].length;n<r;n++)x.event.add(e,i,c[i][n]);Q.hasData(t)&&(s=Q.access(t),u=x.extend({},s),Q.set(e,u))}}function Nt(t,e,n,r){e=a.apply([],e);var i,o,s,u,c,l,h=0,f=t.length,d=f-1,g=e[0],v=m(g);if(v||f>1&&"string"==typeof g&&!p.checkClone&&kt.test(g))return t.each(function(i){var o=t.eq(i);v&&(e[0]=g.call(this,i,o.html())),Nt(o,e,n,r)});if(f&&(o=(i=yt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=x.map(dt(i,"script"),Pt)).length;h<f;h++)c=i,h!==d&&(c=x.clone(c,!0,!0),u&&x.merge(s,dt(c,"script"))),n.call(t[h],c,h);if(u)for(l=s[s.length-1].ownerDocument,x.map(s,Dt),h=0;h<u;h++)ht.test((c=s[h]).type||"")&&!$.access(c,"globalEval")&&x.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?x._evalUrl&&x._evalUrl(c.src):y(c.textContent.replace(Rt,""),l,c))}return t}function It(t,e,n){for(var r,i=e?x.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||x.cleanData(dt(r)),r.parentNode&&(n&&x.contains(r.ownerDocument,r)&&pt(dt(r,"script")),r.parentNode.removeChild(r));return t}x.extend({htmlPrefilter:function(t){return t.replace(At,"<$1></$2>")},clone:function(t,e,n){var r,i,o,a,s,u,c,l=t.cloneNode(!0),h=x.contains(t.ownerDocument,t);if(!(p.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||x.isXMLDoc(t)))for(a=dt(l),r=0,i=(o=dt(t)).length;r<i;r++)s=o[r],"input"===(c=(u=a[r]).nodeName.toLowerCase())&&ct.test(s.type)?u.checked=s.checked:"input"!==c&&"textarea"!==c||(u.defaultValue=s.defaultValue);if(e)if(n)for(o=o||dt(t),a=a||dt(l),r=0,i=o.length;r<i;r++)Lt(o[r],a[r]);else Lt(t,l);return(a=dt(l,"script")).length>0&&pt(a,!h&&dt(t,"script")),l},cleanData:function(t){for(var e,n,r,i=x.event.special,o=0;void 0!==(n=t[o]);o++)if(Y(n)){if(e=n[$.expando]){if(e.events)for(r in e.events)i[r]?x.event.remove(n,r):x.removeEvent(n,r,e.handle);n[$.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),x.fn.extend({detach:function(t){return It(this,t,!0)},remove:function(t){return It(this,t)},text:function(t){return B(this,function(t){return void 0===t?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Nt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ot(this,t).appendChild(t)})},prepend:function(){return Nt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ot(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Nt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Nt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(x.cleanData(dt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return x.clone(this,t,e)})},html:function(t){return B(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ct.test(t)&&!ft[(lt.exec(t)||["",""])[1].toLowerCase()]){t=x.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(x.cleanData(dt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Nt(this,arguments,function(e){var n=this.parentNode;x.inArray(this,t)<0&&(x.cleanData(dt(this)),n&&n.replaceChild(e,this))},t)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){x.fn[t]=function(t){for(var n,r=[],i=x(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),x(i[a])[e](n),s.apply(r,n.get());return this.pushStack(r)}});var Ft=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),zt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Ut=new RegExp(nt.join("|"),"i");function jt(t,e,n){var r,i,o,a,s=t.style;return(n=n||zt(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||x.contains(t.ownerDocument,t)||(a=x.style(t,e)),!p.pixelBoxStyles()&&Ft.test(a)&&Ut.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Vt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",wt.appendChild(c).appendChild(l);var e=t.getComputedStyle(l);i="1%"!==e.top,u=12===n(e.marginLeft),l.style.right="60%",s=36===n(e.right),o=36===n(e.width),l.style.position="absolute",a=36===l.offsetWidth||"absolute",wt.removeChild(c),l=null}}function n(t){return Math.round(parseFloat(t))}var i,o,a,s,u,c=r.createElement("div"),l=r.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===l.style.backgroundClip,x.extend(p,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),a}}))}();var Bt=/^(none|table(?!-c[ea]).+)/,Ht=/^--/,Gt={position:"absolute",visibility:"hidden",display:"block"},qt={letterSpacing:"0",fontWeight:"400"},Wt=["Webkit","Moz","ms"],Yt=r.createElement("div").style;function Xt(t){var e=x.cssProps[t];return e||(e=x.cssProps[t]=function(t){if(t in Yt)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Wt.length;n--;)if((t=Wt[n]+e)in Yt)return t}(t)||t),e}function $t(t,e,n){var r=et.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function Qt(t,e,n,r,i,o){var a="width"===e?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=x.css(t,n+nt[a],!0,i)),r?("content"===n&&(u-=x.css(t,"padding"+nt[a],!0,i)),"margin"!==n&&(u-=x.css(t,"border"+nt[a]+"Width",!0,i))):(u+=x.css(t,"padding"+nt[a],!0,i),"padding"!==n?u+=x.css(t,"border"+nt[a]+"Width",!0,i):s+=x.css(t,"border"+nt[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-s-.5))),u}function Zt(t,e,n){var r=zt(t),i=jt(t,e,r),o="border-box"===x.css(t,"boxSizing",!1,r),a=o;if(Ft.test(i)){if(!n)return i;i="auto"}return a=a&&(p.boxSizingReliable()||i===t.style[e]),("auto"===i||!parseFloat(i)&&"inline"===x.css(t,"display",!1,r))&&(i=t["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),(i=parseFloat(i)||0)+Qt(t,e,n||(o?"border":"content"),a,r,i)+"px"}function Jt(t,e,n,r,i){return new Jt.prototype.init(t,e,n,r,i)}x.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=jt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=W(e),u=Ht.test(e),c=t.style;if(u||(e=Xt(s)),a=x.cssHooks[e]||x.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:c[e];"string"==(o=typeof n)&&(i=et.exec(n))&&i[1]&&(n=ot(t,e,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(x.cssNumber[s]?"":"px")),p.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(u?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,r){var i,o,a,s=W(e);return Ht.test(e)||(e=Xt(s)),(a=x.cssHooks[e]||x.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=jt(t,e,r)),"normal"===i&&e in qt&&(i=qt[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),x.each(["height","width"],function(t,e){x.cssHooks[e]={get:function(t,n,r){if(n)return!Bt.test(x.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Zt(t,e,r):it(t,Gt,function(){return Zt(t,e,r)})},set:function(t,n,r){var i,o=zt(t),a="border-box"===x.css(t,"boxSizing",!1,o),s=r&&Qt(t,e,r,a,o);return a&&p.scrollboxSize()===o.position&&(s-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-Qt(t,e,"border",!1,o)-.5)),s&&(i=et.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=x.css(t,e)),$t(0,n,s)}}}),x.cssHooks.marginLeft=Vt(p.reliableMarginLeft,function(t,e){if(e)return(parseFloat(jt(t,"marginLeft"))||t.getBoundingClientRect().left-it(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(t,e){x.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+nt[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(x.cssHooks[t+e].set=$t)}),x.fn.extend({css:function(t,e){return B(this,function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=zt(t),i=e.length;a<i;a++)o[e[a]]=x.css(t,e[a],!1,r);return o}return void 0!==n?x.style(t,e,n):x.css(t,e)},t,e,arguments.length>1)}}),x.Tween=Jt,(Jt.prototype={constructor:Jt,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||x.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var t=Jt.propHooks[this.prop];return t&&t.get?t.get(this):Jt.propHooks._default.get(this)},run:function(t){var e,n=Jt.propHooks[this.prop];return this.pos=e=this.options.duration?x.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Jt.propHooks._default.set(this),this}}).init.prototype=Jt.prototype,(Jt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=x.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){x.fx.step[t.prop]?x.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[x.cssProps[t.prop]]&&!x.cssHooks[t.prop]?t.elem[t.prop]=t.now:x.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=Jt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},x.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},x.fx=Jt.prototype.init,x.fx.step={};var Kt,te,ee=/^(?:toggle|show|hide)$/,ne=/queueHooks$/;function re(){te&&(!1===r.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(re):t.setTimeout(re,x.fx.interval),x.fx.tick())}function ie(){return t.setTimeout(function(){Kt=void 0}),Kt=Date.now()}function oe(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=nt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function ae(t,e,n){for(var r,i=(se.tweeners[e]||[]).concat(se.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function se(t,e,n){var r,i,o=0,a=se.prefilters.length,s=x.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=Kt||ie(),n=Math.max(0,c.startTime+c.duration-e),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return s.notifyWith(t,[c,r,n]),r<1&&a?n:(a||s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:x.extend({},e),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:e,originalOptions:n,startTime:Kt||ie(),duration:n.duration,tweens:[],createTween:function(e,n){var r=x.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return e?(s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c,e])):s.rejectWith(t,[c,e]),this}}),l=c.props;for(function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=W(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=x.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(l,c.opts.specialEasing);o<a;o++)if(r=se.prefilters[o].call(c,t,l,c.opts))return m(r.stop)&&(x._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return x.map(l,ae,c),m(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),x.fx.timer(x.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c}x.Animation=x.extend(se,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ot(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){m(t)?(e=t,t=["*"]):t=t.match(N);for(var n,r=0,i=t.length;r<i;r++)(se.tweeners[n=t[r]]=se.tweeners[n]||[]).unshift(e)},prefilters:[function(t,e,n){var r,i,o,a,s,u,c,l,h="width"in e||"height"in e,f=this,d={},p=t.style,m=t.nodeType&&rt(t),g=$.get(t,"fxshow");for(r in n.queue||(null==(a=x._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,x.queue(t,"fx").length||a.empty.fire()})})),e)if(ee.test(i=e[r])){if(delete e[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}d[r]=g&&g[r]||x.style(t,r)}if((u=!x.isEmptyObject(e))||!x.isEmptyObject(d))for(r in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=g&&g.display)&&(c=$.get(t,"display")),"none"===(l=x.css(t,"display"))&&(c?l=c:(ut([t],!0),c=t.style.display||c,l=x.css(t,"display"),ut([t]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===x.css(t,"float")&&(u||(f.done(function(){p.display=c}),null==c&&(c="none"===(l=p.display)?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1,d)u||(g?"hidden"in g&&(m=g.hidden):g=$.access(t,"fxshow",{display:c}),o&&(g.hidden=!m),m&&ut([t],!0),f.done(function(){for(r in m||ut([t]),$.remove(t,"fxshow"),d)x.style(t,r,d[r])})),u=ae(m?g[r]:0,r,f),r in g||(g[r]=u.start,m&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?se.prefilters.unshift(t):se.prefilters.push(t)}}),x.speed=function(t,e,n){var r=t&&"object"==typeof t?x.extend({},t):{complete:n||!n&&e||m(t)&&t,duration:t,easing:n&&e||e&&!m(e)&&e};return x.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.fn.extend({fadeTo:function(t,e,n,r){return this.filter(rt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=x.isEmptyObject(t),o=x.speed(e,n,r),a=function(){var e=se(this,x.extend({},t),o);(i||$.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=x.timers,a=$.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ne.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||x.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=$.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),x.each(["toggle","show","hide"],function(t,e){var n=x.fn[e];x.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(oe(e,!0),t,r,i)}}),x.each({slideDown:oe("show"),slideUp:oe("hide"),slideToggle:oe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){x.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),x.timers=[],x.fx.tick=function(){var t,e=0,n=x.timers;for(Kt=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||x.fx.stop(),Kt=void 0},x.fx.timer=function(t){x.timers.push(t),x.fx.start()},x.fx.interval=13,x.fx.start=function(){te||(te=!0,re())},x.fx.stop=function(){te=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(e,n){return e=x.fx&&x.fx.speeds[e]||e,this.queue(n=n||"fx",function(n,r){var i=t.setTimeout(n,e);r.stop=function(){t.clearTimeout(i)}})},function(){var t=r.createElement("input"),e=r.createElement("select").appendChild(r.createElement("option"));t.type="checkbox",p.checkOn=""!==t.value,p.optSelected=e.selected,(t=r.createElement("input")).value="t",t.type="radio",p.radioValue="t"===t.value}();var ue,ce=x.expr.attrHandle;x.fn.extend({attr:function(t,e){return B(this,x.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){x.removeAttr(this,t)})}}),x.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?x.prop(t,e,n):(1===o&&x.isXMLDoc(t)||(i=x.attrHooks[e.toLowerCase()]||(x.expr.match.bool.test(e)?ue:void 0)),void 0!==n?null===n?void x.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=x.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&"radio"===e&&A(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(N);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),ue={set:function(t,e,n){return!1===e?x.removeAttr(t,n):t.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ce[e]||x.find.attr;ce[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=ce[a],ce[a]=i,i=null!=n(t,e,r)?a:null,ce[a]=o),i}});var le=/^(?:input|select|textarea|button)$/i,he=/^(?:a|area)$/i;function fe(t){return(t.match(N)||[]).join(" ")}function de(t){return t.getAttribute&&t.getAttribute("class")||""}function pe(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(N)||[]}x.fn.extend({prop:function(t,e){return B(this,x.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[x.propFix[t]||t]})}}),x.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&x.isXMLDoc(t)||(i=x.propHooks[e=x.propFix[e]||e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=x.find.attr(t,"tabindex");return e?parseInt(e,10):le.test(t.nodeName)||he.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(x.propHooks.selected={get:function(t){return null},set:function(t){}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){x(this).addClass(t.call(this,e,de(this)))});if((e=pe(t)).length)for(;n=this[u++];)if(i=de(n),r=1===n.nodeType&&" "+fe(i)+" "){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=fe(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){x(this).removeClass(t.call(this,e,de(this)))});if(!arguments.length)return this.attr("class","");if((e=pe(t)).length)for(;n=this[u++];)if(i=de(n),r=1===n.nodeType&&" "+fe(i)+" "){for(a=0;o=e[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=fe(r))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):m(t)?this.each(function(n){x(this).toggleClass(t.call(this,n,de(this),e),e)}):this.each(function(){var e,i,o,a;if(r)for(i=0,o=x(this),a=pe(t);e=a[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=de(this))&&$.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":$.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+fe(de(n))+" ").indexOf(e)>-1)return!0;return!1}});var me=/\r/g;x.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=m(t),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,x(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=x.map(i,function(t){return null==t?"":t+""})),(e=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=x.valHooks[i.type]||x.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(me,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(t){var e=x.find.attr(t,"value");return null!=e?e:fe(x.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(e=x(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=x.makeArray(e),a=i.length;a--;)((r=i[a]).selected=x.inArray(x.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=x.inArray(x(t).val(),e)>-1}},p.checkOn||(x.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),p.focusin="onfocusin"in t;var ge=/^(?:focusinfocus|focusoutblur)$/,ve=function(t){t.stopPropagation()};x.extend(x.event,{trigger:function(e,n,i,o){var a,s,u,c,l,f,d,p,v=[i||r],y=h.call(e,"type")?e.type:e,w=h.call(e,"namespace")?e.namespace.split("."):[];if(s=p=u=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!ge.test(y+x.event.triggered)&&(y.indexOf(".")>-1&&(y=(w=y.split(".")).shift(),w.sort()),l=y.indexOf(":")<0&&"on"+y,(e=e[x.expando]?e:new x.Event(y,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=w.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:x.makeArray(n,[e]),d=x.event.special[y]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!g(i)){for(ge.test((c=d.delegateType||y)+y)||(s=s.parentNode);s;s=s.parentNode)v.push(s),u=s;u===(i.ownerDocument||r)&&v.push(u.defaultView||u.parentWindow||t)}for(a=0;(s=v[a++])&&!e.isPropagationStopped();)p=s,e.type=a>1?c:d.bindType||y,(f=($.get(s,"events")||{})[e.type]&&$.get(s,"handle"))&&f.apply(s,n),(f=l&&s[l])&&f.apply&&Y(s)&&(e.result=f.apply(s,n),!1===e.result&&e.preventDefault());return e.type=y,o||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!Y(i)||l&&m(i[y])&&!g(i)&&((u=i[l])&&(i[l]=null),x.event.triggered=y,e.isPropagationStopped()&&p.addEventListener(y,ve),i[y](),e.isPropagationStopped()&&p.removeEventListener(y,ve),x.event.triggered=void 0,u&&(i[l]=u)),e.result}},simulate:function(t,e,n){var r=x.extend(new x.Event,n,{type:t,isSimulated:!0});x.event.trigger(r,null,e)}}),x.fn.extend({trigger:function(t,e){return this.each(function(){x.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return x.event.trigger(t,e,n,!0)}}),p.focusin||x.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){x.event.simulate(e,t.target,x.event.fix(t))};x.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=$.access(r,e);i||r.addEventListener(t,n,!0),$.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=$.access(r,e)-1;i?$.access(r,e,i):(r.removeEventListener(t,n,!0),$.remove(r,e))}}});var ye=t.location,we=Date.now(),xe=/\?/;x.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+e),n};var be=/\[\]$/,_e=/\r?\n/g,Me=/^(?:submit|button|image|reset|file)$/i,Se=/^(?:input|select|textarea|keygen)/i;function Ee(t,e,n,r){var i;if(Array.isArray(e))x.each(e,function(e,i){n||be.test(t)?r(t,i):Ee(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==w(e))r(t,e);else for(i in e)Ee(t+"["+i+"]",e[i],n,r)}x.param=function(t,e){var n,r=[],i=function(t,e){var n=m(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!x.isPlainObject(t))x.each(t,function(){i(this.name,this.value)});else for(n in t)Ee(n,t[n],e,i);return r.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=x.prop(this,"elements");return t?x.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!x(this).is(":disabled")&&Se.test(this.nodeName)&&!Me.test(t)&&(this.checked||!ct.test(t))}).map(function(t,e){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,function(t){return{name:e.name,value:t.replace(_e,"\r\n")}}):{name:e.name,value:n.replace(_e,"\r\n")}}).get()}});var Te=/%20/g,Ae=/#.*$/,Ce=/([?&])_=[^&]*/,ke=/^(.*?):[ \t]*([^\r\n]*)$/gm,Re=/^(?:GET|HEAD)$/,Oe=/^\/\//,Pe={},De={},Le="*/".concat("*"),Ne=r.createElement("a");function Ie(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(N)||[];if(m(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Fe(t,e,n,r){var i={},o=t===De;function a(s){var u;return i[s]=!0,x.each(t[s]||[],function(t,s){var c=s(e,n,r);return"string"!=typeof c||o||i[c]?o?!(u=c):void 0:(e.dataTypes.unshift(c),a(c),!1)}),u}return a(e.dataTypes[0])||!i["*"]&&a("*")}function ze(t,e){var n,r,i=x.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&x.extend(!0,t,r),t}Ne.href=ye.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ye.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ye.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Le,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ze(ze(t,x.ajaxSettings),e):ze(x.ajaxSettings,t)},ajaxPrefilter:Ie(Pe),ajaxTransport:Ie(De),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0);var i,o,a,s,u,c,l,h,f,d,p=x.ajaxSetup({},n=n||{}),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?x(m):x.event,v=x.Deferred(),y=x.Callbacks("once memory"),w=p.statusCode||{},b={},_={},M="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(l){if(!s)for(s={};e=ke.exec(a);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(t,e){return null==l&&(t=_[t.toLowerCase()]=_[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==l&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)S.always(t[S.status]);else for(e in t)w[e]=[w[e],t[e]];return this},abort:function(t){var e=t||M;return i&&i.abort(e),E(0,e),this}};if(v.promise(S),p.url=((e||p.url||ye.href)+"").replace(Oe,ye.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(N)||[""],null==p.crossDomain){c=r.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Ne.protocol+"//"+Ne.host!=c.protocol+"//"+c.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),Fe(Pe,p,n,S),l)return S;for(f in(h=x.event&&p.global)&&0==x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Re.test(p.type),o=p.url.replace(Ae,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Te,"+")):(d=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(xe.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Ce,"$1"),d=(xe.test(o)?"&":"?")+"_="+we+++d),p.url=o+d),p.ifModified&&(x.lastModified[o]&&S.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&S.setRequestHeader("If-None-Match",x.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Le+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(f,p.headers[f]);if(p.beforeSend&&(!1===p.beforeSend.call(m,S,p)||l))return S.abort();if(M="abort",y.add(p.complete),S.done(p.success),S.fail(p.error),i=Fe(De,p,n,S)){if(S.readyState=1,h&&g.trigger("ajaxSend",[S,p]),l)return S;p.async&&p.timeout>0&&(u=t.setTimeout(function(){S.abort("timeout")},p.timeout));try{l=!1,i.send(b,E)}catch(t){if(l)throw t;E(-1,t)}}else E(-1,"No Transport");function E(e,n,r,s){var c,f,d,b,_,M=n;l||(l=!0,u&&t.clearTimeout(u),i=void 0,a=s||"",S.readyState=e>0?4:0,c=e>=200&&e<300||304===e,r&&(b=function(t,e,n){for(var r,i,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(p,S,r)),b=function(t,e,n,r){var i,o,a,s,u,c={},l=t.dataTypes.slice();if(l[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=c[u+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(p,b,S,c),c?(p.ifModified&&((_=S.getResponseHeader("Last-Modified"))&&(x.lastModified[o]=_),(_=S.getResponseHeader("etag"))&&(x.etag[o]=_)),204===e||"HEAD"===p.type?M="nocontent":304===e?M="notmodified":(M=b.state,f=b.data,c=!(d=b.error))):(d=M,!e&&M||(M="error",e<0&&(e=0))),S.status=e,S.statusText=(n||M)+"",c?v.resolveWith(m,[f,M,S]):v.rejectWith(m,[S,M,d]),S.statusCode(w),w=void 0,h&&g.trigger(c?"ajaxSuccess":"ajaxError",[S,p,c?f:d]),y.fireWith(m,[S,M]),h&&(g.trigger("ajaxComplete",[S,p]),--x.active||x.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,n){return x.get(t,e,n,"json")},getScript:function(t,e){return x.get(t,void 0,e,"script")}}),x.each(["get","post"],function(t,e){x[e]=function(t,n,r,i){return m(n)&&(i=i||r,r=n,n=void 0),x.ajax(x.extend({url:t,type:e,dataType:i,data:n,success:r},x.isPlainObject(t)&&t))}}),x._evalUrl=function(t){return x.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},x.fn.extend({wrapAll:function(t){var e;return this[0]&&(m(t)&&(t=t.call(this[0])),e=x(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return m(t)?this.each(function(e){x(this).wrapInner(t.call(this,e))}):this.each(function(){var e=x(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=m(t);return this.each(function(n){x(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(t){return!x.expr.pseudos.visible(t)},x.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Ue={0:200,1223:204},je=x.ajaxSettings.xhr();p.cors=!!je&&"withCredentials"in je,p.ajax=je=!!je,x.ajaxTransport(function(e){var n,r;if(p.cors||je&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);n=function(t){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Ue[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}}),x.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return x.globalEval(t),t}}}),x.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),x.ajaxTransport("script",function(t){var e,n;if(t.crossDomain)return{send:function(i,o){e=x("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),r.head.appendChild(e[0])},abort:function(){n&&n()}}});var Ve,Be=[],He=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Be.pop()||x.expando+"_"+we++;return this[t]=!0,t}}),x.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,a,s=!1!==e.jsonp&&(He.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&He.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(He,"$1"+i):!1!==e.jsonp&&(e.url+=(xe.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||x.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always(function(){void 0===o?x(t).removeProp(i):t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,Be.push(i)),a&&m(o)&&o(a[0]),a=o=void 0}),"script"}),p.createHTMLDocument=((Ve=r.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ve.childNodes.length),x.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(p.createHTMLDocument?((i=(e=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,e.head.appendChild(i)):e=r),o=C.exec(t),a=!n&&[],o?[e.createElement(o[1])]:(o=yt([t],e,a),a&&a.length&&x(a).remove(),x.merge([],o.childNodes)));var i,o,a},x.fn.load=function(t,e,n){var r,i,o,a=this,s=t.indexOf(" ");return s>-1&&(r=fe(t.slice(s)),t=t.slice(0,s)),m(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&x.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?x("<div>").append(x.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){x.fn[e]=function(t){return this.on(e,t)}}),x.expr.pseudos.animated=function(t){return x.grep(x.timers,function(e){return t===e.elem}).length},x.offset={setOffset:function(t,e,n){var r,i,o,a,s,u,c=x.css(t,"position"),l=x(t),h={};"static"===c&&(t.style.position="relative"),s=l.offset(),o=x.css(t,"top"),u=x.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1?(a=(r=l.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(e)&&(e=e.call(t,n,x.extend({},s))),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+i),"using"in e?e.using.call(t,h):l.css(h)}},x.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){x.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?{top:(e=r.getBoundingClientRect()).top+(n=r.ownerDocument.defaultView).pageYOffset,left:e.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===x.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===x.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=x(t).offset()).top+=x.css(t,"borderTopWidth",!0),i.left+=x.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-x.css(r,"marginTop",!0),left:e.left-i.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===x.css(t,"position");)t=t.offsetParent;return t||wt})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;x.fn[t]=function(r){return B(this,function(t,r,i){var o;if(g(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i},t,r,arguments.length)}}),x.each(["top","left"],function(t,e){x.cssHooks[e]=Vt(p.pixelPosition,function(t,n){if(n)return n=jt(t,e),Ft.test(n)?x(t).position()[e]+"px":n})}),x.each({Height:"height",Width:"width"},function(t,e){x.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){x.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return B(this,function(e,n,i){var o;return g(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?x.css(e,n,s):x.style(e,n,i,s)},e,a?i:void 0,a)}})}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){x.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),x.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),x.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),x.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),m(t))return r=o.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(o.call(arguments)))}).guid=t.guid=t.guid||x.guid++,i},x.holdReady=function(t){t?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=A,x.isFunction=m,x.isWindow=g,x.camelCase=W,x.type=w,x.now=Date.now,x.isNumeric=function(t){var e=x.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var Ge=t.jQuery,qe=t.$;return x.noConflict=function(e){return t.$===x&&(t.$=qe),e&&t.jQuery===x&&(t.jQuery=Ge),x},e||(t.jQuery=t.$=x),x}),function(t,e,n,r){"use strict";var i,o=["","webkit","Moz","MS","ms","o"],a=e.createElement("div"),s="function",u=Math.round,c=Math.abs,l=Date.now;function h(t,e,n){return setTimeout(y(t,n),e)}function f(t,e,n){return!!Array.isArray(t)&&(d(t,n[e],n),!0)}function d(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==r)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function p(e,n,r){var i="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=t.console&&(t.console.warn||t.console.log);return o&&o.call(t.console,i,r),e.apply(this,arguments)}}i="function"!=typeof Object.assign?function(t){if(t===r||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==r&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e}:Object.assign;var m=p(function(t,e,n){for(var i=Object.keys(e),o=0;o<i.length;)(!n||n&&t[i[o]]===r)&&(t[i[o]]=e[i[o]]),o++;return t},"extend","Use `assign`."),g=p(function(t,e){return m(t,e,!0)},"merge","Use `assign`.");function v(t,e,n){var r,o=e.prototype;(r=t.prototype=Object.create(o)).constructor=t,r._super=o,n&&i(r,n)}function y(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return typeof t==s?t.apply(e&&e[0]||r,e):t}function x(t,e){return t===r?e:t}function b(t,e,n){d(E(e),function(e){t.addEventListener(e,n,!1)})}function _(t,e,n){d(E(e),function(e){t.removeEventListener(e,n,!1)})}function M(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function S(t,e){return t.indexOf(e)>-1}function E(t){return t.trim().split(/\s+/g)}function T(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function A(t){return Array.prototype.slice.call(t,0)}function C(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];T(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function k(t,e){for(var n,i,a=e[0].toUpperCase()+e.slice(1),s=0;s<o.length;){if((i=(n=o[s])?n+a:e)in t)return i;s++}return r}var R=1;function O(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t}var P="ontouchstart"in t,D=k(t,"PointerEvent")!==r,L=P&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),N=25,I=1,F=4,z=8,U=1,j=2,V=4,B=8,H=16,G=j|V,q=B|H,W=G|q,Y=["x","y"],X=["clientX","clientY"];function $(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&n.handler(e)},this.init()}function Q(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,a=e&I&&i-o==0,s=e&(F|z)&&i-o==0;n.isFirst=!!a,n.isFinal=!!s,a&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,o=i.length;n.firstInput||(n.firstInput=Z(e)),o>1&&!n.firstMultiple?n.firstMultiple=Z(e):1===o&&(n.firstMultiple=!1);var a=n.firstInput,s=n.firstMultiple,u=s?s.center:a.center,h=e.center=J(i);e.timeStamp=l(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=nt(u,h),e.distance=et(u,h),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==I&&o.eventType!==F||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=tt(e.deltaX,e.deltaY);var f,d,p=K(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=c(p.x)>c(p.y)?p.x:p.y,e.scale=s?(f=s.pointers,et((d=i)[0],d[1],X)/et(f[0],f[1],X)):1,e.rotation=s?function(t,e){return nt(i[1],i[0],X)+nt(t[1],t[0],X)}(s.pointers):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,o,a,s=t.lastInterval||e,u=e.timeStamp-s.timeStamp;if(e.eventType!=z&&(u>N||s.velocity===r)){var l=e.deltaX-s.deltaX,h=e.deltaY-s.deltaY,f=K(u,l,h);i=f.x,o=f.y,n=c(f.x)>c(f.y)?f.x:f.y,a=tt(l,h),t.lastInterval=e}else n=s.velocity,i=s.velocityX,o=s.velocityY,a=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=o,e.direction=a}(n,e);var m=t.element;M(e.srcEvent.target,m)&&(m=e.srcEvent.target),e.target=m}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function Z(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:u(t.pointers[n].clientX),clientY:u(t.pointers[n].clientY)},n++;return{timeStamp:l(),pointers:e,center:J(e),deltaX:t.deltaX,deltaY:t.deltaY}}function J(t){var e=t.length;if(1===e)return{x:u(t[0].clientX),y:u(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:u(n/e),y:u(r/e)}}function K(t,e,n){return{x:e/t||0,y:n/t||0}}function tt(t,e){return t===e?U:c(t)>=c(e)?t<0?j:V:e<0?B:H}function et(t,e,n){n||(n=Y);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function nt(t,e,n){return n||(n=Y),180*Math.atan2(e[n[1]]-t[n[1]],e[n[0]]-t[n[0]])/Math.PI}$.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(O(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(O(this.element),this.evWin,this.domHandler)}};var rt={mousedown:I,mousemove:2,mouseup:F},it="mousedown",ot="mousemove mouseup";function at(){this.evEl=it,this.evWin=ot,this.pressed=!1,$.apply(this,arguments)}v(at,$,{handler:function(t){var e=rt[t.type];e&I&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=F),this.pressed&&(e&F&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var st={pointerdown:I,pointermove:2,pointerup:F,pointercancel:z,pointerout:z},ut={2:"touch",3:"pen",4:"mouse",5:"kinect"},ct="pointerdown",lt="pointermove pointerup pointercancel";function ht(){this.evEl=ct,this.evWin=lt,$.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}t.MSPointerEvent&&!t.PointerEvent&&(ct="MSPointerDown",lt="MSPointerMove MSPointerUp MSPointerCancel"),v(ht,$,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=st[r],o=ut[t.pointerType]||t.pointerType,a="touch"==o,s=T(e,t.pointerId,"pointerId");i&I&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(F|z)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var ft={touchstart:I,touchmove:2,touchend:F,touchcancel:z},dt="touchstart",pt="touchstart touchmove touchend touchcancel";function mt(){this.evTarget=dt,this.evWin=pt,this.started=!1,$.apply(this,arguments)}v(mt,$,{handler:function(t){var e=ft[t.type];if(e===I&&(this.started=!0),this.started){var n=(function(t,e){var n=A(t.touches),r=A(t.changedTouches);return e&(F|z)&&(n=C(n.concat(r),"identifier",!0)),[n,r]}).call(this,t,e);e&(F|z)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var gt={touchstart:I,touchmove:2,touchend:F,touchcancel:z},vt="touchstart touchmove touchend touchcancel";function yt(){this.evTarget=vt,this.targetIds={},$.apply(this,arguments)}v(yt,$,{handler:function(t){var e=gt[t.type],n=(function(t,e){var n=A(t.touches),r=this.targetIds;if(e&(2|I)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=A(t.changedTouches),s=[],u=this.target;if(o=n.filter(function(t){return M(t.target,u)}),e===I)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(F|z)&&delete r[a[i].identifier],i++;return s.length?[C(o.concat(s),"identifier",!0),s]:void 0}).call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var wt=2500;function xt(){$.apply(this,arguments);var t=y(this.handler,this);this.touch=new yt(this.manager,t),this.mouse=new at(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function bt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)},wt)}}v(xt,$,{handler:function(t,e,n){var r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if("touch"==n.pointerType)(function(t,e){t&I?(this.primaryTouch=e.changedPointers[0].identifier,bt.call(this,e)):t&(F|z)&&bt.call(this,e)}).call(this,e,n);else if(r&&(function(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=25&&a<=25)return!0}return!1}).call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var _t=k(a.style,"touchAction"),Mt=_t!==r,St=function(){if(!Mt)return!1;var e={},n=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){e[r]=!n||t.CSS.supports("touch-action",r)}),e}();function Et(t,e){this.manager=t,this.set(e)}Et.prototype={set:function(t){"compute"==t&&(t=this.compute()),Mt&&this.manager.element.style&&St[t]&&(this.manager.element.style[_t]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return d(this.manager.recognizers,function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(S(t,"none"))return"none";var e=S(t,"pan-x"),n=S(t,"pan-y");return e&&n?"none":e||n?e?"pan-x":"pan-y":S(t,"manipulation")?"manipulation":"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=S(r,"none")&&!St.none,o=S(r,"pan-y")&&!St["pan-y"],a=S(r,"pan-x")&&!St["pan-x"];if(i&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;if(!a||!o)return i||o&&n&G||a&&n&q?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Tt=1,At=2,Ct=4,kt=8,Rt=kt,Ot=16;function Pt(t){this.options=i({},this.defaults,t||{}),this.id=R++,this.manager=null,this.options.enable=x(this.options.enable,!0),this.state=Tt,this.simultaneous={},this.requireFail=[]}function Dt(t){return t&Ot?"cancel":t&kt?"end":t&Ct?"move":t&At?"start":""}function Lt(t){return t==H?"down":t==B?"up":t==j?"left":t==V?"right":""}function Nt(t,e){var n=e.manager;return n?n.get(t):t}function It(){Pt.apply(this,arguments)}function Ft(){It.apply(this,arguments),this.pX=null,this.pY=null}function zt(){It.apply(this,arguments)}function Ut(){Pt.apply(this,arguments),this._timer=null,this._input=null}function jt(){It.apply(this,arguments)}function Vt(){It.apply(this,arguments)}function Bt(){Pt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ht(t,e){return(e=e||{}).recognizers=x(e.recognizers,Ht.defaults.preset),new Gt(t,e)}function Gt(t,e){var n;this.options=i({},Ht.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(D?ht:L?yt:P?xt:at))(n,Q),this.touchAction=new Et(this,this.options.touchAction),qt(this,!0),d(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function qt(t,e){var n,r=t.element;r.style&&(d(t.options.cssProps,function(i,o){n=k(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}Pt.prototype={defaults:{},set:function(t){return i(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(f(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Nt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return f(t,"dropRecognizeWith",this)?this:(t=Nt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(f(t,"requireFailure",this))return this;var e=this.requireFail;return-1===T(e,t=Nt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(f(t,"dropRequireFailure",this))return this;t=Nt(t,this);var e=T(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<kt&&r(e.options.event+Dt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=kt&&r(e.options.event+Dt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Tt)))return!1;t++}return!0},recognize:function(t){var e=i({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Rt|Ot|32)&&(this.state=Tt),this.state=this.process(e),this.state&(At|Ct|kt|Ot)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},v(It,Pt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(At|Ct),i=this.attrTest(t);return r&&(n&z||!i)?e|Ot:r||i?n&F?e|kt:e&At?e|Ct:At:32}}),v(Ft,It,{defaults:{event:"pan",threshold:10,pointers:1,direction:W},getTouchAction:function(){var t=this.options.direction,e=[];return t&G&&e.push("pan-y"),t&q&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&G?(i=0===o?U:o<0?j:V,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?U:a<0?B:H,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return It.prototype.attrTest.call(this,t)&&(this.state&At||!(this.state&At)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Lt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),v(zt,It,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&At)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),v(Ut,Pt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(F|z)&&!i)this.reset();else if(t.eventType&I)this.reset(),this._timer=h(function(){this.state=Rt,this.tryEmit()},e.time,this);else if(t.eventType&F)return Rt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Rt&&(t&&t.eventType&F?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=l(),this.manager.emit(this.options.event,this._input)))}}),v(jt,It,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&At)}}),v(Vt,It,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:G|q,pointers:1},getTouchAction:function(){return Ft.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(G|q)?e=t.overallVelocity:n&G?e=t.overallVelocityX:n&q&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&c(e)>this.options.velocity&&t.eventType&F},emit:function(t){var e=Lt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),v(Bt,Pt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&I&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=F)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||et(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=h(function(){this.state=Rt,this.tryEmit()},e.interval,this),At):Rt}return 32},failTimeout:function(){return this._timer=h(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Rt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ht.VERSION="2.0.7",Ht.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[jt,{enable:!1}],[zt,{enable:!1},["rotate"]],[Vt,{direction:G}],[Ft,{direction:G},["swipe"]],[Bt],[Bt,{event:"doubletap",taps:2},["tap"]],[Ut]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Gt.prototype={set:function(t){return i(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&Rt)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(At|Ct|kt)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Pt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(f(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(f(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=T(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==r&&e!==r){var n=this.handlers;return d(E(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==r){var n=this.handlers;return d(E(t),function(t){e?n[t]&&n[t].splice(T(n[t],e),1):delete n[t]}),this}},emit:function(t,n){this.options.domEvents&&function(t,n){var r=e.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}(t,n);var r=this.handlers[t]&&this.handlers[t].slice();if(r&&r.length){n.type=t,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var i=0;i<r.length;)r[i](n),i++}},destroy:function(){this.element&&qt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},i(Ht,{INPUT_START:I,INPUT_MOVE:2,INPUT_END:F,INPUT_CANCEL:z,STATE_POSSIBLE:Tt,STATE_BEGAN:At,STATE_CHANGED:Ct,STATE_ENDED:kt,STATE_RECOGNIZED:Rt,STATE_CANCELLED:Ot,STATE_FAILED:32,DIRECTION_NONE:U,DIRECTION_LEFT:j,DIRECTION_RIGHT:V,DIRECTION_UP:B,DIRECTION_DOWN:H,DIRECTION_HORIZONTAL:G,DIRECTION_VERTICAL:q,DIRECTION_ALL:W,Manager:Gt,Input:$,TouchAction:Et,TouchInput:yt,MouseInput:at,PointerEventInput:ht,TouchMouseInput:xt,SingleTouchInput:mt,Recognizer:Pt,AttrRecognizer:It,Tap:Bt,Pan:Ft,Swipe:Vt,Pinch:zt,Rotate:jt,Press:Ut,on:b,off:_,each:d,merge:g,extend:m,assign:i,inherit:v,bindFn:y,prefixed:k}),("undefined"!=typeof t?t:"undefined"!=typeof self?self:{}).Hammer=Ht,"function"==typeof define&&define.amd?define(function(){return Ht}):"undefined"!=typeof module&&module.exports?module.exports=Ht:t.Hammer=Ht}(window,document);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}"undefined"==typeof jQuery&&("function"==typeof require?jQuery=$=require("jquery"):jQuery=$),function(t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof module&&"object"==typeof module.exports?exports=t(require("jquery")):t(jQuery)}(function(t){t.easing.jswing=t.easing.swing;var e=Math.pow,n=Math.sqrt,r=Math.sin,i=Math.cos,o=Math.PI,a=1.70158,s=1.525*a,u=2*o/3,c=2*o/4.5;function l(t){var e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375}t.extend(t.easing,{def:"easeOutQuad",swing:function(e){return t.easing[t.easing.def](e)},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return 1-(1-t)*(1-t)},easeInOutQuad:function(t){return t<.5?2*t*t:1-e(-2*t+2,2)/2},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1-e(1-t,3)},easeInOutCubic:function(t){return t<.5?4*t*t*t:1-e(-2*t+2,3)/2},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1-e(1-t,4)},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-e(-2*t+2,4)/2},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1-e(1-t,5)},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1-e(-2*t+2,5)/2},easeInSine:function(t){return 1-i(t*o/2)},easeOutSine:function(t){return r(t*o/2)},easeInOutSine:function(t){return-(i(o*t)-1)/2},easeInExpo:function(t){return 0===t?0:e(2,10*t-10)},easeOutExpo:function(t){return 1===t?1:1-e(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:t<.5?e(2,20*t-10)/2:(2-e(2,-20*t+10))/2},easeInCirc:function(t){return 1-n(1-e(t,2))},easeOutCirc:function(t){return n(1-e(t-1,2))},easeInOutCirc:function(t){return t<.5?(1-n(1-e(2*t,2)))/2:(n(1-e(-2*t+2,2))+1)/2},easeInElastic:function(t){return 0===t?0:1===t?1:-e(2,10*t-10)*r((10*t-10.75)*u)},easeOutElastic:function(t){return 0===t?0:1===t?1:e(2,-10*t)*r((10*t-.75)*u)+1},easeInOutElastic:function(t){return 0===t?0:1===t?1:t<.5?-e(2,20*t-10)*r((20*t-11.125)*c)/2:e(2,-20*t+10)*r((20*t-11.125)*c)/2+1},easeInBack:function(t){return 2.70158*t*t*t-a*t*t},easeOutBack:function(t){return 1+2.70158*e(t-1,3)+a*e(t-1,2)},easeInOutBack:function(t){return t<.5?e(2*t,2)*(7.189819*t-s)/2:(e(2*t-2,2)*((s+1)*(2*t-2)+s)+2)/2},easeInBounce:function(t){return 1-l(1-t)},easeOutBounce:l,easeInOutBounce:function(t){return t<.5?(1-l(1-2*t))/2:(1+l(2*t-1))/2}})}),jQuery.extend(jQuery.easing,{easeInOutMaterial:function(t,e,n,r,i){return(e/=i/2)<1?r/2*e*e+n:r/4*((e-=2)*e*e+2)+n}}),jQuery.Velocity?console.log("Velocity is already loaded. You may be needlessly importing Velocity again; note that Materialize includes Velocity."):(function(t){function e(t){var e=t.length,r=n.type(t);return"function"!==r&&!n.isWindow(t)&&(!(1!==t.nodeType||!e)||"array"===r||0===e||"number"==typeof e&&e>0&&e-1 in t)}if(!t.jQuery){var n=function(t,e){return new n.fn.init(t,e)};n.isWindow=function(t){return null!=t&&t==t.window},n.type=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?i[a.call(t)]||"object":typeof t},n.isArray=Array.isArray||function(t){return"array"===n.type(t)},n.isPlainObject=function(t){var e;if(!t||"object"!==n.type(t)||t.nodeType||n.isWindow(t))return!1;try{if(t.constructor&&!o.call(t,"constructor")&&!o.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}for(e in t);return void 0===e||o.call(t,e)},n.each=function(t,n,r){var i=0,o=t.length,a=e(t);if(r){if(a)for(;o>i&&!1!==n.apply(t[i],r);i++);else for(i in t)if(!1===n.apply(t[i],r))break}else if(a)for(;o>i&&!1!==n.call(t[i],i,t[i]);i++);else for(i in t)if(!1===n.call(t[i],i,t[i]))break;return t},n.data=function(t,e,i){if(void 0===i){var o=(a=t[n.expando])&&r[a];if(void 0===e)return o;if(o&&e in o)return o[e]}else if(void 0!==e){var a=t[n.expando]||(t[n.expando]=++n.uuid);return r[a]=r[a]||{},r[a][e]=i,i}},n.removeData=function(t,e){var i=t[n.expando],o=i&&r[i];o&&n.each(e,function(t,e){delete o[e]})},n.extend=function(){var t,e,r,i,o,a,s=arguments[0]||{},u=1,c=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[u]||{},u++),"object"!=typeof s&&"function"!==n.type(s)&&(s={}),u===c&&(s=this,u--);c>u;u++)if(null!=(o=arguments[u]))for(i in o)t=s[i],s!==(r=o[i])&&(l&&r&&(n.isPlainObject(r)||(e=n.isArray(r)))?(e?(e=!1,a=t&&n.isArray(t)?t:[]):a=t&&n.isPlainObject(t)?t:{},s[i]=n.extend(l,a,r)):void 0!==r&&(s[i]=r));return s},n.queue=function(t,r,i){if(t){var o=n.data(t,r=(r||"fx")+"queue");return i?(!o||n.isArray(i)?o=n.data(t,r,function(t,n){var r=[];return null!=t&&(e(Object(t))?function(t,e){for(var n=+e.length,r=0,i=t.length;n>r;)t[i++]=e[r++];if(n!=n)for(;void 0!==e[r];)t[i++]=e[r++];t.length=i}(r,"string"==typeof t?[t]:t):[].push.call(r,t)),r}(i)):o.push(i),o):o||[]}},n.dequeue=function(t,e){n.each(t.nodeType?[t]:t,function(t,r){var i=n.queue(r,e=e||"fx"),o=i.shift();"inprogress"===o&&(o=i.shift()),o&&("fx"===e&&i.unshift("inprogress"),o.call(r,function(){n.dequeue(r,e)}))})},n.fn=n.prototype={init:function(t){if(t.nodeType)return this[0]=t,this;throw new Error("Not a DOM node.")},offset:function(){var e=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:e.top+(t.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:e.left+(t.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function t(){for(var t=this.offsetParent||document;t&&"html"===!t.nodeType.toLowerCase&&"static"===t.style.position;)t=t.offsetParent;return t||document}var e=this[0],t=t.apply(e),r=this.offset(),i=/^(?:body|html)$/i.test(t.nodeName)?{top:0,left:0}:n(t).offset();return r.top-=parseFloat(e.style.marginTop)||0,r.left-=parseFloat(e.style.marginLeft)||0,t.style&&(i.top+=parseFloat(t.style.borderTopWidth)||0,i.left+=parseFloat(t.style.borderLeftWidth)||0),{top:r.top-i.top,left:r.left-i.left}}};var r={};n.expando="velocity"+(new Date).getTime(),n.uuid=0;for(var i={},o=i.hasOwnProperty,a=i.toString,s="Boolean Number String Function Array Date RegExp Object Error".split(" "),u=0;u<s.length;u++)i["[object "+s[u]+"]"]=s[u].toLowerCase();n.fn.init.prototype=n.fn,t.Velocity={Utilities:n}}}(window),function(t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):t()}(function(){return function(t,e,n,r){function i(t){return d.isWrapped(t)?t=[].slice.call(t):d.isNode(t)&&(t=[t]),t}function o(t){var e=l.data(t,"velocity");return null===e?r:e}function a(t,n,r,i){function o(t,e){return 1-3*e+3*t}function a(t,e){return 3*e-6*t}function s(t){return 3*t}function u(t,e,n){return((o(e,n)*t+a(e,n))*t+s(e))*t}function c(t,e,n){return 3*o(e,n)*t*t+2*a(e,n)*t+s(e)}function l(e,n){for(var i=0;f>i;++i){var o=c(n,t,r);if(0===o)return n;n-=(u(n,t,r)-e)/o}return n}function h(e,n,i){var o,a,s=0;do{(o=u(a=n+(i-n)/2,t,r)-e)>0?i=a:n=a}while(Math.abs(o)>d&&++s<p);return a}var f=4,d=1e-7,p=10,m="Float32Array"in e;if(4!==arguments.length)return!1;for(var g=0;4>g;++g)if("number"!=typeof arguments[g]||isNaN(arguments[g])||!isFinite(arguments[g]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var v=m?new Float32Array(11):new Array(11),y=!1,w=function(e){return y||(y=!0,(t!=n||r!=i)&&function(){for(var e=0;11>e;++e)v[e]=u(.1*e,t,r)}()),t===n&&r===i?e:0===e?0:1===e?1:u(function(e){for(var n=0,i=1;10!=i&&v[i]<=e;++i)n+=.1;var o=n+(e-v[--i])/(v[i+1]-v[i])*.1,a=c(o,t,r);return a>=.001?l(e,o):0==a?o:h(e,n,n+.1)}(e),n,i)};w.getControlPoints=function(){return[{x:t,y:n},{x:r,y:i}]};var x="generateBezier("+[t,n,r,i]+")";return w.toString=function(){return x},w}function s(t,e){var n=t;return d.isString(t)?v.Easings[t]||(n=!1):n=d.isArray(t)&&1===t.length?(function(t){return function(e){return Math.round(e*t)*(1/t)}}).apply(null,t):d.isArray(t)&&2===t.length?y.apply(null,t.concat([e])):!(!d.isArray(t)||4!==t.length)&&a.apply(null,t),!1===n&&(n=v.Easings[v.defaults.easing]?v.defaults.easing:g),n}function u(t){if(t){var e=(new Date).getTime(),n=v.State.calls.length;n>1e4&&(v.State.calls=function(t){for(var e=-1,n=t?t.length:0,r=[];++e<n;){var i=t[e];i&&r.push(i)}return r}(v.State.calls));for(var i=0;n>i;i++)if(v.State.calls[i]){var a=v.State.calls[i],s=a[0],h=a[2],f=a[3],p=!!f,m=null;f||(f=v.State.calls[i][3]=e-16);for(var g=Math.min((e-f)/h.duration,1),y=0,x=s.length;x>y;y++){var _=s[y],M=_.element;if(o(M)){var S=!1;for(var E in h.display!==r&&null!==h.display&&"none"!==h.display&&("flex"===h.display&&l.each(["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"],function(t,e){w.setPropertyValue(M,"display",e)}),w.setPropertyValue(M,"display",h.display)),h.visibility!==r&&"hidden"!==h.visibility&&w.setPropertyValue(M,"visibility",h.visibility),_)if("element"!==E){var T,A=_[E],C=d.isString(A.easing)?v.Easings[A.easing]:A.easing;if(1===g)T=A.endValue;else{var k=A.endValue-A.startValue;if(T=A.startValue+k*C(g,h,k),!p&&T===A.currentValue)continue}if(A.currentValue=T,"tween"===E)m=T;else{if(w.Hooks.registered[E]){var R=w.Hooks.getRoot(E),O=o(M).rootPropertyValueCache[R];O&&(A.rootPropertyValue=O)}var P=w.setPropertyValue(M,E,A.currentValue+(0===parseFloat(T)?"":A.unitType),A.rootPropertyValue,A.scrollData);w.Hooks.registered[E]&&(o(M).rootPropertyValueCache[R]=w.Normalizations.registered[R]?w.Normalizations.registered[R]("extract",null,P[1]):P[1]),"transform"===P[0]&&(S=!0)}}h.mobileHA&&o(M).transformCache.translate3d===r&&(o(M).transformCache.translate3d="(0px, 0px, 0px)",S=!0),S&&w.flushTransformCache(M)}}h.display!==r&&"none"!==h.display&&(v.State.calls[i][2].display=!1),h.visibility!==r&&"hidden"!==h.visibility&&(v.State.calls[i][2].visibility=!1),h.progress&&h.progress.call(a[1],a[1],g,Math.max(0,f+h.duration-e),f,m),1===g&&c(i)}}v.State.isTicking&&b(u)}function c(t,e){if(!v.State.calls[t])return!1;for(var n=v.State.calls[t][0],i=v.State.calls[t][1],a=v.State.calls[t][2],s=v.State.calls[t][4],u=!1,c=0,h=n.length;h>c;c++){var f=n[c].element;if(e||a.loop||("none"===a.display&&w.setPropertyValue(f,"display",a.display),"hidden"===a.visibility&&w.setPropertyValue(f,"visibility",a.visibility)),!0!==a.loop&&(l.queue(f)[1]===r||!/\.velocityQueueEntryFlag/i.test(l.queue(f)[1]))&&o(f)){o(f).isAnimating=!1,o(f).rootPropertyValueCache={};var d=!1;l.each(w.Lists.transforms3D,function(t,e){var n=/^scale/.test(e)?1:0,i=o(f).transformCache[e];o(f).transformCache[e]!==r&&new RegExp("^\\("+n+"[^.]").test(i)&&(d=!0,delete o(f).transformCache[e])}),a.mobileHA&&(d=!0,delete o(f).transformCache.translate3d),d&&w.flushTransformCache(f),w.Values.removeClass(f,"velocity-animating")}if(!e&&a.complete&&!a.loop&&c===h-1)try{a.complete.call(i,i)}catch(t){setTimeout(function(){throw t},1)}s&&!0!==a.loop&&s(i),o(f)&&!0===a.loop&&!e&&(l.each(o(f).tweensContainer,function(t,e){/^rotate/.test(t)&&360===parseFloat(e.endValue)&&(e.endValue=0,e.startValue=360),/^backgroundPosition/.test(t)&&100===parseFloat(e.endValue)&&"%"===e.unitType&&(e.endValue=0,e.startValue=100)}),v(f,"reverse",{loop:!0,delay:a.delay})),!1!==a.queue&&l.dequeue(f,a.queue)}v.State.calls[t]=!1;for(var p=0,m=v.State.calls.length;m>p;p++)if(!1!==v.State.calls[p]){u=!0;break}!1===u&&(v.State.isTicking=!1,delete v.State.calls,v.State.calls=[])}var l,h=function(){if(n.documentMode)return n.documentMode;for(var t=7;t>4;t--){var e=n.createElement("div");if(e.innerHTML="\x3c!--[if IE "+t+"]><span></span><![endif]--\x3e",e.getElementsByTagName("span").length)return e=null,t}return r}(),f=function(){var t=0;return e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(e){var n,r=(new Date).getTime();return n=Math.max(0,16-(r-t)),t=r+n,setTimeout(function(){e(r+n)},n)}}(),d={isString:function(t){return"string"==typeof t},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isNode:function(t){return t&&t.nodeType},isNodeList:function(t){return"object"==typeof t&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(t))&&t.length!==r&&(0===t.length||"object"==typeof t[0]&&t[0].nodeType>0)},isWrapped:function(t){return t&&(t.jquery||e.Zepto&&e.Zepto.zepto.isZ(t))},isSVG:function(t){return e.SVGElement&&t instanceof e.SVGElement},isEmptyObject:function(t){for(var e in t)return!1;return!0}},p=!1;if(t.fn&&t.fn.jquery?(l=t,p=!0):l=e.Velocity.Utilities,8>=h&&!p)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(!(7>=h)){var m=400,g="swing",v={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:e.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:n.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:l,Redirects:{},Easings:{},Promise:e.Promise,defaults:{queue:"",duration:m,easing:g,begin:r,complete:r,progress:r,display:r,visibility:r,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(t){l.data(t,"velocity",{isSVG:d.isSVG(t),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};e.pageYOffset!==r?(v.State.scrollAnchor=e,v.State.scrollPropertyLeft="pageXOffset",v.State.scrollPropertyTop="pageYOffset"):(v.State.scrollAnchor=n.documentElement||n.body.parentNode||n.body,v.State.scrollPropertyLeft="scrollLeft",v.State.scrollPropertyTop="scrollTop");var y=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,r){var i={x:e.x+r.dx*n,v:e.v+r.dv*n,tension:e.tension,friction:e.friction};return{dx:i.v,dv:t(i)}}function n(n,r){var i={dx:n.v,dv:t(n)},o=e(n,.5*r,i),a=e(n,.5*r,o),s=e(n,r,a),u=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+1/6*(i.dx+2*(o.dx+a.dx)+s.dx)*r,n.v=n.v+u*r,n}return function t(e,r,i){var o,a,s,u={x:-1,v:0,tension:null,friction:null},c=[0],l=0;for(e=parseFloat(e)||500,r=parseFloat(r)||20,i=i||null,u.tension=e,u.friction=r,a=(o=null!==i)?(l=t(e,r))/i*.016:.016;s=n(s||u,a),c.push(1+s.x),l+=16,Math.abs(s.x)>1e-4&&Math.abs(s.v)>1e-4;);return o?function(t){return c[t*(c.length-1)|0]}:l}}();v.Easings={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},spring:function(t){return 1-Math.cos(4.5*t*Math.PI)*Math.exp(6*-t)}},l.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(t,e){v.Easings[e[0]]=a.apply(null,e[1])});var w=v.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var t=0;t<w.Lists.colors.length;t++)w.Hooks.templates[w.Lists.colors[t]]=["Red Green Blue Alpha","color"===w.Lists.colors[t]?"0 0 0 1":"255 255 255 1"];var e,n,r;if(h)for(e in w.Hooks.templates){r=(n=w.Hooks.templates[e])[0].split(" ");var i=n[1].match(w.RegEx.valueSplit);"Color"===r[0]&&(r.push(r.shift()),i.push(i.shift()),w.Hooks.templates[e]=[r.join(" "),i.join(" ")])}for(e in w.Hooks.templates)for(var t in r=(n=w.Hooks.templates[e])[0].split(" "))w.Hooks.registered[e+r[t]]=[e,t]},getRoot:function(t){var e=w.Hooks.registered[t];return e?e[0]:t},cleanRootPropertyValue:function(t,e){return w.RegEx.valueUnwrap.test(e)&&(e=e.match(w.RegEx.valueUnwrap)[1]),w.Values.isCSSNullValue(e)&&(e=w.Hooks.templates[t][1]),e},extractValue:function(t,e){var n=w.Hooks.registered[t];if(n){var r=n[1];return(e=w.Hooks.cleanRootPropertyValue(n[0],e)).toString().match(w.RegEx.valueSplit)[r]}return e},injectValue:function(t,e,n){var r=w.Hooks.registered[t];if(r){var i,o=r[1];return(i=(n=w.Hooks.cleanRootPropertyValue(r[0],n)).toString().match(w.RegEx.valueSplit))[o]=e,i.join(" ")}return n}},Normalizations:{registered:{clip:function(t,e,n){switch(t){case"name":return"clip";case"extract":var r;return w.RegEx.wrappedValueAlreadyExtracted.test(n)?n:(r=n.toString().match(w.RegEx.valueUnwrap))?r[1].replace(/,(\s+)?/g," "):n;case"inject":return"rect("+n+")"}},blur:function(t,e,n){switch(t){case"name":return v.State.isFirefox?"filter":"-webkit-filter";case"extract":var r=parseFloat(n);if(!r&&0!==r){var i=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);r=i?i[1]:0}return r;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(t,e,n){if(8>=h)switch(t){case"name":return"filter";case"extract":var r=n.toString().match(/alpha\(opacity=(.*)\)/i);return r?r[1]/100:1;case"inject":return e.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(t){case"name":return"opacity";case"extract":case"inject":return n}}},register:function(){9>=h||v.State.isGingerbread||(w.Lists.transformsBase=w.Lists.transformsBase.concat(w.Lists.transforms3D));for(var t=0;t<w.Lists.transformsBase.length;t++)!function(){var e=w.Lists.transformsBase[t];w.Normalizations.registered[e]=function(t,n,i){switch(t){case"name":return"transform";case"extract":return o(n)===r||o(n).transformCache[e]===r?/^scale/i.test(e)?1:0:o(n).transformCache[e].replace(/[()]/g,"");case"inject":var a=!1;switch(e.substr(0,e.length-1)){case"translate":a=!/(%|px|em|rem|vw|vh|\d)$/i.test(i);break;case"scal":case"scale":v.State.isAndroid&&o(n).transformCache[e]===r&&1>i&&(i=1),a=!/(\d)$/i.test(i);break;case"skew":a=!/(deg|\d)$/i.test(i);break;case"rotate":a=!/(deg|\d)$/i.test(i)}return a||(o(n).transformCache[e]="("+i+")"),o(n).transformCache[e]}}}();for(t=0;t<w.Lists.colors.length;t++)!function(){var e=w.Lists.colors[t];w.Normalizations.registered[e]=function(t,n,i){switch(t){case"name":return e;case"extract":var o;if(w.RegEx.wrappedValueAlreadyExtracted.test(i))o=i;else{var a,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(i)?a=s[i]!==r?s[i]:s.black:w.RegEx.isHex.test(i)?a="rgb("+w.Values.hexToRgb(i).join(" ")+")":/^rgba?\(/i.test(i)||(a=s.black),o=(a||i).toString().match(w.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=h||3!==o.split(" ").length||(o+=" 1"),o;case"inject":return 8>=h?4===i.split(" ").length&&(i=i.split(/\s+/).slice(0,3).join(" ")):3===i.split(" ").length&&(i+=" 1"),(8>=h?"rgb":"rgba")+"("+i.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})},SVGAttribute:function(t){var e="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(h||v.State.isAndroid&&!v.State.isChrome)&&(e+="|transform"),new RegExp("^("+e+")$","i").test(t)},prefixCheck:function(t){if(v.State.prefixMatches[t])return[v.State.prefixMatches[t],!0];for(var e=["","Webkit","Moz","ms","O"],n=0,r=e.length;r>n;n++){var i;if(i=0===n?t:e[n]+t.replace(/^\w/,function(t){return t.toUpperCase()}),d.isString(v.State.prefixElement.style[i]))return v.State.prefixMatches[t]=i,[i,!0]}return[t,!1]}},Values:{hexToRgb:function(t){var e;return t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,n,r){return e+e+n+n+r+r}),(e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t))?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]},isCSSNullValue:function(t){return 0==t||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(t)},getUnitType:function(t){return/^(rotate|skew)/i.test(t)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(t)?"":"px"},getDisplayType:function(t){var e=t&&t.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(e)?"inline":/^(li)$/i.test(e)?"list-item":/^(tr)$/i.test(e)?"table-row":/^(table)$/i.test(e)?"table":/^(tbody)$/i.test(e)?"table-row-group":"block"},addClass:function(t,e){t.classList?t.classList.add(e):t.className+=(t.className.length?" ":"")+e},removeClass:function(t,e){t.classList?t.classList.remove(e):t.className=t.className.toString().replace(new RegExp("(^|\\s)"+e.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(t,n,i,a){function s(t,n){function i(){f&&w.setPropertyValue(t,"display","none")}var u=0;if(8>=h)u=l.css(t,n);else{var c,f=!1;if(/^(width|height)$/.test(n)&&0===w.getPropertyValue(t,"display")&&(f=!0,w.setPropertyValue(t,"display",w.Values.getDisplayType(t))),!a){if("height"===n&&"border-box"!==w.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var d=t.offsetHeight-(parseFloat(w.getPropertyValue(t,"borderTopWidth"))||0)-(parseFloat(w.getPropertyValue(t,"borderBottomWidth"))||0)-(parseFloat(w.getPropertyValue(t,"paddingTop"))||0)-(parseFloat(w.getPropertyValue(t,"paddingBottom"))||0);return i(),d}if("width"===n&&"border-box"!==w.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var p=t.offsetWidth-(parseFloat(w.getPropertyValue(t,"borderLeftWidth"))||0)-(parseFloat(w.getPropertyValue(t,"borderRightWidth"))||0)-(parseFloat(w.getPropertyValue(t,"paddingLeft"))||0)-(parseFloat(w.getPropertyValue(t,"paddingRight"))||0);return i(),p}}c=o(t)===r?e.getComputedStyle(t,null):o(t).computedStyle?o(t).computedStyle:o(t).computedStyle=e.getComputedStyle(t,null),"borderColor"===n&&(n="borderTopColor"),(""===(u=9===h&&"filter"===n?c.getPropertyValue(n):c[n])||null===u)&&(u=t.style[n]),i()}if("auto"===u&&/^(top|right|bottom|left)$/i.test(n)){var m=s(t,"position");("fixed"===m||"absolute"===m&&/top|left/i.test(n))&&(u=l(t).position()[n]+"px")}return u}var u;if(w.Hooks.registered[n]){var c=n,f=w.Hooks.getRoot(c);i===r&&(i=w.getPropertyValue(t,w.Names.prefixCheck(f)[0])),w.Normalizations.registered[f]&&(i=w.Normalizations.registered[f]("extract",t,i)),u=w.Hooks.extractValue(c,i)}else if(w.Normalizations.registered[n]){var d,p;"transform"!==(d=w.Normalizations.registered[n]("name",t))&&(p=s(t,w.Names.prefixCheck(d)[0]),w.Values.isCSSNullValue(p)&&w.Hooks.templates[n]&&(p=w.Hooks.templates[n][1])),u=w.Normalizations.registered[n]("extract",t,p)}if(!/^[\d-]/.test(u))if(o(t)&&o(t).isSVG&&w.Names.SVGAttribute(n))if(/^(height|width)$/i.test(n))try{u=t.getBBox()[n]}catch(t){u=0}else u=t.getAttribute(n);else u=s(t,w.Names.prefixCheck(n)[0]);return w.Values.isCSSNullValue(u)&&(u=0),v.debug>=2&&console.log("Get "+n+": "+u),u},setPropertyValue:function(t,n,r,i,a){var s=n;if("scroll"===n)a.container?a.container["scroll"+a.direction]=r:"Left"===a.direction?e.scrollTo(r,a.alternateValue):e.scrollTo(a.alternateValue,r);else if(w.Normalizations.registered[n]&&"transform"===w.Normalizations.registered[n]("name",t))w.Normalizations.registered[n]("inject",t,r),s="transform",r=o(t).transformCache[n];else{if(w.Hooks.registered[n]){var u=n,c=w.Hooks.getRoot(n);i=i||w.getPropertyValue(t,c),r=w.Hooks.injectValue(u,r,i),n=c}if(w.Normalizations.registered[n]&&(r=w.Normalizations.registered[n]("inject",t,r),n=w.Normalizations.registered[n]("name",t)),s=w.Names.prefixCheck(n)[0],8>=h)try{t.style[s]=r}catch(t){v.debug&&console.log("Browser does not support ["+r+"] for ["+s+"]")}else o(t)&&o(t).isSVG&&w.Names.SVGAttribute(n)?t.setAttribute(n,r):t.style[s]=r;v.debug>=2&&console.log("Set "+n+" ("+s+"): "+r)}return[s,r]},flushTransformCache:function(t){function e(e){return parseFloat(w.getPropertyValue(t,e))}var n="";if((h||v.State.isAndroid&&!v.State.isChrome)&&o(t).isSVG){var r={translate:[e("translateX"),e("translateY")],skewX:[e("skewX")],skewY:[e("skewY")],scale:1!==e("scale")?[e("scale"),e("scale")]:[e("scaleX"),e("scaleY")],rotate:[e("rotateZ"),0,0]};l.each(o(t).transformCache,function(t){/^translate/i.test(t)?t="translate":/^scale/i.test(t)?t="scale":/^rotate/i.test(t)&&(t="rotate"),r[t]&&(n+=t+"("+r[t].join(" ")+") ",delete r[t])})}else{var i,a;l.each(o(t).transformCache,function(e){return i=o(t).transformCache[e],"transformPerspective"===e?(a=i,!0):(9===h&&"rotateZ"===e&&(e="rotate"),void(n+=e+i+" "))}),a&&(n="perspective"+a+" "+n)}w.setPropertyValue(t,"transform",n)}};w.Hooks.register(),w.Normalizations.register(),v.hook=function(t,e,n){var a=r;return t=i(t),l.each(t,function(t,i){if(o(i)===r&&v.init(i),n===r)a===r&&(a=v.CSS.getPropertyValue(i,e));else{var s=v.CSS.setPropertyValue(i,e,n);"transform"===s[0]&&v.CSS.flushTransformCache(i),a=s}}),a};var x=function(){function t(){return h?A.promise||null:f}function a(){function t(t){function f(t,e){var n=r,i=r,o=r;return d.isArray(t)?(n=t[0],!d.isArray(t[1])&&/^[\d-]/.test(t[1])||d.isFunction(t[1])||w.RegEx.isHex.test(t[1])?o=t[1]:(d.isString(t[1])&&!w.RegEx.isHex.test(t[1])||d.isArray(t[1]))&&(i=e?t[1]:s(t[1],c.duration),t[2]!==r&&(o=t[2]))):n=t,e||(i=i||c.easing),d.isFunction(n)&&(n=n.call(a,S,M)),d.isFunction(o)&&(o=o.call(a,S,M)),[n||0,i,o]}function p(t,e){var n,r;return r=(e||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(t){return n=t,""}),n||(n=w.Values.getUnitType(t)),[r,n]}function m(){var t={myParent:a.parentNode||n.body,position:w.getPropertyValue(a,"position"),fontSize:w.getPropertyValue(a,"fontSize")},r=t.position===L.lastPosition&&t.myParent===L.lastParent,i=t.fontSize===L.lastFontSize;L.lastParent=t.myParent,L.lastPosition=t.position,L.lastFontSize=t.fontSize;var s=100,u={};if(i&&r)u.emToPx=L.lastEmToPx,u.percentToPxWidth=L.lastPercentToPxWidth,u.percentToPxHeight=L.lastPercentToPxHeight;else{var c=o(a).isSVG?n.createElementNS("http://www.w3.org/2000/svg","rect"):n.createElement("div");v.init(c),t.myParent.appendChild(c),l.each(["overflow","overflowX","overflowY"],function(t,e){v.CSS.setPropertyValue(c,e,"hidden")}),v.CSS.setPropertyValue(c,"position",t.position),v.CSS.setPropertyValue(c,"fontSize",t.fontSize),v.CSS.setPropertyValue(c,"boxSizing","content-box"),l.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(t,e){v.CSS.setPropertyValue(c,e,s+"%")}),v.CSS.setPropertyValue(c,"paddingLeft",s+"em"),u.percentToPxWidth=L.lastPercentToPxWidth=(parseFloat(w.getPropertyValue(c,"width",null,!0))||1)/s,u.percentToPxHeight=L.lastPercentToPxHeight=(parseFloat(w.getPropertyValue(c,"height",null,!0))||1)/s,u.emToPx=L.lastEmToPx=(parseFloat(w.getPropertyValue(c,"paddingLeft"))||1)/s,t.myParent.removeChild(c)}return null===L.remToPx&&(L.remToPx=parseFloat(w.getPropertyValue(n.body,"fontSize"))||16),null===L.vwToPx&&(L.vwToPx=parseFloat(e.innerWidth)/100,L.vhToPx=parseFloat(e.innerHeight)/100),u.remToPx=L.remToPx,u.vwToPx=L.vwToPx,u.vhToPx=L.vhToPx,v.debug>=1&&console.log("Unit ratios: "+JSON.stringify(u),a),u}if(c.begin&&0===S)try{c.begin.call(g,g)}catch(t){setTimeout(function(){throw t},1)}if("scroll"===T){var x,_,E,C=/^x$/i.test(c.axis)?"Left":"Top",k=parseFloat(c.offset)||0;c.container?d.isWrapped(c.container)||d.isNode(c.container)?(c.container=c.container[0]||c.container,E=(x=c.container["scroll"+C])+l(a).position()[C.toLowerCase()]+k):c.container=null:(x=v.State.scrollAnchor[v.State["scrollProperty"+C]],_=v.State.scrollAnchor[v.State["scrollProperty"+("Left"===C?"Top":"Left")]],E=l(a).offset()[C.toLowerCase()]+k),h={scroll:{rootPropertyValue:!1,startValue:x,currentValue:x,endValue:E,unitType:"",easing:c.easing,scrollData:{container:c.container,direction:C,alternateValue:_}},element:a},v.debug&&console.log("tweensContainer (scroll): ",h.scroll,a)}else if("reverse"===T){if(!o(a).tweensContainer)return void l.dequeue(a,c.queue);"none"===o(a).opts.display&&(o(a).opts.display="auto"),"hidden"===o(a).opts.visibility&&(o(a).opts.visibility="visible"),o(a).opts.loop=!1,o(a).opts.begin=null,o(a).opts.complete=null,b.easing||delete c.easing,b.duration||delete c.duration,c=l.extend({},o(a).opts,c);var R=l.extend(!0,{},o(a).tweensContainer);for(var O in R)if("element"!==O){var P=R[O].startValue;R[O].startValue=R[O].currentValue=R[O].endValue,R[O].endValue=P,d.isEmptyObject(b)||(R[O].easing=c.easing),v.debug&&console.log("reverse tweensContainer ("+O+"): "+JSON.stringify(R[O]),a)}h=R}else if("start"===T){for(var D in o(a).tweensContainer&&!0===o(a).isAnimating&&(R=o(a).tweensContainer),l.each(y,function(t,e){if(RegExp("^"+w.Lists.colors.join("$|^")+"$").test(t)){var n=f(e,!0),i=n[0],o=n[1],a=n[2];if(w.RegEx.isHex.test(i)){for(var s=["Red","Green","Blue"],u=w.Values.hexToRgb(i),c=a?w.Values.hexToRgb(a):r,l=0;l<s.length;l++){var h=[u[l]];o&&h.push(o),c!==r&&h.push(c[l]),y[t+s[l]]=h}delete y[t]}}}),y){var I=f(y[D]),F=I[0],z=I[1],U=I[2];D=w.Names.camelCase(D);var j=w.Hooks.getRoot(D),V=!1;if(o(a).isSVG||"tween"===j||!1!==w.Names.prefixCheck(j)[1]||w.Normalizations.registered[j]!==r){(c.display!==r&&null!==c.display&&"none"!==c.display||c.visibility!==r&&"hidden"!==c.visibility)&&/opacity|filter/.test(D)&&!U&&0!==F&&(U=0),c._cacheValues&&R&&R[D]?(U===r&&(U=R[D].endValue+R[D].unitType),V=o(a).rootPropertyValueCache[j]):w.Hooks.registered[D]?U===r?(V=w.getPropertyValue(a,j),U=w.getPropertyValue(a,D,V)):V=w.Hooks.templates[j][1]:U===r&&(U=w.getPropertyValue(a,D));var B,H,G,q=!1;if(U=(B=p(D,U))[0],G=B[1],F=(B=p(D,F))[0].replace(/^([+-\/*])=/,function(t,e){return q=e,""}),H=B[1],U=parseFloat(U)||0,F=parseFloat(F)||0,"%"===H&&(/^(fontSize|lineHeight)$/.test(D)?(F/=100,H="em"):/^scale/.test(D)?(F/=100,H=""):/(Red|Green|Blue)$/i.test(D)&&(F=F/100*255,H="")),/[\/*]/.test(q))H=G;else if(G!==H&&0!==U)if(0===F)H=G;else{i=i||m();var W=/margin|padding|left|right|width|text|word|letter/i.test(D)||/X$/.test(D)||"x"===D?"x":"y";switch(G){case"%":U*="x"===W?i.percentToPxWidth:i.percentToPxHeight;break;case"px":break;default:U*=i[G+"ToPx"]}switch(H){case"%":U*=1/("x"===W?i.percentToPxWidth:i.percentToPxHeight);break;case"px":break;default:U*=1/i[H+"ToPx"]}}switch(q){case"+":F=U+F;break;case"-":F=U-F;break;case"*":F*=U;break;case"/":F=U/F}h[D]={rootPropertyValue:V,startValue:U,currentValue:U,endValue:F,unitType:H,easing:z},v.debug&&console.log("tweensContainer ("+D+"): "+JSON.stringify(h[D]),a)}else v.debug&&console.log("Skipping ["+j+"] due to a lack of browser support.")}h.element=a}h.element&&(w.Values.addClass(a,"velocity-animating"),N.push(h),""===c.queue&&(o(a).tweensContainer=h,o(a).opts=c),o(a).isAnimating=!0,S===M-1?(v.State.calls.push([N,g,c,null,A.resolver]),!1===v.State.isTicking&&(v.State.isTicking=!0,u())):S++)}var i,a=this,c=l.extend({},v.defaults,b),h={};switch(o(a)===r&&v.init(a),parseFloat(c.delay)&&!1!==c.queue&&l.queue(a,c.queue,function(t){v.velocityQueueEntryFlag=!0,o(a).delayTimer={setTimeout:setTimeout(t,parseFloat(c.delay)),next:t}}),c.duration.toString().toLowerCase()){case"fast":c.duration=200;break;case"normal":c.duration=m;break;case"slow":c.duration=600;break;default:c.duration=parseFloat(c.duration)||1}!1!==v.mock&&(!0===v.mock?c.duration=c.delay=1:(c.duration*=parseFloat(v.mock)||1,c.delay*=parseFloat(v.mock)||1)),c.easing=s(c.easing,c.duration),c.begin&&!d.isFunction(c.begin)&&(c.begin=null),c.progress&&!d.isFunction(c.progress)&&(c.progress=null),c.complete&&!d.isFunction(c.complete)&&(c.complete=null),c.display!==r&&null!==c.display&&(c.display=c.display.toString().toLowerCase(),"auto"===c.display&&(c.display=v.CSS.Values.getDisplayType(a))),c.visibility!==r&&null!==c.visibility&&(c.visibility=c.visibility.toString().toLowerCase()),c.mobileHA=c.mobileHA&&v.State.isMobile&&!v.State.isGingerbread,!1===c.queue?c.delay?setTimeout(t,c.delay):t():l.queue(a,c.queue,function(e,n){return!0===n?(A.promise&&A.resolver(g),!0):(v.velocityQueueEntryFlag=!0,void t())}),""!==c.queue&&"fx"!==c.queue||"inprogress"===l.queue(a)[0]||l.dequeue(a)}var h,f,p,g,y,b,_=arguments[0]&&(arguments[0].p||l.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||d.isString(arguments[0].properties));if(d.isWrapped(this)?(h=!1,p=0,g=this,f=this):(h=!0,p=1,g=_?arguments[0].elements||arguments[0].e:arguments[0]),g=i(g)){_?(y=arguments[0].properties||arguments[0].p,b=arguments[0].options||arguments[0].o):(y=arguments[p],b=arguments[p+1]);var M=g.length,S=0;if(!/^(stop|finish)$/i.test(y)&&!l.isPlainObject(b)){b={};for(var E=p+1;E<arguments.length;E++)d.isArray(arguments[E])||!/^(fast|normal|slow)$/i.test(arguments[E])&&!/^\d/.test(arguments[E])?d.isString(arguments[E])||d.isArray(arguments[E])?b.easing=arguments[E]:d.isFunction(arguments[E])&&(b.complete=arguments[E]):b.duration=arguments[E]}var T,A={promise:null,resolver:null,rejecter:null};switch(h&&v.Promise&&(A.promise=new v.Promise(function(t,e){A.resolver=t,A.rejecter=e})),y){case"scroll":T="scroll";break;case"reverse":T="reverse";break;case"finish":case"stop":l.each(g,function(t,e){o(e)&&o(e).delayTimer&&(clearTimeout(o(e).delayTimer.setTimeout),o(e).delayTimer.next&&o(e).delayTimer.next(),delete o(e).delayTimer)});var C=[];return l.each(v.State.calls,function(t,e){e&&l.each(e[1],function(n,i){var a=b===r?"":b;return!0!==a&&e[2].queue!==a&&(b!==r||!1!==e[2].queue)||void l.each(g,function(n,r){r===i&&((!0===b||d.isString(b))&&(l.each(l.queue(r,d.isString(b)?b:""),function(t,e){d.isFunction(e)&&e(null,!0)}),l.queue(r,d.isString(b)?b:"",[])),"stop"===y?(o(r)&&o(r).tweensContainer&&!1!==a&&l.each(o(r).tweensContainer,function(t,e){e.endValue=e.currentValue}),C.push(t)):"finish"===y&&(e[2].duration=1))})})}),"stop"===y&&(l.each(C,function(t,e){c(e,!0)}),A.promise&&A.resolver(g)),t();default:if(!l.isPlainObject(y)||d.isEmptyObject(y)){if(d.isString(y)&&v.Redirects[y]){var k=(D=l.extend({},b)).duration,R=D.delay||0;return!0===D.backwards&&(g=l.extend(!0,[],g).reverse()),l.each(g,function(t,e){parseFloat(D.stagger)?D.delay=R+parseFloat(D.stagger)*t:d.isFunction(D.stagger)&&(D.delay=R+D.stagger.call(e,t,M)),D.drag&&(D.duration=parseFloat(k)||(/^(callout|transition)/.test(y)?1e3:m),D.duration=Math.max(D.duration*(D.backwards?1-t/M:(t+1)/M),.75*D.duration,200)),v.Redirects[y].call(e,e,D||{},t,M,g,A.promise?A:r)}),t()}var O="Velocity: First argument ("+y+") was not a property map, a known action, or a registered redirect. Aborting.";return A.promise?A.rejecter(new Error(O)):console.log(O),t()}T="start"}var P,D,L={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},N=[];if(l.each(g,function(t,e){d.isNode(e)&&a.call(e)}),(D=l.extend({},v.defaults,b)).loop=parseInt(D.loop),P=2*D.loop-1,D.loop)for(var I=0;P>I;I++){var F={delay:D.delay,progress:D.progress};I===P-1&&(F.display=D.display,F.visibility=D.visibility,F.complete=D.complete),x(g,"reverse",F)}return t()}};(v=l.extend(x,v)).animate=x;var b=e.requestAnimationFrame||f;return v.State.isMobile||n.hidden===r||n.addEventListener("visibilitychange",function(){n.hidden?(b=function(t){return setTimeout(function(){t(!0)},16)},u()):b=e.requestAnimationFrame||f}),t.Velocity=v,t!==e&&(t.fn.velocity=x,t.fn.velocity.defaults=v.defaults),l.each(["Down","Up"],function(t,e){v.Redirects["slide"+e]=function(t,n,i,o,a,s){var u=l.extend({},n),c=u.begin,h=u.complete,f={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},d={};u.display===r&&(u.display="Down"===e?"inline"===v.CSS.Values.getDisplayType(t)?"inline-block":"block":"none"),u.begin=function(){for(var n in c&&c.call(a,a),f){d[n]=t.style[n];var r=v.CSS.getPropertyValue(t,n);f[n]="Down"===e?[r,0]:[0,r]}d.overflow=t.style.overflow,t.style.overflow="hidden"},u.complete=function(){for(var e in d)t.style[e]=d[e];h&&h.call(a,a),s&&s.resolver(a)},v(t,f,u)}}),l.each(["In","Out"],function(t,e){v.Redirects["fade"+e]=function(t,n,i,o,a,s){var u=l.extend({},n),c={opacity:"In"===e?1:0},h=u.complete;u.complete=i!==o-1?u.begin=null:function(){h&&h.call(a,a),s&&s.resolver(a)},u.display===r&&(u.display="In"===e?"auto":"none"),v(this,c,u)}}),v}jQuery.fn.velocity=jQuery.fn.animate}(window.jQuery||window.Zepto||window,window,document)})),function(t,e,n,r){"use strict";function i(t,e,n){return setTimeout(l(t,n),e)}function o(t,e,n){return!!Array.isArray(t)&&(a(t,n[e],n),!0)}function a(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==r)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function s(t,e,n){for(var i=Object.keys(e),o=0;o<i.length;)(!n||n&&t[i[o]]===r)&&(t[i[o]]=e[i[o]]),o++;return t}function u(t,e){return s(t,e,!0)}function c(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&s(r,n)}function l(t,e){return function(){return t.apply(e,arguments)}}function h(t,e){return typeof t==K?t.apply(e&&e[0]||r,e):t}function f(t,e){return t===r?e:t}function d(t,e,n){a(v(e),function(e){t.addEventListener(e,n,!1)})}function p(t,e,n){a(v(e),function(e){t.removeEventListener(e,n,!1)})}function m(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function g(t,e){return t.indexOf(e)>-1}function v(t){return t.trim().split(/\s+/g)}function y(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function w(t){return Array.prototype.slice.call(t,0)}function x(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];y(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function b(t,e){for(var n,i,o=e[0].toUpperCase()+e.slice(1),a=0;a<Z.length;){if((i=(n=Z[a])?n+o:e)in t)return i;a++}return r}function _(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}function M(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){h(t.options.enable,[t])&&n.handler(e)},this.init()}function S(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&lt&&0==r-i,a=e&(ht|ft)&&0==r-i;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=T(e)),i>1&&!n.firstMultiple?n.firstMultiple=T(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=A(r);e.timeStamp=nt(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=R(s,u),e.distance=k(s,u),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};(e.eventType===lt||o.eventType===ht)&&(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=C(e.deltaX,e.deltaY),e.scale=a?function(t,e){return k(r[0],r[1],_t)/k(t[0],t[1],_t)}(a.pointers):1,e.rotation=a?function(t,e){return R(r[1],r[0],_t)-R(t[1],t[0],_t)}(a.pointers):0,E(n,e);var c=t.element;m(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function E(t,e){var n,i,o,a,s=t.lastInterval||e,u=e.timeStamp-s.timeStamp;if(e.eventType!=ft&&(u>ct||s.velocity===r)){var c=s.deltaX-e.deltaX,l=s.deltaY-e.deltaY,h={x:c/u||0,y:l/u||0};i=h.x,o=h.y,n=et(h.x)>et(h.y)?h.x:h.y,a=C(c,l),t.lastInterval=e}else n=s.velocity,i=s.velocityX,o=s.velocityY,a=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=o,e.direction=a}function T(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:tt(t.pointers[n].clientX),clientY:tt(t.pointers[n].clientY)},n++;return{timeStamp:nt(),pointers:e,center:A(e),deltaX:t.deltaX,deltaY:t.deltaY}}function A(t){var e=t.length;if(1===e)return{x:tt(t[0].clientX),y:tt(t[0].clientY)};for(var n=0,r=0,i=0;e>i;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:tt(n/e),y:tt(r/e)}}function C(t,e){return t===e?dt:et(t)>=et(e)?t>0?pt:mt:e>0?gt:vt}function k(t,e,n){n||(n=bt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function R(t,e,n){return n||(n=bt),180*Math.atan2(e[n[1]]-t[n[1]],e[n[0]]-t[n[0]])/Math.PI}function O(){this.evEl=St,this.evWin=Et,this.allow=!0,this.pressed=!1,M.apply(this,arguments)}function P(){this.evEl=Ct,this.evWin=kt,M.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function D(){this.evTarget=Ot,this.evWin=Pt,this.started=!1,M.apply(this,arguments)}function L(){this.evTarget=Lt,this.targetIds={},M.apply(this,arguments)}function N(){M.apply(this,arguments);var t=l(this.handler,this);this.touch=new L(this.manager,t),this.mouse=new O(this.manager,t)}function I(t,e){this.manager=t,this.set(e)}function F(t){this.id=rt++,this.manager=null,this.options=u(t||{},this.defaults),this.options.enable=f(this.options.enable,!0),this.state=Bt,this.simultaneous={},this.requireFail=[]}function z(t){return t==vt?"down":t==gt?"up":t==pt?"left":t==mt?"right":""}function U(t,e){var n=e.manager;return n?n.get(t):t}function j(){F.apply(this,arguments)}function V(){j.apply(this,arguments),this.pX=null,this.pY=null}function B(){j.apply(this,arguments)}function H(){F.apply(this,arguments),this._timer=null,this._input=null}function G(){j.apply(this,arguments)}function q(){j.apply(this,arguments)}function W(){F.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Y(t,e){return(e=e||{}).recognizers=f(e.recognizers,Y.defaults.preset),new X(t,e)}function X(t,e){this.options=u(e=e||{},Y.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=function(t){return new(t.options.inputClass||(ot?P:at?L:it?N:O))(t,S)}(this),this.touchAction=new I(this,this.options.touchAction),$(this,!0),a(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function $(t,e){var n=t.element;a(t.options.cssProps,function(t,r){n.style[b(n.style,r)]=e?t:""})}function Q(t,n){var r=e.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}var Z=["","webkit","moz","MS","ms","o"],J=e.createElement("div"),K="function",tt=Math.round,et=Math.abs,nt=Date.now,rt=1,it="ontouchstart"in t,ot=b(t,"PointerEvent")!==r,at=it&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),st="touch",ut="mouse",ct=25,lt=1,ht=4,ft=8,dt=1,pt=2,mt=4,gt=8,vt=16,yt=pt|mt,wt=gt|vt,xt=yt|wt,bt=["x","y"],_t=["clientX","clientY"];M.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(_(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(_(this.element),this.evWin,this.domHandler)}};var Mt={mousedown:lt,mousemove:2,mouseup:ht},St="mousedown",Et="mousemove mouseup";c(O,M,{handler:function(t){var e=Mt[t.type];e&lt&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=ht),this.pressed&&this.allow&&(e&ht&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:ut,srcEvent:t}))}});var Tt={pointerdown:lt,pointermove:2,pointerup:ht,pointercancel:ft,pointerout:ft},At={2:st,3:"pen",4:ut,5:"kinect"},Ct="pointerdown",kt="pointermove pointerup pointercancel";t.MSPointerEvent&&(Ct="MSPointerDown",kt="MSPointerMove MSPointerUp MSPointerCancel"),c(P,M,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=Tt[r],o=At[t.pointerType]||t.pointerType,a=o==st,s=y(e,t.pointerId,"pointerId");i&lt&&(0===t.button||a)?0>s&&(e.push(t),s=e.length-1):i&(ht|ft)&&(n=!0),0>s||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var Rt={touchstart:lt,touchmove:2,touchend:ht,touchcancel:ft},Ot="touchstart",Pt="touchstart touchmove touchend touchcancel";c(D,M,{handler:function(t){var e=Rt[t.type];if(e===lt&&(this.started=!0),this.started){var n=(function(t,e){var n=w(t.touches),r=w(t.changedTouches);return e&(ht|ft)&&(n=x(n.concat(r),"identifier",!0)),[n,r]}).call(this,t,e);e&(ht|ft)&&0==n[0].length-n[1].length&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:st,srcEvent:t})}}});var Dt={touchstart:lt,touchmove:2,touchend:ht,touchcancel:ft},Lt="touchstart touchmove touchend touchcancel";c(L,M,{handler:function(t){var e=Dt[t.type],n=(function(t,e){var n=w(t.touches),r=this.targetIds;if(e&(2|lt)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=w(t.changedTouches),s=[],u=this.target;if(o=n.filter(function(t){return m(t.target,u)}),e===lt)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(ht|ft)&&delete r[a[i].identifier],i++;return s.length?[x(o.concat(s),"identifier",!0),s]:void 0}).call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:st,srcEvent:t})}}),c(N,M,{handler:function(t,e,n){var r=n.pointerType==ut;if(n.pointerType==st)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;e&(ht|ft)&&(this.mouse.allow=!0),this.callback(t,e,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Nt=b(J.style,"touchAction"),It=Nt!==r,Ft="compute",zt="manipulation",Ut="none",jt="pan-x",Vt="pan-y";I.prototype={set:function(t){t==Ft&&(t=this.compute()),It&&(this.manager.element.style[Nt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return a(this.manager.recognizers,function(e){h(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(g(t,Ut))return Ut;var e=g(t,jt),n=g(t,Vt);return e&&n?jt+" "+Vt:e||n?e?jt:Vt:g(t,zt)?zt:"auto"}(t.join(" "))},preventDefaults:function(t){if(!It){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var r=this.actions,i=g(r,Ut),o=g(r,Vt),a=g(r,jt);return i||o&&n&yt||a&&n&wt?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Bt=1,Ht=2,Gt=4,qt=8,Wt=qt,Yt=16;F.prototype={defaults:{},set:function(t){return s(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(o(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=U(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return o(t,"dropRecognizeWith",this)?this:(t=U(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(o(t,"requireFailure",this))return this;var e=this.requireFail;return-1===y(e,t=U(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(o(t,"dropRequireFailure",this))return this;t=U(t,this);var e=y(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(n.options.event+(e?r&Yt?"cancel":r&qt?"end":r&Gt?"move":r&Ht?"start":"":""),t)}var n=this,r=this.state;qt>r&&e(!0),e(),r>=qt&&e(!0)},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=32)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Bt)))return!1;t++}return!0},recognize:function(t){var e=s({},t);return h(this.options.enable,[this,e])?(this.state&(Wt|Yt|32)&&(this.state=Bt),this.state=this.process(e),void(this.state&(Ht|Gt|qt|Yt)&&this.tryEmit(e))):(this.reset(),void(this.state=32))},process:function(){},getTouchAction:function(){},reset:function(){}},c(j,F,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(Ht|Gt),i=this.attrTest(t);return r&&(n&ft||!i)?e|Yt:r||i?n&ht?e|qt:e&Ht?e|Gt:Ht:32}}),c(V,j,{defaults:{event:"pan",threshold:10,pointers:1,direction:xt},getTouchAction:function(){var t=this.options.direction,e=[];return t&yt&&e.push(Vt),t&wt&&e.push(jt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&yt?(i=0===o?dt:0>o?pt:mt,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?dt:0>a?gt:vt,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return j.prototype.attrTest.call(this,t)&&(this.state&Ht||!(this.state&Ht)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=z(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),c(B,j,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ut]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Ht)},emit:function(t){this._super.emit.call(this,t),1!==t.scale&&this.manager.emit(this.options.event+(t.scale<1?"in":"out"),t)}}),c(H,F,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(ht|ft)&&!o)this.reset();else if(t.eventType&lt)this.reset(),this._timer=i(function(){this.state=Wt,this.tryEmit()},e.time,this);else if(t.eventType&ht)return Wt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Wt&&(t&&t.eventType&ht?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=nt(),this.manager.emit(this.options.event,this._input)))}}),c(G,j,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ut]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Ht)}}),c(q,j,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:yt|wt,pointers:1},getTouchAction:function(){return V.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(yt|wt)?e=t.velocity:n&yt?e=t.velocityX:n&wt&&(e=t.velocityY),this._super.attrTest.call(this,t)&&n&t.direction&&t.distance>this.options.threshold&&et(e)>this.options.velocity&&t.eventType&ht},emit:function(t){var e=z(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),c(W,F,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[zt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&lt&&0===this.count)return this.failTimeout();if(r&&o&&n){if(t.eventType!=ht)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||k(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=i(function(){this.state=Wt,this.tryEmit()},e.interval,this),Ht):Wt}return 32},failTimeout:function(){return this._timer=i(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Wt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Y.VERSION="2.0.4",Y.defaults={domEvents:!1,touchAction:Ft,enable:!0,inputTarget:null,inputClass:null,preset:[[G,{enable:!1}],[B,{enable:!1},["rotate"]],[q,{direction:yt}],[V,{direction:yt},["swipe"]],[W],[W,{event:"doubletap",taps:2},["tap"]],[H]],cssProps:{userSelect:"default",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},X.prototype={set:function(t){return s(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&Wt)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(Ht|Gt|qt)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof F)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(o(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(o(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(y(e,t),1),this.touchAction.update(),this},on:function(t,e){var n=this.handlers;return a(v(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this},off:function(t,e){var n=this.handlers;return a(v(t),function(t){e?n[t].splice(y(n[t],e),1):delete n[t]}),this},emit:function(t,e){this.options.domEvents&&Q(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&$(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(Y,{INPUT_START:lt,INPUT_MOVE:2,INPUT_END:ht,INPUT_CANCEL:ft,STATE_POSSIBLE:Bt,STATE_BEGAN:Ht,STATE_CHANGED:Gt,STATE_ENDED:qt,STATE_RECOGNIZED:Wt,STATE_CANCELLED:Yt,STATE_FAILED:32,DIRECTION_NONE:dt,DIRECTION_LEFT:pt,DIRECTION_RIGHT:mt,DIRECTION_UP:gt,DIRECTION_DOWN:vt,DIRECTION_HORIZONTAL:yt,DIRECTION_VERTICAL:wt,DIRECTION_ALL:xt,Manager:X,Input:M,TouchAction:I,TouchInput:L,MouseInput:O,PointerEventInput:P,TouchMouseInput:N,SingleTouchInput:D,Recognizer:F,AttrRecognizer:j,Tap:W,Pan:V,Swipe:q,Pinch:B,Rotate:G,Press:H,on:d,off:p,each:a,merge:u,extend:s,inherit:c,bindFn:l,prefixed:b}),typeof define==K&&define.amd?define(function(){return Y}):"undefined"!=typeof module&&module.exports?module.exports=Y:t.Hammer=Y}(window,document),function(t){"function"==typeof define&&define.amd?define(["jquery","hammerjs"],t):"object"==typeof exports?t(require("jquery"),require("hammerjs")):t(jQuery,Hammer)}(function(t,e){var n;t.fn.hammer=function(n){return this.each(function(){!function(n,r){var i=t(n);i.data("hammer")||i.data("hammer",new e(i[0],r))}(this,n)})},e.Manager.prototype.emit=(n=e.Manager.prototype.emit,function(e,r){n.call(this,e,r),t(this.element).trigger({type:e,gesture:r})})}),function(t){t.Package?Materialize={}:t.Materialize={}}(window),"undefined"==typeof exports||exports.nodeType||("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=Materialize),exports.default=Materialize),function(t){for(var e=0,n=["webkit","moz"],r=t.requestAnimationFrame,i=t.cancelAnimationFrame,o=n.length;--o>=0&&!r;)r=t[n[o]+"RequestAnimationFrame"],i=t[n[o]+"CancelRequestAnimationFrame"];r&&i||(r=function(t){var n=+Date.now(),r=Math.max(e+16,n);return setTimeout(function(){t(e=r)},r-n)},i=clearTimeout),t.requestAnimationFrame=r,t.cancelAnimationFrame=i}(window),Materialize.objectSelectorString=function(t){return((t.prop("tagName")||"")+(t.attr("id")||"")+(t.attr("class")||"")).replace(/\s/g,"")},Materialize.guid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(),Materialize.escapeHash=function(t){return t.replace(/(:|\.|\[|\]|,|=)/g,"\\$1")},Materialize.elementOrParentIsFixed=function(t){var e=$(t),n=!1;return e.add(e.parents()).each(function(){if("fixed"===$(this).css("position"))return n=!0,!1}),n};var getTime=Date.now||function(){return(new Date).getTime()},Vel;Materialize.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:getTime(),a=null,o=t.apply(r,i),r=i=null};return function(){var c=getTime();s||!1!==n.leading||(s=c);var l=e-(c-s);return r=this,i=arguments,l<=0?(clearTimeout(a),a=null,s=c,o=t.apply(r,i),r=i=null):a||!1===n.trailing||(a=setTimeout(u,l)),o}},Vel=jQuery?jQuery.Velocity:$?$.Velocity:Velocity,Materialize.Vel=Vel||Velocity,function(t){t.fn.collapsible=function(e,n){var r=e;return e=t.extend({accordion:void 0,onOpen:void 0,onClose:void 0},e),this.each(function(){var i=t(this),o=t(this).find("> li > .collapsible-header"),a=i.data("collapsible");function s(n,r){r||n.toggleClass("active"),e.accordion||"accordion"===a||void 0===a?function(e){o=i.find("> li > .collapsible-header"),e.hasClass("active")?e.parent().addClass("active"):e.parent().removeClass("active"),e.parent().hasClass("active")?e.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){t(this).css("height","")}}):e.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){t(this).css("height","")}}),o.not(e).removeClass("active").parent().removeClass("active"),o.not(e).parent().children(".collapsible-body").stop(!0,!1).each(function(){t(this).is(":visible")&&t(this).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){t(this).css("height",""),u(t(this).siblings(".collapsible-header"))}})})}(n):function(e){e.hasClass("active")?e.parent().addClass("active"):e.parent().removeClass("active"),e.parent().hasClass("active")?e.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){t(this).css("height","")}}):e.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){t(this).css("height","")}})}(n),u(n)}function u(t){t.hasClass("active")?"function"==typeof e.onOpen&&e.onOpen.call(this,t.parent()):"function"==typeof e.onClose&&e.onClose.call(this,t.parent())}function c(t){return t.closest("li > .collapsible-header")}function l(){i.off("click.collapse","> li > .collapsible-header")}if("destroy"!==r)if(n>=0&&n<o.length){var h=o.eq(n);h.length&&("open"===r||"close"===r&&h.hasClass("active"))&&s(h)}else l(),i.on("click.collapse","> li > .collapsible-header",function(e){var n=t(e.target);c(n).length>0&&(n=c(n)),s(n)}),e.accordion||"accordion"===a||void 0===a?s(o.filter(".active").first(),!0):o.filter(".active").each(function(){s(t(this),!0)});else l()})},t(document).ready(function(){t(".collapsible").collapsible()})}(jQuery),function(t){t.fn.scrollTo=function(e){return t(this).scrollTop(t(this).scrollTop()-t(this).offset().top+t(e).offset().top),this},t.fn.dropdown=function(e){var n={inDuration:300,outDuration:225,constrainWidth:!0,hover:!1,gutter:0,belowOrigin:!1,alignment:"left",stopPropagation:!1};return"open"===e?(this.each(function(){t(this).trigger("open")}),!1):"close"===e?(this.each(function(){t(this).trigger("close")}),!1):void this.each(function(){var r=t(this),i=t.extend({},n,e),o=!1,a=t("#"+r.attr("data-activates"));function s(){void 0!==r.data("induration")&&(i.inDuration=r.data("induration")),void 0!==r.data("outduration")&&(i.outDuration=r.data("outduration")),void 0!==r.data("constrainwidth")&&(i.constrainWidth=r.data("constrainwidth")),void 0!==r.data("hover")&&(i.hover=r.data("hover")),void 0!==r.data("gutter")&&(i.gutter=r.data("gutter")),void 0!==r.data("beloworigin")&&(i.belowOrigin=r.data("beloworigin")),void 0!==r.data("alignment")&&(i.alignment=r.data("alignment")),void 0!==r.data("stoppropagation")&&(i.stopPropagation=r.data("stoppropagation"))}function u(e){"focus"===e&&(o=!0),s(),a.addClass("active"),r.addClass("active");var n=r[0].getBoundingClientRect().width;!0===i.constrainWidth?a.css("width",n):a.css("white-space","nowrap");var u=window.innerHeight,l=r.innerHeight(),h=r.offset().left,f=r.offset().top-t(window).scrollTop(),d=i.alignment,p=0,m=0,g=0;!0===i.belowOrigin&&(g=l);var v=0,y=0,w=r.parent();w.is("body")||(w[0].scrollHeight>w[0].clientHeight&&(v=w[0].scrollTop),w[0].scrollWidth>w[0].clientWidth&&(y=w[0].scrollLeft)),h+a.innerWidth()>t(window).width()?d="right":h-a.innerWidth()+r.innerWidth()<0&&(d="left"),f+a.innerHeight()>u&&(f+l-a.innerHeight()<0?a.css("max-height",u-f-g):(g||(g+=l),g-=a.innerHeight())),"left"===d?(p=i.gutter,m=r.position().left+p):"right"===d&&(a.stop(!0,!0).css({opacity:0,left:0}),m=r.position().left+n-a.width()+(p=-i.gutter)),a.css({position:"absolute",top:r.position().top+g+v,left:m+y}),a.slideDown({queue:!1,duration:i.inDuration,easing:"easeOutCubic",complete:function(){t(this).css("height","")}}).animate({opacity:1},{queue:!1,duration:i.inDuration,easing:"easeOutSine"}),setTimeout(function(){t(document).on("click."+a.attr("id"),function(e){c(),t(document).off("click."+a.attr("id"))})},0)}function c(){o=!1,a.fadeOut(i.outDuration),a.removeClass("active"),r.removeClass("active"),t(document).off("click."+a.attr("id")),setTimeout(function(){a.css("max-height","")},i.outDuration)}if(s(),r.after(a),i.hover){var l=!1;r.off("click."+r.attr("id")),r.on("mouseenter",function(t){!1===l&&(u(),l=!0)}),r.on("mouseleave",function(e){t(e.toElement||e.relatedTarget).closest(".dropdown-content").is(a)||(a.stop(!0,!0),c(),l=!1)}),a.on("mouseleave",function(e){t(e.toElement||e.relatedTarget).closest(".dropdown-button").is(r)||(a.stop(!0,!0),c(),l=!1)})}else r.off("click."+r.attr("id")),r.on("click."+r.attr("id"),function(e){o||(r[0]!=e.currentTarget||r.hasClass("active")||0!==t(e.target).closest(".dropdown-content").length?r.hasClass("active")&&(c(),t(document).off("click."+a.attr("id"))):(e.preventDefault(),i.stopPropagation&&e.stopPropagation(),u("click")))});r.on("open",function(t,e){u(e)}),r.on("close",c)})},t(document).ready(function(){t(".dropdown-button").dropdown()})}(jQuery),function(t,e){"use strict";var n={opacity:.5,inDuration:250,outDuration:250,ready:void 0,complete:void 0,dismissible:!0,startingTop:"4%",endingTop:"10%"},r=function(){function r(e,n){_classCallCheck(this,r),e[0].M_Modal&&e[0].M_Modal.destroy(),this.$el=e,this.options=t.extend({},r.defaults,n),this.isOpen=!1,this.$el[0].M_Modal=this,this.id=e.attr("id"),this.openingTrigger=void 0,this.$overlay=t('<div class="modal-overlay"></div>'),r._increment++,r._count++,this.$overlay[0].style.zIndex=1e3+2*r._increment,this.$el[0].style.zIndex=1e3+2*r._increment+1,this.setupEventHandlers()}return _createClass(r,[{key:"getInstance",value:function(){return this}},{key:"destroy",value:function(){this.removeEventHandlers(),this.$el[0].removeAttribute("style"),this.$overlay[0].parentNode&&this.$overlay[0].parentNode.removeChild(this.$overlay[0]),this.$el[0].M_Modal=void 0,r._count--}},{key:"setupEventHandlers",value:function(){this.handleOverlayClickBound=this.handleOverlayClick.bind(this),this.handleModalCloseClickBound=this.handleModalCloseClick.bind(this),1===r._count&&document.body.addEventListener("click",this.handleTriggerClick),this.$overlay[0].addEventListener("click",this.handleOverlayClickBound),this.$el[0].addEventListener("click",this.handleModalCloseClickBound)}},{key:"removeEventHandlers",value:function(){0===r._count&&document.body.removeEventListener("click",this.handleTriggerClick),this.$overlay[0].removeEventListener("click",this.handleOverlayClickBound),this.$el[0].removeEventListener("click",this.handleModalCloseClickBound)}},{key:"handleTriggerClick",value:function(e){var n=t(e.target).closest(".modal-trigger");if(e.target&&n.length){var r=n[0].getAttribute("href");r=r?r.slice(1):n[0].getAttribute("data-target");var i=document.getElementById(r).M_Modal;i&&i.open(n),e.preventDefault()}}},{key:"handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"handleModalCloseClick",value:function(e){var n=t(e.target).closest(".modal-close");e.target&&n.length&&this.close()}},{key:"handleKeydown",value:function(t){27===t.keyCode&&this.options.dismissible&&this.close()}},{key:"animateIn",value:function(){var n=this;t.extend(this.$el[0].style,{display:"block",opacity:0}),t.extend(this.$overlay[0].style,{display:"block",opacity:0}),e(this.$overlay[0],{opacity:this.options.opacity},{duration:this.options.inDuration,queue:!1,ease:"easeOutCubic"});var r={duration:this.options.inDuration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof n.options.ready&&n.options.ready.call(n,n.$el,n.openingTrigger)}};this.$el[0].classList.contains("bottom-sheet")?e(this.$el[0],{bottom:0,opacity:1},r):(e.hook(this.$el[0],"scaleX",.7),this.$el[0].style.top=this.options.startingTop,e(this.$el[0],{top:this.options.endingTop,opacity:1,scaleX:1},r))}},{key:"animateOut",value:function(){var t=this;e(this.$overlay[0],{opacity:0},{duration:this.options.outDuration,queue:!1,ease:"easeOutQuart"});var n={duration:this.options.outDuration,queue:!1,ease:"easeOutCubic",complete:function(){t.$el[0].style.display="none","function"==typeof t.options.complete&&t.options.complete.call(t,t.$el),t.$overlay[0].parentNode.removeChild(t.$overlay[0])}};this.$el[0].classList.contains("bottom-sheet")?e(this.$el[0],{bottom:"-100%",opacity:0},n):e(this.$el[0],{top:this.options.startingTop,opacity:0,scaleX:.7},n)}},{key:"open",value:function(t){if(!this.isOpen){this.isOpen=!0;var e=document.body;return e.style.overflow="hidden",this.$el[0].classList.add("open"),e.appendChild(this.$overlay[0]),this.openingTrigger=t||void 0,this.options.dismissible&&(this.handleKeydownBound=this.handleKeydown.bind(this),document.addEventListener("keydown",this.handleKeydownBound)),this.animateIn(),this}}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,this.$el[0].classList.remove("open"),document.body.style.overflow="",this.options.dismissible&&document.removeEventListener("keydown",this.handleKeydownBound),this.animateOut(),this}}],[{key:"init",value:function(e,n){var i=[];return e.each(function(){i.push(new r(t(this),n))}),i}},{key:"defaults",get:function(){return n}}]),r}();r._increment=0,r._count=0,Materialize.Modal=r,t.fn.modal=function(e){return r.prototype[e]?"get"===e.slice(0,3)?this.first()[0].M_Modal[e]():this.each(function(){this.M_Modal[e]()}):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.modal"):(r.init(this,arguments[0]),this)}}(jQuery,Materialize.Vel),function(t){t.fn.materialbox=function(){return this.each(function(){if(!t(this).hasClass("initialized")){t(this).addClass("initialized");var e,n,r=!1,i=!0,o=200,a=t(this),s=t("<div></div>").addClass("material-placeholder"),u=a.attr("style");a.wrap(s),a.on("click",function(){var o=a.parent(".material-placeholder"),s=window.innerWidth,u=window.innerHeight,l=a.width(),h=a.height();if(!1===i)return c(),!1;if(r&&!0===i)return c(),!1;for(i=!1,a.addClass("active"),r=!0,o.css({width:o[0].getBoundingClientRect().width,height:o[0].getBoundingClientRect().height,position:"relative",top:0,left:0}),e=void 0,n=o[0].parentNode;null!==n&&!t(n).is(document);){var f=t(n);"visible"!==f.css("overflow")&&(f.css("overflow","visible"),e=void 0===e?f:e.add(f)),n=n.parentNode}a.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}).data("width",l).data("height",h);var d=t('<div id="materialbox-overlay"></div>').css({opacity:0}).click(function(){!0===i&&c()});a.before(d);var p=d[0].getBoundingClientRect();if(d.css({width:s,height:u,left:-1*p.left,top:-1*p.top}),d.velocity({opacity:1},{duration:275,queue:!1,easing:"easeOutQuad"}),""!==a.data("caption")){var m=t('<div class="materialbox-caption"></div>');m.text(a.data("caption")),t("body").append(m),m.css({display:"inline"}),m.velocity({opacity:1},{duration:275,queue:!1,easing:"easeOutQuad"})}var g=0,v=0;l/s>h/u?(g=.9*s,v=.9*s*(h/l)):(g=.9*u*(l/h),v=.9*u),a.hasClass("responsive-img")?a.velocity({"max-width":g,width:l},{duration:0,queue:!1,complete:function(){a.css({left:0,top:0}).velocity({height:v,width:g,left:t(document).scrollLeft()+s/2-a.parent(".material-placeholder").offset().left-g/2,top:t(document).scrollTop()+u/2-a.parent(".material-placeholder").offset().top-v/2},{duration:275,queue:!1,easing:"easeOutQuad",complete:function(){i=!0}})}}):a.css("left",0).css("top",0).velocity({height:v,width:g,left:t(document).scrollLeft()+s/2-a.parent(".material-placeholder").offset().left-g/2,top:t(document).scrollTop()+u/2-a.parent(".material-placeholder").offset().top-v/2},{duration:275,queue:!1,easing:"easeOutQuad",complete:function(){i=!0}}),t(window).on("scroll.materialbox",function(){r&&c()}),t(window).on("resize.materialbox",function(){r&&c()}),t(document).on("keyup.materialbox",function(t){27===t.keyCode&&!0===i&&r&&c()})})}function c(){i=!1;var n=a.parent(".material-placeholder"),s=(window,window,a.data("width")),c=a.data("height");a.velocity("stop",!0),t("#materialbox-overlay").velocity("stop",!0),t(".materialbox-caption").velocity("stop",!0),t(window).off("scroll.materialbox"),t(document).off("keyup.materialbox"),t(window).off("resize.materialbox"),t("#materialbox-overlay").velocity({opacity:0},{duration:o,queue:!1,easing:"easeOutQuad",complete:function(){r=!1,t(this).remove()}}),a.velocity({width:s,height:c,left:0,top:0},{duration:o,queue:!1,easing:"easeOutQuad",complete:function(){n.css({height:"",width:"",position:"",top:"",left:""}),a.removeAttr("style"),a.attr("style",u),a.removeClass("active"),i=!0,e&&e.css("overflow","")}}),t(".materialbox-caption").velocity({opacity:0},{duration:o,queue:!1,easing:"easeOutQuad",complete:function(){t(this).remove()}})}})},t(document).ready(function(){t(".materialboxed").materialbox()})}(jQuery),function(t){t.fn.parallax=function(){var e=t(window).width();return this.each(function(n){var r=t(this);function i(n){var i;i=e<601?r.height()>0?r.height():r.children("img").height():r.height()>0?r.height():500;var o=r.children("img").first(),a=o.height()-i,s=r.offset().top+i,u=r.offset().top,c=t(window).scrollTop(),l=window.innerHeight,h=Math.round(a*((c+l-u)/(i+l)));n&&o.css("display","block"),s>c&&u<c+l&&o.css("transform","translate3D(-50%,"+h+"px, 0)")}r.addClass("parallax"),r.children("img").one("load",function(){i(!0)}).each(function(){this.complete&&t(this).trigger("load")}),t(window).scroll(function(){e=t(window).width(),i(!1)}),t(window).resize(function(){e=t(window).width(),i(!1)})})}}(jQuery),function(t){var e={init:function(e){e=t.extend({onShow:null,swipeable:!1,responsiveThreshold:1/0},e);var n=Materialize.objectSelectorString(t(this));return this.each(function(r){var i,o,a,s,u=n+r,c=t(this),l=t(window).width(),h=c.find("li.tab a"),f=c.width(),d=t(),p=Math.max(f,c[0].scrollWidth)/h.length,m=0,g=0,v=!1,y=function(t){return Math.ceil(f-t.position().left-t[0].getBoundingClientRect().width-c.scrollLeft())},w=function(t){return Math.floor(t.position().left+c.scrollLeft())},x=function(t){m-t>=0?(s.velocity({right:y(i)},{duration:300,queue:!1,easing:"easeOutQuad"}),s.velocity({left:w(i)},{duration:300,queue:!1,easing:"easeOutQuad",delay:90})):(s.velocity({left:w(i)},{duration:300,queue:!1,easing:"easeOutQuad"}),s.velocity({right:y(i)},{duration:300,queue:!1,easing:"easeOutQuad",delay:90}))};e.swipeable&&l>e.responsiveThreshold&&(e.swipeable=!1),0===(i=t(h.filter('[href="'+location.hash+'"]'))).length&&(i=t(this).find("li.tab a.active").first()),0===i.length&&(i=t(this).find("li.tab a").first()),i.addClass("active"),(m=h.index(i))<0&&(m=0),void 0!==i[0]&&(o=t(i[0].hash)).addClass("active"),c.find(".indicator").length||c.append('<li class="indicator"></li>'),s=c.find(".indicator"),c.append(s),c.is(":visible")&&setTimeout(function(){s.css({right:y(i)}),s.css({left:w(i)})},0),t(window).off("resize.tabs-"+u).on("resize.tabs-"+u,function(){f=c.width(),p=Math.max(f,c[0].scrollWidth)/h.length,m<0&&(m=0),0!==p&&0!==f&&(s.css({right:y(i)}),s.css({left:w(i)}))}),e.swipeable?(h.each(function(){var e=t(Materialize.escapeHash(this.hash));e.addClass("carousel-item"),d=d.add(e)}),a=d.wrapAll('<div class="tabs-content carousel"></div>'),d.css("display",""),t(".tabs-content.carousel").carousel({fullWidth:!0,noWrap:!0,onCycleTo:function(t){if(!v){var n=m;m=a.index(t),i.removeClass("active"),(i=h.eq(m)).addClass("active"),x(n),"function"==typeof e.onShow&&e.onShow.call(c[0],o)}}})):h.not(i).each(function(){t(Materialize.escapeHash(this.hash)).hide()}),c.off("click.tabs").on("click.tabs","a",function(n){if(t(this).parent().hasClass("disabled"))n.preventDefault();else if(!t(this).attr("target")){v=!0,f=c.width(),p=Math.max(f,c[0].scrollWidth)/h.length,i.removeClass("active");var r=o;i=t(this),o=t(Materialize.escapeHash(this.hash)),h=c.find("li.tab a"),i.position(),i.addClass("active"),g=m,(m=h.index(t(this)))<0&&(m=0),e.swipeable?d.length&&d.carousel("set",m,function(){"function"==typeof e.onShow&&e.onShow.call(c[0],o)}):(void 0!==o&&(o.show(),o.addClass("active"),"function"==typeof e.onShow&&e.onShow.call(this,o)),void 0===r||r.is(o)||(r.hide(),r.removeClass("active"))),setTimeout(function(){v=!1},300),x(g),n.preventDefault()}})})},select_tab:function(t){this.find('a[href="#'+t+'"]').trigger("click")}};t.fn.tabs=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.tabs"):e.init.apply(this,arguments)},t(document).ready(function(){t("ul.tabs").tabs()})}(jQuery),function(t){t.fn.tooltip=function(n){return"remove"===n?(this.each(function(){t("#"+t(this).attr("data-tooltip-id")).remove(),t(this).removeAttr("data-tooltip-id"),t(this).off("mouseenter.tooltip mouseleave.tooltip")}),!1):(n=t.extend({delay:350,tooltip:"",position:"bottom",html:!1},n),this.each(function(){var r,i,o,a,s,u,c=Materialize.guid(),l=t(this);l.attr("data-tooltip-id")&&t("#"+l.attr("data-tooltip-id")).remove(),l.attr("data-tooltip-id",c);var h,f=function(){r=l.attr("data-html")?"true"===l.attr("data-html"):n.html,i=void 0===(i=l.attr("data-delay"))||""===i?n.delay:i,o=void 0===(o=l.attr("data-position"))||""===o?n.position:o,a=void 0===(a=l.attr("data-tooltip"))||""===a?n.tooltip:a};f(),h=t('<div class="material-tooltip"></div>'),a=r?t("<span></span>").html(a):t("<span></span>").text(a),h.append(a).appendTo(t("body")).attr("id",c),(u=t('<div class="backdrop"></div>')).appendTo(h),s=h,l.off("mouseenter.tooltip mouseleave.tooltip");var d,p=!1;l.on({"mouseenter.tooltip":function(t){d=setTimeout(function(){f(),p=!0,s.velocity("stop"),u.velocity("stop"),s.css({visibility:"visible",left:"0px",top:"0px"});var t,n,r,i,a,c,h=l.outerWidth(),d=l.outerHeight(),m=s.outerHeight(),g=s.outerWidth(),v="0px",y="0px",w=u[0].offsetWidth,x=u[0].offsetHeight;"top"===o?(i=l.offset().top-m-5,a=l.offset().left+h/2-g/2,c=e(a,i,g,m),v="-10px",u.css({bottom:0,left:0,borderRadius:"14px 14px 0 0",transformOrigin:"50% 100%",marginTop:m,marginLeft:g/2-w/2})):"left"===o?(i=l.offset().top+d/2-m/2,a=l.offset().left-g-5,c=e(a,i,g,m),y="-10px",u.css({top:"-7px",right:0,width:"14px",height:"14px",borderRadius:"14px 0 0 14px",transformOrigin:"95% 50%",marginTop:m/2,marginLeft:g})):"right"===o?(i=l.offset().top+d/2-m/2,a=l.offset().left+h+5,c=e(a,i,g,m),y="+10px",u.css({top:"-7px",left:0,width:"14px",height:"14px",borderRadius:"0 14px 14px 0",transformOrigin:"5% 50%",marginTop:m/2,marginLeft:"0px"})):(i=l.offset().top+l.outerHeight()+5,a=l.offset().left+h/2-g/2,c=e(a,i,g,m),v="+10px",u.css({top:0,left:0,marginLeft:g/2-w/2})),s.css({top:c.y,left:c.x}),t=Math.SQRT2*g/parseInt(w),n=Math.SQRT2*m/parseInt(x),r=Math.max(t,n),s.velocity({translateY:v,translateX:y},{duration:350,queue:!1}).velocity({opacity:1},{duration:300,delay:50,queue:!1}),u.css({visibility:"visible"}).velocity({opacity:1},{duration:55,delay:0,queue:!1}).velocity({scaleX:r,scaleY:r},{duration:300,delay:0,queue:!1,easing:"easeInOutQuad"})},i)},"mouseleave.tooltip":function(){p=!1,clearTimeout(d),setTimeout(function(){!0!==p&&(s.velocity({opacity:0,translateY:0,translateX:0},{duration:225,queue:!1}),u.velocity({opacity:0,scaleX:1,scaleY:1},{duration:225,queue:!1,complete:function(){u.css({visibility:"hidden"}),s.css({visibility:"hidden"}),p=!1}}))},225)}})}))};var e=function(e,n,r,i){var o=e,a=n;return o<0?o=4:o+r>window.innerWidth&&(o-=o+r-window.innerWidth),a<0?a=4:a+i>window.innerHeight+t(window).scrollTop&&(a-=a+i-window.innerHeight),{x:o,y:a}};t(document).ready(function(){t(".tooltipped").tooltip()})}(jQuery),function(t){"use strict";var e=e||{},n=document.querySelectorAll.bind(document);function r(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=n+":"+t[n]+";");return e}var i={duration:750,show:function(t,e){if(2===t.button)return!1;var n=e||this,o=document.createElement("div");o.className="waves-ripple",n.appendChild(o);var a,s,u,c,l,h,f=(c={top:0,left:0},s=(l=(a=n)&&a.ownerDocument).documentElement,"undefined"!=typeof a.getBoundingClientRect&&(c=a.getBoundingClientRect()),u=null!==(h=l)&&h===h.window?l:9===l.nodeType&&l.defaultView,{top:c.top+u.pageYOffset-s.clientTop,left:c.left+u.pageXOffset-s.clientLeft}),d=t.pageY-f.top,p=t.pageX-f.left,m="scale("+n.clientWidth/100*10+")";"touches"in t&&(d=t.touches[0].pageY-f.top,p=t.touches[0].pageX-f.left),o.setAttribute("data-hold",Date.now()),o.setAttribute("data-scale",m),o.setAttribute("data-x",p),o.setAttribute("data-y",d);var g={top:d+"px",left:p+"px"};o.className=o.className+" waves-notransition",o.setAttribute("style",r(g)),o.className=o.className.replace("waves-notransition",""),g["-webkit-transform"]=m,g["-moz-transform"]=m,g["-ms-transform"]=m,g["-o-transform"]=m,g.transform=m,g.opacity="1",g["-webkit-transition-duration"]=i.duration+"ms",g["-moz-transition-duration"]=i.duration+"ms",g["-o-transition-duration"]=i.duration+"ms",g["transition-duration"]=i.duration+"ms",g["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",g["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",g["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",g["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",o.setAttribute("style",r(g))},hide:function(t){o.touchup(t);var e=this,n=null,a=e.getElementsByClassName("waves-ripple");if(!(a.length>0))return!1;var s=(n=a[a.length-1]).getAttribute("data-x"),u=n.getAttribute("data-y"),c=n.getAttribute("data-scale"),l=350-(Date.now()-Number(n.getAttribute("data-hold")));l<0&&(l=0),setTimeout(function(){n.setAttribute("style",r({top:u+"px",left:s+"px",opacity:"0","-webkit-transition-duration":i.duration+"ms","-moz-transition-duration":i.duration+"ms","-o-transition-duration":i.duration+"ms","transition-duration":i.duration+"ms","-webkit-transform":c,"-moz-transform":c,"-ms-transform":c,"-o-transform":c,transform:c})),setTimeout(function(){try{e.removeChild(n)}catch(t){return!1}},i.duration)},l)},wrapInput:function(t){for(var e=0;e<t.length;e++){var n=t[e];if("input"===n.tagName.toLowerCase()){var r=n.parentNode;if("i"===r.tagName.toLowerCase()&&-1!==r.className.indexOf("waves-effect"))continue;var i=document.createElement("i");i.className=n.className+" waves-input-wrapper";var o=n.getAttribute("style");o||(o=""),i.setAttribute("style",o),n.className="waves-button-input",n.removeAttribute("style"),r.replaceChild(i,n),i.appendChild(n)}}}},o={touches:0,allowEvent:function(t){var e=!0;return"touchstart"===t.type?o.touches+=1:"touchend"===t.type||"touchcancel"===t.type?setTimeout(function(){o.touches>0&&(o.touches-=1)},500):"mousedown"===t.type&&o.touches>0&&(e=!1),e},touchup:function(t){o.allowEvent(t)}};function a(e){var n=function(t){if(!1===o.allowEvent(t))return null;for(var e=null,n=t.target||t.srcElement;null!==n.parentNode;){if(!(n instanceof SVGElement)&&-1!==n.className.indexOf("waves-effect")){e=n;break}n=n.parentNode}return e}(e);null!==n&&(i.show(e,n),"ontouchstart"in t&&(n.addEventListener("touchend",i.hide,!1),n.addEventListener("touchcancel",i.hide,!1)),n.addEventListener("mouseup",i.hide,!1),n.addEventListener("mouseleave",i.hide,!1),n.addEventListener("dragend",i.hide,!1))}e.displayEffect=function(e){"duration"in(e=e||{})&&(i.duration=e.duration),i.wrapInput(n(".waves-effect")),"ontouchstart"in t&&document.body.addEventListener("touchstart",a,!1),document.body.addEventListener("mousedown",a,!1)},e.attach=function(e){"input"===e.tagName.toLowerCase()&&(i.wrapInput([e]),e=e.parentNode),"ontouchstart"in t&&e.addEventListener("touchstart",a,!1),e.addEventListener("mousedown",a,!1)},t.Waves=e,document.addEventListener("DOMContentLoaded",function(){e.displayEffect()},!1)}(window),function(t,e){"use strict";var n={displayLength:1/0,inDuration:300,outDuration:375,className:void 0,completeCallback:void 0,activationPercent:.8},r=function(){function r(e,n,i,o){if(_classCallCheck(this,r),e){this.options={displayLength:n,className:i,completeCallback:o},this.options=t.extend({},r.defaults,this.options),this.message=e,this.panning=!1,this.timeRemaining=this.options.displayLength,0===r._toasts.length&&r._createContainer(),r._toasts.push(this);var a=this.createToast();a.M_Toast=this,this.el=a,this._animateIn(),this.setTimer()}}return _createClass(r,[{key:"createToast",value:function(){var e=document.createElement("div");if(e.classList.add("toast"),this.options.className){var n,i=this.options.className.split(" "),o=void 0;for(o=0,n=i.length;o<n;o++)e.classList.add(i[o])}return("object"==typeof HTMLElement?this.message instanceof HTMLElement:this.message&&"object"==typeof this.message&&null!==this.message&&1===this.message.nodeType&&"string"==typeof this.message.nodeName)?e.appendChild(this.message):this.message instanceof jQuery?t(e).append(this.message):e.innerHTML=this.message,r._container.appendChild(e),e}},{key:"_animateIn",value:function(){e(this.el,{top:0,opacity:1},{duration:300,easing:"easeOutCubic",queue:!1})}},{key:"setTimer",value:function(){var t=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){t.panning||(t.timeRemaining-=20),t.timeRemaining<=0&&t.remove()},20))}},{key:"remove",value:function(){var t=this;window.clearInterval(this.counterInterval);var n=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+n+"px)",this.el.style.opacity=0),e(this.el,{opacity:0,marginTop:"-40px"},{duration:this.options.outDuration,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof t.options.completeCallback&&t.options.completeCallback(),t.el.parentNode.removeChild(t.el),r._toasts.splice(r._toasts.indexOf(t),1),0===r._toasts.length&&r._removeContainer()}})}}],[{key:"_createContainer",value:function(){var t=document.createElement("div");t.setAttribute("id","toast-container"),t.addEventListener("touchstart",r._onDragStart),t.addEventListener("touchmove",r._onDragMove),t.addEventListener("touchend",r._onDragEnd),t.addEventListener("mousedown",r._onDragStart),document.addEventListener("mousemove",r._onDragMove),document.addEventListener("mouseup",r._onDragEnd),document.body.appendChild(t),r._container=t}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",r._onDragMove),document.removeEventListener("mouseup",r._onDragEnd),r._container.parentNode.removeChild(r._container),r._container=null}},{key:"_onDragStart",value:function(e){if(e.target&&t(e.target).closest(".toast").length){var n=t(e.target).closest(".toast")[0].M_Toast;n.panning=!0,r._draggedToast=n,n.el.classList.add("panning"),n.el.style.transition="",n.startingXPos=r._xPos(e),n.time=Date.now(),n.xPos=r._xPos(e)}}},{key:"_onDragMove",value:function(t){if(r._draggedToast){t.preventDefault();var e=r._draggedToast;e.deltaX=Math.abs(e.xPos-r._xPos(t)),e.xPos=r._xPos(t),e.velocityX=e.deltaX/(Date.now()-e.time),e.time=Date.now();var n=e.xPos-e.startingXPos,i=e.el.offsetWidth*e.options.activationPercent;e.el.style.transform="translateX("+n+"px)",e.el.style.opacity=1-Math.abs(n/i)}}},{key:"_onDragEnd",value:function(t){if(r._draggedToast){var e=r._draggedToast;e.panning=!1,e.el.classList.remove("panning");var n=e.el.offsetWidth*e.options.activationPercent;Math.abs(e.xPos-e.startingXPos)>n||e.velocityX>1?(e.wasSwiped=!0,e.remove()):(e.el.style.transition="transform .2s, opacity .2s",e.el.style.transform="",e.el.style.opacity=""),r._draggedToast=null}}},{key:"_xPos",value:function(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}},{key:"removeAll",value:function(){for(var t in r._toasts)r._toasts[t].remove()}},{key:"defaults",get:function(){return n}}]),r}();r._toasts=[],r._container=null,r._draggedToast=null,Materialize.Toast=r,Materialize.toast=function(t,e,n,i){return new r(t,e,n,i)}}(jQuery,Materialize.Vel),function(t){var e={init:function(e){e=t.extend({menuWidth:300,edge:"left",closeOnClick:!1,draggable:!0,onOpen:null,onClose:null},e),t(this).each(function(){var n=t(this),r=n.attr("data-activates"),i=t("#"+r);300!=e.menuWidth&&i.css("width",e.menuWidth);var o=t('.drag-target[data-sidenav="'+r+'"]');e.draggable?(o.length&&o.remove(),o=t('<div class="drag-target"></div>').attr("data-sidenav",r),t("body").append(o)):o=t(),"left"==e.edge?(i.css("transform","translateX(-100%)"),o.css({left:0})):(i.addClass("right-aligned").css("transform","translateX(100%)"),o.css({right:0})),i.hasClass("fixed")&&window.innerWidth>992&&i.css("transform","translateX(0)"),i.hasClass("fixed")&&t(window).resize(function(){window.innerWidth>992?0!==t("#sidenav-overlay").length&&s?a(!0):i.css("transform","translateX(0%)"):!1===s&&i.css("transform","left"===e.edge?"translateX(-100%)":"translateX(100%)")}),!0===e.closeOnClick&&i.on("click.itemclick","a:not(.collapsible-header)",function(){window.innerWidth>992&&i.hasClass("fixed")||a()});var a=function(n){s=!1,t("body").css({overflow:"",width:""}),t("#sidenav-overlay").velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){t(this).remove()}}),"left"===e.edge?(o.css({width:"",right:"",left:"0"}),i.velocity({translateX:"-100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){!0===n&&(i.removeAttr("style"),i.css("width",e.menuWidth))}})):(o.css({width:"",right:"0",left:""}),i.velocity({translateX:"100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){!0===n&&(i.removeAttr("style"),i.css("width",e.menuWidth))}})),"function"==typeof e.onClose&&e.onClose.call(this,i)},s=!1;e.draggable&&(o.on("click",function(){s&&a()}),o.hammer({prevent_default:!1}).on("pan",function(n){if("touch"==n.gesture.pointerType){var r=n.gesture.center.x;if(0===r&&0===n.gesture.center.y)return;var o,u=t("body"),c=t("#sidenav-overlay"),l=u.innerWidth();if(u.css("overflow","hidden"),u.width(l),0===c.length&&((c=t('<div id="sidenav-overlay"></div>')).css("opacity",0).click(function(){a()}),"function"==typeof e.onOpen&&e.onOpen.call(this,i),t("body").append(c)),"left"===e.edge&&(r>e.menuWidth?r=e.menuWidth:r<0&&(r=0)),"left"===e.edge)r<e.menuWidth/2?s=!1:r>=e.menuWidth/2&&(s=!0),i.css("transform","translateX("+(r-e.menuWidth)+"px)");else{r<window.innerWidth-e.menuWidth/2?s=!0:r>=window.innerWidth-e.menuWidth/2&&(s=!1);var h=r-e.menuWidth/2;h<0&&(h=0),i.css("transform","translateX("+h+"px)")}"left"===e.edge?c.velocity({opacity:o=r/e.menuWidth},{duration:10,queue:!1,easing:"easeOutQuad"}):(o=Math.abs((r-window.innerWidth)/e.menuWidth),c.velocity({opacity:o},{duration:10,queue:!1,easing:"easeOutQuad"}))}}).on("panend",function(n){if("touch"==n.gesture.pointerType){var r=t("#sidenav-overlay"),a=n.gesture.velocityX,u=n.gesture.center.x,c=u-e.menuWidth,l=u-e.menuWidth/2;c>0&&(c=0),l<0&&(l=0),"left"===e.edge?s&&a<=.3||a<-.5?(0!==c&&i.velocity({translateX:[0,c]},{duration:300,queue:!1,easing:"easeOutQuad"}),r.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),o.css({width:"50%",right:0,left:""}),s=!0):(!s||a>.3)&&(t("body").css({overflow:"",width:""}),i.velocity({translateX:[-1*e.menuWidth-10,c]},{duration:200,queue:!1,easing:"easeOutQuad"}),r.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){"function"==typeof e.onClose&&e.onClose.call(this,i),t(this).remove()}}),o.css({width:"10px",right:"",left:0})):s&&a>=-.3||a>.5?(0!==l&&i.velocity({translateX:[0,l]},{duration:300,queue:!1,easing:"easeOutQuad"}),r.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),o.css({width:"50%",right:"",left:0}),s=!0):(!s||a<-.3)&&(t("body").css({overflow:"",width:""}),i.velocity({translateX:[e.menuWidth+10,l]},{duration:200,queue:!1,easing:"easeOutQuad"}),r.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){"function"==typeof e.onClose&&e.onClose.call(this,i),t(this).remove()}}),o.css({width:"10px",right:0,left:""}))}})),n.off("click.sidenav").on("click.sidenav",function(){if(!0===s)s=!1,a();else{var n=t("body"),r=t('<div id="sidenav-overlay"></div>'),u=n.innerWidth();n.css("overflow","hidden"),n.width(u),t("body").append(o),"left"===e.edge?(o.css({width:"50%",right:0,left:""}),i.velocity({translateX:[0,-1*e.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})):(o.css({width:"50%",right:"",left:0}),i.velocity({translateX:[0,e.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})),r.css("opacity",0).click(function(){s=!1,a(),r.velocity({opacity:0},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){t(this).remove()}})}),t("body").append(r),r.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){s=!0}}),"function"==typeof e.onOpen&&e.onOpen.call(this,i)}return!1})})},destroy:function(){var e=t("#sidenav-overlay"),n=t('.drag-target[data-sidenav="'+t(this).attr("data-activates")+'"]');e.trigger("click"),n.remove(),t(this).off("click"),e.remove()},show:function(){this.trigger("click")},hide:function(){t("#sidenav-overlay").trigger("click")}};t.fn.sideNav=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.sideNav"):e.init.apply(this,arguments)}}(jQuery),function(t){var e=t(window),n=[],r=[],i=!1,o=0,a={top:0,right:0,bottom:0,left:0};function s(){e.trigger("scrollSpy:winSize")}t.scrollSpy=function(s,u){u=t.extend({throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(t){return'a[href="#'+t+'"]'}},u);var c=[];(s=t(s)).each(function(e,r){n.push(t(r)),t(r).data("scrollSpy:id",e),t('a[href="#'+t(r).attr("id")+'"]').click(function(e){e.preventDefault();var n=t(Materialize.escapeHash(this.hash)).offset().top+1;t("html, body").animate({scrollTop:n-u.scrollOffset},{duration:400,queue:!1,easing:"easeOutCubic"})})}),a.top=u.offsetTop||0,a.right=u.offsetRight||0,a.bottom=u.offsetBottom||0,a.left=u.offsetLeft||0;var l=Materialize.throttle(function(){!function(i){++o;var s=e.scrollTop(),u=e.scrollLeft(),c=u+e.width(),l=s+e.height(),h=function(e,r,i,o){var a=t();return t.each(n,function(t,n){if(n.height()>0){var s=n.offset().top,u=n.offset().left,c=u+n.width(),l=s+n.height();!(u>r||c<o||s>i||l<e)&&a.push(n)}}),a}(s+a.top+i||200,c+a.right,l+a.bottom,u+a.left);t.each(h,function(t,e){"number"!=typeof e.data("scrollSpy:ticks")&&e.triggerHandler("scrollSpy:enter"),e.data("scrollSpy:ticks",o)}),t.each(r,function(t,e){var n=e.data("scrollSpy:ticks");"number"==typeof n&&n!==o&&(e.triggerHandler("scrollSpy:exit"),e.data("scrollSpy:ticks",null))}),r=h}(u.scrollOffset)},u.throttle||100),h=function(){t(document).ready(l)};return i||(e.on("scroll",h),e.on("resize",h),i=!0),setTimeout(h,0),s.on("scrollSpy:enter",function(){c=t.grep(c,function(t){return 0!=t.height()});var e=t(this);c[0]?(t(u.getActiveElement(c[0].attr("id"))).removeClass(u.activeClass),e.data("scrollSpy:id")<c[0].data("scrollSpy:id")?c.unshift(t(this)):c.push(t(this))):c.push(t(this)),t(u.getActiveElement(c[0].attr("id"))).addClass(u.activeClass)}),s.on("scrollSpy:exit",function(){if((c=t.grep(c,function(t){return 0!=t.height()}))[0]){t(u.getActiveElement(c[0].attr("id"))).removeClass(u.activeClass);var e=t(this);(c=t.grep(c,function(t){return t.attr("id")!=e.attr("id")}))[0]&&t(u.getActiveElement(c[0].attr("id"))).addClass(u.activeClass)}}),s},t.winSizeSpy=function(n){return t.winSizeSpy=function(){return e},n=n||{throttle:100},e.on("resize",Materialize.throttle(s,n.throttle||100))},t.fn.scrollSpy=function(e){return t.scrollSpy(t(this),e)}}(jQuery),function(t){t(document).ready(function(){Materialize.updateTextFields=function(){t("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea").each(function(e,n){var r=t(this);t(n).val().length>0||t(n).is(":focus")||n.autofocus||void 0!==r.attr("placeholder")?r.siblings("label").addClass("active"):t(n)[0].validity?r.siblings("label").toggleClass("active",!0===t(n)[0].validity.badInput):r.siblings("label").removeClass("active")})};var e="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea";t(document).on("change",e,function(){0===t(this).val().length&&void 0===t(this).attr("placeholder")||t(this).siblings("label").addClass("active"),validate_field(t(this))}),t(document).ready(function(){Materialize.updateTextFields()}),t(document).on("reset",function(n){var r=t(n.target);r.is("form")&&(r.find(e).removeClass("valid").removeClass("invalid"),r.find(e).each(function(){""===t(this).attr("value")&&t(this).siblings("label").removeClass("active")}),r.find("select.initialized").each(function(){var t=r.find("option[selected]").text();r.siblings("input.select-dropdown").val(t)}))}),t(document).on("focus",e,function(){t(this).siblings("label, .prefix").addClass("active")}),t(document).on("blur",e,function(){var e=t(this),n=".prefix";0===e.val().length&&!0!==e[0].validity.badInput&&void 0===e.attr("placeholder")&&(n+=", label"),e.siblings(n).removeClass("active"),validate_field(e)}),window.validate_field=function(t){var e=void 0!==t.attr("data-length"),n=parseInt(t.attr("data-length")),r=t.val().length;0!==t.val().length||!1!==t[0].validity.badInput||t.is(":required")?t.hasClass("validate")&&(t.is(":valid")&&e&&r<=n||t.is(":valid")&&!e?(t.removeClass("invalid"),t.addClass("valid")):(t.removeClass("valid"),t.addClass("invalid"))):t.hasClass("validate")&&(t.removeClass("valid"),t.removeClass("invalid"))},t(document).on("keyup.radio","input[type=radio], input[type=checkbox]",function(e){if(9===e.which)return t(this).addClass("tabbed"),void t(this).one("blur",function(e){t(this).removeClass("tabbed")})});var n=t(".hiddendiv").first();n.length||(n=t('<div class="hiddendiv common"></div>'),t("body").append(n)),t(".materialize-textarea").each(function(){var e=t(this);e.data("original-height",e.height()),e.data("previous-length",e.val().length)}),t("body").on("keyup keydown autoresize",".materialize-textarea",function(){!function(e){var r=e.css("font-family"),i=e.css("font-size"),o=e.css("line-height"),a=e.css("padding");i&&n.css("font-size",i),r&&n.css("font-family",r),o&&n.css("line-height",o),a&&n.css("padding",a),e.data("original-height")||e.data("original-height",e.height()),"off"===e.attr("wrap")&&n.css("overflow-wrap","normal").css("white-space","pre"),n.text(e.val()+"\n");var s=n.html().replace(/\n/g,"<br>");n.html(s),e.is(":visible")?n.css("width",e.width()):n.css("width",t(window).width()/2),e.data("original-height")<=n.height()?e.css("height",n.height()):e.val().length<e.data("previous-length")&&e.css("height",e.data("original-height")),e.data("previous-length",e.val().length)}(t(this))}),t(document).on("change",'.file-field input[type="file"]',function(){for(var e=t(this).closest(".file-field").find("input.file-path"),n=t(this)[0].files,r=[],i=0;i<n.length;i++)r.push(n[i].name);e.val(r.join(", ")),e.trigger("change")});var r="input[type=range]",i=!1;t(r).each(function(){var e=t('<span class="thumb"><span class="value"></span></span>');t(this).after(e)});var o=function(t){var e=parseInt(t.parent().css("padding-left"));t.velocity({height:"30px",width:"30px",top:"-30px",marginLeft:-7+e+"px"},{duration:300,easing:"easeOutExpo"})},a=function(t){var e=t.width()-15,n=parseFloat(t.attr("max")),r=parseFloat(t.attr("min"));return(parseFloat(t.val())-r)/(n-r)*e};t(document).on("change",r,function(e){var n=t(this).siblings(".thumb");n.find(".value").html(t(this).val()),n.hasClass("active")||o(n);var r=a(t(this));n.addClass("active").css("left",r)}),t(document).on("mousedown touchstart",r,function(e){var n=t(this).siblings(".thumb");if(n.length<=0&&(n=t('<span class="thumb"><span class="value"></span></span>'),t(this).after(n)),n.find(".value").html(t(this).val()),i=!0,t(this).addClass("active"),n.hasClass("active")||o(n),"input"!==e.type){var r=a(t(this));n.addClass("active").css("left",r)}}),t(document).on("mouseup touchend",".range-field",function(){i=!1,t(this).removeClass("active")}),t(document).on("input mousemove touchmove",".range-field",function(e){var n=t(this).children(".thumb"),s=t(this).find(r);if(i){n.hasClass("active")||o(n);var u=a(s);n.addClass("active").css("left",u),n.find(".value").html(n.siblings(r).val())}}),t(document).on("mouseout touchleave",".range-field",function(){if(!i){var e=t(this).children(".thumb"),n=7+parseInt(t(this).css("padding-left"))+"px";e.hasClass("active")&&e.velocity({height:"0",width:"0",top:"10px",marginLeft:n},{duration:100}),e.removeClass("active")}}),t.fn.autocomplete=function(e){return e=t.extend({data:{},limit:1/0,onAutocomplete:null,minLength:1},e),this.each(function(){var n,r=t(this),i=e.data,o=0,a=-1,s=r.closest(".input-field");if(t.isEmptyObject(i))r.off("keyup.autocomplete focus.autocomplete");else{var u,c=t('<ul class="autocomplete-content dropdown-content"></ul>');s.length?(u=s.children(".autocomplete-content.dropdown-content").first()).length||s.append(c):(u=r.next(".autocomplete-content.dropdown-content")).length||r.after(c),u.length&&(c=u);var l=function(){c.empty(),a=-1,c.find(".active").removeClass("active"),n=void 0};r.off("blur.autocomplete").on("blur.autocomplete",function(){l()}),r.off("keyup.autocomplete focus.autocomplete").on("keyup.autocomplete focus.autocomplete",function(a){o=0;var s=r.val().toLowerCase();if(13!==a.which&&38!==a.which&&40!==a.which){if(n!==s&&(l(),s.length>=e.minLength))for(var u in i)if(i.hasOwnProperty(u)&&-1!==u.toLowerCase().indexOf(s)){if(o>=e.limit)break;var h=t("<li></li>");h.append(i[u]?'<img src="'+i[u]+'" class="right circle"><span>'+u+"</span>":"<span>"+u+"</span>"),c.append(h),f=s,p=(d=h).find("img"),g=(m=d.text().toLowerCase().indexOf(""+f.toLowerCase()))+f.length-1,v=d.text().slice(0,m),y=d.text().slice(m,g+1),w=d.text().slice(g+1),d.html("<span>"+v+"<span class='highlight'>"+y+"</span>"+w+"</span>"),p.length&&d.prepend(p),o++}var f,d,p,m,g,v,y,w;n=s}}),r.off("keydown.autocomplete").on("keydown.autocomplete",function(t){var e,n=t.which,r=c.children("li").length,i=c.children(".active").first();13===n&&a>=0?(e=c.children("li").eq(a)).length&&(e.trigger("mousedown.autocomplete"),t.preventDefault()):38!==n&&40!==n||(t.preventDefault(),38===n&&a>0&&a--,40===n&&a<r-1&&a++,i.removeClass("active"),a>=0&&c.children("li").eq(a).addClass("active"))}),c.off("mousedown.autocomplete touchstart.autocomplete").on("mousedown.autocomplete touchstart.autocomplete","li",function(){var n=t(this).text().trim();r.val(n),r.trigger("change"),l(),"function"==typeof e.onAutocomplete&&e.onAutocomplete.call(this,n)})}})}}),t.fn.material_select=function(e){function n(t,e,n){var r=t.indexOf(e),i=-1===r;return i?t.push(e):t.splice(r,1),n.siblings("ul.dropdown-content").find("li:not(.optgroup)").eq(e).toggleClass("active"),n.find("option").eq(e).prop("selected",i),function(t,e){for(var n="",r=0,i=t.length;r<i;r++){var o=e.find("option").eq(t[r]).text();n+=0===r?o:", "+o}""===n&&(n=e.find("option:disabled").eq(0).text()),e.siblings("input.select-dropdown").val(n)}(t,n),i}t(this).each(function(){var r=t(this);if(!r.hasClass("browser-default")){var i=!!r.attr("multiple"),o=r.attr("data-select-id");if(o&&(r.parent().find("span.caret").remove(),r.parent().find("input").remove(),r.unwrap(),t("ul#select-options-"+o).remove()),"destroy"===e)return r.removeAttr("data-select-id").removeClass("initialized"),void t(window).off("click.select");var a=Materialize.guid();r.attr("data-select-id",a);var s=t('<div class="select-wrapper"></div>');s.addClass(r.attr("class")),r.is(":disabled")&&s.addClass("disabled");var u=t('<ul id="select-options-'+a+'" class="dropdown-content select-dropdown '+(i?"multiple-select-dropdown":"")+'"></ul>'),c=r.children("option, optgroup"),l=[],h=!1,f=r.find("option:selected").html()||r.find("option:first").html()||"",d=function(e,n,r){var o=n.is(":disabled")?"disabled ":"",a="optgroup-option"===r?"optgroup-option ":"",s=i?'<input type="checkbox"'+o+"/><label></label>":"",c=n.data("icon"),l=n.attr("class");if(c){var h="";return l&&(h=' class="'+l+'"'),u.append(t('<li class="'+o+a+'"><img alt="" src="'+c+'"'+h+"><span>"+s+n.html()+"</span></li>")),!0}u.append(t('<li class="'+o+a+'"><span>'+s+n.html()+"</span></li>"))};c.length&&c.each(function(){if(t(this).is("option"))i?d(0,t(this),"multiple"):d(0,t(this));else if(t(this).is("optgroup")){var e=t(this).children("option");u.append(t('<li class="optgroup"><span>'+t(this).attr("label")+"</span></li>")),e.each(function(){d(0,t(this),"optgroup-option")})}}),u.find("li:not(.optgroup)").each(function(o){t(this).click(function(a){if(!t(this).hasClass("disabled")&&!t(this).hasClass("optgroup")){var s=!0;i?(t('input[type="checkbox"]',this).prop("checked",function(t,e){return!e}),s=n(l,o,r),g.trigger("focus")):(u.find("li").removeClass("active"),t(this).toggleClass("active"),g.val(t(this).text())),v(u,t(this)),r.find("option").eq(o).prop("selected",s),r.trigger("change"),"undefined"!=typeof e&&e()}a.stopPropagation()})}),r.wrap(s);var p=t('<span class="caret">&#9660;</span>'),m=f.replace(/"/g,"&quot;"),g=t('<input type="text" class="select-dropdown" readonly="true" '+(r.is(":disabled")?"disabled":"")+' data-activates="select-options-'+a+'" value="'+m+'"/>');r.before(g),g.before(p),g.after(u),r.is(":disabled")||g.dropdown({hover:!1}),r.attr("tabindex")&&t(g[0]).attr("tabindex",r.attr("tabindex")),r.addClass("initialized"),g.on({focus:function(){if(t("ul.select-dropdown").not(u[0]).is(":visible")&&(t("input.select-dropdown").trigger("close"),t(window).off("click.select")),!u.is(":visible")){t(this).trigger("open",["focus"]);var e=t(this).val();i&&e.indexOf(",")>=0&&(e=e.split(",")[0]);var n=u.find("li").filter(function(){return t(this).text().toLowerCase()===e.toLowerCase()})[0];v(u,n,!0),t(window).off("click.select").on("click.select",function(){i&&(h||g.trigger("close")),t(window).off("click.select")})}},click:function(t){t.stopPropagation()}}),g.on("blur",function(){i||(t(this).trigger("close"),t(window).off("click.select")),u.find("li.selected").removeClass("selected")}),u.hover(function(){h=!0},function(){h=!1}),i&&r.find("option:selected:not(:disabled)").each(function(){var t=this.index;n(l,t,r),u.find("li:not(.optgroup)").eq(t).find(":checkbox").prop("checked",!0)});var v=function(e,n,r){if(n){e.find("li.selected").removeClass("selected");var o=t(n);o.addClass("selected"),i&&!r||u.scrollTo(o)}},y=[];g.on("keydown",function(e){if(9!=e.which)if(40!=e.which||u.is(":visible")){if(13!=e.which||u.is(":visible")){e.preventDefault();var n=String.fromCharCode(e.which).toLowerCase();if(n&&-1===[9,13,27,38,40].indexOf(e.which)){y.push(n);var r=y.join(""),o=u.find("li").filter(function(){return 0===t(this).text().toLowerCase().indexOf(r)})[0];o&&v(u,o)}if(13==e.which){var a=u.find("li.selected:not(.disabled)")[0];a&&(t(a).trigger("click"),i||g.trigger("close"))}40==e.which&&(o=u.find("li.selected").length?u.find("li.selected").next("li:not(.disabled)")[0]:u.find("li:not(.disabled)")[0],v(u,o)),27==e.which&&g.trigger("close"),38==e.which&&(o=u.find("li.selected").prev("li:not(.disabled)")[0])&&v(u,o),setTimeout(function(){y=[]},1e3)}}else g.trigger("open");else g.trigger("close")})}})}}(jQuery),function(t){var e={init:function(e){return e=t.extend({indicators:!0,height:400,transition:500,interval:6e3},e),this.each(function(){var n,r,i,o=t(this),a=o.find("ul.slides").first(),s=a.find("> li"),u=a.find(".active").index();function c(t,e){t.hasClass("center-align")?t.velocity({opacity:0,translateY:-100},{duration:e,queue:!1}):t.hasClass("right-align")?t.velocity({opacity:0,translateX:100},{duration:e,queue:!1}):t.hasClass("left-align")&&t.velocity({opacity:0,translateX:-100},{duration:e,queue:!1})}function l(t){t>=s.length?t=0:t<0&&(t=s.length-1),(u=a.find(".active").index())!=t&&(n=s.eq(u),$caption=n.find(".caption"),n.removeClass("active"),n.velocity({opacity:0},{duration:e.transition,queue:!1,easing:"easeOutQuad",complete:function(){s.not(".active").velocity({opacity:0,translateX:0,translateY:0},{duration:0,queue:!1})}}),c($caption,e.transition),e.indicators&&r.eq(u).removeClass("active"),s.eq(t).velocity({opacity:1},{duration:e.transition,queue:!1,easing:"easeOutQuad"}),s.eq(t).find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:e.transition,delay:e.transition,queue:!1,easing:"easeOutQuad"}),s.eq(t).addClass("active"),e.indicators&&r.eq(t).addClass("active"))}-1!=u&&(n=s.eq(u)),o.hasClass("fullscreen")||(o.height(e.indicators?e.height+40:e.height),a.height(e.height)),s.find(".caption").each(function(){c(t(this),0)}),s.find("img").each(function(){var e="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";t(this).attr("src")!==e&&(t(this).css("background-image",'url("'+t(this).attr("src")+'")'),t(this).attr("src",e))}),e.indicators&&(r=t('<ul class="indicators"></ul>'),s.each(function(n){var o=t('<li class="indicator-item"></li>');o.click(function(){l(a.parent().find(t(this)).index()),clearInterval(i),i=setInterval(function(){u=a.find(".active").index(),s.length==u+1?u=0:u+=1,l(u)},e.transition+e.interval)}),r.append(o)}),o.append(r),r=o.find("ul.indicators").find("li.indicator-item")),n?n.show():(s.first().addClass("active").velocity({opacity:1},{duration:e.transition,queue:!1,easing:"easeOutQuad"}),n=s.eq(u=0),e.indicators&&r.eq(u).addClass("active")),n.find("img").each(function(){n.find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:e.transition,queue:!1,easing:"easeOutQuad"})}),i=setInterval(function(){l((u=a.find(".active").index())+1)},e.transition+e.interval);var h=!1,f=!1;o.hammer({prevent_default:!1}).on("pan",function(t){if("touch"===t.gesture.pointerType){clearInterval(i);var e,n=t.gesture.direction,r=t.gesture.deltaX,u=t.gesture.velocityX,c=t.gesture.velocityY;$curr_slide=a.find(".active"),Math.abs(u)>Math.abs(c)&&$curr_slide.velocity({translateX:r},{duration:50,queue:!1,easing:"easeOutQuad"}),4===n&&(r>o.innerWidth()/2||u<-.65)?f=!0:2===n&&(r<-1*o.innerWidth()/2||u>.65)&&(h=!0),h&&(0===(e=$curr_slide.next()).length&&(e=s.first()),e.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"})),f&&(0===(e=$curr_slide.prev()).length&&(e=s.last()),e.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"}))}}).on("panend",function(t){"touch"===t.gesture.pointerType&&($curr_slide=a.find(".active"),curr_index=a.find(".active").index(),!f&&!h||s.length<=1?$curr_slide.velocity({translateX:0},{duration:300,queue:!1,easing:"easeOutQuad"}):h?(l(curr_index+1),$curr_slide.velocity({translateX:-1*o.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})):f&&(l(curr_index-1),$curr_slide.velocity({translateX:o.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})),h=!1,f=!1,clearInterval(i),i=setInterval(function(){u=a.find(".active").index(),s.length==u+1?u=0:u+=1,l(u)},e.transition+e.interval))}),o.on("sliderPause",function(){clearInterval(i)}),o.on("sliderStart",function(){clearInterval(i),i=setInterval(function(){u=a.find(".active").index(),s.length==u+1?u=0:u+=1,l(u)},e.transition+e.interval)}),o.on("sliderNext",function(){l((u=a.find(".active").index())+1)}),o.on("sliderPrev",function(){l((u=a.find(".active").index())-1)})})},pause:function(){t(this).trigger("sliderPause")},start:function(){t(this).trigger("sliderStart")},next:function(){t(this).trigger("sliderNext")},prev:function(){t(this).trigger("sliderPrev")}};t.fn.slider=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.tooltip"):e.init.apply(this,arguments)}}(jQuery),function(t){t(document).ready(function(){t(document).on("click.card",".card",function(e){if(t(this).find("> .card-reveal").length){var n=t(e.target).closest(".card");void 0===n.data("initialOverflow")&&n.data("initialOverflow",void 0===n.css("overflow")?"":n.css("overflow")),t(e.target).is(t(".card-reveal .card-title"))||t(e.target).is(t(".card-reveal .card-title i"))?t(this).find(".card-reveal").velocity({translateY:0},{duration:225,queue:!1,easing:"easeInOutQuad",complete:function(){t(this).css({display:"none"}),n.css("overflow",n.data("initialOverflow"))}}):(t(e.target).is(t(".card .activator"))||t(e.target).is(t(".card .activator i")))&&(n.css("overflow","hidden"),t(this).find(".card-reveal").css({display:"block"}).velocity("stop",!1).velocity({translateY:"-100%"},{duration:300,queue:!1,easing:"easeInOutQuad"}))}})})}(jQuery),function(t){var e={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{}};t(document).ready(function(){t(document).on("click",".chip .close",function(e){t(this).closest(".chips").attr("data-initialized")||t(this).closest(".chip").remove()})}),t.fn.material_chip=function(n){var r=this;if(this.$el=t(this),this.$document=t(document),this.SELS={CHIPS:".chips",CHIP:".chip",INPUT:"input",DELETE:".material-icons",SELECTED_CHIP:".selected"},"data"===n)return this.$el.data("chips");var i=t.extend({},e,n);r.hasAutocomplete=!t.isEmptyObject(i.autocompleteOptions.data),this.init=function(){var e=0;r.$el.each(function(){var n=t(this),o=Materialize.guid();r.chipId=o,i.data&&i.data instanceof Array||(i.data=[]),n.data("chips",i.data),n.attr("data-index",e),n.attr("data-initialized",!0),n.hasClass(r.SELS.CHIPS)||n.addClass("chips"),r.chips(n,o),e++})},this.handleEvents=function(){var e=r.SELS;r.$document.off("click.chips-focus",e.CHIPS).on("click.chips-focus",e.CHIPS,function(n){t(n.target).find(e.INPUT).focus()}),r.$document.off("click.chips-select",e.CHIP).on("click.chips-select",e.CHIP,function(n){var i=t(n.target);if(i.length){var o=i.hasClass("selected"),a=i.closest(e.CHIPS);t(e.CHIP).removeClass("selected"),o||r.selectChip(i.index(),a)}}),r.$document.off("keydown.chips").on("keydown.chips",function(n){if(!t(n.target).is("input, textarea")){var i,o=r.$document.find(e.CHIP+e.SELECTED_CHIP),a=o.closest(e.CHIPS),s=o.siblings(e.CHIP).length;if(o.length)if(8===n.which||46===n.which){n.preventDefault(),i=o.index(),r.deleteChip(i,a);var u=null;i+1<s?u=i:i!==s&&i+1!==s||(u=s-1),u<0&&(u=null),null!==u&&r.selectChip(u,a),s||a.find("input").focus()}else if(37===n.which){if((i=o.index()-1)<0)return;t(e.CHIP).removeClass("selected"),r.selectChip(i,a)}else if(39===n.which){if(i=o.index()+1,t(e.CHIP).removeClass("selected"),i>s)return void a.find("input").focus();r.selectChip(i,a)}}}),r.$document.off("focusin.chips",e.CHIPS+" "+e.INPUT).on("focusin.chips",e.CHIPS+" "+e.INPUT,function(n){var r=t(n.target).closest(e.CHIPS);r.addClass("focus"),r.siblings("label, .prefix").addClass("active"),t(e.CHIP).removeClass("selected")}),r.$document.off("focusout.chips",e.CHIPS+" "+e.INPUT).on("focusout.chips",e.CHIPS+" "+e.INPUT,function(n){var r=t(n.target).closest(e.CHIPS);r.removeClass("focus"),void 0!==r.data("chips")&&r.data("chips").length||r.siblings("label").removeClass("active"),r.siblings(".prefix").removeClass("active")}),r.$document.off("keydown.chips-add",e.CHIPS+" "+e.INPUT).on("keydown.chips-add",e.CHIPS+" "+e.INPUT,function(n){var i=t(n.target),o=i.closest(e.CHIPS),a=o.children(e.CHIP).length;if(13===n.which){if(r.hasAutocomplete&&o.find(".autocomplete-content.dropdown-content").length&&o.find(".autocomplete-content.dropdown-content").children().length)return;return n.preventDefault(),r.addChip({tag:i.val()},o),void i.val("")}if((8===n.keyCode||37===n.keyCode)&&""===i.val()&&a)return n.preventDefault(),r.selectChip(a-1,o),void i.blur()}),r.$document.off("click.chips-delete",e.CHIPS+" "+e.DELETE).on("click.chips-delete",e.CHIPS+" "+e.DELETE,function(n){var i=t(n.target),o=i.closest(e.CHIPS),a=i.closest(e.CHIP);n.stopPropagation(),r.deleteChip(a.index(),o),o.find("input").focus()})},this.chips=function(e,n){e.empty(),e.data("chips").forEach(function(t){e.append(r.renderChip(t))}),e.append(t('<input id="'+n+'" class="input" placeholder="">')),r.setPlaceholder(e);var o=e.next("label");o.length&&(o.attr("for",n),void 0!==e.data("chips")&&e.data("chips").length&&o.addClass("active"));var a=t("#"+n);r.hasAutocomplete&&(i.autocompleteOptions.onAutocomplete=function(t){r.addChip({tag:t},e),a.val(""),a.focus()},a.autocomplete(i.autocompleteOptions))},this.renderChip=function(e){if(e.tag){var n=t('<div class="chip"></div>');return n.text(e.tag),e.image&&n.prepend(t("<img />").attr("src",e.image)),n.append(t('<i class="material-icons close">close</i>')),n}},this.setPlaceholder=function(t){void 0!==t.data("chips")&&!t.data("chips").length&&i.placeholder?t.find("input").prop("placeholder",i.placeholder):(void 0===t.data("chips")||t.data("chips").length)&&i.secondaryPlaceholder&&t.find("input").prop("placeholder",i.secondaryPlaceholder)},this.isValid=function(t,e){for(var n=t.data("chips"),r=!1,i=0;i<n.length;i++)if(n[i].tag===e.tag)return void(r=!0);return""!==e.tag&&!r},this.addChip=function(t,e){if(r.isValid(e,t)){for(var n=r.renderChip(t),i=[],o=e.data("chips"),a=0;a<o.length;a++)i.push(o[a]);i.push(t),e.data("chips",i),n.insertBefore(e.find("input")),e.trigger("chip.add",t),r.setPlaceholder(e)}},this.deleteChip=function(t,e){var n=e.data("chips")[t];e.find(".chip").eq(t).remove();for(var i=[],o=e.data("chips"),a=0;a<o.length;a++)a!==t&&i.push(o[a]);e.data("chips",i),e.trigger("chip.delete",n),r.setPlaceholder(e)},this.selectChip=function(t,e){var n=e.find(".chip").eq(t);n&&!1===n.hasClass("selected")&&(n.addClass("selected"),e.trigger("chip.select",e.data("chips")[t]))},this.getChipsElement=function(t,e){return e.eq(t)},this.init(),this.handleEvents()}}(jQuery),function(t){t.fn.pushpin=function(e){return"remove"===e?(this.each(function(){(id=t(this).data("pushpin-id"))&&(t(window).off("scroll."+id),t(this).removeData("pushpin-id").removeClass("pin-top pinned pin-bottom").removeAttr("style"))}),!1):(e=t.extend({top:0,bottom:1/0,offset:0},e),$index=0,this.each(function(){var n=Materialize.guid(),r=t(this),i=t(this).offset().top;function o(t){t.removeClass("pin-top"),t.removeClass("pinned"),t.removeClass("pin-bottom")}function a(n,r){n.each(function(){e.top<=r&&e.bottom>=r&&!t(this).hasClass("pinned")&&(o(t(this)),t(this).css("top",e.offset),t(this).addClass("pinned")),r<e.top&&!t(this).hasClass("pin-top")&&(o(t(this)),t(this).css("top",0),t(this).addClass("pin-top")),r>e.bottom&&!t(this).hasClass("pin-bottom")&&(o(t(this)),t(this).addClass("pin-bottom"),t(this).css("top",e.bottom-i))})}t(this).data("pushpin-id",n),a(r,t(window).scrollTop()),t(window).on("scroll."+n,function(){var n=t(window).scrollTop()+e.offset;a(r,n)})}))}}(jQuery),function(t){t(document).ready(function(){t.fn.reverse=[].reverse,t(document).on("mouseenter.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(n){var r=t(this);e(r)}),t(document).on("mouseleave.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(e){var r=t(this);n(r)}),t(document).on("click.fabClickToggle",".fixed-action-btn.click-to-toggle > a",function(r){var i=t(this).parent();i.hasClass("active")?n(i):e(i)}),t(document).on("click.fabToolbar",".fixed-action-btn.toolbar > a",function(e){var n=t(this).parent();r(n)})}),t.fn.extend({openFAB:function(){e(t(this))},closeFAB:function(){n(t(this))},openToolbar:function(){r(t(this))},closeToolbar:function(){i(t(this))}});var e=function(e){var n=e;if(!1===n.hasClass("active")){var r,i;!0===n.hasClass("horizontal")?i=40:r=40,n.addClass("active"),n.find("ul .btn-floating").velocity({scaleY:".4",scaleX:".4",translateY:r+"px",translateX:i+"px"},{duration:0});var o=0;n.find("ul .btn-floating").reverse().each(function(){t(this).velocity({opacity:"1",scaleX:"1",scaleY:"1",translateY:"0",translateX:"0"},{duration:80,delay:o}),o+=40})}},n=function(t){var e,n,r=t;!0===r.hasClass("horizontal")?n=40:e=40,r.removeClass("active"),r.find("ul .btn-floating").velocity("stop",!0),r.find("ul .btn-floating").velocity({opacity:"0",scaleX:".4",scaleY:".4",translateY:e+"px",translateX:n+"px"},{duration:80})},r=function(e){if("true"!==e.attr("data-open")){var n,r,o,a=window.innerWidth,s=window.innerHeight,u=e[0].getBoundingClientRect(),c=e.find("> a").first(),l=e.find("> ul").first(),h=t('<div class="fab-backdrop"></div>'),f=c.css("background-color");c.append(h),n=u.left-a/2+u.width/2,r=s-u.bottom,o=a/h.width(),e.attr("data-origin-bottom",u.bottom),e.attr("data-origin-left",u.left),e.attr("data-origin-width",u.width),e.addClass("active"),e.attr("data-open",!0),e.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+n+"px)",transition:"none"}),c.css({transform:"translateY("+-r+"px)",transition:"none"}),h.css({"background-color":f}),setTimeout(function(){e.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),c.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){e.css({overflow:"hidden","background-color":f}),h.css({transform:"scale("+o+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),l.find("> li > a").css({opacity:1}),t(window).on("scroll.fabToolbarClose",function(){i(e),t(window).off("scroll.fabToolbarClose"),t(document).off("click.fabToolbarClose")}),t(document).on("click.fabToolbarClose",function(n){t(n.target).closest(l).length||(i(e),t(window).off("scroll.fabToolbarClose"),t(document).off("click.fabToolbarClose"))})},100)},0)}},i=function(t){if("true"===t.attr("data-open")){var e,n,r=window.innerWidth,i=window.innerHeight,o=t.attr("data-origin-width"),a=t.attr("data-origin-bottom"),s=t.attr("data-origin-left"),u=t.find("> .btn-floating").first(),c=t.find("> ul").first(),l=t.find(".fab-backdrop"),h=u.css("background-color");e=s-r/2+o/2,n=i-a,l.width(),t.removeClass("active"),t.attr("data-open",!1),t.css({"background-color":"transparent",transition:"none"}),u.css({transition:"none"}),l.css({transform:"scale(0)","background-color":h}),c.find("> li > a").css({opacity:""}),setTimeout(function(){l.remove(),t.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-e+"px,0,0)"}),u.css({overflow:"",transform:"translate3d(0,"+n+"px,0)"}),setTimeout(function(){t.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),u.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}}(jQuery),function(t){Materialize.fadeInImage=function(e){var n;if("string"==typeof e)n=t(e);else{if("object"!=typeof e)return;n=e}n.css({opacity:0}),t(n).velocity({opacity:1},{duration:650,queue:!1,easing:"easeOutSine"}),t(n).velocity({opacity:1},{duration:1300,queue:!1,easing:"swing",step:function(e,n){n.start=100;var r=e/100,i=150-(100-e)/1.75;i<100&&(i=100),e>=0&&t(this).css({"-webkit-filter":"grayscale("+r+")brightness("+i+"%)",filter:"grayscale("+r+")brightness("+i+"%)"})}})},Materialize.showStaggeredList=function(e){var n;if("string"==typeof e)n=t(e);else{if("object"!=typeof e)return;n=e}var r=0;n.find("li").velocity({translateX:"-100px"},{duration:0}),n.find("li").each(function(){t(this).velocity({opacity:"1",translateX:"0"},{duration:800,delay:r,easing:[60,10]}),r+=120})},t(document).ready(function(){var e=!1,n=!1;t(".dismissable").each(function(){t(this).hammer({prevent_default:!1}).on("pan",function(r){if("touch"===r.gesture.pointerType){var i=t(this),o=r.gesture.direction,a=r.gesture.deltaX,s=r.gesture.velocityX;i.velocity({translateX:a},{duration:50,queue:!1,easing:"easeOutQuad"}),4===o&&(a>i.innerWidth()/2||s<-.75)&&(e=!0),2===o&&(a<-1*i.innerWidth()/2||s>.75)&&(n=!0)}}).on("panend",function(r){if(Math.abs(r.gesture.deltaX)<t(this).innerWidth()/2&&(n=!1,e=!1),"touch"===r.gesture.pointerType){var i,o=t(this);e||n?(i=e?o.innerWidth():-1*o.innerWidth(),o.velocity({translateX:i},{duration:100,queue:!1,easing:"easeOutQuad",complete:function(){o.css("border","none"),o.velocity({height:0,padding:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){o.remove()}})}})):o.velocity({translateX:0},{duration:100,queue:!1,easing:"easeOutQuad"}),e=!1,n=!1}})})})}(jQuery),function(t){var e=!1;Materialize.scrollFire=function(t){var n=Materialize.throttle(function(){!function(){for(var e=window.pageYOffset+window.innerHeight,n=0;n<t.length;n++){var r=t[n],i=r.offset,o=r.callback,a=document.querySelector(r.selector);null!==a&&e>a.getBoundingClientRect().top+window.pageYOffset+i&&!0!==r.done&&("function"==typeof o?o.call(this,a):"string"==typeof o&&new Function(o)(a),r.done=!0)}}()},t.throttle||100);e||(window.addEventListener("scroll",n),window.addEventListener("resize",n),e=!0),setTimeout(n,0)}}(jQuery),Materialize.Picker=function(t){var e=t(window),n=t(document),r=t(document.documentElement);function i(e,s,c,l){if(!e)return i;var h=!1,f={id:e.id||"P"+Math.abs(~~(Math.random()*new Date))},d=c?t.extend(!0,{},c.defaults,l):l||{},p=t.extend({},i.klasses(),d.klass),m=t(e),g=function(){return this.start()},v=g.prototype={constructor:g,$node:m,start:function(){return f&&f.start?v:(f.methods={},f.start=!0,f.open=!1,f.type=e.type,e.autofocus=e==u(),e.readOnly=!d.editable,e.id=e.id||f.id,"text"!=e.type&&(e.type="text"),v.component=new c(v,d),v.$root=t(i._.node("div",y(),p.picker,'id="'+e.id+'_root" tabindex="0"')),v.$root.on({keydown:w,focusin:function(t){v.$root.removeClass(p.focused),t.stopPropagation()},"mousedown click":function(e){var n=e.target;n!=v.$root.children()[0]&&(e.stopPropagation(),"mousedown"!=e.type||t(n).is("input, select, textarea, button, option")||(e.preventDefault(),v.$root.eq(0).focus()))}}).on({focus:function(){m.addClass(p.target)},blur:function(){m.removeClass(p.target)}}).on("focus.toOpen",x).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var e=t(this),n=e.data(),r=e.hasClass(p.navDisabled)||e.hasClass(p.disabled),i=u();i=i&&(i.type||i.href)&&i,(r||i&&!t.contains(v.$root[0],i))&&v.$root.eq(0).focus(),!r&&n.nav?v.set("highlight",v.component.item.highlight,{nav:n.nav}):!r&&"pick"in n?(v.set("select",n.pick),d.closeOnSelect&&v.close(!0)):n.clear?(v.clear(),d.closeOnSelect&&v.close(!0)):n.close&&v.close(!0)}),a(v.$root[0],"hidden",!0),d.formatSubmit&&(!0===d.hiddenName?(o=e.name,e.name=""):o=(o=["string"==typeof d.hiddenPrefix?d.hiddenPrefix:"","string"==typeof d.hiddenSuffix?d.hiddenSuffix:"_submit"])[0]+e.name+o[1],v._hidden=t('<input type=hidden name="'+o+'"'+(m.data("value")||e.value?' value="'+v.get("select",d.formatSubmit)+'"':"")+">")[0],m.on("change."+f.id,function(){v._hidden.value=e.value?v.get("select",d.formatSubmit):""}),d.container?t(d.container).append(v._hidden):m.before(v._hidden)),m.data(s,v).addClass(p.input).attr("tabindex",-1).val(m.data("value")?v.get("select",d.format):e.value),d.editable||m.on("focus."+f.id+" click."+f.id,function(t){t.preventDefault(),v.$root.eq(0).focus()}).on("keydown."+f.id,w),a(e,{haspopup:!0,expanded:!1,readonly:!1,owns:e.id+"_root"}),d.container?t(d.container).append(v.$root):m.before(v.$root),v.on({start:v.component.onStart,render:v.component.onRender,stop:v.component.onStop,open:v.component.onOpen,close:v.component.onClose,set:v.component.onSet}).on({start:d.onStart,render:d.onRender,stop:d.onStop,open:d.onOpen,close:d.onClose,set:d.onSet}),(n=v.$root.children()[0]).currentStyle?r=n.currentStyle.position:window.getComputedStyle&&(r=getComputedStyle(n).position),h="fixed"==r,e.autofocus&&v.open(),v.trigger("start").trigger("render"));var n,r,o},render:function(t){return t?v.$root.html(y()):v.$root.find("."+p.box).html(v.component.nodes(f.open)),v.trigger("render")},stop:function(){return f.start?(v.close(),v._hidden&&v._hidden.parentNode.removeChild(v._hidden),v.$root.remove(),m.removeClass(p.input).removeData(s),setTimeout(function(){m.off("."+f.id)},0),e.type=f.type,e.readOnly=!1,v.trigger("stop"),f.methods={},f.start=!1,v):v},open:function(s){return f.open?v:(m.addClass(p.active),a(e,"expanded",!0),setTimeout(function(){v.$root.addClass(p.opened),a(v.$root[0],"hidden",!1)},0),!1!==s&&(f.open=!0,h&&r.css("overflow","hidden").css("padding-right","+="+o()),v.$root.eq(0).focus(),n.on("click."+f.id+" focusin."+f.id,function(t){var n=t.target;n!=e&&n!=document&&3!=t.which&&v.close(n===v.$root.children()[0])}).on("keydown."+f.id,function(e){var n=e.keyCode,r=v.component.key[n],o=e.target;27==n?v.close(!0):o!=v.$root[0]||!r&&13!=n?t.contains(v.$root[0],o)&&13==n&&(e.preventDefault(),o.click()):(e.preventDefault(),r?i._.trigger(v.component.key.go,v,[i._.trigger(r)]):v.$root.find("."+p.highlighted).hasClass(p.disabled)||(v.set("select",v.component.item.highlight),d.closeOnSelect&&v.close(!0)))})),v.trigger("open"))},close:function(t){return t&&(v.$root.off("focus.toOpen").eq(0).focus(),setTimeout(function(){v.$root.on("focus.toOpen",x)},0)),m.removeClass(p.active),a(e,"expanded",!1),setTimeout(function(){v.$root.removeClass(p.opened+" "+p.focused),a(v.$root[0],"hidden",!0)},0),f.open?(f.open=!1,h&&r.css("overflow","").css("padding-right","-="+o()),n.off("."+f.id),v.trigger("close")):v},clear:function(t){return v.set("clear",null,t)},set:function(e,n,r){var i,o,a=t.isPlainObject(e),s=a?e:{};if(r=a&&t.isPlainObject(n)?n:r||{},e){for(i in a||(s[e]=n),s)o=s[i],i in v.component.item&&(void 0===o&&(o=null),v.component.set(i,o,r)),"select"!=i&&"clear"!=i||m.val("clear"==i?"":v.get(i,d.format)).trigger("change");v.render()}return r.muted?v:v.trigger("set",s)},get:function(t,n){if(null!=f[t=t||"value"])return f[t];if("valueSubmit"==t){if(v._hidden)return v._hidden.value;t="value"}if("value"==t)return e.value;if(t in v.component.item){if("string"==typeof n){var r=v.component.get(t);return r?i._.trigger(v.component.formats.toString,v.component,[n,r]):""}return v.component.get(t)}},on:function(e,n,r){var i,o,a=t.isPlainObject(e),s=a?e:{};if(e)for(i in a||(s[e]=n),s)o=s[i],r&&(i="_"+i),f.methods[i]=f.methods[i]||[],f.methods[i].push(o);return v},off:function(){var t,e,n=arguments;for(t=0,namesCount=n.length;t<namesCount;t+=1)(e=n[t])in f.methods&&delete f.methods[e];return v},trigger:function(t,e){var n=function(t){var n=f.methods[t];n&&n.map(function(t){i._.trigger(t,v,[e])})};return n("_"+t),n(t),v}};function y(){return i._.node("div",i._.node("div",i._.node("div",i._.node("div",v.component.nodes(f.open),p.box),p.wrap),p.frame),p.holder)}function w(t){var e=t.keyCode,n=/^(8|46)$/.test(e);if(27==e)return v.close(),!1;(32==e||n||!f.open&&v.component.key[e])&&(t.preventDefault(),t.stopPropagation(),n?v.clear().close():v.open())}function x(t){t.stopPropagation(),"focus"==t.type&&v.$root.addClass(p.focused),v.open()}return new g}function o(){if(r.height()<=e.height())return 0;var n=t('<div style="visibility:hidden;width:100px" />').appendTo("body"),i=n[0].offsetWidth;n.css("overflow","scroll");var o=t('<div style="width:100%" />').appendTo(n)[0].offsetWidth;return n.remove(),i-o}function a(e,n,r){if(t.isPlainObject(n))for(var i in n)s(e,i,n[i]);else s(e,n,r)}function s(t,e,n){t.setAttribute(("role"==e?"":"aria-")+e,n)}function u(){try{return document.activeElement}catch(t){}}return i.klasses=function(t){return{picker:t=t||"picker",opened:t+"--opened",focused:t+"--focused",input:t+"__input",active:t+"__input--active",target:t+"__input--target",holder:t+"__holder",frame:t+"__frame",wrap:t+"__wrap",box:t+"__box"}},i._={group:function(t){for(var e,n="",r=i._.trigger(t.min,t);r<=i._.trigger(t.max,t,[r]);r+=t.i)e=i._.trigger(t.item,t,[r]),n+=i._.node(t.node,e[0],e[1],e[2]);return n},node:function(e,n,r,i){return n?(n=t.isArray(n)?n.join(""):n,"<"+e+(r=r?' class="'+r+'"':"")+(i=i?" "+i:"")+">"+n+"</"+e+">"):""},lead:function(t){return(t<10?"0":"")+t},trigger:function(t,e,n){return"function"==typeof t?t.apply(e,n||[]):t},digits:function(t){return/\d/.test(t[1])?2:1},isDate:function(t){return{}.toString.call(t).indexOf("Date")>-1&&this.isInteger(t.getDate())},isInteger:function(t){return{}.toString.call(t).indexOf("Number")>-1&&t%1==0},ariaAttr:function(e,n){for(var r in t.isPlainObject(e)||(e={attribute:n}),n="",e)n+=null==e[r]?"":("role"==r?"":"aria-")+r+'="'+e[r]+'"';return n}},i.extend=function(e,n){t.fn[e]=function(r,o){var a=this.data(e);return"picker"==r?a:a&&"string"==typeof r?i._.trigger(a[r],a,[o]):this.each(function(){t(this).data(e)||new i(this,e,n,r)})},t.fn[e].defaults=n.defaults},i}(jQuery),function(t,e){var n,r=t._;function i(t,e){var n,r=this,i=t.$node[0],o=i.value,a=t.$node.data("value"),s=a||o,u=a?e.formatSubmit:e.format,c=function(){return i.currentStyle?"rtl"==i.currentStyle.direction:"rtl"==getComputedStyle(t.$root[0]).direction};r.settings=e,r.$node=t.$node,r.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},r.item={},r.item.clear=null,r.item.disable=(e.disable||[]).slice(0),r.item.enable=-(!0===(n=r.item.disable)[0]?n.shift():-1),r.set("min",e.min).set("max",e.max).set("now"),s?r.set("select",s,{format:u}):r.set("select",null).set("highlight",r.item.now),r.key={40:7,38:-7,39:function(){return c()?-1:1},37:function(){return c()?1:-1},go:function(t){var e=r.item.highlight,n=new Date(e.year,e.month,e.date+t);r.set("highlight",n,{interval:t}),this.render()}},t.on("render",function(){t.$root.find("."+e.klass.selectMonth).on("change",function(){var n=this.value;n&&(t.set("highlight",[t.get("view").year,n,t.get("highlight").date]),t.$root.find("."+e.klass.selectMonth).trigger("focus"))}),t.$root.find("."+e.klass.selectYear).on("change",function(){var n=this.value;n&&(t.set("highlight",[n,t.get("view").month,t.get("highlight").date]),t.$root.find("."+e.klass.selectYear).trigger("focus"))})},1).on("open",function(){var n="";r.disabled(r.get("now"))&&(n=":not(."+e.klass.buttonToday+")"),t.$root.find("button"+n+", select").attr("disabled",!1)},1).on("close",function(){t.$root.find("button, select").attr("disabled",!0)},1)}i.prototype.set=function(t,e,n){var r=this,i=r.item;return null===e?("clear"==t&&(t="select"),i[t]=e,r):(i["enable"==t?"disable":"flip"==t?"enable":t]=r.queue[t].split(" ").map(function(i){return e=r[i](t,e,n)}).pop(),"select"==t?r.set("highlight",i.select,n):"highlight"==t?r.set("view",i.highlight,n):t.match(/^(flip|min|max|disable|enable)$/)&&(i.select&&r.disabled(i.select)&&r.set("select",i.select,n),i.highlight&&r.disabled(i.highlight)&&r.set("highlight",i.highlight,n)),r)},i.prototype.get=function(t){return this.item[t]},i.prototype.create=function(t,n,i){var o;return(n=void 0===n?t:n)==-1/0||n==1/0?o=n:e.isPlainObject(n)&&r.isInteger(n.pick)?n=n.obj:e.isArray(n)?(n=new Date(n[0],n[1],n[2]),n=r.isDate(n)?n:this.create().obj):n=r.isInteger(n)||r.isDate(n)?this.normalize(new Date(n),i):this.now(t,n,i),{year:o||n.getFullYear(),month:o||n.getMonth(),date:o||n.getDate(),day:o||n.getDay(),obj:o||n,pick:o||n.getTime()}},i.prototype.createRange=function(t,n){var i=this,o=function(t){return!0===t||e.isArray(t)||r.isDate(t)?i.create(t):t};return r.isInteger(t)||(t=o(t)),r.isInteger(n)||(n=o(n)),r.isInteger(t)&&e.isPlainObject(n)?t=[n.year,n.month,n.date+t]:r.isInteger(n)&&e.isPlainObject(t)&&(n=[t.year,t.month,t.date+n]),{from:o(t),to:o(n)}},i.prototype.withinRange=function(t,e){return t=this.createRange(t.from,t.to),e.pick>=t.from.pick&&e.pick<=t.to.pick},i.prototype.overlapRanges=function(t,e){return t=this.createRange(t.from,t.to),e=this.createRange(e.from,e.to),this.withinRange(t,e.from)||this.withinRange(t,e.to)||this.withinRange(e,t.from)||this.withinRange(e,t.to)},i.prototype.now=function(t,e,n){return e=new Date,n&&n.rel&&e.setDate(e.getDate()+n.rel),this.normalize(e,n)},i.prototype.navigate=function(t,n,r){var i,o,a,s,u=e.isArray(n),c=e.isPlainObject(n),l=this.item.view;if(u||c){for(c?(o=n.year,a=n.month,s=n.date):(o=+n[0],a=+n[1],s=+n[2]),r&&r.nav&&l&&l.month!==a&&(o=l.year,a=l.month),o=(i=new Date(o,a+(r&&r.nav?r.nav:0),1)).getFullYear(),a=i.getMonth();new Date(o,a,s).getMonth()!==a;)s-=1;n=[o,a,s]}return n},i.prototype.normalize=function(t){return t.setHours(0,0,0,0),t},i.prototype.measure=function(t,e){return e?"string"==typeof e?e=this.parse(t,e):r.isInteger(e)&&(e=this.now(t,e,{rel:e})):e="min"==t?-1/0:1/0,e},i.prototype.viewset=function(t,e){return this.create([e.year,e.month,1])},i.prototype.validate=function(t,n,i){var o,a,s,u,c=this,l=n,h=i&&i.interval?i.interval:1,f=-1===c.item.enable,d=c.item.min,p=c.item.max,m=f&&c.item.disable.filter(function(t){if(e.isArray(t)){var i=c.create(t).pick;i<n.pick?o=!0:i>n.pick&&(a=!0)}return r.isInteger(t)}).length;if((!i||!i.nav)&&(!f&&c.disabled(n)||f&&c.disabled(n)&&(m||o||a)||!f&&(n.pick<=d.pick||n.pick>=p.pick)))for(f&&!m&&(!a&&h>0||!o&&h<0)&&(h*=-1);c.disabled(n)&&(Math.abs(h)>1&&(n.month<l.month||n.month>l.month)&&(n=l,h=h>0?1:-1),n.pick<=d.pick?(s=!0,h=1,n=c.create([d.year,d.month,d.date+(n.pick===d.pick?0:-1)])):n.pick>=p.pick&&(u=!0,h=-1,n=c.create([p.year,p.month,p.date+(n.pick===p.pick?0:1)])),!s||!u);)n=c.create([n.year,n.month,n.date+h]);return n},i.prototype.disabled=function(t){var n=this,i=n.item.disable.filter(function(i){return r.isInteger(i)?t.day===(n.settings.firstDay?i:i-1)%7:e.isArray(i)||r.isDate(i)?t.pick===n.create(i).pick:e.isPlainObject(i)?n.withinRange(i,t):void 0});return i=i.length&&!i.filter(function(t){return e.isArray(t)&&"inverted"==t[3]||e.isPlainObject(t)&&t.inverted}).length,-1===n.item.enable?!i:i||t.pick<n.item.min.pick||t.pick>n.item.max.pick},i.prototype.parse=function(t,e,n){var i=this,o={};return e&&"string"==typeof e?(n&&n.format||((n=n||{}).format=i.settings.format),i.formats.toArray(n.format).map(function(t){var n=i.formats[t],a=n?r.trigger(n,i,[e,o]):t.replace(/^!/,"").length;n&&(o[t]=e.substr(0,a)),e=e.substr(a)}),[o.yyyy||o.yy,+(o.mm||o.m)-1,o.dd||o.d]):e},i.prototype.formats=function(){function t(t,e,n){var r=t.match(/\w+/)[0];return n.mm||n.m||(n.m=e.indexOf(r)+1),r.length}function e(t){return t.match(/\w+/)[0].length}return{d:function(t,e){return t?r.digits(t):e.date},dd:function(t,e){return t?2:r.lead(e.date)},ddd:function(t,n){return t?e(t):this.settings.weekdaysShort[n.day]},dddd:function(t,n){return t?e(t):this.settings.weekdaysFull[n.day]},m:function(t,e){return t?r.digits(t):e.month+1},mm:function(t,e){return t?2:r.lead(e.month+1)},mmm:function(e,n){var r=this.settings.monthsShort;return e?t(e,r,n):r[n.month]},mmmm:function(e,n){var r=this.settings.monthsFull;return e?t(e,r,n):r[n.month]},yy:function(t,e){return t?2:(""+e.year).slice(2)},yyyy:function(t,e){return t?4:e.year},toArray:function(t){return t.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(t,e){var n=this;return n.formats.toArray(t).map(function(t){return r.trigger(n.formats[t],n,[0,e])||t.replace(/^!/,"")}).join("")}}}(),i.prototype.isDateExact=function(t,n){return r.isInteger(t)&&r.isInteger(n)||"boolean"==typeof t&&"boolean"==typeof n?t===n:(r.isDate(t)||e.isArray(t))&&(r.isDate(n)||e.isArray(n))?this.create(t).pick===this.create(n).pick:!(!e.isPlainObject(t)||!e.isPlainObject(n))&&this.isDateExact(t.from,n.from)&&this.isDateExact(t.to,n.to)},i.prototype.isDateOverlap=function(t,n){var i=this.settings.firstDay?1:0;return r.isInteger(t)&&(r.isDate(n)||e.isArray(n))?(t=t%7+i)===this.create(n).day+1:r.isInteger(n)&&(r.isDate(t)||e.isArray(t))?(n=n%7+i)===this.create(t).day+1:!(!e.isPlainObject(t)||!e.isPlainObject(n))&&this.overlapRanges(t,n)},i.prototype.flipEnable=function(t){var e=this.item;e.enable=t||(-1==e.enable?1:-1)},i.prototype.deactivate=function(t,n){var i=this,o=i.item.disable.slice(0);return"flip"==n?i.flipEnable():!1===n?(i.flipEnable(1),o=[]):!0===n?(i.flipEnable(-1),o=[]):n.map(function(t){for(var n,a=0;a<o.length;a+=1)if(i.isDateExact(t,o[a])){n=!0;break}n||(r.isInteger(t)||r.isDate(t)||e.isArray(t)||e.isPlainObject(t)&&t.from&&t.to)&&o.push(t)}),o},i.prototype.activate=function(t,n){var i=this,o=i.item.disable,a=o.length;return"flip"==n?i.flipEnable():!0===n?(i.flipEnable(1),o=[]):!1===n?(i.flipEnable(-1),o=[]):n.map(function(t){var n,s,u,c;for(u=0;u<a;u+=1){if(i.isDateExact(s=o[u],t)){n=o[u]=null,c=!0;break}if(i.isDateOverlap(s,t)){e.isPlainObject(t)?(t.inverted=!0,n=t):e.isArray(t)?(n=t)[3]||n.push("inverted"):r.isDate(t)&&(n=[t.getFullYear(),t.getMonth(),t.getDate(),"inverted"]);break}}if(n)for(u=0;u<a;u+=1)if(i.isDateExact(o[u],t)){o[u]=null;break}if(c)for(u=0;u<a;u+=1)if(i.isDateOverlap(o[u],t)){o[u]=null;break}n&&o.push(n)}),o.filter(function(t){return null!=t})},i.prototype.nodes=function(t){var e,n,i=this,o=i.settings,a=i.item,s=a.now,u=a.select,c=a.highlight,l=a.view,h=a.disable,f=a.min,d=a.max,p=(e=(o.showWeekdaysFull?o.weekdaysFull:o.weekdaysLetter).slice(0),n=o.weekdaysFull.slice(0),o.firstDay&&(e.push(e.shift()),n.push(n.shift())),r.node("thead",r.node("tr",r.group({min:0,max:6,i:1,node:"th",item:function(t){return[e[t],o.klass.weekdays,'scope=col title="'+n[t]+'"']}})))),m=function(t){return r.node("div"," ",o.klass["nav"+(t?"Next":"Prev")]+(t&&l.year>=d.year&&l.month>=d.month||!t&&l.year<=f.year&&l.month<=f.month?" "+o.klass.navDisabled:""),"data-nav="+(t||-1)+" "+r.ariaAttr({role:"button",controls:i.$node[0].id+"_table"})+' title="'+(t?o.labelMonthNext:o.labelMonthPrev)+'"')},g=function(e){var n=o.showMonthsShort?o.monthsShort:o.monthsFull;return"short_months"==e&&(n=o.monthsShort),o.selectMonths&&void 0==e?r.node("select",r.group({min:0,max:11,i:1,node:"option",item:function(t){return[n[t],0,"value="+t+(l.month==t?" selected":"")+(l.year==f.year&&t<f.month||l.year==d.year&&t>d.month?" disabled":"")]}}),o.klass.selectMonth+" browser-default",(t?"":"disabled")+" "+r.ariaAttr({controls:i.$node[0].id+"_table"})+' title="'+o.labelMonthSelect+'"'):"short_months"==e?null!=u?n[u.month]:n[l.month]:r.node("div",n[l.month],o.klass.month)},v=function(e){var n=l.year,a=!0===o.selectYears?5:~~(o.selectYears/2);if(a){var s=f.year,c=d.year,h=n-a,p=n+a;if(s>h&&(p+=s-h,h=s),c<p){var m=h-s,g=p-c;h-=m>g?g:m,p=c}if(o.selectYears&&void 0==e)return r.node("select",r.group({min:h,max:p,i:1,node:"option",item:function(t){return[t,0,"value="+t+(n==t?" selected":"")]}}),o.klass.selectYear+" browser-default",(t?"":"disabled")+" "+r.ariaAttr({controls:i.$node[0].id+"_table"})+' title="'+o.labelYearSelect+'"')}return"raw"===e&&null!=u?r.node("div",u.year):r.node("div",n,o.klass.year)};return createDayLabel=function(){return null!=u?u.date:s.date},createWeekdayLabel=function(){return o.weekdaysShort[null!=u?u.day:s.day]},r.node("div",r.node("div",v("raw"),o.klass.year_display)+r.node("span",createWeekdayLabel()+", ","picker__weekday-display")+r.node("span",g("short_months")+" ",o.klass.month_display)+r.node("span",createDayLabel(),o.klass.day_display),o.klass.date_display)+r.node("div",r.node("div",r.node("div",g()+v()+m()+m(1),o.klass.header)+r.node("table",p+r.node("tbody",r.group({min:0,max:5,i:1,node:"tr",item:function(t){var e=o.firstDay&&0===i.create([l.year,l.month,1]).day?-7:0;return[r.group({min:7*t-l.day+e+1,max:function(){return this.min+7-1},i:1,node:"td",item:function(t){t=i.create([l.year,l.month,t+(o.firstDay?1:0)]);var e,n=u&&u.pick==t.pick,a=c&&c.pick==t.pick,p=h&&i.disabled(t)||t.pick<f.pick||t.pick>d.pick,m=r.trigger(i.formats.toString,i,[o.format,t]);return[r.node("div",t.date,(e=[o.klass.day],e.push(l.month==t.month?o.klass.infocus:o.klass.outfocus),s.pick==t.pick&&e.push(o.klass.now),n&&e.push(o.klass.selected),a&&e.push(o.klass.highlighted),p&&e.push(o.klass.disabled),e.join(" ")),"data-pick="+t.pick+" "+r.ariaAttr({role:"gridcell",label:m,selected:!(!n||i.$node.val()!==m)||null,activedescendant:!!a||null,disabled:!!p||null})+" "+(p?"":'tabindex="0"')),"",r.ariaAttr({role:"presentation"})]}})]}})),o.klass.table,'id="'+i.$node[0].id+'_table" '+r.ariaAttr({role:"grid",controls:i.$node[0].id,readonly:!0})),o.klass.calendar_container)+r.node("div",r.node("button",o.today,"btn-flat picker__today waves-effect","type=button data-pick="+s.pick+(t&&!i.disabled(s)?"":" disabled")+" "+r.ariaAttr({controls:i.$node[0].id}))+r.node("button",o.clear,"btn-flat picker__clear waves-effect","type=button data-clear=1"+(t?"":" disabled")+" "+r.ariaAttr({controls:i.$node[0].id}))+r.node("button",o.close,"btn-flat picker__close waves-effect","type=button data-close=true "+(t?"":" disabled")+" "+r.ariaAttr({controls:i.$node[0].id})),o.klass.footer),"picker__container__wrapper")},i.defaults={labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysLetter:["S","M","T","W","T","F","S"],today:"Today",clear:"Clear",close:"Ok",closeOnSelect:!1,format:"d mmmm, yyyy",klass:{table:(n=t.klasses().picker+"__")+"table",header:n+"header",date_display:n+"date-display",day_display:n+"day-display",month_display:n+"month-display",year_display:n+"year-display",calendar_container:n+"calendar-container",navPrev:n+"nav--prev",navNext:n+"nav--next",navDisabled:n+"nav--disabled",month:n+"month",year:n+"year",selectMonth:n+"select--month",selectYear:n+"select--year",weekdays:n+"weekday",day:n+"day",disabled:n+"day--disabled",selected:n+"day--selected",highlighted:n+"day--highlighted",now:n+"day--today",infocus:n+"day--infocus",outfocus:n+"day--outfocus",footer:n+"footer",buttonClear:n+"button--clear",buttonToday:n+"button--today",buttonClose:n+"button--close"}},t.extend("pickadate",i)}(Materialize.Picker,jQuery),function(t){var e,n,r,i=t(window),o=t(document),a="http://www.w3.org/2000/svg",s="SVGAngle"in window&&((n=document.createElement("div")).innerHTML="<svg/>",e=(n.firstChild&&n.firstChild.namespaceURI)==a,n.innerHTML="",e),u="transition"in(r=document.createElement("div").style)||"WebkitTransition"in r||"MozTransition"in r||"msTransition"in r||"OTransition"in r,c="ontouchstart"in window,l="mousedown"+(c?" touchstart":""),h="mousemove.clockpicker"+(c?" touchmove.clockpicker":""),f="mouseup.clockpicker"+(c?" touchend.clockpicker":""),d=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null;function p(t){return document.createElementNS(a,t)}function m(t){return(t<10?"0":"")+t}var g=0,v=135,y=105,w=70,x=20,b=2*v,_=u?350:1,M=['<div class="clockpicker picker">','<div class="picker__holder">','<div class="picker__frame">','<div class="picker__wrap">','<div class="picker__box">','<div class="picker__date-display">','<div class="clockpicker-display">','<div class="clockpicker-display-column">','<span class="clockpicker-span-hours text-primary"></span>',":",'<span class="clockpicker-span-minutes"></span>',"</div>",'<div class="clockpicker-display-column clockpicker-display-am-pm">','<div class="clockpicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="picker__container__wrapper">','<div class="picker__calendar-container">','<div class="clockpicker-plate">','<div class="clockpicker-canvas"></div>','<div class="clockpicker-dial clockpicker-hours"></div>','<div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div>',"</div>",'<div class="clockpicker-am-pm-block">',"</div>","</div>",'<div class="picker__footer">',"</div>","</div>","</div>","</div>","</div>","</div>","</div>"].join("");function S(e,n){var r=t(M),i=r.find(".clockpicker-plate"),a=r.find(".picker__holder"),u=r.find(".clockpicker-hours"),c=r.find(".clockpicker-minutes"),d=r.find(".clockpicker-am-pm-block"),S="INPUT"===e.prop("tagName"),T=S?e:e.find("input"),A=t("label[for="+T.attr("id")+"]"),C=this;this.id="cp"+(++g+""),this.element=e,this.holder=a,this.options=n,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=S,this.input=T,this.label=A,this.popover=r,this.plate=i,this.hoursView=u,this.minutesView=c,this.amPmBlock=d,this.spanHours=r.find(".clockpicker-span-hours"),this.spanMinutes=r.find(".clockpicker-span-minutes"),this.spanAmPm=r.find(".clockpicker-span-am-pm"),this.footer=r.find(".picker__footer"),this.amOrPm="PM",n.twelvehour&&(n.ampmclickable?(this.spanAmPm.empty(),t('<div id="click-am">AM</div>').on("click",function(){C.spanAmPm.children("#click-am").addClass("text-primary"),C.spanAmPm.children("#click-pm").removeClass("text-primary"),C.amOrPm="AM"}).appendTo(this.spanAmPm),t('<div id="click-pm">PM</div>').on("click",function(){C.spanAmPm.children("#click-pm").addClass("text-primary"),C.spanAmPm.children("#click-am").removeClass("text-primary"),C.amOrPm="PM"}).appendTo(this.spanAmPm)):(this.spanAmPm.empty(),t('<div id="click-am">AM</div>').appendTo(this.spanAmPm),t('<div id="click-pm">PM</div>').appendTo(this.spanAmPm))),t('<button type="button" class="btn-flat picker__clear" tabindex="'+(n.twelvehour?"3":"1")+'">'+n.cleartext+"</button>").click(t.proxy(this.clear,this)).appendTo(this.footer),t('<button type="button" class="btn-flat picker__close" tabindex="'+(n.twelvehour?"3":"1")+'">'+n.canceltext+"</button>").click(t.proxy(this.hide,this)).appendTo(this.footer),t('<button type="button" class="btn-flat picker__close" tabindex="'+(n.twelvehour?"3":"1")+'">'+n.donetext+"</button>").click(t.proxy(this.done,this)).appendTo(this.footer),this.spanHours.click(t.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(t.proxy(this.toggleView,this,"minutes")),T.on("focus.clockpicker click.clockpicker",t.proxy(this.show,this));var k,R,O,P,D=t('<div class="clockpicker-tick"></div>');if(n.twelvehour)for(k=1;k<13;k+=1)R=D.clone(),O=k/6*Math.PI,P=y,R.css({left:v+Math.sin(O)*P-x,top:v-Math.cos(O)*P-x}),R.html(0===k?"00":k),u.append(R),R.on(l,L);else for(k=0;k<24;k+=1)R=D.clone(),O=k/6*Math.PI,P=k>0&&k<13?w:y,R.css({left:v+Math.sin(O)*P-x,top:v-Math.cos(O)*P-x}),R.html(0===k?"00":k),u.append(R),R.on(l,L);for(k=0;k<60;k+=5)R=D.clone(),O=k/30*Math.PI,R.css({left:v+Math.sin(O)*y-x,top:v-Math.cos(O)*y-x}),R.html(m(k)),c.append(R),R.on(l,L);function L(t,e){var r=i.offset(),a=/^touch/.test(t.type),s=r.left+v,u=r.top+v,c=(a?t.originalEvent.touches[0]:t).pageX-s,l=(a?t.originalEvent.touches[0]:t).pageY-u,d=Math.sqrt(c*c+l*l),p=!1;if(!e||!(d<y-x||d>y+x)){t.preventDefault();var m=setTimeout(function(){C.popover.addClass("clockpicker-moving")},200);C.setHand(c,l,!e,!0),o.off(h).on(h,function(t){t.preventDefault();var e=/^touch/.test(t.type),n=(e?t.originalEvent.touches[0]:t).pageX-s,r=(e?t.originalEvent.touches[0]:t).pageY-u;(p||n!==c||r!==l)&&(p=!0,C.setHand(n,r,!1,!0))}),o.off(f).on(f,function(t){o.off(f),t.preventDefault();var r=/^touch/.test(t.type),a=(r?t.originalEvent.changedTouches[0]:t).pageX-s,d=(r?t.originalEvent.changedTouches[0]:t).pageY-u;(e||p)&&a===c&&d===l&&C.setHand(a,d),"hours"===C.currentView?C.toggleView("minutes",_/2):n.autoclose&&(C.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){C.done()},_/2)),i.prepend(N),clearTimeout(m),C.popover.removeClass("clockpicker-moving"),o.off(h)})}}if(i.on(l,function(e){0===t(e.target).closest(".clockpicker-tick").length&&L(e,!0)}),s){var N=r.find(".clockpicker-canvas"),I=p("svg");I.setAttribute("class","clockpicker-svg"),I.setAttribute("width",b),I.setAttribute("height",b);var F=p("g");F.setAttribute("transform","translate("+v+","+v+")");var z=p("circle");z.setAttribute("class","clockpicker-canvas-bearing"),z.setAttribute("cx",0),z.setAttribute("cy",0),z.setAttribute("r",4);var U=p("line");U.setAttribute("x1",0),U.setAttribute("y1",0);var j=p("circle");j.setAttribute("class","clockpicker-canvas-bg"),j.setAttribute("r",x),F.appendChild(U),F.appendChild(j),F.appendChild(z),I.appendChild(F),N.append(I),this.hand=U,this.bg=j,this.bearing=z,this.g=F,this.canvas=N}E(this.options.init)}function E(t){t&&"function"==typeof t&&t()}S.DEFAULTS={default:"",fromnow:0,donetext:"Ok",cleartext:"Clear",canceltext:"Cancel",autoclose:!1,ampmclickable:!0,darktheme:!1,twelvehour:!0,vibrate:!0},S.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},S.prototype.locate=function(){var t=this.element,e=this.popover;t.offset(),t.outerWidth(),t.outerHeight(),e.show()},S.prototype.show=function(e){if(!this.isShown){E(this.options.beforeShow),t(":input").each(function(){t(this).attr("tabindex",-1)});var n=this;this.input.blur(),this.popover.addClass("picker--opened"),this.input.addClass("picker__input picker__input--active"),t(document.body).css("overflow","hidden");var r=((this.input.prop("value")||this.options.default||"")+"").split(":");if(this.options.twelvehour&&"undefined"!=typeof r[1]&&(this.amOrPm=r[1].indexOf("AM")>0?"AM":"PM",r[1]=r[1].replace("AM","").replace("PM","")),"now"===r[0]){var a=new Date(+new Date+this.options.fromnow);r=[a.getHours(),a.getMinutes()],this.options.twelvehour&&(this.amOrPm=r[0]>=12&&r[0]<24?"PM":"AM")}if(this.hours=+r[0]||0,this.minutes=+r[1]||0,this.spanHours.html(this.hours),this.spanMinutes.html(m(this.minutes)),!this.isAppended){var s=document.querySelector(this.options.container);this.options.container&&s?s.appendChild(this.popover[0]):this.popover.insertAfter(this.input),this.options.twelvehour&&("PM"===this.amOrPm?(this.spanAmPm.children("#click-pm").addClass("text-primary"),this.spanAmPm.children("#click-am").removeClass("text-primary")):(this.spanAmPm.children("#click-am").addClass("text-primary"),this.spanAmPm.children("#click-pm").removeClass("text-primary"))),i.on("resize.clockpicker"+this.id,function(){n.isShown&&n.locate()}),this.isAppended=!0}this.toggleView("hours"),this.locate(),this.isShown=!0,o.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(e){var r=t(e.target);0===r.closest(n.popover.find(".picker__wrap")).length&&0===r.closest(n.input).length&&n.hide()}),o.on("keyup.clockpicker."+this.id,function(t){27===t.keyCode&&n.hide()}),E(this.options.afterShow)}},S.prototype.hide=function(){E(this.options.beforeHide),this.input.removeClass("picker__input picker__input--active"),this.popover.removeClass("picker--opened"),t(document.body).css("overflow","visible"),this.isShown=!1,t(":input").each(function(e){t(this).attr("tabindex",e+1)}),o.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),o.off("keyup.clockpicker."+this.id),this.popover.hide(),E(this.options.afterHide)},S.prototype.toggleView=function(e,n){var r=!1;"minutes"===e&&"visible"===t(this.hoursView).css("visibility")&&(E(this.options.beforeHourSelect),r=!0);var i="hours"===e,o=i?this.hoursView:this.minutesView,a=i?this.minutesView:this.hoursView;this.currentView=e,this.spanHours.toggleClass("text-primary",i),this.spanMinutes.toggleClass("text-primary",!i),a.addClass("clockpicker-dial-out"),o.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(n),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){a.css("visibility","hidden")},_),r&&E(this.options.afterHourSelect)},S.prototype.resetClock=function(t){var e=this.currentView,n=this[e],r="hours"===e,i=n*(Math.PI/(r?6:30)),o=r&&n>0&&n<13?w:y,a=Math.sin(i)*o,u=-Math.cos(i)*o,c=this;s&&t?(c.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){c.canvas.removeClass("clockpicker-canvas-out"),c.setHand(a,u)},t)):this.setHand(a,u)},S.prototype.setHand=function(e,n,r,i){var o,a=Math.atan2(e,-n),u="hours"===this.currentView,c=Math.PI/(u||r?6:30),l=Math.sqrt(e*e+n*n),h=this.options,f=u&&l<(y+w)/2,p=f?w:y;if(h.twelvehour&&(p=y),a<0&&(a=2*Math.PI+a),a=(o=Math.round(a/c))*c,h.twelvehour?u?0===o&&(o=12):(r&&(o*=5),60===o&&(o=0)):u?(12===o&&(o=0),o=f?0===o?12:o:0===o?0:o+12):(r&&(o*=5),60===o&&(o=0)),this[this.currentView]!==o&&d&&this.options.vibrate&&(this.vibrateTimer||(navigator[d](10),this.vibrateTimer=setTimeout(t.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=o,u?this.spanHours.html(o):this.spanMinutes.html(m(o)),s){var g=Math.sin(a)*(p-x),v=-Math.cos(a)*(p-x),b=Math.sin(a)*p,_=-Math.cos(a)*p;this.hand.setAttribute("x2",g),this.hand.setAttribute("y2",v),this.bg.setAttribute("cx",b),this.bg.setAttribute("cy",_)}else this[u?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var e=t(this);e.toggleClass("active",o===+e.html())})},S.prototype.done=function(){E(this.options.beforeDone),this.hide(),this.label.addClass("active");var t=this.input.prop("value"),e=m(this.hours)+":"+m(this.minutes);this.options.twelvehour&&(e+=this.amOrPm),this.input.prop("value",e),e!==t&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur"),E(this.options.afterDone)},S.prototype.clear=function(){this.hide(),this.label.removeClass("active");var t=this.input.prop("value");this.input.prop("value",""),""!==t&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur")},S.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.isShown&&this.hide(),this.isAppended&&(i.off("resize.clockpicker"+this.id),this.popover.remove())},t.fn.pickatime=function(e){var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=t(this),i=r.data("clockpicker");if(i)"function"==typeof i[e]&&i[e].apply(i,n);else{var o=t.extend({},S.DEFAULTS,r.data(),"object"==typeof e&&e);r.data("clockpicker",new S(r,o))}})}}(jQuery),function(t){function e(){var e=+t(this).attr("data-length"),n=+t(this).val().length,r=n<=e;t(this).parent().find('span[class="character-counter"]').html(n+"/"+e),function(t,e){var n=e.hasClass("invalid");t&&n?e.removeClass("invalid"):t||n||(e.removeClass("valid"),e.addClass("invalid"))}(r,t(this))}function n(){t(this).parent().find('span[class="character-counter"]').html("")}t.fn.characterCounter=function(){return this.each(function(){var r=t(this);r.parent().find('span[class="character-counter"]').length||void 0!==r.attr("data-length")&&(r.on("input",e),r.on("focus",e),r.on("blur",n),function(e){var n=e.parent().find('span[class="character-counter"]');n.length||(n=t("<span/>").addClass("character-counter").css("float","right").css("font-size","12px").css("height",1),e.parent().append(n))}(r))})},t(document).ready(function(){t("input, textarea").characterCounter()})}(jQuery),function(t){var e={init:function(e){e=t.extend({duration:200,dist:-100,shift:0,padding:0,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},e);var n=Materialize.objectSelectorString(t(this));return this.each(function(r){var i,o,a,s,u,c,l,h,f,d,p,m,g,v,w,x,b,_,M,S=t('<ul class="indicators"></ul>'),E=null,T=null,A=t(this),C=A.find(".carousel-item").length>1,k=(A.attr("data-indicators")||e.indicators)&&C,R=A.attr("data-no-wrap")||e.noWrap||!C,O=A.attr("data-namespace")||n+r;A.attr("data-namespace",O);var P=function(e){var n=A.find(".carousel-item.active").length?A.find(".carousel-item.active").first():A.find(".carousel-item").first(),r=n.find("img").first();if(r.length)if(r[0].complete)if(r.height()>0)A.css("height",r.height());else{var i=r[0].naturalWidth,o=r[0].naturalHeight,a=A.width()/i*o;A.css("height",a)}else r.on("load",function(){A.css("height",t(this).height())});else if(!e){var s=n.height();A.css("height",s)}};if(e.fullWidth&&(e.dist=0,P(),k&&A.find(".carousel-fixed-item").addClass("with-indicators")),A.hasClass("initialized"))return t(window).trigger("resize"),A.trigger("carouselNext",[1e-6]),!0;function D(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function L(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function N(t){return t>=h?t%h:t<0?N(h+t%h):t}function I(n){var r,c,f,d,p,m,g;A.hasClass("scrolling")||A.addClass("scrolling"),null!=E&&window.clearTimeout(E),E=window.setTimeout(function(){A.removeClass("scrolling")},e.duration);var y=u;if(s="number"==typeof n?n:s,u=Math.floor((s+l/2)/l),p=-(d=(f=s-u*l)<0?1:-1)*f*2/l,c=h>>1,e.fullWidth?g="translateX(0)":(g="translateX("+(A[0].clientWidth-o)/2+"px) ",g+="translateY("+(A[0].clientHeight-a)/2+"px)"),k){var w=u%h,x=S.find(".indicator-item.active");x.index()!==w&&(x.removeClass("active"),S.find(".indicator-item").eq(w).addClass("active"))}for((!R||u>=0&&u<h)&&(m=i[N(u)],t(m).hasClass("active")||(A.find(".carousel-item").removeClass("active"),t(m).addClass("active")),m.style[v]=g+" translateX("+-f/2+"px) translateX("+d*e.shift*p*r+"px) translateZ("+e.dist*p+"px)",m.style.zIndex=0,tweenedOpacity=e.fullWidth?1:1-.2*p,m.style.opacity=tweenedOpacity,m.style.display="block"),r=1;r<=c;++r)e.fullWidth?(zTranslation=e.dist,tweenedOpacity=r===c&&f<0?1-p:1):(zTranslation=e.dist*(2*r+p*d),tweenedOpacity=1-.2*(2*r+p*d)),(!R||u+r<h)&&((m=i[N(u+r)]).style[v]=g+" translateX("+(e.shift+(l*r-f)/2)+"px) translateZ("+zTranslation+"px)",m.style.zIndex=-r,m.style.opacity=tweenedOpacity,m.style.display="block"),e.fullWidth?(zTranslation=e.dist,tweenedOpacity=r===c&&f>0?1-p:1):(zTranslation=e.dist*(2*r-p*d),tweenedOpacity=1-.2*(2*r-p*d)),(!R||u-r>=0)&&((m=i[N(u-r)]).style[v]=g+" translateX("+((-l*r-f)/2-e.shift)+"px) translateZ("+zTranslation+"px)",m.style.zIndex=-r,m.style.opacity=tweenedOpacity,m.style.display="block");if((!R||u>=0&&u<h)&&((m=i[N(u)]).style[v]=g+" translateX("+-f/2+"px) translateX("+d*e.shift*p+"px) translateZ("+e.dist*p+"px)",m.style.zIndex=0,tweenedOpacity=e.fullWidth?1:1-.2*p,m.style.opacity=tweenedOpacity,m.style.display="block"),y!==u&&"function"==typeof e.onCycleTo){var b=A.find(".carousel-item").eq(N(u));e.onCycleTo.call(this,b,_)}"function"==typeof T&&(T.call(this,b,_),T=null)}function F(){var t,e,n;e=(t=Date.now())-x,x=t,n=s-w,w=s,g=1e3*n/(1+e)*.8+.2*g}function z(){var t,n;p&&(t=Date.now()-x,(n=p*Math.exp(-t/e.duration))>2||n<-2?(I(m-n),requestAnimationFrame(z)):I(m))}function U(t){var e=u%h-t;R||(e<0?Math.abs(e+h)<Math.abs(e)&&(e+=h):e>0&&Math.abs(e-h)<e&&(e-=h)),e<0?A.trigger("carouselNext",[Math.abs(e)]):e>0&&A.trigger("carouselPrev",[e])}function j(e){"mousedown"===e.type&&t(e.target).is("img")&&e.preventDefault(),c=!0,_=!1,M=!1,f=D(e),d=L(e),g=p=0,w=s,x=Date.now(),clearInterval(b),b=setInterval(F,100)}function V(t){var e,n;if(c)if(e=D(t),y=L(t),n=f-e,Math.abs(d-y)<30&&!M)(n>2||n<-2)&&(_=!0,f=e,I(s+n));else{if(_)return t.preventDefault(),t.stopPropagation(),!1;M=!0}if(_)return t.preventDefault(),t.stopPropagation(),!1}function B(t){if(c)return c=!1,clearInterval(b),m=s,(g>10||g<-10)&&(m=s+(p=.9*g)),m=Math.round(m/l)*l,R&&(m>=l*(h-1)?m=l*(h-1):m<0&&(m=0)),p=m-s,x=Date.now(),requestAnimationFrame(z),_&&(t.preventDefault(),t.stopPropagation()),!1}A.addClass("initialized"),c=!1,s=m=0,i=[],o=A.find(".carousel-item").first().innerWidth(),a=A.find(".carousel-item").first().innerHeight(),l=2*o+e.padding,A.find(".carousel-item").each(function(e){if(i.push(t(this)[0]),k){var n=t('<li class="indicator-item"></li>');0===e&&n.addClass("active"),n.click(function(e){e.stopPropagation(),U(t(this).index())}),S.append(n)}}),k&&A.append(S),h=i.length,v="transform",["webkit","Moz","O","ms"].every(function(t){var e=t+"Transform";return"undefined"==typeof document.body.style[e]||(v=e,!1)});var H=Materialize.throttle(function(){e.fullWidth?(o=A.find(".carousel-item").first().innerWidth(),A.find(".carousel-item.active").height(),l=2*o+e.padding,m=s=2*u*o,P(!0)):I()},200);t(window).off("resize.carousel-"+O).on("resize.carousel-"+O,H),"undefined"!=typeof window.ontouchstart&&(A.on("touchstart.carousel",j),A.on("touchmove.carousel",V),A.on("touchend.carousel",B)),A.on("mousedown.carousel",j),A.on("mousemove.carousel",V),A.on("mouseup.carousel",B),A.on("mouseleave.carousel",B),A.on("click.carousel",function(n){if(_)return n.preventDefault(),n.stopPropagation(),!1;if(!e.fullWidth){var r=t(n.target).closest(".carousel-item").index();0!=N(u)-r&&(n.preventDefault(),n.stopPropagation()),U(r)}}),I(s),t(this).on("carouselNext",function(t,e,n){void 0===e&&(e=1),"function"==typeof n&&(T=n),m=l*Math.round(s/l)+l*e,s!==m&&(p=m-s,x=Date.now(),requestAnimationFrame(z))}),t(this).on("carouselPrev",function(t,e,n){void 0===e&&(e=1),"function"==typeof n&&(T=n),m=l*Math.round(s/l)-l*e,s!==m&&(p=m-s,x=Date.now(),requestAnimationFrame(z))}),t(this).on("carouselSet",function(t,e,n){void 0===e&&(e=0),"function"==typeof n&&(T=n),U(e)})})},next:function(e,n){t(this).trigger("carouselNext",[e,n])},prev:function(e,n){t(this).trigger("carouselPrev",[e,n])},set:function(e,n){t(this).trigger("carouselSet",[e,n])},destroy:function(){var e=t(this).attr("data-namespace");t(this).removeAttr("data-namespace"),t(this).removeClass("initialized"),t(this).find(".indicators").remove(),t(this).off("carouselNext carouselPrev carouselSet"),t(window).off("resize.carousel-"+e),"undefined"!=typeof window.ontouchstart&&t(this).off("touchstart.carousel touchmove.carousel touchend.carousel"),t(this).off("mousedown.carousel mousemove.carousel mouseup.carousel mouseleave.carousel click.carousel")}};t.fn.carousel=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.carousel"):e.init.apply(this,arguments)}}(jQuery),function(t){var e={init:function(e){return this.each(function(){var n=t("#"+t(this).attr("data-activates")),r=(t("body"),t(this)),i=r.parent(".tap-target-wrapper"),o=i.find(".tap-target-wave"),a=i.find(".tap-target-origin"),s=r.find(".tap-target-content");i.length||(i=r.wrap(t('<div class="tap-target-wrapper"></div>')).parent()),s.length||(s=t('<div class="tap-target-content"></div>'),r.append(s)),o.length||(o=t('<div class="tap-target-wave"></div>'),a.length||((a=n.clone(!0,!0)).addClass("tap-target-origin"),a.removeAttr("id"),a.removeAttr("style"),o.append(a)),i.append(o));var u=function(){i.is(".open")&&(i.removeClass("open"),a.off("click.tapTarget"),t(document).off("click.tapTarget"),t(window).off("resize.tapTarget"))},c=function(){var e="fixed"===n.css("position");if(!e)for(var a=n.parents(),u=0;u<a.length&&!(e="fixed"==t(a[u]).css("position"));u++);var c=n.outerWidth(),l=n.outerHeight(),h=e?n.offset().top-t(document).scrollTop():n.offset().top,f=e?n.offset().left-t(document).scrollLeft():n.offset().left,d=t(window).width(),p=t(window).height(),m=d/2,g=p/2,v=f<=m,y=f>m,w=h<=g,x=h>g,b=f>=.25*d&&f<=.75*d,_=r.outerWidth(),M=r.outerHeight(),S=h+l/2-M/2,E=f+c/2-_/2,T=e?"fixed":"absolute",A=b?_:_/2+c,C=M/2,k=w?M/2:0,R=v&&!b?_/2-c:0,O=c,P=x?"bottom":"top",D=2*c,L=D,N=M/2-L/2,I=_/2-D/2,F={};F.top=w?S:"",F.right=y?d-E-_:"",F.bottom=x?p-S-M:"",F.left=v?E:"",F.position=T,i.css(F),s.css({width:A,height:C,top:k,right:0,bottom:0,left:R,padding:O,verticalAlign:P}),o.css({top:N,left:I,width:D,height:L})};"open"==e&&(c(),i.is(".open")||(i.addClass("open"),setTimeout(function(){a.off("click.tapTarget").on("click.tapTarget",function(t){u(),a.off("click.tapTarget")}),t(document).off("click.tapTarget").on("click.tapTarget",function(e){u(),t(document).off("click.tapTarget")});var e=Materialize.throttle(function(){c()},200);t(window).off("resize.tapTarget").on("resize.tapTarget",e)},0))),"close"==e&&u()})},open:function(){},close:function(){}};t.fn.tapTarget=function(n){if(e[n]||"object"==typeof n)return e.init.apply(this,arguments);t.error("Method "+n+" does not exist on jQuery.tap-target")}}(jQuery),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).numbro=t()}(function(){return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){return i(e[a][1][t]||t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){!function(t){"use strict";function n(t){var e=0|t;return t>0||t===e?e:e-1}function r(t){for(var e,n,r=1,i=t.length,o=t[0]+"";r<i;){for(e=t[r++]+"",n=x-e.length;n--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function i(t,e){var n,r,i=t.c,o=e.c,a=t.s,s=e.s,u=t.e,c=e.e;if(!a||!s)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-s:a;if(a!=s)return a;if(n=a<0,r=u==c,!i||!o)return r?0:!i^n?1:-1;if(!r)return u>c^n?1:-1;for(s=(u=i.length)<(c=o.length)?u:c,a=0;a<s;a++)if(i[a]!=o[a])return i[a]>o[a]^n?1:-1;return u==c?0:u>c^n?1:-1}function o(t,e,n){return(t=l(t))>=e&&t<=n}function a(t){return"[object Array]"==Object.prototype.toString.call(t)}function s(t,e,n){for(var r,i,o=[0],a=0,s=t.length;a<s;){for(i=o.length;i--;o[i]*=e);for(o[r=0]+=y.indexOf(t.charAt(a++));r<o.length;r++)o[r]>n-1&&(null==o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}function u(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function c(t,e){var n,r;if(e<0){for(r="0.";++e;r+="0");t=r+t}else if(++e>(n=t.length)){for(r="0",e-=n;--e;r+="0");t+=r}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}function l(t){return(t=parseFloat(t))<0?d(t):p(t)}var h,f=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,d=Math.ceil,p=Math.floor,m=" not a boolean or binary digit",g="rounding mode",v="number type has more than 15 significant digits",y="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",w=1e14,x=14,b=9007199254740991,_=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],M=1e7,S=1e9;(h=function t(e){function h(t,e){var n,r,i,o,a,s,u=this;if(!(u instanceof h))return H&&R(26,"constructor call without new",t),new h(t,e);if(null!=e&&G(e,2,64,L,"base")){if(s=t+"",10==(e|=0))return O(u=new h(t instanceof h?t:s),F+u.e+1,z);if((o="number"==typeof t)&&0*t!=0||!new RegExp("^-?"+(n="["+y.slice(0,e)+"]+")+"(?:\\."+n+")?$",e<37?"i":"").test(s))return D(u,s,o,e);o?(u.s=1/t<0?(s=s.slice(1),-1):1,H&&s.replace(/^0\.0*|\./,"").length>15&&R(L,v,t),o=!1):u.s=45===s.charCodeAt(0)?(s=s.slice(1),-1):1,s=E(s,10,e,u.s)}else{if(t instanceof h)return u.s=t.s,u.e=t.e,u.c=(t=t.c)?t.slice():t,void(L=0);if((o="number"==typeof t)&&0*t==0){if(u.s=1/t<0?(t=-t,-1):1,t===~~t){for(r=0,i=t;i>=10;i/=10,r++);return u.e=r,u.c=[t],void(L=0)}s=t+""}else{if(!f.test(s=t+""))return D(u,s,o);u.s=45===s.charCodeAt(0)?(s=s.slice(1),-1):1}}for((r=s.indexOf("."))>-1&&(s=s.replace(".","")),(i=s.search(/e/i))>0?(r<0&&(r=i),r+=+s.slice(i+1),s=s.substring(0,i)):r<0&&(r=s.length),i=0;48===s.charCodeAt(i);i++);for(a=s.length;48===s.charCodeAt(--a););if(s=s.slice(i,a+1))if(a=s.length,o&&H&&a>15&&(t>b||t!==p(t))&&R(L,v,u.s*t),(r=r-i-1)>B)u.c=u.e=null;else if(r<V)u.c=[u.e=0];else{if(u.e=r,u.c=[],i=(r+1)%x,r<0&&(i+=x),i<a){for(i&&u.c.push(+s.slice(0,i)),a-=x;i<a;)u.c.push(+s.slice(i,i+=x));s=s.slice(i),i=x-s.length}else i-=a;for(;i--;s+="0");u.c.push(+s)}else u.c=[u.e=0];L=0}function E(t,e,n,i){var o,a,u,l,f,d,p,m=t.indexOf("."),g=F,v=z;for(n<37&&(t=t.toLowerCase()),m>=0&&(u=Y,Y=0,t=t.replace(".",""),f=(p=new h(n)).pow(t.length-m),Y=u,p.c=s(c(r(f.c),f.e),10,e),p.e=p.c.length),a=u=(d=s(t,n,e)).length;0==d[--u];d.pop());if(!d[0])return"0";if(m<0?--a:(f.c=d,f.e=a,f.s=i,d=(f=P(f,p,g,v,e)).c,l=f.r,a=f.e),m=d[o=a+g+1],u=e/2,l=l||o<0||null!=d[o+1],l=v<4?(null!=m||l)&&(0==v||v==(f.s<0?3:2)):m>u||m==u&&(4==v||l||6==v&&1&d[o-1]||v==(f.s<0?8:7)),o<1||!d[0])t=l?c("1",-g):"0";else{if(d.length=o,l)for(--e;++d[--o]>e;)d[o]=0,o||(++a,d=[1].concat(d));for(u=d.length;!d[--u];);for(m=0,t="";m<=u;t+=y.charAt(d[m++]));t=c(t,a)}return t}function T(t,e,n,i){var o,a,s,l,f;if(n=null!=n&&G(n,0,8,i,g)?0|n:z,!t.c)return t.toString();if(o=t.c[0],s=t.e,null==e)f=r(t.c),f=19==i||24==i&&s<=U?u(f,s):c(f,s);else if(a=(t=O(new h(t),e,n)).e,l=(f=r(t.c)).length,19==i||24==i&&(e<=a||a<=U)){for(;l<e;f+="0",l++);f=u(f,a)}else if(e-=s,f=c(f,a),a+1>l){if(--e>0)for(f+=".";e--;f+="0");}else if((e+=a-l)>0)for(a+1==l&&(f+=".");e--;f+="0");return t.s<0&&o?"-"+f:f}function A(t,e){var n,r,i=0;for(a(t[0])&&(t=t[0]),n=new h(t[0]);++i<t.length;){if(!(r=new h(t[i])).s){n=r;break}e.call(n,r)&&(n=r)}return n}function C(t,e,n,r,i){return(t<e||t>n||t!=l(t))&&R(r,(i||"decimal places")+(t<e||t>n?" out of range":" not an integer"),t),!0}function k(t,e,n){for(var r=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,r++);return(n=r+n*x-1)>B?t.c=t.e=null:n<V?t.c=[t.e=0]:(t.e=n,t.c=e),t}function R(t,e,n){var r=new Error(["new BigNumber","cmp","config","div","divToInt","eq","gt","gte","lt","lte","minus","mod","plus","precision","random","round","shift","times","toDigits","toExponential","toFixed","toFormat","toFraction","pow","toPrecision","toString","BigNumber"][t]+"() "+e+": "+n);throw r.name="BigNumber Error",L=0,r}function O(t,e,n,r){var i,o,a,s,u,c,l,h=t.c,f=_;if(h){t:{for(i=1,s=h[0];s>=10;s/=10,i++);if((o=e-i)<0)o+=x,l=(u=h[c=0])/f[i-(a=e)-1]%10|0;else if((c=d((o+1)/x))>=h.length){if(!r)break t;for(;h.length<=c;h.push(0));u=l=0,i=1,a=(o%=x)-x+1}else{for(u=s=h[c],i=1;s>=10;s/=10,i++);l=(a=(o%=x)-x+i)<0?0:u/f[i-a-1]%10|0}if(r=r||e<0||null!=h[c+1]||(a<0?u:u%f[i-a-1]),r=n<4?(l||r)&&(0==n||n==(t.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(o>0?a>0?u/f[i-a]:0:h[c-1])%10&1||n==(t.s<0?8:7)),e<1||!h[0])return h.length=0,r?(h[0]=f[(x-(e-=t.e+1)%x)%x],t.e=-e||0):h[0]=t.e=0,t;if(0==o?(h.length=c,s=1,c--):(h.length=c+1,s=f[x-o],h[c]=a>0?p(u/f[i-a]%f[a])*s:0),r)for(;;){if(0==c){for(o=1,a=h[0];a>=10;a/=10,o++);for(a=h[0]+=s,s=1;a>=10;a/=10,s++);o!=s&&(t.e++,h[0]==w&&(h[0]=1));break}if(h[c]+=s,h[c]!=w)break;h[c--]=0,s=1}for(o=h.length;0===h[--o];h.pop());}t.e>B?t.c=t.e=null:t.e<V&&(t.c=[t.e=0])}return t}var P,D,L=0,N=h.prototype,I=new h(1),F=20,z=4,U=-7,j=21,V=-1e7,B=1e7,H=!0,G=C,q=!1,W=1,Y=0,X={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"\xa0",fractionGroupSize:0};return h.another=t,h.ROUND_UP=0,h.ROUND_DOWN=1,h.ROUND_CEIL=2,h.ROUND_FLOOR=3,h.ROUND_HALF_UP=4,h.ROUND_HALF_DOWN=5,h.ROUND_HALF_EVEN=6,h.ROUND_HALF_CEIL=7,h.ROUND_HALF_FLOOR=8,h.EUCLID=9,h.config=h.set=function(){var t,e,n=0,r={},i=arguments,s=i[0],u=s&&"object"==typeof s?function(){if(s.hasOwnProperty(e))return null!=(t=s[e])}:function(){if(i.length>n)return null!=(t=i[n++])};return u(e="DECIMAL_PLACES")&&G(t,0,S,2,e)&&(F=0|t),r[e]=F,u(e="ROUNDING_MODE")&&G(t,0,8,2,e)&&(z=0|t),r[e]=z,u(e="EXPONENTIAL_AT")&&(a(t)?G(t[0],-S,0,2,e)&&G(t[1],0,S,2,e)&&(U=0|t[0],j=0|t[1]):G(t,-S,S,2,e)&&(U=-(j=0|(t<0?-t:t)))),r[e]=[U,j],u(e="RANGE")&&(a(t)?G(t[0],-S,-1,2,e)&&G(t[1],1,S,2,e)&&(V=0|t[0],B=0|t[1]):G(t,-S,S,2,e)&&(0|t?V=-(B=0|(t<0?-t:t)):H&&R(2,e+" cannot be zero",t))),r[e]=[V,B],u(e="ERRORS")&&(t===!!t||1===t||0===t?(L=0,G=(H=!!t)?C:o):H&&R(2,e+m,t)),r[e]=H,u(e="CRYPTO")&&(!0===t||!1===t||1===t||0===t?t?!(t="undefined"==typeof crypto)&&crypto&&(crypto.getRandomValues||crypto.randomBytes)?q=!0:H?R(2,"crypto unavailable",t?void 0:crypto):q=!1:q=!1:H&&R(2,e+m,t)),r[e]=q,u(e="MODULO_MODE")&&G(t,0,9,2,e)&&(W=0|t),r[e]=W,u(e="POW_PRECISION")&&G(t,0,S,2,e)&&(Y=0|t),r[e]=Y,u(e="FORMAT")&&("object"==typeof t?X=t:H&&R(2,e+" not an object",t)),r[e]=X,r},h.max=function(){return A(arguments,N.lt)},h.min=function(){return A(arguments,N.gt)},h.random=function(){var t=9007199254740992*Math.random()&2097151?function(){return p(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(e){var n,r,i,o,a,s=0,u=[],c=new h(I);if(e=null!=e&&G(e,0,S,14)?0|e:F,o=d(e/x),q)if(crypto.getRandomValues){for(n=crypto.getRandomValues(new Uint32Array(o*=2));s<o;)(a=131072*n[s]+(n[s+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),n[s]=r[0],n[s+1]=r[1]):(u.push(a%1e14),s+=2);s=o/2}else if(crypto.randomBytes){for(n=crypto.randomBytes(o*=7);s<o;)(a=281474976710656*(31&n[s])+1099511627776*n[s+1]+4294967296*n[s+2]+16777216*n[s+3]+(n[s+4]<<16)+(n[s+5]<<8)+n[s+6])>=9e15?crypto.randomBytes(7).copy(n,s):(u.push(a%1e14),s+=7);s=o/7}else q=!1,H&&R(14,"crypto unavailable",crypto);if(!q)for(;s<o;)(a=t())<9e15&&(u[s++]=a%1e14);for(o=u[--s],e%=x,o&&e&&(u[s]=p(o/(a=_[x-e]))*a);0===u[s];u.pop(),s--);if(s<0)u=[i=0];else{for(i=-1;0===u[0];u.splice(0,1),i-=x);for(s=1,a=u[0];a>=10;a/=10,s++);s<x&&(i-=x-s)}return c.e=i,c.c=u,c}}(),P=function(){function t(t,e,n){var r,i,o,a,s=0,u=t.length,c=e%M,l=e/M|0;for(t=t.slice();u--;)s=((i=c*(o=t[u]%M)+(r=l*o+(a=t[u]/M|0)*c)%M*M+s)/n|0)+(r/M|0)+l*a,t[u]=i%n;return s&&(t=[s].concat(t)),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function r(t,e,n,r){for(var i=0;n--;)t[n]-=i,t[n]=(i=t[n]<e[n]?1:0)*r+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(i,o,a,s,u){var c,l,f,d,m,g,v,y,b,_,M,S,E,T,A,C,k,R=i.s==o.s?1:-1,P=i.c,D=o.c;if(!(P&&P[0]&&D&&D[0]))return new h(i.s&&o.s&&(P?!D||P[0]!=D[0]:D)?P&&0==P[0]||!D?0*R:R/0:NaN);for(b=(y=new h(R)).c=[],R=a+(l=i.e-o.e)+1,u||(u=w,l=n(i.e/x)-n(o.e/x),R=R/x|0),f=0;D[f]==(P[f]||0);f++);if(D[f]>(P[f]||0)&&l--,R<0)b.push(1),d=!0;else{for(T=P.length,C=D.length,f=0,R+=2,(m=p(u/(D[0]+1)))>1&&(D=t(D,m,u),P=t(P,m,u),C=D.length,T=P.length),E=C,M=(_=P.slice(0,C)).length;M<C;_[M++]=0);k=D.slice(),k=[0].concat(k),A=D[0],D[1]>=u/2&&A++;do{if(m=0,(c=e(D,_,C,M))<0){if(S=_[0],C!=M&&(S=S*u+(_[1]||0)),(m=p(S/A))>1)for(m>=u&&(m=u-1),v=(g=t(D,m,u)).length,M=_.length;1==e(g,_,v,M);)m--,r(g,C<v?k:D,v,u),v=g.length,c=1;else 0==m&&(c=m=1),v=(g=D.slice()).length;if(v<M&&(g=[0].concat(g)),r(_,g,M,u),M=_.length,-1==c)for(;e(D,_,C,M)<1;)m++,r(_,C<M?k:D,M,u),M=_.length}else 0===c&&(m++,_=[0]);b[f++]=m,_[0]?_[M++]=P[E]||0:(_=[P[E]],M=1)}while((E++<T||null!=_[0])&&R--);d=null!=_[0],b[0]||b.splice(0,1)}if(u==w){for(f=1,R=b[0];R>=10;R/=10,f++);O(y,a+(y.e=f+l*x-1)+1,s,d)}else y.e=l,y.r=+d;return y}}(),D=function(){var t=/^(-?)0([xbo])(?=\w[\w.]*$)/i,e=/^([^.]+)\.$/,n=/^\.([^.]+)$/,r=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(o,a,s,u){var c,l=s?a:a.replace(i,"");if(r.test(l))o.s=isNaN(l)?null:l<0?-1:1;else{if(!s&&(l=l.replace(t,function(t,e,n){return c="x"==(n=n.toLowerCase())?16:"b"==n?2:8,u&&u!=c?t:e}),u&&(c=u,l=l.replace(e,"$1").replace(n,"0.$1")),a!=l))return new h(l,c);H&&R(L,"not a"+(u?" base "+u:"")+" number",a),o.s=null}o.c=o.e=null,L=0}}(),N.absoluteValue=N.abs=function(){var t=new h(this);return t.s<0&&(t.s=1),t},N.ceil=function(){return O(new h(this),this.e+1,2)},N.comparedTo=N.cmp=function(t,e){return L=1,i(this,new h(t,e))},N.decimalPlaces=N.dp=function(){var t,e,r=this.c;if(!r)return null;if(t=((e=r.length-1)-n(this.e/x))*x,e=r[e])for(;e%10==0;e/=10,t--);return t<0&&(t=0),t},N.dividedBy=N.div=function(t,e){return L=3,P(this,new h(t,e),F,z)},N.dividedToIntegerBy=N.divToInt=function(t,e){return L=4,P(this,new h(t,e),0,1)},N.equals=N.eq=function(t,e){return L=5,0===i(this,new h(t,e))},N.floor=function(){return O(new h(this),this.e+1,3)},N.greaterThan=N.gt=function(t,e){return L=6,i(this,new h(t,e))>0},N.greaterThanOrEqualTo=N.gte=function(t,e){return L=7,1===(e=i(this,new h(t,e)))||0===e},N.isFinite=function(){return!!this.c},N.isInteger=N.isInt=function(){return!!this.c&&n(this.e/x)>this.c.length-2},N.isNaN=function(){return!this.s},N.isNegative=N.isNeg=function(){return this.s<0},N.isZero=function(){return!!this.c&&0==this.c[0]},N.lessThan=N.lt=function(t,e){return L=8,i(this,new h(t,e))<0},N.lessThanOrEqualTo=N.lte=function(t,e){return L=9,-1===(e=i(this,new h(t,e)))||0===e},N.minus=N.sub=function(t,e){var r,i,o,a,s=this,u=s.s;if(L=10,e=(t=new h(t,e)).s,!u||!e)return new h(NaN);if(u!=e)return t.s=-e,s.plus(t);var c=s.e/x,l=t.e/x,f=s.c,d=t.c;if(!c||!l){if(!f||!d)return f?(t.s=-e,t):new h(d?s:NaN);if(!f[0]||!d[0])return d[0]?(t.s=-e,t):new h(f[0]?s:3==z?-0:0)}if(c=n(c),l=n(l),f=f.slice(),u=c-l){for((a=u<0)?(u=-u,o=f):(l=c,o=d),o.reverse(),e=u;e--;o.push(0));o.reverse()}else for(i=(a=(u=f.length)<(e=d.length))?u:e,u=e=0;e<i;e++)if(f[e]!=d[e]){a=f[e]<d[e];break}if(a&&(o=f,f=d,d=o,t.s=-t.s),(e=(i=d.length)-(r=f.length))>0)for(;e--;f[r++]=0);for(e=w-1;i>u;){if(f[--i]<d[i]){for(r=i;r&&!f[--r];f[r]=e);--f[r],f[i]+=w}f[i]-=d[i]}for(;0==f[0];f.splice(0,1),--l);return f[0]?k(t,f,l):(t.s=3==z?-1:1,t.c=[t.e=0],t)},N.modulo=N.mod=function(t,e){var n,r,i=this;return L=11,t=new h(t,e),!i.c||!t.s||t.c&&!t.c[0]?new h(NaN):!t.c||i.c&&!i.c[0]?new h(i):(9==W?(r=t.s,t.s=1,n=P(i,t,0,3),t.s=r,n.s*=r):n=P(i,t,0,W),i.minus(n.times(t)))},N.negated=N.neg=function(){var t=new h(this);return t.s=-t.s||null,t},N.plus=N.add=function(t,e){var r,i=this,o=i.s;if(L=12,e=(t=new h(t,e)).s,!o||!e)return new h(NaN);if(o!=e)return t.s=-e,i.minus(t);var a=i.e/x,s=t.e/x,u=i.c,c=t.c;if(!a||!s){if(!u||!c)return new h(o/0);if(!u[0]||!c[0])return c[0]?t:new h(u[0]?i:0*o)}if(a=n(a),s=n(s),u=u.slice(),o=a-s){for(o>0?(s=a,r=c):(o=-o,r=u),r.reverse();o--;r.push(0));r.reverse()}for((o=u.length)-(e=c.length)<0&&(r=c,c=u,u=r,e=o),o=0;e;)o=(u[--e]=u[e]+c[e]+o)/w|0,u[e]=w===u[e]?0:u[e]%w;return o&&(u=[o].concat(u),++s),k(t,u,s)},N.precision=N.sd=function(t){var e,n,r=this,i=r.c;if(null!=t&&t!==!!t&&1!==t&&0!==t&&(H&&R(13,"argument"+m,t),t!=!!t&&(t=null)),!i)return null;if(e=(n=i.length-1)*x+1,n=i[n]){for(;n%10==0;n/=10,e--);for(n=i[0];n>=10;n/=10,e++);}return t&&r.e+1>e&&(e=r.e+1),e},N.round=function(t,e){var n=new h(this);return(null==t||G(t,0,S,15))&&O(n,~~t+this.e+1,null!=e&&G(e,0,8,15,g)?0|e:z),n},N.shift=function(t){var e=this;return G(t,-b,b,16,"argument")?e.times("1e"+l(t)):new h(e.c&&e.c[0]&&(t<-b||t>b)?e.s*(t<0?0:1/0):e)},N.squareRoot=N.sqrt=function(){var t,e,i,o,a,s=this,u=s.c,c=s.s,l=s.e,f=F+4,d=new h("0.5");if(1!==c||!u||!u[0])return new h(!c||c<0&&(!u||u[0])?NaN:u?s:1/0);if(0==(c=Math.sqrt(+s))||c==1/0?(((e=r(u)).length+l)%2==0&&(e+="0"),c=Math.sqrt(e),l=n((l+1)/2)-(l<0||l%2),i=new h(e=c==1/0?"1e"+l:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+l)):i=new h(c+""),i.c[0])for((c=(l=i.e)+f)<3&&(c=0);;)if(i=d.times((a=i).plus(P(s,a,f,1))),r(a.c).slice(0,c)===(e=r(i.c)).slice(0,c)){if(i.e<l&&--c,"9999"!=(e=e.slice(c-3,c+1))&&(o||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(O(i,i.e+F+2,1),t=!i.times(i).eq(s));break}if(!o&&(O(a,a.e+F+2,0),a.times(a).eq(s))){i=a;break}f+=4,c+=4,o=1}return O(i,i.e+F+1,z,t)},N.times=N.mul=function(t,e){var r,i,o,a,s,u,c,l,f,d,p,m,g,v,y,b=this,_=b.c,S=(L=17,t=new h(t,e)).c;if(!(_&&S&&_[0]&&S[0]))return!b.s||!t.s||_&&!_[0]&&!S||S&&!S[0]&&!_?t.c=t.e=t.s=null:(t.s*=b.s,_&&S?(t.c=[0],t.e=0):t.c=t.e=null),t;for(i=n(b.e/x)+n(t.e/x),t.s*=b.s,(c=_.length)<(d=S.length)&&(g=_,_=S,S=g,o=c,c=d,d=o),o=c+d,g=[];o--;g.push(0));for(v=w,y=M,o=d;--o>=0;){for(r=0,p=S[o]%y,m=S[o]/y|0,a=o+(s=c);a>o;)r=((l=p*(l=_[--s]%y)+(u=m*l+(f=_[s]/y|0)*p)%y*y+g[a]+r)/v|0)+(u/y|0)+m*f,g[a--]=l%v;g[a]=r}return r?++i:g.splice(0,1),k(t,g,i)},N.toDigits=function(t,e){var n=new h(this);return t=null!=t&&G(t,1,S,18,"precision")?0|t:null,e=null!=e&&G(e,0,8,18,g)?0|e:z,t?O(n,t,e):n},N.toExponential=function(t,e){return T(this,null!=t&&G(t,0,S,19)?1+~~t:null,e,19)},N.toFixed=function(t,e){return T(this,null!=t&&G(t,0,S,20)?~~t+this.e+1:null,e,20)},N.toFormat=function(t,e){var n=T(this,null!=t&&G(t,0,S,21)?~~t+this.e+1:null,e,21);if(this.c){var r,i=n.split("."),o=+X.groupSize,a=+X.secondaryGroupSize,s=X.groupSeparator,u=i[0],c=i[1],l=this.s<0,h=l?u.slice(1):u,f=h.length;if(a&&(r=o,o=a,a=r,f-=r),o>0&&f>0){for(u=h.substr(0,r=f%o||o);r<f;r+=o)u+=s+h.substr(r,o);a>0&&(u+=s+h.slice(r)),l&&(u="-"+u)}n=c?u+X.decimalSeparator+((a=+X.fractionGroupSize)?c.replace(new RegExp("\\d{"+a+"}\\B","g"),"$&"+X.fractionGroupSeparator):c):u}return n},N.toFraction=function(t){var e,n,i,o,a,s,u,c,l,f=H,d=this,p=d.c,m=new h(I),g=n=new h(I),v=u=new h(I);if(null!=t&&(H=!1,s=new h(t),H=f,(f=s.isInt())&&!s.lt(I)||(H&&R(22,"max denominator "+(f?"out of range":"not an integer"),t),t=!f&&s.c&&O(s,s.e+1,1).gte(I)?s:null)),!p)return d.toString();for(l=r(p),o=m.e=l.length-d.e-1,m.c[0]=_[(a=o%x)<0?x+a:a],t=!t||s.cmp(m)>0?o>0?m:g:s,a=B,B=1/0,s=new h(l),u.c[0]=0;c=P(s,m,0,1),1!=(i=n.plus(c.times(v))).cmp(t);)n=v,v=i,g=u.plus(c.times(i=g)),u=i,m=s.minus(c.times(i=m)),s=i;return i=P(t.minus(n),v,0,1),u=u.plus(i.times(g)),n=n.plus(i.times(v)),u.s=g.s=d.s,e=P(g,v,o*=2,z).minus(d).abs().cmp(P(u,n,o,z).minus(d).abs())<1?[g.toString(),v.toString()]:[u.toString(),n.toString()],B=a,e},N.toNumber=function(){return+this},N.toPower=N.pow=function(t,e){var n,r,i,o=p(t<0?-t:+t),a=this;if(null!=e&&(L=23,e=new h(e)),!G(t,-b,b,23,"exponent")&&(!isFinite(t)||o>b&&(t/=0)||parseFloat(t)!=t&&!(t=NaN))||0==t)return n=Math.pow(+a,t),new h(e?n%e:n);for(e?t>1&&a.gt(I)&&a.isInt()&&e.gt(I)&&e.isInt()?a=a.mod(e):(i=e,e=null):Y&&(n=d(Y/x+2)),r=new h(I);;){if(o%2){if(!(r=r.times(a)).c)break;n?r.c.length>n&&(r.c.length=n):e&&(r=r.mod(e))}if(!(o=p(o/2)))break;a=a.times(a),n?a.c&&a.c.length>n&&(a.c.length=n):e&&(a=a.mod(e))}return e?r:(t<0&&(r=I.div(r)),i?r.mod(i):n?O(r,Y,z):r)},N.toPrecision=function(t,e){return T(this,null!=t&&G(t,1,S,24,"precision")?0|t:null,e,24)},N.toString=function(t){var e,n=this,i=n.s,o=n.e;return null===o?i?(e="Infinity",i<0&&(e="-"+e)):e="NaN":(e=r(n.c),e=null!=t&&G(t,2,64,25,"base")?E(c(e,o),0|t,10,i):o<=U||o>=j?u(e,o):c(e,o),i<0&&n.c[0]&&(e="-"+e)),e},N.truncated=N.trunc=function(){return O(new h(this),this.e+1,1)},N.valueOf=N.toJSON=function(){var t,e=this,n=e.e;return null===n?e.toString():(t=r(e.c),t=n<=U||n>=j?u(t,n):c(t,n),e.s<0?"-"+t:t)},N.isBigNumber=!0,null!=e&&h.config(e),h}()).default=h.BigNumber=h,void 0!==e&&e.exports?e.exports=h:(t||(t="undefined"!=typeof self?self:Function("return this")()),t.BigNumber=h)}(this)},{}],2:[function(t,e,n){"use strict";e.exports={languageTag:"en-US",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},spaceSeparated:!1,ordinal:function(t){var e=t%10;return 1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$",position:"prefix",code:"USD"},currencyFormat:{thousandSeparated:!0,totalLength:4,spaceSeparated:!0},formats:{fourDigits:{totalLength:4,spaceSeparated:!0},fullWithTwoDecimals:{output:"currency",thousandSeparated:!0,mantissa:2},fullWithTwoDecimalsNoCurrency:{thousandSeparated:!0,mantissa:2},fullWithNoDecimals:{output:"currency",thousandSeparated:!0,mantissa:0}}}},{}],3:[function(t,e,n){"use strict";function r(t,e,n){var r=e[0],i=Math.abs(t);if(i>=n){for(var o=1;o<e.length;++o){var a=Math.pow(n,o),s=Math.pow(n,o+1);if(i>=a&&i<s){r=e[o],t/=a;break}}r===e[0]&&(t/=Math.pow(n,e.length-1),r=e[e.length-1])}return{value:t,suffix:r}}function i(t){var e=t.characteristicPrecision,n=void 0===e?0:e,r=t.value.toExponential().split("e"),i=l(r,2),o=i[1],a=+i[0];return n?(1<n&&(a*=Math.pow(10,n-1),o=(o=+o-(n-1))>=0?"+"+o:o),{value:a,abbreviation:"e"+o}):{value:a,abbreviation:"e"+o}}function o(t){for(var e="",n=0;n<t;n++)e+="0";return e}function a(t,e,n,r){if(-1===r)return t;var i=function(t,e){return-1!==t.toString().indexOf("e")?function(t,e){var n=t.toString(),r=n.split("e"),i=l(r,2),a=i[1],s=i[0].split("."),u=l(s,2),c=u[0],h=u[1],f=void 0===h?"":h;if(+a>0)n=c+f+o(a-f.length);else{var d=".";d=+c<0?"-0"+d:"0"+d;var p=(o(-a-1)+Math.abs(c)+f).substr(0,e);p.length<e&&(p+=o(e-p.length)),n=d+p}return+a>0&&e>0&&(n+="."+o(e)),n}(t,e):(Math.round(+(t+"e+"+e))/Math.pow(10,e)).toFixed(e)}(e,r),a=i.toString().split("."),s=l(a,2),u=s[0],c=s[1];return(void 0===c?"":c).match(/^0+$/)&&n?u:i.toString()}function s(t,e,n,r){var i=t,o=i.toString().split("."),a=l(o,2),s=a[0],u=a[1];if(s.match(/^-?0$/)&&n)return u?s.replace("0","")+"."+u:s.replace("0","");if(s.length<r)for(var c=r-s.length,h=0;h<c;h++)i="0"+i;return i.toString()}function u(t){var e=t.instance,n=t.providedFormat,r=t.state,o=void 0===r?h:r,u=t.decimalSeparator,c=t.defaults,l=void 0===c?o.currentDefaults():c,f=e._value;if(0===f&&o.hasZeroFormat())return o.getZeroFormat();if(!isFinite(f))return f.toString();var d=Object.assign({},g,l,n),p=d.totalLength,m=p?0:d.characteristic,v=d.optionalCharacteristic,y=d.forceAverage,w=!!p||!!y||d.average,x=p?-1:w&&void 0===n.mantissa?0:d.mantissa,b=!p&&(void 0===n.optionalMantissa?-1===x:d.optionalMantissa),_=d.thousandSeparated,M=d.spaceSeparated,S=d.negative,E=d.forceSign,T=d.exponential,A="";if(w){var C=function(t){var e=t.value,n=t.forceAverage,r=t.abbreviations,i=t.spaceSeparated,o=void 0!==i&&i,a=t.totalLength,s=void 0===a?0:a,u="",c=Math.abs(e),l=-1;if(c>=Math.pow(10,12)&&!n||"trillion"===n?(u=r.trillion,e/=Math.pow(10,12)):c<Math.pow(10,12)&&c>=Math.pow(10,9)&&!n||"billion"===n?(u=r.billion,e/=Math.pow(10,9)):c<Math.pow(10,9)&&c>=Math.pow(10,6)&&!n||"million"===n?(u=r.million,e/=Math.pow(10,6)):(c<Math.pow(10,6)&&c>=Math.pow(10,3)&&!n||"thousand"===n)&&(u=r.thousand,e/=Math.pow(10,3)),u&&(u=(o?" ":"")+u),s){var h=e.toString().split(".")[0];l=Math.max(s-h.length,0)}return{value:e,abbreviation:u,mantissaPrecision:l}}({value:f,forceAverage:y,abbreviations:o.currentAbbreviations(),spaceSeparated:M,totalLength:p});f=C.value,A+=C.abbreviation,p&&(x=C.mantissaPrecision)}if(T){var k=i({value:f,characteristicPrecision:m});f=k.value,A=k.abbreviation+A}var R=a(f.toString(),f,b,x);return R=function(t,e,n,r,i){var o=r.currentDelimiters(),a=o.thousands;i=i||o.decimal;var s=o.thousandsSize||3,u=t.toString(),c=u.split(".")[0],l=u.split(".")[1];return n&&(e<0&&(c=c.slice(1)),function(t,e){for(var n=[],r=0,i=c.length;i>0;i--)r===e&&(n.unshift(i),r=0),r++;return n}(0,s).forEach(function(t,e){c=c.slice(0,t+e)+a+c.slice(t+e)}),e<0&&(c="-"+c)),l?c+i+l:c}(R=s(R,0,v,m),f,_,o,u),(w||T)&&(R+=A),(E||f<0)&&(R=function(t,e,n){return 0===e?t:0==+t?t.replace("-",""):e>0?"+"+t:"sign"===n?t:"("+t.replace("-","")+")"}(R,f,S)),R}function c(t,e){if(!t)return e;var n=Object.keys(t);return 1===n.length&&"output"===n[0]?e:t}var l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},h=t("./globalState"),f=t("./validating"),d=t("./parsing"),p=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],m={general:{scale:1024,suffixes:p,marker:"bd"},binary:{scale:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],marker:"b"},decimal:{scale:1e3,suffixes:p,marker:"d"}},g={totalLength:0,characteristic:0,forceAverage:!1,average:!1,mantissa:-1,optionalMantissa:!0,thousandSeparated:!1,spaceSeparated:!1,negative:"sign",forceSign:!1};e.exports=function(t){return{format:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];if("string"==typeof e&&(e=d.parseFormat(e)),!f.validateFormat(e))return"ERROR: invalid format";var i=e.prefix||"",o=e.postfix||"",a=function(t,e,n){switch(e.output){case"currency":return function(t,e,n){var r=n.currentCurrency(),i=Object.assign({},g,e),o=void 0,a="",s=!!i.totalLength||!!i.forceAverage||i.average,c=e.currencyPosition||r.position,l=e.currencySymbol||r.symbol;i.spaceSeparated&&(a=" "),"infix"===c&&(o=a+l+a);var h=u({instance:t,providedFormat:e,state:n,decimalSeparator:o});return"prefix"===c&&(h=t._value<0&&"sign"===i.negative?"-"+a+l+h.slice(1):l+a+h),c&&"postfix"!==c||(h=h+(a=s?"":a)+l),h}(t,e=c(e,h.currentCurrencyDefaultFormat()),h);case"percent":return function(t,e,n,r){var i=e.prefixSymbol,o=u({instance:r(100*t._value),providedFormat:e,state:n}),a=Object.assign({},g,e);return i?"%"+(a.spaceSeparated?" ":"")+o:o+(a.spaceSeparated?" ":"")+"%"}(t,e=c(e,h.currentPercentageDefaultFormat()),h,n);case"byte":return function(t,e,n,i){var o=m[e.base||"binary"],a=r(t._value,o.suffixes,o.scale),s=a.suffix;return u({instance:i(a.value),providedFormat:e,state:n,defaults:n.currentByteDefaultFormat()})+(n.currentAbbreviations().spaced?" ":"")+s}(t,e=c(e,h.currentByteDefaultFormat()),h,n);case"time":return e=c(e,h.currentTimeDefaultFormat()),function(t){var e=Math.floor(t._value/60/60),n=Math.floor((t._value-60*e*60)/60),r=Math.round(t._value-60*e*60-60*n);return e+":"+(n<10?"0":"")+n+":"+(r<10?"0":"")+r}(t);case"ordinal":return function(t,e,n){var r=n.currentOrdinal(),i=Object.assign({},g,e),o=u({instance:t,providedFormat:e,state:n}),a=r(t._value);return o+(i.spaceSeparated?" ":"")+a}(t,e=c(e,h.currentOrdinalDefaultFormat()),h);case"number":default:return u({instance:t,providedFormat:e,numbro:n})}}(t,e,n);return(a=i+a)+o}).apply(void 0,n.concat([t]))},getByteUnit:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return(function(t){var e=m.general;return r(t._value,e.suffixes,e.scale).suffix}).apply(void 0,n.concat([t]))},getBinaryByteUnit:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return(function(t){var e=m.binary;return r(t._value,e.suffixes,e.scale).suffix}).apply(void 0,n.concat([t]))},getDecimalByteUnit:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return(function(t){var e=m.decimal;return r(t._value,e.suffixes,e.scale).suffix}).apply(void 0,n.concat([t]))},formatOrDefault:c}}},{"./globalState":4,"./parsing":8,"./validating":10}],4:[function(t,e,n){"use strict";function r(t){c=t}function i(){return l[c]}var o=t("./en-US"),a=t("./validating"),s=t("./parsing"),u={},c=void 0,l={},h=null,f={};u.languages=function(){return Object.assign({},l)},u.currentLanguage=function(){return c},u.currentCurrency=function(){return i().currency},u.currentAbbreviations=function(){return i().abbreviations},u.currentDelimiters=function(){return i().delimiters},u.currentOrdinal=function(){return i().ordinal},u.currentDefaults=function(){return Object.assign({},i().defaults,f)},u.currentOrdinalDefaultFormat=function(){return Object.assign({},u.currentDefaults(),i().ordinalFormat)},u.currentByteDefaultFormat=function(){return Object.assign({},u.currentDefaults(),i().byteFormat)},u.currentPercentageDefaultFormat=function(){return Object.assign({},u.currentDefaults(),i().percentageFormat)},u.currentCurrencyDefaultFormat=function(){return Object.assign({},u.currentDefaults(),i().currencyFormat)},u.currentTimeDefaultFormat=function(){return Object.assign({},u.currentDefaults(),i().timeFormat)},u.setDefaults=function(t){t=s.parseFormat(t),a.validateFormat(t)&&(f=t)},u.getZeroFormat=function(){return h},u.setZeroFormat=function(t){return h="string"==typeof t?t:null},u.hasZeroFormat=function(){return null!==h},u.languageData=function(t){if(t){if(l[t])return l[t];throw new Error('Unknown tag "'+t+'"')}return i()},u.registerLanguage=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!a.validateLanguage(t))throw new Error("Invalid language data");l[t.languageTag]=t,e&&r(t.languageTag)},u.setLanguage=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.languageTag;if(!l[t]){var n=t.split("-")[0],i=Object.keys(l).find(function(t){return t.split("-")[0]===n});if(!l[i])return void r(e);r(i)}r(t)},u.registerLanguage(o),c=o.languageTag,e.exports=u},{"./en-US":2,"./parsing":8,"./validating":10}],5:[function(t,e,n){"use strict";function r(e,n){e.forEach(function(e){var r=void 0;try{r=t("../languages/"+e)}catch(t){console.error('Unable to load "'+e+'". No matching language file found.')}r&&n.registerLanguage(r)})}e.exports=function(t){return{loadLanguagesInNode:function(e){return r(e,t)}}}},{}],6:[function(t,e,n){"use strict";function r(t,e,n){var r=new i(t._value),o=e;return n.isNumbro(e)&&(o=e._value),o=new i(o),t._value=r.minus(o).toNumber(),t}var i=t("bignumber.js");e.exports=function(t){return{add:function(e,n){return function(t,e,n){var r=new i(t._value),o=e;return n.isNumbro(e)&&(o=e._value),o=new i(o),t._value=r.add(o).toNumber(),t}(e,n,t)},subtract:function(e,n){return r(e,n,t)},multiply:function(e,n){return function(t,e,n){var r=new i(t._value),o=e;return n.isNumbro(e)&&(o=e._value),o=new i(o),t._value=r.times(o).toNumber(),t}(e,n,t)},divide:function(e,n){return function(t,e,n){var r=new i(t._value),o=e;return n.isNumbro(e)&&(o=e._value),o=new i(o),t._value=r.dividedBy(o).toNumber(),t}(e,n,t)},set:function(e,n){return function(t,e,n){var r=e;return n.isNumbro(e)&&(r=e._value),t._value=r,t}(e,n,t)},difference:function(e,n){return function(t,e,n){var i=n(t._value);return r(i,e,n),Math.abs(i._value)}(e,n,t)}}}},{"bignumber.js":1}],7:[function(t,e,n){"use strict";function r(t){var e=t;return i.isNumbro(t)?e=t._value:"string"==typeof t?e=i.unformat(t):isNaN(t)&&(e=NaN),e}function i(t){return new d(r(t))}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("./globalState"),s=t("./validating"),u=t("./loading")(i),c=t("./unformatting"),l=t("./formatting")(i),h=t("./manipulating")(i),f=t("./parsing"),d=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._value=e}return o(t,[{key:"clone",value:function(){return i(this._value)}},{key:"format",value:function(){return l.format(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},{key:"formatCurrency",value:function(t){return"string"==typeof t&&(t=f.parseFormat(t)),(t=l.formatOrDefault(t,a.currentCurrencyDefaultFormat())).output="currency",l.format(this,t)}},{key:"formatTime",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.output="time",l.format(this,t)}},{key:"binaryByteUnits",value:function(){return l.getBinaryByteUnit(this)}},{key:"decimalByteUnits",value:function(){return l.getDecimalByteUnit(this)}},{key:"byteUnits",value:function(){return l.getByteUnit(this)}},{key:"difference",value:function(t){return h.difference(this,t)}},{key:"add",value:function(t){return h.add(this,t)}},{key:"subtract",value:function(t){return h.subtract(this,t)}},{key:"multiply",value:function(t){return h.multiply(this,t)}},{key:"divide",value:function(t){return h.divide(this,t)}},{key:"set",value:function(t){return h.set(this,r(t))}},{key:"value",value:function(){return this._value}},{key:"valueOf",value:function(){return this._value}}]),t}();i.version="2.0.6",i.isNumbro=function(t){return t instanceof d},i.language=a.currentLanguage,i.registerLanguage=a.registerLanguage,i.setLanguage=a.setLanguage,i.languages=a.languages,i.languageData=a.languageData,i.zeroFormat=a.setZeroFormat,i.defaultFormat=a.currentDefaults,i.setDefaults=a.setDefaults,i.defaultCurrencyFormat=a.currentCurrencyDefaultFormat,i.validate=s.validate,i.loadLanguagesInNode=u.loadLanguagesInNode,i.unformat=c.unformat,e.exports=i},{"./formatting":3,"./globalState":4,"./loading":5,"./manipulating":6,"./parsing":8,"./unformatting":9,"./validating":10}],8:[function(t,e,n){"use strict";e.exports={parseFormat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"!=typeof t?t:(function(t,e){if(-1===t.indexOf("$")){if(-1===t.indexOf("%"))return-1!==t.indexOf("bd")?(e.output="byte",void(e.base="general")):-1!==t.indexOf("b")?(e.output="byte",void(e.base="binary")):-1!==t.indexOf("d")?(e.output="byte",void(e.base="decimal")):void(-1===t.indexOf(":")?-1!==t.indexOf("o")&&(e.output="ordinal"):e.output="time");e.output="percent"}else e.output="currency"}(t=function(t,e){var n=t.match(/{([^}]*)}$/);return n?(e.postfix=n[1],t.slice(0,-n[0].length)):t}(t=function(t,e){var n=t.match(/^{([^}]*)}/);return n?(e.prefix=n[1],t.slice(n[0].length)):t}(t,e),e),e),function(t,e){var n=t.match(/[1-9]+[0-9]*/);n&&(e.totalLength=+n[0])}(t,e),function(t,e){var n=t.split(".")[0].match(/0+/);n&&(e.characteristic=n[0].length)}(t,e),function(t,e){if(-1!==t.indexOf(".")){var n=t.split(".")[0];e.optionalCharacteristic=-1===n.indexOf("0")}}(t,e),function(t,e){-1!==t.indexOf("a")&&(e.average=!0)}(t,e),function(t,e){-1!==t.indexOf("K")?e.forceAverage="thousand":-1!==t.indexOf("M")?e.forceAverage="million":-1!==t.indexOf("B")?e.forceAverage="billion":-1!==t.indexOf("T")&&(e.forceAverage="trillion")}(t,e),function(t,e){var n=t.split(".")[1];if(n){var r=n.match(/0+/);r&&(e.mantissa=r[0].length)}}(t,e),function(t,e){t.match(/\[\.]/)?e.optionalMantissa=!0:t.match(/\./)&&(e.optionalMantissa=!1)}(t,e),function(t,e){-1!==t.indexOf(",")&&(e.thousandSeparated=!0)}(t,e),function(t,e){-1!==t.indexOf(" ")&&(e.spaceSeparated=!0)}(t,e),function(t,e){t.match(/^\+?\([^)]*\)$/)&&(e.negative="parenthesis"),t.match(/^\+?-/)&&(e.negative="sign")}(t,e),function(t,e){t.match(/^\+/)&&(e.forceSign=!0)}(t,e),e)}}},{}],9:[function(t,e,n){"use strict";function r(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments[3],a=arguments[4],u=arguments[5],c=arguments[6];if(!isNaN(+t))return+t;var l="",h=t.replace(/(^[^(]*)\((.*)\)([^)]*$)/,"$1$2$3");if(h!==t)return-1*i(h,e,n,o,a,u,c);for(var f=0;f<s.length;f++){var d=s[f];if((l=t.replace(d.key,""))!==t)return i(l,e,n,o,a,u,c)*d.factor}if((l=t.replace("%",""))!==t)return i(l,e,n,o,a,u,c)/100;var p=parseFloat(t);if(!isNaN(p)){var m=o(p);if(m&&"."!==m&&(l=t.replace(new RegExp(r(m)+"$"),""))!==t)return i(l,e,n,o,a,u,c);var g={};Object.keys(u).forEach(function(t){g[u[t]]=t});for(var v=Object.keys(g).sort().reverse(),y=v.length,w=0;w<y;w++){var x=v[w],b=g[x];if((l=t.replace(x,""))!==t){var _=void 0;switch(b){case"thousand":_=Math.pow(10,3);break;case"million":_=Math.pow(10,6);break;case"billion":_=Math.pow(10,9);break;case"trillion":_=Math.pow(10,12)}return i(l,e,n,o,a,u,c)*_}}}}function o(t,e){var n=t.replace(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"","");return(n=n.replace(new RegExp("([0-9])"+r(e.thousands)+"([0-9])","g"),"$1$2")).replace(e.decimal,".")}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments[3],a=arguments[4],s=arguments[5],u=arguments[6];if(""!==t)return isNaN(+t)?t===a?0:i(o(t,e,n),e,n,r,a,s,u):+t}var s=[{key:"ZiB",factor:Math.pow(1024,7)},{key:"ZB",factor:Math.pow(1e3,7)},{key:"YiB",factor:Math.pow(1024,8)},{key:"YB",factor:Math.pow(1e3,8)},{key:"TiB",factor:Math.pow(1024,4)},{key:"TB",factor:Math.pow(1e3,4)},{key:"PiB",factor:Math.pow(1024,5)},{key:"PB",factor:Math.pow(1e3,5)},{key:"MiB",factor:Math.pow(1024,2)},{key:"MB",factor:Math.pow(1e3,2)},{key:"KiB",factor:Math.pow(1024,1)},{key:"KB",factor:Math.pow(1e3,1)},{key:"GiB",factor:Math.pow(1024,3)},{key:"GB",factor:Math.pow(1e3,3)},{key:"EiB",factor:Math.pow(1024,6)},{key:"EB",factor:Math.pow(1e3,6)},{key:"B",factor:1}];e.exports={unformat:function(e,n){var r=t("./globalState"),i=r.currentDelimiters(),o=r.currentCurrency().symbol,s=r.currentOrdinal(),u=r.getZeroFormat(),c=r.currentAbbreviations(),l=void 0;if("string"==typeof e)l=function(t,e){if(!t.indexOf(":")||":"===e.thousands)return!1;var n=t.split(":");if(3!==n.length)return!1;var r=+n[1],i=+n[2];return!isNaN(+n[0])&&!isNaN(r)&&!isNaN(i)}(e,i)?function(t){var e=t.split(":");return+e[2]+60*+e[1]+3600*+e[0]}(e):a(e,i,o,s,u,c,n);else{if("number"!=typeof e)return;l=e}if(void 0!==l)return l}}},{"./globalState":4}],10:[function(t,e,n){"use strict";function r(t){return!!s.unformat(t)}function i(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Object.keys(t).map(function(r){if(!e[r])return console.error(n+" Invalid key: "+r),!1;var o=t[r],s=e[r];if("string"==typeof s&&(s={type:s}),"format"===s.type){if(!i(o,c,"[Validate "+r+"]",!0))return!1}else if((void 0===o?"undefined":a(o))!==s.type)return console.error(n+" "+r+' type mismatched: "'+s.type+'" expected, "'+(void 0===o?"undefined":a(o))+'" provided'),!1;if(s.restrictions&&s.restrictions.length)for(var u=s.restrictions.length,l=0;l<u;l++){var h=s.restrictions[l],f=h.message;if(!(0,h.restriction)(o,t))return console.error(n+" "+r+" invalid value: "+f),!1}return s.restriction&&!s.restriction(o,t)?(console.error(n+" "+r+" invalid value: "+s.message),!1):s.validValues&&-1===s.validValues.indexOf(o)?(console.error(n+" "+r+" invalid value: must be among "+JSON.stringify(s.validValues)+', "'+o+'" provided'),!1):!(s.children&&!i(o,s.children,"[Validate "+r+"]"))});return r||o.push.apply(o,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(Object.keys(e).map(function(r){var i=e[r];if("string"==typeof i&&(i={type:i}),i.mandatory){var o=i.mandatory;if("function"==typeof o&&(o=o(t)),o&&void 0===t[r])return console.error(n+' Missing mandatory key "'+r+'"'),!1}return!0}))),o.reduce(function(t,e){return t&&e},!0)}function o(t){return i(t,c,"[Validate format]")}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=t("./unformatting"),u=/^[a-z]{2,3}(-[a-zA-Z]{4})?(-([A-Z]{2}|[0-9]{3}))?$/,c={output:{type:"string",validValues:["currency","percent","byte","time","ordinal","number"]},base:{type:"string",validValues:["decimal","binary","general"],restriction:function(t,e){return"byte"===e.output},message:"`base` must be provided only when the output is `byte`",mandatory:function(t){return"byte"===t.output}},characteristic:{type:"number",restriction:function(t){return t>=0},message:"value must be positive"},prefix:"string",postfix:"string",forceAverage:{type:"string",validValues:["trillion","billion","million","thousand"]},average:"boolean",currencyPosition:{type:"string",validValues:["prefix","infix","postfix"]},currencySymbol:"string",totalLength:{type:"number",restrictions:[{restriction:function(t){return t>=0},message:"value must be positive"},{restriction:function(t,e){return!e.exponential},message:"`totalLength` is incompatible with `exponential`"}]},mantissa:{type:"number",restriction:function(t){return t>=0},message:"value must be positive"},optionalMantissa:"boolean",optionalCharacteristic:"boolean",thousandSeparated:"boolean",spaceSeparated:"boolean",abbreviations:{type:"object",children:{thousand:"string",million:"string",billion:"string",trillion:"string"}},negative:{type:"string",validValues:["sign","parenthesis"]},forceSign:"boolean",exponential:{type:"boolean"},prefixSymbol:{type:"boolean",restriction:function(t,e){return"percent"===e.output},message:"`prefixSymbol` can be provided only when the output is `percent`"}},l={languageTag:{type:"string",mandatory:!0,restriction:function(t){return t.match(u)},message:"the language tag must follow the BCP 47 specification (see https://tools.ieft.org/html/bcp47)"},delimiters:{type:"object",children:{thousands:"string",decimal:"string",thousandsSize:"number"},mandatory:!0},abbreviations:{type:"object",children:{thousand:{type:"string",mandatory:!0},million:{type:"string",mandatory:!0},billion:{type:"string",mandatory:!0},trillion:{type:"string",mandatory:!0}},mandatory:!0},spaceSeparated:"boolean",ordinal:{type:"function",mandatory:!0},currency:{type:"object",children:{symbol:"string",position:"string",code:"string"},mandatory:!0},defaults:"format",ordinalFormat:"format",byteFormat:"format",percentageFormat:"format",currencyFormat:"format",timeDefaults:"format",formats:{type:"object",children:{fourDigits:{type:"format",mandatory:!0},fullWithTwoDecimals:{type:"format",mandatory:!0},fullWithTwoDecimalsNoCurrency:{type:"format",mandatory:!0},fullWithNoDecimals:{type:"format",mandatory:!0}}}};e.exports={validate:function(t,e){var n=r(t),i=o(e);return n&&i},validateFormat:o,validateInput:r,validateLanguage:function(t){return i(t,l,"[Validate language]")}}},{"./unformatting":9}]},{},[7])(7)}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";var t,e;function n(){return t.apply(null,arguments)}function r(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function i(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function o(t){return void 0===t}function a(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function s(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function u(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l(t,e){for(var n in e)c(e,n)&&(t[n]=e[n]);return c(e,"toString")&&(t.toString=e.toString),c(e,"valueOf")&&(t.valueOf=e.valueOf),t}function h(t,e,n,r){return Ee(t,e,n,r,!0).utc()}function f(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function d(t){if(null==t._isValid){var n=f(t),r=e.call(n.parsedDateParts,function(t){return null!=t}),i=!isNaN(t._d.getTime())&&n.overflow<0&&!n.empty&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&r);if(t._strict&&(i=i&&0===n.charsLeftOver&&0===n.unusedTokens.length&&void 0===n.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function p(t){var e=h(NaN);return null!=t?l(f(e),t):f(e).userInvalidated=!0,e}e=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};var m=n.momentProperties=[];function g(t,e){var n,r,i;if(o(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),o(e._i)||(t._i=e._i),o(e._f)||(t._f=e._f),o(e._l)||(t._l=e._l),o(e._strict)||(t._strict=e._strict),o(e._tzm)||(t._tzm=e._tzm),o(e._isUTC)||(t._isUTC=e._isUTC),o(e._offset)||(t._offset=e._offset),o(e._pf)||(t._pf=f(e)),o(e._locale)||(t._locale=e._locale),0<m.length)for(n=0;n<m.length;n++)o(i=e[r=m[n]])||(t[r]=i);return t}var v=!1;function y(t){g(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===v&&(v=!0,n.updateOffset(this),v=!1)}function w(t){return t instanceof y||null!=t&&null!=t._isAMomentObject}function x(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function b(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=x(e)),n}function _(t,e,n){var r,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&b(t[r])!==b(e[r]))&&a++;return a+o}function M(t){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function S(t,e){var r=!0;return l(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,t),r){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){for(var s in i+="\n["+a+"] ",arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}M(t+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return e.apply(this,arguments)},e)}var E,T={};function A(t,e){null!=n.deprecationHandler&&n.deprecationHandler(t,e),T[t]||(M(e),T[t]=!0)}function C(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function k(t,e){var n,r=l({},t);for(n in e)c(e,n)&&(i(t[n])&&i(e[n])?(r[n]={},l(r[n],t[n]),l(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)c(t,n)&&!c(e,n)&&i(t[n])&&(r[n]=l({},r[n]));return r}function R(t){null!=t&&this.set(t)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,E=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)c(t,e)&&n.push(e);return n};var O={};function P(t,e){var n=t.toLowerCase();O[n]=O[n+"s"]=O[e]=t}function D(t){return"string"==typeof t?O[t]||O[t.toLowerCase()]:void 0}function L(t){var e,n,r={};for(n in t)c(t,n)&&(e=D(n))&&(r[e]=t[n]);return r}var N={};function I(t,e){N[t]=e}function F(t,e,n){var r=""+Math.abs(t);return(0<=t?n?"+":"":"-")+Math.pow(10,Math.max(0,e-r.length)).toString().substr(1)+r}var z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,U=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,j={},V={};function B(t,e,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),t&&(V[t]=i),e&&(V[e[0]]=function(){return F(i.apply(this,arguments),e[1],e[2])}),n&&(V[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function H(t,e){return t.isValid()?(e=G(e,t.localeData()),j[e]=j[e]||function(t){var e,n,r,i=t.match(z);for(e=0,n=i.length;e<n;e++)i[e]=V[i[e]]?V[i[e]]:(r=i[e]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(e){var r,o="";for(r=0;r<n;r++)o+=C(i[r])?i[r].call(e,t):i[r];return o}}(e),j[e](t)):t.localeData().invalidDate()}function G(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(U.lastIndex=0;0<=n&&U.test(t);)t=t.replace(U,r),U.lastIndex=0,n-=1;return t}var q=/\d/,W=/\d\d/,Y=/\d{3}/,X=/\d{4}/,$=/[+-]?\d{6}/,Q=/\d\d?/,Z=/\d\d\d\d?/,J=/\d\d\d\d\d\d?/,K=/\d{1,3}/,tt=/\d{1,4}/,et=/[+-]?\d{1,6}/,nt=/\d+/,rt=/[+-]?\d+/,it=/Z|[+-]\d\d:?\d\d/gi,ot=/Z|[+-]\d\d(?::?\d\d)?/gi,at=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,st={};function ut(t,e,n){st[t]=C(e)?e:function(t,r){return t&&n?n:e}}function ct(t,e){return c(st,t)?st[t](e._strict,e._locale):new RegExp(lt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,r,i){return e||n||r||i})))}function lt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ht={};function ft(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),a(e)&&(r=function(t,n){n[e]=b(t)}),n=0;n<t.length;n++)ht[t[n]]=r}function dt(t,e){ft(t,function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)})}var pt=0,mt=1,gt=2,vt=3,yt=4,wt=5,xt=6,bt=7,_t=8;function Mt(t){return St(t)?366:365}function St(t){return t%4==0&&t%100!=0||t%400==0}B("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),B(0,["YY",2],0,function(){return this.year()%100}),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),P("year","y"),I("year",1),ut("Y",rt),ut("YY",Q,W),ut("YYYY",tt,X),ut("YYYYY",et,$),ut("YYYYYY",et,$),ft(["YYYYY","YYYYYY"],pt),ft("YYYY",function(t,e){e[pt]=2===t.length?n.parseTwoDigitYear(t):b(t)}),ft("YY",function(t,e){e[pt]=n.parseTwoDigitYear(t)}),ft("Y",function(t,e){e[pt]=parseInt(t,10)}),n.parseTwoDigitYear=function(t){return b(t)+(68<b(t)?1900:2e3)};var Et,Tt=At("FullYear",!0);function At(t,e){return function(r){return null!=r?(kt(this,t,r),n.updateOffset(this,e),this):Ct(this,t)}}function Ct(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function kt(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&St(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Rt(n,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function Rt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=(e%12+12)%12;return t+=(e-n)/12,1===n?St(t)?29:28:31-n%7%2}Et=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},B("M",["MM",2],"Mo",function(){return this.month()+1}),B("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),B("MMMM",0,0,function(t){return this.localeData().months(this,t)}),P("month","M"),I("month",8),ut("M",Q),ut("MM",Q,W),ut("MMM",function(t,e){return e.monthsShortRegex(t)}),ut("MMMM",function(t,e){return e.monthsRegex(t)}),ft(["M","MM"],function(t,e){e[mt]=b(t)-1}),ft(["MMM","MMMM"],function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[mt]=i:f(n).invalidMonth=t});var Ot=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Pt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Dt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Lt(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=b(e);else if(!a(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),Rt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function Nt(t){return null!=t?(Lt(this,t),n.updateOffset(this,!0),this):Ct(this,"Month")}var It=at,Ft=at;function zt(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],o=[];for(e=0;e<12;e++)n=h([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),o.sort(t),e=0;e<12;e++)r[e]=lt(r[e]),i[e]=lt(i[e]);for(e=0;e<24;e++)o[e]=lt(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Ut(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&0<=t&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function jt(t,e,n){var r=7+e-n;return-(7+Ut(t,0,r).getUTCDay()-e)%7+r-1}function Vt(t,e,n,r,i){var o,a,s=1+7*(e-1)+(7+n-r)%7+jt(t,r,i);return s<=0?a=Mt(o=t-1)+s:s>Mt(t)?(o=t+1,a=s-Mt(t)):(o=t,a=s),{year:o,dayOfYear:a}}function Bt(t,e,n){var r,i,o=jt(t.year(),e,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?r=a+Ht(i=t.year()-1,e,n):a>Ht(t.year(),e,n)?(r=a-Ht(t.year(),e,n),i=t.year()+1):(i=t.year(),r=a),{week:r,year:i}}function Ht(t,e,n){var r=jt(t,e,n),i=jt(t+1,e,n);return(Mt(t)-r+i)/7}B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),P("week","w"),P("isoWeek","W"),I("week",5),I("isoWeek",5),ut("w",Q),ut("ww",Q,W),ut("W",Q),ut("WW",Q,W),dt(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=b(t)}),B("d",0,"do","day"),B("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),B("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),B("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),P("day","d"),P("weekday","e"),P("isoWeekday","E"),I("day",11),I("weekday",11),I("isoWeekday",11),ut("d",Q),ut("e",Q),ut("E",Q),ut("dd",function(t,e){return e.weekdaysMinRegex(t)}),ut("ddd",function(t,e){return e.weekdaysShortRegex(t)}),ut("dddd",function(t,e){return e.weekdaysRegex(t)}),dt(["dd","ddd","dddd"],function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:f(n).invalidWeekday=t}),dt(["d","e","E"],function(t,e,n,r){e[r]=b(t)});var Gt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),qt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Wt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Yt=at,Xt=at,$t=at;function Qt(){function t(t,e){return e.length-t.length}var e,n,r,i,o,a=[],s=[],u=[],c=[];for(e=0;e<7;e++)n=h([2e3,1]).day(e),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),u.push(o),c.push(r),c.push(i),c.push(o);for(a.sort(t),s.sort(t),u.sort(t),c.sort(t),e=0;e<7;e++)s[e]=lt(s[e]),u[e]=lt(u[e]),c[e]=lt(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Zt(){return this.hours()%12||12}function Jt(t,e){B(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Kt(t,e){return e._meridiemParse}B("H",["HH",2],0,"hour"),B("h",["hh",2],0,Zt),B("k",["kk",2],0,function(){return this.hours()||24}),B("hmm",0,0,function(){return""+Zt.apply(this)+F(this.minutes(),2)}),B("hmmss",0,0,function(){return""+Zt.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)}),B("Hmm",0,0,function(){return""+this.hours()+F(this.minutes(),2)}),B("Hmmss",0,0,function(){return""+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)}),Jt("a",!0),Jt("A",!1),P("hour","h"),I("hour",13),ut("a",Kt),ut("A",Kt),ut("H",Q),ut("h",Q),ut("k",Q),ut("HH",Q,W),ut("hh",Q,W),ut("kk",Q,W),ut("hmm",Z),ut("hmmss",J),ut("Hmm",Z),ut("Hmmss",J),ft(["H","HH"],vt),ft(["k","kk"],function(t,e,n){var r=b(t);e[vt]=24===r?0:r}),ft(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),ft(["h","hh"],function(t,e,n){e[vt]=b(t),f(n).bigHour=!0}),ft("hmm",function(t,e,n){var r=t.length-2;e[vt]=b(t.substr(0,r)),e[yt]=b(t.substr(r)),f(n).bigHour=!0}),ft("hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[vt]=b(t.substr(0,r)),e[yt]=b(t.substr(r,2)),e[wt]=b(t.substr(i)),f(n).bigHour=!0}),ft("Hmm",function(t,e,n){var r=t.length-2;e[vt]=b(t.substr(0,r)),e[yt]=b(t.substr(r))}),ft("Hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[vt]=b(t.substr(0,r)),e[yt]=b(t.substr(r,2)),e[wt]=b(t.substr(i))});var te,ee=At("Hours",!0),ne={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Pt,monthsShort:Dt,week:{dow:0,doy:6},weekdays:Gt,weekdaysMin:Wt,weekdaysShort:qt,meridiemParse:/[ap]\.?m?\.?/i},re={},ie={};function oe(t){return t?t.toLowerCase().replace("_","-"):t}function ae(t){var e=null;if(!re[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=te._abbr,require("./locale/"+t),se(e)}catch(t){}return re[t]}function se(t,e){var n;return t&&((n=o(e)?ce(t):ue(t,e))?te=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),te._abbr}function ue(t,e){if(null!==e){var n,r=ne;if(e.abbr=t,null!=re[t])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=re[t]._config;else if(null!=e.parentLocale)if(null!=re[e.parentLocale])r=re[e.parentLocale]._config;else{if(null==(n=ae(e.parentLocale)))return ie[e.parentLocale]||(ie[e.parentLocale]=[]),ie[e.parentLocale].push({name:t,config:e}),null;r=n._config}return re[t]=new R(k(r,e)),ie[t]&&ie[t].forEach(function(t){ue(t.name,t.config)}),se(t),re[t]}return delete re[t],null}function ce(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return te;if(!r(t)){if(e=ae(t))return e;t=[t]}return function(t){for(var e,n,r,i,o=0;o<t.length;){for(e=(i=oe(t[o]).split("-")).length,n=(n=oe(t[o+1]))?n.split("-"):null;0<e;){if(r=ae(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&_(i,n,!0)>=e-1)break;e--}o++}return te}(t)}function le(t){var e,n=t._a;return n&&-2===f(t).overflow&&(e=n[mt]<0||11<n[mt]?mt:n[gt]<1||n[gt]>Rt(n[pt],n[mt])?gt:n[vt]<0||24<n[vt]||24===n[vt]&&(0!==n[yt]||0!==n[wt]||0!==n[xt])?vt:n[yt]<0||59<n[yt]?yt:n[wt]<0||59<n[wt]?wt:n[xt]<0||999<n[xt]?xt:-1,f(t)._overflowDayOfYear&&(e<pt||gt<e)&&(e=gt),f(t)._overflowWeeks&&-1===e&&(e=bt),f(t)._overflowWeekday&&-1===e&&(e=_t),f(t).overflow=e),t}function he(t,e,n){return null!=t?t:null!=e?e:n}function fe(t){var e,r,i,o,a,s=[];if(!t._d){var u,c;for(u=t,c=new Date(n.now()),i=u._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()],t._w&&null==t._a[gt]&&null==t._a[mt]&&function(t){var e,n,r,i,o,a,s,u;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)o=1,a=4,n=he(e.GG,t._a[pt],Bt(Te(),1,4).year),r=he(e.W,1),((i=he(e.E,1))<1||7<i)&&(u=!0);else{o=t._locale._week.dow,a=t._locale._week.doy;var c=Bt(Te(),o,a);n=he(e.gg,t._a[pt],c.year),r=he(e.w,c.week),null!=e.d?((i=e.d)<0||6<i)&&(u=!0):null!=e.e?(i=e.e+o,(e.e<0||6<e.e)&&(u=!0)):i=o}r<1||r>Ht(n,o,a)?f(t)._overflowWeeks=!0:null!=u?f(t)._overflowWeekday=!0:(s=Vt(n,r,i,o,a),t._a[pt]=s.year,t._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(a=he(t._a[pt],i[pt]),(t._dayOfYear>Mt(a)||0===t._dayOfYear)&&(f(t)._overflowDayOfYear=!0),r=Ut(a,0,t._dayOfYear),t._a[mt]=r.getUTCMonth(),t._a[gt]=r.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[vt]&&0===t._a[yt]&&0===t._a[wt]&&0===t._a[xt]&&(t._nextDay=!0,t._a[vt]=0),t._d=(t._useUTC?Ut:function(t,e,n,r,i,o,a){var s=new Date(t,e,n,r,i,o,a);return t<100&&0<=t&&isFinite(s.getFullYear())&&s.setFullYear(t),s}).apply(null,s),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[vt]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(f(t).weekdayMismatch=!0)}}var de=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,me=/Z|[+-]\d\d(?::?\d\d)?/,ge=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ve=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ye=/^\/?Date\((\-?\d+)/i;function we(t){var e,n,r,i,o,a,s=t._i,u=de.exec(s)||pe.exec(s);if(u){for(f(t).iso=!0,e=0,n=ge.length;e<n;e++)if(ge[e][1].exec(u[1])){i=ge[e][0],r=!1!==ge[e][2];break}if(null==i)return void(t._isValid=!1);if(u[3]){for(e=0,n=ve.length;e<n;e++)if(ve[e][1].exec(u[3])){o=(u[2]||" ")+ve[e][0];break}if(null==o)return void(t._isValid=!1)}if(!r&&null!=o)return void(t._isValid=!1);if(u[4]){if(!me.exec(u[4]))return void(t._isValid=!1);a="Z"}t._f=i+(o||"")+(a||""),Me(t)}else t._isValid=!1}var xe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,be={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function _e(t){var e,n,r,i=xe.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim());if(i){var o=function(t,e,n,r,i,o){var a=[function(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}(t),Dt.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&a.push(parseInt(o,10)),a}(i[4],i[3],i[2],i[5],i[6],i[7]);if(n=o,r=t,(e=i[1])&&qt.indexOf(e)!==new Date(n[0],n[1],n[2]).getDay()&&(f(r).weekdayMismatch=!0,!(r._isValid=!1)))return;t._a=o,t._tzm=function(t,e,n){if(t)return be[t];if(e)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(i[8],i[9],i[10]),t._d=Ut.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),f(t).rfc2822=!0}else t._isValid=!1}function Me(t){if(t._f!==n.ISO_8601)if(t._f!==n.RFC_2822){t._a=[],f(t).empty=!0;var e,r,i,o,a,s,u,l,h=""+t._i,d=h.length,p=0;for(i=G(t._f,t._locale).match(z)||[],e=0;e<i.length;e++)(r=(h.match(ct(o=i[e],t))||[])[0])&&(0<(a=h.substr(0,h.indexOf(r))).length&&f(t).unusedInput.push(a),h=h.slice(h.indexOf(r)+r.length),p+=r.length),V[o]?(r?f(t).empty=!1:f(t).unusedTokens.push(o),s=o,l=t,null!=(u=r)&&c(ht,s)&&ht[s](u,l._a,l,s)):t._strict&&!r&&f(t).unusedTokens.push(o);f(t).charsLeftOver=d-p,0<h.length&&f(t).unusedInput.push(h),t._a[vt]<=12&&!0===f(t).bigHour&&0<t._a[vt]&&(f(t).bigHour=void 0),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[vt]=function(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):(null!=t.isPM&&((r=t.isPM(n))&&e<12&&(e+=12),r||12!==e||(e=0)),e)}(t._locale,t._a[vt],t._meridiem),fe(t),le(t)}else _e(t);else we(t)}function Se(t){var e,c,h,m,v=t._i,x=t._f;return t._locale=t._locale||ce(t._l),null===v||void 0===x&&""===v?p({nullInput:!0}):("string"==typeof v&&(t._i=v=t._locale.preparse(v)),w(v)?new y(le(v)):(s(v)?t._d=v:r(x)?function(t){var e,n,r,i,o;if(0===t._f.length)return f(t).invalidFormat=!0,t._d=new Date(NaN);for(i=0;i<t._f.length;i++)o=0,e=g({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],Me(e),d(e)&&(o+=f(e).charsLeftOver,o+=10*f(e).unusedTokens.length,f(e).score=o,(null==r||o<r)&&(r=o,n=e));l(t,n||e)}(t):x?Me(t):o(c=(e=t)._i)?e._d=new Date(n.now()):s(c)?e._d=new Date(c.valueOf()):"string"==typeof c?null===(m=ye.exec((h=e)._i))?(we(h),!1===h._isValid&&(delete h._isValid,_e(h),!1===h._isValid&&(delete h._isValid,n.createFromInputFallback(h)))):h._d=new Date(+m[1]):r(c)?(e._a=u(c.slice(0),function(t){return parseInt(t,10)}),fe(e)):i(c)?function(t){if(!t._d){var e=L(t._i);t._a=u([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),fe(t)}}(e):a(c)?e._d=new Date(c):n.createFromInputFallback(e),d(t)||(t._d=null),t))}function Ee(t,e,n,o,a){var s,u={};return!0!==n&&!1!==n||(o=n,n=void 0),(i(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||r(t)&&0===t.length)&&(t=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=a,u._l=n,u._i=t,u._f=e,u._strict=o,(s=new y(le(Se(u))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Te(t,e,n,r){return Ee(t,e,n,r,!1)}n.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),n.ISO_8601=function(){},n.RFC_2822=function(){};var Ae=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Te.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:p()}),Ce=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Te.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:p()});function ke(t,e){var n,i;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return Te();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}var Re=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Oe(t){var e=L(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||0,a=e.day||0,s=e.hour||0,u=e.minute||0,c=e.second||0,l=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===Et.call(Re,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var n=!1,r=0;r<Re.length;++r)if(t[Re[r]]){if(n)return!1;parseFloat(t[Re[r]])!==b(t[Re[r]])&&(n=!0)}return!0}(e),this._milliseconds=+l+1e3*c+6e4*u+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=ce(),this._bubble()}function Pe(t){return t instanceof Oe}function De(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Le(t,e){B(t,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+F(~~(t/60),2)+e+F(~~t%60,2)})}Le("Z",":"),Le("ZZ",""),ut("Z",ot),ut("ZZ",ot),ft(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ie(ot,t)});var Ne=/([\+\-]|\d\d)/gi;function Ie(t,e){var n=(e||"").match(t);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(Ne)||["-",0,0],i=60*r[1]+b(r[2]);return 0===i?0:"+"===r[0]?i:-i}function Fe(t,e){var r,i;return e._isUTC?(r=e.clone(),i=(w(t)||s(t)?t.valueOf():Te(t).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),n.updateOffset(r,!1),r):Te(t).local()}function ze(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Ue(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var je=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ve=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Be(t,e){var n,r,i,o=t,s=null;return Pe(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:a(t)?(o={},e?o[e]=t:o.milliseconds=t):(s=je.exec(t))?(n="-"===s[1]?-1:1,o={y:0,d:b(s[gt])*n,h:b(s[vt])*n,m:b(s[yt])*n,s:b(s[wt])*n,ms:b(De(1e3*s[xt]))*n}):(s=Ve.exec(t))?o={y:He(s[2],n="-"===s[1]?-1:1),M:He(s[3],n),w:He(s[4],n),d:He(s[5],n),h:He(s[6],n),m:He(s[7],n),s:He(s[8],n)}:null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=function(t,e){var n;return t.isValid()&&e.isValid()?(e=Fe(e,t),t.isBefore(e)?n=Ge(t,e):((n=Ge(e,t)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}(Te(o.from),Te(o.to)),(o={}).ms=i.milliseconds,o.M=i.months),r=new Oe(o),Pe(t)&&c(t,"_locale")&&(r._locale=t._locale),r}function He(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ge(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function qe(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(A(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),We(this,Be(n="string"==typeof n?+n:n,r),t),this}}function We(t,e,r,i){var o=e._milliseconds,a=De(e._days),s=De(e._months);t.isValid()&&(i=null==i||i,s&&Lt(t,Ct(t,"Month")+s*r),a&&kt(t,"Date",Ct(t,"Date")+a*r),o&&t._d.setTime(t._d.valueOf()+o*r),i&&n.updateOffset(t,a||s))}Be.fn=Oe.prototype,Be.invalid=function(){return Be(NaN)};var Ye=qe(1,"add"),Xe=qe(-1,"subtract");function $e(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r)))||0}function Qe(t){var e;return void 0===t?this._locale._abbr:(null!=(e=ce(t))&&(this._locale=e),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ze=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function Je(){return this._locale}function Ke(t,e){B(0,[t,t.length],0,e)}function tn(t,e,n,r,i){var o;return null==t?Bt(this,r,i).year:((o=Ht(t,r,i))<e&&(e=o),(function(t,e,n,r,i){var o=Vt(t,e,n,r,i),a=Ut(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}).call(this,t,e,n,r,i))}B(0,["gg",2],0,function(){return this.weekYear()%100}),B(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ke("gggg","weekYear"),Ke("ggggg","weekYear"),Ke("GGGG","isoWeekYear"),Ke("GGGGG","isoWeekYear"),P("weekYear","gg"),P("isoWeekYear","GG"),I("weekYear",1),I("isoWeekYear",1),ut("G",rt),ut("g",rt),ut("GG",Q,W),ut("gg",Q,W),ut("GGGG",tt,X),ut("gggg",tt,X),ut("GGGGG",et,$),ut("ggggg",et,$),dt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=b(t)}),dt(["gg","GG"],function(t,e,r,i){e[i]=n.parseTwoDigitYear(t)}),B("Q",0,"Qo","quarter"),P("quarter","Q"),I("quarter",7),ut("Q",q),ft("Q",function(t,e){e[mt]=3*(b(t)-1)}),B("D",["DD",2],"Do","date"),P("date","D"),I("date",9),ut("D",Q),ut("DD",Q,W),ut("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),ft(["D","DD"],gt),ft("Do",function(t,e){e[gt]=b(t.match(Q)[0])});var en=At("Date",!0);B("DDD",["DDDD",3],"DDDo","dayOfYear"),P("dayOfYear","DDD"),I("dayOfYear",4),ut("DDD",K),ut("DDDD",Y),ft(["DDD","DDDD"],function(t,e,n){n._dayOfYear=b(t)}),B("m",["mm",2],0,"minute"),P("minute","m"),I("minute",14),ut("m",Q),ut("mm",Q,W),ft(["m","mm"],yt);var nn=At("Minutes",!1);B("s",["ss",2],0,"second"),P("second","s"),I("second",15),ut("s",Q),ut("ss",Q,W),ft(["s","ss"],wt);var rn,on=At("Seconds",!1);for(B("S",0,0,function(){return~~(this.millisecond()/100)}),B(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,function(){return 10*this.millisecond()}),B(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),B(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),B(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),B(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),B(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),P("millisecond","ms"),I("millisecond",16),ut("S",K,q),ut("SS",K,W),ut("SSS",K,Y),rn="SSSS";rn.length<=9;rn+="S")ut(rn,nt);function an(t,e){e[xt]=b(1e3*("0."+t))}for(rn="S";rn.length<=9;rn+="S")ft(rn,an);var sn=At("Milliseconds",!1);B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var un=y.prototype;function cn(t){return t}un.add=Ye,un.calendar=function(t,e){var r=t||Te(),i=Fe(r,this).startOf("day"),o=n.calendarFormat(this,i)||"sameElse",a=e&&(C(e[o])?e[o].call(this,r):e[o]);return this.format(a||this.localeData().calendar(o,this,Te(r)))},un.clone=function(){return new y(this)},un.diff=function(t,e,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=Fe(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=D(e)){case"year":o=$e(this,r)/12;break;case"month":o=$e(this,r);break;case"quarter":o=$e(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:x(o)},un.endOf=function(t){return void 0===(t=D(t))||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))},un.format=function(t){t||(t=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var e=H(this,t);return this.localeData().postformat(e)},un.from=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||Te(t).isValid())?Be({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},un.fromNow=function(t){return this.from(Te(),t)},un.to=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||Te(t).isValid())?Be({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},un.toNow=function(t){return this.to(Te(),t)},un.get=function(t){return C(this[t=D(t)])?this[t]():this},un.invalidAt=function(){return f(this).overflow},un.isAfter=function(t,e){var n=w(t)?t:Te(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=D(o(e)?"millisecond":e))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},un.isBefore=function(t,e){var n=w(t)?t:Te(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=D(o(e)?"millisecond":e))?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},un.isBetween=function(t,e,n,r){return("("===(r=r||"()")[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===r[1]?this.isBefore(e,n):!this.isAfter(e,n))},un.isSame=function(t,e){var n,r=w(t)?t:Te(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=D(e||"millisecond"))?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},un.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},un.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},un.isValid=function(){return d(this)},un.lang=Ze,un.locale=Qe,un.localeData=Je,un.max=Ce,un.min=Ae,un.parsingFlags=function(){return l({},f(this))},un.set=function(t,e){if("object"==typeof t)for(var n=function(t){var e=[];for(var n in t)e.push({unit:n,priority:N[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}(t=L(t)),r=0;r<n.length;r++)this[n[r].unit](t[n[r].unit]);else if(C(this[t=D(t)]))return this[t](e);return this},un.startOf=function(t){switch(t=D(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},un.subtract=Xe,un.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},un.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},un.toDate=function(){return new Date(this.valueOf())},un.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||9999<n.year()?H(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):C(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(n,"Z")):H(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},un.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+e+'[")]')},un.toJSON=function(){return this.isValid()?this.toISOString():null},un.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},un.unix=function(){return Math.floor(this.valueOf()/1e3)},un.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},un.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},un.year=Tt,un.isLeapYear=function(){return St(this.year())},un.weekYear=function(t){return tn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},un.isoWeekYear=function(t){return tn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},un.quarter=un.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},un.month=Nt,un.daysInMonth=function(){return Rt(this.year(),this.month())},un.week=un.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},un.isoWeek=un.isoWeeks=function(t){var e=Bt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},un.weeksInYear=function(){var t=this.localeData()._week;return Ht(this.year(),t.dow,t.doy)},un.isoWeeksInYear=function(){return Ht(this.year(),1,4)},un.date=en,un.day=un.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e,n,r=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(e=t,n=this.localeData(),t="string"!=typeof e?e:isNaN(e)?"number"==typeof(e=n.weekdaysParse(e))?e:null:parseInt(e,10),this.add(t-r,"d")):r},un.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},un.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=(n=t,r=this.localeData(),"string"==typeof n?r.weekdaysParse(n)%7||7:isNaN(n)?null:n);return this.day(this.day()%7?e:e-7)}return this.day()||7;var n,r},un.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},un.hour=un.hours=ee,un.minute=un.minutes=nn,un.second=un.seconds=on,un.millisecond=un.milliseconds=sn,un.utcOffset=function(t,e,r){var i,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Ie(ot,t)))return this}else Math.abs(t)<16&&!r&&(t*=60);return!this._isUTC&&e&&(i=ze(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==t&&(!e||this._changeInProgress?We(this,Be(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:ze(this)},un.utc=function(t){return this.utcOffset(0,t)},un.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(ze(this),"m")),this},un.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Ie(it,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},un.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Te(t).utcOffset():0,(this.utcOffset()-t)%60==0)},un.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},un.isLocal=function(){return!!this.isValid()&&!this._isUTC},un.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},un.isUtc=Ue,un.isUTC=Ue,un.zoneAbbr=function(){return this._isUTC?"UTC":""},un.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},un.dates=S("dates accessor is deprecated. Use date instead.",en),un.months=S("months accessor is deprecated. Use month instead",Nt),un.years=S("years accessor is deprecated. Use year instead",Tt),un.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),un.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var t={};if(g(t,this),(t=Se(t))._a){var e=t._isUTC?h(t._a):Te(t._a);this._isDSTShifted=this.isValid()&&0<_(t._a,e.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var ln=R.prototype;function hn(t,e,n,r){var i=ce(),o=h().set(r,e);return i[n](o,t)}function fn(t,e,n){if(a(t)&&(e=t,t=void 0),t=t||"",null!=e)return hn(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=hn(t,r,n,"month");return i}function dn(t,e,n,r){"boolean"==typeof t?a(e)&&(n=e,e=void 0):(e=t,t=!1,a(n=e)&&(n=e,e=void 0)),e=e||"";var i,o=ce(),s=t?o._week.dow:0;if(null!=n)return hn(e,(n+s)%7,r,"day");var u=[];for(i=0;i<7;i++)u[i]=hn(e,(i+s)%7,r,"day");return u}ln.calendar=function(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return C(r)?r.call(e,n):r},ln.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])},ln.invalidDate=function(){return this._invalidDate},ln.ordinal=function(t){return this._ordinal.replace("%d",t)},ln.preparse=cn,ln.postformat=cn,ln.relativeTime=function(t,e,n,r){var i=this._relativeTime[n];return C(i)?i(t,e,n,r):i.replace(/%d/i,t)},ln.pastFuture=function(t,e){var n=this._relativeTime[0<t?"future":"past"];return C(n)?n(e):n.replace(/%s/i,e)},ln.set=function(t){var e,n;for(n in t)C(e=t[n])?this[n]=e:this["_"+n]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},ln.months=function(t,e){return t?r(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Ot).test(e)?"format":"standalone"][t.month()]:r(this._months)?this._months:this._months.standalone},ln.monthsShort=function(t,e){return t?r(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Ot.test(e)?"format":"standalone"][t.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},ln.monthsParse=function(t,e,n){var r,i,o;if(this._monthsParseExact)return(function(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=h([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=Et.call(this._shortMonthsParse,a))?i:null:-1!==(i=Et.call(this._longMonthsParse,a))?i:null:"MMM"===e?-1!==(i=Et.call(this._shortMonthsParse,a))?i:-1!==(i=Et.call(this._longMonthsParse,a))?i:null:-1!==(i=Et.call(this._longMonthsParse,a))?i:-1!==(i=Et.call(this._shortMonthsParse,a))?i:null}).call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=h([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},ln.monthsRegex=function(t){return this._monthsParseExact?(c(this,"_monthsRegex")||zt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Ft),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},ln.monthsShortRegex=function(t){return this._monthsParseExact?(c(this,"_monthsRegex")||zt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=It),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},ln.week=function(t){return Bt(t,this._week.dow,this._week.doy).week},ln.firstDayOfYear=function(){return this._week.doy},ln.firstDayOfWeek=function(){return this._week.dow},ln.weekdays=function(t,e){return t?r(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:r(this._weekdays)?this._weekdays:this._weekdays.standalone},ln.weekdaysMin=function(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin},ln.weekdaysShort=function(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort},ln.weekdaysParse=function(t,e,n){var r,i,o;if(this._weekdaysParseExact)return(function(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=h([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=Et.call(this._weekdaysParse,a))?i:null:"ddd"===e?-1!==(i=Et.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Et.call(this._minWeekdaysParse,a))?i:null:"dddd"===e?-1!==(i=Et.call(this._weekdaysParse,a))?i:-1!==(i=Et.call(this._shortWeekdaysParse,a))?i:-1!==(i=Et.call(this._minWeekdaysParse,a))?i:null:"ddd"===e?-1!==(i=Et.call(this._shortWeekdaysParse,a))?i:-1!==(i=Et.call(this._weekdaysParse,a))?i:-1!==(i=Et.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Et.call(this._minWeekdaysParse,a))?i:-1!==(i=Et.call(this._weekdaysParse,a))?i:-1!==(i=Et.call(this._shortWeekdaysParse,a))?i:null}).call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=h([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}},ln.weekdaysRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Qt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Yt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},ln.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Qt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Xt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},ln.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Qt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=$t),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},ln.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},ln.meridiem=function(t,e,n){return 11<t?n?"pm":"PM":n?"am":"AM"},se("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===b(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),n.lang=S("moment.lang is deprecated. Use moment.locale instead.",se),n.langData=S("moment.langData is deprecated. Use moment.localeData instead.",ce);var pn=Math.abs;function mn(t,e,n,r){var i=Be(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function gn(t){return t<0?Math.floor(t):Math.ceil(t)}function vn(t){return 4800*t/146097}function yn(t){return 146097*t/4800}function wn(t){return function(){return this.as(t)}}var xn=wn("ms"),bn=wn("s"),_n=wn("m"),Mn=wn("h"),Sn=wn("d"),En=wn("w"),Tn=wn("M"),An=wn("y");function Cn(t){return function(){return this.isValid()?this._data[t]:NaN}}var kn=Cn("milliseconds"),Rn=Cn("seconds"),On=Cn("minutes"),Pn=Cn("hours"),Dn=Cn("days"),Ln=Cn("months"),Nn=Cn("years"),In=Math.round,Fn={ss:44,s:45,m:45,h:22,d:26,M:11},zn=Math.abs;function Un(t){return(0<t)-(t<0)||+t}function jn(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n=zn(this._milliseconds)/1e3,r=zn(this._days),i=zn(this._months);e=x((t=x(n/60))/60),n%=60,t%=60;var o=x(i/12),a=i%=12,s=r,u=e,c=t,l=n?n.toFixed(3).replace(/\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var f=h<0?"-":"",d=Un(this._months)!==Un(h)?"-":"",p=Un(this._days)!==Un(h)?"-":"",m=Un(this._milliseconds)!==Un(h)?"-":"";return f+"P"+(o?d+o+"Y":"")+(a?d+a+"M":"")+(s?p+s+"D":"")+(u||c||l?"T":"")+(u?m+u+"H":"")+(c?m+c+"M":"")+(l?m+l+"S":"")}var Vn=Oe.prototype;return Vn.isValid=function(){return this._isValid},Vn.abs=function(){var t=this._data;return this._milliseconds=pn(this._milliseconds),this._days=pn(this._days),this._months=pn(this._months),t.milliseconds=pn(t.milliseconds),t.seconds=pn(t.seconds),t.minutes=pn(t.minutes),t.hours=pn(t.hours),t.months=pn(t.months),t.years=pn(t.years),this},Vn.add=function(t,e){return mn(this,t,e,1)},Vn.subtract=function(t,e){return mn(this,t,e,-1)},Vn.as=function(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=D(t))||"year"===t)return n=this._months+vn(e=this._days+r/864e5),"month"===t?n:n/12;switch(e=this._days+Math.round(yn(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}},Vn.asMilliseconds=xn,Vn.asSeconds=bn,Vn.asMinutes=_n,Vn.asHours=Mn,Vn.asDays=Sn,Vn.asWeeks=En,Vn.asMonths=Tn,Vn.asYears=An,Vn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12):NaN},Vn._bubble=function(){var t,e,n,r,i,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return 0<=o&&0<=a&&0<=s||o<=0&&a<=0&&s<=0||(o+=864e5*gn(yn(s)+a),s=a=0),u.milliseconds=o%1e3,t=x(o/1e3),u.seconds=t%60,e=x(t/60),u.minutes=e%60,n=x(e/60),u.hours=n%24,s+=i=x(vn(a+=x(n/24))),a-=gn(yn(i)),r=x(s/12),s%=12,u.days=a,u.months=s,u.years=r,this},Vn.clone=function(){return Be(this)},Vn.get=function(t){return t=D(t),this.isValid()?this[t+"s"]():NaN},Vn.milliseconds=kn,Vn.seconds=Rn,Vn.minutes=On,Vn.hours=Pn,Vn.days=Dn,Vn.weeks=function(){return x(this.days()/7)},Vn.months=Ln,Vn.years=Nn,Vn.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e,n,r,i,o,a,s,u,c,l,h=this.localeData(),f=(e=!t,n=h,r=Be(this).abs(),i=In(r.as("s")),o=In(r.as("m")),a=In(r.as("h")),s=In(r.as("d")),u=In(r.as("M")),c=In(r.as("y")),(l=i<=Fn.ss&&["s",i]||i<Fn.s&&["ss",i]||o<=1&&["m"]||o<Fn.m&&["mm",o]||a<=1&&["h"]||a<Fn.h&&["hh",a]||s<=1&&["d"]||s<Fn.d&&["dd",s]||u<=1&&["M"]||u<Fn.M&&["MM",u]||c<=1&&["y"]||["yy",c])[2]=e,l[3]=0<+this,l[4]=n,(function(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}).apply(null,l));return t&&(f=h.pastFuture(+this,f)),h.postformat(f)},Vn.toISOString=jn,Vn.toString=jn,Vn.toJSON=jn,Vn.locale=Qe,Vn.localeData=Je,Vn.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",jn),Vn.lang=Ze,B("X",0,0,"unix"),B("x",0,0,"valueOf"),ut("x",rt),ut("X",/[+-]?\d+(\.\d{1,3})?/),ft("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),ft("x",function(t,e,n){n._d=new Date(b(t))}),n.version="2.22.0",t=Te,n.fn=un,n.min=function(){return ke("isBefore",[].slice.call(arguments,0))},n.max=function(){return ke("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=h,n.unix=function(t){return Te(1e3*t)},n.months=function(t,e){return fn(t,e,"months")},n.isDate=s,n.locale=se,n.invalid=p,n.duration=Be,n.isMoment=w,n.weekdays=function(t,e,n){return dn(t,e,n,"weekdays")},n.parseZone=function(){return Te.apply(null,arguments).parseZone()},n.localeData=ce,n.isDuration=Pe,n.monthsShort=function(t,e){return fn(t,e,"monthsShort")},n.weekdaysMin=function(t,e,n){return dn(t,e,n,"weekdaysMin")},n.defineLocale=ue,n.updateLocale=function(t,e){if(null!=e){var n,r,i=ne;null!=(r=ae(t))&&(i=r._config),(n=new R(e=k(i,e))).parentLocale=re[t],re[t]=n,se(t)}else null!=re[t]&&(null!=re[t].parentLocale?re[t]=re[t].parentLocale:null!=re[t]&&delete re[t]);return re[t]},n.locales=function(){return E(re)},n.weekdaysShort=function(t,e,n){return dn(t,e,n,"weekdaysShort")},n.normalizeUnits=D,n.relativeTimeRounding=function(t){return void 0===t?In:"function"==typeof t&&(In=t,!0)},n.relativeTimeThreshold=function(t,e){return void 0!==Fn[t]&&(void 0===e?Fn[t]:(Fn[t]=e,"s"===t&&(Fn.ss=e-1),!0))},n.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},n.prototype=un,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},n}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.THREE={})}(this,function(t){function e(){}function n(t,e){this.x=t||0,this.y=e||0}function r(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function i(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}function o(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function a(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function s(t,e,r,i,o,u,c,l,h,f){Object.defineProperty(this,"id",{value:Ei++}),this.uuid=Si.generateUUID(),this.name="",this.image=void 0!==t?t:s.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:s.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:1001,this.wrapT=void 0!==i?i:1001,this.magFilter=void 0!==o?o:1006,this.minFilter=void 0!==u?u:1008,this.anisotropy=void 0!==h?h:1,this.format=void 0!==c?c:1023,this.type=void 0!==l?l:1009,this.offset=new n(0,0),this.repeat=new n(1,1),this.center=new n(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new a,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==f?f:3e3,this.version=0,this.onUpdate=null}function u(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}function c(t,e,n){this.width=t,this.height=e,this.scissor=new u(0,0,t,e),this.scissorTest=!1,this.viewport=new u(0,0,t,e),void 0===(n=n||{}).minFilter&&(n.minFilter=1006),this.texture=new s(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function l(t,e,n){c.call(this,t,e,n),this.activeMipMapLevel=this.activeCubeFace=0}function h(t,e,n,r,i,o,a,u,c,l,h,f){s.call(this,null,o,a,u,c,l,r,i,h,f),this.image={data:t,width:e,height:n},this.magFilter=void 0!==c?c:1003,this.minFilter=void 0!==l?l:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function f(t,e){this.min=void 0!==t?t:new o(1/0,1/0,1/0),this.max=void 0!==e?e:new o(-1/0,-1/0,-1/0)}function d(t,e){this.center=void 0!==t?t:new o,this.radius=void 0!==e?e:0}function p(t,e){this.normal=void 0!==t?t:new o(1,0,0),this.constant=void 0!==e?e:0}function m(t,e,n,r,i,o){this.planes=[void 0!==t?t:new p,void 0!==e?e:new p,void 0!==n?n:new p,void 0!==r?r:new p,void 0!==i?i:new p,void 0!==o?o:new p]}function g(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function v(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||v.DefaultOrder}function y(){this.mask=1}function w(){Object.defineProperty(this,"id",{value:Oi++}),this.uuid=Si.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=w.DefaultUp.clone();var t=new o,e=new v,n=new i,s=new o(1,1,1);e.onChange(function(){n.setFromEuler(e,!1)}),n.onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:s},modelViewMatrix:{value:new r},normalMatrix:{value:new a}}),this.matrix=new r,this.matrixWorld=new r,this.matrixAutoUpdate=w.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new y,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function x(){w.call(this),this.type="Camera",this.matrixWorldInverse=new r,this.projectionMatrix=new r}function b(t,e,n,r,i,o){x.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function _(t,e,n,r,i,a){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new o,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new g,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0}function M(){Object.defineProperty(this,"id",{value:Pi+=2}),this.uuid=Si.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function S(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function E(t,e,n){S.call(this,new Int8Array(t),e,n)}function T(t,e,n){S.call(this,new Uint8Array(t),e,n)}function A(t,e,n){S.call(this,new Uint8ClampedArray(t),e,n)}function C(t,e,n){S.call(this,new Int16Array(t),e,n)}function k(t,e,n){S.call(this,new Uint16Array(t),e,n)}function R(t,e,n){S.call(this,new Int32Array(t),e,n)}function O(t,e,n){S.call(this,new Uint32Array(t),e,n)}function P(t,e,n){S.call(this,new Float32Array(t),e,n)}function D(t,e,n){S.call(this,new Float64Array(t),e,n)}function L(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function N(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}function I(){Object.defineProperty(this,"id",{value:Di+=2}),this.uuid=Si.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0}}function F(t,e,n,r,i,o){M.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new z(t,e,n,r,i,o)),this.mergeVertices()}function z(t,e,n,r,i,a){function s(t,e,n,r,i,a,s,m,g,v,y){var w=a/g,x=s/v,b=a/2,_=s/2,M=m/2;s=g+1;var S,E,T=v+1,A=a=0,C=new o;for(E=0;E<T;E++){var k=E*x-_;for(S=0;S<s;S++)C[t]=(S*w-b)*r,C[e]=k*i,C[n]=M,l.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[n]=0<m?1:-1,h.push(C.x,C.y,C.z),f.push(S/g),f.push(1-E/v),a+=1}for(E=0;E<v;E++)for(S=0;S<g;S++)e=d+(S+1)+s*(E+1),c.push(d+S+s*E,t=d+S+s*(E+1),n=d+(S+1)+s*E),c.push(t,e,n),A+=6;u.addGroup(p,A,y),p+=A,d+=a}I.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};var u=this;t=t||1,e=e||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1;var c=[],l=[],h=[],f=[],d=0,p=0;s("z","y","x",-1,-1,n,e,t,a=Math.floor(a)||1,i,0),s("z","y","x",1,-1,n,e,-t,a,i,1),s("x","z","y",1,1,t,n,e,r,a,2),s("x","z","y",1,-1,t,n,-e,r,a,3),s("x","y","z",1,-1,t,e,n,r,i,4),s("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(c),this.addAttribute("position",new P(l,3)),this.addAttribute("normal",new P(h,3)),this.addAttribute("uv",new P(f,2))}function U(t,e,n,r){M.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new j(t,e,n,r)),this.mergeVertices()}function j(t,e,n,r){I.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};var i=(t=t||1)/2,o=(e=e||1)/2,a=(n=Math.floor(n)||1)+1,s=(r=Math.floor(r)||1)+1,u=t/n,c=e/r,l=[],h=[],f=[],d=[];for(t=0;t<s;t++){var p=t*c-o;for(e=0;e<a;e++)h.push(e*u-i,-p,0),f.push(0,0,1),d.push(e/n),d.push(1-t/r)}for(t=0;t<r;t++)for(e=0;e<n;e++)o=e+1+a*(t+1),l.push(e+a*t,i=e+a*(t+1),s=e+1+a*t),l.push(i,o,s);this.setIndex(l),this.addAttribute("position",new P(h,3)),this.addAttribute("normal",new P(f,3)),this.addAttribute("uv",new P(d,2))}function V(){Object.defineProperty(this,"id",{value:Li++}),this.uuid=Si.generateUUID(),this.name="",this.type="Material",this.lights=this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function B(t){V.call(this),this.type="MeshBasicMaterial",this.color=new g(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.lights=this.morphTargets=this.skinning=!1,this.setValues(t)}function H(t){V.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function G(t,e){this.origin=void 0!==t?t:new o,this.direction=void 0!==e?e:new o}function q(t,e){this.start=void 0!==t?t:new o,this.end=void 0!==e?e:new o}function W(t,e,n){this.a=void 0!==t?t:new o,this.b=void 0!==e?e:new o,this.c=void 0!==n?n:new o}function Y(t,e){w.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new I,this.material=void 0!==e?e:new B({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function X(t,e,n,r){function i(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,r)}var o,a,s,u=new g(0),c=0;return{getClearColor:function(){return u},setClearColor:function(t,e){u.set(t),i(u,c=void 0!==e?e:1)},getClearAlpha:function(){return c},setClearAlpha:function(t){i(u,c=t)},render:function(e,r,l,h){null===(r=r.background)?i(u,c):r&&r.isColor&&(i(r,1),h=!0),(t.autoClear||h)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),r&&r.isCubeTexture?(void 0===s&&((s=new Y(new z(1,1,1),new H({uniforms:Ri.cube.uniforms,vertexShader:Ri.cube.vertexShader,fragmentShader:Ri.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(s.geometry)),s.material.uniforms.tCube.value=r,e.push(s,s.geometry,s.material,0,null)):r&&r.isTexture&&(void 0===o&&(o=new b(-1,1,1,-1,0,1),a=new Y(new j(2,2),new B({depthTest:!1,depthWrite:!1,fog:!1})),n.update(a.geometry)),a.material.map=r,t.renderBufferDirect(o,null,a.geometry,a.material,a,null))}}}function $(){function t(){l.value!==r&&(l.value=r,l.needsUpdate=0<i),n.numPlanes=i,n.numIntersection=0}function e(t,e,r,i){var o=null!==t?t.length:0,a=null;if(0!==o){if(a=l.value,!0!==i||null===a)for(i=r+4*o,c.getNormalMatrix(e=e.matrixWorldInverse),(null===a||a.length<i)&&(a=new Float32Array(i)),i=0;i!==o;++i,r+=4)u.copy(t[i]).applyMatrix4(e,c),u.normal.toArray(a,r),a[r+3]=u.constant;l.value=a,l.needsUpdate=!0}return n.numPlanes=o,a}var n=this,r=null,i=0,o=!1,s=!1,u=new p,c=new a,l={value:null,needsUpdate:!1};this.uniform=l,this.numIntersection=this.numPlanes=0,this.init=function(t,n,a){var s=0!==t.length||n||0!==i||o;return o=n,r=e(t,a,0),i=t.length,s},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(n,a,u,c,h,f){if(!o||null===n||0===n.length||s&&!u)s?e(null):t();else{var d=4*(u=s?0:i),p=h.clippingState||null;for(l.value=p,p=e(n,c,d,f),n=0;n!==d;++n)p[n]=r[n];h.clippingState=p,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=u}}}function Q(t,e,n){function r(t){var a=i[(t=t.target).id];for(var s in null!==a.index&&e.remove(a.index),a.attributes)e.remove(a.attributes[s]);t.removeEventListener("dispose",r),delete i[t.id],(s=o[t.id])&&(e.remove(s),delete o[t.id]),(s=o[a.id])&&(e.remove(s),delete o[a.id]),n.memory.geometries--}var i={},o={};return{get:function(t,e){var o=i[e.id];return o||(e.addEventListener("dispose",r),e.isBufferGeometry?o=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new I).setFromObject(t)),o=e._bufferGeometry),i[e.id]=o,n.memory.geometries++,o)},update:function(n){var r=n.index,i=n.attributes;for(var o in null!==r&&e.update(r,t.ELEMENT_ARRAY_BUFFER),i)e.update(i[o],t.ARRAY_BUFFER);for(o in n=n.morphAttributes){i=0;for(var a=(r=n[o]).length;i<a;i++)e.update(r[i],t.ARRAY_BUFFER)}},getWireframeAttribute:function(n){var r=o[n.id];if(r)return r;r=[];var i=n.index,a=n.attributes;if(null!==i){a=0;for(var s=(i=i.array).length;a<s;a+=3){var u=i[a+0],c=i[a+1],l=i[a+2];r.push(u,c,c,l,l,u)}}else for(i=a.position.array,a=0,s=i.length/3-1;a<s;a+=3)r.push(u=a+0,c=a+1,c,l=a+2,l,u);return r=new(65535<N(r)?O:k)(r,1),e.update(r,t.ELEMENT_ARRAY_BUFFER),o[n.id]=r}}}function Z(t,e){return Math.abs(e[1])-Math.abs(t[1])}function J(t,e,n,r,i,o,a,u,c,l){s.call(this,t=void 0!==t?t:[],void 0!==e?e:301,n,r,i,o,a,u,c,l),this.flipY=!1}function K(t,e,n){var r=t[0];if(0>=r||0<r)return t;var i=e*n,o=Fi[i];if(void 0===o&&(o=new Float32Array(i),Fi[i]=o),0!==e)for(r.toArray(o,0),r=1,i=0;r!==e;++r)t[r].toArray(o,i+=n);return o}function tt(t,e){var n=zi[e];void 0===n&&(n=new Int32Array(e),zi[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocTextureUnit();return n}function et(t,e){t.uniform1f(this.addr,e)}function nt(t,e){t.uniform1i(this.addr,e)}function rt(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function it(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function ot(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function at(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function st(t,e){void 0===e.elements?t.uniformMatrix3fv(this.addr,!1,e):(ji.set(e.elements),t.uniformMatrix3fv(this.addr,!1,ji))}function ut(t,e){void 0===e.elements?t.uniformMatrix4fv(this.addr,!1,e):(Ui.set(e.elements),t.uniformMatrix4fv(this.addr,!1,Ui))}function ct(t,e,n){var r=n.allocTextureUnit();t.uniform1i(this.addr,r),n.setTexture2D(e||Ni,r)}function lt(t,e,n){var r=n.allocTextureUnit();t.uniform1i(this.addr,r),n.setTextureCube(e||Ii,r)}function ht(t,e){t.uniform2iv(this.addr,e)}function ft(t,e){t.uniform3iv(this.addr,e)}function dt(t,e){t.uniform4iv(this.addr,e)}function pt(t,e){t.uniform1fv(this.addr,e)}function mt(t,e){t.uniform1iv(this.addr,e)}function gt(t,e){t.uniform2fv(this.addr,K(e,this.size,2))}function vt(t,e){t.uniform3fv(this.addr,K(e,this.size,3))}function yt(t,e){t.uniform4fv(this.addr,K(e,this.size,4))}function wt(t,e){t.uniformMatrix2fv(this.addr,!1,K(e,this.size,4))}function xt(t,e){t.uniformMatrix3fv(this.addr,!1,K(e,this.size,9))}function bt(t,e){t.uniformMatrix4fv(this.addr,!1,K(e,this.size,16))}function _t(t,e,n){var r=e.length,i=tt(n,r);for(t.uniform1iv(this.addr,i),t=0;t!==r;++t)n.setTexture2D(e[t]||Ni,i[t])}function Mt(t,e,n){var r=e.length,i=tt(n,r);for(t.uniform1iv(this.addr,i),t=0;t!==r;++t)n.setTextureCube(e[t]||Ii,i[t])}function St(t,e,n){this.id=t,this.addr=n,this.setValue=function(t){switch(e.type){case 5126:return et;case 35664:return rt;case 35665:return it;case 35666:return ot;case 35674:return at;case 35675:return st;case 35676:return ut;case 35678:case 36198:return ct;case 35680:return lt;case 5124:case 35670:return nt;case 35667:case 35671:return ht;case 35668:case 35672:return ft;case 35669:case 35673:return dt}}()}function Et(t,e,n){this.id=t,this.addr=n,this.size=e.size,this.setValue=function(t){switch(e.type){case 5126:return pt;case 35664:return gt;case 35665:return vt;case 35666:return yt;case 35674:return wt;case 35675:return xt;case 35676:return bt;case 35678:return _t;case 35680:return Mt;case 5124:case 35670:return mt;case 35667:case 35671:return ht;case 35668:case 35672:return ft;case 35669:case 35673:return dt}}()}function Tt(t){this.id=t,this.seq=[],this.map={}}function At(t,e,n){this.seq=[],this.map={},this.renderer=n,n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(var r=0;r<n;++r){var i=t.getActiveUniform(e,r),o=t.getUniformLocation(e,i.name),a=this,s=i.name,u=s.length;for(Vi.lastIndex=0;;){var c=Vi.exec(s),l=c[1],h=c[3];if("]"===c[2]&&(l|=0),void 0===h||"["===h&&Vi.lastIndex+2===u){s=a,i=void 0===h?new St(l,i,o):new Et(l,i,o),s.seq.push(i),s.map[i.id]=i;break}void 0===(h=a.map[l])&&(h=new Tt(l),(l=a).seq.push(a=h),l.map[a.id]=a),a=h}}}function Ct(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),!1===t.getShaderParameter(r,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(r),function(t){t=t.split("\n");for(var e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(n)),r}function kt(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+t)}}function Rt(t,e){return"vec4 "+t+"( vec4 value ) { return "+(e=kt(e))[0]+"ToLinear"+e[1]+"; }"}function Ot(t){return""!==t}function Pt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Dt(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function Lt(t){return t.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(t,e){if(void 0===(t=Ti[e]))throw Error("Can not resolve #include <"+e+">");return Lt(t)})}function Nt(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(t,e,n,r){for(t="",e=parseInt(e);e<parseInt(n);e++)t+=r.replace(/\[ i \]/g,"[ "+e+" ]");return t})}function It(t,e,n,r,i,o){var a=t.context,s=r.defines,u=i.vertexShader,c=i.fragmentShader,l="SHADOWMAP_TYPE_BASIC";1===o.shadowMapType?l="SHADOWMAP_TYPE_PCF":2===o.shadowMapType&&(l="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case 301:case 302:h="ENVMAP_TYPE_CUBE";break;case 306:case 307:h="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:h="ENVMAP_TYPE_EQUIREC";break;case 305:h="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case 302:case 304:f="ENVMAP_MODE_REFRACTION"}switch(r.combine){case 0:d="ENVMAP_BLENDING_MULTIPLY";break;case 1:d="ENVMAP_BLENDING_MIX";break;case 2:d="ENVMAP_BLENDING_ADD"}}var p,m,g=0<t.gammaFactor?t.gammaFactor:1,v=function(t,e,n){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ot).join("\n")}(r.extensions,o,e),y=function(t){var e,n=[];for(e in t){var r=t[e];!1!==r&&n.push("#define "+e+" "+r)}return n.join("\n")}(s),w=a.createProgram();return r.isRawShaderMaterial?(0<(s=[y].filter(Ot).join("\n")).length&&(s+="\n"),0<(e=[v,y].filter(Ot).join("\n")).length&&(e+="\n")):(s=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,y,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+g,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+l:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ot).join("\n"),e=[v,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,y,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+g,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+f:"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+l:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&e.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==o.toneMapping?"#define TONE_MAPPING":"",0!==o.toneMapping?Ti.tonemapping_pars_fragment:"",0!==o.toneMapping?function(t,e){switch(e){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="Uncharted2";break;case 4:e="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+e)}return"vec3 toneMapping( vec3 color ) { return "+e+"ToneMapping( color ); }"}(0,o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Ti.encodings_pars_fragment:"",o.mapEncoding?Rt("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?Rt("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Rt("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?function(t,e){return"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+(e=kt(e))[0]+e[1]+"; }"}(0,o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Ot).join("\n")),u=Dt(u=Pt(u=Lt(u),o),o),c=Dt(c=Pt(c=Lt(c),o),o),u=Nt(u),c=e+(c=Nt(c)),u=Ct(a,a.VERTEX_SHADER,s+u),c=Ct(a,a.FRAGMENT_SHADER,c),a.attachShader(w,u),a.attachShader(w,c),void 0!==r.index0AttributeName?a.bindAttribLocation(w,0,r.index0AttributeName):!0===o.morphTargets&&a.bindAttribLocation(w,0,"position"),a.linkProgram(w),o=a.getProgramInfoLog(w).trim(),i=a.getShaderInfoLog(u).trim(),l=a.getShaderInfoLog(c).trim(),f=h=!0,!1===a.getProgramParameter(w,a.LINK_STATUS)?(h=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(w,a.VALIDATE_STATUS),"gl.getProgramInfoLog",o,i,l)):""!==o?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",o):""!==i&&""!==l||(f=!1),f&&(this.diagnostics={runnable:h,material:r,programLog:o,vertexShader:{log:i,prefix:s},fragmentShader:{log:l,prefix:e}}),a.deleteShader(u),a.deleteShader(c),this.getUniforms=function(){return void 0===p&&(p=new At(a,w,t)),p},this.getAttributes=function(){if(void 0===m){for(var t={},e=a.getProgramParameter(w,a.ACTIVE_ATTRIBUTES),n=0;n<e;n++){var r=a.getActiveAttrib(w,n).name;t[r]=a.getAttribLocation(w,r)}m=t}return m},this.destroy=function(){a.deleteProgram(w),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Bi++,this.code=n,this.usedTimes=1,this.program=w,this.vertexShader=u,this.fragmentShader=c,this}function Ft(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function zt(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Ut(){var t={};return{get:function(e,i){return void 0===(i=t[e=e.id+","+i.id])&&(i=new function(){var t=new function(){var t=new function(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];switch(e.type){case"DirectionalLight":var r={direction:new o,color:new g,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"SpotLight":r={position:new o,direction:new o,color:new g,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":r={position:new o,color:new g,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new o,skyColor:new g,groundColor:new g};break;case"RectAreaLight":r={color:new g,position:new o,halfWidth:new o,halfHeight:new o}}return t[e.id]=r}}},e={id:Hi++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=new o,a=new r,s=new r;return{setup:function(n,r,o){var u=0,c=0,l=0,h=0,f=0,d=0,p=0,m=0;o=o.matrixWorldInverse;for(var g=0,v=n.length;g<v;g++){var y=n[g],w=y.color,x=y.intensity,b=y.distance,_=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)u+=w.r*x,c+=w.g*x,l+=w.b*x;else if(y.isDirectionalLight){var M=t.get(y);M.color.copy(y.color).multiplyScalar(y.intensity),M.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),M.direction.sub(i),M.direction.transformDirection(o),(M.shadow=y.castShadow)&&(M.shadowBias=(w=y.shadow).bias,M.shadowRadius=w.radius,M.shadowMapSize=w.mapSize),e.directionalShadowMap[h]=_,e.directionalShadowMatrix[h]=y.shadow.matrix,e.directional[h]=M,h++}else y.isSpotLight?((M=t.get(y)).position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(o),M.color.copy(w).multiplyScalar(x),M.distance=b,M.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),M.direction.sub(i),M.direction.transformDirection(o),M.coneCos=Math.cos(y.angle),M.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),M.decay=0===y.distance?0:y.decay,(M.shadow=y.castShadow)&&(M.shadowBias=(w=y.shadow).bias,M.shadowRadius=w.radius,M.shadowMapSize=w.mapSize),e.spotShadowMap[d]=_,e.spotShadowMatrix[d]=y.shadow.matrix,e.spot[d]=M,d++):y.isRectAreaLight?((M=t.get(y)).color.copy(w).multiplyScalar(x),M.position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(o),s.identity(),a.copy(y.matrixWorld),a.premultiply(o),s.extractRotation(a),M.halfWidth.set(.5*y.width,0,0),M.halfHeight.set(0,.5*y.height,0),M.halfWidth.applyMatrix4(s),M.halfHeight.applyMatrix4(s),e.rectArea[p]=M,p++):y.isPointLight?((M=t.get(y)).position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(o),M.color.copy(y.color).multiplyScalar(y.intensity),M.distance=y.distance,M.decay=0===y.distance?0:y.decay,(M.shadow=y.castShadow)&&(M.shadowBias=(w=y.shadow).bias,M.shadowRadius=w.radius,M.shadowMapSize=w.mapSize,M.shadowCameraNear=w.camera.near,M.shadowCameraFar=w.camera.far),e.pointShadowMap[f]=_,e.pointShadowMatrix[f]=y.shadow.matrix,e.point[f]=M,f++):y.isHemisphereLight&&((M=t.get(y)).direction.setFromMatrixPosition(y.matrixWorld),M.direction.transformDirection(o),M.direction.normalize(),M.skyColor.copy(y.color).multiplyScalar(x),M.groundColor.copy(y.groundColor).multiplyScalar(x),e.hemi[m]=M,m++)}e.ambient[0]=u,e.ambient[1]=c,e.ambient[2]=l,e.directional.length=h,e.spot.length=d,e.rectArea.length=p,e.point.length=f,e.hemi.length=m,e.hash=e.id+","+h+","+f+","+d+","+p+","+m+","+r.length},state:e}},e=[],i=[],a=[];return{init:function(){e.length=0,i.length=0,a.length=0},state:{lightsArray:e,shadowsArray:i,spritesArray:a,lights:t},setupLights:function(n){t.setup(e,i,n)},pushLight:function(t){e.push(t)},pushShadow:function(t){i.push(t)},pushSprite:function(t){a.push(t)}}},t[e]=i),i},dispose:function(){t={}}}}function jt(t){V.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(t)}function Vt(t){V.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new o,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.lights=this.fog=!1,this.setValues(t)}function Bt(t,e,i){function a(e,n,r,i,o,a){var s=e.geometry,u=v,c=e.customDepthMaterial;return r&&(u=y,c=e.customDistanceMaterial),c?u=c:(c=!1,n.morphTargets&&(s&&s.isBufferGeometry?c=s.morphAttributes&&s.morphAttributes.position&&0<s.morphAttributes.position.length:s&&s.isGeometry&&(c=s.morphTargets&&0<s.morphTargets.length)),e.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e),e=e.isSkinnedMesh&&n.skinning,s=0,c&&(s|=1),e&&(s|=2),u=u[s]),t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length&&(c=n.uuid,void 0===(e=w[s=u.uuid])&&(w[s]=e={}),void 0===(s=e[c])&&(s=u.clone(),e[c]=s),u=s),u.visible=n.visible,u.wireframe=n.wireframe,u.side=null!=n.shadowSide?n.shadowSide:x[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,r&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(i),u.nearDistance=o,u.farDistance=a),u}function s(n,r,i,o){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||l.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);var u=e.update(n),c=n.material;if(Array.isArray(c))for(var h=u.groups,f=0,d=h.length;f<d;f++){var p=h[f],m=c[p.materialIndex];m&&m.visible&&(m=a(n,m,o,g,i.near,i.far),t.renderBufferDirect(i,null,u,m,n,p))}else c.visible&&(m=a(n,c,o,g,i.near,i.far),t.renderBufferDirect(i,null,u,m,n,null))}for(u=0,c=(n=n.children).length;u<c;u++)s(n[u],r,i,o)}}var l=new m,h=new r,f=new n,d=new n(i,i),p=new o,g=new o,v=Array(4),y=Array(4),w={},x={0:1,1:0,2:2},b=[new o(1,0,0),new o(-1,0,0),new o(0,0,1),new o(0,0,-1),new o(0,1,0),new o(0,-1,0)],_=[new o(0,1,0),new o(0,1,0),new o(0,1,0),new o(0,1,0),new o(0,0,1),new o(0,0,-1)],M=[new u,new u,new u,new u,new u,new u];for(i=0;4!==i;++i){var S=0!=(1&i),E=0!=(2&i),T=new jt({depthPacking:3201,morphTargets:S,skinning:E});v[i]=T,S=new Vt({morphTargets:S,skinning:E}),y[i]=S}var A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,n,r){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==e.length){var i=t.state;i.disable(t.context.BLEND),i.buffers.color.setClear(1,1,1,1),i.buffers.depth.setTest(!0),i.setScissorTest(!1);for(var o,a=0,u=e.length;a<u;a++){var m=e[a];o=m.shadow;var v=m&&m.isPointLight;if(void 0===o)console.warn("THREE.WebGLShadowMap:",m,"has no shadow.");else{var y=o.camera;if(f.copy(o.mapSize),f.min(d),v){var w=f.x,x=f.y;M[0].set(2*w,x,w,x),M[1].set(0,x,w,x),M[2].set(3*w,x,w,x),M[3].set(w,x,w,x),M[4].set(3*w,0,w,x),M[5].set(w,0,w,x),f.x*=4,f.y*=2}for(null===o.map&&(o.map=new c(f.x,f.y,{minFilter:1003,magFilter:1003,format:1023}),o.map.texture.name=m.name+".shadowMap",y.updateProjectionMatrix()),o.isSpotLightShadow&&o.update(m),w=o.map,x=o.matrix,g.setFromMatrixPosition(m.matrixWorld),y.position.copy(g),v?(o=6,x.makeTranslation(-g.x,-g.y,-g.z)):(o=1,p.setFromMatrixPosition(m.target.matrixWorld),y.lookAt(p),y.updateMatrixWorld(),x.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),x.multiply(y.projectionMatrix),x.multiply(y.matrixWorldInverse)),t.setRenderTarget(w),t.clear(),m=0;m<o;m++)v&&(p.copy(y.position),p.add(b[m]),y.up.copy(_[m]),y.lookAt(p),y.updateMatrixWorld(),i.viewport(M[m])),h.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),l.setFromMatrix(h),s(n,r,y,v)}}A.needsUpdate=!1}}}function Ht(t,e,n,r,i,o,a,u,c){s.call(this,t,e,n,r,i,o,a,u,c),this.needsUpdate=!0}function Gt(t,e,n,r,a){var s,u,c,l,h,f,d,p,m,g,v,y,w,x,b,_,M,S;function E(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var T,A,C,k,R=new o,O=new i,P=new o;this.render=function(i,o,D){if(0!==i.length){if(void 0===C){var L=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),N=new Uint16Array([0,1,2,0,2,3]);T=e.createBuffer(),A=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,T),e.bufferData(e.ARRAY_BUFFER,L,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,A),e.bufferData(e.ELEMENT_ARRAY_BUFFER,N,e.STATIC_DRAW),L=e.createProgram(),N=e.createShader(e.VERTEX_SHADER);var I=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(N,["precision "+a.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 center;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvUV = uvOffset + uv * uvScale;\n\tvec2 alignedPosition = ( position - center ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\tfogDepth = - mvPosition.z;\n}"].join("\n")),e.shaderSource(I,["precision "+a.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvec4 texture = texture2D( map, vUV );\n\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\n\tif ( gl_FragColor.a < alphaTest ) discard;\n\tif ( fogType > 0 ) {\n\t\tfloat fogFactor = 0.0;\n\t\tif ( fogType == 1 ) {\n\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t\t} else {\n\t\t\tconst float LOG2 = 1.442695;\n\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\n\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\t\t}\n\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\t}\n}"].join("\n")),e.compileShader(N),e.compileShader(I),e.attachShader(L,N),e.attachShader(L,I),e.linkProgram(L),M=e.getAttribLocation(C=L,"position"),S=e.getAttribLocation(C,"uv"),s=e.getUniformLocation(C,"uvOffset"),u=e.getUniformLocation(C,"uvScale"),c=e.getUniformLocation(C,"rotation"),l=e.getUniformLocation(C,"center"),h=e.getUniformLocation(C,"scale"),f=e.getUniformLocation(C,"color"),d=e.getUniformLocation(C,"map"),p=e.getUniformLocation(C,"opacity"),m=e.getUniformLocation(C,"modelViewMatrix"),g=e.getUniformLocation(C,"projectionMatrix"),v=e.getUniformLocation(C,"fogType"),y=e.getUniformLocation(C,"fogDensity"),w=e.getUniformLocation(C,"fogNear"),x=e.getUniformLocation(C,"fogFar"),b=e.getUniformLocation(C,"fogColor"),e.getUniformLocation(C,"fogDepth"),_=e.getUniformLocation(C,"alphaTest"),(L=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=8,L.height=8,(N=L.getContext("2d")).fillStyle="white",N.fillRect(0,0,8,8),k=new Ht(L)}n.useProgram(C),n.initAttributes(),n.enableAttribute(M),n.enableAttribute(S),n.disableUnusedAttributes(),n.disable(e.CULL_FACE),n.enable(e.BLEND),e.bindBuffer(e.ARRAY_BUFFER,T),e.vertexAttribPointer(M,2,e.FLOAT,!1,16,0),e.vertexAttribPointer(S,2,e.FLOAT,!1,16,8),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,A),e.uniformMatrix4fv(g,!1,D.projectionMatrix.elements),n.activeTexture(e.TEXTURE0),e.uniform1i(d,0),N=L=0,(I=o.fog)?(e.uniform3f(b,I.color.r,I.color.g,I.color.b),I.isFog?(e.uniform1f(w,I.near),e.uniform1f(x,I.far),e.uniform1i(v,1),N=L=1):I.isFogExp2&&(e.uniform1f(y,I.density),e.uniform1i(v,2),N=L=2)):(e.uniform1i(v,0),N=L=0),I=0;for(var F=i.length;I<F;I++){var z=i[I];z.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,z.matrixWorld),z.z=-z.modelViewMatrix.elements[14]}i.sort(E);var U=[],j=[];for(I=0,F=i.length;I<F;I++){var V=(z=i[I]).material;if(!1!==V.visible){z.onBeforeRender(t,o,D,void 0,V,void 0),e.uniform1f(_,V.alphaTest),e.uniformMatrix4fv(m,!1,z.modelViewMatrix.elements),z.matrixWorld.decompose(R,O,P),U[0]=P.x,U[1]=P.y,j[0]=z.center.x-.5,j[1]=z.center.y-.5;var B=0;o.fog&&V.fog&&(B=N),L!==B&&(e.uniform1i(v,B),L=B),null!==V.map?(e.uniform2f(s,V.map.offset.x,V.map.offset.y),e.uniform2f(u,V.map.repeat.x,V.map.repeat.y)):(e.uniform2f(s,0,0),e.uniform2f(u,1,1)),e.uniform1f(p,V.opacity),e.uniform3f(f,V.color.r,V.color.g,V.color.b),e.uniform1f(c,V.rotation),e.uniform2fv(l,j),e.uniform2fv(h,U),n.setBlending(V.blending,V.blendEquation,V.blendSrc,V.blendDst,V.blendEquationAlpha,V.blendSrcAlpha,V.blendDstAlpha,V.premultipliedAlpha),n.buffers.depth.setTest(V.depthTest),n.buffers.depth.setMask(V.depthWrite),n.buffers.color.setMask(V.colorWrite),r.setTexture2D(V.map||k,0),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),z.onAfterRender(t,o,D,void 0,V,void 0)}}n.enable(e.CULL_FACE),n.reset()}}}function qt(t,e){return{convert:function(n){if(1e3===n)return t.REPEAT;if(1001===n)return t.CLAMP_TO_EDGE;if(1002===n)return t.MIRRORED_REPEAT;if(1003===n)return t.NEAREST;if(1004===n)return t.NEAREST_MIPMAP_NEAREST;if(1005===n)return t.NEAREST_MIPMAP_LINEAR;if(1006===n)return t.LINEAR;if(1007===n)return t.LINEAR_MIPMAP_NEAREST;if(1008===n)return t.LINEAR_MIPMAP_LINEAR;if(1009===n)return t.UNSIGNED_BYTE;if(1017===n)return t.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return t.UNSIGNED_SHORT_5_5_5_1;if(1019===n)return t.UNSIGNED_SHORT_5_6_5;if(1010===n)return t.BYTE;if(1011===n)return t.SHORT;if(1012===n)return t.UNSIGNED_SHORT;if(1013===n)return t.INT;if(1014===n)return t.UNSIGNED_INT;if(1015===n)return t.FLOAT;if(1016===n){var r=e.get("OES_texture_half_float");if(null!==r)return r.HALF_FLOAT_OES}if(1021===n)return t.ALPHA;if(1022===n)return t.RGB;if(1023===n)return t.RGBA;if(1024===n)return t.LUMINANCE;if(1025===n)return t.LUMINANCE_ALPHA;if(1026===n)return t.DEPTH_COMPONENT;if(1027===n)return t.DEPTH_STENCIL;if(100===n)return t.FUNC_ADD;if(101===n)return t.FUNC_SUBTRACT;if(102===n)return t.FUNC_REVERSE_SUBTRACT;if(200===n)return t.ZERO;if(201===n)return t.ONE;if(202===n)return t.SRC_COLOR;if(203===n)return t.ONE_MINUS_SRC_COLOR;if(204===n)return t.SRC_ALPHA;if(205===n)return t.ONE_MINUS_SRC_ALPHA;if(206===n)return t.DST_ALPHA;if(207===n)return t.ONE_MINUS_DST_ALPHA;if(208===n)return t.DST_COLOR;if(209===n)return t.ONE_MINUS_DST_COLOR;if(210===n)return t.SRC_ALPHA_SATURATE;if((33776===n||33777===n||33778===n||33779===n)&&null!==(r=e.get("WEBGL_compressed_texture_s3tc"))){if(33776===n)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===n)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===n)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===n)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===n||35841===n||35842===n||35843===n)&&null!==(r=e.get("WEBGL_compressed_texture_pvrtc"))){if(35840===n)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n&&null!==(r=e.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n)&&null!==(r=e.get("WEBGL_compressed_texture_astc")))return n;if((103===n||104===n)&&null!==(r=e.get("EXT_blend_minmax"))){if(103===n)return r.MIN_EXT;if(104===n)return r.MAX_EXT}return 1020===n&&null!==(r=e.get("WEBGL_depth_texture"))?r.UNSIGNED_INT_24_8_WEBGL:0}}}function Wt(t,e,n,r){x.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Yt(t){Wt.call(this),this.cameras=t||[]}function Xt(t){function e(){if(null!==a&&a.isPresenting){var e=a.getEyeParameters("left"),r=e.renderWidth;e=e.renderHeight,y=t.getPixelRatio(),v=t.getSize(),t.setDrawingBufferSize(2*r,e,1)}else n.enabled&&t.setDrawingBufferSize(v.width,v.height,y)}var n=this,a=null,s=null,c=null,l=new r,h=new r;"undefined"!=typeof window&&"VRFrameData"in window&&(s=new window.VRFrameData);var f=new r,d=new i,p=new o,m=new Wt;m.bounds=new u(0,0,.5,1),m.layers.enable(1);var g=new Wt;g.bounds=new u(.5,0,.5,1),g.layers.enable(2);var v,y,w=new Yt([m,g]);w.layers.enable(1),w.layers.enable(2),"undefined"!=typeof window&&window.addEventListener("vrdisplaypresentchange",e,!1),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return a},this.setDevice=function(t){void 0!==t&&(a=t)},this.setPoseTarget=function(t){void 0!==t&&(c=t)},this.getCamera=function(t){if(null===a)return t;a.depthNear=t.near,a.depthFar=t.far,a.getFrameData(s);var e=a.stageParameters;e?l.fromArray(e.sittingToStandingTransform):l.makeTranslation(0,n.userHeight,0),e=s.pose;var r=null!==c?c:t;return r.matrix.copy(l),r.matrix.decompose(r.position,r.quaternion,r.scale),null!==e.orientation&&(d.fromArray(e.orientation),r.quaternion.multiply(d)),null!==e.position&&(d.setFromRotationMatrix(l),p.fromArray(e.position),p.applyQuaternion(d),r.position.add(p)),r.updateMatrixWorld(),!1===a.isPresenting?t:(m.near=t.near,g.near=t.near,m.far=t.far,g.far=t.far,w.matrixWorld.copy(t.matrixWorld),w.matrixWorldInverse.copy(t.matrixWorldInverse),m.matrixWorldInverse.fromArray(s.leftViewMatrix),g.matrixWorldInverse.fromArray(s.rightViewMatrix),h.getInverse(l),m.matrixWorldInverse.multiply(h),g.matrixWorldInverse.multiply(h),null!==(t=r.parent)&&(f.getInverse(t.matrixWorld),m.matrixWorldInverse.multiply(f),g.matrixWorldInverse.multiply(f)),m.matrixWorld.getInverse(m.matrixWorldInverse),g.matrixWorld.getInverse(g.matrixWorldInverse),m.projectionMatrix.fromArray(s.leftProjectionMatrix),g.projectionMatrix.fromArray(s.rightProjectionMatrix),w.projectionMatrix.copy(m.projectionMatrix),(t=a.getLayers()).length&&(null!==(t=t[0]).leftBounds&&4===t.leftBounds.length&&m.bounds.fromArray(t.leftBounds),null!==t.rightBounds&&4===t.rightBounds.length&&g.bounds.fromArray(t.rightBounds)),w)},this.getStandingMatrix=function(){return l},this.submitFrame=function(){a&&a.isPresenting&&a.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",e)}}function $t(t){function e(){(R=new function(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];switch(n){case"WEBGL_depth_texture":var r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=t.getExtension("WEBGL_compressed_texture_etc1");break;default:r=t.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r}}}(_t)).get("WEBGL_depth_texture"),R.get("OES_texture_float"),R.get("OES_texture_float_linear"),R.get("OES_texture_half_float"),R.get("OES_texture_half_float_linear"),R.get("OES_standard_derivatives"),R.get("OES_element_index_uint"),R.get("ANGLE_instanced_arrays"),Y=new qt(_t,R),O=new function(t,e,n){function r(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision?"mediump":"lowp"}var i,o=void 0!==n.precision?n.precision:"highp",a=r(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a),n=!0===n.logarithmicDepthBuffer,a=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);var s=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_TEXTURE_SIZE),c=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),l=t.getParameter(t.MAX_VERTEX_ATTRIBS),h=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),f=t.getParameter(t.MAX_VARYING_VECTORS),d=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),p=0<s,m=!!e.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==i)return i;var n=e.get("EXT_texture_filter_anisotropic");return i=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:n,maxTextures:a,maxVertexTextures:s,maxTextureSize:u,maxCubemapSize:c,maxAttributes:l,maxVertexUniforms:h,maxVaryings:f,maxFragmentUniforms:d,vertexTextures:p,floatFragmentTextures:m,floatVertexTextures:p&&m}}(_t,R,t),(P=new function(t,e,n){function r(e,n,r){var i=new Uint8Array(4),o=t.createTexture();for(t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST),e=0;e<r;e++)t.texImage2D(n+e,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,i);return o}function i(e){!0!==w[e]&&(t.enable(e),w[e]=!0)}function o(e){!1!==w[e]&&(t.disable(e),w[e]=!1)}function a(e,r,a,s,u,c,l,h){if(0!==e?i(t.BLEND):o(t.BLEND),5!==e){if(e!==_||h!==k)switch(e){case 2:h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE));break;case 3:h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR));break;case 4:h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR));break;default:h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA))}C=A=T=E=S=M=null}else u=u||r,c=c||a,l=l||s,r===M&&u===T||(t.blendEquationSeparate(n.convert(r),n.convert(u)),M=r,T=u),a===S&&s===E&&c===A&&l===C||(t.blendFuncSeparate(n.convert(a),n.convert(s),n.convert(c),n.convert(l)),S=a,E=s,A=c,C=l);_=e,k=h}function s(e){R!==e&&(t.frontFace(e?t.CW:t.CCW),R=e)}function c(e){0!==e?(i(t.CULL_FACE),e!==O&&t.cullFace(1===e?t.BACK:2===e?t.FRONT:t.FRONT_AND_BACK)):o(t.CULL_FACE),O=e}function l(e,n,r){e?(i(t.POLYGON_OFFSET_FILL),(D!==n||L!==r)&&(t.polygonOffset(n,r),D=n,L=r)):o(t.POLYGON_OFFSET_FILL)}function h(e){void 0===e&&(e=t.TEXTURE0+N-1),F!==e&&(t.activeTexture(e),F=e)}var f=new function(){var e=!1,n=new u,r=null,i=new u(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},d=new function(){var e=!1,n=null,r=null,a=null;return{setTest:function(e){e?i(t.DEPTH_TEST):o(t.DEPTH_TEST)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case 0:t.depthFunc(t.NEVER);break;case 1:t.depthFunc(t.ALWAYS);break;case 2:t.depthFunc(t.LESS);break;case 3:t.depthFunc(t.LEQUAL);break;case 4:t.depthFunc(t.EQUAL);break;case 5:t.depthFunc(t.GEQUAL);break;case 6:t.depthFunc(t.GREATER);break;case 7:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);r=e}},setLocked:function(t){e=t},setClear:function(e){a!==e&&(t.clearDepth(e),a=e)},reset:function(){e=!1,a=r=n=null}}},p=new function(){var e=!1,n=null,r=null,a=null,s=null,u=null,c=null,l=null,h=null;return{setTest:function(e){e?i(t.STENCIL_TEST):o(t.STENCIL_TEST)},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,i){r===e&&a===n&&s===i||(t.stencilFunc(e,n,i),r=e,a=n,s=i)},setOp:function(e,n,r){u===e&&c===n&&l===r||(t.stencilOp(e,n,r),u=e,c=n,l=r)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,h=l=c=u=s=a=r=n=null}}},m=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=new Uint8Array(m),v=new Uint8Array(m),y=new Uint8Array(m),w={},x=null,b=null,_=null,M=null,S=null,E=null,T=null,A=null,C=null,k=!1,R=null,O=null,P=null,D=null,L=null,N=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),I=!1;m=0,-1!==(m=t.getParameter(t.VERSION)).indexOf("WebGL")?(m=parseFloat(/^WebGL ([0-9])/.exec(m)[1]),I=1<=m):-1!==m.indexOf("OpenGL ES")&&(m=parseFloat(/^OpenGL ES ([0-9])/.exec(m)[1]),I=2<=m);var F=null,z={},U=new u,j=new u,V={};return V[t.TEXTURE_2D]=r(t.TEXTURE_2D,t.TEXTURE_2D,1),V[t.TEXTURE_CUBE_MAP]=r(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),f.setClear(0,0,0,1),d.setClear(1),p.setClear(0),i(t.DEPTH_TEST),d.setFunc(3),s(!1),c(1),i(t.CULL_FACE),i(t.BLEND),a(1),{buffers:{color:f,depth:d,stencil:p},initAttributes:function(){for(var t=0,e=g.length;t<e;t++)g[t]=0},enableAttribute:function(n){g[n]=1,0===v[n]&&(t.enableVertexAttribArray(n),v[n]=1),0!==y[n]&&(e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),y[n]=0)},enableAttributeAndDivisor:function(n,r){g[n]=1,0===v[n]&&(t.enableVertexAttribArray(n),v[n]=1),y[n]!==r&&(e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,r),y[n]=r)},disableUnusedAttributes:function(){for(var e=0,n=v.length;e!==n;++e)v[e]!==g[e]&&(t.disableVertexAttribArray(e),v[e]=0)},enable:i,disable:o,getCompressedTextureFormats:function(){if(null===x&&(x=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)x.push(n[r]);return x},useProgram:function(e){return b!==e&&(t.useProgram(e),b=e,!0)},setBlending:a,setMaterial:function(e,n){2===e.side?o(t.CULL_FACE):i(t.CULL_FACE);var r=1===e.side;n&&(r=!r),s(r),!0===e.transparent?a(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):a(0),d.setFunc(e.depthFunc),d.setTest(e.depthTest),d.setMask(e.depthWrite),f.setMask(e.colorWrite),l(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:s,setCullFace:c,setLineWidth:function(e){e!==P&&(I&&t.lineWidth(e),P=e)},setPolygonOffset:l,setScissorTest:function(e){e?i(t.SCISSOR_TEST):o(t.SCISSOR_TEST)},activeTexture:h,bindTexture:function(e,n){null===F&&h();var r=z[F];void 0===r&&(z[F]=r={type:void 0,texture:void 0}),r.type===e&&r.texture===n||(t.bindTexture(e,n||V[e]),r.type=e,r.texture=n)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===U.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),U.copy(e))},viewport:function(e){!1===j.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),j.copy(e))},reset:function(){for(var e=0;e<v.length;e++)1===v[e]&&(t.disableVertexAttribArray(e),v[e]=0);w={},F=x=null,z={},O=R=_=b=null,f.reset(),d.reset(),p.reset()}}}(_t,R,Y)).scissor(st.copy(pt).multiplyScalar(ft)),P.viewport(at.copy(dt).multiplyScalar(ft)),D=new function(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(n,r,i){switch(i=i||1,e.calls++,r){case t.TRIANGLES:e.triangles+=n/3*i;break;case t.TRIANGLE_STRIP:case t.TRIANGLE_FAN:e.triangles+=i*(n-2);break;case t.LINES:e.lines+=n/2*i;break;case t.LINE_STRIP:e.lines+=i*(n-1);break;case t.LINE_LOOP:e.lines+=i*n;break;case t.POINTS:e.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}(_t),L=new function(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&t.set(e,n={}),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}},N=new function(t,e,n,r,i,o,a){function s(t,e){if(t.width>e||t.height>e){if("data"in t)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+t.width+"x"+t.height+").");e/=Math.max(t.width,t.height);var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.width=Math.floor(t.width*e),n.height=Math.floor(t.height*e),n.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+n.width+"x"+n.height,t),n}return t}function u(t){return Si.isPowerOfTwo(t.width)&&Si.isPowerOfTwo(t.height)}function c(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function l(e,n,i,o){t.generateMipmap(e),r.get(n).__maxMipLevel=Math.log2(Math.max(i,o))}function h(e){return 1003===e||1004===e||1005===e?t.NEAREST:t.LINEAR}function f(e){(e=e.target).removeEventListener("dispose",f);t:{var n=r.get(e);if(e.image&&n.__image__webglTextureCube)t.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)break t;t.deleteTexture(n.__webglTexture)}r.remove(e)}e.isVideoTexture&&delete x[e.id],a.memory.textures--}function d(e){(e=e.target).removeEventListener("dispose",d);var n=r.get(e),i=r.get(e.texture);if(e){if(void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(i=0;6>i;i++)t.deleteFramebuffer(n.__webglFramebuffer[i]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[i]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(e.texture),r.remove(e)}a.memory.textures--}function p(e,h){var d=r.get(e);if(e.isVideoTexture){var p=e.id,g=a.render.frame;x[p]!==g&&(x[p]=g,e.update())}if(0<e.version&&d.__version!==e.version)if(void 0===(p=e.image))console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(!1!==p.complete){void 0===d.__webglInit&&(d.__webglInit=!0,e.addEventListener("dispose",f),d.__webglTexture=t.createTexture(),a.memory.textures++),n.activeTexture(t.TEXTURE0+h),n.bindTexture(t.TEXTURE_2D,d.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,e.unpackAlignment),h=s(e.image,i.maxTextureSize),(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)&&!1===u(h)&&(h instanceof HTMLImageElement||h instanceof HTMLCanvasElement||h instanceof ImageBitmap)&&(void 0===y&&(y=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),y.width=Si.floorPowerOfTwo(h.width),y.height=Si.floorPowerOfTwo(h.height),y.getContext("2d").drawImage(h,0,0,y.width,y.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+h.width+"x"+h.height+"). Resized to "+y.width+"x"+y.height,h),h=y),p=u(h),g=o.convert(e.format);var v=o.convert(e.type);m(t.TEXTURE_2D,e,p);var b=e.mipmaps;if(e.isDepthTexture){var _=t.DEPTH_COMPONENT;if(1015===e.type){if(!w)throw Error("Float Depth Texture only supported in WebGL2.0");_=t.DEPTH_COMPONENT32F}else w&&(_=t.DEPTH_COMPONENT16);1026===e.format&&_===t.DEPTH_COMPONENT&&1012!==e.type&&1014!==e.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),e.type=1012,v=o.convert(e.type)),1027===e.format&&(_=t.DEPTH_STENCIL,1020!==e.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),e.type=1020,v=o.convert(e.type))),n.texImage2D(t.TEXTURE_2D,0,_,h.width,h.height,0,g,v,null)}else if(e.isDataTexture)if(0<b.length&&p){for(var M=0,S=b.length;M<S;M++)n.texImage2D(t.TEXTURE_2D,M,g,(_=b[M]).width,_.height,0,g,v,_.data);e.generateMipmaps=!1,d.__maxMipLevel=b.length-1}else n.texImage2D(t.TEXTURE_2D,0,g,h.width,h.height,0,g,v,h.data),d.__maxMipLevel=0;else if(e.isCompressedTexture){for(M=0,S=b.length;M<S;M++)_=b[M],1023!==e.format&&1022!==e.format?-1<n.getCompressedTextureFormats().indexOf(g)?n.compressedTexImage2D(t.TEXTURE_2D,M,g,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(t.TEXTURE_2D,M,g,_.width,_.height,0,g,v,_.data);d.__maxMipLevel=b.length-1}else if(0<b.length&&p){for(M=0,S=b.length;M<S;M++)n.texImage2D(t.TEXTURE_2D,M,g,g,v,_=b[M]);e.generateMipmaps=!1,d.__maxMipLevel=b.length-1}else n.texImage2D(t.TEXTURE_2D,0,g,g,v,h),d.__maxMipLevel=0;return c(e,p)&&l(t.TEXTURE_2D,e,h.width,h.height),d.__version=e.version,void(e.onUpdate&&e.onUpdate(e))}console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}n.activeTexture(t.TEXTURE0+h),n.bindTexture(t.TEXTURE_2D,d.__webglTexture)}function m(n,a,s){s?(t.texParameteri(n,t.TEXTURE_WRAP_S,o.convert(a.wrapS)),t.texParameteri(n,t.TEXTURE_WRAP_T,o.convert(a.wrapT)),t.texParameteri(n,t.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),1001===a.wrapS&&1001===a.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),t.texParameteri(n,t.TEXTURE_MAG_FILTER,h(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,h(a.minFilter)),1003!==a.minFilter&&1006!==a.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),!(s=e.get("EXT_texture_filter_anisotropic"))||1015===a.type&&null===e.get("OES_texture_float_linear")||1016===a.type&&null===e.get("OES_texture_half_float_linear")||!(1<a.anisotropy||r.get(a).__currentAnisotropy)||(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}function g(e,i,a,s){var u=o.convert(i.texture.format),c=o.convert(i.texture.type);n.texImage2D(s,0,u,i.width,i.height,0,u,c,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function v(e,n){t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):n.depthBuffer&&n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,n.width,n.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}var y,w="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,x={};this.setTexture2D=p,this.setTextureCube=function(e,h){var d=r.get(e);if(6===e.image.length)if(0<e.version&&d.__version!==e.version){d.__image__webglTextureCube||(e.addEventListener("dispose",f),d.__image__webglTextureCube=t.createTexture(),a.memory.textures++),n.activeTexture(t.TEXTURE0+h),n.bindTexture(t.TEXTURE_CUBE_MAP,d.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY),h=e&&e.isCompressedTexture;for(var p=e.image[0]&&e.image[0].isDataTexture,g=[],v=0;6>v;v++)g[v]=h||p?p?e.image[v].image:e.image[v]:s(e.image[v],i.maxCubemapSize);var y=g[0],w=u(y),x=o.convert(e.format),b=o.convert(e.type);for(m(t.TEXTURE_CUBE_MAP,e,w),v=0;6>v;v++)if(h)for(var _,M=g[v].mipmaps,S=0,E=M.length;S<E;S++)_=M[S],1023!==e.format&&1022!==e.format?-1<n.getCompressedTextureFormats().indexOf(x)?n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,S,x,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,S,x,_.width,_.height,0,x,b,_.data);else p?n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,x,g[v].width,g[v].height,0,x,b,g[v].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,x,x,b,g[v]);d.__maxMipLevel=h?M.length-1:0,c(e,w)&&l(t.TEXTURE_CUBE_MAP,e,y.width,y.height),d.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(t.TEXTURE0+h),n.bindTexture(t.TEXTURE_CUBE_MAP,d.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,i){n.activeTexture(t.TEXTURE0+i),n.bindTexture(t.TEXTURE_CUBE_MAP,r.get(e).__webglTexture)},this.setupRenderTarget=function(e){var i=r.get(e),o=r.get(e.texture);e.addEventListener("dispose",d),o.__webglTexture=t.createTexture(),a.memory.textures++;var s=!0===e.isWebGLRenderTargetCube,h=u(e);if(s){i.__webglFramebuffer=[];for(var f=0;6>f;f++)i.__webglFramebuffer[f]=t.createFramebuffer()}else i.__webglFramebuffer=t.createFramebuffer();if(s){for(n.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture),m(t.TEXTURE_CUBE_MAP,e.texture,h),f=0;6>f;f++)g(i.__webglFramebuffer[f],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+f);c(e.texture,h)&&l(t.TEXTURE_CUBE_MAP,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_CUBE_MAP,null)}else n.bindTexture(t.TEXTURE_2D,o.__webglTexture),m(t.TEXTURE_2D,e.texture,h),g(i.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),c(e.texture,h)&&l(t.TEXTURE_2D,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_2D,null);if(e.depthBuffer){if(i=r.get(e),o=!0===e.isWebGLRenderTargetCube,e.depthTexture){if(o)throw Error("target.depthTexture not supported in Cube render targets");if(e&&e.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),!e.depthTexture||!e.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(r.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),p(e.depthTexture,0),i=r.get(e.depthTexture).__webglTexture,1026===e.depthTexture.format)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,i,0);else{if(1027!==e.depthTexture.format)throw Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,i,0)}}else if(o)for(i.__webglDepthbuffer=[],o=0;6>o;o++)t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=t.createRenderbuffer(),v(i.__webglDepthbuffer[o],e);else t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),v(i.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}},this.updateRenderTargetMipmap=function(e){var i=e.texture,o=u(e);if(c(i,o)){o=e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D;var a=r.get(i).__webglTexture;n.bindTexture(o,a),l(o,i,e.width,e.height),n.bindTexture(o,null)}}}(_t,R,P,L,O,Y,D),I=new function(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=e.get(n);r&&(t.deleteBuffer(r.buffer),e.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=e.get(n);if(void 0===i)e.set(n,function(e,n){var r=e.array,i=e.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,o=t.createBuffer();return t.bindBuffer(n,o),t.bufferData(n,r,i),e.onUploadCallback(),n=t.FLOAT,r instanceof Float32Array?n=t.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?n=t.UNSIGNED_SHORT:r instanceof Int16Array?n=t.SHORT:r instanceof Uint32Array?n=t.UNSIGNED_INT:r instanceof Int32Array?n=t.INT:r instanceof Int8Array?n=t.BYTE:r instanceof Uint8Array&&(n=t.UNSIGNED_BYTE),{buffer:o,type:n,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(n,r));else if(i.version<n.version){var o=n,a=o.array,s=o.updateRange;t.bindBuffer(r,i.buffer),!1===o.dynamic?t.bufferData(r,a,t.STATIC_DRAW):-1===s.count?t.bufferSubData(r,0,a):0===s.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1),i.version=n.version}}}}(_t),F=new Q(_t,I,D),z=new function(t,e){var n={};return{update:function(r){var i=e.render.frame,o=r.geometry,a=t.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),t.update(a),n[a.id]=i),a},dispose:function(){n={}}}}(F,D),H=new function(t){var e={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,u=s.length;if(void 0===(r=e[i.id])){r=[];for(var c=0;c<u;c++)r[c]=[c,0];e[i.id]=r}var l=o.morphTargets&&i.morphAttributes.position;for(o=o.morphNormals&&i.morphAttributes.normal,c=0;c<u;c++){var h=r[c];0!==h[1]&&(l&&i.removeAttribute("morphTarget"+c),o&&i.removeAttribute("morphNormal"+c))}for(c=0;c<u;c++)(h=r[c])[0]=c,h[1]=s[c];for(r.sort(Z),c=0;8>c;c++)(h=r[c])&&(s=h[0],u=h[1])?(l&&i.addAttribute("morphTarget"+c,l[s]),o&&i.addAttribute("morphNormal"+c,o[s]),n[c]=u):n[c]=0;a.getUniforms().setValue(t,"morphTargetInfluences",n)}}}(_t),U=new function(t,e,n){function r(t,e){if(t)t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding);else var n=3e3;return 3e3===n&&e&&(n=3007),n}var i=[],o={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},a="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");this.getParameters=function(e,i,a,s,u,c,l){var h=o[e.type];if(l.isSkinnedMesh){var f=l.skeleton.bones;if(n.floatVertexTextures)f=1024;else{var d=Math.min(Math.floor((n.maxVertexUniforms-20)/4),f.length);d<f.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+f.length+" bones. This GPU supports "+d+"."),f=0):f=d}}else f=0;d=n.precision,null!==e.precision&&(d=n.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",d,"instead.");var p=t.getRenderTarget();return{shaderID:h,precision:d,supportsVertexTextures:n.vertexTextures,outputEncoding:r(p?p.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:r(e.map,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:r(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(306===e.envMap.mapping||307===e.envMap.mapping),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:r(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!s,useFog:e.fog,fogExp:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&0<f,maxBones:f,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:u,numClipIntersection:c,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&l.receiveShadow&&0<a.length,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:2===e.side,flipSided:1===e.side,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(e.fragmentShader),r.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)r.push(i),r.push(e.defines[i]);for(i=0;i<a.length;i++)r.push(n[a[i]]);return r.push(e.onBeforeCompile.toString()),r.push(t.gammaOutput),r.join()},this.acquireProgram=function(n,r,o,a){for(var s,u=0,c=i.length;u<c;u++){var l=i[u];if(l.code===a){++(s=l).usedTimes;break}}return void 0===s&&(s=new It(t,e,a,n,r,o),i.push(s)),s},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=i.indexOf(t);i[e]=i[i.length-1],i.pop(),t.destroy()}},this.programs=i}(J,R,O),j=new function(){var t={};return{get:function(e,n){return void 0===(n=t[e=e.id+","+n.id])&&(n=new function(){var t=[],e=0,n=[],r=[];return{opaque:n,transparent:r,init:function(){e=0,n.length=0,r.length=0},push:function(i,o,a,s,u){var c=t[e];void 0===c?t[e]=c={id:i.id,object:i,geometry:o,material:a,program:a.program,renderOrder:i.renderOrder,z:s,group:u}:(c.id=i.id,c.object=i,c.geometry=o,c.material=a,c.program=a.program,c.renderOrder=i.renderOrder,c.z=s,c.group=u),(!0===a.transparent?r:n).push(c),e++},sort:function(){1<n.length&&n.sort(Ft),1<r.length&&r.sort(zt)}}},t[e]=n),n},dispose:function(){t={}}}},V=new Ut,B=new X(J,P,F,E),G=new function(t,e,n){var r;this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.update(i,r)},this.renderInstances=function(t,i,o){var a=e.get("ANGLE_instanced_arrays");if(null===a)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var s=t.attributes.position;s.isInterleavedBufferAttribute?a.drawArraysInstancedANGLE(r,0,o=s.data.count,t.maxInstancedCount):a.drawArraysInstancedANGLE(r,i,o,t.maxInstancedCount),n.update(o,r,t.maxInstancedCount)}}}(_t,R,D),q=new function(t,e,n){var r,i,o;this.setMode=function(t){r=t},this.setIndex=function(t){i=t.type,o=t.bytesPerElement},this.render=function(e,a){t.drawElements(r,a,i,e*o),n.update(a,r)},this.renderInstances=function(t,a,s){var u=e.get("ANGLE_instanced_arrays");null===u?console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(u.drawElementsInstancedANGLE(r,s,i,a*o,t.maxInstancedCount),n.update(s,r,t.maxInstancedCount))}}(_t,R,D),W=new Gt(J,_t,P,N,O),D.programs=U.programs,J.context=_t,J.capabilities=O,J.extensions=R,J.properties=L,J.renderLists=j,J.state=P,J.info=D}function n(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),K=!0}function i(){console.log("THREE.WebGLRenderer: Context Restored."),K=!1,e()}function a(t){(t=t.target).removeEventListener("dispose",a),s(t),L.remove(t)}function s(t){var e=L.get(t).program;t.program=void 0,void 0!==e&&U.releaseProgram(e)}function c(){var t=Mt.getDevice();t&&t.isPresenting?t.requestAnimationFrame(l):window.requestAnimationFrame(l)}function l(t){!1!==Et&&(Tt(t),c())}function f(t,e,n,r){for(var i=0,o=t.length;i<o;i++){var a=t[i],s=a.object,u=a.geometry,c=void 0===r?a.material:r;if(a=a.group,n.isArrayCamera){ot=n;for(var l=n.cameras,h=0,f=l.length;h<f;h++){var p=l[h];if(s.layers.test(p.layers)){var m=p.bounds;P.viewport(at.set(m.x*lt,m.y*ht,m.z*lt,m.w*ht).multiplyScalar(ft)),d(s,e,p,u,c,a)}}}else ot=null,d(s,e,n,u,c,a)}}function d(t,e,n,r,i,o){if(t.onBeforeRender(J,e,n,r,i,o),k=V.get(e,ot||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var a=t.isMesh&&0>t.matrixWorld.determinant();P.setMaterial(i,a),a=g(n,e.fog,i,t),rt="",function(t,e,n){t.render(function(t){J.renderBufferImmediate(t,e,n)})}(t,a,i)}else J.renderBufferDirect(n,e.fog,r,i,t,o);t.onAfterRender(J,e,n,r,i,o),k=V.get(e,ot||n)}function p(t,e,n){var r=L.get(t),i=k.state.lights;n=U.getParameters(t,i.state,k.state.shadowsArray,e,vt.numPlanes,vt.numIntersection,n);var o=U.getProgramCode(t,n),u=r.program,c=!0;if(void 0===u)t.addEventListener("dispose",a);else if(u.code!==o)s(t);else{if(r.lightsHash!==i.state.hash)L.update(t,"lightsHash",i.state.hash);else if(void 0!==n.shaderID)return;c=!1}if(c&&(r.shader=n.shaderID?{name:t.type,uniforms:Ai.clone((u=Ri[n.shaderID]).uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}:{name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader},t.onBeforeCompile(r.shader,J),u=U.acquireProgram(t,r.shader,n,o),r.program=u,t.program=u),n=u.getAttributes(),t.morphTargets)for(o=t.numSupportedMorphTargets=0;o<J.maxMorphTargets;o++)0<=n["morphTarget"+o]&&t.numSupportedMorphTargets++;if(t.morphNormals)for(o=t.numSupportedMorphNormals=0;o<J.maxMorphNormals;o++)0<=n["morphNormal"+o]&&t.numSupportedMorphNormals++;n=r.shader.uniforms,(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=vt.numPlanes,r.numIntersection=vt.numIntersection,n.clippingPlanes=vt.uniform),r.fog=e,r.lightsHash=i.state.hash,t.lights&&(n.ambientLightColor.value=i.state.ambient,n.directionalLights.value=i.state.directional,n.spotLights.value=i.state.spot,n.rectAreaLights.value=i.state.rectArea,n.pointLights.value=i.state.point,n.hemisphereLights.value=i.state.hemi,n.directionalShadowMap.value=i.state.directionalShadowMap,n.directionalShadowMatrix.value=i.state.directionalShadowMatrix,n.spotShadowMap.value=i.state.spotShadowMap,n.spotShadowMatrix.value=i.state.spotShadowMatrix,n.pointShadowMap.value=i.state.pointShadowMap,n.pointShadowMatrix.value=i.state.pointShadowMatrix),t=r.program.getUniforms(),t=At.seqWithValue(t.seq,n),r.uniformsList=t}function g(t,e,n,r){ct=0;var i=L.get(n),o=k.state.lights;yt&&(wt||t!==it)&&vt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,i,t===it&&n.id===nt),!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==e?n.needsUpdate=!0:n.lights&&i.lightsHash!==o.state.hash?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===vt.numPlanes&&i.numIntersection===vt.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(p(n,e,r),n.needsUpdate=!1);var a=!1,s=!1,u=!1,c=(o=i.program).getUniforms(),l=i.shader.uniforms;if(P.useProgram(o.program)&&(u=s=a=!0),n.id!==nt&&(nt=n.id,s=!0),(a||t!==it)&&(c.setValue(_t,"projectionMatrix",t.projectionMatrix),O.logarithmicDepthBuffer&&c.setValue(_t,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),it!==(ot||t)&&(it=ot||t,u=s=!0),(n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap)&&void 0!==(a=c.map.cameraPosition)&&a.setValue(_t,bt.setFromMatrixPosition(t.matrixWorld)),(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&c.setValue(_t,"viewMatrix",t.matrixWorldInverse)),n.skinning&&(c.setOptional(_t,r,"bindMatrix"),c.setOptional(_t,r,"bindMatrixInverse"),t=r.skeleton))if(a=t.bones,O.floatVertexTextures){if(void 0===t.boneTexture){a=Math.sqrt(4*a.length),a=Si.ceilPowerOfTwo(a),a=Math.max(a,4);var f=new Float32Array(a*a*4);f.set(t.boneMatrices);var d=new h(f,a,a,1023,1015);d.needsUpdate=!0,t.boneMatrices=f,t.boneTexture=d,t.boneTextureSize=a}c.setValue(_t,"boneTexture",t.boneTexture),c.setValue(_t,"boneTextureSize",t.boneTextureSize)}else c.setOptional(_t,t,"boneMatrices");return s&&(c.setValue(_t,"toneMappingExposure",J.toneMappingExposure),c.setValue(_t,"toneMappingWhitePoint",J.toneMappingWhitePoint),n.lights&&(l.ambientLightColor.needsUpdate=s=u,l.directionalLights.needsUpdate=s,l.pointLights.needsUpdate=s,l.spotLights.needsUpdate=s,l.rectAreaLights.needsUpdate=s,l.hemisphereLights.needsUpdate=s),e&&n.fog&&(l.fogColor.value=e.color,e.isFog?(l.fogNear.value=e.near,l.fogFar.value=e.far):e.isFogExp2&&(l.fogDensity.value=e.density)),n.isMeshBasicMaterial?v(l,n):n.isMeshLambertMaterial?(v(l,n),n.emissiveMap&&(l.emissiveMap.value=n.emissiveMap)):n.isMeshPhongMaterial?(v(l,n),n.isMeshToonMaterial?(y(l,n),n.gradientMap&&(l.gradientMap.value=n.gradientMap)):y(l,n)):n.isMeshStandardMaterial?(v(l,n),n.isMeshPhysicalMaterial&&(l.clearCoat.value=n.clearCoat,l.clearCoatRoughness.value=n.clearCoatRoughness),l.roughness.value=n.roughness,l.metalness.value=n.metalness,n.roughnessMap&&(l.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(l.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(l.emissiveMap.value=n.emissiveMap),n.bumpMap&&(l.bumpMap.value=n.bumpMap,l.bumpScale.value=n.bumpScale),n.normalMap&&(l.normalMap.value=n.normalMap,l.normalScale.value.copy(n.normalScale)),n.displacementMap&&(l.displacementMap.value=n.displacementMap,l.displacementScale.value=n.displacementScale,l.displacementBias.value=n.displacementBias),n.envMap&&(l.envMapIntensity.value=n.envMapIntensity)):n.isMeshDepthMaterial?(v(l,n),n.displacementMap&&(l.displacementMap.value=n.displacementMap,l.displacementScale.value=n.displacementScale,l.displacementBias.value=n.displacementBias)):n.isMeshDistanceMaterial?(v(l,n),n.displacementMap&&(l.displacementMap.value=n.displacementMap,l.displacementScale.value=n.displacementScale,l.displacementBias.value=n.displacementBias),l.referencePosition.value.copy(n.referencePosition),l.nearDistance.value=n.nearDistance,l.farDistance.value=n.farDistance):n.isMeshNormalMaterial?(v(l,n),n.bumpMap&&(l.bumpMap.value=n.bumpMap,l.bumpScale.value=n.bumpScale),n.normalMap&&(l.normalMap.value=n.normalMap,l.normalScale.value.copy(n.normalScale)),n.displacementMap&&(l.displacementMap.value=n.displacementMap,l.displacementScale.value=n.displacementScale,l.displacementBias.value=n.displacementBias)):n.isLineBasicMaterial?(l.diffuse.value=n.color,l.opacity.value=n.opacity,n.isLineDashedMaterial&&(l.dashSize.value=n.dashSize,l.totalSize.value=n.dashSize+n.gapSize,l.scale.value=n.scale)):n.isPointsMaterial?(l.diffuse.value=n.color,l.opacity.value=n.opacity,l.size.value=n.size*ft,l.scale.value=.5*ht,l.map.value=n.map,null!==n.map&&(!0===n.map.matrixAutoUpdate&&n.map.matrix.setUvTransform((e=n.map.offset).x,e.y,(s=n.map.repeat).x,s.y,n.map.rotation,(u=n.map.center).x,u.y),l.uvTransform.value.copy(n.map.matrix))):n.isShadowMaterial&&(l.color.value=n.color,l.opacity.value=n.opacity),void 0!==l.ltc_1&&(l.ltc_1.value=ki.LTC_1),void 0!==l.ltc_2&&(l.ltc_2.value=ki.LTC_2),At.upload(_t,i.uniformsList,l,J)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(At.upload(_t,i.uniformsList,l,J),n.uniformsNeedUpdate=!1),c.setValue(_t,"modelViewMatrix",r.modelViewMatrix),c.setValue(_t,"normalMatrix",r.normalMatrix),c.setValue(_t,"modelMatrix",r.matrixWorld),o}function v(t,e){if(t.opacity.value=e.opacity,e.color&&(t.diffuse.value=e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=L.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map)var n=e.map;else e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap);if(void 0!==n){if(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate){var r=n.repeat,i=n.center;n.matrix.setUvTransform((e=n.offset).x,e.y,r.x,r.y,n.rotation,i.x,i.y)}t.uvTransform.value.copy(n.matrix)}}function y(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}console.log("THREE.WebGLRenderer","91");var w=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),x=void 0!==t.context?t.context:null,b=void 0!==t.alpha&&t.alpha,_=void 0===t.depth||t.depth,M=void 0===t.stencil||t.stencil,S=void 0!==t.antialias&&t.antialias,E=void 0===t.premultipliedAlpha||t.premultipliedAlpha,T=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,A=void 0!==t.powerPreference?t.powerPreference:"default",C=null,k=null;this.domElement=w,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var R,O,P,D,L,N,I,F,z,U,j,V,B,H,G,q,W,Y,J=this,K=!1,tt=null,et=null,nt=-1,rt="",it=null,ot=null,at=new u,st=new u,ut=null,ct=0,lt=w.width,ht=w.height,ft=1,dt=new u(0,0,lt,ht),pt=new u(0,0,lt,ht),mt=!1,gt=new m,vt=new $,yt=!1,wt=!1,xt=new r,bt=new o;try{b={alpha:b,depth:_,stencil:M,antialias:S,premultipliedAlpha:E,preserveDrawingBuffer:T,powerPreference:A},w.addEventListener("webglcontextlost",n,!1),w.addEventListener("webglcontextrestored",i,!1);var _t=x||w.getContext("webgl",b)||w.getContext("experimental-webgl",b);if(null===_t){if(null!==w.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===_t.getShaderPrecisionFormat&&(_t.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){console.error("THREE.WebGLRenderer: "+t.message)}e();var Mt=new Xt(J);this.vr=Mt;var St=new Bt(J,z,O.maxTextureSize);this.shadowMap=St,this.getContext=function(){return _t},this.getContextAttributes=function(){return _t.getContextAttributes()},this.forceContextLoss=function(){var t=R.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=R.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return ft},this.setPixelRatio=function(t){void 0!==t&&(ft=t,this.setSize(lt,ht,!1))},this.getSize=function(){return{width:lt,height:ht}},this.setSize=function(t,e,n){var r=Mt.getDevice();r&&r.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(lt=t,ht=e,w.width=t*ft,w.height=e*ft,!1!==n&&(w.style.width=t+"px",w.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(){return{width:lt*ft,height:ht*ft}},this.setDrawingBufferSize=function(t,e,n){lt=t,ht=e,ft=n,w.width=t*n,w.height=e*n,this.setViewport(0,0,t,e)},this.getCurrentViewport=function(){return at},this.setViewport=function(t,e,n,r){dt.set(t,ht-e-r,n,r),P.viewport(at.copy(dt).multiplyScalar(ft))},this.setScissor=function(t,e,n,r){pt.set(t,ht-e-r,n,r),P.scissor(st.copy(pt).multiplyScalar(ft))},this.setScissorTest=function(t){P.setScissorTest(mt=t)},this.getClearColor=function(){return B.getClearColor()},this.setClearColor=function(){B.setClearColor.apply(B,arguments)},this.getClearAlpha=function(){return B.getClearAlpha()},this.setClearAlpha=function(){B.setClearAlpha.apply(B,arguments)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=_t.COLOR_BUFFER_BIT),(void 0===e||e)&&(r|=_t.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=_t.STENCIL_BUFFER_BIT),_t.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,n,r){this.setRenderTarget(t),this.clear(e,n,r)},this.dispose=function(){w.removeEventListener("webglcontextlost",n,!1),w.removeEventListener("webglcontextrestored",i,!1),j.dispose(),V.dispose(),L.dispose(),z.dispose(),Mt.dispose(),Et=!1},this.renderBufferImmediate=function(t,e,n){P.initAttributes();var r=L.get(t);if(t.hasPositions&&!r.position&&(r.position=_t.createBuffer()),t.hasNormals&&!r.normal&&(r.normal=_t.createBuffer()),t.hasUvs&&!r.uv&&(r.uv=_t.createBuffer()),t.hasColors&&!r.color&&(r.color=_t.createBuffer()),e=e.getAttributes(),t.hasPositions&&(_t.bindBuffer(_t.ARRAY_BUFFER,r.position),_t.bufferData(_t.ARRAY_BUFFER,t.positionArray,_t.DYNAMIC_DRAW),P.enableAttribute(e.position),_t.vertexAttribPointer(e.position,3,_t.FLOAT,!1,0,0)),t.hasNormals){if(_t.bindBuffer(_t.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var i=0,o=3*t.count;i<o;i+=9){var a=t.normalArray,s=(a[i+0]+a[i+3]+a[i+6])/3,u=(a[i+1]+a[i+4]+a[i+7])/3,c=(a[i+2]+a[i+5]+a[i+8])/3;a[i+0]=s,a[i+1]=u,a[i+2]=c,a[i+3]=s,a[i+4]=u,a[i+5]=c,a[i+6]=s,a[i+7]=u,a[i+8]=c}_t.bufferData(_t.ARRAY_BUFFER,t.normalArray,_t.DYNAMIC_DRAW),P.enableAttribute(e.normal),_t.vertexAttribPointer(e.normal,3,_t.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(_t.bindBuffer(_t.ARRAY_BUFFER,r.uv),_t.bufferData(_t.ARRAY_BUFFER,t.uvArray,_t.DYNAMIC_DRAW),P.enableAttribute(e.uv),_t.vertexAttribPointer(e.uv,2,_t.FLOAT,!1,0,0)),t.hasColors&&0!==n.vertexColors&&(_t.bindBuffer(_t.ARRAY_BUFFER,r.color),_t.bufferData(_t.ARRAY_BUFFER,t.colorArray,_t.DYNAMIC_DRAW),P.enableAttribute(e.color),_t.vertexAttribPointer(e.color,3,_t.FLOAT,!1,0,0)),P.disableUnusedAttributes(),_t.drawArrays(_t.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,o){var a=i.isMesh&&0>i.matrixWorld.determinant();P.setMaterial(r,a);var s=g(t,e,r,i),u=!1;(t=n.id+"_"+s.id+"_"+(!0===r.wireframe))!==rt&&(rt=t,u=!0),i.morphTargetInfluences&&(H.update(i,n,r,s),u=!0),a=n.index;var c=n.attributes.position;if(e=1,!0===r.wireframe&&(a=F.getWireframeAttribute(n),e=2),t=G,null!==a){var l=I.get(a);(t=q).setIndex(l)}if(u){if(u=void 0,n&&n.isInstancedBufferGeometry&&null===R.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===u&&(u=0),P.initAttributes();var h=n.attributes;s=s.getAttributes();var f=r.defaultAttributeValues;for(M in s){var d=s[M];if(0<=d){var p=h[M];if(void 0!==p){var m=p.normalized,v=p.itemSize,y=I.get(p);if(void 0!==y){var w=y.buffer,x=y.type;if(y=y.bytesPerElement,p.isInterleavedBufferAttribute){var b=p.data,_=b.stride;p=p.offset,b&&b.isInstancedInterleavedBuffer?(P.enableAttributeAndDivisor(d,b.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=b.meshPerAttribute*b.count)):P.enableAttribute(d),_t.bindBuffer(_t.ARRAY_BUFFER,w),_t.vertexAttribPointer(d,v,x,m,_*y,(u*_+p)*y)}else p.isInstancedBufferAttribute?(P.enableAttributeAndDivisor(d,p.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=p.meshPerAttribute*p.count)):P.enableAttribute(d),_t.bindBuffer(_t.ARRAY_BUFFER,w),_t.vertexAttribPointer(d,v,x,m,0,u*v*y)}}else if(void 0!==f&&void 0!==(m=f[M]))switch(m.length){case 2:_t.vertexAttrib2fv(d,m);break;case 3:_t.vertexAttrib3fv(d,m);break;case 4:_t.vertexAttrib4fv(d,m);break;default:_t.vertexAttrib1fv(d,m)}}}P.disableUnusedAttributes()}null!==a&&_t.bindBuffer(_t.ELEMENT_ARRAY_BUFFER,l.buffer)}l=1/0,null!==a?l=a.count:void 0!==c&&(l=c.count),a=n.drawRange.start*e,c=null!==o?o.start*e:0;var M=Math.max(a,c);if(0!==(o=Math.max(0,Math.min(l,a+n.drawRange.count*e,c+(null!==o?o.count*e:1/0))-1-M+1))){if(i.isMesh)if(!0===r.wireframe)P.setLineWidth(r.wireframeLinewidth*(null===tt?ft:1)),t.setMode(_t.LINES);else switch(i.drawMode){case 0:t.setMode(_t.TRIANGLES);break;case 1:t.setMode(_t.TRIANGLE_STRIP);break;case 2:t.setMode(_t.TRIANGLE_FAN)}else i.isLine?(void 0===(r=r.linewidth)&&(r=1),P.setLineWidth(r*(null===tt?ft:1)),t.setMode(i.isLineSegments?_t.LINES:i.isLineLoop?_t.LINE_LOOP:_t.LINE_STRIP)):i.isPoints&&t.setMode(_t.POINTS);n&&n.isInstancedBufferGeometry?0<n.maxInstancedCount&&t.renderInstances(n,M,o):t.render(M,o)}},this.compile=function(t,e){(k=V.get(t,e)).init(),t.traverse(function(t){t.isLight&&(k.pushLight(t),t.castShadow&&k.pushShadow(t))}),k.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)p(e.material[n],t.fog,e);else p(e.material,t.fog,e)})};var Et=!1,Tt=null;this.animate=function(t){null!==(Tt=t)?Et||(c(),Et=!0):Et=!1},this.render=function(t,e,n,r){if(e&&e.isCamera){if(!K){rt="",nt=-1,it=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),Mt.enabled&&(e=Mt.getCamera(e)),(k=V.get(t,e)).init(),t.onBeforeRender(J,t,e,n),xt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),gt.setFromMatrix(xt),yt=vt.init(this.clippingPlanes,wt=this.localClippingEnabled,e),(C=j.get(t,e)).init(),function t(e,n,r){if(!1!==e.visible){if(e.layers.test(n.layers))if(e.isLight)k.pushLight(e),e.castShadow&&k.pushShadow(e);else if(e.isSprite)e.frustumCulled&&!gt.intersectsSprite(e)||k.pushSprite(e);else if(e.isImmediateRenderObject)r&&bt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(xt),C.push(e,null,e.material,bt.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||gt.intersectsObject(e))){r&&bt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(xt);var i=z.update(e),o=e.material;if(Array.isArray(o))for(var a=i.groups,s=0,u=a.length;s<u;s++){var c=a[s],l=o[c.materialIndex];l&&l.visible&&C.push(e,i,l,bt.z,c)}else o.visible&&C.push(e,i,o,bt.z,null)}for(s=0,u=(e=e.children).length;s<u;s++)t(e[s],n,r)}}(t,e,J.sortObjects),!0===J.sortObjects&&C.sort(),yt&&vt.beginShadows(),St.render(k.state.shadowsArray,t,e),k.setupLights(e),yt&&vt.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),B.render(C,t,e,r),r=C.opaque;var i=C.transparent;if(t.overrideMaterial){var o=t.overrideMaterial;r.length&&f(r,t,e,o),i.length&&f(i,t,e,o)}else r.length&&f(r,t,e),i.length&&f(i,t,e);W.render(k.state.spritesArray,t,e),n&&N.updateRenderTargetMipmap(n),P.buffers.depth.setTest(!0),P.buffers.depth.setMask(!0),P.buffers.color.setMask(!0),P.setPolygonOffset(!1),t.onAfterRender(J,t,e),Mt.enabled&&Mt.submitFrame(),k=C=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var t=ct;return t>=O.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+O.maxTextures),ct+=1,t},this.setTexture2D=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),N.setTexture2D(e,n)}}(),this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),N.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?N.setTextureCube(e,n):N.setTextureCubeDynamic(e,n)}}(),this.getRenderTarget=function(){return tt},this.setRenderTarget=function(t){(tt=t)&&void 0===L.get(t).__webglFramebuffer&&N.setupRenderTarget(t);var e=null,n=!1;t?(e=L.get(t).__webglFramebuffer,t.isWebGLRenderTargetCube&&(e=e[t.activeCubeFace],n=!0),at.copy(t.viewport),st.copy(t.scissor),ut=t.scissorTest):(at.copy(dt).multiplyScalar(ft),st.copy(pt).multiplyScalar(ft),ut=mt),et!==e&&(_t.bindFramebuffer(_t.FRAMEBUFFER,e),et=e),P.viewport(at),P.scissor(st),P.setScissorTest(ut),n&&(n=L.get(t.texture),_t.framebufferTexture2D(_t.FRAMEBUFFER,_t.COLOR_ATTACHMENT0,_t.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,n.__webglTexture,t.activeMipMapLevel))},this.readRenderTargetPixels=function(t,e,n,r,i,o){if(t&&t.isWebGLRenderTarget){var a=L.get(t).__webglFramebuffer;if(a){var s=!1;a!==et&&(_t.bindFramebuffer(_t.FRAMEBUFFER,a),s=!0);try{var u=t.texture,c=u.format,l=u.type;1023!==c&&Y.convert(c)!==_t.getParameter(_t.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===l||Y.convert(l)===_t.getParameter(_t.IMPLEMENTATION_COLOR_READ_TYPE)||1015===l&&(R.get("OES_texture_float")||R.get("WEBGL_color_buffer_float"))||1016===l&&R.get("EXT_color_buffer_half_float")?_t.checkFramebufferStatus(_t.FRAMEBUFFER)===_t.FRAMEBUFFER_COMPLETE?0<=e&&e<=t.width-r&&0<=n&&n<=t.height-i&&_t.readPixels(e,n,r,i,Y.convert(c),Y.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{s&&_t.bindFramebuffer(_t.FRAMEBUFFER,et)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){var r=e.image.width,i=e.image.height,o=Y.convert(e.format);this.setTexture2D(e,0),_t.copyTexImage2D(_t.TEXTURE_2D,n||0,o,t.x,t.y,r,i,0)},this.copyTextureToTexture=function(t,e,n,r){var i=e.image.width,o=e.image.height,a=Y.convert(n.format),s=Y.convert(n.type);e=e.isDataTexture?e.image.data:e.image,this.setTexture2D(n,0),_t.texSubImage2D(_t.TEXTURE_2D,r||0,t.x,t.y,i,o,a,s,e)}}function Qt(t,e){this.name="",this.color=new g(t),this.density=void 0!==e?e:25e-5}function Zt(t,e,n){this.name="",this.color=new g(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function Jt(){w.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0}function Kt(t){V.call(this),this.type="SpriteMaterial",this.color=new g(16777215),this.map=null,this.rotation=0,this.lights=this.fog=!1,this.setValues(t)}function te(t){w.call(this),this.type="Sprite",this.material=void 0!==t?t:new Kt,this.center=new n(.5,.5)}function ee(){w.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ne(t,e){if(this.bones=(t=t||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new r)}function re(){w.call(this),this.type="Bone"}function ie(t,e){Y.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new r,this.bindMatrixInverse=new r,t=new ne(t=this.initBones()),this.bind(t,this.matrixWorld),this.normalizeSkinWeights()}function oe(t){V.call(this),this.type="LineBasicMaterial",this.color=new g(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.lights=!1,this.setValues(t)}function ae(t,e,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new se(t,e);w.call(this),this.type="Line",this.geometry=void 0!==t?t:new I,this.material=void 0!==e?e:new oe({color:16777215*Math.random()})}function se(t,e){ae.call(this,t,e),this.type="LineSegments"}function ue(t,e){ae.call(this,t,e),this.type="LineLoop"}function ce(t){V.call(this),this.type="PointsMaterial",this.color=new g(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function le(t,e){w.call(this),this.type="Points",this.geometry=void 0!==t?t:new I,this.material=void 0!==e?e:new ce({color:16777215*Math.random()})}function he(){w.call(this),this.type="Group"}function fe(t,e,n,r,i,o,a,u,c){s.call(this,t,e,n,r,i,o,a,u,c),this.generateMipmaps=!1}function de(t,e,n,r,i,o,a,u,c,l,h,f){s.call(this,null,o,a,u,c,l,r,i,h,f),this.image={width:e,height:n},this.mipmaps=t,this.generateMipmaps=this.flipY=!1}function pe(t,e,n,r,i,o,a,u,c,l){if(1026!==(l=void 0!==l?l:1026)&&1027!==l)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===l&&(n=1012),void 0===n&&1027===l&&(n=1020),s.call(this,null,r,i,o,a,u,l,n,c),this.image={width:t,height:e},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==u?u:1003,this.generateMipmaps=this.flipY=!1}function me(t){I.call(this),this.type="WireframeGeometry";var e,n,r,i=[],a=[0,0],s={},u=["a","b","c"];if(t&&t.isGeometry){var c=t.faces,l=0;for(n=c.length;l<n;l++){var h=c[l];for(e=0;3>e;e++){var f=h[u[e]],d=h[u[(e+1)%3]];a[0]=Math.min(f,d),a[1]=Math.max(f,d),void 0===s[f=a[0]+","+a[1]]&&(s[f]={index1:a[0],index2:a[1]})}}for(f in s)i.push((u=t.vertices[(l=s[f]).index1]).x,u.y,u.z),i.push((u=t.vertices[l.index2]).x,u.y,u.z)}else if(t&&t.isBufferGeometry)if(u=new o,null!==t.index){c=t.attributes.position,h=t.index;var p=t.groups;for(0===p.length&&(p=[{start:0,count:h.count,materialIndex:0}]),t=0,r=p.length;t<r;++t)for(n=(l=p[t]).count,l=e=l.start,n=e+n;l<n;l+=3)for(e=0;3>e;e++)f=h.getX(l+e),d=h.getX(l+(e+1)%3),a[0]=Math.min(f,d),a[1]=Math.max(f,d),void 0===s[f=a[0]+","+a[1]]&&(s[f]={index1:a[0],index2:a[1]});for(f in s)u.fromBufferAttribute(c,(l=s[f]).index1),i.push(u.x,u.y,u.z),u.fromBufferAttribute(c,l.index2),i.push(u.x,u.y,u.z)}else for(l=0,n=(c=t.attributes.position).count/3;l<n;l++)for(e=0;3>e;e++)u.fromBufferAttribute(c,s=3*l+e),i.push(u.x,u.y,u.z),u.fromBufferAttribute(c,s=3*l+(e+1)%3),i.push(u.x,u.y,u.z);this.addAttribute("position",new P(i,3))}function ge(t,e,n){M.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new ve(t,e,n)),this.mergeVertices()}function ve(t,e,n){I.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var r,i,a=[],s=[],u=[],c=[],l=new o,h=new o,f=new o,d=new o,p=new o,m=e+1;for(r=0;r<=n;r++){var g=r/n;for(i=0;i<=e;i++){var v=i/e;t(v,g,h),s.push(h.x,h.y,h.z),0<=v-1e-5?(t(v-1e-5,g,f),d.subVectors(h,f)):(t(v+1e-5,g,f),d.subVectors(f,h)),0<=g-1e-5?(t(v,g-1e-5,f),p.subVectors(h,f)):(t(v,g+1e-5,f),p.subVectors(f,h)),l.crossVectors(d,p).normalize(),u.push(l.x,l.y,l.z),c.push(v,g)}}for(r=0;r<n;r++)for(i=0;i<e;i++)l=(r+1)*m+i+1,a.push(r*m+i,t=r*m+i+1,h=(r+1)*m+i),a.push(t,l,h);this.setIndex(a),this.addAttribute("position",new P(s,3)),this.addAttribute("normal",new P(u,3)),this.addAttribute("uv",new P(c,2))}function ye(t,e,n,r){M.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},this.fromBufferGeometry(new we(t,e,n,r)),this.mergeVertices()}function we(t,e,r,i){function a(t){c.push(t.x,t.y,t.z)}function s(e,n){n.x=t[0+(e*=3)],n.y=t[e+1],n.z=t[e+2]}function u(t,e,n,r){0>r&&1===t.x&&(l[e]=t.x-1),0===n.x&&0===n.z&&(l[e]=r/2/Math.PI+.5)}I.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:r,detail:i},r=r||1;var c=[],l=[];!function(t){for(var n=new o,r=new o,i=new o,u=0;u<e.length;u+=3){s(e[u+0],n),s(e[u+1],r),s(e[u+2],i);var c,l,h=n,f=r,d=i,p=Math.pow(2,t),m=[];for(l=0;l<=p;l++){m[l]=[];var g=h.clone().lerp(d,l/p),v=f.clone().lerp(d,l/p),y=p-l;for(c=0;c<=y;c++)m[l][c]=0===c&&l===p?g:g.clone().lerp(v,c/y)}for(l=0;l<p;l++)for(c=0;c<2*(p-l)-1;c++)h=Math.floor(c/2),0==c%2?(a(m[l][h+1]),a(m[l+1][h]),a(m[l][h])):(a(m[l][h+1]),a(m[l+1][h+1]),a(m[l+1][h]))}}(i=i||0),function(t){for(var e=new o,n=0;n<c.length;n+=3)e.x=c[n+0],e.y=c[n+1],e.z=c[n+2],e.normalize().multiplyScalar(t),c[n+0]=e.x,c[n+1]=e.y,c[n+2]=e.z}(r),function(){for(var t=new o,e=0;e<c.length;e+=3)t.x=c[e+0],t.y=c[e+1],t.z=c[e+2],l.push(Math.atan2(t.z,-t.x)/2/Math.PI+.5,1-(Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5));t=new o,e=new o;for(var r=new o,i=new o,a=new n,s=new n,h=new n,f=0,d=0;f<c.length;f+=9,d+=6){t.set(c[f+0],c[f+1],c[f+2]),e.set(c[f+3],c[f+4],c[f+5]),r.set(c[f+6],c[f+7],c[f+8]),a.set(l[d+0],l[d+1]),s.set(l[d+2],l[d+3]),h.set(l[d+4],l[d+5]),i.copy(t).add(e).add(r).divideScalar(3);var p=Math.atan2(i.z,-i.x);u(a,d+0,t,p),u(s,d+2,e,p),u(h,d+4,r,p)}for(t=0;t<l.length;t+=6)e=l[t+0],r=l[t+2],i=l[t+4],a=Math.min(e,r,i),.9<Math.max(e,r,i)&&.1>a&&(.2>e&&(l[t+0]+=1),.2>r&&(l[t+2]+=1),.2>i&&(l[t+4]+=1))}(),this.addAttribute("position",new P(c,3)),this.addAttribute("normal",new P(c.slice(),3)),this.addAttribute("uv",new P(l,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function xe(t,e){M.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new be(t,e)),this.mergeVertices()}function be(t,e){we.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function _e(t,e){M.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Me(t,e)),this.mergeVertices()}function Me(t,e){we.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Se(t,e){M.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ee(t,e)),this.mergeVertices()}function Ee(t,e){var n=(1+Math.sqrt(5))/2;we.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Te(t,e){M.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ae(t,e)),this.mergeVertices()}function Ae(t,e){var n=(1+Math.sqrt(5))/2,r=1/n;we.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ce(t,e,n,r,i,o){M.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed."),t=new ke(t,e,n,r,i),this.tangents=t.tangents,this.normals=t.normals,this.binormals=t.binormals,this.fromBufferGeometry(t),this.mergeVertices()}function ke(t,e,r,i,a){function s(n){p=t.getPointAt(n/e,p);var o=u.normals[n];for(n=u.binormals[n],l=0;l<=i;l++){var a=l/i*Math.PI*2,s=Math.sin(a);a=-Math.cos(a),f.x=a*o.x+s*n.x,f.y=a*o.y+s*n.y,f.z=a*o.z+s*n.z,f.normalize(),g.push(f.x,f.y,f.z),h.x=p.x+r*f.x,h.y=p.y+r*f.y,h.z=p.z+r*f.z,m.push(h.x,h.y,h.z)}}I.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:r,radialSegments:i,closed:a},e=e||64,r=r||1,i=i||8;var u=t.computeFrenetFrames(e,a=a||!1);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;var c,l,h=new o,f=new o,d=new n,p=new o,m=[],g=[],v=[],y=[];for(c=0;c<e;c++)s(c);for(s(!1===a?e:0),c=0;c<=e;c++)for(l=0;l<=i;l++)d.x=c/e,d.y=l/i,v.push(d.x,d.y);!function(){for(l=1;l<=e;l++)for(c=1;c<=i;c++){var t=(i+1)*l+(c-1),n=(i+1)*l+c,r=(i+1)*(l-1)+c;y.push((i+1)*(l-1)+(c-1),t,r),y.push(t,n,r)}}(),this.setIndex(y),this.addAttribute("position",new P(m,3)),this.addAttribute("normal",new P(g,3)),this.addAttribute("uv",new P(v,2))}function Re(t,e,n,r,i,o,a){M.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Oe(t,e,n,r,i,o)),this.mergeVertices()}function Oe(t,e,n,r,i,a){function s(t,e,n,r,i){var o=Math.sin(t);e=n/e*t,n=Math.cos(e),i.x=r*(2+n)*.5*Math.cos(t),i.y=r*(2+n)*o*.5,i.z=r*Math.sin(e)*.5}I.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:a},t=t||1,e=e||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,a=a||3;var u,c=[],l=[],h=[],f=[],d=new o,p=new o,m=new o,g=new o,v=new o,y=new o,w=new o;for(u=0;u<=n;++u){var x=u/n*i*Math.PI*2;for(s(x,i,a,t,m),s(x+.01,i,a,t,g),y.subVectors(g,m),w.addVectors(g,m),v.crossVectors(y,w),w.crossVectors(v,y),v.normalize(),w.normalize(),x=0;x<=r;++x){var b=x/r*Math.PI*2,_=-e*Math.cos(b);b=e*Math.sin(b),d.x=m.x+(_*w.x+b*v.x),d.y=m.y+(_*w.y+b*v.y),d.z=m.z+(_*w.z+b*v.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),h.push(p.x,p.y,p.z),f.push(u/n),f.push(x/r)}}for(x=1;x<=n;x++)for(u=1;u<=r;u++)e=(r+1)*x+u,c.push((r+1)*(x-1)+(u-1),t=(r+1)*x+(u-1),i=(r+1)*(x-1)+u),c.push(t,e,i);this.setIndex(c),this.addAttribute("position",new P(l,3)),this.addAttribute("normal",new P(h,3)),this.addAttribute("uv",new P(f,2))}function Pe(t,e,n,r,i){M.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new De(t,e,n,r,i)),this.mergeVertices()}function De(t,e,n,r,i){I.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},t=t||1,e=e||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var a,s,u=[],c=[],l=[],h=[],f=new o,d=new o,p=new o;for(a=0;a<=n;a++)for(s=0;s<=r;s++){var m=s/r*i,g=a/n*Math.PI*2;d.x=(t+e*Math.cos(g))*Math.cos(m),d.y=(t+e*Math.cos(g))*Math.sin(m),d.z=e*Math.sin(g),c.push(d.x,d.y,d.z),f.x=t*Math.cos(m),f.y=t*Math.sin(m),p.subVectors(d,f).normalize(),l.push(p.x,p.y,p.z),h.push(s/r),h.push(a/n)}for(a=1;a<=n;a++)for(s=1;s<=r;s++)e=(r+1)*(a-1)+s,u.push((r+1)*a+s-1,t=(r+1)*(a-1)+s-1,i=(r+1)*a+s),u.push(t,e,i);this.setIndex(u),this.addAttribute("position",new P(c,3)),this.addAttribute("normal",new P(l,3)),this.addAttribute("uv",new P(h,2))}function Le(t,e,n,r,i){for(var o,a=0,s=e,u=n-r;s<n;s+=r)a+=(t[u]-t[s])*(t[s+1]+t[u+1]),u=s;if(i===0<a)for(i=e;i<n;i+=r)o=We(i,t[i],t[i+1],o);else for(i=n-r;i>=e;i-=r)o=We(i,t[i],t[i+1],o);return o&&Be(o,o.next)&&(Ye(o),o=o.next),o}function Ne(t,e){if(!t)return t;e||(e=t);do{var n=!1;if(t.steiner||!Be(t,t.next)&&0!==Ve(t.prev,t,t.next))t=t.next;else{if(Ye(t),(t=e=t.prev)===t.next)break;n=!0}}while(n||t!==e);return e}function Ie(t,e){return t.x-e.x}function Fe(t,e){var n=e,r=t.x,i=t.y,o=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>o){if(o=a,a===r){if(i===n.y)return n;if(i===n.next.y)return n.next}var s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!s)return null;if(r===o)return s.prev;e=s,a=s.x;var u=s.y,c=1/0;for(n=s.next;n!==e;){if(r>=n.x&&n.x>=a&&r!==n.x&&je(i<u?r:o,i,a,u,i<u?o:r,i,n.x,n.y)){var l=Math.abs(i-n.y)/(r-n.x);(l<c||l===c&&n.x>s.x)&&Ge(n,t)&&(s=n,c=l)}n=n.next}return s}function ze(t,e,n,r,i){return 1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1)|(1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ue(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function je(t,e,n,r,i,o,a,s){return 0<=(i-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(r-s)-(n-a)*(e-s)&&0<=(n-a)*(o-s)-(i-a)*(r-s)}function Ve(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Be(t,e){return t.x===e.x&&t.y===e.y}function He(t,e,n,r){return!!(Be(t,e)&&Be(n,r)||Be(t,r)&&Be(n,e))||0<Ve(t,e,n)!=0<Ve(t,e,r)&&0<Ve(n,r,t)!=0<Ve(n,r,e)}function Ge(t,e){return 0>Ve(t.prev,t,t.next)?0<=Ve(t,e,t.next)&&0<=Ve(t,t.prev,e):0>Ve(t,e,t.prev)||0>Ve(t,t.next,e)}function qe(t,e){var n=new Xe(t.i,t.x,t.y),r=new Xe(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function We(t,e,n,r){return t=new Xe(t,e,n),r?(t.next=r.next,t.prev=r,r.next.prev=t,r.next=t):(t.prev=t,t.next=t),t}function Ye(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Xe(t,e,n){this.i=t,this.x=e,this.y=n,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function $e(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function Qe(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function Ze(t,e){M.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Je(t,e)),this.mergeVertices()}function Je(t,e){"undefined"!=typeof t&&(I.call(this),this.type="ExtrudeBufferGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),this.computeVertexNormals())}function Ke(t,e){M.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new tn(t,e)),this.mergeVertices()}function tn(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new M;t=n.generateShapes(t,e.size,e.curveSegments),e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Je.call(this,t,e),this.type="TextBufferGeometry"}function en(t,e,n,r,i,o,a){M.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new nn(t,e,n,r,i,o,a)),this.mergeVertices()}function nn(t,e,n,r,i,a,s){I.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var u,c,l=(a=void 0!==a?a:0)+(s=void 0!==s?s:Math.PI),h=0,f=[],d=new o,p=new o,m=[],g=[],v=[],y=[];for(c=0;c<=n;c++){var w=[],x=c/n;for(u=0;u<=e;u++){var b=u/e;d.x=-t*Math.cos(r+b*i)*Math.sin(a+x*s),d.y=t*Math.cos(a+x*s),d.z=t*Math.sin(r+b*i)*Math.sin(a+x*s),g.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),v.push(p.x,p.y,p.z),y.push(b,1-x),w.push(h++)}f.push(w)}for(c=0;c<n;c++)for(u=0;u<e;u++)t=f[c][u+1],r=f[c][u],i=f[c+1][u],s=f[c+1][u+1],(0!==c||0<a)&&m.push(t,r,s),(c!==n-1||l<Math.PI)&&m.push(r,i,s);this.setIndex(m),this.addAttribute("position",new P(g,3)),this.addAttribute("normal",new P(v,3)),this.addAttribute("uv",new P(y,2))}function rn(t,e,n,r,i,o){M.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new on(t,e,n,r,i,o)),this.mergeVertices()}function on(t,e,r,i,a,s){I.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:r,phiSegments:i,thetaStart:a,thetaLength:s},t=t||.5,e=e||1,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI,r=void 0!==r?Math.max(3,r):8;var u,c,l=[],h=[],f=[],d=[],p=t,m=(e-t)/(i=void 0!==i?Math.max(1,i):1),g=new o,v=new n;for(u=0;u<=i;u++){for(c=0;c<=r;c++)t=a+c/r*s,g.x=p*Math.cos(t),g.y=p*Math.sin(t),h.push(g.x,g.y,g.z),f.push(0,0,1),v.x=(g.x/e+1)/2,v.y=(g.y/e+1)/2,d.push(v.x,v.y);p+=m}for(u=0;u<i;u++)for(e=u*(r+1),c=0;c<r;c++)s=(t=c+e)+r+2,l.push(t,a=t+r+1,p=t+1),l.push(a,s,p);this.setIndex(l),this.addAttribute("position",new P(h,3)),this.addAttribute("normal",new P(f,3)),this.addAttribute("uv",new P(d,2))}function an(t,e,n,r){M.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new sn(t,e,n,r)),this.mergeVertices()}function sn(t,e,r,i){I.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:r,phiLength:i},e=Math.floor(e)||12,r=r||0,i=i||2*Math.PI,i=Si.clamp(i,0,2*Math.PI);var a,s=[],u=[],c=[],l=1/e,h=new o,f=new n;for(a=0;a<=e;a++){var d=r+a*l*i,p=Math.sin(d),m=Math.cos(d);for(d=0;d<=t.length-1;d++)h.x=t[d].x*p,h.y=t[d].y,h.z=t[d].x*m,u.push(h.x,h.y,h.z),f.x=a/e,f.y=d/(t.length-1),c.push(f.x,f.y)}for(a=0;a<e;a++)for(d=0;d<t.length-1;d++)h=(r=d+a*t.length)+t.length+1,s.push(r,l=r+t.length,f=r+1),s.push(l,h,f);if(this.setIndex(s),this.addAttribute("position",new P(u,3)),this.addAttribute("uv",new P(c,2)),this.computeVertexNormals(),i===2*Math.PI)for(i=this.attributes.normal.array,s=new o,u=new o,c=new o,r=e*t.length*3,d=a=0;a<t.length;a++,d+=3)s.x=i[d+0],s.y=i[d+1],s.z=i[d+2],u.x=i[r+d+0],u.y=i[r+d+1],u.z=i[r+d+2],c.addVectors(s,u).normalize(),i[d+0]=i[r+d+0]=c.x,i[d+1]=i[r+d+1]=c.y,i[d+2]=i[r+d+2]=c.z}function un(t,e){M.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new cn(t,e)),this.mergeVertices()}function cn(t,e){function n(t){var n,s=i.length/3,c=(t=t.extractPoints(e)).shape,l=t.holes;if(!1===Gi.isClockWise(c))for(c=c.reverse(),t=0,n=l.length;t<n;t++){var h=l[t];!0===Gi.isClockWise(h)&&(l[t]=h.reverse())}var f=Gi.triangulateShape(c,l);for(t=0,n=l.length;t<n;t++)c=c.concat(h=l[t]);for(t=0,n=c.length;t<n;t++)i.push((h=c[t]).x,h.y,0),o.push(0,0,1),a.push(h.x,h.y);for(t=0,n=f.length;t<n;t++)r.push((c=f[t])[0]+s,c[1]+s,c[2]+s),u+=3}I.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var r=[],i=[],o=[],a=[],s=0,u=0;if(!1===Array.isArray(t))n(t);else for(var c=0;c<t.length;c++)n(t[c]),this.addGroup(s,u,c),s+=u,u=0;this.setIndex(r),this.addAttribute("position",new P(i,3)),this.addAttribute("normal",new P(o,3)),this.addAttribute("uv",new P(a,2))}function ln(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++)e.shapes.push(t[n].uuid);else e.shapes.push(t.uuid);return e}function hn(t,e){I.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e};var n=[];e=Math.cos(Si.DEG2RAD*(void 0!==e?e:1));var r=[0,0],i={},o=["a","b","c"];if(t.isBufferGeometry){var a=new M;a.fromBufferGeometry(t)}else a=t.clone();a.mergeVertices(),a.computeFaceNormals(),t=a.vertices;for(var s=0,u=(a=a.faces).length;s<u;s++)for(var c=a[s],l=0;3>l;l++){var h=c[o[l]],f=c[o[(l+1)%3]];r[0]=Math.min(h,f),r[1]=Math.max(h,f),void 0===i[h=r[0]+","+r[1]]?i[h]={index1:r[0],index2:r[1],face1:s,face2:void 0}:i[h].face2=s}for(h in i)(void 0===(r=i[h]).face2||a[r.face1].normal.dot(a[r.face2].normal)<=e)&&(n.push((o=t[r.index1]).x,o.y,o.z),n.push((o=t[r.index2]).x,o.y,o.z));this.addAttribute("position",new P(n,3))}function fn(t,e,n,r,i,o,a,s){M.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new dn(t,e,n,r,i,o,a,s)),this.mergeVertices()}function dn(t,e,r,i,a,s,u,c){function l(r){var a,s=new n,l=new o,v=0,x=!0===r?t:e,b=!0===r?1:-1,_=g;for(a=1;a<=i;a++)d.push(0,y*b,0),p.push(0,b,0),m.push(.5,.5),g++;var M=g;for(a=0;a<=i;a++){var S=a/i*c+u,E=Math.cos(S);S=Math.sin(S),l.x=x*S,l.y=y*b,l.z=x*E,d.push(l.x,l.y,l.z),p.push(0,b,0),s.x=.5*E+.5,s.y=.5*S*b+.5,m.push(s.x,s.y),g++}for(a=0;a<i;a++)s=_+a,l=M+a,!0===r?f.push(l,l+1,s):f.push(l+1,l,s),v+=3;h.addGroup(w,v,!0===r?1:2),w+=v}I.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:u,thetaLength:c};var h=this;t=void 0!==t?t:1,e=void 0!==e?e:1,r=r||1,i=Math.floor(i)||8,a=Math.floor(a)||1,s=void 0!==s&&s,u=void 0!==u?u:0,c=void 0!==c?c:2*Math.PI;var f=[],d=[],p=[],m=[],g=0,v=[],y=r/2,w=0;!function(){var n,s,l=new o,x=new o,b=0,_=(e-t)/r;for(s=0;s<=a;s++){var M=[],S=s/a,E=S*(e-t)+t;for(n=0;n<=i;n++){var T=n/i,A=T*c+u,C=Math.sin(A);A=Math.cos(A),x.x=E*C,x.y=-S*r+y,x.z=E*A,d.push(x.x,x.y,x.z),l.set(C,_,A).normalize(),p.push(l.x,l.y,l.z),m.push(T,1-S),M.push(g++)}v.push(M)}for(n=0;n<i;n++)for(s=0;s<a;s++)x=v[s+1][n+1],f.push(v[s][n],l=v[s+1][n],_=v[s][n+1]),f.push(l,x,_),b+=6;h.addGroup(w,b,0),w+=b}(),!1===s&&(0<t&&l(!0),0<e&&l(!1)),this.setIndex(f),this.addAttribute("position",new P(d,3)),this.addAttribute("normal",new P(p,3)),this.addAttribute("uv",new P(m,2))}function pn(t,e,n,r,i,o,a){fn.call(this,0,t,e,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function mn(t,e,n,r,i,o,a){dn.call(this,0,t,e,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function gn(t,e,n,r){M.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new vn(t,e,n,r)),this.mergeVertices()}function vn(t,e,r,i){I.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:r,thetaLength:i},t=t||1,e=void 0!==e?Math.max(3,e):8,r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var a,s=[],u=[],c=[],l=[],h=new o,f=new n;u.push(0,0,0),c.push(0,0,1),l.push(.5,.5);var d=0;for(a=3;d<=e;d++,a+=3){var p=r+d/e*i;h.x=t*Math.cos(p),h.y=t*Math.sin(p),u.push(h.x,h.y,h.z),c.push(0,0,1),f.x=(u[a]/t+1)/2,f.y=(u[a+1]/t+1)/2,l.push(f.x,f.y)}for(a=1;a<=e;a++)s.push(a,a+1,0);this.setIndex(s),this.addAttribute("position",new P(u,3)),this.addAttribute("normal",new P(c,3)),this.addAttribute("uv",new P(l,2))}function yn(t){V.call(this),this.type="ShadowMaterial",this.color=new g(0),this.transparent=!0,this.setValues(t)}function wn(t){H.call(this,t),this.type="RawShaderMaterial"}function xn(t){V.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new g(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new g(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function bn(t){xn.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoatRoughness=this.clearCoat=0,this.setValues(t)}function _n(t){V.call(this),this.type="MeshPhongMaterial",this.color=new g(16777215),this.specular=new g(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new g(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function Mn(t){_n.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function Sn(t){V.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(t)}function En(t){V.call(this),this.type="MeshLambertMaterial",this.color=new g(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new g(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function Tn(t){oe.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function An(t,e,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===i&&void 0!==r.onStart&&r.onStart(t,o,a),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(i=!1,void 0!==r.onLoad)&&r.onLoad()},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}function Cn(t){this.manager=void 0!==t?t:Xi}function kn(t){this.manager=void 0!==t?t:Xi,this._parser=null}function Rn(t){this.manager=void 0!==t?t:Xi,this._parser=null}function On(t){this.manager=void 0!==t?t:Xi}function Pn(t){this.manager=void 0!==t?t:Xi}function Dn(t){this.manager=void 0!==t?t:Xi}function Ln(){this.type="Curve",this.arcLengthDivisions=200}function Nn(t,e,n,r,i,o,a,s){Ln.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function In(t,e,n,r,i,o){Nn.call(this,t,e,n,n,r,i,o),this.type="ArcCurve"}function Fn(){var t=0,e=0,n=0,r=0;return{initCatmullRom:function(i,o,a,s,u){t=o,e=i=u*(a-i),n=-3*o+3*a-2*i-(s=u*(s-o)),r=2*o-2*a+i+s},initNonuniformCatmullRom:function(i,o,a,s,u,c,l){t=o,e=i=((o-i)/u-(a-i)/(u+c)+(a-o)/c)*c,n=-3*o+3*a-2*i-(s=((a-o)/c-(s-o)/(c+l)+(s-a)/l)*c),r=2*o-2*a+i+s},calc:function(i){var o=i*i;return t+e*i+n*o+r*o*i}}}function zn(t,e,n,r){Ln.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Un(t,e,n,r,i){var o=t*t;return(2*n-2*r+(e=.5*(r-e))+(i=.5*(i-n)))*t*o+(-3*n+3*r-2*e-i)*o+e*t+n}function jn(t,e,n,r){var i=1-t;return i*i*e+2*(1-t)*t*n+t*t*r}function Vn(t,e,n,r,i){var o=1-t,a=1-t;return o*o*o*e+3*a*a*t*n+3*(1-t)*t*t*r+t*t*t*i}function Bn(t,e,r,i){Ln.call(this),this.type="CubicBezierCurve",this.v0=t||new n,this.v1=e||new n,this.v2=r||new n,this.v3=i||new n}function Hn(t,e,n,r){Ln.call(this),this.type="CubicBezierCurve3",this.v0=t||new o,this.v1=e||new o,this.v2=n||new o,this.v3=r||new o}function Gn(t,e){Ln.call(this),this.type="LineCurve",this.v1=t||new n,this.v2=e||new n}function qn(t,e){Ln.call(this),this.type="LineCurve3",this.v1=t||new o,this.v2=e||new o}function Wn(t,e,r){Ln.call(this),this.type="QuadraticBezierCurve",this.v0=t||new n,this.v1=e||new n,this.v2=r||new n}function Yn(t,e,n){Ln.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new o,this.v1=e||new o,this.v2=n||new o}function Xn(t){Ln.call(this),this.type="SplineCurve",this.points=t||[]}function $n(){Ln.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Qn(t){$n.call(this),this.type="Path",this.currentPoint=new n,t&&this.setFromPoints(t)}function Zn(t){Qn.call(this,t),this.uuid=Si.generateUUID(),this.type="Shape",this.holes=[]}function Jn(t,e){w.call(this),this.type="Light",this.color=new g(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Kn(t,e,n){Jn.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(w.DefaultUp),this.updateMatrix(),this.groundColor=new g(e)}function tr(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new n(512,512),this.map=null,this.matrix=new r}function er(){tr.call(this,new Wt(50,1,.5,500))}function nr(t,e,n,r,i,o){Jn.call(this,t,e),this.type="SpotLight",this.position.copy(w.DefaultUp),this.updateMatrix(),this.target=new w,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new er}function rr(t,e,n,r){Jn.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new tr(new Wt(90,1,.5,500))}function ir(){tr.call(this,new b(-5,5,5,-5,.5,500))}function or(t,e){Jn.call(this,t,e),this.type="DirectionalLight",this.position.copy(w.DefaultUp),this.updateMatrix(),this.target=new w,this.shadow=new ir}function ar(t,e){Jn.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function sr(t,e,n,r){Jn.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function ur(t,e,n,r){yr.call(this,t,e,n,r)}function cr(t,e,n){yr.call(this,t,e,n)}function lr(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function hr(t,e,n,r){lr.call(this,t,e,n,r)}function fr(t,e,n,r){yr.call(this,t,e,n,r)}function dr(t,e,n,r){yr.call(this,t,e,n,r)}function pr(t,e,n,r){yr.call(this,t,e,n,r)}function mr(t,e,n,r){lr.call(this,t,e,n,r),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function gr(t,e,n,r){lr.call(this,t,e,n,r)}function vr(t,e,n,r){lr.call(this,t,e,n,r)}function yr(t,e,n,r){if(void 0===t)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=eo.convertArray(e,this.TimeBufferType),this.values=eo.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function wr(t,e,n,r){yr.call(this,t,e,n,r)}function xr(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=Si.generateUUID(),0>this.duration&&this.resetDuration(),this.optimize()}function br(t){this.manager=void 0!==t?t:Xi,this.textures={}}function _r(t){this.manager=void 0!==t?t:Xi}function Mr(){}function Sr(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:Xi,this.withCredentials=!1}function Er(t){this.manager=void 0!==t?t:Xi,this.texturePath=""}function Tr(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:Xi,this.options=void 0}function Ar(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function Cr(t){this.type="Font",this.data=t}function kr(t){this.manager=void 0!==t?t:Xi}function Rr(t){this.manager=void 0!==t?t:Xi}function Or(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Wt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Wt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Pr(t,e,n){w.call(this),this.type="CubeCamera";var r=new Wt(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new o(1,0,0)),this.add(r);var i=new Wt(90,1,t,e);i.up.set(0,-1,0),i.lookAt(new o(-1,0,0)),this.add(i);var a=new Wt(90,1,t,e);a.up.set(0,0,1),a.lookAt(new o(0,1,0)),this.add(a);var s=new Wt(90,1,t,e);s.up.set(0,0,-1),s.lookAt(new o(0,-1,0)),this.add(s);var u=new Wt(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new o(0,0,1)),this.add(u);var c=new Wt(90,1,t,e);c.up.set(0,-1,0),c.lookAt(new o(0,0,-1)),this.add(c),this.renderTarget=new l(n,n,{format:1022,magFilter:1006,minFilter:1006}),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,o=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,r,n),n.activeCubeFace=1,t.render(e,i,n),n.activeCubeFace=2,t.render(e,a,n),n.activeCubeFace=3,t.render(e,s,n),n.activeCubeFace=4,t.render(e,u,n),n.texture.generateMipmaps=o,n.activeCubeFace=5,t.render(e,c,n),t.setRenderTarget(null)},this.clear=function(t,e,n,r){for(var i=this.renderTarget,o=0;6>o;o++)i.activeCubeFace=o,t.setRenderTarget(i),t.clear(e,n,r);t.setRenderTarget(null)}}function Dr(){w.call(this),this.type="AudioListener",this.context=lo.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Lr(t){w.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.offset=this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Nr(t){Lr.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Ir(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Fr(t,e,n){switch(this.binding=t,this.valueSize=n,t=Float64Array,e){case"quaternion":e=this._slerp;break;case"string":case"bool":t=Array,e=this._select;break;default:e=this._lerp}this.buffer=new t(4*n),this._mixBufferRegion=e,this.referenceCount=this.useCount=this.cumulativeWeight=0}function zr(t,e,n){n=n||Ur.parseTrackName(e),this._targetGroup=t,this._bindings=t.subscribe_(e,n)}function Ur(t,e,n){this.path=e,this.parsedPath=n||Ur.parseTrackName(e),this.node=Ur.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function jr(){this.uuid=Si.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function Vr(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null,e=(t=e.tracks).length,n=Array(e);for(var r={endingStart:2400,endingEnd:2400},i=0;i!==e;++i){var o=t[i].createInterpolant(null);n[i]=o,o.settings=r}this._interpolantSettings=r,this._interpolants=n,this._propertyBindings=Array(e),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function Br(t){this._root=t,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function Hr(t,e){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=e),this.value=t}function Gr(){I.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function qr(t,e,n,r){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}function Wr(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Yr(t,e,n){Wr.call(this,t,e),this.meshPerAttribute=n||1}function Xr(t,e,n){S.call(this,t,e),this.meshPerAttribute=n||1}function $r(t,e,n,r){this.ray=new G(t,e),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Qr(t,e){return t.distance-e.distance}function Zr(t,e,n,r){if(!1!==t.visible&&(t.raycast(e,n),!0===r)){r=0;for(var i=(t=t.children).length;r<i;r++)Zr(t[r],e,n,!0)}}function Jr(t){this.autoStart=void 0===t||t,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function Kr(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function ti(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function ei(t,e){this.min=void 0!==t?t:new n(1/0,1/0),this.max=void 0!==e?e:new n(-1/0,-1/0)}function ni(t){w.call(this),this.material=t,this.render=function(){}}function ri(t,e,n,r){this.object=t,this.size=void 0!==e?e:1,t=void 0!==n?n:16711680,r=void 0!==r?r:1,e=0,(n=this.object.geometry)&&n.isGeometry?e=3*n.faces.length:n&&n.isBufferGeometry&&(e=n.attributes.normal.count),n=new I,e=new P(6*e,3),n.addAttribute("position",e),se.call(this,n,new oe({color:t,linewidth:r})),this.matrixAutoUpdate=!1,this.update()}function ii(t,e){w.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,t=new I,e=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var n=0,r=1;32>n;n++,r++){var i=n/32*Math.PI*2,o=r/32*Math.PI*2;e.push(Math.cos(i),Math.sin(i),1,Math.cos(o),Math.sin(o),1)}t.addAttribute("position",new P(e,3)),e=new oe({fog:!1}),this.cone=new se(t,e),this.add(this.cone),this.update()}function oi(t){for(var e=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var r=0;r<e.children.length;r++)n.push.apply(n,t(e.children[r]));return n}(t),n=new I,r=[],i=[],o=new g(0,0,1),a=new g(0,1,0),s=0;s<e.length;s++){var u=e[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new P(r,3)),n.addAttribute("color",new P(i,3)),r=new oe({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),se.call(this,n,r),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function ai(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n,t=new nn(e,4,2),e=new B({wireframe:!0,fog:!1}),Y.call(this,t,e),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function si(t,e){w.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,t=new oe({fog:!1}),(e=new I).addAttribute("position",new S(new Float32Array(15),3)),this.line=new ae(e,t),this.add(this.line),this.update()}function ui(t,e,n){w.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,(t=new Me(e)).rotateY(.5*Math.PI),this.material=new B({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2),e=t.getAttribute("position"),e=new Float32Array(3*e.count),t.addAttribute("color",new S(e,3)),this.add(new Y(t,this.material)),this.update()}function ci(t,e,n,r){t=t||10,e=e||10,n=new g(void 0!==n?n:4473924),r=new g(void 0!==r?r:8947848);var i=e/2,o=t/e,a=t/2;t=[];for(var s=[],u=0,c=0,l=-a;u<=e;u++,l+=o){t.push(-a,0,l,a,0,l),t.push(l,0,-a,l,0,a);var h=u===i?n:r;h.toArray(s,c),h.toArray(s,c+=3),h.toArray(s,c+=3),h.toArray(s,c+=3),c+=3}(e=new I).addAttribute("position",new P(t,3)),e.addAttribute("color",new P(s,3)),n=new oe({vertexColors:2}),se.call(this,e,n)}function li(t,e,n,r,i,o){t=t||10,e=e||16,n=n||8,r=r||64,i=new g(void 0!==i?i:4473924),o=new g(void 0!==o?o:8947848);var a,s=[],u=[];for(a=0;a<=e;a++){var c=a/e*2*Math.PI,l=Math.sin(c)*t;c=Math.cos(c)*t,s.push(0,0,0),s.push(l,0,c);var h=1&a?i:o;u.push(h.r,h.g,h.b),u.push(h.r,h.g,h.b)}for(a=0;a<=n;a++){h=1&a?i:o;var f=t-t/n*a;for(e=0;e<r;e++)c=e/r*2*Math.PI,l=Math.sin(c)*f,c=Math.cos(c)*f,s.push(l,0,c),u.push(h.r,h.g,h.b),c=(e+1)/r*2*Math.PI,l=Math.sin(c)*f,c=Math.cos(c)*f,s.push(l,0,c),u.push(h.r,h.g,h.b)}(t=new I).addAttribute("position",new P(s,3)),t.addAttribute("color",new P(u,3)),s=new oe({vertexColors:2}),se.call(this,t,s)}function hi(t,e,n,r){this.object=t,this.size=void 0!==e?e:1,t=void 0!==n?n:16776960,r=void 0!==r?r:1,e=0,(n=this.object.geometry)&&n.isGeometry?e=n.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),n=new I,e=new P(6*e,3),n.addAttribute("position",e),se.call(this,n,new oe({color:t,linewidth:r})),this.matrixAutoUpdate=!1,this.update()}function fi(t,e,n){w.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1),(t=new I).addAttribute("position",new P([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3)),e=new oe({fog:!1}),this.lightPlane=new ae(t,e),this.add(this.lightPlane),(t=new I).addAttribute("position",new P([0,0,0,0,0,1],3)),this.targetLine=new ae(t,e),this.add(this.targetLine),this.update()}function di(t){function e(t,e,r){n(t,r),n(e,r)}function n(t,e){o.push(0,0,0),a.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(o.length/3-1)}var r=new I,i=new oe({color:16777215,vertexColors:1}),o=[],a=[],s={},u=new g(16755200),c=new g(16711680),l=new g(43775),h=new g(16777215),f=new g(3355443);e("n1","n2",u),e("n2","n4",u),e("n4","n3",u),e("n3","n1",u),e("f1","f2",u),e("f2","f4",u),e("f4","f3",u),e("f3","f1",u),e("n1","f1",u),e("n2","f2",u),e("n3","f3",u),e("n4","f4",u),e("p","n1",c),e("p","n2",c),e("p","n3",c),e("p","n4",c),e("u1","u2",l),e("u2","u3",l),e("u3","u1",l),e("c","t",h),e("p","c",f),e("cn1","cn2",f),e("cn3","cn4",f),e("cf1","cf2",f),e("cf3","cf4",f),r.addAttribute("position",new P(o,3)),r.addAttribute("color",new P(a,3)),se.call(this,r,i),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function pi(t,e){this.object=t,void 0===e&&(e=16776960),t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=new Float32Array(24),r=new I;r.setIndex(new S(t,1)),r.addAttribute("position",new S(n,3)),se.call(this,r,new oe({color:e})),this.matrixAutoUpdate=!1,this.update()}function mi(t,e){this.type="Box3Helper",this.box=t,t=void 0!==e?e:16776960,e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=new I;n.setIndex(new S(e,1)),n.addAttribute("position",new P([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),se.call(this,n,new oe({color:t})),this.geometry.computeBoundingSphere()}function gi(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e,t=void 0!==n?n:16776960,(e=new I).addAttribute("position",new P([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),e.computeBoundingSphere(),ae.call(this,e,new oe({color:t})),(e=new I).addAttribute("position",new P([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),e.computeBoundingSphere(),this.add(new Y(e,new B({color:t,opacity:.2,transparent:!0,depthWrite:!1})))}function vi(t,e,n,r,i,o){w.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===uo&&((uo=new I).addAttribute("position",new P([0,0,0,0,1,0],3)),(co=new dn(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new ae(uo,new oe({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Y(co,new B({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,o)}function yi(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t];(t=new I).addAttribute("position",new P(e,3)),t.addAttribute("color",new P([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),e=new oe({vertexColors:2}),se.call(this,t,e)}function wi(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),zn.call(this,t),this.type="catmullrom",this.closed=!0}function xi(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),zn.call(this,t),this.type="catmullrom"}function bi(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),zn.call(this,t),this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return 0>t?-1:0<t?1:+t}),0=="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){void 0!==this._listeners&&void 0!==(t=this._listeners[t])&&-1!==(e=t.indexOf(e))&&t.splice(e,1)},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=0,r=(e=e.slice(0)).length;n<r;n++)e[n].call(this,t)}}}});var _i,Mi,Si={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;256>e;e++)t[e]=(16>e?"0":"")+e.toString(16).toUpperCase();return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&r|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Si.DEG2RAD},radToDeg:function(t){return t*Si.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};Object.defineProperties(n.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(n.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y;return this.x=(t=t.elements)[0]*e+t[3]*n+t[6],this.y=t[1]*e+t[4]*n+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:(_i=new n,Mi=new n,function(t,e){return _i.set(t,t),Mi.set(e,e),this.clamp(_i,Mi)}),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return 0>t&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e);e=Math.sin(e);var r=this.x-t.x,i=this.y-t.y;return this.x=r*n-i*e+t.x,this.y=r*e+i*n+t.y,this}}),Object.assign(r.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=u,g[6]=c,g[10]=l,g[14]=h,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new r).fromArray(this.elements)},copy:function(t){var e=this.elements;return e[0]=(t=t.elements)[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(t){var e=this.elements;return e[12]=(t=t.elements)[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new o;return function(e){var n=this.elements,r=e.elements,i=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length();return e=1/t.setFromMatrixColumn(e,2).length(),n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[8]=r[8]*e,n[9]=r[9]*e,n[10]=r[10]*e,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n);n=Math.sin(n);var a=Math.cos(r);r=Math.sin(r);var s=Math.cos(i);if(i=Math.sin(i),"XYZ"===t.order){t=o*s;var u=o*i,c=n*s,l=n*i;e[0]=a*s,e[4]=-a*i,e[8]=r,e[1]=u+c*r,e[5]=t-l*r,e[9]=-n*a,e[2]=l-t*r,e[6]=c+u*r,e[10]=o*a}else"YXZ"===t.order?(u=a*i,c=r*s,e[0]=(t=a*s)+(l=r*i)*n,e[4]=c*n-u,e[8]=o*r,e[1]=o*i,e[5]=o*s,e[9]=-n,e[2]=u*n-c,e[6]=l+t*n,e[10]=o*a):"ZXY"===t.order?(u=a*i,c=r*s,e[0]=(t=a*s)-(l=r*i)*n,e[4]=-o*i,e[8]=c+u*n,e[1]=u+c*n,e[5]=o*s,e[9]=l-t*n,e[2]=-o*r,e[6]=n,e[10]=o*a):"ZYX"===t.order?(t=o*s,u=o*i,c=n*s,l=n*i,e[0]=a*s,e[4]=c*r-u,e[8]=t*r+l,e[1]=a*i,e[5]=l*r+t,e[9]=u*r-c,e[2]=-r,e[6]=n*a,e[10]=o*a):"YZX"===t.order?(t=o*a,u=o*r,c=n*a,l=n*r,e[0]=a*s,e[4]=l-t*i,e[8]=c*i+u,e[1]=i,e[5]=o*s,e[9]=-n*s,e[2]=-r*s,e[6]=u*i+c,e[10]=t-l*i):"XZY"===t.order&&(t=o*a,u=o*r,c=n*a,l=n*r,e[0]=a*s,e[4]=-i,e[8]=r*s,e[1]=t*i+l,e[5]=o*s,e[9]=u*i-c,e[2]=c*i-u,e[6]=n*s,e[10]=l*i+t);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t._x,r=t._y,i=t._z,o=t._w,a=n+n,s=r+r,u=i+i;t=n*a;var c=n*s;n*=u;var l=r*s;return r*=u,a*=o,s*=o,o*=u,e[0]=1-(l+(i*=u)),e[4]=c-o,e[8]=n+s,e[1]=c+o,e[5]=1-(t+i),e[9]=r-a,e[2]=n-s,e[6]=r+a,e[10]=1-(t+l),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t=new o,e=new o,n=new o;return function(r,i,o){var a=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),t.crossVectors(o,n),0===t.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),t.crossVectors(o,n)),t.normalize(),e.crossVectors(n,t),a[0]=t.x,a[4]=e.x,a[8]=n.x,a[1]=t.y,a[5]=e.y,a[9]=n.y,a[2]=t.z,a[6]=e.z,a[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements;t=n[0];var i=n[4],o=n[8],a=n[12],s=n[1],u=n[5],c=n[9],l=n[13],h=n[2],f=n[6],d=n[10],p=n[14],m=n[3],g=n[7],v=n[11];n=n[15];var y=r[0],w=r[4],x=r[8],b=r[12],_=r[1],M=r[5],S=r[9],E=r[13],T=r[2],A=r[6],C=r[10],k=r[14],R=r[3],O=r[7],P=r[11];return r=r[15],(e=this.elements)[0]=t*y+i*_+o*T+a*R,e[4]=t*w+i*M+o*A+a*O,e[8]=t*x+i*S+o*C+a*P,e[12]=t*b+i*E+o*k+a*r,e[1]=s*y+u*_+c*T+l*R,e[5]=s*w+u*M+c*A+l*O,e[9]=s*x+u*S+c*C+l*P,e[13]=s*b+u*E+c*k+l*r,e[2]=h*y+f*_+d*T+p*R,e[6]=h*w+f*M+d*A+p*O,e[10]=h*x+f*S+d*C+p*P,e[14]=h*b+f*E+d*k+p*r,e[3]=m*y+g*_+v*T+n*R,e[7]=m*w+g*M+v*A+n*O,e[11]=m*x+g*S+v*C+n*P,e[15]=m*b+g*E+v*k+n*r,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new o;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],c=t[2],l=t[6],h=t[10],f=t[14];return t[3]*(+i*s*l-r*u*l-i*a*h+n*u*h+r*a*f-n*s*f)+t[7]*(+e*s*f-e*u*h+i*o*h-r*o*f+r*u*c-i*s*c)+t[11]*(+e*u*l-e*a*f-i*o*l+n*o*f+i*a*c-n*u*c)+t[15]*(-r*a*c-e*s*l+e*a*h+r*o*l-n*o*h+n*s*c)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements;t=r[0];var i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],c=r[6],l=r[7],h=r[8],f=r[9],d=r[10],p=r[11],m=r[12],g=r[13],v=r[14],y=f*v*l-g*d*l+g*c*p-u*v*p-f*c*(r=r[15])+u*d*r,w=m*d*l-h*v*l-m*c*p+s*v*p+h*c*r-s*d*r,x=h*g*l-m*f*l+m*u*p-s*g*p-h*u*r+s*f*r,b=m*f*c-h*g*c-m*u*d+s*g*d+h*u*v-s*f*v,_=t*y+i*w+o*x+a*b;if(0===_){if(!0===e)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return n[0]=y*(e=1/_),n[1]=(g*d*a-f*v*a-g*o*p+i*v*p+f*o*r-i*d*r)*e,n[2]=(u*v*a-g*c*a+g*o*l-i*v*l-u*o*r+i*c*r)*e,n[3]=(f*c*a-u*d*a-f*o*l+i*d*l+u*o*p-i*c*p)*e,n[4]=w*e,n[5]=(h*v*a-m*d*a+m*o*p-t*v*p-h*o*r+t*d*r)*e,n[6]=(m*c*a-s*v*a-m*o*l+t*v*l+s*o*r-t*c*r)*e,n[7]=(s*d*a-h*c*a+h*o*l-t*d*l-s*o*p+t*c*p)*e,n[8]=x*e,n[9]=(m*f*a-h*g*a-m*i*p+t*g*p+h*i*r-t*f*r)*e,n[10]=(s*g*a-m*u*a+m*i*l-t*g*l-s*i*r+t*u*r)*e,n[11]=(h*u*a-s*f*a-h*i*l+t*f*l+s*i*p-t*u*p)*e,n[12]=b*e,n[13]=(h*g*o-m*f*o+m*i*d-t*g*d-h*i*v+t*f*v)*e,n[14]=(m*u*o-s*g*o-m*i*c+t*g*c+s*i*v-t*u*v)*e,n[15]=(s*f*o-h*u*o+h*i*c-t*f*c-s*i*d+t*u*d)*e,this},scale:function(t){var e=this.elements,n=t.x,r=t.y;return t=t.z,e[0]*=n,e[4]*=r,e[8]*=t,e[1]*=n,e[5]*=r,e[9]*=t,e[2]*=n,e[6]*=r,e[10]*=t,e[3]*=n,e[7]*=r,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e);e=Math.sin(e);var r=1-n,i=t.x,o=t.y,a=r*i,s=r*o;return this.set(a*i+n,a*o-e*(t=t.z),a*t+e*o,0,a*o+e*t,s*o+n,s*t-e*i,0,a*t-e*o,s*t+e*i,r*t*t+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(){var t=new o,e=new r;return function(n,r,i){var o=this.elements,a=t.set(o[0],o[1],o[2]).length(),s=t.set(o[4],o[5],o[6]).length(),u=t.set(o[8],o[9],o[10]).length();0>this.determinant()&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],e.copy(this),o=1/s;var c=1/u;return e.elements[0]*=n=1/a,e.elements[1]*=n,e.elements[2]*=n,e.elements[4]*=o,e.elements[5]*=o,e.elements[6]*=o,e.elements[8]*=c,e.elements[9]*=c,e.elements[10]*=c,r.setFromRotationMatrix(e),i.x=a,i.y=s,i.z=u,this}}(),makePerspective:function(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements;return a[0]=2*i/(e-t),a[4]=0,a[8]=(e+t)/(e-t),a[12]=0,a[1]=0,a[5]=2*i/(n-r),a[9]=(n+r)/(n-r),a[13]=0,a[2]=0,a[6]=0,a[10]=-(o+i)/(o-i),a[14]=-2*o*i/(o-i),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,r,i,o){var a=this.elements,s=1/(e-t),u=1/(n-r),c=1/(o-i);return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-(e+t)*s,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-(n+r)*u,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-(o+i)*c,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){var e=this.elements;t=t.elements;for(var n=0;16>n;n++)if(e[n]!==t[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;16>n;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),Object.assign(i,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,a){var s=n[r+0],u=n[r+1],c=n[r+2];n=n[r+3],r=i[o+0];var l=i[o+1],h=i[o+2];if(n!==(i=i[o+3])||s!==r||u!==l||c!==h){o=1-a;var f=s*r+u*l+c*h+n*i,d=0<=f?1:-1,p=1-f*f;p>Number.EPSILON&&(p=Math.sqrt(p),f=Math.atan2(p,f*d),o=Math.sin(o*f)/p,a=Math.sin(a*f)/p),s=s*o+r*(d*=a),u=u*o+l*d,c=c*o+h*d,n=n*o+i*d,o===1-a&&(s*=a=1/Math.sqrt(s*s+u*u+c*c+n*n),u*=a,c*=a,n*=a)}t[e]=s,t[e+1]=u,t[e+2]=c,t[e+3]=n}}),Object.defineProperties(i.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(i.prototype,{set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z;t=t.order;var o=Math.cos,a=Math.sin,s=o(n/2),u=o(r/2);return o=o(i/2),n=a(n/2),r=a(r/2),i=a(i/2),"XYZ"===t?(this._x=n*u*o+s*r*i,this._y=s*r*o-n*u*i,this._z=s*u*i+n*r*o,this._w=s*u*o-n*r*i):"YXZ"===t?(this._x=n*u*o+s*r*i,this._y=s*r*o-n*u*i,this._z=s*u*i-n*r*o,this._w=s*u*o+n*r*i):"ZXY"===t?(this._x=n*u*o-s*r*i,this._y=s*r*o+n*u*i,this._z=s*u*i+n*r*o,this._w=s*u*o-n*r*i):"ZYX"===t?(this._x=n*u*o-s*r*i,this._y=s*r*o+n*u*i,this._z=s*u*i-n*r*o,this._w=s*u*o+n*r*i):"YZX"===t?(this._x=n*u*o+s*r*i,this._y=s*r*o+n*u*i,this._z=s*u*i-n*r*o,this._w=s*u*o-n*r*i):"XZY"===t&&(this._x=n*u*o-s*r*i,this._y=s*r*o-n*u*i,this._z=s*u*i+n*r*o,this._w=s*u*o+n*r*i),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){e/=2;var n=Math.sin(e);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(e),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,n=e[0];t=e[4];var r=e[8],i=e[1],o=e[5],a=e[9],s=e[2],u=e[6],c=n+o+(e=e[10]);return 0<c?(n=.5/Math.sqrt(c+1),this._w=.25/n,this._x=(u-a)*n,this._y=(r-s)*n,this._z=(i-t)*n):n>o&&n>e?(n=2*Math.sqrt(1+n-o-e),this._w=(u-a)/n,this._x=.25*n,this._y=(t+i)/n,this._z=(r+s)/n):o>e?(n=2*Math.sqrt(1+o-n-e),this._w=(r-s)/n,this._x=(t+i)/n,this._y=.25*n,this._z=(a+u)/n):(n=2*Math.sqrt(1+e-n-o),this._w=(i-t)/n,this._x=(r+s)/n,this._y=(a+u)/n,this._z=.25*n),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new o;return function(n,r){return void 0===e&&(e=new o),1e-6>(t=n.dot(r)+1)?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,r),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(this._x*=t=1/t,this._y*=t,this._z*=t,this._w*=t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=e._x,a=e._y,s=e._z;return this._x=n*(e=e._w)+(t=t._w)*o+r*s-i*a,this._y=r*e+t*a+i*o-n*s,this._z=i*e+t*s+n*a-r*o,this._w=t*e-n*o-r*a-i*s,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(0>a?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),1<=a)return this._w=o,this._x=n,this._y=r,this._z=i,this;if(t=Math.sqrt(1-a*a),.001>Math.abs(t))return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var s=Math.atan2(t,a);return a=Math.sin((1-e)*s)/t,e=Math.sin(e*s)/t,this._w=o*a+this._w*e,this._x=n*a+this._x*e,this._y=r*a+this._y*e,this._z=i*a+this._z*e,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(o.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t=new i;return function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t=new i;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z;return this.x=(t=t.elements)[0]*e+t[3]*n+t[6]*r,this.y=t[1]*e+t[4]*n+t[7]*r,this.z=t[2]*e+t[5]*n+t[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=1/((t=t.elements)[3]*e+t[7]*n+t[11]*r+t[15]);return this.x=(t[0]*e+t[4]*n+t[8]*r+t[12])*i,this.y=(t[1]*e+t[5]*n+t[9]*r+t[13])*i,this.z=(t[2]*e+t[6]*n+t[10]*r+t[14])*i,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=(t=t.w)*e+o*r-a*n,u=t*n+a*e-i*r,c=t*r+i*n-o*e;return this.x=s*t+(e=-i*e-o*n-a*r)*-i+u*-a-c*-o,this.y=u*t+e*-o+c*-i-s*-a,this.z=c*t+e*-a+s*-o-u*-i,this},project:function(){var t=new r;return function(e){return t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t=new r;return function(e){return t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,r=this.z;return this.x=(t=t.elements)[0]*e+t[4]*n+t[8]*r,this.y=t[1]*e+t[5]*n+t[9]*r,this.z=t[2]*e+t[6]*n+t[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t=new o,e=new o;return function(n,r){return t.set(n,n,n),e.set(r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=e.x,o=e.y;return this.x=r*(e=e.z)-(t=t.z)*o,this.y=t*i-n*e,this.z=n*o-r*i,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new o;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new o;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){return t=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq()),Math.acos(Si.clamp(t,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n+(t=this.z-t.z)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.x=(t=t.elements)[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length();return t=this.setFromMatrixColumn(t,2).length(),this.x=e,this.y=n,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(a.prototype,{isMatrix3:!0,set:function(t,e,n,r,i,o,a,s,u){var c=this.elements;return c[0]=t,c[1]=r,c[2]=a,c[3]=e,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements;return e[0]=(t=t.elements)[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},setFromMatrix4:function(t){return this.set((t=t.elements)[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var t=new o;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements;t=n[0];var i=n[3],o=n[6],a=n[1],s=n[4],u=n[7],c=n[2],l=n[5];n=n[8];var h=r[0],f=r[3],d=r[6],p=r[1],m=r[4],g=r[7],v=r[2],y=r[5];return r=r[8],(e=this.elements)[0]=t*h+i*p+o*v,e[3]=t*f+i*m+o*y,e[6]=t*d+i*g+o*r,e[1]=a*h+s*p+u*v,e[4]=a*f+s*m+u*y,e[7]=a*d+s*g+u*r,e[2]=c*h+l*p+n*v,e[5]=c*f+l*m+n*y,e[8]=c*d+l*g+n*r,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7];return e*o*(t=t[8])-e*a*u-n*i*t+n*a*s+r*i*u-r*o*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements;t=this.elements;var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=(n=n[8])*s-u*l,f=u*c-n*a,d=l*a-s*c,p=r*h+i*f+o*d;if(0===p){if(!0===e)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return t[0]=h*(e=1/p),t[1]=(o*l-n*i)*e,t[2]=(u*i-o*s)*e,t[3]=f*e,t[4]=(n*r-o*c)*e,t[5]=(o*a-u*r)*e,t[6]=d*e,t[7]=(i*c-l*r)*e,t[8]=(s*r-i*a)*e,this},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,o,a){var s=Math.cos(i);i=Math.sin(i),this.set(n*s,n*i,-n*(s*o+i*a)+o+t,-r*i,r*s,-r*(-i*o+s*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t);t=Math.sin(t);var n=this.elements,r=n[0],i=n[3],o=n[6],a=n[1],s=n[4],u=n[7];return n[0]=e*r+t*a,n[3]=e*i+t*s,n[6]=e*o+t*u,n[1]=-t*r+e*a,n[4]=-t*i+e*s,n[7]=-t*o+e*u,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){var e=this.elements;t=t.elements;for(var n=0;9>n;n++)if(e[n]!==t[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;9>n;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var Ei=0;s.DEFAULT_IMAGE=void 0,s.DEFAULT_MAPPING=300,s.prototype=Object.assign(Object.create(e.prototype),{constructor:s,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Si.generateUUID()),!e&&void 0===t.images[r.uuid]){var i=t.images,o=r.uuid,a=r.uuid;if(r instanceof HTMLCanvasElement)var s=r;else{(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=r.width,s.height=r.height;var u=s.getContext("2d");r instanceof ImageData?u.putImageData(r,0,0):u.drawImage(r,0,0,r.width,r.height)}s=2048<s.width||2048<s.height?s.toDataURL("image/jpeg",.6):s.toDataURL("image/png"),i[o]={uuid:a,url:s}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300===this.mapping){if(t.applyMatrix3(this.matrix),0>t.x||1<t.x)switch(this.wrapS){case 1e3:t.x-=Math.floor(t.x);break;case 1001:t.x=0>t.x?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(0>t.y||1<t.y)switch(this.wrapT){case 1e3:t.y-=Math.floor(t.y);break;case 1001:t.y=0>t.y?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}}),Object.defineProperty(s.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(u.prototype,{isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.w=this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w;return this.x=(t=t.elements)[0]*e+t[4]*n+t[8]*r+t[12]*i,this.y=t[1]*e+t[5]*n+t[9]*r+t[13]*i,this.z=t[2]*e+t[6]*n+t[10]*r+t[14]*i,this.w=t[3]*e+t[7]*n+t[11]*r+t[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.z=this.y=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e=(t=t.elements)[0],n=t[4],r=t[8],i=t[1],o=t[5],a=t[9],s=t[2],u=t[6],c=t[10];return.01>Math.abs(n-i)&&.01>Math.abs(r-s)&&.01>Math.abs(a-u)?.1>Math.abs(n+i)&&.1>Math.abs(r+s)&&.1>Math.abs(a+u)&&.1>Math.abs(e+o+c-3)?(this.set(1,0,0,0),this):(t=Math.PI,c=(c+1)/2,n=(n+i)/4,r=(r+s)/4,a=(a+u)/4,(e=(e+1)/2)>(o=(o+1)/2)&&e>c?.01>e?(u=0,n=s=.707106781):(s=n/(u=Math.sqrt(e)),n=r/u):o>c?.01>o?(u=.707106781,s=0,n=.707106781):(u=n/(s=Math.sqrt(o)),n=a/s):.01>c?(s=u=.707106781,n=0):(u=r/(n=Math.sqrt(c)),s=a/n),this.set(u,s,n,t),this):(t=Math.sqrt((u-a)*(u-a)+(r-s)*(r-s)+(i-n)*(i-n)),.001>Math.abs(t)&&(t=1),this.x=(u-a)/t,this.y=(r-s)/t,this.z=(i-n)/t,this.w=Math.acos((e+o+c-1)/2),this)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new u,e=new u),t.set(n,n,n,n),e.set(r,r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),c.prototype=Object.assign(Object.create(e.prototype),{constructor:c,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(l.prototype=Object.create(c.prototype)).constructor=l,l.prototype.isWebGLRenderTargetCube=!0,(h.prototype=Object.create(s.prototype)).constructor=h,h.prototype.isDataTexture=!0,Object.assign(f.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s+=3){var c=t[s],l=t[s+1],h=t[s+2];c<e&&(e=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>o&&(o=l),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.count;s<u;s++){var c=t.getX(s),l=t.getY(s),h=t.getZ(s);c<e&&(e=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>o&&(o=l),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new o;return function(e,n){return n=t.copy(n).multiplyScalar(.5),this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new o),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new o),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){function t(t){var o=t.geometry;if(void 0!==o)if(o.isGeometry)for(n=0,r=(o=o.vertices).length;n<r;n++)i.copy(o[n]),i.applyMatrix4(t.matrixWorld),e.expandByPoint(i);else if(o.isBufferGeometry&&void 0!==(o=o.attributes.position))for(n=0,r=o.count;n<r;n++)i.fromBufferAttribute(o,n).applyMatrix4(t.matrixWorld),e.expandByPoint(i)}var e,n,r,i=new o;return function(n){return e=this,n.updateMatrixWorld(!0),n.traverse(t),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new o),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new o;return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){if(0<t.normal.x)var e=t.normal.x*this.min.x,n=t.normal.x*this.max.x;else e=t.normal.x*this.max.x,n=t.normal.x*this.min.x;return 0<t.normal.y?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},intersectsTriangle:function(){function t(t){var i,o=0;for(i=t.length-3;o<=i;o+=3){u.fromArray(t,o);var a=l.x*Math.abs(u.x)+l.y*Math.abs(u.y)+l.z*Math.abs(u.z),s=e.dot(u),c=n.dot(u),h=r.dot(u);if(Math.max(-Math.max(s,c,h),Math.min(s,c,h))>a)return!1}return!0}var e=new o,n=new o,r=new o,i=new o,a=new o,s=new o,u=new o,c=new o,l=new o,h=new o;return function(o){return!this.isEmpty()&&(this.getCenter(c),l.subVectors(this.max,c),e.subVectors(o.a,c),n.subVectors(o.b,c),r.subVectors(o.c,c),i.subVectors(n,e),a.subVectors(r,n),s.subVectors(e,r),!!t(o=[0,-i.z,i.y,0,-a.z,a.y,0,-s.z,s.y,i.z,0,-i.x,a.z,0,-a.x,s.z,0,-s.x,-i.y,i.x,0,-a.y,a.x,0,-s.y,s.x,0])&&!!t(o=[1,0,0,0,1,0,0,0,1])&&(h.crossVectors(i,a),t(o=[h.x,h.y,h.z])))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new o),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new o;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new o;return function(e){return void 0===e&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),e=new d),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new o,new o,new o,new o,new o,new o,new o,new o];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(d.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new f;return function(e,n){var r=this.center;void 0!==n?r.copy(n):t.setFromPoints(e).getCenter(r);for(var i=n=0,o=e.length;i<o;i++)n=Math.max(n,r.distanceToSquared(e[i]));return this.radius=Math.sqrt(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new o),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new f),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(p.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new o,e=new o;return function(n,r,i){return r=t.subVectors(i,r).cross(e.subVectors(n,r)).normalize(),this.setFromNormalAndCoplanarPoint(r,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new o),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new o;return function(e,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new o);var r=e.delta(t),i=this.normal.dot(r);if(0===i){if(0===this.distanceToPoint(e.start))return n.copy(e.start)}else if(!(0>(i=-(e.start.dot(this.normal)+this.constant)/i)||1<i))return n.copy(r).multiplyScalar(i).add(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>e&&0<t||0>t&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new o),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new o,e=new a;return function(n,r){return r=r||e.getNormalMatrix(n),n=this.coplanarPoint(t).applyMatrix4(n),r=this.normal.applyMatrix3(r).normalize(),this.constant=-n.dot(r),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(m.prototype,{set:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;6>n;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],c=n[7],l=n[8],h=n[9],f=n[10],d=n[11],p=n[12],m=n[13],g=n[14];return e[0].setComponents(o-(t=n[0]),c-a,d-l,(n=n[15])-p).normalize(),e[1].setComponents(o+t,c+a,d+l,n+p).normalize(),e[2].setComponents(o+r,c+s,d+h,n+m).normalize(),e[3].setComponents(o-r,c-s,d-h,n-m).normalize(),e[4].setComponents(o-i,c-u,d-f,n-g).normalize(),e[5].setComponents(o+i,c+u,d+f,n+g).normalize(),this},intersectsObject:function(){var t=new d;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new d;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){var e=this.planes,n=t.center;t=-t.radius;for(var r=0;6>r;r++)if(e[r].distanceToPoint(n)<t)return!1;return!0},intersectsBox:function(){var t=new o,e=new o;return function(n){for(var r=this.planes,i=0;6>i;i++){var o=r[i];t.x=0<o.normal.x?n.min.x:n.max.x,e.x=0<o.normal.x?n.max.x:n.min.x,t.y=0<o.normal.y?n.min.y:n.max.y,e.y=0<o.normal.y?n.max.y:n.min.y,t.z=0<o.normal.z?n.min.z:n.max.z,e.z=0<o.normal.z?n.max.z:n.min.z;var a=o.distanceToPoint(t);if(o=o.distanceToPoint(e),0>a&&0>o)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;6>n;n++)if(0>e[n].distanceToPoint(t))return!1;return!0}});var Ti={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},Ai={merge:function(t){for(var e={},n=0;n<t.length;n++){var r,i=this.clone(t[n]);for(r in i)e[r]=i[r]}return e},clone:function(t){var e,n={};for(e in t)for(var r in n[e]={},t[e]){var i=t[e][r];n[e][r]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?i.clone():Array.isArray(i)?i.slice():i}return n}},Ci={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(g.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.b=this.g=this.r=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:.5>n?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,r){return e=Si.euclideanModulo(e,1),n=Si.clamp(n,0,1),r=Si.clamp(r,0,1),0===n?this.r=this.g=this.b=r:(this.r=t(r=2*r-(n=.5>=r?r*(1+n):r+n-r*n),n,e+1/3),this.g=t(r,n,e),this.b=t(r,n,e-1/3)),this}}(),setStyle:function(t){function e(e){void 0!==e&&1>parseFloat(e)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r=n[2];switch(n[1]){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){r=parseFloat(n[1])/360;var i=parseInt(n[2],10)/100,o=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(r,i,o)}}}else if(n=/^#([A-Fa-f0-9]+)$/.exec(t)){if(3===(r=(n=n[1]).length))return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,this;if(6===r)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,this}return t&&0<t.length&&(void 0!==(n=Ci[t])?this.setHex(n):console.warn("THREE.Color: Unknown color "+t)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){return void 0===e&&(e=2),e=0<e?1/e:1,this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n=this.r,r=this.g,i=this.b,o=Math.max(n,r,i),a=Math.min(n,r,i),s=(a+o)/2;if(a===o)a=e=0;else{var u=o-a;switch(a=.5>=s?u/(o+a):u/(2-o-a),o){case n:e=(r-i)/u+(r<i?6:0);break;case r:e=(i-n)/u+2;break;case i:e=(n-r)/u+4}e/=6}return t.h=e,t.s=a,t.l=s,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var t={};return function(e,n,r){return this.getHSL(t),t.h+=e,t.s+=n,t.l+=r,this.setHSL(t.h,t.s,t.l),this}}(),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var ki={common:{diffuse:{value:new g(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new a},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new g(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new g(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new a}}},Ri={basic:{uniforms:Ai.merge([ki.common,ki.specularmap,ki.envmap,ki.aomap,ki.lightmap,ki.fog]),vertexShader:Ti.meshbasic_vert,fragmentShader:Ti.meshbasic_frag},lambert:{uniforms:Ai.merge([ki.common,ki.specularmap,ki.envmap,ki.aomap,ki.lightmap,ki.emissivemap,ki.fog,ki.lights,{emissive:{value:new g(0)}}]),vertexShader:Ti.meshlambert_vert,fragmentShader:Ti.meshlambert_frag},phong:{uniforms:Ai.merge([ki.common,ki.specularmap,ki.envmap,ki.aomap,ki.lightmap,ki.emissivemap,ki.bumpmap,ki.normalmap,ki.displacementmap,ki.gradientmap,ki.fog,ki.lights,{emissive:{value:new g(0)},specular:{value:new g(1118481)},shininess:{value:30}}]),vertexShader:Ti.meshphong_vert,fragmentShader:Ti.meshphong_frag},standard:{uniforms:Ai.merge([ki.common,ki.envmap,ki.aomap,ki.lightmap,ki.emissivemap,ki.bumpmap,ki.normalmap,ki.displacementmap,ki.roughnessmap,ki.metalnessmap,ki.fog,ki.lights,{emissive:{value:new g(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Ti.meshphysical_vert,fragmentShader:Ti.meshphysical_frag},points:{uniforms:Ai.merge([ki.points,ki.fog]),vertexShader:Ti.points_vert,fragmentShader:Ti.points_frag},dashed:{uniforms:Ai.merge([ki.common,ki.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ti.linedashed_vert,fragmentShader:Ti.linedashed_frag},depth:{uniforms:Ai.merge([ki.common,ki.displacementmap]),vertexShader:Ti.depth_vert,fragmentShader:Ti.depth_frag},normal:{uniforms:Ai.merge([ki.common,ki.bumpmap,ki.normalmap,ki.displacementmap,{opacity:{value:1}}]),vertexShader:Ti.normal_vert,fragmentShader:Ti.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ti.cube_vert,fragmentShader:Ti.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ti.equirect_vert,fragmentShader:Ti.equirect_frag},distanceRGBA:{uniforms:Ai.merge([ki.common,ki.displacementmap,{referencePosition:{value:new o},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ti.distanceRGBA_vert,fragmentShader:Ti.distanceRGBA_frag},shadow:{uniforms:Ai.merge([ki.lights,ki.fog,{color:{value:new g(0)},opacity:{value:1}}]),vertexShader:Ti.shadow_vert,fragmentShader:Ti.shadow_frag}};Ri.physical={uniforms:Ai.merge([Ri.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Ti.meshphysical_vert,fragmentShader:Ti.meshphysical_frag},v.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),v.DefaultOrder="XYZ",Object.defineProperties(v.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(v.prototype,{isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=Si.clamp,i=t.elements;t=i[0];var o=i[4],a=i[8],s=i[1],u=i[5],c=i[9],l=i[2],h=i[6];return i=i[10],"XYZ"===(e=e||this._order)?(this._y=Math.asin(r(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(-c,i),this._z=Math.atan2(-o,t)):(this._x=Math.atan2(h,u),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(c,-1,1)),.99999>Math.abs(c)?(this._y=Math.atan2(a,i),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-l,t),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(h,-1,1)),.99999>Math.abs(h)?(this._y=Math.atan2(-l,i),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(s,t))):"ZYX"===e?(this._y=Math.asin(-r(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(h,i),this._z=Math.atan2(s,t)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===e?(this._z=Math.asin(r(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-l,t)):(this._x=0,this._y=Math.atan2(a,i))):"XZY"===e?(this._z=Math.asin(-r(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,t)):(this._x=Math.atan2(-c,i),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new r;return function(e,n,r){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,r)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new i;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new o(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(y.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask=this.mask|1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var Oi=0;w.DefaultUp=new o(0,1,0),w.DefaultMatrixAutoUpdate=!0,w.prototype=Object.assign(Object.create(e.prototype),{constructor:w,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new i;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new i;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new o(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new o(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new o(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new o;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new o(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new o(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new o(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new r;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new r,e=new o;return function(n,r,i){n.isVector3?e.copy(n):e.set(n,r,i),this.isCamera?t.lookAt(this.position,e,this.up):t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}return-1!==(e=this.children.indexOf(t))&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(e,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new o),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new o,e=new o;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new i),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldScale:function(){var t=new o,e=new i;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new o),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new i;return function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new o),this.getWorldQuaternion(t),e.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},toJSON:function(t){function e(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}function n(t){var e,n=[];for(e in t){var r=t[e];delete r.metadata,n.push(r)}return n}var r=void 0===t||"string"==typeof t,i={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.matrix=this.matrix.toArray(),void 0!==this.geometry){o.geometry=e(t.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes)if(a=a.shapes,Array.isArray(a))for(var s=0,u=a.length;s<u;s++)e(t.shapes,a[s]);else e(t.shapes,a)}if(void 0!==this.material)if(Array.isArray(this.material)){for(a=[],s=0,u=this.material.length;s<u;s++)a.push(e(t.materials,this.material[s]));o.material=a}else o.material=e(t.materials,this.material);if(0<this.children.length)for(o.children=[],s=0;s<this.children.length;s++)o.children.push(this.children[s].toJSON(t).object);if(r){r=n(t.geometries),s=n(t.materials),u=n(t.textures);var c=n(t.images);a=n(t.shapes),0<r.length&&(i.geometries=r),0<s.length&&(i.materials=s),0<u.length&&(i.textures=u),0<c.length&&(i.images=c),0<a.length&&(i.shapes=a)}return i.object=o,i},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(e=0;e<t.children.length;e++)this.add(t.children[e].clone());return this}}),x.prototype=Object.assign(Object.create(w.prototype),{constructor:x,isCamera:!0,copy:function(t,e){return w.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},getWorldDirection:function(){var t=new i;return function(e){return void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new o),this.getWorldQuaternion(t),e.set(0,0,-1).applyQuaternion(t)}}(),updateMatrixWorld:function(t){w.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),b.prototype=Object.assign(Object.create(x.prototype),{constructor:b,isOrthographicCamera:!0,copy:function(t,e){return x.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t;if(n+=t,t=r+e,e=r-e,null!==this.view&&this.view.enabled){var o=(this.right-this.left)/this.view.width;n=(i+=this.view.offsetX/(n=this.zoom/(this.view.width/this.view.fullWidth))*o)+this.view.width/n*o,e=(t-=this.view.offsetY/(e=this.zoom/(this.view.height/this.view.fullHeight))*(r=(this.top-this.bottom)/this.view.height))-this.view.height/e*r}this.projectionMatrix.makeOrthographic(i,n,t,e,this.near,this.far)},toJSON:function(t){return(t=w.prototype.toJSON.call(this,t)).object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(_.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Pi=0;M.prototype=Object.assign(Object.create(e.prototype),{constructor:M,isGeometry:!0,applyMatrix:function(t){for(var e=(new a).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(t);for(n=0,r=this.faces.length;n<r;n++){(t=this.faces[n]).normal.applyMatrix3(e).normalize();for(var i=0,o=t.vertexNormals.length;i<o;i++)t.vertexNormals[i].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(){var t=new r;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new r;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new r;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new r;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new r;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new w;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,n,i){i=new _(t,e,n,void 0!==u?[f[t].clone(),f[e].clone(),f[n].clone()]:[],void 0!==c?[r.colors[t].clone(),r.colors[e].clone(),r.colors[n].clone()]:[],i),r.faces.push(i),void 0!==l&&r.faceVertexUvs[0].push([d[t].clone(),d[e].clone(),d[n].clone()]),void 0!==h&&r.faceVertexUvs[1].push([p[t].clone(),p[e].clone(),p[n].clone()])}var r=this,i=null!==t.index?t.index.array:void 0,a=t.attributes,s=a.position.array,u=void 0!==a.normal?a.normal.array:void 0,c=void 0!==a.color?a.color.array:void 0,l=void 0!==a.uv?a.uv.array:void 0,h=void 0!==a.uv2?a.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var f=[],d=[],p=[],m=a=0;a<s.length;a+=3,m+=2)r.vertices.push(new o(s[a],s[a+1],s[a+2])),void 0!==u&&f.push(new o(u[a],u[a+1],u[a+2])),void 0!==c&&r.colors.push(new g(c[a],c[a+1],c[a+2])),void 0!==l&&d.push(new n(l[m],l[m+1])),void 0!==h&&p.push(new n(h[m],h[m+1]));var v=t.groups;if(0<v.length)for(a=0;a<v.length;a++){var y=(s=v[a]).start;for(m=y,y+=s.count;m<y;m+=3)void 0!==i?e(i[m],i[m+1],i[m+2],s.materialIndex):e(m,m+1,m+2,s.materialIndex)}else if(void 0!==i)for(a=0;a<i.length;a+=3)e(i[a],i[a+1],i[a+2]);else for(a=0;a<s.length/3;a+=3)e(a,a+1,a+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new o;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius;e=0===e?1:1/e;var n=new r;return n.set(e,0,0,-e*t.x,0,e,0,-e*t.y,0,0,e,-e*t.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var t=new o,e=new o,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],s=this.vertices[i.b];t.subVectors(this.vertices[i.c],s),e.subVectors(a,s),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){var e;void 0===t&&(t=!0);var n=Array(this.vertices.length),r=0;for(e=this.vertices.length;r<e;r++)n[r]=new o;if(t){var i=new o,a=new o;for(t=0,r=this.faces.length;t<r;t++){var s=this.vertices[(e=this.faces[t]).a],u=this.vertices[e.b];i.subVectors(this.vertices[e.c],u),a.subVectors(s,u),i.cross(a),n[e.a].add(i),n[e.b].add(i),n[e.c].add(i)}}else for(this.computeFaceNormals(),t=0,r=this.faces.length;t<r;t++)n[(e=this.faces[t]).a].add(e.normal),n[e.b].add(e.normal),n[e.c].add(e.normal);for(r=0,e=this.vertices.length;r<e;r++)n[r].normalize();for(t=0,r=this.faces.length;t<r;t++)3===(s=(e=this.faces[t]).vertexNormals).length?(s[0].copy(n[e.a]),s[1].copy(n[e.b]),s[2].copy(n[e.c])):(s[0]=n[e.a].clone(),s[1]=n[e.b].clone(),s[2]=n[e.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t;this.computeFaceNormals();var e=0;for(t=this.faces.length;e<t;e++){var n=this.faces[e],r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n=0;for(e=this.faces.length;n<e;n++){var r=this.faces[n];r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]);var i=0;for(t=r.vertexNormals.length;i<t;i++)r.__originalVertexNormals[i]?r.__originalVertexNormals[i].copy(r.vertexNormals[i]):r.__originalVertexNormals[i]=r.vertexNormals[i].clone()}var a=new M;for(a.faces=this.faces,i=0,t=this.morphTargets.length;i<t;i++){if(!this.morphNormals[i]){this.morphNormals[i]={},this.morphNormals[i].faceNormals=[],this.morphNormals[i].vertexNormals=[],r=this.morphNormals[i].faceNormals;var s=this.morphNormals[i].vertexNormals;for(n=0,e=this.faces.length;n<e;n++){var u=new o,c={a:new o,b:new o,c:new o};r.push(u),s.push(c)}}for(s=this.morphNormals[i],a.vertices=this.morphTargets[i].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,e=this.faces.length;n<e;n++)c=s.vertexNormals[n],(u=s.faceNormals[n]).copy((r=this.faces[n]).normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(n=0,e=this.faces.length;n<e;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new f),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new d),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,i=this.vertices.length,o=this.vertices,s=t.vertices,u=this.faces,c=t.faces,l=this.faceVertexUvs[0],h=t.faceVertexUvs[0],f=this.colors,d=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new a).getNormalMatrix(e)),t=0;for(var p=s.length;t<p;t++){var m=s[t].clone();void 0!==e&&m.applyMatrix4(e),o.push(m)}for(t=0,p=d.length;t<p;t++)f.push(d[t].clone());for(t=0,p=c.length;t<p;t++){var g=(s=c[t]).vertexNormals;for(d=s.vertexColors,(f=new _(s.a+i,s.b+i,s.c+i)).normal.copy(s.normal),void 0!==r&&f.normal.applyMatrix3(r).normalize(),e=0,o=g.length;e<o;e++)m=g[e].clone(),void 0!==r&&m.applyMatrix3(r).normalize(),f.vertexNormals.push(m);for(f.color.copy(s.color),e=0,o=d.length;e<o;e++)f.vertexColors.push((m=d[e]).clone());f.materialIndex=s.materialIndex+n,u.push(f)}for(t=0,p=h.length;t<p;t++)if(r=[],void 0!==(n=h[t])){for(e=0,o=n.length;e<o;e++)r.push(n[e].clone());l.push(r)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e={},n=[],r=[],i=Math.pow(10,4),o=0;for(t=this.vertices.length;o<t;o++){var a=this.vertices[o];void 0===e[a=Math.round(a.x*i)+"_"+Math.round(a.y*i)+"_"+Math.round(a.z*i)]?(e[a]=o,n.push(this.vertices[o]),r[o]=n.length-1):r[o]=r[e[a]]}for(e=[],o=0,t=this.faces.length;o<t;o++)for((i=this.faces[o]).a=r[i.a],i.b=r[i.b],i.c=r[i.c],i=[i.a,i.b,i.c],a=0;3>a;a++)if(i[a]===i[(a+1)%3]){e.push(o);break}for(o=e.length-1;0<=o;o--)for(this.faces.splice(i=e[o],1),r=0,t=this.faceVertexUvs.length;r<t;r++)this.faceVertexUvs[r].splice(i,1);return o=this.vertices.length-n.length,this.vertices=n,o},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var r=t[e];this.vertices.push(new o(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===e&&(r=[]),a&&a.length===e&&(i=[]),n=0;n<e;n++){var s=t[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==c[e]?c[e]:(c[e]=u.length/3,u.push(t.x,t.y,t.z),c[e])}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==h[e]?h[e]:(h[e]=l.length,l.push(t.getHex()),h[e])}function r(t){var e=t.x.toString()+t.y.toString();return void 0!==d[e]?d[e]:(d[e]=f.length/2,f.push(t.x,t.y),d[e])}var i={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o,a=this.parameters;for(o in a)void 0!==a[o]&&(i[o]=a[o]);return i}for(a=[],o=0;o<this.vertices.length;o++){var s=this.vertices[o];a.push(s.x,s.y,s.z)}s=[];var u=[],c={},l=[],h={},f=[],d={};for(o=0;o<this.faces.length;o++){var p=this.faces[o],m=void 0!==this.faceVertexUvs[0][o],g=0<p.normal.length(),v=0<p.vertexNormals.length,y=1!==p.color.r||1!==p.color.g||1!==p.color.b,w=0<p.vertexColors.length,x=0;x=t(x=t(x=t(x=t(x=t(x=t(x=t(x=t(x,0,0),1,!0),2,!1),3,m),4,g),5,v),6,y),7,w),s.push(x),s.push(p.a,p.b,p.c),s.push(p.materialIndex),m&&s.push(r((m=this.faceVertexUvs[0][o])[0]),r(m[1]),r(m[2])),g&&s.push(e(p.normal)),v&&s.push(e((g=p.vertexNormals)[0]),e(g[1]),e(g[2])),y&&s.push(n(p.color)),w&&s.push(n((p=p.vertexColors)[0]),n(p[1]),n(p[2]))}return i.data={},i.data.vertices=a,i.data.normals=u,0<l.length&&(i.data.colors=l),0<f.length&&(i.data.uvs=[f]),i.data.faces=s,i},clone:function(){return(new M).copy(this)},copy:function(t){var e,n,r;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var i=t.vertices,o=0;for(e=i.length;o<e;o++)this.vertices.push(i[o].clone());for(o=0,e=(i=t.colors).length;o<e;o++)this.colors.push(i[o].clone());for(o=0,e=(i=t.faces).length;o<e;o++)this.faces.push(i[o].clone());for(o=0,e=t.faceVertexUvs.length;o<e;o++){var a=t.faceVertexUvs[o];for(void 0===this.faceVertexUvs[o]&&(this.faceVertexUvs[o]=[]),i=0,n=a.length;i<n;i++){var s=a[i],u=[],c=0;for(r=s.length;c<r;c++)u.push(s[c].clone());this.faceVertexUvs[o].push(u)}}for(o=0,e=(c=t.morphTargets).length;o<e;o++){if((r={}).name=c[o].name,void 0!==c[o].vertices)for(r.vertices=[],i=0,n=c[o].vertices.length;i<n;i++)r.vertices.push(c[o].vertices[i].clone());if(void 0!==c[o].normals)for(r.normals=[],i=0,n=c[o].normals.length;i<n;i++)r.normals.push(c[o].normals[i].clone());this.morphTargets.push(r)}for(o=0,e=(c=t.morphNormals).length;o<e;o++){if(r={},void 0!==c[o].vertexNormals)for(r.vertexNormals=[],i=0,n=c[o].vertexNormals.length;i<n;i++)(s={}).a=(a=c[o].vertexNormals[i]).a.clone(),s.b=a.b.clone(),s.c=a.c.clone(),r.vertexNormals.push(s);if(void 0!==c[o].faceNormals)for(r.faceNormals=[],i=0,n=c[o].faceNormals.length;i<n;i++)r.faceNormals.push(c[o].faceNormals[i].clone());this.morphNormals.push(r)}for(o=0,e=(i=t.skinWeights).length;o<e;o++)this.skinWeights.push(i[o].clone());for(o=0,e=(i=t.skinIndices).length;o<e;o++)this.skinIndices.push(i[o].clone());for(o=0,e=(i=t.lineDistances).length;o<e;o++)this.lineDistances.push(i[o]);return null!==(o=t.boundingBox)&&(this.boundingBox=o.clone()),null!==(o=t.boundingSphere)&&(this.boundingSphere=o.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(S.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(S.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new g),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,r=0,i=0,o=t.length;i<o;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new n),e[r++]=a.x,e[r++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new o),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new u),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),(E.prototype=Object.create(S.prototype)).constructor=E,(T.prototype=Object.create(S.prototype)).constructor=T,(A.prototype=Object.create(S.prototype)).constructor=A,(C.prototype=Object.create(S.prototype)).constructor=C,(k.prototype=Object.create(S.prototype)).constructor=k,(R.prototype=Object.create(S.prototype)).constructor=R,(O.prototype=Object.create(S.prototype)).constructor=O,(P.prototype=Object.create(S.prototype)).constructor=P,(D.prototype=Object.create(S.prototype)).constructor=D,Object.assign(L.prototype,{computeGroups:function(t){var e=[],n=void 0;t=t.faces;for(var r=0;r<t.length;r++){var i=t[r];if(i.materialIndex!==n){n=i.materialIndex,void 0!==o&&(o.count=3*r-o.start,e.push(o));var o={start:3*r,materialIndex:n}}}void 0!==o&&(o.count=3*r-o.start,e.push(o)),this.groups=e},fromGeometry:function(t){var e=t.faces,r=t.vertices,i=t.faceVertexUvs,o=i[0]&&0<i[0].length,a=i[1]&&0<i[1].length,s=t.morphTargets,u=s.length;if(0<u){for(var c=[],l=0;l<u;l++)c[l]=[];this.morphTargets.position=c}var h=t.morphNormals,f=h.length;if(0<f){var d=[];for(l=0;l<f;l++)d[l]=[];this.morphTargets.normal=d}var p=t.skinIndices,m=t.skinWeights,g=p.length===r.length,v=m.length===r.length;for(l=0;l<e.length;l++){var y=e[l];this.vertices.push(r[y.a],r[y.b],r[y.c]);var w=y.vertexNormals;for(3===w.length?this.normals.push(w[0],w[1],w[2]):this.normals.push(w=y.normal,w,w),3===(w=y.vertexColors).length?this.colors.push(w[0],w[1],w[2]):this.colors.push(w=y.color,w,w),!0===o&&(void 0!==(w=i[0][l])?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new n,new n,new n))),!0===a&&(void 0!==(w=i[1][l])?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new n,new n,new n))),w=0;w<u;w++){var x=s[w].vertices;c[w].push(x[y.a],x[y.b],x[y.c])}for(w=0;w<f;w++)d[w].push((x=h[w].vertexNormals[l]).a,x.b,x.c);g&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var Di=1;I.prototype=Object.assign(Object.create(e.prototype),{constructor:I,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){this.index=Array.isArray(t)?new(65535<N(t)?O:k)(t,1):t},addAttribute:function(t,e,n){if(e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute){if("index"!==t)return this.attributes[t]=e,this;console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e)}else console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new S(e,n))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;return void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0),void 0!==(e=this.attributes.normal)&&((new a).getNormalMatrix(t).applyToBufferAttribute(e),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new r;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new r;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new r;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new r;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new r;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new w;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new o;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){t=new P(3*e.vertices.length,3);var n=new P(3*e.colors.length,3);this.addAttribute("position",t.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length&&(t=new P(e.lineDistances.length,1),this.addAttribute("lineDistance",t.copyArray(e.lineDistances))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new P(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var n=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(n=void 0,e.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}return!0===e.verticesNeedUpdate&&(void 0!==(n=this.attributes.position)&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(void 0!==(n=this.attributes.normal)&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(void 0!==(n=this.attributes.color)&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(void 0!==(n=this.attributes.uv)&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(void 0!==(n=this.attributes.lineDistance)&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new L).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);for(var n in this.addAttribute("position",new S(e,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(e=new Float32Array(3*t.normals.length),this.addAttribute("normal",new S(e,3).copyVector3sArray(t.normals))),0<t.colors.length&&(e=new Float32Array(3*t.colors.length),this.addAttribute("color",new S(e,3).copyColorsArray(t.colors))),0<t.uvs.length&&(e=new Float32Array(2*t.uvs.length),this.addAttribute("uv",new S(e,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(e=new Float32Array(2*t.uvs2.length),this.addAttribute("uv2",new S(e,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){e=[];for(var r=t.morphTargets[n],i=0,o=r.length;i<o;i++){var a=r[i],s=new P(3*a.length,3);e.push(s.copyVector3sArray(a))}this.morphAttributes[n]=e}return 0<t.skinIndices.length&&(n=new P(4*t.skinIndices.length,4),this.addAttribute("skinIndex",n.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(n=new P(4*t.skinWeights.length,4),this.addAttribute("skinWeight",n.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new f);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new f,e=new o;return function(){null===this.boundingSphere&&(this.boundingSphere=new d);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;t.setFromBufferAttribute(n),t.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)e.x=n.getX(o),e.y=n.getY(o),e.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var r=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new S(new Float32Array(r.length),3));else for(var i=e.normal.array,a=0,s=i.length;a<s;a++)i[a]=0;i=e.normal.array;var u=new o,c=new o,l=new o,h=new o,f=new o;if(t){t=t.array,0===n.length&&this.addGroup(0,t.length);for(var d=0,p=n.length;d<p;++d){var m=(a=n[d]).count;for(a=s=a.start,s+=m;a<s;a+=3){var g=3*t[a+1],v=3*t[a+2];u.fromArray(r,m=3*t[a+0]),c.fromArray(r,g),l.fromArray(r,v),h.subVectors(l,c),f.subVectors(u,c),h.cross(f),i[m]+=h.x,i[m+1]+=h.y,i[m+2]+=h.z,i[g]+=h.x,i[g+1]+=h.y,i[g+2]+=h.z,i[v]+=h.x,i[v+1]+=h.y,i[v+2]+=h.z}}}else for(a=0,s=r.length;a<s;a+=9)u.fromArray(r,a),c.fromArray(r,a+3),l.fromArray(r,a+6),h.subVectors(l,c),f.subVectors(u,c),h.cross(f),i[a]=h.x,i[a+1]=h.y,i[a+2]=h.z,i[a+3]=h.x,i[a+4]=h.y,i[a+5]=h.z,i[a+6]=h.x,i[a+7]=h.y,i[a+8]=h.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n,r=this.attributes;for(n in r)if(void 0!==t.attributes[n]){var i=r[n].array,o=t.attributes[n],a=o.array,s=0;for(o=o.itemSize*e;s<a.length;s++,o++)i[o]=a[s]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new o;return function(){for(var e=this.attributes.normal,n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.normalize(),e.setXYZ(n,t.x,t.y,t.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t,e=new I,n=this.index.array,r=this.attributes;for(t in r){var i=r[t],o=i.array,a=i.itemSize,s=new o.constructor(n.length*a),u=0;i=0;for(var c=n.length;i<c;i++)for(var l=n[i]*a,h=0;h<a;h++)s[u++]=o[l++];e.addAttribute(t,new S(s,a))}for(i=0,c=(n=this.groups).length;i<c;i++)e.addGroup((r=n[i]).start,r.count,r.materialIndex);return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};var n=this.index;for(i in null!==n&&(e=Array.prototype.slice.call(n.array),t.data.index={type:n.array.constructor.name,array:e}),n=this.attributes){var r=n[i];e=Array.prototype.slice.call(r.array),t.data.attributes[i]={itemSize:r.itemSize,type:r.array.constructor.name,array:e,normalized:r.normalized}}var i=this.groups;return 0<i.length&&(t.data.groups=JSON.parse(JSON.stringify(i))),null!==(i=this.boundingSphere)&&(t.data.boundingSphere={center:i.center.toArray(),radius:i.radius}),t},clone:function(){return(new I).copy(this)},copy:function(t){var e;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var n=t.index;for(a in null!==n&&this.setIndex(n.clone()),n=t.attributes)this.addAttribute(a,n[a].clone());var r=t.morphAttributes;for(a in r){var i=[],o=r[a];for(n=0,e=o.length;n<e;n++)i.push(o[n].clone());this.morphAttributes[a]=i}var a=t.groups;for(n=0,e=a.length;n<e;n++)this.addGroup((r=a[n]).start,r.count,r.materialIndex);return null!==(a=t.boundingBox)&&(this.boundingBox=a.clone()),null!==(a=t.boundingSphere)&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(F.prototype=Object.create(M.prototype)).constructor=F,(z.prototype=Object.create(I.prototype)).constructor=z,(U.prototype=Object.create(M.prototype)).constructor=U,(j.prototype=Object.create(I.prototype)).constructor=j;var Li=0;V.prototype=Object.assign(Object.create(e.prototype),{constructor:V,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0===n)console.warn("THREE.Material: '"+e+"' parameter is undefined.");else if("shading"===e)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else{var r=this[e];void 0===r?console.warn("THREE."+this.type+": '"+e+"' is not a property of this material."):r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]="overdraw"===e?Number(n):n}}},toJSON:function(t){function e(t){var e,n=[];for(e in t){var r=t[e];delete r.metadata,n.push(r)}return n}var n=void 0===t||"string"==typeof t;n&&(t={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,r.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),0!==this.side&&(r.side=this.side),0!==this.vertexColors&&(r.vertexColors=this.vertexColors),1>this.opacity&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,0!==this.rotation&&(r.rotation=this.rotation),1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),0<this.alphaTest&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),1<this.wireframeLinewidth&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n&&(n=e(t.textures),t=e(t.images),0<n.length&&(r.textures=n),0<t.length&&(r.images=t)),r},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(B.prototype=Object.create(V.prototype)).constructor=B,B.prototype.isMeshBasicMaterial=!0,B.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},(H.prototype=Object.create(V.prototype)).constructor=H,H.prototype.isShaderMaterial=!0,H.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ai.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},H.prototype.toJSON=function(t){return(t=V.prototype.toJSON.call(this,t)).uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(G.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new o),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new o;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new o),e.subVectors(t,this.origin),0>(t=e.dot(this.direction))?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new o;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return 0>n?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new o,e=new o,n=new o;return function(r,i,o,a){t.copy(r).add(i).multiplyScalar(.5),e.copy(i).sub(r).normalize(),n.copy(this.origin).sub(t);var s=.5*r.distanceTo(i),u=-this.direction.dot(e),c=n.dot(this.direction),l=-n.dot(e),h=n.lengthSq(),f=Math.abs(1-u*u);if(0<f){i=u*c-l;var d=s*f;0<=(r=u*l-c)?i>=-d?i<=d?u=(r*=s=1/f)*(r+u*(i*=s)+2*c)+i*(u*r+i+2*l)+h:(i=s,u=-(r=Math.max(0,-(u*i+c)))*r+i*(i+2*l)+h):(i=-s,u=-(r=Math.max(0,-(u*i+c)))*r+i*(i+2*l)+h):i<=-d?u=-(r=Math.max(0,-(-u*s+c)))*r+(i=0<r?-s:Math.min(Math.max(-s,-l),s))*(i+2*l)+h:i<=d?(r=0,u=(i=Math.min(Math.max(-s,-l),s))*(i+2*l)+h):u=-(r=Math.max(0,-(u*s+c)))*r+(i=0<r?s:Math.min(Math.max(-s,-l),s))*(i+2*l)+h}else i=0<u?-s:s,u=-(r=Math.max(0,-(u*i+c)))*r+i*(i+2*l)+h;return o&&o.copy(this.direction).multiplyScalar(r).add(this.origin),a&&a.copy(e).multiplyScalar(i).add(t),u}}(),intersectSphere:function(){var t=new o;return function(e,n){t.subVectors(e.center,this.origin);var r=t.dot(this.direction),i=t.dot(t)-r*r;return i>(e=e.radius*e.radius)?null:(i=r-(e=Math.sqrt(e-i)),r+=e,0>i&&0>r?null:this.at(0>i?r:i,n))}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(t=-(this.origin.dot(t.normal)+t.constant)/e)?t:null},intersectPlane:function(t,e){return null===(t=this.distanceToPlane(t))?null:this.at(t,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||0>t.normal.dot(this.direction)*e},intersectBox:function(t,e){var n=1/this.direction.x,r=1/this.direction.y,i=1/this.direction.z,o=this.origin;if(0<=n){var a=(t.min.x-o.x)*n;n*=t.max.x-o.x}else a=(t.max.x-o.x)*n,n*=t.min.x-o.x;if(0<=r){var s=(t.min.y-o.y)*r;r*=t.max.y-o.y}else s=(t.max.y-o.y)*r,r*=t.min.y-o.y;return a>r||s>n?null:((s>a||a!=a)&&(a=s),(r<n||n!=n)&&(n=r),0<=i?(s=(t.min.z-o.z)*i,t=(t.max.z-o.z)*i):(s=(t.max.z-o.z)*i,t=(t.min.z-o.z)*i),a>t||s>n?null:((s>a||a!=a)&&(a=s),(t<n||n!=n)&&(n=t),0>n?null:this.at(0<=a?a:n,e)))},intersectsBox:function(){var t=new o;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new o,e=new o,n=new o,r=new o;return function(i,o,a,s,u){if(e.subVectors(o,i),n.subVectors(a,i),r.crossVectors(e,n),0<(o=this.direction.dot(r))){if(s)return null;s=1}else{if(!(0>o))return null;s=-1,o=-o}return t.subVectors(this.origin,i),0>(i=s*this.direction.dot(n.crossVectors(t,n)))?null:0>(a=s*this.direction.dot(e.cross(t)))||i+a>o?null:0>(i=-s*t.dot(r))?null:this.at(i/o,u)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(q.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new o),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new o),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new o),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new o,e=new o;return function(n,r){return t.subVectors(n,this.start),e.subVectors(this.end,this.start),n=e.dot(e),n=e.dot(t)/n,r&&(n=Si.clamp(n,0,1)),n}}(),closestPointToPoint:function(t,e,n){return t=this.closestPointToPointParameter(t,e),void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new o),this.delta(n).multiplyScalar(t).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Object.assign(W,{getNormal:function(){var t=new o;return function(e,n,r,i){return void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new o),i.subVectors(r,n),t.subVectors(e,n),i.cross(t),0<(e=i.lengthSq())?i.multiplyScalar(1/Math.sqrt(e)):i.set(0,0,0)}}(),getBarycoord:function(){var t=new o,e=new o,n=new o;return function(r,i,a,s,u){t.subVectors(s,i),e.subVectors(a,i),n.subVectors(r,i),r=t.dot(t),i=t.dot(e),a=t.dot(n);var c=e.dot(e);s=e.dot(n);var l=r*c-i*i;return void 0===u&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),u=new o),0===l?u.set(-2,-1,-1):u.set(1-(c=(c*a-i*s)*(l=1/l))-(r=(r*s-i*a)*l),r,c)}}(),containsPoint:function(){var t=new o;return function(e,n,r,i){return W.getBarycoord(e,n,r,i,t),0<=t.x&&0<=t.y&&1>=t.x+t.y}}()}),Object.assign(W.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new o,e=new o;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new o),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return W.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new o),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return W.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function(t){return W.containsPoint(t,this.a,this.b,this.c)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(){var t=new p,e=[new q,new q,new q],n=new o,r=new o;return function(i,a){void 0===a&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),a=new o);var s=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(i,n),!0===this.containsPoint(n))a.copy(n);else for(e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a),i=0;i<e.length;i++){e[i].closestPointToPoint(n,!0,r);var u=n.distanceToSquared(r);u<s&&(s=u,a.copy(r))}return a}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),Y.prototype=Object.assign(Object.create(w.prototype),{constructor:Y,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return w.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var e=Object.keys(t);if(0<e.length){var n=t[e[0]];if(void 0!==n)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=n.length;t<e;t++){var r=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}}else if(void 0!==(n=t.morphTargets)&&0<n.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=n.length;t<e;t++)r=n[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t},raycast:function(){function t(t,e,n,r,i,o,a){return W.getBarycoord(t,e,n,r,w),i.multiplyScalar(w.x),o.multiplyScalar(w.y),a.multiplyScalar(w.z),i.add(o).add(a),i.clone()}function e(t,e,n,r,i,o,a,s){return null===(1===e.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,2!==e.side,s))?null:(b.copy(s),b.applyMatrix4(t.matrixWorld),(e=n.ray.origin.distanceTo(b))<n.near||e>n.far?null:{distance:e,point:b.clone(),object:t})}function i(n,r,i,o,a,s,u,f){return c.fromBufferAttribute(o,s),l.fromBufferAttribute(o,u),h.fromBufferAttribute(o,f),(n=e(n,n.material,r,i,c,l,h,x))&&(a&&(g.fromBufferAttribute(a,s),v.fromBufferAttribute(a,u),y.fromBufferAttribute(a,f),n.uv=t(x,c,l,h,g,v,y)),a=new _(s,u,f),W.getNormal(c,l,h,a.normal),n.face=a,n.faceIndex=s),n}var a=new r,s=new G,u=new d,c=new o,l=new o,h=new o,f=new o,p=new o,m=new o,g=new n,v=new n,y=new n,w=new o,x=new o,b=new o;return function(n,r){var o,d=this.geometry,w=this.material,b=this.matrixWorld;if(void 0!==w&&(null===d.boundingSphere&&d.computeBoundingSphere(),u.copy(d.boundingSphere),u.applyMatrix4(b),!1!==n.ray.intersectsSphere(u)&&(a.getInverse(b),s.copy(n.ray).applyMatrix4(a),null===d.boundingBox||!1!==s.intersectsBox(d.boundingBox))))if(d.isBufferGeometry){var _,M=d.attributes.position;if(b=d.attributes.uv,null!==(w=d.index)){var S=0;for(_=w.count;S<_;S+=3){d=w.getX(S);var E=w.getX(S+1),T=w.getX(S+2);(o=i(this,n,s,M,b,d,E,T))&&(o.faceIndex=Math.floor(S/3),r.push(o))}}else if(void 0!==M)for(S=0,_=M.count;S<_;S+=3)(o=i(this,n,s,M,b,d=S,E=S+1,T=S+2))&&(o.index=d,r.push(o))}else if(d.isGeometry){b=Array.isArray(w),S=d.vertices,_=d.faces,0<(E=d.faceVertexUvs[0]).length&&(M=E);for(var A=0,C=_.length;A<C;A++){var k=_[A];if(void 0!==(o=b?w[k.materialIndex]:w)){E=S[k.a],T=S[k.b];var R=S[k.c];if(!0===o.morphTargets){var O=d.morphTargets,P=this.morphTargetInfluences;c.set(0,0,0),l.set(0,0,0),h.set(0,0,0);for(var D=0,L=O.length;D<L;D++){var N=P[D];if(0!==N){var I=O[D].vertices;c.addScaledVector(f.subVectors(I[k.a],E),N),l.addScaledVector(p.subVectors(I[k.b],T),N),h.addScaledVector(m.subVectors(I[k.c],R),N)}}c.add(E),l.add(T),h.add(R),E=c,T=l,R=h}(o=e(this,o,n,s,E,T,R,x))&&(M&&M[A]&&(g.copy((O=M[A])[0]),v.copy(O[1]),y.copy(O[2]),o.uv=t(x,E,T,R,g,v,y)),o.face=k,o.faceIndex=A,r.push(o))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(J.prototype=Object.create(s.prototype)).constructor=J,J.prototype.isCubeTexture=!0,Object.defineProperty(J.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var Ni=new s,Ii=new J,Fi=[],zi=[],Ui=new Float32Array(16),ji=new Float32Array(9);Tt.prototype.setValue=function(t,e){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var o=n[r];o.setValue(t,e[o.id])}};var Vi=/([\w\d_]+)(\])?(\[|\.)?/g;At.prototype.setValue=function(t,e,n){void 0!==(e=this.map[e])&&e.setValue(t,n,this.renderer)},At.prototype.setOptional=function(t,e,n){void 0!==(e=e[n])&&this.setValue(t,n,e)},At.upload=function(t,e,n,r){for(var i=0,o=e.length;i!==o;++i){var a=e[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,r)}},At.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var o=t[r];o.id in e&&n.push(o)}return n};var Bi=0,Hi=0;(jt.prototype=Object.create(V.prototype)).constructor=jt,jt.prototype.isMeshDepthMaterial=!0,jt.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},(Vt.prototype=Object.create(V.prototype)).constructor=Vt,Vt.prototype.isMeshDistanceMaterial=!0,Vt.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},(Ht.prototype=Object.create(s.prototype)).constructor=Ht,Wt.prototype=Object.assign(Object.create(x.prototype),{constructor:Wt,isPerspectiveCamera:!0,copy:function(t,e){return x.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*Si.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Si.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Si.RAD2DEG*Math.atan(Math.tan(.5*Si.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Si.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,e-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}0!==(o=this.filmOffset)&&(i+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far)},toJSON:function(t){return(t=w.prototype.toJSON.call(this,t)).object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Yt.prototype=Object.assign(Object.create(Wt.prototype),{constructor:Yt,isArrayCamera:!0}),Qt.prototype.isFogExp2=!0,Qt.prototype.clone=function(){return new Qt(this.color.getHex(),this.density)},Qt.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Zt.prototype.isFog=!0,Zt.prototype.clone=function(){return new Zt(this.color.getHex(),this.near,this.far)},Zt.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Jt.prototype=Object.assign(Object.create(w.prototype),{constructor:Jt,copy:function(t,e){return w.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=w.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}),(Kt.prototype=Object.create(V.prototype)).constructor=Kt,Kt.prototype.isSpriteMaterial=!0,Kt.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},te.prototype=Object.assign(Object.create(w.prototype),{constructor:te,isSprite:!0,raycast:function(){var t=new o,e=new o,n=new o;return function(r,i){e.setFromMatrixPosition(this.matrixWorld),r.ray.closestPointToPoint(e,t),n.setFromMatrixScale(this.matrixWorld);var o=n.x*n.y/4;e.distanceToSquared(t)>o||(o=r.ray.origin.distanceTo(t))<r.near||o>r.far||i.push({distance:o,point:t.clone(),face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return w.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),ee.prototype=Object.assign(Object.create(w.prototype),{constructor:ee,copy:function(t){w.prototype.copy.call(this,t,!1);for(var e=0,n=(t=t.levels).length;e<n;e++){var r=t[e];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length&&!(e<n[r].distance);r++);n.splice(r,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object},raycast:function(){var t=new o;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(t);this.getObjectForDistance(r).raycast(e,n)}}(),update:function(){var t=new o,e=new o;return function(n){var r=this.levels;if(1<r.length){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld),n=t.distanceTo(e),r[0].object.visible=!0;for(var i=1,o=r.length;i<o&&n>=r[i].distance;i++)r[i-1].object.visible=!1,r[i].object.visible=!0;for(;i<o;i++)r[i].object.visible=!1}}}(),toJSON:function(t){(t=w.prototype.toJSON.call(this,t)).object.levels=[];for(var e=this.levels,n=0,r=e.length;n<r;n++){var i=e[n];t.object.levels.push({object:i.object.uuid,distance:i.distance})}return t}}),Object.assign(ne.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new r;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n=0;for(e=this.bones.length;n<e;n++)(t=this.bones[n])&&t.matrixWorld.getInverse(this.boneInverses[n]);for(n=0,e=this.bones.length;n<e;n++)(t=this.bones[n])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new r,e=new r;return function(){for(var n=this.bones,r=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++)t.multiplyMatrices(n[a]?n[a].matrixWorld:e,r[a]),t.toArray(i,16*a);void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new ne(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e];if(r.name===t)return r}}}),re.prototype=Object.assign(Object.create(w.prototype),{constructor:re,isBone:!0}),ie.prototype=Object.assign(Object.create(Y.prototype),{constructor:ie,isSkinnedMesh:!0,initBones:function(){var t,e=[];if(this.geometry&&void 0!==this.geometry.bones){var n=0;for(t=this.geometry.bones.length;n<t;n++){var r=this.geometry.bones[n],i=new re;e.push(i),i.name=r.name,i.position.fromArray(r.pos),i.quaternion.fromArray(r.rotq),void 0!==r.scl&&i.scale.fromArray(r.scl)}for(n=0,t=this.geometry.bones.length;n<t;n++)-1!==(r=this.geometry.bones[n]).parent&&null!==r.parent&&void 0!==e[r.parent]?e[r.parent].add(e[n]):this.add(e[n])}return this.updateMatrixWorld(!0),e},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var e=this.geometry.skinWeights[t],n=1/e.manhattanLength();1/0!==n?e.multiplyScalar(n):e.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){e=new u;var r=this.geometry.attributes.skinWeight;for(t=0;t<r.count;t++)e.x=r.getX(t),e.y=r.getY(t),e.z=r.getZ(t),e.w=r.getW(t),1/0!=(n=1/e.manhattanLength())?e.multiplyScalar(n):e.set(1,0,0,0),r.setXYZW(t,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(t){Y.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(oe.prototype=Object.create(V.prototype)).constructor=oe,oe.prototype.isLineBasicMaterial=!0,oe.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},ae.prototype=Object.assign(Object.create(w.prototype),{constructor:ae,isLine:!0,computeLineDistances:function(){var t=new o,e=new o;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[0],o=1,a=r.count;o<a;o++)t.fromBufferAttribute(r,o-1),e.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=t.distanceTo(e);n.addAttribute("lineDistance",new THREE.Float32BufferAttribute(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry)for(r=n.vertices,(i=n.lineDistances)[0]=0,o=1,a=r.length;o<a;o++)i[o]=i[o-1],i[o]+=r[o-1].distanceTo(r[o]);return this}}(),raycast:function(){var t=new r,e=new G,n=new d;return function(r,i){var a=r.linePrecision;a*=a;var s=this.geometry,u=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(u),!1!==r.ray.intersectsSphere(n)){t.getInverse(u),e.copy(r.ray).applyMatrix4(t);var c=new o,l=new o;u=new o;var h=new o,f=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var d=s.index,p=s.attributes.position.array;if(null!==d){s=0;for(var m=(d=d.array).length-1;s<m;s+=f){var g=d[s+1];c.fromArray(p,3*d[s]),l.fromArray(p,3*g),(g=e.distanceSqToSegment(c,l,h,u))>a||(h.applyMatrix4(this.matrixWorld),(g=r.ray.origin.distanceTo(h))<r.near||g>r.far||i.push({distance:g,point:u.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}}else for(s=0,m=p.length/3-1;s<m;s+=f)c.fromArray(p,3*s),l.fromArray(p,3*s+3),(g=e.distanceSqToSegment(c,l,h,u))>a||(h.applyMatrix4(this.matrixWorld),(g=r.ray.origin.distanceTo(h))<r.near||g>r.far||i.push({distance:g,point:u.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}else if(s.isGeometry)for(l=(c=s.vertices).length,s=0;s<l-1;s+=f)(g=e.distanceSqToSegment(c[s],c[s+1],h,u))>a||(h.applyMatrix4(this.matrixWorld),(g=r.ray.origin.distanceTo(h))<r.near||g>r.far||i.push({distance:g,point:u.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),se.prototype=Object.assign(Object.create(ae.prototype),{constructor:se,isLineSegments:!0,computeLineDistances:function(){var t=new o,e=new o;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)t.fromBufferAttribute(r,o),e.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e);n.addAttribute("lineDistance",new THREE.Float32BufferAttribute(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry)for(i=n.lineDistances,o=0,a=(r=n.vertices).length;o<a;o+=2)t.copy(r[o]),e.copy(r[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e);return this}}()}),ue.prototype=Object.assign(Object.create(ae.prototype),{constructor:ue,isLineLoop:!0}),(ce.prototype=Object.create(V.prototype)).constructor=ce,ce.prototype.isPointsMaterial=!0,ce.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},le.prototype=Object.assign(Object.create(w.prototype),{constructor:le,isPoints:!0,raycast:function(){var t=new r,e=new G,n=new d;return function(r,i){function a(t,n){var o=e.distanceSqToPoint(t);o<h&&(e.closestPointToPoint(t,f),f.applyMatrix4(c),(t=r.ray.origin.distanceTo(f))<r.near||t>r.far||i.push({distance:t,distanceToRay:Math.sqrt(o),point:f.clone(),index:n,face:null,object:s}))}var s=this,u=this.geometry,c=this.matrixWorld,l=r.params.Points.threshold;if(null===u.boundingSphere&&u.computeBoundingSphere(),n.copy(u.boundingSphere),n.applyMatrix4(c),n.radius+=l,!1!==r.ray.intersectsSphere(n)){t.getInverse(c),e.copy(r.ray).applyMatrix4(t);var h=(l/=(this.scale.x+this.scale.y+this.scale.z)/3)*l;l=new o;var f=new o;if(u.isBufferGeometry){var d=u.index;if(u=u.attributes.position.array,null!==d){var p=d.array;d=0;for(var m=p.length;d<m;d++){var g=p[d];l.fromArray(u,3*g),a(l,g)}}else for(d=0,p=u.length/3;d<p;d++)l.fromArray(u,3*d),a(l,d)}else for(d=0,p=(l=u.vertices).length;d<p;d++)a(l[d],d)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),he.prototype=Object.assign(Object.create(w.prototype),{constructor:he,isGroup:!0}),fe.prototype=Object.assign(Object.create(s.prototype),{constructor:fe,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),(de.prototype=Object.create(s.prototype)).constructor=de,de.prototype.isCompressedTexture=!0,(pe.prototype=Object.create(s.prototype)).constructor=pe,pe.prototype.isDepthTexture=!0,(me.prototype=Object.create(I.prototype)).constructor=me,(ge.prototype=Object.create(M.prototype)).constructor=ge,(ve.prototype=Object.create(I.prototype)).constructor=ve,(ye.prototype=Object.create(M.prototype)).constructor=ye,(we.prototype=Object.create(I.prototype)).constructor=we,(xe.prototype=Object.create(M.prototype)).constructor=xe,(be.prototype=Object.create(we.prototype)).constructor=be,(_e.prototype=Object.create(M.prototype)).constructor=_e,(Me.prototype=Object.create(we.prototype)).constructor=Me,(Se.prototype=Object.create(M.prototype)).constructor=Se,(Ee.prototype=Object.create(we.prototype)).constructor=Ee,(Te.prototype=Object.create(M.prototype)).constructor=Te,(Ae.prototype=Object.create(we.prototype)).constructor=Ae,(Ce.prototype=Object.create(M.prototype)).constructor=Ce,(ke.prototype=Object.create(I.prototype)).constructor=ke,(Re.prototype=Object.create(M.prototype)).constructor=Re,(Oe.prototype=Object.create(I.prototype)).constructor=Oe,(Pe.prototype=Object.create(M.prototype)).constructor=Pe,(De.prototype=Object.create(I.prototype)).constructor=De;var Gi={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return 0>Gi.area(t)},triangulateShape:function(t,e){var n=[],r=[],i=[];$e(t),Qe(n,t);var o=t.length;for(e.forEach($e),t=0;t<e.length;t++)r.push(o),o+=e[t].length,Qe(n,e[t]);for(e=function(t,e,n){n=n||2;var r,i=e&&e.length,o=i?e[0]*n:t.length,a=Le(t,0,o,n,!0),s=[];if(!a)return s;if(i){var u,c=n;i=[];var l=0;for(u=e.length;l<u;l++){var h=e[l]*c;(h=Le(t,h,l<u-1?e[l+1]*c:t.length,c,!1))===h.next&&(h.steiner=!0),i.push(Ue(h))}for(i.sort(Ie),l=0;l<i.length;l++)(c=Fe(e=i[l],c=a))&&Ne(e=qe(c,e),e.next),a=Ne(a,a.next)}if(t.length>80*n){var f=r=t[0],d=i=t[1];for(c=n;c<o;c+=n)e=t[c+1],(l=t[c])<f&&(f=l),e<d&&(d=e),l>r&&(r=l),e>i&&(i=e);r=0!==(r=Math.max(r-f,i-d))?1/r:0}return function t(e,n,r,i,o,a,s){if(e){if(!s&&a){var u=e,c=u;do{null===c.z&&(c.z=ze(c.x,c.y,i,o,a)),c.prevZ=c.prev,c=c.nextZ=c.next}while(c!==u);c.prevZ.nextZ=null,c.prevZ=null,u=c;var l,h,f,d,p=1;do{c=u;var m=u=null;for(h=0;c;){h++;var g=c;for(l=f=0;l<p&&(f++,g=g.nextZ);l++);for(d=p;0<f||0<d&&g;)0!==f&&(0===d||!g||c.z<=g.z)?(l=c,c=c.nextZ,f--):(l=g,g=g.nextZ,d--),m?m.nextZ=l:u=l,l.prevZ=m,m=l;c=g}m.nextZ=null,p*=2}while(1<h)}for(u=e;e.prev!==e.next;){if(c=e.prev,g=e.next,a)t:{d=i;var v=o,y=a;if(0<=Ve(h=(m=e).prev,f=m,p=m.next))m=!1;else{var w=h.x>f.x?h.x>p.x?h.x:p.x:f.x>p.x?f.x:p.x,x=h.y>f.y?h.y>p.y?h.y:p.y:f.y>p.y?f.y:p.y;for(l=ze(h.x<f.x?h.x<p.x?h.x:p.x:f.x<p.x?f.x:p.x,h.y<f.y?h.y<p.y?h.y:p.y:f.y<p.y?f.y:p.y,d,v,y),d=ze(w,x,d,v,y),v=m.nextZ;v&&v.z<=d;){if(v!==m.prev&&v!==m.next&&je(h.x,h.y,f.x,f.y,p.x,p.y,v.x,v.y)&&0<=Ve(v.prev,v,v.next)){m=!1;break t}v=v.nextZ}for(v=m.prevZ;v&&v.z>=l;){if(v!==m.prev&&v!==m.next&&je(h.x,h.y,f.x,f.y,p.x,p.y,v.x,v.y)&&0<=Ve(v.prev,v,v.next)){m=!1;break t}v=v.prevZ}m=!0}}else t:if(m=e,h=m.prev,f=m,p=m.next,0<=Ve(h,f,p))m=!1;else{for(l=m.next.next;l!==m.prev;){if(je(h.x,h.y,f.x,f.y,p.x,p.y,l.x,l.y)&&0<=Ve(l.prev,l,l.next)){m=!1;break t}l=l.next}m=!0}if(m)n.push(c.i/r),n.push(e.i/r),n.push(g.i/r),Ye(e),u=e=g.next;else if((e=g)===u){if(s){if(1===s){s=n,u=r,c=e;do{!Be(g=c.prev,m=c.next.next)&&He(g,c,c.next,m)&&Ge(g,m)&&Ge(m,g)&&(s.push(g.i/u),s.push(c.i/u),s.push(m.i/u),Ye(c),Ye(c.next),c=e=m),c=c.next}while(c!==e);t(e=c,n,r,i,o,a,2)}else if(2===s)t:{s=e;do{for(u=s.next.next;u!==s.prev;){if(c=s.i!==u.i){if(m=(c=s).next.i!==(g=u).i&&c.prev.i!==g.i){e:{m=c;do{if(m.i!==c.i&&m.next.i!==c.i&&m.i!==g.i&&m.next.i!==g.i&&He(m,m.next,c,g)){m=!0;break e}m=m.next}while(m!==c);m=!1}m=!m}if(m=m&&Ge(c,g)&&Ge(g,c)){m=c,h=!1,f=(c.x+g.x)/2,g=(c.y+g.y)/2;do{m.y>g!=m.next.y>g&&m.next.y!==m.y&&f<(m.next.x-m.x)*(g-m.y)/(m.next.y-m.y)+m.x&&(h=!h),m=m.next}while(m!==c);m=h}c=m}if(c){e=qe(s,u),s=Ne(s,s.next),e=Ne(e,e.next),t(s,n,r,i,o,a),t(e,n,r,i,o,a);break t}u=u.next}s=s.next}while(s!==e)}}else t(Ne(e),n,r,i,o,a,1);break}}}}(a,s,n,f,d,r),s}(n,r),t=0;t<e.length;t+=3)i.push(e.slice(t,t+3));return i}};(Ze.prototype=Object.create(M.prototype)).constructor=Ze,(Je.prototype=Object.create(I.prototype)).constructor=Je,Je.prototype.getArrays=function(){var t=this.getAttribute("position");t=t?Array.prototype.slice.call(t.array):[];var e=this.getAttribute("uv");e=e?Array.prototype.slice.call(e.array):[];var n=this.index;return{position:t,uv:e,index:n=n?Array.prototype.slice.call(n.array):[]}},Je.prototype.addShapeList=function(t,e){var n=t.length;e.arrays=this.getArrays();for(var r=0;r<n;r++)this.addShape(t[r],e);this.setIndex(e.arrays.index),this.addAttribute("position",new P(e.arrays.position,3)),this.addAttribute("uv",new P(e.arrays.uv,2))},Je.prototype.addShape=function(t,e){function r(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function i(t,e,r){var i=t.x-e.x,o=t.y-e.y,a=r.x-t.x,s=r.y-t.y,u=i*i+o*o;if(Math.abs(i*s-o*a)>Number.EPSILON){var c=Math.sqrt(u),l=Math.sqrt(a*a+s*s);if(2>=(o=(a=(u=e.x-o/c)+i*(s=((r.x-s/l-u)*s-(r.y+a/l-(e=e.y+i/c))*a)/(i*s-o*a))-t.x)*a+(i=e+o*s-t.y)*i))return new n(a,i);o=Math.sqrt(o/2)}else t=!1,i>Number.EPSILON?a>Number.EPSILON&&(t=!0):i<-Number.EPSILON?a<-Number.EPSILON&&(t=!0):Math.sign(o)===Math.sign(s)&&(t=!0),t?(a=-o,o=Math.sqrt(u)):(a=i,i=o,o=Math.sqrt(u/2));return new n(a/o,i/o)}function a(t,e){for(B=t.length;0<=--B;){var n=B,r=B-1;0>r&&(r=t.length-1);var i,o=b+2*y;for(i=0;i<o;i++){var a=j*i,s=j*(i+1),u=e+r+a,h=e+r+s;s=e+n+s,c(e+n+a),c(u),c(s),c(u),c(h),c(s),l((a=S.generateSideWallUV(O,f,(a=f.length/3)-6,a-3,a-2,a-1))[0]),l(a[1]),l(a[3]),l(a[1]),l(a[2]),l(a[3])}}}function s(t,e,n){m.push(t),m.push(e),m.push(n)}function u(t,e,n){c(t),c(e),c(n),l((t=S.generateTopUV(O,f,(t=f.length/3)-3,t-2,t-1))[0]),l(t[1]),l(t[2])}function c(t){d.push(f.length/3),f.push(m[3*t]),f.push(m[3*t+1]),f.push(m[3*t+2])}function l(t){p.push(t.x),p.push(t.y)}var h=e.arrays?e.arrays:this.getArrays(),f=h.position,d=h.index,p=h.uv,m=[];h=void 0!==e.amount?e.amount:100;var g=void 0!==e.bevelThickness?e.bevelThickness:6,v=void 0!==e.bevelSize?e.bevelSize:g-2,y=void 0!==e.bevelSegments?e.bevelSegments:3,w=void 0===e.bevelEnabled||e.bevelEnabled,x=void 0!==e.curveSegments?e.curveSegments:12,b=void 0!==e.steps?e.steps:1,_=e.extrudePath,M=!1,S=void 0!==e.UVGenerator?e.UVGenerator:Ze.WorldUVGenerator;if(_){var E=_.getSpacedPoints(b);M=!0,w=!1;var T=void 0!==e.frames?e.frames:_.computeFrenetFrames(b,!1),A=new o,C=new o,k=new o}w||(v=g=y=0);var R,O=this,D=(x=t.extractPoints(x)).holes;if(!Gi.isClockWise(t=x.shape)){t=t.reverse();var L=0;for(R=D.length;L<R;L++){var N=D[L];Gi.isClockWise(N)&&(D[L]=N.reverse())}}var I=Gi.triangulateShape(t,D),F=t;for(L=0,R=D.length;L<R;L++)t=t.concat(N=D[L]);var z,U,j=t.length,V=I.length;x=[];var B=0,H=F.length,G=H-1;for(z=B+1;B<H;B++,G++,z++)G===H&&(G=0),z===H&&(z=0),x[B]=i(F[B],F[G],F[z]);_=[];var q=x.concat();for(L=0,R=D.length;L<R;L++){var W=[];for(G=(H=(N=D[L]).length)-1,z=1+(B=0);B<H;B++,G++,z++)G===H&&(G=0),z===H&&(z=0),W[B]=i(N[B],N[G],N[z]);_.push(W),q=q.concat(W)}for(G=0;G<y;G++){H=G/y;var Y=g*Math.cos(H*Math.PI/2);for(z=v*Math.sin(H*Math.PI/2),B=0,H=F.length;B<H;B++){var X=r(F[B],x[B],z);s(X.x,X.y,-Y)}for(L=0,R=D.length;L<R;L++)for(W=_[L],B=0,H=(N=D[L]).length;B<H;B++)s((X=r(N[B],W[B],z)).x,X.y,-Y)}for(z=v,B=0;B<j;B++)X=w?r(t[B],q[B],z):t[B],M?(C.copy(T.normals[0]).multiplyScalar(X.x),A.copy(T.binormals[0]).multiplyScalar(X.y),k.copy(E[0]).add(C).add(A),s(k.x,k.y,k.z)):s(X.x,X.y,0);for(H=1;H<=b;H++)for(B=0;B<j;B++)X=w?r(t[B],q[B],z):t[B],M?(C.copy(T.normals[H]).multiplyScalar(X.x),A.copy(T.binormals[H]).multiplyScalar(X.y),k.copy(E[H]).add(C).add(A),s(k.x,k.y,k.z)):s(X.x,X.y,h/b*H);for(G=y-1;0<=G;G--){for(H=G/y,Y=g*Math.cos(H*Math.PI/2),z=v*Math.sin(H*Math.PI/2),B=0,H=F.length;B<H;B++)s((X=r(F[B],x[B],z)).x,X.y,h+Y);for(L=0,R=D.length;L<R;L++)for(W=_[L],B=0,H=(N=D[L]).length;B<H;B++)X=r(N[B],W[B],z),M?s(X.x,X.y+E[b-1].y,E[b-1].x+Y):s(X.x,X.y,h+Y)}!function(){var t=f.length/3;if(w){var e=0*j;for(B=0;B<V;B++)u((U=I[B])[2]+e,U[1]+e,U[0]+e);for(e=j*(b+2*y),B=0;B<V;B++)u((U=I[B])[0]+e,U[1]+e,U[2]+e)}else{for(B=0;B<V;B++)u((U=I[B])[2],U[1],U[0]);for(B=0;B<V;B++)u((U=I[B])[0]+j*b,U[1]+j*b,U[2]+j*b)}O.addGroup(t,f.length/3-t,0)}(),function(){var t=f.length/3,e=0;for(a(F,e),e+=F.length,L=0,R=D.length;L<R;L++)a(N=D[L],e),e+=N.length;O.addGroup(t,f.length/3-t,1)}(),e.arrays||(this.setIndex(d),this.addAttribute("position",new P(f,3)),this.addAttribute("uv",new P(p,2)))},Ze.WorldUVGenerator={generateTopUV:function(t,e,r,i,o){t=e[3*i],i=e[3*i+1];var a=e[3*o];return o=e[3*o+1],[new n(e[3*r],e[3*r+1]),new n(t,i),new n(a,o)]},generateSideWallUV:function(t,e,r,i,o,a){t=e[3*r];var s=e[3*r+1];r=e[3*r+2];var u=e[3*i],c=e[3*i+1];i=e[3*i+2];var l=e[3*o],h=e[3*o+1];o=e[3*o+2];var f=e[3*a],d=e[3*a+1];return e=e[3*a+2],.01>Math.abs(s-c)?[new n(t,1-r),new n(u,1-i),new n(l,1-o),new n(f,1-e)]:[new n(s,1-r),new n(c,1-i),new n(h,1-o),new n(d,1-e)]}},(Ke.prototype=Object.create(M.prototype)).constructor=Ke,(tn.prototype=Object.create(Je.prototype)).constructor=tn,(en.prototype=Object.create(M.prototype)).constructor=en,(nn.prototype=Object.create(I.prototype)).constructor=nn,(rn.prototype=Object.create(M.prototype)).constructor=rn,(on.prototype=Object.create(I.prototype)).constructor=on,(an.prototype=Object.create(M.prototype)).constructor=an,(sn.prototype=Object.create(I.prototype)).constructor=sn,(un.prototype=Object.create(M.prototype)).constructor=un,un.prototype.toJSON=function(){var t=M.prototype.toJSON.call(this);return ln(this.parameters.shapes,t)},(cn.prototype=Object.create(I.prototype)).constructor=cn,cn.prototype.toJSON=function(){var t=I.prototype.toJSON.call(this);return ln(this.parameters.shapes,t)},(hn.prototype=Object.create(I.prototype)).constructor=hn,(fn.prototype=Object.create(M.prototype)).constructor=fn,(dn.prototype=Object.create(I.prototype)).constructor=dn,(pn.prototype=Object.create(fn.prototype)).constructor=pn,(mn.prototype=Object.create(dn.prototype)).constructor=mn,(gn.prototype=Object.create(M.prototype)).constructor=gn,(vn.prototype=Object.create(I.prototype)).constructor=vn;var qi=Object.freeze({WireframeGeometry:me,ParametricGeometry:ge,ParametricBufferGeometry:ve,TetrahedronGeometry:xe,TetrahedronBufferGeometry:be,OctahedronGeometry:_e,OctahedronBufferGeometry:Me,IcosahedronGeometry:Se,IcosahedronBufferGeometry:Ee,DodecahedronGeometry:Te,DodecahedronBufferGeometry:Ae,PolyhedronGeometry:ye,PolyhedronBufferGeometry:we,TubeGeometry:Ce,TubeBufferGeometry:ke,TorusKnotGeometry:Re,TorusKnotBufferGeometry:Oe,TorusGeometry:Pe,TorusBufferGeometry:De,TextGeometry:Ke,TextBufferGeometry:tn,SphereGeometry:en,SphereBufferGeometry:nn,RingGeometry:rn,RingBufferGeometry:on,PlaneGeometry:U,PlaneBufferGeometry:j,LatheGeometry:an,LatheBufferGeometry:sn,ShapeGeometry:un,ShapeBufferGeometry:cn,ExtrudeGeometry:Ze,ExtrudeBufferGeometry:Je,EdgesGeometry:hn,ConeGeometry:pn,ConeBufferGeometry:mn,CylinderGeometry:fn,CylinderBufferGeometry:dn,CircleGeometry:gn,CircleBufferGeometry:vn,BoxGeometry:F,BoxBufferGeometry:z});(yn.prototype=Object.create(V.prototype)).constructor=yn,yn.prototype.isShadowMaterial=!0,yn.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this},(wn.prototype=Object.create(H.prototype)).constructor=wn,wn.prototype.isRawShaderMaterial=!0,(xn.prototype=Object.create(V.prototype)).constructor=xn,xn.prototype.isMeshStandardMaterial=!0,xn.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(bn.prototype=Object.create(xn.prototype)).constructor=bn,bn.prototype.isMeshPhysicalMaterial=!0,bn.prototype.copy=function(t){return xn.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},(_n.prototype=Object.create(V.prototype)).constructor=_n,_n.prototype.isMeshPhongMaterial=!0,_n.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Mn.prototype=Object.create(_n.prototype)).constructor=Mn,Mn.prototype.isMeshToonMaterial=!0,Mn.prototype.copy=function(t){return _n.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},(Sn.prototype=Object.create(V.prototype)).constructor=Sn,Sn.prototype.isMeshNormalMaterial=!0,Sn.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(En.prototype=Object.create(V.prototype)).constructor=En,En.prototype.isMeshLambertMaterial=!0,En.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Tn.prototype=Object.create(oe.prototype)).constructor=Tn,Tn.prototype.isLineDashedMaterial=!0,Tn.prototype.copy=function(t){return oe.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Wi=Object.freeze({ShadowMaterial:yn,SpriteMaterial:Kt,RawShaderMaterial:wn,ShaderMaterial:H,PointsMaterial:ce,MeshPhysicalMaterial:bn,MeshStandardMaterial:xn,MeshPhongMaterial:_n,MeshToonMaterial:Mn,MeshNormalMaterial:Sn,MeshLambertMaterial:En,MeshDepthMaterial:jt,MeshDistanceMaterial:Vt,MeshBasicMaterial:B,LineDashedMaterial:Tn,LineBasicMaterial:oe,Material:V}),Yi={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Xi=new An,$i={};Object.assign(Cn.prototype,{load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Yi.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;if(void 0===$i[t]){var a=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){n=a[1];var s=!!a[2];a=a[3],a=window.decodeURIComponent(a),s&&(a=window.atob(a));try{var u=(this.responseType||"").toLowerCase();switch(u){case"arraybuffer":case"blob":var c=new Uint8Array(a.length);for(s=0;s<a.length;s++)c[s]=a.charCodeAt(s);var l="blob"===u?new Blob([c.buffer],{type:n}):c.buffer;break;case"document":l=(new DOMParser).parseFromString(a,n);break;case"json":l=JSON.parse(a);break;default:l=a}window.setTimeout(function(){e&&e(l),i.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){r&&r(e),i.manager.itemEnd(t),i.manager.itemError(t)},0)}}else{$i[t]=[],$i[t].push({onLoad:e,onProgress:n,onError:r});var h=new XMLHttpRequest;for(s in h.open("GET",t,!0),h.addEventListener("load",function(e){var n=this.response;Yi.add(t,n);var r=$i[t];if(delete $i[t],200===this.status){for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(t)}else if(0===this.status){for(console.warn("THREE.FileLoader: HTTP Status 0 received."),o=0,a=r.length;o<a;o++)(s=r[o]).onLoad&&s.onLoad(n);i.manager.itemEnd(t)}else{for(o=0,a=r.length;o<a;o++)(s=r[o]).onError&&s.onError(e);i.manager.itemEnd(t),i.manager.itemError(t)}},!1),h.addEventListener("progress",function(e){for(var n=$i[t],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(e)}},!1),h.addEventListener("error",function(e){var n=$i[t];delete $i[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemEnd(t),i.manager.itemError(t)},!1),void 0!==this.responseType&&(h.responseType=this.responseType),void 0!==this.withCredentials&&(h.withCredentials=this.withCredentials),h.overrideMimeType&&h.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)h.setRequestHeader(s,this.requestHeader[s]);h.send(null)}return i.manager.itemStart(t),h}$i[t].push({onLoad:e,onProgress:n,onError:r})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(kn.prototype,{load:function(t,e,n,r){function i(i){u.load(t[i],function(t){t=o._parser(t,!0),a[i]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(c+=1)&&(1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,e&&e(s))},n,r)}var o=this,a=[],s=new de;s.image=a;var u=new Cn(this.manager);if(u.setPath(this.path),u.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,l=0,h=t.length;l<h;++l)i(l);else u.load(t,function(t){if((t=o._parser(t,!0)).isCubemap)for(var n=t.mipmaps.length/t.mipmapCount,r=0;r<n;r++){a[r]={mipmaps:[]};for(var i=0;i<t.mipmapCount;i++)a[r].mipmaps.push(t.mipmaps[r*t.mipmapCount+i]),a[r].format=t.format,a[r].width=t.width,a[r].height=t.height}else s.image.width=t.width,s.image.height=t.height,s.mipmaps=t.mipmaps;1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,e&&e(s)},n,r);return s},setPath:function(t){return this.path=t,this}}),Object.assign(Rn.prototype,{load:function(t,e,n,r){var i=this,o=new h,a=new Cn(this.manager);return a.setResponseType("arraybuffer"),a.load(t,function(t){(t=i._parser(t))&&(void 0!==t.image?o.image=t.image:void 0!==t.data&&(o.image.width=t.width,o.image.height=t.height,o.image.data=t.data),o.wrapS=void 0!==t.wrapS?t.wrapS:1001,o.wrapT=void 0!==t.wrapT?t.wrapT:1001,o.magFilter=void 0!==t.magFilter?t.magFilter:1006,o.minFilter=void 0!==t.minFilter?t.minFilter:1008,o.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(o.format=t.format),void 0!==t.type&&(o.type=t.type),void 0!==t.mipmaps&&(o.mipmaps=t.mipmaps),1===t.mipmapCount&&(o.minFilter=1006),o.needsUpdate=!0,e&&e(o,t))},n,r),o}}),Object.assign(On.prototype,{crossOrigin:"Anonymous",load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Yi.get(t);return void 0!==o?(i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o):((n=document.createElementNS("http://www.w3.org/1999/xhtml","img")).addEventListener("load",function(){Yi.add(t,this),e&&e(this),i.manager.itemEnd(t)},!1),n.addEventListener("error",function(e){r&&r(e),i.manager.itemEnd(t),i.manager.itemError(t)},!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(n.crossOrigin=this.crossOrigin),i.manager.itemStart(t),n.src=t,n)},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Pn.prototype,{crossOrigin:"Anonymous",load:function(t,e,n,r){function i(n){a.load(t[n],function(t){o.images[n]=t,6==++s&&(o.needsUpdate=!0,e&&e(o))},void 0,r)}var o=new J,a=new On(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var s=0;for(n=0;n<t.length;++n)i(n);return o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Dn.prototype,{crossOrigin:"Anonymous",load:function(t,e,n,r){var i=new s,o=new On(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(n){i.image=n,n=0<t.search(/\.(jpg|jpeg)$/)||0===t.search(/^data:image\/jpeg/),i.format=n?1022:1023,i.needsUpdate=!0,void 0!==e&&e(i)},n,r),i},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ln.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){return t=this.getUtoTmapping(t),this.getPoint(t,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],r=this.getPoint(0),i=0;for(n.push(0),e=1;e<=t;e++){var o=this.getPoint(e/t);i+=o.distanceTo(r),n.push(i),r=o}return this.cacheArcLengths=n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n=this.getLengths(),r=n.length;e=e||t*n[r-1];for(var i,o=0,a=r-1;o<=a;)if(0>(i=n[t=Math.floor(o+(a-o)/2)]-e))o=t+1;else{if(!(0<i)){a=t;break}a=t-1}return n[t=a]===e?t/(r-1):(t+(e-(o=n[t]))/(n[t+1]-o))/(r-1)},getTangent:function(t){var e=t-1e-4;return t+=1e-4,0>e&&(e=0),1<t&&(t=1),e=this.getPoint(e),this.getPoint(t).clone().sub(e).normalize()},getTangentAt:function(t){return t=this.getUtoTmapping(t),this.getTangent(t)},computeFrenetFrames:function(t,e){var n,i=new o,a=[],s=[],u=[],c=new o,l=new r;for(n=0;n<=t;n++){var h=n/t;a[n]=this.getTangentAt(h),a[n].normalize()}s[0]=new o,u[0]=new o,n=Number.MAX_VALUE,h=Math.abs(a[0].x);var f=Math.abs(a[0].y),d=Math.abs(a[0].z);for(h<=n&&(n=h,i.set(1,0,0)),f<=n&&(n=f,i.set(0,1,0)),d<=n&&i.set(0,0,1),c.crossVectors(a[0],i).normalize(),s[0].crossVectors(a[0],c),u[0].crossVectors(a[0],s[0]),n=1;n<=t;n++)s[n]=s[n-1].clone(),u[n]=u[n-1].clone(),c.crossVectors(a[n-1],a[n]),c.length()>Number.EPSILON&&(c.normalize(),i=Math.acos(Si.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(l.makeRotationAxis(c,i))),u[n].crossVectors(a[n],s[n]);if(!0===e)for(i=Math.acos(Si.clamp(s[0].dot(s[t]),-1,1)),i/=t,0<a[0].dot(c.crossVectors(s[0],s[t]))&&(i=-i),n=1;n<=t;n++)s[n].applyMatrix4(l.makeRotationAxis(a[n],i*n)),u[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),(Nn.prototype=Object.create(Ln.prototype)).constructor=Nn,Nn.prototype.isEllipseCurve=!0,Nn.prototype.getPoint=function(t,e){e=e||new n;for(var r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;0>i;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i=i===r?-r:i-r),r=this.aStartAngle+t*i,t=this.aX+this.xRadius*Math.cos(r);var a=this.aY+this.yRadius*Math.sin(r);return 0!==this.aRotation&&(r=Math.cos(this.aRotation),i=Math.sin(this.aRotation),t=(o=t-this.aX)*r-(a-=this.aY)*i+this.aX,a=o*i+a*r+this.aY),e.set(t,a)},Nn.prototype.copy=function(t){return Ln.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Nn.prototype.toJSON=function(){var t=Ln.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Nn.prototype.fromJSON=function(t){return Ln.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},(In.prototype=Object.create(Nn.prototype)).constructor=In,In.prototype.isArcCurve=!0;var Qi=new o,Zi=new Fn,Ji=new Fn,Ki=new Fn;(zn.prototype=Object.create(Ln.prototype)).constructor=zn,zn.prototype.isCatmullRomCurve3=!0,zn.prototype.getPoint=function(t,e){e=e||new o;var n=this.points,r=n.length;t*=r-(this.closed?0:1);var i=Math.floor(t);if(t-=i,this.closed?i+=0<i?0:(Math.floor(Math.abs(i)/n.length)+1)*n.length:0===t&&i===r-1&&(i=r-2,t=1),this.closed||0<i)var a=n[(i-1)%r];else Qi.subVectors(n[0],n[1]).add(n[0]),a=Qi;var s=n[i%r],u=n[(i+1)%r];if(this.closed||i+2<r?n=n[(i+2)%r]:(Qi.subVectors(n[r-1],n[r-2]).add(n[r-1]),n=Qi),"centripetal"===this.curveType||"chordal"===this.curveType){var c="chordal"===this.curveType?.5:.25;r=Math.pow(a.distanceToSquared(s),c),i=Math.pow(s.distanceToSquared(u),c),c=Math.pow(u.distanceToSquared(n),c),1e-4>i&&(i=1),1e-4>r&&(r=i),1e-4>c&&(c=i),Zi.initNonuniformCatmullRom(a.x,s.x,u.x,n.x,r,i,c),Ji.initNonuniformCatmullRom(a.y,s.y,u.y,n.y,r,i,c),Ki.initNonuniformCatmullRom(a.z,s.z,u.z,n.z,r,i,c)}else"catmullrom"===this.curveType&&(Zi.initCatmullRom(a.x,s.x,u.x,n.x,this.tension),Ji.initCatmullRom(a.y,s.y,u.y,n.y,this.tension),Ki.initCatmullRom(a.z,s.z,u.z,n.z,this.tension));return e.set(Zi.calc(t),Ji.calc(t),Ki.calc(t)),e},zn.prototype.copy=function(t){Ln.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},zn.prototype.toJSON=function(){var t=Ln.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},zn.prototype.fromJSON=function(t){Ln.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new o).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},(Bn.prototype=Object.create(Ln.prototype)).constructor=Bn,Bn.prototype.isCubicBezierCurve=!0,Bn.prototype.getPoint=function(t,e){e=e||new n;var r=this.v0,i=this.v1,o=this.v2,a=this.v3;return e.set(Vn(t,r.x,i.x,o.x,a.x),Vn(t,r.y,i.y,o.y,a.y)),e},Bn.prototype.copy=function(t){return Ln.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Bn.prototype.toJSON=function(){var t=Ln.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Bn.prototype.fromJSON=function(t){return Ln.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(Hn.prototype=Object.create(Ln.prototype)).constructor=Hn,Hn.prototype.isCubicBezierCurve3=!0,Hn.prototype.getPoint=function(t,e){e=e||new o;var n=this.v0,r=this.v1,i=this.v2,a=this.v3;return e.set(Vn(t,n.x,r.x,i.x,a.x),Vn(t,n.y,r.y,i.y,a.y),Vn(t,n.z,r.z,i.z,a.z)),e},Hn.prototype.copy=function(t){return Ln.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Hn.prototype.toJSON=function(){var t=Ln.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Hn.prototype.fromJSON=function(t){return Ln.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(Gn.prototype=Object.create(Ln.prototype)).constructor=Gn,Gn.prototype.isLineCurve=!0,Gn.prototype.getPoint=function(t,e){return e=e||new n,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},Gn.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Gn.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Gn.prototype.copy=function(t){return Ln.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Gn.prototype.toJSON=function(){var t=Ln.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Gn.prototype.fromJSON=function(t){return Ln.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(qn.prototype=Object.create(Ln.prototype)).constructor=qn,qn.prototype.isLineCurve3=!0,qn.prototype.getPoint=function(t,e){return e=e||new o,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},qn.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},qn.prototype.copy=function(t){return Ln.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},qn.prototype.toJSON=function(){var t=Ln.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},qn.prototype.fromJSON=function(t){return Ln.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Wn.prototype=Object.create(Ln.prototype)).constructor=Wn,Wn.prototype.isQuadraticBezierCurve=!0,Wn.prototype.getPoint=function(t,e){e=e||new n;var r=this.v0,i=this.v1,o=this.v2;return e.set(jn(t,r.x,i.x,o.x),jn(t,r.y,i.y,o.y)),e},Wn.prototype.copy=function(t){return Ln.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Wn.prototype.toJSON=function(){var t=Ln.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Wn.prototype.fromJSON=function(t){return Ln.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Yn.prototype=Object.create(Ln.prototype)).constructor=Yn,Yn.prototype.isQuadraticBezierCurve3=!0,Yn.prototype.getPoint=function(t,e){e=e||new o;var n=this.v0,r=this.v1,i=this.v2;return e.set(jn(t,n.x,r.x,i.x),jn(t,n.y,r.y,i.y),jn(t,n.z,r.z,i.z)),e},Yn.prototype.copy=function(t){return Ln.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Yn.prototype.toJSON=function(){var t=Ln.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Yn.prototype.fromJSON=function(t){return Ln.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Xn.prototype=Object.create(Ln.prototype)).constructor=Xn,Xn.prototype.isSplineCurve=!0,Xn.prototype.getPoint=function(t,e){e=e||new n;var r=this.points,i=(r.length-1)*t;i-=t=Math.floor(i);var o=r[0===t?t:t-1],a=r[t],s=r[t>r.length-2?r.length-1:t+1];return e.set(Un(i,o.x,a.x,s.x,(r=r[t>r.length-3?r.length-1:t+2]).x),Un(i,o.y,a.y,s.y,r.y)),e},Xn.prototype.copy=function(t){Ln.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this},Xn.prototype.toJSON=function(){var t=Ln.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t},Xn.prototype.fromJSON=function(t){Ln.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push((new n).fromArray(i))}return this};var to=Object.freeze({ArcCurve:In,CatmullRomCurve3:zn,CubicBezierCurve:Bn,CubicBezierCurve3:Hn,EllipseCurve:Nn,LineCurve:Gn,LineCurve3:qn,QuadraticBezierCurve:Wn,QuadraticBezierCurve3:Yn,SplineCurve:Xn});$n.prototype=Object.assign(Object.create(Ln.prototype),{constructor:$n,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Gn(e,t))},getPoint:function(t){var e=t*this.getLength(),n=this.getCurveLengths();for(t=0;t<n.length;){if(n[t]>=e)return e=n[t]-e,n=(t=this.curves[t]).getLength(),t.getPointAt(0===n?0:1-e/n);t++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],r=0,i=this.curves;r<i.length;r++){var o=i[r];o=o.getPoints(o&&o.isEllipseCurve?2*t:o&&o.isLineCurve?1:o&&o.isSplineCurve?t*o.points.length:t);for(var a=0;a<o.length;a++){var s=o[a];e&&e.equals(s)||(n.push(s),e=s)}}return this.autoClose&&1<n.length&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){Ln.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=Ln.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t},fromJSON:function(t){Ln.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push((new to[r.type]).fromJSON(r))}return this}}),Qn.prototype=Object.assign(Object.create($n.prototype),{constructor:Qn,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var r=new Gn(this.currentPoint.clone(),new n(t,e));this.curves.push(r),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,r,i){t=new Wn(this.currentPoint.clone(),new n(t,e),new n(r,i)),this.curves.push(t),this.currentPoint.set(r,i)},bezierCurveTo:function(t,e,r,i,o,a){t=new Bn(this.currentPoint.clone(),new n(t,e),new n(r,i),new n(o,a)),this.curves.push(t),this.currentPoint.set(o,a)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t);e=new Xn(e),this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,r,i,o){this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,i,o)},absarc:function(t,e,n,r,i,o){this.absellipse(t,e,n,n,r,i,o)},ellipse:function(t,e,n,r,i,o,a,s){this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,i,o,a,s)},absellipse:function(t,e,n,r,i,o,a,s){t=new Nn(t,e,n,r,i,o,a,s),0<this.curves.length&&((e=t.getPoint(0)).equals(this.currentPoint)||this.lineTo(e.x,e.y)),this.curves.push(t),t=t.getPoint(1),this.currentPoint.copy(t)},copy:function(t){return $n.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=$n.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return $n.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Zn.prototype=Object.assign(Object.create(Qn.prototype),{constructor:Zn,getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Qn.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this},toJSON:function(){var t=Qn.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t},fromJSON:function(t){Qn.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push((new Qn).fromJSON(r))}return this}}),Jn.prototype=Object.assign(Object.create(w.prototype),{constructor:Jn,isLight:!0,copy:function(t){return w.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){return(t=w.prototype.toJSON.call(this,t)).object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Kn.prototype=Object.assign(Object.create(Jn.prototype),{constructor:Kn,isHemisphereLight:!0,copy:function(t){return Jn.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(tr.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),er.prototype=Object.assign(Object.create(tr.prototype),{constructor:er,isSpotLightShadow:!0,update:function(t){var e=this.camera,n=2*Si.RAD2DEG*t.angle,r=this.mapSize.width/this.mapSize.height;t=t.distance||e.far,n===e.fov&&r===e.aspect&&t===e.far||(e.fov=n,e.aspect=r,e.far=t,e.updateProjectionMatrix())}}),nr.prototype=Object.assign(Object.create(Jn.prototype),{constructor:nr,isSpotLight:!0,copy:function(t){return Jn.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),rr.prototype=Object.assign(Object.create(Jn.prototype),{constructor:rr,isPointLight:!0,copy:function(t){return Jn.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),ir.prototype=Object.assign(Object.create(tr.prototype),{constructor:ir}),or.prototype=Object.assign(Object.create(Jn.prototype),{constructor:or,isDirectionalLight:!0,copy:function(t){return Jn.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),ar.prototype=Object.assign(Object.create(Jn.prototype),{constructor:ar,isAmbientLight:!0}),sr.prototype=Object.assign(Object.create(Jn.prototype),{constructor:sr,isRectAreaLight:!0,copy:function(t){return Jn.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){return(t=Jn.prototype.toJSON.call(this,t)).object.width=this.width,t.object.height=this.height,t}}),ur.prototype=Object.assign(Object.create(yr.prototype),{constructor:ur,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),cr.prototype=Object.assign(Object.create(yr.prototype),{constructor:cr,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(lr.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{n:{r:if(!(t<r)){for(var o=n+2;;){if(void 0===r){if(t<i)break r;return this._cachedIndex=n=e.length,this.afterEnd_(n-1,t,i)}if(n===o)break;if(i=r,t<(r=e[++n]))break e}r=e.length;break n}if(t>=i)break t;for(t<(o=e[1])&&(n=2,i=o),o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===o)break;if(r=i,t>=(i=e[--n-1]))break e}r=n,n=0}for(;n<r;)t<e[i=n+r>>>1]?r=i:n=i+1;if(r=e[n],void 0===(i=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return this._cachedIndex=n=e.length,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize;t*=r;for(var i=0;i!==r;++i)e[i]=n[t+i];return e},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(lr.prototype,{beforeStart_:lr.prototype.copySampleValue_,afterEnd_:lr.prototype.copySampleValue_}),hr.prototype=Object.assign(Object.create(lr.prototype),{constructor:hr,interpolate_:function(t,e,n,r){var o=this.resultBuffer,a=this.sampleValues,s=this.valueSize;for(e=(n-e)/(r-e),n=(t*=s)+s;t!==n;t+=4)i.slerpFlat(o,0,a,t-s,a,t,e);return o}}),fr.prototype=Object.assign(Object.create(yr.prototype),{constructor:fr,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new hr(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),dr.prototype=Object.assign(Object.create(yr.prototype),{constructor:dr,ValueTypeName:"color"}),pr.prototype=Object.assign(Object.create(yr.prototype),{constructor:pr,ValueTypeName:"number"}),mr.prototype=Object.assign(Object.create(lr.prototype),{constructor:mr,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,n){var r=this.parameterPositions,i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=t,a=2*e-n;break;case 2402:a=e+r[i=r.length-2]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=t,s=2*n-e;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}r=this.valueSize,this._weightPrev=(t=.5*(n-e))/(e-a),this._weightNext=t/(s-n),this._offsetPrev=i*r,this._offsetNext=o*r},interpolate_:function(t,e,n,r){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(t*=a)-a,u=this._offsetPrev,c=this._offsetNext,l=this._weightPrev,h=this._weightNext,f=(n-e)/(r-e);for(e=-l*(r=(n=f*f)*f)+2*l*n-l*f,l=(1+l)*r+(-1.5-2*l)*n+(-.5+l)*f+1,f=(-1-h)*r+(1.5+h)*n+.5*f,h=h*r-h*n,n=0;n!==a;++n)i[n]=e*o[u+n]+l*o[s+n]+f*o[t+n]+h*o[c+n];return i}}),gr.prototype=Object.assign(Object.create(lr.prototype),{constructor:gr,interpolate_:function(t,e,n,r){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(t*=a)-a;for(n=1-(e=(n-e)/(r-e)),r=0;r!==a;++r)i[r]=o[s+r]*n+o[t+r]*e;return i}}),vr.prototype=Object.assign(Object.create(lr.prototype),{constructor:vr,interpolate_:function(t){return this.copySampleValue_(t-1)}});var eo={arraySlice:function(t,e,n){return eo.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=Array(e),r=0;r!==e;++r)n[r]=r;return n.sort(function(e,n){return t[e]-t[n]}),n},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*e,u=0;u!==e;++u)i[a++]=t[s+u];return i},flattenJSON:function(t,e,n,r){for(var i=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)}}};Object.assign(yr,{parse:function(t){if(void 0===t.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=yr._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var n=[],r=[];eo.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e=t.constructor;if(void 0!==e.toJSON)e=e.toJSON(t);else{e={name:t.name,times:eo.convertArray(t.times,Array),values:eo.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(e.interpolation=n)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return pr;case"vector":case"vector2":case"vector3":case"vector4":return wr;case"color":return dr;case"quaternion":return fr;case"bool":case"boolean":return cr;case"string":return ur}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}}),Object.assign(yr.prototype,{constructor:yr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new vr(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new gr(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new mr(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){switch(t){case 2300:var e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){if(e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw Error(e);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",e)}else this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;return++o,0===i&&o===r||(i>=o&&(i=(o=Math.max(o,1))-1),t=this.getValueSize(),this.times=eo.arraySlice(n,i,o),this.values=eo.arraySlice(this.values,i*t,o*t)),this},validate:function(){var t=!0,e=this.getValueSize();0!=e-Math.floor(e)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times;e=this.values;var r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var i=null,o=0;o!==r;o++){var a=n[o];if("number"==typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a),t=!1;break}if(null!==i&&i>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,i),t=!1;break}i=a}if(void 0!==e&&eo.isTypedArray(e))for(o=0,n=e.length;o!==n;++o)if(r=e[o],isNaN(r)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,r),t=!1;break}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),r=2302===this.getInterpolation(),i=1,o=t.length-1,a=1;a<o;++a){var s=!1,u=t[a];if(u!==t[a+1]&&(1!==a||u!==u[0]))if(r)s=!0;else{var c=a*n,l=c-n,h=c+n;for(u=0;u!==n;++u){var f=e[c+u];if(f!==e[l+u]||f!==e[h+u]){s=!0;break}}}if(s){if(a!==i)for(t[i]=t[a],s=a*n,c=i*n,u=0;u!==n;++u)e[c+u]=e[s+u];++i}}if(0<o){for(t[i]=t[o],s=o*n,c=i*n,u=0;u!==n;++u)e[c+u]=e[s+u];++i}return i!==t.length&&(this.times=eo.arraySlice(t,0,i),this.values=eo.arraySlice(e,0,i*n)),this}}),wr.prototype=Object.assign(Object.create(yr.prototype),{constructor:wr,ValueTypeName:"vector"}),Object.assign(xr,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,o=n.length;i!==o;++i)e.push(yr.parse(n[i]).scale(r));return new xr(t.name,t.duration,e)},toJSON:function(t){var e=[],n=t.tracks;t={name:t.name,duration:t.duration,tracks:e};for(var r=0,i=n.length;r!==i;++r)e.push(yr.toJSON(n[r]));return t},CreateFromMorphTargetSequence:function(t,e,n,r){for(var i=e.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var c=eo.getKeyframeOrder(s);s=eo.sortedArray(s,1,c),u=eo.sortedArray(u,1,c),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new pr(".morphTargetInfluences["+e[a].name+"]",s,u).scale(1/n))}return new xr(t,-1,o)},findByName:function(t,e){var n=t;for(Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations),t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],u=s.name.match(i);if(u&&1<u.length){var c=u[1];(u=r[c])||(r[c]=u=[]),u.push(s)}}for(c in t=[],r)t.push(xr.CreateFromMorphTargetSequence(c,r[c],e,n));return t},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var n=function(t,e,n,r,i){if(0!==n.length){var o=[],a=[];eo.flattenJSON(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.length||-1,a=t.fps||30;t=t.hierarchy||[];for(var s=0;s<t.length;s++){var u=t[s].keys;if(u&&0!==u.length)if(u[0].morphTargets){o={};for(var c=0;c<u.length;c++)if(u[c].morphTargets)for(var l=0;l<u[c].morphTargets.length;l++)o[u[c].morphTargets[l]]=-1;for(var h in o){var f=[],d=[];for(l=0;l!==u[c].morphTargets.length;++l){var p=u[c];f.push(p.time),d.push(p.morphTarget===h?1:0)}r.push(new pr(".morphTargetInfluence["+h+"]",f,d))}o=o.length*(a||1)}else n(wr,(c=".bones["+e[s].name+"]")+".position",u,"pos",r),n(fr,c+".quaternion",u,"rot",r),n(wr,c+".scale",u,"scl",r)}return 0===r.length?null:new xr(i,o,r)}}),Object.assign(xr.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var r=this.tracks[e];t=Math.max(t,r.times[r.times.length-1])}this.duration=t},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}}),Object.assign(br.prototype,{load:function(t,e,n,r){var i=this;new Cn(i.manager).load(t,function(t){e(i.parse(JSON.parse(t)))},n,r)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return void 0===r[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),r[t]}var r=this.textures,i=new Wi[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearCoat&&(i.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(i.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(i.uniforms=t.uniforms),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=e(t.map)),void 0!==t.alphaMap&&(i.alphaMap=e(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=e(t.normalMap)),void 0!==t.normalScale){var o=t.normalScale;!1===Array.isArray(o)&&(o=[o,o]),i.normalScale=(new n).fromArray(o)}return void 0!==t.displacementMap&&(i.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=e(t.specularMap)),void 0!==t.envMap&&(i.envMap=e(t.envMap)),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.lightMap&&(i.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=e(t.gradientMap)),i}}),Object.assign(_r.prototype,{load:function(t,e,n,r){var i=this;new Cn(i.manager).load(t,function(t){e(i.parse(JSON.parse(t)))},n,r)},parse:function(t){var e=new I,n=t.data.index;void 0!==n&&(n=new no[n.type](n.array),e.setIndex(new S(n,1)));var r=t.data.attributes;for(a in r){var i=r[a];n=new no[i.type](i.array),e.addAttribute(a,new S(n,i.itemSize,i.normalized))}var a=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==a)for(n=0,r=a.length;n!==r;++n)e.addGroup((i=a[n]).start,i.count,i.materialIndex);return void 0!==(t=t.data.boundingSphere)&&(a=new o,void 0!==t.center&&a.fromArray(t.center),e.boundingSphere=new d(a,t.radius)),e}});var no={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Mr.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,r=e.length;n<r;n+=2){var i=e[n+1];if(e[n].test(t))return i}return null}},Object.assign(Mr.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,n){for(var r=[],i=0;i<t.length;++i)r[i]=this.createMaterial(t[i],e,n);return r},createMaterial:function(){var t={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},e=new g,n=new Dn,r=new br;return function(i,o,a){function s(t,e,r,i,s){var u=Mr.Handlers.get(t=o+t);return null!==u?t=u.load(t):(n.setCrossOrigin(a),t=n.load(t)),void 0!==e&&(t.repeat.fromArray(e),1!==e[0]&&(t.wrapS=1e3),1!==e[1]&&(t.wrapT=1e3)),void 0!==r&&t.offset.fromArray(r),void 0!==i&&("repeat"===i[0]&&(t.wrapS=1e3),"mirror"===i[0]&&(t.wrapS=1002),"repeat"===i[1]&&(t.wrapT=1e3),"mirror"===i[1]&&(t.wrapT=1002)),void 0!==s&&(t.anisotropy=s),e=Si.generateUUID(),c[e]=t,e}var u,c={},l={uuid:Si.generateUUID(),type:"MeshLambertMaterial"};for(u in i){var h=i[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=h;break;case"blending":l.blending=t[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":l.color=e.fromArray(h).getHex();break;case"colorSpecular":l.specular=e.fromArray(h).getHex();break;case"colorEmissive":l.emissive=e.fromArray(h).getHex();break;case"specularCoef":l.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=s(h,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=s(h,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=s(h,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=s(h,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=s(h,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=s(h,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=s(h,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=s(h,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=s(h,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=s(h,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=1;break;case"doubleSided":l.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[u]=h;break;case"vertexColors":!0===h&&(l.vertexColors=2),"face"===h&&(l.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,h)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,1>l.opacity&&(l.transparent=!0),r.setTextures(c),r.parse(l)}}()});var ro={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);return decodeURIComponent(escape(e))},extractUrlBase:function(t){return 1===(t=t.split("/")).length?"./":(t.pop(),t.join("/")+"/")}};Object.assign(Sr.prototype,{load:function(t,e,n,r){var i=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:ro.extractUrlBase(t),a=new Cn(this.manager);a.setWithCredentials(this.withCredentials),a.load(t,function(n){var r=(n=JSON.parse(n)).metadata;void 0===r||void 0===(r=r.type)||"object"!==r.toLowerCase()?(n=i.parse(n,o),e(n.geometry,n.materials)):console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.")},n,r)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){void 0!==t.data&&(t=t.data),t.scale=void 0!==t.scale?1/t.scale:1;var r,i,a,s=new M,c=t,l=c.faces,h=c.vertices,f=c.normals,d=c.colors,p=c.scale,m=0;if(void 0!==c.uvs){for(r=0;r<c.uvs.length;r++)c.uvs[r].length&&m++;for(r=0;r<m;r++)s.faceVertexUvs[r]=[]}var v=0;for(a=h.length;v<a;)(r=new o).x=h[v++]*p,r.y=h[v++]*p,r.z=h[v++]*p,s.vertices.push(r);for(v=0,a=l.length;v<a;){var y=1&(h=l[v++]),w=2&h;r=8&h;var x=16&h,b=32&h;if(p=64&h,h&=128,y){(y=new _).a=l[v],y.b=l[v+1],y.c=l[v+3];var S=new _;if(S.a=l[v+1],S.b=l[v+2],S.c=l[v+3],v+=4,w&&(w=l[v++],y.materialIndex=w,S.materialIndex=w),w=s.faces.length,r)for(r=0;r<m;r++){var E=c.uvs[r];for(s.faceVertexUvs[r][w]=[],s.faceVertexUvs[r][w+1]=[],i=0;4>i;i++){var T=l[v++],A=E[2*T];A=new n(A,T=E[2*T+1]),2!==i&&s.faceVertexUvs[r][w].push(A),0!==i&&s.faceVertexUvs[r][w+1].push(A)}}if(x&&(x=3*l[v++],y.normal.set(f[x++],f[x++],f[x]),S.normal.copy(y.normal)),b)for(r=0;4>r;r++)x=3*l[v++],b=new o(f[x++],f[x++],f[x]),2!==r&&y.vertexNormals.push(b),0!==r&&S.vertexNormals.push(b);if(p&&(p=l[v++],y.color.setHex(p=d[p]),S.color.setHex(p)),h)for(r=0;4>r;r++)p=d[p=l[v++]],2!==r&&y.vertexColors.push(new g(p)),0!==r&&S.vertexColors.push(new g(p));s.faces.push(y),s.faces.push(S)}else{if((y=new _).a=l[v++],y.b=l[v++],y.c=l[v++],w&&(w=l[v++],y.materialIndex=w),w=s.faces.length,r)for(r=0;r<m;r++)for(E=c.uvs[r],s.faceVertexUvs[r][w]=[],i=0;3>i;i++)A=new n(A=E[2*(T=l[v++])],T=E[2*T+1]),s.faceVertexUvs[r][w].push(A);if(x&&(x=3*l[v++],y.normal.set(f[x++],f[x++],f[x])),b)for(r=0;3>r;r++)x=3*l[v++],b=new o(f[x++],f[x++],f[x]),y.vertexNormals.push(b);if(p&&(p=l[v++],y.color.setHex(d[p])),h)for(r=0;3>r;r++)p=l[v++],y.vertexColors.push(new g(d[p]));s.faces.push(y)}}if(v=void 0!==(c=t).influencesPerVertex?c.influencesPerVertex:2,c.skinWeights)for(a=0,l=c.skinWeights.length;a<l;a+=v)s.skinWeights.push(new u(c.skinWeights[a],1<v?c.skinWeights[a+1]:0,2<v?c.skinWeights[a+2]:0,3<v?c.skinWeights[a+3]:0));if(c.skinIndices)for(a=0,l=c.skinIndices.length;a<l;a+=v)s.skinIndices.push(new u(c.skinIndices[a],1<v?c.skinIndices[a+1]:0,2<v?c.skinIndices[a+2]:0,3<v?c.skinIndices[a+3]:0));if(s.bones=c.bones,s.bones&&0<s.bones.length&&(s.skinWeights.length!==s.skinIndices.length||s.skinIndices.length!==s.vertices.length)&&console.warn("When skinning, number of vertices ("+s.vertices.length+"), skinIndices ("+s.skinIndices.length+"), and skinWeights ("+s.skinWeights.length+") should match."),l=(a=t).scale,void 0!==a.morphTargets)for(c=0,v=a.morphTargets.length;c<v;c++)for(s.morphTargets[c]={},s.morphTargets[c].name=a.morphTargets[c].name,s.morphTargets[c].vertices=[],f=s.morphTargets[c].vertices,m=0,h=(d=a.morphTargets[c].vertices).length;m<h;m+=3)(p=new o).x=d[m]*l,p.y=d[m+1]*l,p.z=d[m+2]*l,f.push(p);if(void 0!==a.morphColors&&0<a.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),a=a.morphColors[0].colors,c=0,v=(l=s.faces).length;c<v;c++)l[c].color.fromArray(a,3*c);for(c=[],v=[],void 0!==(a=t).animation&&v.push(a.animation),void 0!==a.animations&&(a.animations.length?v=v.concat(a.animations):v.push(a.animations)),a=0;a<v.length;a++)(l=xr.parseAnimation(v[a],s.bones))&&c.push(l);return s.morphTargets&&(v=xr.CreateClipsFromMorphTargetSequences(s.morphTargets,10),c=c.concat(v)),0<c.length&&(s.animations=c),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===t.materials||0===t.materials.length?{geometry:s}:{geometry:s,materials:t=Mr.prototype.initMaterials(t.materials,e,this.crossOrigin)}}}),Object.assign(Er.prototype,{load:function(t,e,n,r){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var i=this;new Cn(i.manager).load(t,function(n){var o=null;try{o=JSON.parse(n)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}void 0===(n=o.metadata)||void 0===n.type||"geometry"===n.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead."):i.parse(o,e)},n,r)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var n=this.parseShape(t.shapes);n=this.parseGeometries(t.geometries,n);var r=this.parseImages(t.images,function(){void 0!==e&&e(i)});r=this.parseTextures(t.textures,r),r=this.parseMaterials(t.materials,r);var i=this.parseObject(t.object,n,r);return t.animations&&(i.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0===e||e(i),i},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,r=t.length;n<r;n++){var i=(new Zn).fromJSON(t[n]);e[i.uuid]=i}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var r=new Sr,i=new _r,o=0,a=t.length;o<a;o++){var s=t[o];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":var u=new qi[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":u=new qi[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":u=new qi[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":u=new qi[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":u=new qi[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":u=new qi[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":u=new qi[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":u=new qi[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":u=new qi[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":u=new qi[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":u=new qi[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":u=new qi[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(u=[],o=0,a=s.shapes.length;o<a;o++)u.push(e[s.shapes[o]]);u=new qi[s.type](u,s.curveSegments);break;case"BufferGeometry":u=i.parse(s);break;case"Geometry":u=r.parse(s,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}u.uuid=s.uuid,void 0!==s.name&&(u.name=s.name),n[s.uuid]=u}return n},parseMaterials:function(t,e){var n={};if(void 0!==t){var r=new br;r.setTextures(e),e=0;for(var i=t.length;e<i;e++){var o=t[e];if("MultiMaterial"===o.type){for(var a=[],s=0;s<o.materials.length;s++)a.push(r.parse(o.materials[s]));n[o.uuid]=a}else n[o.uuid]=r.parse(o)}}return n},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=xr.parse(t[n]);e.push(r)}return e},parseImages:function(t,e){function n(t){return r.manager.itemStart(t),o.load(t,function(){r.manager.itemEnd(t)},void 0,function(){r.manager.itemEnd(t),r.manager.itemError(t)})}var r=this,i={};if(void 0!==t&&0<t.length){var o=new On(e=new An(e));o.setCrossOrigin(this.crossOrigin),e=0;for(var a=t.length;e<a;e++){var s=t[e],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:r.texturePath+s.url;i[s.uuid]=n(u)}}return i},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={};if(void 0!==t)for(var i=0,o=t.length;i<o;i++){var a=t[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===e[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var u=new s(e[a.image]);u.needsUpdate=!0,u.uuid=a.uuid,void 0!==a.name&&(u.name=a.name),void 0!==a.mapping&&(u.mapping=n(a.mapping,io)),void 0!==a.offset&&u.offset.fromArray(a.offset),void 0!==a.repeat&&u.repeat.fromArray(a.repeat),void 0!==a.center&&u.center.fromArray(a.center),void 0!==a.rotation&&(u.rotation=a.rotation),void 0!==a.wrap&&(u.wrapS=n(a.wrap[0],oo),u.wrapT=n(a.wrap[1],oo)),void 0!==a.format&&(u.format=a.format),void 0!==a.minFilter&&(u.minFilter=n(a.minFilter,ao)),void 0!==a.magFilter&&(u.magFilter=n(a.magFilter,ao)),void 0!==a.anisotropy&&(u.anisotropy=a.anisotropy),void 0!==a.flipY&&(u.flipY=a.flipY),r[a.uuid]=u}return r},parseObject:function(t,e,n){function r(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function i(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],r=0,i=t.length;r<i;r++){var o=t[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":var o=new Jt;void 0!==t.background&&Number.isInteger(t.background)&&(o.background=new g(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new Zt(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new Qt(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":o=new Wt(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new b(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new ar(t.color,t.intensity);break;case"DirectionalLight":o=new or(t.color,t.intensity);break;case"PointLight":o=new rr(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new sr(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new nr(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new Kn(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":o=r(t.geometry);var a=i(t.material);o=o.bones&&0<o.bones.length?new ie(o,a):new Y(o,a);break;case"LOD":o=new ee;break;case"Line":o=new ae(r(t.geometry),i(t.material),t.mode);break;case"LineLoop":o=new ue(r(t.geometry),i(t.material));break;case"LineSegments":o=new se(r(t.geometry),i(t.material));break;case"PointCloud":case"Points":o=new le(r(t.geometry),i(t.material));break;case"Sprite":o=new te(i(t.material));break;case"Group":o=new he;break;default:o=new w}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(o.matrix.fromArray(t.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.frustumCulled&&(o.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(o.renderOrder=t.renderOrder),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.children){a=t.children;for(var s=0;s<a.length;s++)o.add(this.parseObject(a[s],e,n))}if("LOD"===t.type)for(t=t.levels,a=0;a<t.length;a++){var u=o.getObjectByProperty("uuid",(s=t[a]).object);void 0!==u&&o.addLevel(u,s.distance)}return o}});var io={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},oo={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},ao={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};Tr.prototype={constructor:Tr,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var i=this,o=Yi.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;fetch(t).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,i.options)}).then(function(n){Yi.add(t,n),e&&e(n),i.manager.itemEnd(t)}).catch(function(e){r&&r(e),i.manager.itemEnd(t),i.manager.itemError(t)})},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(Ar.prototype,{moveTo:function(t,e){this.currentPath=new Qn,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,r){this.currentPath.quadraticCurveTo(t,e,n,r)},bezierCurveTo:function(t,e,n,r,i,o){this.currentPath.bezierCurveTo(t,e,n,r,i,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],o=new Zn;o.curves=i.curves,e.push(o)}return e}function r(t,e){for(var n=e.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=e[i],s=e[o],u=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(0>c&&(a=e[o],u=-u,s=e[i],c=-c),!(t.y<a.y||t.y>s.y))if(t.y===a.y){if(t.x===a.x)return!0}else{if(0==(i=c*(t.x-a.x)-u*(t.y-a.y)))return!0;0>i||(r=!r)}}else if(t.y===a.y&&(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x))return!0}return r}var i=Gi.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);if(e=[],1===o.length){var a=o[0],s=new Zn;return s.curves=a.curves,e.push(s),e}var u=!i(o[0].getPoints());u=t?!u:u,s=[];var c=[],l=[],h=0;c[h]=void 0,l[h]=[];for(var f=0,d=o.length;f<d;f++){var p=(a=o[f]).getPoints(),m=i(p);(m=t?!m:m)?(!u&&c[h]&&h++,c[h]={s:new Zn,p:p},c[h].s.curves=a.curves,u&&h++,l[h]=[]):l[h].push({h:a,p:p[0]})}if(!c[0])return n(o);if(1<c.length){for(f=!1,t=[],i=0,o=c.length;i<o;i++)s[i]=[];for(i=0,o=c.length;i<o;i++)for(a=l[i],m=0;m<a.length;m++){for(u=a[m],h=!0,p=0;p<c.length;p++)r(u.p,c[p].p)&&(i!==p&&t.push({froms:i,tos:p,hole:m}),h?(h=!1,s[p].push(u)):f=!0);h&&s[i].push(u)}0<t.length&&(f||(l=s))}for(f=0,i=c.length;f<i;f++)for(e.push(s=c[f].s),o=0,a=(t=l[f]).length;o<a;o++)s.holes.push(t[o].h);return e}}),Object.assign(Cr.prototype,{isFont:!0,generateShapes:function(t,e,n){void 0===e&&(e=100),n=[];var r=e;e=this.data;var i=String(t).split(""),o=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*(r/=e.resolution);t=[];for(var a=0,s=0,u=0;u<i.length;u++){var c=i[u];if("\n"===c)a=0,s-=o;else{var l=r,h=a,f=s;if(c=e.glyphs[c]||e.glyphs["?"]){var d=new Ar;if(c.o)for(var p=c._cachedOutline||(c._cachedOutline=c.o.split(" ")),m=0,g=p.length;m<g;)switch(p[m++]){case"m":var v=p[m++]*l+h,y=p[m++]*l+f;d.moveTo(v,y);break;case"l":v=p[m++]*l+h,y=p[m++]*l+f,d.lineTo(v,y);break;case"q":var w=p[m++]*l+h,x=p[m++]*l+f,b=p[m++]*l+h,_=p[m++]*l+f;d.quadraticCurveTo(b,_,w,x);break;case"b":w=p[m++]*l+h,x=p[m++]*l+f,b=p[m++]*l+h,_=p[m++]*l+f,v=p[m++]*l+h,y=p[m++]*l+f,d.bezierCurveTo(b,_,v,y,w,x)}l={offsetX:c.ha*l,path:d}}else l=void 0;a+=l.offsetX,t.push(l.path)}}for(e=0,i=t.length;e<i;e++)Array.prototype.push.apply(n,t[e].toShapes());return n}}),Object.assign(kr.prototype,{load:function(t,e,n,r){var i=this,o=new Cn(this.manager);o.setPath(this.path),o.load(t,function(t){try{var n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}t=i.parse(n),e&&e(t)},n,r)},parse:function(t){return new Cr(t)},setPath:function(t){return this.path=t,this}});var so,uo,co,lo={getContext:function(){return void 0===so&&(so=new(window.AudioContext||window.webkitAudioContext)),so},setContext:function(t){so=t}};Object.assign(Rr.prototype,{load:function(t,e,n,r){var i=new Cn(this.manager);i.setResponseType("arraybuffer"),i.load(t,function(t){lo.getContext().decodeAudioData(t,function(t){e(t)})},n,r)}}),Object.assign(Or.prototype,{update:function(){var t,e,n,i,o,a,s,u,c=new r,l=new r;return function(r){if(t!==this||e!==r.focus||n!==r.fov||i!==r.aspect*this.aspect||o!==r.near||a!==r.far||s!==r.zoom||u!==this.eyeSep){t=this,e=r.focus,n=r.fov,i=r.aspect*this.aspect,o=r.near,a=r.far,s=r.zoom;var h=r.projectionMatrix.clone(),f=(u=this.eyeSep/2)*o/e,d=o*Math.tan(Si.DEG2RAD*n*.5)/s;l.elements[12]=-u,c.elements[12]=u;var p=-d*i+f,m=d*i+f;h.elements[0]=2*o/(m-p),h.elements[8]=(m+p)/(m-p),this.cameraL.projectionMatrix.copy(h),h.elements[0]=2*o/((m=d*i-f)-(p=-d*i-f)),h.elements[8]=(m+p)/(m-p),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(r.matrixWorld).multiply(l),this.cameraR.matrixWorld.copy(r.matrixWorld).multiply(c)}}()}),(Pr.prototype=Object.create(w.prototype)).constructor=Pr,Dr.prototype=Object.assign(Object.create(w.prototype),{constructor:Dr,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new o,e=new i,n=new o,r=new o;return function(i){w.prototype.updateMatrixWorld.call(this,i),i=this.context.listener;var o=this.up;this.matrixWorld.decompose(t,e,n),r.set(0,0,-1).applyQuaternion(e),i.positionX?(i.positionX.setValueAtTime(t.x,this.context.currentTime),i.positionY.setValueAtTime(t.y,this.context.currentTime),i.positionZ.setValueAtTime(t.z,this.context.currentTime),i.forwardX.setValueAtTime(r.x,this.context.currentTime),i.forwardY.setValueAtTime(r.y,this.context.currentTime),i.forwardZ.setValueAtTime(r.z,this.context.currentTime),i.upX.setValueAtTime(o.x,this.context.currentTime),i.upY.setValueAtTime(o.y,this.context.currentTime),i.upZ.setValueAtTime(o.z,this.context.currentTime)):(i.setPosition(t.x,t.y,t.z),i.setOrientation(r.x,r.y,r.z,o.x,o.y,o.z))}}()}),Lr.prototype=Object.assign(Object.create(w.prototype),{constructor:Lr,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),Nr.prototype=Object.assign(Object.create(Lr.prototype),{constructor:Nr,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new o;return function(e){w.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(Ir.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(Fr.prototype,{accumulate:function(t,e){var n=this.buffer,r=this.valueSize;t=t*r+r;var i=this.cumulativeWeight;if(0===i){for(i=0;i!==r;++i)n[t+i]=n[i];i=e}else this._mixBufferRegion(n,t,0,e/(i+=e),r);this.cumulativeWeight=i},apply:function(t){var e=this.valueSize,n=this.buffer;t=t*e+e;var r=this.cumulativeWeight,i=this.binding;this.cumulativeWeight=0,1>r&&this._mixBufferRegion(n,t,3*e,1-r,e),r=e;for(var o=e+e;r!==o;++r)if(n[r]!==n[r+e]){i.setValue(n,t);break}},saveOriginalState:function(){var t=this.buffer,e=this.valueSize,n=3*e;this.binding.getValue(t,n);for(var r=e;r!==n;++r)t[r]=t[n+r%e];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(t,e,n,r,i){if(.5<=r)for(r=0;r!==i;++r)t[e+r]=t[n+r]},_slerp:function(t,e,n,r){i.slerpFlat(t,e,t,e,t,n,r)},_lerp:function(t,e,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*r}}}),Object.assign(zr.prototype,{getValue:function(t,e){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Ur,{Composite:zr,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Ur.Composite(t,e,n):new Ur(t,e,n)},sanitizeNodeName:function(){var t=/[\[\]\.:\/]/g;return function(e){return e.replace(/\s/g,"_").replace(t,"")}}(),parseTrackName:function(){var t="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",e=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]");t=/(WCOD+)?/.source.replace("WCOD",t);var n=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),r=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),i=new RegExp("^"+e+t+n+r+"$"),o=["material","materials","bones"];return function(t){var e=i.exec(t);if(!e)throw Error("PropertyBinding: Cannot parse trackName: "+t);var n=(e={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]}).nodeName&&e.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var r=e.nodeName.substring(n+1);-1!==o.indexOf(r)&&(e.nodeName=e.nodeName.substring(0,n),e.objectName=r)}if(null===e.propertyName||0===e.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+t);return e}}(),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function(t){for(var n=0;n<t.length;n++){var i=t[n];if(i.name===e||i.uuid===e||(i=r(i.children)))return i}return null};if(t=r(t.children))return t}return null}}),Object.assign(Ur.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,i=e.propertyIndex;if(t||(this.node=t=Ur.findNode(this.rootNode,e.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);for(t=t.skeleton.bones,n=0;n<t.length;n++)if(t[n].name===o){o=n;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}if(void 0===(o=t[r]))console.error("THREE.PropertyBinding: Trying to update property for track: "+e.nodeName+"."+r+" but it wasn't found.",t);else{if(e=this.Versioning.None,void 0!==t.needsUpdate?(e=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(e=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t),n=this.BindingType.Direct,void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(n=0;n<this.node.geometry.morphAttributes.position.length;n++)if(t.geometry.morphAttributes.position[n].name===i){i=n;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(n=0;n<this.node.geometry.morphTargets.length;n++)if(t.geometry.morphTargets[n].name===i){i=n;break}}}n=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(n=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(n=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[n],this.setValue=this.SetterByBindingTypeAndVersioning[n][e]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Ur.prototype,{_getValue_unbound:Ur.prototype.getValue,_setValue_unbound:Ur.prototype.setValue}),Object.assign(jr.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,c=0,l=arguments.length;c!==l;++c){var h=arguments[c],f=h.uuid,d=r[f];if(void 0===d){d=e++,r[f]=d,t.push(h),f=0;for(var p=s;f!==p;++f)a[f].push(new Ur(h,i[f],o[f]))}else if(d<n){u=t[d];var m=--n;for(r[(p=t[m]).uuid]=d,t[d]=p,r[f]=m,t[m]=h,f=0,p=s;f!==p;++f){var g=a[f],v=g[d];g[d]=g[m],void 0===v&&(v=new Ur(h,i[f],o[f])),g[m]=v}}else t[d]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,c=n[u];if(void 0!==c&&c>=e){var l=e++,h=t[l];for(n[h.uuid]=c,t[c]=h,n[u]=l,t[l]=s,s=0,u=i;s!==u;++s){var f=(h=r[s])[c];h[c]=h[l],h[l]=f}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a].uuid,c=r[u];if(void 0!==c)if(delete r[u],c<n){var l=t[u=--n],h=--e,f=t[h];for(r[l.uuid]=c,t[c]=l,r[f.uuid]=u,t[u]=f,t.pop(),l=0,f=o;l!==f;++l){var d=i[l],p=d[h];d[c]=d[u],d[u]=p,d.pop()}}else for(r[(f=t[h=--e]).uuid]=c,t[c]=f,t.pop(),l=0,f=o;l!==f;++l)(d=i[l])[c]=d[h],d.pop()}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=this.nCachedObjects_,c=Array(s.length);for(n[t]=r=i.length,o.push(t),a.push(e),i.push(c),n=u,r=s.length;n!==r;++n)c[n]=new Ur(s[n],t,e);return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(Vr.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=t._clip.duration,i=(n=this._clip.duration)/r;t.warp(1,r/n,e),this.warp(i,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;return null===o&&(this._timeScaleInterpolant=o=r._lendControlInterpolant()),r=o.parameterPositions,o=o.sampleValues,r[0]=i,r[1]=i+n,o[0]=t/a,o[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){if(this.enabled){var i=this._startTime;if(null!==i){if(0>(e=(t-i)*n)||0===n)return;this._startTime=null,e*=n}if(e*=this._updateTimeScale(t),n=this._updateTime(e),0<(t=this._updateWeight(t))){i=this._propertyBindings;for(var o=0,a=(e=this._interpolants).length;o!==a;++o)e[o].evaluate(n),i[o].accumulate(r,t)}}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(2200===r)t:{if(-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1)),e>=n)e=n;else{if(!(0>e))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>t?-1:1})}else{if(r=2202===r,-1===i&&(0<=t?(i=0,this._setEndings(!0,0===this.repetitions,r)):this._setEndings(0===this.repetitions,!0,r)),e>=n||0>e){var o=Math.floor(e/n);e-=n*o,i+=Math.abs(o);var a=this.repetitions-i;0>=a?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=0<t?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1})):(1===a?this._setEndings(t=0>t,!t,r):this._setEndings(!1,!1,r),this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o}))}if(r&&1==(1&i))return this.time=e,n-e}return this.time=e},_setEndings:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(t,e,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;return null===o&&(this._weightInterpolant=o=r._lendControlInterpolant()),r=o.parameterPositions,o=o.sampleValues,r[0]=i,o[0]=e,r[1]=i+t,o[1]=n,this}}),Br.prototype=Object.assign(Object.create(e.prototype),{constructor:Br,_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings;t=t._interpolants;var a=n.uuid,s=this._bindingsByRootAndName,u=s[a];for(void 0===u&&(s[a]=u={}),s=0;s!==i;++s){var c=r[s],l=c.name,h=u[l];if(void 0===h){if(void 0!==(h=o[s])){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,a,l));continue}++(h=new Fr(Ur.create(n,l,e&&e._propertyBindings[s].binding.parsedPath),c.ValueTypeName,c.getValueSize())).referenceCount,this._addInactiveBinding(h,a,l)}o[s]=h,t[s].resultBuffer=h.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(n=0,r=(e=t._propertyBindings).length;n!==r;++n){var i=e[n];0==i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){return null!==(t=t._cacheIndex)&&t<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,o=i[e];void 0===o?(o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o):(t._byClipCacheIndex=(e=o.knownActions).length,e.push(t)),t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=(r=(n=this._actionsByClip)[e=t._clip.uuid]).knownActions,o=i[i.length-1],a=t._byClipCacheIndex;o._byClipCacheIndex=a,i[a]=o,i.pop(),t._byClipCacheIndex=null,delete r.actionByRoot[(t._localRoot||this._root).uuid],0===i.length&&delete n[e],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=0,n=(t=t._propertyBindings).length;e!==n;++e){var r=t[e];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=r[e],o=this._bindings;void 0===i&&(r[e]=i={}),i[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid;n=n.path;var i=this._bindingsByRootAndName,o=i[r],a=e[e.length-1];a._cacheIndex=t=t._cacheIndex,e[t]=a,e.pop(),delete o[n];t:{for(var s in o)break t;delete i[r]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new gr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,r=n.uuid;n="string"==typeof t?xr.findByName(n,t):t;var i=this._actionsByClip[t=null!==n?n.uuid:t],o=null;if(void 0!==i){if(void 0!==(o=i.actionByRoot[r]))return o;o=i.knownActions[0],null===n&&(n=o._clip)}return null===n?null:(e=new Vr(this,n,e),this._bindAction(e,o),this._addInactiveAction(e,t,r),e)},existingAction:function(t,e){var n=e||this._root;return e=n.uuid,n="string"==typeof t?xr.findByName(n,t):t,void 0!==(t=this._actionsByClip[n?n.uuid:t])&&t.actionByRoot[e]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions,n=this._bindings,r=this._nActiveBindings,i=this._nActiveBindings=this._nActiveActions=0;i!==e;++i)t[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(t){for(var e=this._actions,n=this._nActiveActions,r=this.time+=t*=this.timeScale,i=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a)e[a]._update(r,t,i,o);for(t=this._bindings,e=this._nActiveBindings,a=0;a!==e;++a)t[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=this._actionsByClip,r=n[t=t.uuid];if(void 0!==r){for(var i=0,o=(r=r.knownActions).length;i!==o;++i){var a=r[i];this._deactivateAction(a);var s=a._cacheIndex,u=e[e.length-1];a._cacheIndex=null,a._byClipCacheIndex=null,u._cacheIndex=s,e[s]=u,e.pop(),this._removeInactiveBindingsForAction(a)}delete n[t]}},uncacheRoot:function(t){t=t.uuid;var e=this._actionsByClip;for(r in e){var n=e[r].actionByRoot[t];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}var r=this._bindingsByRootAndName[t];if(void 0!==r)for(var i in r)(t=r[i]).restoreOriginalState(),this._removeInactiveBinding(t)},uncacheAction:function(t,e){null!==(t=this.existingAction(t,e))&&(this._deactivateAction(t),this._removeInactiveAction(t))}}),Hr.prototype.clone=function(){return new Hr(void 0===this.value.clone?this.value:this.value.clone())},Gr.prototype=Object.assign(Object.create(I.prototype),{constructor:Gr,isInstancedBufferGeometry:!0,copy:function(t){return I.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(qr.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(qr.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}}),Object.defineProperty(Wr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Wr.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.stride:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Yr.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Yr,isInstancedInterleavedBuffer:!0,copy:function(t){return Wr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Xr.prototype=Object.assign(Object.create(S.prototype),{constructor:Xr,isInstancedBufferAttribute:!0,copy:function(t){return S.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign($r.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){return Zr(t,this,n=n||[],e),n.sort(Qr),n},intersectObjects:function(t,e,n){if(n=n||[],!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,i=t.length;r<i;r++)Zr(t[r],this,n,e);return n.sort(Qr),n}}),Object.assign(Jr.prototype,{start:function(){this.oldTime=this.startTime=("undefined"==typeof performance?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Object.assign(Kr.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(Si.clamp(t.y/this.radius,-1,1))),this}}),Object.assign(ti.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}}),Object.assign(ei.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new n;return function(e,n){return n=t.copy(n).multiplyScalar(.5),this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new n),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new n),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new n),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new n),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new n;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),(ni.prototype=Object.create(w.prototype)).constructor=ni,ni.prototype.isImmediateRenderObject=!0,(ri.prototype=Object.create(se.prototype)).constructor=ri,ri.prototype.update=function(){var t=new o,e=new o,n=new a;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,u=a.faces,c=a=0,l=u.length;c<l;c++)for(var h=u[c],f=0,d=h.vertexNormals.length;f<d;f++){var p=h.vertexNormals[f];t.copy(s[h[r[f]]]).applyMatrix4(i),e.copy(p).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(a,t.x,t.y,t.z),o.setXYZ(a+=1,e.x,e.y,e.z),a+=1}else if(a&&a.isBufferGeometry)for(r=a.attributes.position,s=a.attributes.normal,f=a=0,d=r.count;f<d;f++)t.set(r.getX(f),r.getY(f),r.getZ(f)).applyMatrix4(i),e.set(s.getX(f),s.getY(f),s.getZ(f)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(a,t.x,t.y,t.z),o.setXYZ(a+=1,e.x,e.y,e.z),a+=1;o.needsUpdate=!0}}(),(ii.prototype=Object.create(w.prototype)).constructor=ii,ii.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},ii.prototype.update=function(){var t=new o,e=new o;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),(oi.prototype=Object.create(se.prototype)).constructor=oi,oi.prototype.updateMatrixWorld=function(){var t=new o,e=new r,n=new r;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,u=0;s<i.length;s++){var c=i[s];c.parent&&c.parent.isBone&&(e.multiplyMatrices(n,c.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(u,t.x,t.y,t.z),e.multiplyMatrices(n,c.parent.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(u+1,t.x,t.y,t.z),u+=2)}o.getAttribute("position").needsUpdate=!0,w.prototype.updateMatrixWorld.call(this,r)}}(),(ai.prototype=Object.create(Y.prototype)).constructor=ai,ai.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ai.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},(si.prototype=Object.create(w.prototype)).constructor=si,si.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},si.prototype.update=function(){var t=.5*this.light.width,e=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=t,r[1]=-e,r[2]=0,r[3]=t,r[4]=e,r[5]=0,r[6]=-t,r[7]=e,r[8]=0,r[9]=-t,r[10]=-e,r[11]=0,r[12]=t,r[13]=-e,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},(ui.prototype=Object.create(w.prototype)).constructor=ui,ui.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ui.prototype.update=function(){var t=new o,e=new g,n=new g;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");e.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?e:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),(ci.prototype=Object.create(se.prototype)).constructor=ci,(li.prototype=Object.create(se.prototype)).constructor=li,(hi.prototype=Object.create(se.prototype)).constructor=hi,hi.prototype.update=function(){var t=new o,e=new o,n=new a;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=0,u=0,c=(o=o.faces).length;u<c;u++){var l=o[u],h=l.normal;t.copy(a[l.a]).add(a[l.b]).add(a[l.c]).divideScalar(3).applyMatrix4(r),e.copy(h).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),i.setXYZ(s,t.x,t.y,t.z),i.setXYZ(s+=1,e.x,e.y,e.z),s+=1}i.needsUpdate=!0}}(),(fi.prototype=Object.create(w.prototype)).constructor=fi,fi.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},fi.prototype.update=function(){var t=new o,e=new o,n=new o;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),(di.prototype=Object.create(se.prototype)).constructor=di,di.prototype.update=function(){function t(t,o,a,s){if(r.set(o,a,s).unproject(i),void 0!==(t=n[t]))for(o=e.getAttribute("position"),a=0,s=t.length;a<s;a++)o.setXYZ(t[a],r.x,r.y,r.z)}var e,n,r=new o,i=new x;return function(){e=this.geometry,n=this.pointMap,i.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),(pi.prototype=Object.create(se.prototype)).constructor=pi,pi.prototype.update=function(){var t=new f;return function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){e=t.min;var n=t.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),pi.prototype.setFromObject=function(t){return this.object=t,this.update(),this},(mi.prototype=Object.create(se.prototype)).constructor=mi,mi.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),w.prototype.updateMatrixWorld.call(this,t))},(gi.prototype=Object.create(ae.prototype)).constructor=gi,gi.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;1e-8>Math.abs(e)&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.lookAt(this.plane.normal),w.prototype.updateMatrixWorld.call(this,t)},(vi.prototype=Object.create(w.prototype)).constructor=vi,vi.prototype.setDirection=function(){var t,e=new o;return function(n){.99999<n.y?this.quaternion.set(0,0,0,1):-.99999>n.y?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),vi.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},vi.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},(yi.prototype=Object.create(se.prototype)).constructor=yi,Ln.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Ln.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign($n.prototype,{createPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getPoints(t),this.createGeometry(t)},createSpacedPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getSpacedPoints(t),this.createGeometry(t)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new M,n=0,r=t.length;n<r;n++){var i=t[n];e.vertices.push(new o(i.x,i.y,i.z||0))}return e}}),Object.assign(Qn.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),wi.prototype=Object.create(zn.prototype),xi.prototype=Object.create(zn.prototype),bi.prototype=Object.create(zn.prototype),Object.assign(bi.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),ci.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},oi.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Mr.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ro.extractUrlBase(t)}}),Object.assign(ei.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(f.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),q.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Si,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Si.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Si.ceilPowerOfTwo(t)}}),Object.assign(a.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(r.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new o),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)}}),p.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},i.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(G.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(W.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(W,{barycoordFromPoint:function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),W.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),W.getNormal(t,e,n,r)}}),Object.assign(Zn.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ze(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new un(this,t)}}),Object.assign(n.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(o.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(u.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(M.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(w.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(w.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(ee.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(ne.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Ln.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Wt.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Jn.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(S.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(I.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(I.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Hr.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(V.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new g}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}}}),Object.defineProperties(_n.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(H.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign($t.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties($t.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Bt.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(c.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Xt.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),Lr.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new Rr).load(t,function(t){e.setBuffer(t)}),this},Ir.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Pr.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},t.WebGLRenderTargetCube=l,t.WebGLRenderTarget=c,t.WebGLRenderer=$t,t.ShaderLib=Ri,t.UniformsLib=ki,t.UniformsUtils=Ai,t.ShaderChunk=Ti,t.FogExp2=Qt,t.Fog=Zt,t.Scene=Jt,t.Sprite=te,t.LOD=ee,t.SkinnedMesh=ie,t.Skeleton=ne,t.Bone=re,t.Mesh=Y,t.LineSegments=se,t.LineLoop=ue,t.Line=ae,t.Points=le,t.Group=he,t.VideoTexture=fe,t.DataTexture=h,t.CompressedTexture=de,t.CubeTexture=J,t.CanvasTexture=Ht,t.DepthTexture=pe,t.Texture=s,t.CompressedTextureLoader=kn,t.DataTextureLoader=Rn,t.CubeTextureLoader=Pn,t.TextureLoader=Dn,t.ObjectLoader=Er,t.MaterialLoader=br,t.BufferGeometryLoader=_r,t.DefaultLoadingManager=Xi,t.LoadingManager=An,t.JSONLoader=Sr,t.ImageLoader=On,t.ImageBitmapLoader=Tr,t.FontLoader=kr,t.FileLoader=Cn,t.Loader=Mr,t.LoaderUtils=ro,t.Cache=Yi,t.AudioLoader=Rr,t.SpotLightShadow=er,t.SpotLight=nr,t.PointLight=rr,t.RectAreaLight=sr,t.HemisphereLight=Kn,t.DirectionalLightShadow=ir,t.DirectionalLight=or,t.AmbientLight=ar,t.LightShadow=tr,t.Light=Jn,t.StereoCamera=Or,t.PerspectiveCamera=Wt,t.OrthographicCamera=b,t.CubeCamera=Pr,t.ArrayCamera=Yt,t.Camera=x,t.AudioListener=Dr,t.PositionalAudio=Nr,t.AudioContext=lo,t.AudioAnalyser=Ir,t.Audio=Lr,t.VectorKeyframeTrack=wr,t.StringKeyframeTrack=ur,t.QuaternionKeyframeTrack=fr,t.NumberKeyframeTrack=pr,t.ColorKeyframeTrack=dr,t.BooleanKeyframeTrack=cr,t.PropertyMixer=Fr,t.PropertyBinding=Ur,t.KeyframeTrack=yr,t.AnimationUtils=eo,t.AnimationObjectGroup=jr,t.AnimationMixer=Br,t.AnimationClip=xr,t.Uniform=Hr,t.InstancedBufferGeometry=Gr,t.BufferGeometry=I,t.Geometry=M,t.InterleavedBufferAttribute=qr,t.InstancedInterleavedBuffer=Yr,t.InterleavedBuffer=Wr,t.InstancedBufferAttribute=Xr,t.Face3=_,t.Object3D=w,t.Raycaster=$r,t.Layers=y,t.EventDispatcher=e,t.Clock=Jr,t.QuaternionLinearInterpolant=hr,t.LinearInterpolant=gr,t.DiscreteInterpolant=vr,t.CubicInterpolant=mr,t.Interpolant=lr,t.Triangle=W,t.Math=Si,t.Spherical=Kr,t.Cylindrical=ti,t.Plane=p,t.Frustum=m,t.Sphere=d,t.Ray=G,t.Matrix4=r,t.Matrix3=a,t.Box3=f,t.Box2=ei,t.Line3=q,t.Euler=v,t.Vector4=u,t.Vector3=o,t.Vector2=n,t.Quaternion=i,t.Color=g,t.ImmediateRenderObject=ni,t.VertexNormalsHelper=ri,t.SpotLightHelper=ii,t.SkeletonHelper=oi,t.PointLightHelper=ai,t.RectAreaLightHelper=si,t.HemisphereLightHelper=ui,t.GridHelper=ci,t.PolarGridHelper=li,t.FaceNormalsHelper=hi,t.DirectionalLightHelper=fi,t.CameraHelper=di,t.BoxHelper=pi,t.Box3Helper=mi,t.PlaneHelper=gi,t.ArrowHelper=vi,t.AxesHelper=yi,t.Shape=Zn,t.Path=Qn,t.ShapePath=Ar,t.Font=Cr,t.CurvePath=$n,t.Curve=Ln,t.ShapeUtils=Gi,t.WebGLUtils=qt,t.WireframeGeometry=me,t.ParametricGeometry=ge,t.ParametricBufferGeometry=ve,t.TetrahedronGeometry=xe,t.TetrahedronBufferGeometry=be,t.OctahedronGeometry=_e,t.OctahedronBufferGeometry=Me,t.IcosahedronGeometry=Se,t.IcosahedronBufferGeometry=Ee,t.DodecahedronGeometry=Te,t.DodecahedronBufferGeometry=Ae,t.PolyhedronGeometry=ye,t.PolyhedronBufferGeometry=we,t.TubeGeometry=Ce,t.TubeBufferGeometry=ke,t.TorusKnotGeometry=Re,t.TorusKnotBufferGeometry=Oe,t.TorusGeometry=Pe,t.TorusBufferGeometry=De,t.TextGeometry=Ke,t.TextBufferGeometry=tn,t.SphereGeometry=en,t.SphereBufferGeometry=nn,t.RingGeometry=rn,t.RingBufferGeometry=on,t.PlaneGeometry=U,t.PlaneBufferGeometry=j,t.LatheGeometry=an,t.LatheBufferGeometry=sn,t.ShapeGeometry=un,t.ShapeBufferGeometry=cn,t.ExtrudeGeometry=Ze,t.ExtrudeBufferGeometry=Je,t.EdgesGeometry=hn,t.ConeGeometry=pn,t.ConeBufferGeometry=mn,t.CylinderGeometry=fn,t.CylinderBufferGeometry=dn,t.CircleGeometry=gn,t.CircleBufferGeometry=vn,t.BoxGeometry=F,t.BoxBufferGeometry=z,t.ShadowMaterial=yn,t.SpriteMaterial=Kt,t.RawShaderMaterial=wn,t.ShaderMaterial=H,t.PointsMaterial=ce,t.MeshPhysicalMaterial=bn,t.MeshStandardMaterial=xn,t.MeshPhongMaterial=_n,t.MeshToonMaterial=Mn,t.MeshNormalMaterial=Sn,t.MeshLambertMaterial=En,t.MeshDepthMaterial=jt,t.MeshDistanceMaterial=Vt,t.MeshBasicMaterial=B,t.LineDashedMaterial=Tn,t.LineBasicMaterial=oe,t.Material=V,t.Float64BufferAttribute=D,t.Float32BufferAttribute=P,t.Uint32BufferAttribute=O,t.Int32BufferAttribute=R,t.Uint16BufferAttribute=k,t.Int16BufferAttribute=C,t.Uint8ClampedBufferAttribute=A,t.Uint8BufferAttribute=T,t.Int8BufferAttribute=E,t.BufferAttribute=S,t.ArcCurve=In,t.CatmullRomCurve3=zn,t.CubicBezierCurve=Bn,t.CubicBezierCurve3=Hn,t.EllipseCurve=Nn,t.LineCurve=Gn,t.LineCurve3=qn,t.QuadraticBezierCurve=Wn,t.QuadraticBezierCurve3=Yn,t.SplineCurve=Xn,t.REVISION="91",t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},t.CullFaceNone=0,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=0,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.FrontSide=0,t.BackSide=1,t.DoubleSide=2,t.FlatShading=1,t.SmoothShading=2,t.NoColors=0,t.FaceColors=1,t.VertexColors=2,t.NoBlending=0,t.NormalBlending=1,t.AdditiveBlending=2,t.SubtractiveBlending=3,t.MultiplyBlending=4,t.CustomBlending=5,t.AddEquation=100,t.SubtractEquation=101,t.ReverseSubtractEquation=102,t.MinEquation=103,t.MaxEquation=104,t.ZeroFactor=200,t.OneFactor=201,t.SrcColorFactor=202,t.OneMinusSrcColorFactor=203,t.SrcAlphaFactor=204,t.OneMinusSrcAlphaFactor=205,t.DstAlphaFactor=206,t.OneMinusDstAlphaFactor=207,t.DstColorFactor=208,t.OneMinusDstColorFactor=209,t.SrcAlphaSaturateFactor=210,t.NeverDepth=0,t.AlwaysDepth=1,t.LessDepth=2,t.LessEqualDepth=3,t.EqualDepth=4,t.GreaterEqualDepth=5,t.GreaterDepth=6,t.NotEqualDepth=7,t.MultiplyOperation=0,t.MixOperation=1,t.AddOperation=2,t.NoToneMapping=0,t.LinearToneMapping=1,t.ReinhardToneMapping=2,t.Uncharted2ToneMapping=3,t.CineonToneMapping=4,t.UVMapping=300,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.SphericalReflectionMapping=305,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.RepeatWrapping=1e3,t.ClampToEdgeWrapping=1001,t.MirroredRepeatWrapping=1002,t.NearestFilter=1003,t.NearestMipMapNearestFilter=1004,t.NearestMipMapLinearFilter=1005,t.LinearFilter=1006,t.LinearMipMapNearestFilter=1007,t.LinearMipMapLinearFilter=1008,t.UnsignedByteType=1009,t.ByteType=1010,t.ShortType=1011,t.UnsignedShortType=1012,t.IntType=1013,t.UnsignedIntType=1014,t.FloatType=1015,t.HalfFloatType=1016,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedInt248Type=1020,t.AlphaFormat=1021,t.RGBFormat=1022,t.RGBAFormat=1023,t.LuminanceFormat=1024,t.LuminanceAlphaFormat=1025,t.RGBEFormat=1023,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.RGB_S3TC_DXT1_Format=33776,t.RGBA_S3TC_DXT1_Format=33777,t.RGBA_S3TC_DXT3_Format=33778,t.RGBA_S3TC_DXT5_Format=33779,t.RGB_PVRTC_4BPPV1_Format=35840,t.RGB_PVRTC_2BPPV1_Format=35841,t.RGBA_PVRTC_4BPPV1_Format=35842,t.RGBA_PVRTC_2BPPV1_Format=35843,t.RGB_ETC1_Format=36196,t.RGBA_ASTC_4x4_Format=37808,t.RGBA_ASTC_5x4_Format=37809,t.RGBA_ASTC_5x5_Format=37810,t.RGBA_ASTC_6x5_Format=37811,t.RGBA_ASTC_6x6_Format=37812,t.RGBA_ASTC_8x5_Format=37813,t.RGBA_ASTC_8x6_Format=37814,t.RGBA_ASTC_8x8_Format=37815,t.RGBA_ASTC_10x5_Format=37816,t.RGBA_ASTC_10x6_Format=37817,t.RGBA_ASTC_10x8_Format=37818,t.RGBA_ASTC_10x10_Format=37819,t.RGBA_ASTC_12x10_Format=37820,t.RGBA_ASTC_12x12_Format=37821,t.LoopOnce=2200,t.LoopRepeat=2201,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=2400,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=0,t.TriangleStripDrawMode=1,t.TriangleFanDrawMode=2,t.LinearEncoding=3e3,t.sRGBEncoding=3001,t.GammaEncoding=3007,t.RGBEEncoding=3002,t.LogLuvEncoding=3003,t.RGBM7Encoding=3004,t.RGBM16Encoding=3005,t.RGBDEncoding=3006,t.BasicDepthPacking=3200,t.RGBADepthPacking=3201,t.CubeGeometry=F,t.Face4=function(t,e,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new _(t,e,n,i,o,a)},t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},t.MultiMaterial=function(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new le(t,e)},t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new te(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new le(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ce(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ce(t)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ce(t)},t.Vertex=function(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new o(t,e,n)},t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new S(t,e).setDynamic(!0)},t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new E(t,e)},t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new T(t,e)},t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new A(t,e)},t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new C(t,e)},t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new k(t,e)},t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new R(t,e)},t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new O(t,e)},t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new P(t,e)},t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new D(t,e)},t.ClosedSplineCurve3=wi,t.SplineCurve3=xi,t.Spline=bi,t.AxisHelper=function(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new yi(t)},t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new pi(t,e)},t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new se(new hn(t.geometry),new oe({color:void 0!==e?e:16777215}))},t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new se(new me(t.geometry),new oe({color:void 0!==e?e:16777215}))},t.XHRLoader=function(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Cn(t)},t.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Rn(t)},t.GeometryUtils={merge:function(t,e,n){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh){e.matrixAutoUpdate&&e.updateMatrix();var r=e.matrix;e=e.geometry}t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},t.ImageUtils={crossOrigin:void 0,loadTexture:function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Dn;return i.setCrossOrigin(this.crossOrigin),t=i.load(t,n,void 0,r),e&&(t.mapping=e),t},loadTextureCube:function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Pn;return i.setCrossOrigin(this.crossOrigin),t=i.load(t,n,void 0,r),e&&(t.mapping=e),t},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},t.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},t.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}},t.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},Object.defineProperty(t,"__esModule",{value:!0})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.vega=t.vega||{})}(this,function(t){"use strict";var e=function(t,e,n){return t.fields=e||[],t.fname=n,t};function n(t){return null==t?null:t.fname}function r(t){return null==t?null:t.fields}var i=function(t){throw Error(t)},o=function(t){var e,n,r,o=[],a=null,s=0,u=t.length,c="";function l(){o.push(c+t.substring(e,n)),c="",e=n+1}for(t+="",e=n=0;n<u;++n)if("\\"===(r=t[n]))c+=t.substring(e,n),e=++n;else if(r===a)l(),a=null,s=-1;else{if(a)continue;e===s&&'"'===r?(e=n+1,a=r):e===s&&"'"===r?(e=n+1,a=r):"."!==r||s?"["===r?(e<n&&l(),s=e=n+1):"]"===r&&(s||i("Access path missing open bracket: "+t),0<s&&l(),s=0,e=n+1):e<n?l():e=n+1}return s&&i("Access path missing closing bracket: "+t),a&&i("Access path missing closing quote: "+t),e<n&&(n++,l()),o},a=Array.isArray,s=function(t){return t===Object(t)},u=function(t){return"string"==typeof t};function c(t){return a(t)?"["+t.map(c)+"]":s(t)||u(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var l=function(t,n){var r=o(t),i="return _["+r.map(c).join("][")+"];";return e(Function("_",i),[t=1===r.length?r[0]:t],n||t)},h=[],f=l("id"),d=e(function(t){return t},h,"identity"),p=e(function(){return 0},h,"zero"),m=e(function(){return 1},h,"one"),g=e(function(){return!0},h,"true"),v=e(function(){return!1},h,"false");function y(t,e,n){var r=[e].concat([].slice.call(n));console[t].apply(console,r)}var w=1,x=function(t){var e=t||0;return{level:function(t){return arguments.length?(e=+t,this):e},error:function(){return w<=e&&y("error","ERROR",arguments),this},warn:function(){return 2<=e&&y("warn","WARN",arguments),this},info:function(){return 3<=e&&y("log","INFO",arguments),this},debug:function(){return 4<=e&&y("log","DEBUG",arguments),this}}},b=function(t){return t[t.length-1]},_=function(t){return null==t||""===t?null:+t};function M(t){return function(e){return t*Math.exp(e)}}function S(t){return function(e){return Math.log(t*e)}}function E(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function T(t,e,n,r){var i=n(t[0]),o=n(b(t)),a=(o-i)*e;return[r(i-a),r(o-a)]}function A(t,e){return T(t,e,_,d)}function C(t,e){var n=Math.sign(t[0]);return T(t,e,S(n),M(n))}function k(t,e,n){return T(t,e,E(n),E(1/n))}function R(t,e,n,r,i){var o=r(t[0]),a=r(b(t)),s=null!=e?r(e):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function O(t,e,n){return R(t,e,n,_,d)}function P(t,e,n){var r=Math.sign(t[0]);return R(t,e,n,S(r),M(r))}function D(t,e,n,r){return R(t,e,n,E(r),E(1/r))}var L=function(t){return null!=t?a(t)?t:[t]:[]},N=function(t){return"function"==typeof t},I=function(t,n){var i,a,s,u,l,h,f,d,p,m=[],g=(t=L(t)).map(function(t,e){return null==t?null:(m.push(e),N(t)?t:o(t).map(c).join("]["))}),v=m.length-1,y=L(n),w="var u,v;return ";if(v<0)return null;for(a=0;a<=v;++a)s=g[i=m[a]],N(s)?(u="(u=this."+(h="f"+i)+"(a))",l="(v=this."+h+"(b))",(f=f||{})[h]=s):(u="(u=a["+s+"])",l="(v=b["+s+"])"),h="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==y[i]?d=-(p=1):(p=-1,d=1),w+="("+u+"<"+l+"||u==null)&&v!=null?"+d+":(u>v||v==null)&&u!=null?"+p+":"+h+"!==u&&v===v?"+d+":v!==v&&u===u?"+p+(i<v?":":":0");return s=Function("a","b",w+";"),f&&(s=s.bind(f)),t=t.reduce(function(t,e){return N(e)?(r(e)||[]).forEach(function(e){t[e]=1}):null!=e&&(t[e+""]=1),t},{}),e(s,Object.keys(t))},F=function(t){return N(t)?t:function(){return t}},z=function(t,e){var n,r;function i(){e(r),n=r=null}return function(e){r=e,n&&clearTimeout(n),n=setTimeout(i,t)}},U=function(t){for(var e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r])t[n]=e[n];return t},j=function(t,e){var n,r,i,o,a,s=-1,u=t.length;if(null==e){for(;++s<u;)if(null!=(r=t[s])&&r<=r){n=i=r;break}for(o=a=s;++s<u;)null!=(r=t[s])&&(r<n&&(n=r,o=s),i<r&&(i=r,a=s))}else{for(;++s<u;)if(null!=(r=e(t[s],s,t))&&r<=r){n=i=r;break}for(o=a=s;++s<u;)null!=(r=e(t[s],s,t))&&(r<n&&(n=r,o=s),i<r&&(i=r,a=s))}return[o,a]},V={},B=function(t){var e,n,r={};function i(t){return r.hasOwnProperty(t)&&r[t]!==V}return e={size:0,empty:0,object:r,has:i,get:function(t){return i(t)?r[t]:void 0},set:function(t,n){return i(t)||(++e.size,r[t]===V&&--e.empty),r[t]=n,this},delete:function(t){return i(t)&&(--e.size,++e.empty,r[t]=V),this},clear:function(){e.size=e.empty=0,e.object=r={}},test:function(t){return arguments.length?(n=t,e):n},clean:function(){var t,i,o={},a=0;for(t in r)(i=r[t])===V||n&&n(i)||(o[t]=i,++a);e.size=a,e.empty=0,e.object=r=o}},t&&Object.keys(t).forEach(function(n){e.set(n,t[n])}),e},H=function(t,e){var n=t.prototype=Object.create(e.prototype);return n.constructor=t,n},G=function(t){return"boolean"==typeof t},q=function(t){return"[object Date]"===Object.prototype.toString.call(t)},W=function(t){return"number"==typeof t},Y=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},X=function(t,n){t&&(t=n?L(t).map(function(t){return t.replace(/\\(.)/g,"$1")}):L(t));var r=t&&t.length?Function("_","return ''+"+t.map(function(t){return"_["+(n?c(t):o(t).map(c).join("]["))+"]"}).join("+'|'+")+";"):function(){return""};return e(r,t,"key")},$=function(t,e,n,r){var i=e.length,o=n.length;if(!o)return e;if(!i)return n;for(var a=r||new e.constructor(i+o),s=0,u=0,c=0;s<i&&u<o;++c)a[c]=0<t(e[s],n[u])?n[u++]:e[s++];for(;s<i;++s,++c)a[c]=e[s];for(;u<o;++u,++c)a[c]=n[u];return a},Q=function(t,e){for(var n="";0<=--e;)n+=t;return n},Z=function(t,e,n,r){var i=n||" ",o=t+"",a=e-o.length;return a<=0?o:"left"===r?Q(i,a)+o:"center"===r?Q(i,~~(a/2))+o+Q(i,Math.ceil(a/2)):o+Q(i,a)},J=function(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t||!t)};function K(t){return W(t)?t:q(t)?t:Date.parse(t)}var tt=function(t,e){return e=e||K,null==t||""===t?null:e(t)},et=function(t){return null==t||""===t?null:t+""},nt=function(t){for(var e={},n=0,r=t.length;n<r;++n)e[t[n]]=!0;return e},rt=function(t,e,n,r){var i=null!=r?r:"\u2026",o=t+"",a=o.length,s=Math.max(0,e-i.length);return a<=e?o:"left"===n?i+o.slice(a-s):"center"===n?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i},it=function(t,e,n){if(t){var r,i=0,o=t.length;if(e)for(;i<o;++i)(r=e(t[i]))&&n(r,i,t);else t.forEach(n)}};function ot(t){var e=t||d,n=[],r={};return n.add=function(t){var i=e(t);return r[i]||(r[i]=1,n.push(t)),n},n.remove=function(t){var i,o=e(t);return r[o]&&(r[o]=0)<=(i=n.indexOf(t))&&n.splice(i,1),n},n}var at=Symbol("vega_id"),st=1;function ut(t){return!(!t||!ct(t))}function ct(t){return t[at]}function lt(t,e){return t[at]=e,t}function ht(t){var e=t===Object(t)?t:{data:t};return ct(e)?e:lt(e,st++)}function ft(t){return dt(t,ht({}))}function dt(t,e){for(var n in t)e[n]=t[n];return e}function pt(t,e){return lt(e,ct(t))}function mt(t){return t&&t.constructor===gt}function gt(){var t=[],e=[],n=[],r=[],i=[],o=!1;return{constructor:gt,insert:function(e){for(var n=L(e),r=0,i=n.length;r<i;++r)t.push(n[r]);return this},remove:function(t){for(var n=N(t)?r:e,i=L(t),o=0,a=i.length;o<a;++o)n.push(i[o]);return this},modify:function(t,e,r){var o={field:e,value:F(r)};return N(t)?(o.filter=t,i.push(o)):(o.tuple=t,n.push(o)),this},encode:function(t,e){return N(t)?i.push({filter:t,field:e}):n.push({tuple:t,field:e}),this},reflow:function(){return o=!0,this},pulse:function(a,s){var u,c,l,h,f,d,p;for(c=0,l=t.length;c<l;++c)a.add.push(ht(t[c]));for(u={},c=0,l=e.length;c<l;++c)u[ct(d=e[c])]=d;for(c=0,l=r.length;c<l;++c)f=r[c],s.forEach(function(t){f(t)&&(u[ct(t)]=t)});for(p in u)a.rem.push(u[p]);function m(t,e,n){n?t[e]=n(t):a.encode=e,o||(u[ct(t)]=t)}for(u={},c=0,l=n.length;c<l;++c)m((h=n[c]).tuple,h.field,h.value),a.modifies(h.field);for(c=0,l=i.length;c<l;++c)f=(h=i[c]).filter,s.forEach(function(t){f(t)&&m(t,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=e.length||r.length?s.filter(function(t){return u.hasOwnProperty(ct(t))}):s.slice();else for(p in u)a.mod.push(u[p]);return a}}}var vt="_:mod:_";function yt(){Object.defineProperty(this,vt,{writable:!0,value:{}})}var wt=yt.prototype;wt.set=function(t,e,n,r){var i=this[t],o=this[vt];return null!=e&&0<=e?(i[e]!==n||r)&&(i[e]=n,o[e+":"+t]=-1,o[t]=-1):(i!==n||r)&&(this[t]=n,o[t]=a(n)?1+n.length:-1),this},wt.modified=function(t,e){var n,r=this[vt];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(a(t)){for(n=0;n<t.length;++n)if(r[t[n]])return!0;return!1}return null!=e&&0<=e?e+1<r[t]||!!r[e+":"+t]:!!r[t]},wt.clear=function(){return this[vt]={},this};var xt=0,bt=new yt;function _t(t,e,n,r){this.id=++xt,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}var Mt=_t.prototype;function St(t){return function(e){var n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}Mt.targets=function(){return this._targets||(this._targets=ot(f))},Mt.set=function(t){return this.value!==t?(this.value=t,1):0},Mt.skip=St(1),Mt.modified=St(2),Mt.parameters=function(t,e){e=!1!==e;var n,r,o,s,u=this,c=u._argval=u._argval||new yt,l=u._argops=u._argops||[],h=[];function f(t,n,r){r instanceof _t?(r!==u&&(e&&r.targets().add(u),h.push(r)),l.push({op:r,name:t,index:n})):c.set(t,n,r)}for(n in t)if(r=t[n],"pulse"===n)L(r).forEach(function(t){t instanceof _t?t!==u&&(t.targets().add(u),h.push(t)):i("Pulse parameters must be operator instances.")}),u.source=r;else if(a(r))for(c.set(n,-1,Array(o=r.length)),s=0;s<o;++s)f(n,s,r[s]);else f(n,-1,r);return this.marshall().clear(),h},Mt.marshall=function(t){var e,n,r,i,o,a=this._argval||bt,s=this._argops;if(s&&(r=s.length))for(n=0;n<r;++n)o=(i=(e=s[n]).op).modified()&&i.stamp===t,a.set(e.name,e.index,i.value,o);return a},Mt.evaluate=function(t){if(this._update){var e=this.marshall(t.stamp),n=this._update(e,t);if(e.clear(),n!==this.value)this.value=n;else if(!this.modified())return t.StopPropagation}},Mt.run=function(t){return t.stamp<=this.stamp?t.StopPropagation:(this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.stamp=t.stamp,(this.pulse=e)||t);var e};var Et=0;function Tt(t,e,n){this.id=++Et,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function At(t,e,n){return new Tt(t,e,n)}var Ct=Tt.prototype;Ct._filter=g,Ct._apply=d,Ct.targets=function(){return this._targets||(this._targets=ot(f))},Ct.consume=function(t){return arguments.length?(this._consume=!!t,this):!!this._consume},Ct.receive=function(t){if(this._filter(t)){for(var e=this.value=this._apply(t),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},Ct.filter=function(t){var e=At(t);return this.targets().add(e),e},Ct.apply=function(t){var e=At(null,t);return this.targets().add(e),e},Ct.merge=function(){var t=At();this.targets().add(t);for(var e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},Ct.throttle=function(t){var e=-1;return this.filter(function(){var n=Date.now();return t<n-e?(e=n,1):0})},Ct.debounce=function(t){var e=At();return this.targets().add(At(null,null,z(t,function(t){var n=t.dataflow;e.receive(t),n&&n.run&&n.run()}))),e},Ct.between=function(t,e){var n=!1;return t.targets().add(At(null,null,function(){n=!0})),e.targets().add(At(null,null,function(){n=!1})),this.filter(function(){return n})};var kt="$";function Rt(){}function Ot(t,e){var n=new Rt;if(t instanceof Rt)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}function Pt(){return{}}function Dt(t,e,n){t[e]=n}function Lt(){return Ot()}function Nt(t,e,n){t.set(e,n)}function It(){}Rt.prototype=Ot.prototype={constructor:Rt,has:function(t){return kt+t in this},get:function(t){return this[kt+t]},set:function(t,e){return this[kt+t]=e,this},remove:function(t){var e=kt+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===kt&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===kt&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===kt&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===kt&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===kt&&++t;return t},empty:function(){for(var t in this)if(t[0]===kt)return!1;return!0},each:function(t){for(var e in this)e[0]===kt&&t(this[e],e.slice(1),this)}};var Ft=Ot.prototype;It.prototype=(function(t,e){var n=new It;if(t instanceof It)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}).prototype={constructor:It,has:Ft.has,add:function(t){return this[kt+(t+="")]=t,this},remove:Ft.remove,clear:Ft.clear,values:Ft.keys,size:Ft.size,empty:Ft.empty,each:Ft.each};var zt={value:function(){}};function Ut(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new jt(r)}function jt(t){this._=t}function Vt(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Bt(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=zt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}jt.prototype=Ut.prototype={constructor:jt,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=Bt(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Bt(i[n],t.name,null);return this}for(;++a<s;)if((n=(t=o[a]).type)&&(n=Vt(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new jt(t)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var Ht=function(t,e){var n,r,i,o,a=Ut("beforesend","progress","load","error"),s=Ot(),u=new XMLHttpRequest,c=null,l=null,h=0;function f(t){var e,r,o,s=u.status;if(!s&&((o=(r=u).responseType)&&"text"!==o?r.response:r.responseText)||200<=s&&s<300||304===s){if(i)try{e=i.call(n,u)}catch(t){return void a.call("error",n,t)}else e=u;a.call("load",n,e)}else a.call("error",n,t)}if("undefined"==typeof XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=u.ontimeout=f:u.onreadystatechange=function(t){3<u.readyState&&f(t)},u.onprogress=function(t){a.call("progress",n,t)},n={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s.get(t):(null==e?s.remove(t):s.set(t,e+""),n)},mimeType:function(t){return arguments.length?(r=null==t?null:t+"",n):r},responseType:function(t){return arguments.length?(o=t,n):o},timeout:function(t){return arguments.length?(h=+t,n):h},user:function(t){return arguments.length<1?c:(c=null==t?null:t+"",n)},password:function(t){return arguments.length<1?l:(l=null==t?null:t+"",n)},response:function(t){return i=t,n},get:function(t,e){return n.send("GET",t,e)},post:function(t,e){return n.send("POST",t,e)},send:function(e,i,f){var d;return u.open(e,t,!0,c,l),null==r||s.has("accept")||s.set("accept",r+",*/*"),u.setRequestHeader&&s.each(function(t,e){u.setRequestHeader(e,t)}),null!=r&&u.overrideMimeType&&u.overrideMimeType(r),null!=o&&(u.responseType=o),0<h&&(u.timeout=h),null==f&&"function"==typeof i&&(f=i,i=null),null!=f&&1===f.length&&(d=f,f=function(t,e){d(null==t?e:null)}),null!=f&&n.on("error",f).on("load",function(t){f(null,t)}),a.call("beforesend",n,u),u.send(null==i?null:i),n},abort:function(){return u.abort(),n},on:function(){var t=a.on.apply(a,arguments);return t===a?n:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return n.get(e)}return n},Gt={},qt={},Wt=34,Yt=10,Xt=13;function $t(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}var Qt=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,c=!1;function l(){if(u)return qt;if(c)return c=!1,Gt;var e,r,i=a;if(t.charCodeAt(i)===Wt){for(;a++<o&&t.charCodeAt(a)!==Wt||t.charCodeAt(++a)===Wt;);return(e=a)>=o?u=!0:(r=t.charCodeAt(a++))===Yt?c=!0:r===Xt&&(c=!0,t.charCodeAt(a)===Yt&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if((r=t.charCodeAt(e=a++))===Yt)c=!0;else if(r===Xt)c=!0,t.charCodeAt(a)===Yt&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===Yt&&--o,t.charCodeAt(o-1)===Xt&&--o;(r=l())!==qt;){for(var h=[];r!==Gt&&r!==qt;)h.push(r),r=l();e&&null==(h=e(h,s++))||i.push(h)}return i}function i(e){return e.map(o).join(t)}function o(t){return null==t?"":e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,function(t,r){if(n)return n(t,r-1);var o,a,s;i=t,n=e?(a=e,s=$t(o=t),function(t,e){return a(s(t),e,o)}):$t(t)});return o.columns=i||[],o},parseRows:r,format:function(e,n){var r,i,a;return null==n&&(r=e,i=Object.create(null),a=[],r.forEach(function(t){for(var e in t)e in i||a.push(i[e]=e)}),n=a),[n.map(o).join(t)].concat(e.map(function(e){return n.map(function(t){return o(e[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(i).join("\n")}}},Zt=(Qt(","),Qt("\t"),/^([A-Za-z]+:)?\/\//),Jt="file://",Kt=["mimeType","responseType","user","password"],te=function(t){return{options:t||{},sanitize:re,load:ne,file:oe,http:ie}};function ee(t,e){return U({},t.options,e)}function ne(t,e){var n=this;return n.sanitize(t,e).then(function(t){var r=t.href;return t.localFile?n.file(r):n.http(r,e)})}function re(t,e){return e=ee(this,e),new Promise(function(n,r){var i,o,a,s,u={href:null};null!=t&&"string"==typeof t?(o=Zt.test(t),(s=e.baseURL)&&!o&&(se(t,"/")||"/"===s[s.length-1]||(t="/"+t),t=s+t),a=(i=se(t,Jt))||"file"===e.mode||"http"!==e.mode&&!o&&ae(),i?t=t.slice(Jt.length):se(t,"//")&&("file"===e.defaultProtocol?(t=t.slice(2),a=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(u,"localFile",{value:!!a}),u.href=t,e.target&&(u.target=e.target+""),n(u)):r("Sanitize failure, invalid URI: "+c(t))})}function ie(t,e){return e=ee(this,e),new Promise(function(n,r){var i,o=Ht(t);for(i in e.headers)o.header(i,e.headers[i]);Kt.forEach(function(t){e[t]&&o[t](e[t])}),o.on("error",function(e){r(e||"Error loading URL: "+t)}).on("load",function(t){var e=t&&t.responseText;t&&0!==t.status?n(e):r(e||"Error")}).get()})}function oe(t){return new Promise(function(e,n){var r=ae();r?r.readFile(t,function(t,r){t?n(t):e(r)}):n("No file system access for "+t)})}function ae(){var t="function"==typeof require&&require("fs");return t&&N(t.readFile)?t:null}function se(t,e){return null!=t&&0===t.lastIndexOf(e,0)}var ue={boolean:J,integer:_,number:_,date:tt,string:et,unknown:d},ce=[function(t){return"true"===t||"false"===t||!0===t||!1===t},function(t){return de(t)&&(t=+t)==~~t},de,function(t){return!isNaN(Date.parse(t))}],le=["boolean","integer","number","date"];function he(t,e){if(!t||!t.length)return"unknown";var n,r,i,o,a,s=ce.slice();for(r=0,i=t.length;r<i;++r){for(n=e?t[r][e]:t[r],o=0;o<s.length;++o)null==(a=n)||a!=a||s[o](n)||(s.splice(o,1),--o);if(0===s.length)return"string"}return le[ce.indexOf(s[0])]}function fe(t,e){return e.reduce(function(e,n){return e[n]=he(t,n),e},{})}function de(t){return!(isNaN(+t)||t instanceof Date)}function pe(t){return function(e,n){var r={delimiter:t};return me(e,n?U(n,r):r)}}function me(t,e){return e.header&&(t=e.header.map(c).join(e.delimiter)+"\n"+t),Qt(e.delimiter).parse(t+"")}var ge=function(t,e){var n,r=e&&e.property?l(e.property):d;return!s(t)||(n=t,"function"==typeof Buffer&&N(Buffer.isBuffer)&&Buffer.isBuffer(n))?r(JSON.parse(t)):r(t)},ve=function(t){return t},ye=function(t){if(null==t)return ve;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,c=t.length,l=new Array(c);for(l[0]=(e+=t[0])*r+o,l[1]=(n+=t[1])*i+a;u<c;)l[u]=t[u],++u;return l}},we=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},xe=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return be(t,e)})}:be(t,e)};function be(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=_e(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function _e(t,e){var n=ye(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,a=i.length;o<a;++o)e.push(n(i[o],o));t<0&&we(e,a)}function o(t){return n(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(s)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}var Me=function(t){return _e(t,(function(t,e,n){var r,i,o;if(1<arguments.length)r=function(t,e,n){var r,i=[],o=[];function a(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:r})}function s(t){t.forEach(a)}function u(t){t.forEach(s)}return function t(e){switch((r=e).type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":s(e.arcs);break;case"MultiLineString":case"Polygon":u(e.arcs);break;case"MultiPolygon":e.arcs.forEach(u)}}(e),o.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}(0,e,n);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:function(t,e){var n={},r={},i={},o=[],a=-1;function s(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){n[t<0?~t:t]=1}),o.push(i)}}return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)}),e.forEach(function(e){var n,o,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),s=a[0],u=a[1];if(n=i[s])if(delete i[n.end],n.push(e),n.end=u,o=r[u]){delete r[o.start];var c=o===n?n:n.concat(o);r[c.start=n.start]=i[c.end=o.end]=c}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=s,o=i[s]){delete i[o.end];var l=o===n?n:o.concat(n);r[l.start=o.start]=i[l.end=n.end]=l}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=s]=i[n.end=u]=n}),s(i,r),s(r,i),e.forEach(function(t){n[t<0?~t:t]||o.push([t])}),o}(t,r)}}).apply(this,arguments))},Se={dsv:me,csv:pe(","),tsv:pe("\t"),json:ge,topojson:function(t,e){var n,r,o;return t=ge(t,e),n=e&&(o=e.feature)?xe:e&&(o=e.mesh)?Me:i("Missing TopoJSON feature or mesh parameter."),(r=(r=t.objects[o])?n(t,r):i("Invalid TopoJSON object: "+o))&&r.features||[r]}},Ee=function(t,e){return 1<arguments.length?(Se[t]=e,this):Se.hasOwnProperty(t)?Se[t]:null},Te=new Date,Ae=new Date;function Ce(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return(i.floor=i).ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&0<o))return s;for(;s.push(a=new Date(+n)),e(n,o),t(n),a<n&&n<r;);return s},i.filter=function(n){return Ce(function(e){if(e<=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t<=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;0<=--r;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return Te.setTime(+e),Ae.setTime(+r),t(Te),t(Ae),Math.floor(n(Te,Ae))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var ke=Ce(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});ke.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?Ce(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):ke:null};var Re=6e4,Oe=36e5,Pe=6048e5,De=Ce(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Le=Ce(function(t){t.setTime(Math.floor(t/Re)*Re)},function(t,e){t.setTime(+t+e*Re)},function(t,e){return(e-t)/Re},function(t){return t.getMinutes()}),Ne=Ce(function(t){var e=t.getTimezoneOffset()*Re%Oe;e<0&&(e+=Oe),t.setTime(Math.floor((+t-e)/Oe)*Oe+e)},function(t,e){t.setTime(+t+e*Oe)},function(t,e){return(e-t)/Oe},function(t){return t.getHours()}),Ie=Ce(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Re)/864e5},function(t){return t.getDate()-1});function Fe(t){return Ce(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Re)/Pe})}var ze=Fe(0),Ue=Fe(1),je=(Fe(2),Fe(3),Fe(4)),Ve=(Fe(5),Fe(6),Ce(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),Be=Ce(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Be.every=function(t){return isFinite(t=Math.floor(t))&&0<t?Ce(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var He=Ce(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Re)},function(t,e){return(e-t)/Re},function(t){return t.getUTCMinutes()}),Ge=Ce(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Oe)},function(t,e){return(e-t)/Oe},function(t){return t.getUTCHours()}),qe=Ce(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1});function We(t){return Ce(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Pe})}var Ye=We(0),Xe=We(1),$e=(We(2),We(3),We(4)),Qe=(We(5),We(6),Ce(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),Ze=Ce(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});function Je(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ke(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function tn(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}Ze.every=function(t){return isFinite(t=Math.floor(t))&&0<t?Ce(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var en,nn,rn,on,an,sn={"-":"",_:" ",0:"0"},un=/^\s*\d+/,cn=/^%/,ln=/[\\^$*+?|[\]().{}]/g;function hn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function fn(t){return t.replace(ln,"\\$&")}function dn(t){return new RegExp("^(?:"+t.map(fn).join("|")+")","i")}function pn(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function mn(t,e,n){var r=un.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function gn(t,e,n){var r=un.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function vn(t,e,n){var r=un.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function yn(t,e,n){var r=un.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function wn(t,e,n){var r=un.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function xn(t,e,n){var r=un.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function bn(t,e,n){var r=un.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(68<+r[0]?1900:2e3),n+r[0].length):-1}function _n(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Mn(t,e,n){var r=un.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Sn(t,e,n){var r=un.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function En(t,e,n){var r=un.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Tn(t,e,n){var r=un.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function An(t,e,n){var r=un.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Cn(t,e,n){var r=un.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function kn(t,e,n){var r=un.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Rn(t,e,n){var r=un.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function On(t,e,n){var r=cn.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Pn(t,e,n){var r=un.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Dn(t,e,n){var r=un.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function Ln(t,e){return hn(t.getDate(),e,2)}function Nn(t,e){return hn(t.getHours(),e,2)}function In(t,e){return hn(t.getHours()%12||12,e,2)}function Fn(t,e){return hn(1+Ie.count(Be(t),t),e,3)}function zn(t,e){return hn(t.getMilliseconds(),e,3)}function Un(t,e){return zn(t,e)+"000"}function jn(t,e){return hn(t.getMonth()+1,e,2)}function Vn(t,e){return hn(t.getMinutes(),e,2)}function Bn(t,e){return hn(t.getSeconds(),e,2)}function Hn(t){var e=t.getDay();return 0===e?7:e}function Gn(t,e){return hn(ze.count(Be(t),t),e,2)}function qn(t,e){var n=t.getDay();return t=4<=n||0===n?je(t):je.ceil(t),hn(je.count(Be(t),t)+(4===Be(t).getDay()),e,2)}function Wn(t){return t.getDay()}function Yn(t,e){return hn(Ue.count(Be(t),t),e,2)}function Xn(t,e){return hn(t.getFullYear()%100,e,2)}function $n(t,e){return hn(t.getFullYear()%1e4,e,4)}function Qn(t){var e=t.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+hn(e/60|0,"0",2)+hn(e%60,"0",2)}function Zn(t,e){return hn(t.getUTCDate(),e,2)}function Jn(t,e){return hn(t.getUTCHours(),e,2)}function Kn(t,e){return hn(t.getUTCHours()%12||12,e,2)}function tr(t,e){return hn(1+qe.count(Ze(t),t),e,3)}function er(t,e){return hn(t.getUTCMilliseconds(),e,3)}function nr(t,e){return er(t,e)+"000"}function rr(t,e){return hn(t.getUTCMonth()+1,e,2)}function ir(t,e){return hn(t.getUTCMinutes(),e,2)}function or(t,e){return hn(t.getUTCSeconds(),e,2)}function ar(t){var e=t.getUTCDay();return 0===e?7:e}function sr(t,e){return hn(Ye.count(Ze(t),t),e,2)}function ur(t,e){var n=t.getUTCDay();return t=4<=n||0===n?$e(t):$e.ceil(t),hn($e.count(Ze(t),t)+(4===Ze(t).getUTCDay()),e,2)}function cr(t){return t.getUTCDay()}function lr(t,e){return hn(Xe.count(Ze(t),t),e,2)}function hr(t,e){return hn(t.getUTCFullYear()%100,e,2)}function fr(t,e){return hn(t.getUTCFullYear()%1e4,e,4)}function dr(){return"+0000"}function pr(){return"%"}function mr(t){return+t}function gr(t){return Math.floor(+t/1e3)}function vr(t){return en=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=dn(i),l=pn(i),h=dn(o),f=pn(o),d=dn(a),p=pn(a),m=dn(s),g=pn(s),v=dn(u),y=pn(u),w={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Ln,e:Ln,f:Un,H:Nn,I:In,j:Fn,L:zn,m:jn,M:Vn,p:function(t){return i[+(12<=t.getHours())]},Q:mr,s:gr,S:Bn,u:Hn,U:Gn,V:qn,w:Wn,W:Yn,x:null,X:null,y:Xn,Y:$n,Z:Qn,"%":pr},x={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Zn,e:Zn,f:nr,H:Jn,I:Kn,j:tr,L:er,m:rr,M:ir,p:function(t){return i[+(12<=t.getUTCHours())]},Q:mr,s:gr,S:or,u:ar,U:sr,V:ur,w:cr,W:lr,x:null,X:null,y:hr,Y:fr,Z:dr,"%":pr},b={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return S(t,e,n,r)},d:Sn,e:Sn,f:Rn,H:Tn,I:Tn,j:En,L:kn,m:Mn,M:An,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1},Q:Pn,s:Dn,S:Cn,u:gn,U:vn,V:yn,w:mn,W:wn,x:function(t,e,r){return S(t,n,e,r)},X:function(t,e,n){return S(t,r,e,n)},y:bn,Y:xn,Z:_n,"%":On};function _(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=sn[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function M(t,e){return function(n){var r,i,o=tn(1900);if(S(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||53<o.V)return null;"w"in o||(o.w=1),"Z"in o?(r=4<(i=(r=Ke(tn(o.y))).getUTCDay())||0===i?Xe.ceil(r):Xe(r),r=qe.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=4<(i=(r=e(tn(o.y))).getDay())||0===i?Ue.ceil(r):Ue(r),r=Ie.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Ke(tn(o.y)).getUTCDay():e(tn(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Ke(o)):e(o)}}function S(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(u<=r)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=b[i in sn?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return w.x=_(n,w),w.X=_(r,w),w.c=_(e,w),x.x=_(n,x),x.X=_(r,x),x.c=_(e,x),{format:function(t){var e=_(t+="",w);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",Je);return e.toString=function(){return t},e},utcFormat:function(t){var e=_(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t,Ke);return e.toString=function(){return t},e}}}(t),nn=en.format,rn=en.parse,on=en.utcFormat,an=en.utcParse,en}vr({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var yr="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||on(yr),+new Date("2000-01-01T00:00:00.000Z")||an(yr);var wr=function(t,e,n){var r=Ee((e=e||{}).type||"json");return r||i("Unknown data format type: "+e.type),t=r(t,e),e.parse&&function(t,e,n){if(t.length){n=n||rn;var r,i,o,a,s,u,c,l=t.columns||Object.keys(t[0]);for("auto"===e&&(e=fe(t,l)),r=(l=Object.keys(e)).map(function(t){var r,i,o=e[t];if(o&&(0===o.indexOf("date:")||0===o.indexOf("utc:")))return("'"===(i=(r=o.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?an(i):n(i);if(!ue[o])throw Error("Illegal format pattern: "+t+":"+o);return ue[o]}),a=0,u=t.length,c=l.length;a<u;++a)for(i=t[a],s=0;s<c;++s)i[o=l[s]]=r[s](i[o])}}(t,e.parse,n),t.hasOwnProperty("columns")&&delete t.columns,t},xr={skip:!0},br={};function _r(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}var Mr=_r.prototype;function Sr(t,e){return t?function(n,r){return t(n,r)&&e(n,r)}:e}function Er(t,e){var n=[];return it(t,e,function(t){n.push(t)}),n}function Tr(t,e){var n={};return t.visit(e,function(t){n[ct(t)]=1}),function(t){return n[ct(t)]?null:t}}function Ar(t,e,n,r){var i,o,a,s,u,c=0;for(this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,a=0,s=(this.pulses=n).length;a<s;++a)if((i=n[a]).stamp===e){if(i.fields)for(u in o=this.fields||(this.fields={}),i.fields)o[u]=1;i.changed(this.ADD)&&(c|=this.ADD),i.changed(this.REM)&&(c|=this.REM),i.changed(this.MOD)&&(c|=this.MOD)}this.changes=c}Mr.StopPropagation=br,Mr.ADD=1,Mr.REM=2,Mr.MOD=4,Mr.ADD_REM=3,Mr.ADD_MOD=5,Mr.ALL=7,Mr.REFLOW=8,Mr.SOURCE=16,Mr.NO_SOURCE=32,Mr.NO_FIELDS=64,Mr.fork=function(t){return new _r(this.dataflow).init(this,t)},Mr.addAll=function(){var t=this;return this.source&&this.source.length!==this.add.length&&((t=new _r(this.dataflow).init(this)).add=t.source),t},Mr.init=function(t,e){var n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||64&e||(n.fields=t.fields),1&e?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),2&e?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),4&e?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),32&e?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source),n},Mr.runAfter=function(t){this.dataflow.runAfter(t)},Mr.changed=function(t){var e=t||7;return 1&e&&this.add.length||2&e&&this.rem.length||4&e&&this.mod.length},Mr.reflow=function(t){if(t)return this.fork(7).reflow();var e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(4,Tr(this,1))),this},Mr.modifies=function(t){var e=L(t),n=this.fields||(this.fields={});return e.forEach(function(t){n[t]=!0}),this},Mr.modified=function(t){var e=this.fields;return!(!this.mod.length||!e)&&(arguments.length?a(t)?t.some(function(t){return e[t]}):e[t]:!!e)},Mr.filter=function(t,e){return 1&t&&(this.addF=Sr(this.addF,e)),2&t&&(this.remF=Sr(this.remF,e)),4&t&&(this.modF=Sr(this.modF,e)),16&t&&(this.srcF=Sr(this.srcF,e)),this},Mr.materialize=function(t){var e=this;return 1&(t=t||7)&&e.addF&&(e.add=Er(e.add,e.addF),e.addF=null),2&t&&e.remF&&(e.rem=Er(e.rem,e.remF),e.remF=null),4&t&&e.modF&&(e.mod=Er(e.mod,e.modF),e.modF=null),16&t&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},Mr.visit=function(t,e){var n,r,i=this,o=e;return 16&t?it(i.source,i.srcF,o):(1&t&&it(i.add,i.addF,o),2&t&&it(i.rem,i.remF,o),4&t&&it(i.mod,i.modF,o),8&t&&(n=i.source)&&((r=i.add.length+i.mod.length)===n.length||it(n,r?Tr(i,5):i.srcF,o))),i};var Cr=H(Ar,_r);function kr(t,e){try{e(t)}catch(e){t.error(e)}}Cr.fork=function(t){var e=new _r(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&e.ADD&&this.visit(e.ADD,function(t){return e.add.push(t)}),t&e.REM&&this.visit(e.REM,function(t){return e.rem.push(t)}),t&e.MOD&&this.visit(e.MOD,function(t){return e.mod.push(t)})),e},Cr.changed=function(t){return this.changes&t},Cr.modified=function(t){var e=this.fields;return e&&this.changes&this.MOD?a(t)?t.some(function(t){return e[t]}):e[t]:0},Cr.filter=function(){i("MultiPulse does not support filtering.")},Cr.materialize=function(){i("MultiPulse does not support materialization.")},Cr.visit=function(t,e){var n=this.pulses,r=n.length,i=0;if(t&this.SOURCE)for(;i<r;++i)n[i].visit(t,e);else for(;i<r;++i)n[i].stamp===this.stamp&&n[i].visit(t,e);return this};var Rr={skip:!1,force:!1};function Or(t){this.cmp=t,this.nodes=[]}var Pr=Or.prototype;function Dr(t,e,n,r){var i,o,a;for(i=t[n];e<n&&r(i,o=t[a=n-1>>1])<0;)t[n]=o,n=a;return t[n]=i}function Lr(t,e,n){for(var r,i=e,o=t.length,a=t[e],s=2*e+1;s<o;)(r=s+1)<o&&0<=n(t[s],t[r])&&(s=r),t[e]=t[s],s=2*(e=s)+1;return t[e]=a,Dr(t,i,e,n)}function Nr(){this._log=x(),this.logLevel(w),this._clock=0,this._rank=0;try{this._loader=te()}catch(t){}this._touched=ot(f),this._pulses={},this._pulse=null,this._heap=new Or(function(t,e){return t.qrank-e.qrank}),this._postrun=[]}Pr.size=function(){return this.nodes.length},Pr.clear=function(){return this.nodes=[],this},Pr.peek=function(){return this.nodes[0]},Pr.push=function(t){var e=this.nodes;return e.push(t),Dr(e,0,e.length-1,this.cmp)},Pr.pop=function(){var t,e=this.nodes,n=e.pop();return e.length?(t=e[0],e[0]=n,Lr(e,0,this.cmp)):t=n,t},Pr.replace=function(t){var e=this.nodes,n=e[0];return e[0]=t,Lr(e,0,this.cmp),n},Pr.pushpop=function(t){var e=this.nodes,n=e[0];return e.length&&this.cmp(n,t)<0&&(e[0]=t,t=n,Lr(e,0,this.cmp)),t};var Ir=Nr.prototype;function Fr(t){return function(){return this._log[t].apply(this,arguments)}}function zr(t,e){_t.call(this,t,null,e)}Ir.stamp=function(){return this._clock},Ir.loader=function(t){return arguments.length?(this._loader=t,this):this._loader},Ir.cleanThreshold=1e4,Ir.add=function(t,e,n,r){var i,o=1;return t instanceof _t?i=t:t&&t.prototype instanceof _t?i=new t:N(t)?i=new _t(null,t):(o=0,i=new _t(t,e)),this.rank(i),o&&(r=n,n=e),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},Ir.connect=function(t,e){var n,r,i=t.rank;for(n=0,r=e.length;n<r;++n)if(i<e[n].rank)return void this.rerank(t)},Ir.rank=function(t){t.rank=++this._rank},Ir.rerank=function(t){for(var e,n,r,o=[t];o.length;)if(this.rank(e=o.pop()),n=e._targets)for(r=n.length;0<=--r;)o.push(e=n[r]),e===t&&i("Cycle detected in dataflow graph.")},Ir.pulse=function(t,e,n){this.touch(t,n||Rr);var r=new _r(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return r.target=t,this._pulses[t.id]=e.pulse(r,i),this},Ir.touch=function(t,e){var n=e||Rr;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this},Ir.update=function(t,e,n){var r=n||Rr;return(t.set(e)||r.force)&&this.touch(t,r),this},Ir.changeset=gt,Ir.ingest=function(t,e,n){return this.pulse(t,this.changeset().insert(wr(e,n)))},Ir.request=function(t,e,n){var r,i,o,a,s=this,u=s._pending||(r=s,(a=new Promise(function(t,e){i=t,o=e})).requests=0,a.done=function(){0==--a.requests&&r.runAfter(function(){r._pending=null;try{r.run(),i(r)}catch(t){o(t)}})},r._pending=a);u.requests+=1,s.loader().load(e,{context:"dataflow"}).then(function(e){s.ingest(t,e,n)},function(t){s.error("Loading failed",e,t)}).catch(function(t){s.error("Data ingestion failed",e,t)}).then(u.done,u.done)},Ir.events=function(t,e,n,r){for(var i,o=this,a=At(n,r),s=function(t){t.dataflow=o;try{a.receive(t)}catch(t){o.error(t)}finally{o.run()}},u=0,c=(i="string"==typeof t&&"undefined"!=typeof document?document.querySelectorAll(t):L(t)).length;u<c;++u)i[u].addEventListener(e,s);return a},Ir.on=function(t,e,n,r,i){return(t instanceof _t?function(t,e,n,r,i,o){var a,s;void 0===r?s=n:(a=N(r)?r:F(r),(s=new _t(null,r=n?function(t,e){var r=a(t,e);return n.skip()?r:n.skip(!0).value=r}:a,i,!1)).modified(o&&o.force),s.rank=0,n&&(s.skip(!0),s.value=n.value,s.targets().add(n))),e.targets().add(s)}:function(t,e,n,r,i,o){var a,s,u=U({},o,xr);N(n)||(n=F(n)),void 0===r?a=function(e){t.touch(n(e))}:N(r)?(s=new _t(null,r,i,!1),a=function(e){var r,i=n(e);s.evaluate(e),mt(r=s.value)?t.pulse(i,r,o):t.update(i,r,u)}):a=function(e){t.update(n(e),r,u)},e.apply(a)})(this,t,e,n,r,i),this},Ir.run=function(t){var e,n,r,i,o=this,a=0,s=o.logLevel();if(o._pending)return o.info("Awaiting requests, delaying dataflow run."),0;if(o._pulse)return o.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!o._touched.length)return o.info("Dataflow invoked, but nothing to do."),0;o._pulse=new _r(o,++o._clock,t),3<=s&&(r=Date.now(),o.debug("-- START PROPAGATION ("+o._clock+") -----")),o._touched.forEach(function(t){o._enqueue(t,!0)}),o._touched=ot(f);try{for(;0<o._heap.size();)(e=o._heap.pop()).rank===e.qrank?(n=e.run(o._getPulse(e,t)),4<=s&&o.debug(e.id,n===br?"STOP":n,e),n!==br&&(o._pulse=n,e._targets&&e._targets.forEach(function(t){o._enqueue(t)})),++a):o._enqueue(e,!0)}catch(t){i=t}if(o._pulses={},o._pulse=null,3<=s&&(r=Date.now()-r,o.info("> Pulse "+o._clock+": "+a+" operators; "+r+"ms")),i&&(o._postrun=[],o.error(i)),o._onrun)try{o._onrun(o,a,i)}catch(t){o.error(t)}if(o._postrun.length){var u=o._postrun;o._postrun=[],u.sort(function(t,e){return e.priority-t.priority}).forEach(function(t){kr(o,t.callback)})}return a},Ir.runAsync=function(){return this._pending||Promise.resolve(this.run())},Ir.runAfter=function(t,e,n){this._pulse||e?this._postrun.push({priority:n||0,callback:t}):kr(this,t)},Ir._enqueue=function(t,e){var n=!this._pulses[t.id];n&&(this._pulses[t.id]=this._pulse),(n||e)&&(t.qrank=t.rank,this._heap.push(t))},Ir._getPulse=function(t,e){var n,r=t.source,i=this._clock;return r&&a(r)?new Ar(this,i,n=r.map(function(t){return t.pulse}),e):(n=this._pulses[t.id],r&&((r=r.pulse)&&r!==br?r.stamp===i&&n.target!==t?n=r:n.source=r.source:n.source=[]),n)},Ir.error=Fr("error"),Ir.warn=Fr("warn"),Ir.info=Fr("info"),Ir.debug=Fr("debug"),Ir.logLevel=Fr("level");var Ur=H(zr,_t);Ur.run=function(t){return t.stamp<=this.stamp?t.StopPropagation:(this.skip()?this.skip(!1):e=this.evaluate(t),(e=e||t)!==t.StopPropagation&&(this.pulse=e),this.stamp=t.stamp,e);var e},Ur.evaluate=function(t){var e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},Ur.transform=function(){};var jr={};function Vr(t){var e=Br(t);return e&&e.Definition||null}function Br(t){return t=t&&t.toLowerCase(),jr.hasOwnProperty(t)?jr[t]:null}function Hr(t){return t&&t.length?1===t.length?t[0]:(e=t,function(t){for(var n=e.length,r=1,i=String(e[0](t));r<n;++r)i+="|"+e[r](t);return i}):function(){return""};var e}function Gr(t,e,n){return n||t+(e?"_"+e:"")}var qr={values:Xr({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:Xr({name:"count",set:"cell.num"}),__count__:Xr({name:"count",set:"this.missing + this.valid"}),missing:Xr({name:"missing",set:"this.missing"}),valid:Xr({name:"valid",set:"this.valid"}),sum:Xr({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:Xr({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:Xr({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:Xr({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:Xr({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:Xr({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:Xr({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:Xr({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:Xr({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:Xr({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:Xr({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:Xr({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:Xr({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:Xr({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:Xr({name:"argmin",init:"this.argmin = null;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:Xr({name:"argmax",init:"this.argmax = null;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:Xr({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:Xr({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},Wr=Object.keys(qr);function Yr(t,e){return qr[t](e)}function Xr(t){return function(e){var n=U({init:"",add:"",rem:"",idx:0},t);return n.out=e||t.name,n}}function $r(t,e){return t.idx-e.idx}function Qr(t,e){var n=e||d,r="var cell = this.cell; this.valid = 0; this.missing = 0;",i="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",a="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",s="var cell = this.cell;";return function(t,e){var n,r=t.reduce(function t(e,n){function r(n){e[n]||t(e,e[n]=qr[n]())}return n.req&&n.req.forEach(r),n.str&&n.str.forEach(r),e},t.reduce(function(t,e){return t[e.name]=e,t},{})),i=[];for(n in r)i.push(r[n]);return i.sort($r)}(t).forEach(function(t){r+=t.init,o+=t.add,a+=t.rem}),t.slice().sort($r).forEach(function(t){s+="t['"+t.out+"']="+t.set+";"}),s+="return t;",(i=Function("cell",i)).prototype.init=Function(r),i.prototype.add=Function("v","t",o),i.prototype.rem=Function("v","t",a),i.prototype.set=Function("t",s),i.prototype.get=n,i.fields=t.map(function(t){return t.out}),i}var Zr=function(t){var e,n,r,i,o,a,s,u,c=t.maxbins||20,l=t.base||10,h=Math.log(l),f=t.divide||[5,2],d=t.extent[0],p=t.extent[1],m=p-d;if(t.step)e=t.step;else if(t.steps){for(o=m/c,a=0,s=t.steps.length;a<s&&t.steps[a]<o;++a);e=t.steps[Math.max(0,a-1)]}else{for(n=Math.ceil(Math.log(c)/h),r=t.minstep||0,e=Math.max(r,Math.pow(l,Math.round(Math.log(m)/h)-n));Math.ceil(m/e)>c;)e*=l;for(a=0,s=f.length;a<s;++a)r<=(o=e/f[a])&&m/o<=c&&(e=o)}return i=0<=(o=Math.log(e))?0:1+~~(-o/h),u=Math.pow(l,-i-1),(t.nice||void 0===t.nice)&&(d=d<(o=Math.floor(d/e+u)*e)?o-e:o,p=Math.ceil(p/e)*e),{start:d,stop:p,step:e}},Jr=function(t,e){var n,r=[],i=t.length,o=-1;if(null==e)for(;++o<i;)isNaN(n=Kr(t[o]))||r.push(n);else for(;++o<i;)isNaN(n=Kr(e(t[o],o,t)))||r.push(n);return r};function Kr(t){return null===t?NaN:+t}t.random=Math.random;var ti=function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN},ei=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return ti(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;0<t(e[o],n)?i=o:r=o+1}return r}}},ni=ei(ti),ri=ni.right,ii=ni.left,oi=function(t){return null===t?NaN:+t},ai=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n<=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(n<r&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n<=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(n<r&&(r=n),i<n&&(i=n));return[r,i]},si=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},ui=Math.sqrt(50),ci=Math.sqrt(10),li=Math.sqrt(2),hi=function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&0<n)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=fi(t,e,n))||!isFinite(a))return[];if(0<a)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o};function fi(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return 0<=i?(ui<=o?10:ci<=o?5:li<=o?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(ui<=o?10:ci<=o?5:li<=o?2:1)}function di(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return ui<=o?i*=10:ci<=o?i*=5:li<=o&&(i*=2),e<t?-i:i}var pi=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},mi=function(t,e,n){if(null==n&&(n=oi),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(1<=e)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}},gi=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n<=n)for(r=n;++o<i;)null!=(n=t[o])&&r<n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n<=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r<n&&(r=n);return r},vi=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);0<=--i;)for(e=(r=t[i]).length;0<=--e;)n[--a]=r[e];return n},yi=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},wi=function(e,n,r,i){var o,a,s,u,c=Jr(e,i),l=c.length,h=n;for(s=0,u=Array(h);s<h;++s){for(a=o=0;a<l;++a)o+=c[~~(t.random()*l)];u[s]=o/l}return[mi(u.sort(ti),r/2),mi(u,1-r/2)]},xi=function(t,e){var n=Jr(t,e);return[mi(n.sort(ti),.25),mi(n,.5),mi(n,.75)]},bi=function(e,n){var r,i,o=NaN,a={mean:function(t){return arguments.length?(r=t||0,o=NaN,a):r},stdev:function(t){return arguments.length?(i=null==t?1:t,o=NaN,a):i},sample:function(){var e,n,a=0,s=0;if(o==o)return a=o,o=NaN,a;for(;0==(e=(a=2*t.random()-1)*a+(s=2*t.random()-1)*s)||1<e;);return n=Math.sqrt(-2*Math.log(e)/e),o=r+s*n*i,r+a*n*i},pdf:function(t){var e=Math.exp(Math.pow(t-r,2)/(-2*Math.pow(i,2)));return 1/(i*Math.sqrt(2*Math.PI))*e},cdf:function(t){var e,n=(t-r)/i,o=Math.abs(n);if(37<o)e=0;else{var a=Math.exp(-o*o/2);o<7.07106781186547?(e=a*((((((.0352624965998911*o+.700383064443688)*o+6.37396220353165)*o+33.912866078383)*o+112.079291497871)*o+221.213596169931)*o+220.206867912376),e/=((((((.0883883476483184*o+1.75566716318264)*o+16.064177579207)*o+86.7807322029461)*o+296.564248779674)*o+637.333633378831)*o+793.826512519948)*o+440.413735824752):e=a/(o+1/(o+2/(o+3/(o+4/(o+.65)))))/2.506628274631}return 0<n?1-e:e},icdf:function(t){if(t<=0||1<=t)return NaN;var e=2*t-1,n=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),o=2/(Math.PI*n)+Math.log(1-Math.pow(e,2))/2,a=Math.log(1-e*e)/n,s=(0<e?1:-1)*Math.sqrt(Math.sqrt(o*o-a)-o);return r+i*Math.SQRT2*s}};return a.mean(e).stdev(n)},_i=function(e,n){var r=bi(),i={},o=0;return i.data=function(t){return arguments.length?(o=(e=t)?t.length:0,i.bandwidth(n)):e},i.bandwidth=function(t){return arguments.length?(!(n=t)&&e&&(o=(r=e).length,s=((a=xi(r))[2]-a[0])/1.34,n=1.06*Math.min(Math.sqrt(function(t,e){for(var n,r,i=t.length,o=0,a=-1,s=0,u=0;++a<i;)isNaN(n=oi(t[a]))||(u+=(r=n-s)*(n-(s+=r/++o)));if(1<o)return u/(o-1)}(r)),s)*Math.pow(o,-.2)),i):n;var r,o,a,s},i.sample=function(){return e[~~(t.random()*o)]+n*r.sample()},i.pdf=function(t){for(var i=0,a=0;a<o;++a)i+=r.pdf((t-e[a])/n);return i/n/o},i.cdf=function(t){for(var i=0,a=0;a<o;++a)i+=r.cdf((t-e[a])/n);return i/o},i.icdf=function(){throw Error("KDE icdf not supported.")},i.data(e)},Mi=function(e,n){var r,i={},o=0;return i.weights=function(t){return arguments.length?(r=function(t){var e,n=[],r=0;for(e=0;e<o;++e)r+=n[e]=null==t[e]?1:+t[e];for(e=0;e<o;++e)n[e]/=r;return n}(n=t||[]),i):n},i.distributions=function(t){return arguments.length?(t?(o=t.length,e=t):(o=0,e=[]),i.weights(n)):e},i.sample=function(){for(var n=t.random(),i=e[o-1],a=r[0],s=0;s<o-1;a+=r[++s])if(n<a){i=e[s];break}return i.sample()},i.pdf=function(t){for(var n=0,i=0;i<o;++i)n+=r[i]*e[i].pdf(t);return n},i.cdf=function(t){for(var n=0,i=0;i<o;++i)n+=r[i]*e[i].cdf(t);return n},i.icdf=function(){throw Error("Mixture icdf not supported.")},i.distributions(e).weights(n)},Si=function(e,n){null==n&&(n=null==e?1:e,e=0);var r,i,o,a={min:function(t){return arguments.length?(o=i-(r=t||0),a):r},max:function(t){return arguments.length?(o=(i=t||0)-r,a):i},sample:function(){return r+o*t.random()},pdf:function(t){return r<=t&&t<=i?1/o:0},cdf:function(t){return t<r?0:i<t?1:(t-r)/o},icdf:function(t){return 0<=t&&t<=1?r+t*o:NaN}};return a.min(e).max(n)};function Ei(t){this._key=t?l(t):ct,this.reset()}var Ti=Ei.prototype;function Ai(t){zr.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Ti.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Ti.add=function(t){this._add.push(t)},Ti.rem=function(t){this._rem.push(t)},Ti.values=function(){if(this._get=null,0===this._rem.length)return this._add;var t,e,n,r=this._add,i=this._rem,o=this._key,a=r.length,s=i.length,u=Array(a-s),c={};for(t=0;t<s;++t)c[o(i[t])]=1;for(e=t=0;t<a;++t)c[o(n=r[t])]?c[o(n)]=0:u[e++]=n;return this._rem=[],this._add=u},Ti.distinct=function(t){for(var e,n=this.values(),r=n.length,i={},o=0;0<=--r;)e=t(n[r])+"",i.hasOwnProperty(e)||(i[e]=1,++o);return o},Ti.extent=function(t){if(this._get!==t||!this._ext){var e=this.values(),n=j(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext},Ti.argmin=function(t){return this.extent(t)[0]||{}},Ti.argmax=function(t){return this.extent(t)[1]||{}},Ti.min=function(t){var e=this.extent(t)[0];return null!=e?t(e):1/0},Ti.max=function(t){var e=this.extent(t)[1];return null!=e?t(e):-1/0},Ti.quartile=function(t){return this._get===t&&this._q||(this._q=xi(this.values(),t),this._get=t),this._q},Ti.q1=function(t){return this.quartile(t)[0]},Ti.q2=function(t){return this.quartile(t)[1]},Ti.q3=function(t){return this.quartile(t)[2]},Ti.ci=function(t){return this._get===t&&this._ci||(this._ci=wi(this.values(),1e3,.05,t),this._get=t),this._ci},Ti.ci0=function(t){return this.ci(t)[0]},Ti.ci1=function(t){return this.ci(t)[1]},Ai.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Wr},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var Ci=H(Ai,zr);function ki(t){zr.call(this,null,t)}Ci.transform=function(t,e){var n,r=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=t.modified())||e.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(t):{},e.visit(e.SOURCE,function(t){r.add(t)})):(this.value=this.value||this.init(t),e.visit(e.REM,function(t){r.rem(t)}),e.visit(e.ADD,function(t){r.add(t)})),i.modifies(this._outputs),r._drop=!1!==t.drop,t.cross&&1<r._dims.length&&(r._drop=!1,this.cross()),r.changes(i)},Ci.cross=function(){var t=this,e=t.value,n=t._dnames,r=n.map(function(){return{}}),i=n.length;function o(t){var e,o,a,s;for(e in t)for(a=t[e].tuple,o=0;o<i;++o)r[o][s=a[n[o]]]=s}o(t._prev),o(e),function o(a,s,u){var c,l,h=n[u],f=r[u++];for(c in f)s[h]=f[c],l=a?a+"|"+c:c,u<i?o(l,s,u):e[l]||t.cell(l,s)}("",{},0)},Ci.init=function(t){var e=this._inputs=[],o=this._outputs=[],a={};function s(t){for(var n,i=L(r(t)),o=0,s=i.length;o<s;++o)a[n=i[o]]||(a[n]=1,e.push(n))}this._dims=L(t.groupby),this._dnames=this._dims.map(function(t){var e=n(t);return s(t),o.push(e),e}),this.cellkey=t.key?t.key:Hr(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var u,c,l,h,f,d,p=t.fields||[null],m=t.ops||["count"],g=t.as||[],v=p.length,y={};for(v!==m.length&&i("Unmatched number of fields and aggregate ops."),d=0;d<v;++d)c=m[d],null==(u=p[d])&&"count"!==c&&i("Null aggregate field specified."),f=Gr(c,h=n(u),g[d]),o.push(f),"count"!==c?((l=y[h])||(s(u),(l=y[h]=[]).field=u,this._measures.push(l)),"count"!==c&&(this._countOnly=!1),l.push(Yr(c,f))):this._counts.push(f);return this._measures=this._measures.map(function(t){return Qr(t,t.field)}),{}},Ci.cellkey=Hr(),Ci.cell=function(t,e){var n=this.value[t];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},Ci.newcell=function(t,e){var n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,o=i.length;for(n.agg=Array(o),r=0;r<o;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new Ei),n},Ci.newtuple=function(t,e){var n,r,i=this._dnames,o=this._dims,a={};for(n=0,r=o.length;n<r;++n)a[i[n]]=o[n](t);return e?pt(e.tuple,a):ht(a)},Ci.add=function(t){var e,n,r,i=this.cellkey(t),o=this.cell(i,t);if(o.num+=1,!this._countOnly)for(o.store&&o.data.add(t),n=0,r=(e=o.agg).length;n<r;++n)e[n].add(e[n].get(t),t)},Ci.rem=function(t){var e,n,r,i=this.cellkey(t),o=this.cell(i,t);if(o.num-=1,!this._countOnly)for(o.store&&o.data.rem(t),n=0,r=(e=o.agg).length;n<r;++n)e[n].rem(e[n].get(t),t)},Ci.celltuple=function(t){var e,n,r,i=t.tuple,o=this._counts;for(t.store&&t.data.values(),n=0,r=o.length;n<r;++n)i[o[n]]=t.num;if(!this._countOnly)for(n=0,r=(e=t.agg).length;n<r;++n)e[n].set(i);return i},Ci.changes=function(t){var e,n,r,i,o=this._adds,a=this._mods,s=this._prev,u=this._drop,c=t.add,l=t.rem,h=t.mod;if(s)for(n in s)e=s[n],u&&!e.num||l.push(e.tuple);for(r=0,i=this._alen;r<i;++r)c.push(this.celltuple(o[r])),o[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(e=a[r]).num&&u?l:h).push(this.celltuple(e)),a[r]=null;return this._alen=this._mlen=0,this._prev=null,t},ki.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var Ri=H(ki,zr);Ri.transform=function(t,e){var n,i=this._bins(t),o=i.start,a=i.step,s=t.as||["bin0","bin1"],u=s[0],c=s[1];return n=t.modified()?(e=e.reflow(!0)).SOURCE:e.modified(r(t.field))?e.ADD_MOD:e.ADD,e.visit(n,function(t){var e=i(t);t[u]=e,t[c]=null==e?null:o+a*(1+(e-o)/a)}),e.modifies(s)},Ri._bins=function(t){if(this.value&&!t.modified())return this.value;var i,o,a=t.field,s=Zr(t),u=s.start,c=s.stop,l=s.step;null!=(i=t.anchor)&&(o=i-(u+l*Math.floor((i-u)/l)),u+=o,c+=o);var h=function(t){var e=a(t);return null==e?null:(e=Math.max(u,Math.min(+e,c-l)),u+l*Math.floor((e-u)/l))};return h.start=u,h.stop=c,h.step=l,this.value=e(h,r(a),t.name||"bin_"+n(a))};var Oi=function(t,e,n){var r=t,i=e||[],o=n||[],a={},s=0;return{add:function(t){o.push(t)},remove:function(t){a[r(t)]=++s},size:function(){return i.length},data:function(t,e){return s&&(i=i.filter(function(t){return!a[r(t)]}),a={},s=0),e&&t&&i.sort(t),o.length&&(i=t?$(t,i,o.sort(t)):i.concat(o),o=[]),i}}};function Pi(t){zr.call(this,[],t)}function Di(t){_t.call(this,null,Li,t)}function Li(t){return this.value&&!t.modified()?this.value:I(t.fields,t.orders)}function Ni(t){zr.call(this,null,t)}Pi.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},H(Pi,zr).transform=function(t,e){var n=e.fork(e.ALL),r=Oi(ct,this.value,n.materialize(n.ADD).add),i=t.sort,o=e.changed()||i&&(t.modified("sort")||e.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(i,o),e.source&&e.source.root&&(this.value.root=e.source.root),n},H(Di,_t),Ni.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var Ii=H(Ni,zr);function Fi(t){zr.call(this,null,t)}Ii.transform=function(t,e){function n(e){return function(n){for(var r,i=function(e,n,r){switch(t.case){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(r)}(s(n),0,o)||[],u=0,c=i.length;u<c;++u)a.test(r=i[u])||e(r)}}var r=this._parameterCheck(t,e),i=this._counts,o=this._match,a=this._stop,s=t.field,u=t.as||["text","count"],c=n(function(t){i[t]=1+(i[t]||0)}),l=n(function(t){i[t]-=1});return r?e.visit(e.SOURCE,c):(e.visit(e.ADD,c),e.visit(e.REM,l)),this._finish(e,u)},Ii._parameterCheck=function(t,e){var n=!1;return!t.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),!t.modified("pattern")&&this._match||(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},Ii._finish=function(t,e){var n,r,i,o=this._counts,a=this._tuples||(this._tuples={}),s=e[0],u=e[1],c=t.fork(t.NO_SOURCE|t.NO_FIELDS);for(n in o)r=a[n],i=o[n]||0,!r&&i?(a[n]=r=ht({}),r[s]=n,r[u]=i,c.add.push(r)):0===i?(r&&c.rem.push(r),o[n]=null,a[n]=null):r[u]!==i&&(r[u]=i,c.mod.push(r));return c.modifies(e)},Fi.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},H(Fi,zr).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=this.value,i=t.as||["a","b"],o=i[0],a=i[1];return!r||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter")?(r&&(n.rem=r),r=e.materialize(e.SOURCE).source,n.add=this.value=function(t,e,n,r){for(var i,o,a=[],s={},u=t.length,c=0;c<u;++c)for(s[e]=o=t[c],i=0;i<u;++i)s[n]=t[i],r(s)&&(a.push(ht(s)),(s={})[e]=o);return a}(r,o,a,t.filter||g)):n.mod=r,n.source=this.value,n.modifies(i)};var zi={kde:_i,mixture:Mi,normal:bi,uniform:Si},Ui="function";function ji(t){zr.call(this,null,t)}var Vi=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}];function Bi(t){zr.call(this,[1/0,-1/0],t)}function Hi(t,e){_t.call(this,t),this.parent=e}ji.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Vi.concat({key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Vi},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,default:["value","density"]}]},H(ji,zr).transform=function(t,e){var n,r=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var o=function t(e,n){var r=e[Ui];zi.hasOwnProperty(r)||i("Unknown distribution function: "+r);var o=zi[r]();for(var a in e)"field"===a?o.data((e.from||n()).map(e[a])):"distributions"===a?o[a](e[a].map(function(e){return t(e,n)})):typeof o[a]===Ui&&o[a](e[a]);return o}(t.distribution,(n=e,function(){return n.materialize(n.SOURCE).source})),a=t.method||"pdf";"pdf"!==a&&"cdf"!==a&&i("Invalid density method: "+a),t.extent||o.data||i("Missing density extent parameter."),a=o[a];var s=t.as||["value","density"],u=t.extent||ai(o.data()),c=(u[1]-u[0])/(t.steps||100),l=si(u[0],u[1]+c/2,c).map(function(t){var e={};return e[s[0]]=t,e[s[1]]=a(t),ht(e)});this.value&&(r.rem=this.value),this.value=r.add=r.source=l}return r},Bi.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},H(Bi,zr).transform=function(t,e){var n=this.value,r=t.field,i=n[0],o=n[1],a=e.ADD;(e.changed()||e.modified(r.fields)||t.modified("field"))&&(a=e.SOURCE,i=1/0,o=-1/0),e.visit(a,function(t){var e=r(t);null!=e&&((e=+e)<i&&(i=e),o<e&&(o=e))}),this.value=[i,o]};var Gi=H(Hi,_t);function qi(t){zr.call(this,{},t),this._keys=B();var e=this._targets=[];e.active=0,e.forEach=function(t){for(var n=0,r=e.active;n<r;++n)t(e[n],n,e)}}Gi.connect=function(t){return this.targets().add(t),t.source=this},Gi.add=function(t){this.value.add.push(t)},Gi.rem=function(t){this.value.rem.push(t)},Gi.mod=function(t){this.value.mod.push(t)},Gi.init=function(t){this.value.init(t,t.NO_SOURCE)},Gi.evaluate=function(){return this.value};var Wi=H(qi,zr);function Yi(t){_t.call(this,null,Xi,t)}function Xi(t){return this.value&&!t.modified()?this.value:a(t.name)?L(t.name).map(function(t){return l(t)}):l(t.name,t.as)}function $i(t){zr.call(this,B(),t)}function Qi(t,e){return t?t.map(function(t,r){return e[r]||n(t)}):null}function Zi(t){zr.call(this,[],t)}function Ji(t){zr.call(this,[],t)}function Ki(t){zr.call(this,null,t)}function to(t){zr.call(this,[],t)}Wi.activate=function(t){this._targets[this._targets.active++]=t},Wi.subflow=function(t,e,n,r){var i,o,a=this.value,s=a.hasOwnProperty(t)&&a[t];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(o=r||(o=this._group[t])&&o.tuple,s=(i=n.dataflow).add(new Hi(n.fork(n.NO_SOURCE),this)).connect(e(i,t,o)),a[t]=s,this.activate(s)),s},Wi.transform=function(t,e){var n=e.dataflow,r=this,i=t.key,o=t.subflow,a=this._keys,s=t.modified("key");function u(t){return r.subflow(t,o,e)}return this._group=t.group||{},this._targets.active=0,e.visit(e.REM,function(t){var e=ct(t),n=a.get(e);void 0!==n&&(a.delete(e),u(n).rem(t))}),e.visit(e.ADD,function(t){var e=i(t);a.set(ct(t),e),u(e).add(t)}),s||e.modified(i.fields)?e.visit(e.MOD,function(t){var e=ct(t),n=a.get(e),r=i(t);n===r?u(r).mod(t):(a.set(e,r),u(n).rem(t),u(r).add(t))}):e.changed(e.MOD)&&e.visit(e.MOD,function(t){u(a.get(ct(t))).mod(t)}),s&&e.visit(e.REFLOW,function(t){var e=ct(t),n=a.get(e),r=i(t);n!==r&&(a.set(e,r),u(n).rem(t),u(r).add(t))}),a.empty>n.cleanThreshold&&n.runAfter(a.clean),e},H(Yi,_t),$i.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},H($i,zr).transform=function(t,e){var n=e.dataflow,r=this.value,i=e.fork(),o=i.add,a=i.rem,s=i.mod,u=t.expr,c=!0;function l(e){var n=ct(e),i=u(e,t),l=r.get(n);i&&l?(r.delete(n),o.push(e)):i||l?c&&i&&!l&&s.push(e):(r.set(n,1),a.push(e))}return e.visit(e.REM,function(t){var e=ct(t);r.has(e)?r.delete(e):a.push(t)}),e.visit(e.ADD,function(e){u(e,t)?o.push(e):r.set(ct(e),1)}),e.visit(e.MOD,l),t.modified()&&(c=!1,e.visit(e.REFLOW,l)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i},Zi.Definition={type:"Flatten",metadata:{generates:!0,source:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]},H(Zi,zr).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.fields,i=Qi(r,t.as||[]),o=i.length;return n.rem=this.value,e.visit(e.SOURCE,function(t){for(var e,a,s,u=r.map(function(e){return e(t)}),c=u.reduce(function(t,e){return Math.max(t,e.length)},0),l=0;l<c;++l){for(a=ft(t),e=0;e<o;++e)a[i[e]]=null==(s=u[e][l])?null:s;n.add.push(a)}}),this.value=n.source=n.add,n.modifies(i)},Ji.Definition={type:"Fold",metadata:{generates:!0,source:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},H(Ji,zr).transform=function(t,e){var r=e.fork(e.NO_SOURCE),i=t.fields,o=i.map(n),a=t.as||["key","value"],s=a[0],u=a[1],c=i.length;return r.rem=this.value,e.visit(e.SOURCE,function(t){for(var e,n=0;n<c;++n)(e=ft(t))[s]=o[n],e[u]=i[n](t),r.add.push(e)}),this.value=r.source=r.add,r.modifies(a)},Ki.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},H(Ki,zr).transform=function(t,e){var n=t.expr,r=t.as,i=t.modified(),o=t.initonly?e.ADD:i?e.SOURCE:e.modified(n.fields)?e.ADD_MOD:e.ADD;return i&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(r),e.visit(o,function(e){e[r]=n(e,t)})},H(to,zr).transform=function(t,e){var n,r,i,o=this.value,a=e.fork(e.ALL),s=t.size-o.length,u=t.generator;if(0<s){for(n=[];0<=--s;)n.push(i=ht(u(t))),o.push(i);a.add=a.add.length?a.materialize(a.ADD).add.concat(n):n}else r=o.slice(0,-s),a.rem=a.rem.length?a.materialize(a.REM).rem.concat(r):r,o=o.slice(-s);return a.source=this.value=o,a};var eo={value:"value",median:function(t,e){var n,r=t.length,i=-1,o=[];if(null==e)for(;++i<r;)isNaN(n=oi(t[i]))||o.push(n);else for(;++i<r;)isNaN(n=oi(e(t[i],i,t)))||o.push(n);return mi(o.sort(ti),.5)},mean:function(t,e){var n,r=t.length,i=r,o=-1,a=0;if(null==e)for(;++o<r;)isNaN(n=oi(t[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=oi(e(t[o],o,t)))?--i:a+=n;if(i)return a/i},min:function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n<=n)for(r=n;++o<i;)null!=(n=t[o])&&n<r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n<=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n<r&&(r=n);return r},max:gi},no=[];function ro(t){zr.call(this,[],t)}function io(t){Ai.call(this,t)}ro.Definition={type:"Impute",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},H(ro,zr).transform=function(t,e){var r,o,a,s,u,c,l,h,f,d,p,m=e.fork(e.ALL),g=function(t){var e,n=t.method||eo.value;if(null!=eo[n])return n===eo.value?(e=void 0!==t.value?t.value:0,function(){return e}):eo[n];i("Unrecognized imputation method: "+n)}(t),v=(p=t.field,function(t){return t?p(t):NaN}),y=n(t.field),w=n(t.key),x=(t.groupby||[]).map(n),b=function(t,e,n,r){var i,o,a,s,u,c,l,h,f=function(t){return t(h)},d=[],p=r?r.slice():[],m={},g={};for(p.forEach(function(t,e){m[t]=e+1}),s=0,l=t.length;s<l;++s)c=n(h=t[s]),u=m[c]||(m[c]=p.push(c)),(a=g[o=(i=e?e.map(f):no)+""])||(a=g[o]=[],d.push(a),a.values=i),a[u-1]=h;return d.domain=p,d}(e.source,t.groupby,t.key,t.keyvals),_=[],M=this.value,S=b.domain.length;for(u=0,h=b.length;u<h;++u)for(a=(r=b[u]).values,o=NaN,l=0;l<S;++l)if(null==r[l]){for(s=b.domain[l],d={_impute:!0},c=0,f=a.length;c<f;++c)d[x[c]]=a[c];d[w]=s,d[y]=isNaN(o)?o=g(r,v):o,_.push(ht(d))}return _.length&&(m.add=m.materialize(m.ADD).add.concat(_)),M.length&&(m.rem=m.materialize(m.REM).rem.concat(M)),this.value=_,m},io.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Wr},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var oo=H(io,Ai);function ao(t){_t.call(this,null,so,t)}function so(t){return this.value&&!t.modified()?this.value:X(t.fields,t.flat)}function uo(t){zr.call(this,{},t)}function co(t){_t.call(this,null,lo,t)}function lo(t){if(this.value&&!t.modified())return this.value;var e,n,r,i=1/0,o=-1/0,a=t.extents;for(e=0,n=a.length;e<n;++e)(r=a[e])[0]<i&&(i=r[0]),r[1]>o&&(o=r[1]);return[i,o]}function ho(t){_t.call(this,null,fo,t)}function fo(t){return this.value&&!t.modified()?this.value:t.values.reduce(function(t,e){return t.concat(e)},[])}function po(t){zr.call(this,null,t)}function mo(t){Ai.call(this,t)}oo.transform=function(t,e){var n,r=this,i=t.modified();return r.value&&(i||e.modified(r._inputs))?(n=r.value=i?r.init(t):{},e.visit(e.SOURCE,function(t){r.add(t)})):(n=r.value=r.value||this.init(t),e.visit(e.REM,function(t){r.rem(t)}),e.visit(e.ADD,function(t){r.add(t)})),r.changes(),e.visit(e.SOURCE,function(t){U(t,n[r.cellkey(t)].tuple)}),e.reflow(i).modifies(this._outputs)},oo.changes=function(){var t,e,n=this._adds,r=this._mods;for(t=0,e=this._alen;t<e;++t)this.celltuple(n[t]),n[t]=null;for(t=0,e=this._mlen;t<e;++t)this.celltuple(r[t]),r[t]=null;this._alen=this._mlen=0},H(ao,_t),uo.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},H(uo,zr).transform=function(t,e){var r,o,a=e,s=t.as,u=t.fields,c=t.index,l=t.values,h=null==t.default?null:t.default,f=t.modified(),d=f?e.SOURCE:e.ADD,p=u.length;return l?(o=l.length,1<p&&!s&&i('Multi-field lookup requires explicit "as" parameter.'),s&&s.length!==p*o&&i('The "as" parameter has too few output field names.'),s=s||l.map(n),r=function(t){for(var e,n,r=0,i=0;r<p;++r)if(null==(n=c.get(u[r](t))))for(e=0;e<o;++e,++i)t[s[i]]=h;else for(e=0;e<o;++e,++i)t[s[i]]=l[e](n)}):(s||i("Missing output field names."),r=function(t){for(var e,n=0;n<p;++n)e=c.get(u[n](t)),t[s[n]]=null==e?h:e}),f?a=e.reflow(!0):d|=u.some(function(t){return e.modified(t.fields)})?e.MOD:0,e.visit(d,r),a.modifies(s)},H(co,_t),H(ho,_t),H(po,zr),po.prototype.transform=function(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)},mo.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Wr,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var go=H(mo,Ai);function vo(t){qi.call(this,t)}function yo(t){zr.call(this,null,t)}function wo(t){zr.call(this,null,t)}function xo(t){zr.call(this,null,t)}function bo(t){zr.call(this,[],t),this.count=0}function _o(t){zr.call(this,null,t)}function Mo(t){zr.call(this,null,t),this.modified(!0)}function So(t){zr.call(this,B(),t)}function Eo(t){zr.call(this,null,t)}go._transform=go.transform,go.transform=function(t,n){return this._transform((o=n,a=(i=t).field,s=i.value,u=("count"===i.op?"__count__":i.op)||"sum",c=r(a).concat(r(s)),h=a,f=i.limit||0,p={},m=[],(d=o).visit(d.SOURCE,function(t){var e=h(t);p[e]||(p[e]=1,m.push(e))}),m.sort(function(t,e){return(t<e||null==t)&&null!=e?-1:(e<t||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e==e?-1:e!=e&&t==t?1:0)}),l=f?m.slice(0,f):m,{key:i.key,groupby:i.groupby,ops:l.map(function(){return u}),fields:l.map(function(t){return r=a,i=s,e(function(t){return r(t)===n?i(t):NaN},c,(n=t)+"");var n,r,i}),as:l.map(function(t){return t+""}),modified:i.modified.bind(i)}),n);var i,o,a,s,u,c,l,h,f,d,p,m},H(vo,qi).transform=function(t,e){var n=this,o=t.subflow,a=t.field;return(t.modified("field")||a&&e.modified(r(a)))&&i("PreFacet does not support field modification."),this._targets.active=0,e.visit(e.MOD,function(t){var r=n.subflow(ct(t),o,e,t);a?a(t).forEach(function(t){r.mod(t)}):r.mod(t)}),e.visit(e.ADD,function(t){var r=n.subflow(ct(t),o,e,t);a?a(t).forEach(function(t){r.add(ht(t))}):r.add(t)}),e.visit(e.REM,function(t){var r=n.subflow(ct(t),o,e,t);a?a(t).forEach(function(t){r.rem(t)}):r.rem(t)}),e},yo.Definition={type:"Project",metadata:{generates:!0,changes:!0,modifies:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},H(yo,zr).transform=function(t,e){var n,r,i=t.fields,o=Qi(t.fields,t.as||[]),a=i?function(t,e){return function(t,e,n,r){for(var i=0,o=n.length;i<o;++i)e[r[i]]=n[i](t);return e}(t,e,i,o)}:dt;return this.value?r=this.value:(e=e.addAll(),r=this.value={}),n=e.fork(e.NO_SOURCE),e.visit(e.REM,function(t){var e=ct(t);n.rem.push(r[e]),r[e]=null}),e.visit(e.ADD,function(t){var e=a(t,ht({}));r[ct(t)]=e,n.add.push(e)}),e.visit(e.MOD,function(t){n.mod.push(a(t,r[ct(t)]))}),n},H(wo,zr).transform=function(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},H(xo,zr).transform=function(t,e){var n,r;return this.value?r=this.value:(n=e=e.addAll(),r=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,function(t){var e=ct(t);n.rem.push(r[e]),r[e]=null}),e.visit(e.ADD,function(t){var e=ft(t);r[ct(t)]=e,n.add.push(e)}),e.visit(e.MOD,function(t){n.mod.push(dt(t,r[ct(t)]))})),n},bo.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},H(bo,zr).transform=function(e,n){var r=n.fork(n.NO_SOURCE),i=e.modified("size"),o=e.size,a=this.value,s=this.count,u=0,c=a.reduce(function(t,e){return t[ct(e)]=1,t},{});function l(e){var n,i;a.length<o?a.push(e):(i=~~((s+1)*t.random()))<a.length&&u<=i&&(c[ct(n=a[i])]&&r.rem.push(n),a[i]=e),++s}if(n.rem.length&&(n.visit(n.REM,function(t){var e=ct(t);c[e]&&(c[e]=-1,r.rem.push(t)),--s}),a=a.filter(function(t){return-1!==c[ct(t)]})),(n.rem.length||i)&&a.length<o&&n.source&&(u=s=a.length,n.visit(n.SOURCE,function(t){c[ct(t)]||l(t)}),u=-1),i&&a.length>o){for(var h=0,f=a.length-o;h<f;++h)c[ct(a[h])]=-1,r.rem.push(a[h]);a=a.slice(f)}return n.mod.length&&n.visit(n.MOD,function(t){c[ct(t)]&&r.mod.push(t)}),n.add.length&&n.visit(n.ADD,l),(n.add.length||u<0)&&(r.add=a.filter(function(t){return!c[ct(t)]})),this.count=s,this.value=r.source=a,r},_o.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1}],output:["value"]},H(_o,zr).transform=function(t,e){if(!this.value||t.modified()){var n=e.materialize().fork(e.MOD);return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=si(t.start,t.stop,t.step||1).map(ht),n.add=e.add.concat(this.value),n}},H(Mo,zr).transform=function(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},H(So,zr).transform=function(t,e){var n=e.dataflow,r=t.field,i=this.value,o=!0;function a(t){i.set(r(t),t)}return t.modified("field")||e.modified(r.fields)?(i.clear(),e.visit(e.SOURCE,a)):e.changed()?(e.visit(e.REM,function(t){i.delete(r(t))}),e.visit(e.ADD,a)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),e.fork()},H(Eo,zr).transform=function(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(t.sort):e.source).map(t.field))};var To={row_number:function(){return{next:function(t){return t.index+1}}},rank:function(){var t;return{init:function(){t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?t=n+1:t}}},dense_rank:function(){var t;return{init:function(){t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?++t:t}}},percent_rank:function(){var t=To.rank(),e=t.next;return{init:t.init,next:function(t){return(e(t)-1)/(t.data.length-1)}}},cume_dist:function(){var t;return{init:function(){t=0},next:function(e){var n=e.index,r=e.data,i=e.compare;if(t<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;t=n}return(1+t)/r.length}}},ntile:function(t,e){0<(e=+e)||i("ntile num must be greater than zero.");var n=To.cume_dist(),r=n.next;return{init:n.init,next:function(t){return Math.ceil(e*r(t))}}},lag:function(t,e){return e=+e||1,{next:function(n){var r=n.index-e;return 0<=r?t(n.data[r]):null}}},lead:function(t,e){return e=+e||1,{next:function(n){var r=n.index+e,i=n.data;return r<i.length?t(i[r]):null}}},first_value:function(t){return{next:function(e){return t(e.data[e.i0])}}},last_value:function(t){return{next:function(e){return t(e.data[e.i1-1])}}},nth_value:function(t,e){return 0<(e=+e)||i("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(e-1);return r<n.i1?t(n.data[r]):null}}}},Ao=Object.keys(To);function Co(t){var e=L(t.ops),o=L(t.fields),a=L(t.params),s=L(t.as),u=this.outputs=[],c=this.windows=[],l={},h={},f=!0,d=[],m=[];function g(t){L(r(t)).forEach(function(t){l[t]=1})}g(t.sort),e.forEach(function(t,e){var r,l,v=o[e],y=n(v),w=Gr(t,y,s[e]);if(g(v),u.push(w),To.hasOwnProperty(t))c.push((r=w,{init:(l=To[t](o[e],a[e])).init||p,update:function(t,e){e[r]=l.next(t)}}));else{if(null==v&&"count"!==t&&i("Null aggregate field specified."),"count"===t)return void d.push(w);f=!1;var x=h[y];x||((x=h[y]=[]).field=v,m.push(x)),x.push(Yr(t,w))}}),(d.length||m.length)&&(this.cell=function(t,e,n){t=t.map(function(t){return Qr(t,t.field)});var r={num:0,agg:null,store:!1,count:e};if(!n)for(var i=t.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new t[a](r);if(r.store)var s=r.data=new Ei;return r.add=function(t){if(r.num+=1,!n){s&&s.add(t);for(var e=0;e<i;++e)o[e].add(o[e].get(t),t)}},r.rem=function(t){if(r.num-=1,!n){s&&s.rem(t);for(var e=0;e<i;++e)o[e].rem(o[e].get(t),t)}},r.set=function(t){var i,a;for(s&&s.values(),i=0,a=e.length;i<a;++i)t[e[i]]=r.num;if(!n)for(i=0,a=o.length;i<a;++i)o[i].set(t)},r.init=function(){r.num=0,s&&s.reset();for(var t=0;t<i;++t)o[t].init()},r}(m,d,f)),this.inputs=Object.keys(l)}var ko=Co.prototype;function Ro(t){zr.call(this,{},t),this._mlen=0,this._mods=[]}ko.init=function(){this.windows.forEach(function(t){t.init()}),this.cell&&this.cell.init()},ko.update=function(t,e){var n,r=this.cell,i=this.windows,o=t.data,a=i&&i.length;if(r){for(n=t.p0;n<t.i0;++n)r.rem(o[n]);for(n=t.p1;n<t.i1;++n)r.add(o[n]);r.set(e)}for(n=0;n<a;++n)i[n].update(t,e)},Ro.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ao.concat(Wr)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var Oo=H(Ro,zr);function Po(t,e,n){var r=n.sort,i=r&&!n.ignorePeers,o=n.frame||[null,0],a=t.data(r),s=a.length,u=0,c=i?ei(r):null,l={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:r||F(-1)};for(e.init();u<s;++u)Do(l,o,u,s),i&&Lo(l,c),e.update(l,a[u])}function Do(t,e,n,r){t.p0=t.i0,t.p1=t.i1,t.i0=null==e[0]?0:Math.max(0,n-Math.abs(e[0])),t.i1=null==e[1]?r:Math.min(r,n+Math.abs(e[1])+1),t.index=n}function Lo(t,e){var n=t.i0,r=t.i1-1,i=t.compare,o=t.data,a=o.length-1;0<n&&!i(o[n],o[n-1])&&(t.i0=e.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(t.i1=e.right(o,o[r]))}Oo.transform=function(t,e){var n,r,i=this,o=i.state,a=t.modified();this.stamp=e.stamp,o&&!a||(o=i.state=new Co(t));var s=Hr(t.groupby);function u(t){return i.group(s(t))}for(a||e.modified(o.inputs)?(i.value={},e.visit(e.SOURCE,function(t){u(t).add(t)})):(e.visit(e.REM,function(t){u(t).remove(t)}),e.visit(e.ADD,function(t){u(t).add(t)})),n=0,r=i._mlen;n<r;++n)Po(i._mods[n],o,t);return i._mlen=0,i._mods=[],e.reflow(a).modifies(o.outputs)},Oo.group=function(t){var e=this.value[t];return e||((e=this.value[t]=Oi(ct)).stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e};var No=Object.freeze({aggregate:Ai,bin:ki,collect:Pi,compare:Di,countpattern:Ni,cross:Fi,density:ji,extent:Bi,facet:qi,field:Yi,filter:$i,flatten:Zi,fold:Ji,formula:Ki,generate:to,impute:ro,joinaggregate:io,key:ao,lookup:uo,multiextent:co,multivalues:ho,params:po,pivot:mo,prefacet:vo,project:yo,proxy:wo,relay:xo,sample:bo,sequence:_o,sieve:Mo,subflow:Hi,tupleindex:So,values:Eo,window:Ro});function Io(t){this.clear(),t&&this.union(t)}var Fo=Io.prototype;Fo.clone=function(){return new Io(this)},Fo.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},Fo.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},Fo.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},Fo.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},Fo.expand=function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},Fo.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},Fo.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},Fo.rotate=function(t,e,n){var r=Math.cos(t),i=Math.sin(t),o=e-e*r+n*i,a=n-e*i-n*r,s=this.x1,u=this.x2,c=this.y1,l=this.y2;return this.clear().add(r*s-i*c+o,i*s+r*c+a).add(r*s-i*l+o,i*s+r*l+a).add(r*u-i*c+o,i*u+r*c+a).add(r*u-i*l+o,i*u+r*l+a)},Fo.union=function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},Fo.intersect=function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},Fo.encloses=function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},Fo.alignsWith=function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},Fo.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},Fo.contains=function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},Fo.width=function(){return this.x2-this.x1},Fo.height=function(){return this.y2-this.y1};var zo,Uo=0,jo=function(t,e){var n,r=[];return n={id:"gradient_"+Uo++,x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(t,e){return r.push({offset:t,color:e}),n}}};function Vo(t){this.mark=t,this.bounds=this.bounds||new Io}function Bo(t){Vo.call(this,t),this.items=this.items||[]}H(Bo,Vo);try{if(!(zo=require("canvas")))throw 1}catch(h){try{zo=require("canvas-prebuilt")}catch(h){zo=null}}function Ho(t,e){return function(t,e){if("undefined"!=typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}(t,e)||function(t,e){if(zo)try{return new zo(t,e)}catch(t){}return null}(t,e)||null}function Go(t){this._pending=0,this._loader=t||te()}var qo=Go.prototype;function Wo(t){t._pending+=1}function Yo(t){t._pending-=1}qo.pending=function(){return this._pending},qo.sanitizeURL=function(t){var e=this;return Wo(e),e._loader.sanitize(t,{context:"href"}).then(function(t){return Yo(e),t}).catch(function(){return Yo(e),null})},qo.loadImage=function(t){var e=this,n=("undefined"!=typeof Image?Image:null)||zo&&zo.Image||null;return Wo(e),e._loader.sanitize(t,{context:"image"}).then(function(t){var r=t.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){Yo(e),i.loaded=!0},i.onerror=function(){Yo(e),i.loaded=!1},i.src=r,i}).catch(function(t){return Yo(e),{loaded:!1,width:0,height:0,src:t&&t.url||""}})},qo.ready=function(){var t=this;return new Promise(function(e){!function n(r){t.pending()?setTimeout(function(){n(!0)},10):e(r)}(!1)})};var Xo=Math.PI,$o=2*Xo,Qo=1e-6,Zo=$o-Qo;function Jo(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ko(){return new Jo}Jo.prototype=Ko.prototype={constructor:Jo,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){var o=this._x1,a=this._y1,s=(n=+n)-(t=+t),u=(r=+r)-(e=+e),c=o-t,l=a-e,h=c*c+l*l;if((i=+i)<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(Qo<h)if(Math.abs(l*s-u*c)>Qo&&i){var f=n-o,d=r-a,p=s*s+u*u,m=f*f+d*d,g=Math.sqrt(p),v=Math.sqrt(h),y=i*Math.tan((Xo-Math.acos((p+h-m)/(2*g*v)))/2),w=y/v,x=y/g;Math.abs(w-1)>Qo&&(this._+="L"+(t+w*c)+","+(e+w*l)),this._+="A"+i+","+i+",0,0,"+ +(c*d<l*f)+","+(this._x1=t+x*s)+","+(this._y1=e+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,o){t=+t,e=+e;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,l=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>Qo||Math.abs(this._y1-c)>Qo)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%$o+$o),Zo<h?this._+="A"+n+","+n+",0,1,"+l+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):Qo<h&&(this._+="A"+n+","+n+",0,"+ +(Xo<=h)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var ta=function(t){return function(){return t}},ea=Math.abs,na=Math.atan2,ra=Math.cos,ia=Math.max,oa=Math.min,aa=Math.sin,sa=Math.sqrt,ua=1e-12,ca=Math.PI,la=ca/2,ha=2*ca;function fa(t){return 1<=t?la:t<=-1?-la:Math.asin(t)}function da(t){return t.innerRadius}function pa(t){return t.outerRadius}function ma(t){return t.startAngle}function ga(t){return t.endAngle}function va(t){return t&&t.padAngle}function ya(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=(a?o:-o)/sa(s*s+u*u),l=c*u,h=-c*s,f=t+l,d=e+h,p=n+l,m=r+h,g=(f+p)/2,v=(d+m)/2,y=p-f,w=m-d,x=y*y+w*w,b=i-o,_=f*m-p*d,M=(w<0?-1:1)*sa(ia(0,b*b*x-_*_)),S=(_*w-y*M)/x,E=(-_*y-w*M)/x,T=(_*w+y*M)/x,A=(-_*y+w*M)/x,C=S-g,k=E-v,R=T-g,O=A-v;return R*R+O*O<C*C+k*k&&(S=T,E=A),{cx:S,cy:E,x01:-l,y01:-h,x11:S*(i/b-1),y11:E*(i/b-1)}}function wa(t){this._context=t}wa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var xa=function(t){return new wa(t)};function ba(t){return t[0]}function _a(t){return t[1]}var Ma=function(){var t=ba,e=_a,n=ta(!0),r=null,i=xa,o=null;function a(a){var s,u,c,l=a.length,h=!1;for(null==r&&(o=i(c=Ko())),s=0;s<=l;++s)!(s<l&&n(u=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(u,s,a),+e(u,s,a));if(c)return o=null,c+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:ta(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:ta(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:ta(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a},Sa=function(){var t=ba,e=null,n=ta(0),r=_a,i=ta(!0),o=null,a=xa,s=null;function u(u){var c,l,h,f,d,p=u.length,m=!1,g=new Array(p),v=new Array(p);for(null==o&&(s=a(d=Ko())),c=0;c<=p;++c){if(!(c<p&&i(f=u[c],c,u))===m)if(m=!m)l=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=c-1;l<=h;--h)s.point(g[h],v[h]);s.lineEnd(),s.areaEnd()}m&&(g[c]=+t(f,c,u),v[c]=+n(f,c,u),s.point(e?+e(f,c,u):g[c],r?+r(f,c,u):v[c]))}if(d)return s=null,d+""||null}function c(){return Ma().defined(i).curve(a).context(o)}return u.x=function(n){return arguments.length?(t="function"==typeof n?n:ta(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:ta(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:ta(+t),u):e},u.y=function(t){return arguments.length?(n="function"==typeof t?t:ta(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"==typeof t?t:ta(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:ta(+t),u):r},u.lineX0=u.lineY0=function(){return c().x(t).y(n)},u.lineY1=function(){return c().x(t).y(r)},u.lineX1=function(){return c().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:ta(!!t),u):i},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u},Ea={draw:function(t,e){var n=Math.sqrt(e/ca);t.moveTo(n,0),t.arc(0,0,n,0,ha)}},Ta=function(){};function Aa(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ca(t){this._context=t}function ka(t){this._context=t}function Ra(t){this._context=t}function Oa(t,e){this._basis=new Ca(t),this._beta=e}Ca.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Aa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Aa(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ka.prototype={areaStart:Ta,areaEnd:Ta,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Aa(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Ra.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Aa(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Oa.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(0<n)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)this._basis.point(this._beta*t[u]+(1-this._beta)*(i+(r=u/n)*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Pa=function t(e){function n(t){return 1===e?new Ca(t):new Oa(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Da(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function La(t,e){this._context=t,this._k=(1-e)/6}La.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Da(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Da(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Na=function t(e){function n(t){return new La(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Ia(t,e){this._context=t,this._k=(1-e)/6}Ia.prototype={areaStart:Ta,areaEnd:Ta,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Da(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Fa=function t(e){function n(t){return new Ia(t,e)}return n.tension=function(e){return t(+e)},n}(0);function za(t,e){this._context=t,this._k=(1-e)/6}za.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Da(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ua=function t(e){function n(t){return new za(t,e)}return n.tension=function(e){return t(+e)},n}(0);function ja(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>ua){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>ua){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Va(t,e){this._context=t,this._alpha=e}Va.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ja(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ba=function t(e){function n(t){return e?new Va(t,e):new La(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ha(t,e){this._context=t,this._alpha=e}Ha.prototype={areaStart:Ta,areaEnd:Ta,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ja(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ga=function t(e){function n(t){return e?new Ha(t,e):new Ia(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function qa(t,e){this._context=t,this._alpha=e}qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ja(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Wa=function t(e){function n(t){return e?new qa(t,e):new za(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ya(t){this._context=t}function Xa(t){return t<0?-1:1}function $a(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Xa(o)+Xa(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Qa(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Za(t,e,n){var r=t._x0,i=t._x1,o=t._y1,a=(i-r)/3;t._context.bezierCurveTo(r+a,t._y0+a*e,i-a,o-a*n,i,o)}function Ja(t){this._context=t}function Ka(t){this._context=new ts(t)}function ts(t){this._context=t}function es(t){this._context=t}function ns(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(o[i[0]=0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)o[e]-=n=i[e]/o[e-1],a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;0<=e;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function rs(t,e){this._context=t,this._t=e}Ya.prototype={areaStart:Ta,areaEnd:Ta,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Ja.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Za(this,this._t0,Qa(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Za(this,Qa(this,n=$a(this,t,e)),n);break;default:Za(this,this._t0,n=$a(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Ka.prototype=Object.create(Ja.prototype)).point=function(t,e){Ja.prototype.point.call(this,e,t)},ts.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},es.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=ns(t),i=ns(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},rs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var is={basis:{curve:function(t){return new Ca(t)}},"basis-closed":{curve:function(t){return new ka(t)}},"basis-open":{curve:function(t){return new Ra(t)}},bundle:{curve:Pa,tension:"beta",value:.85},cardinal:{curve:Na,tension:"tension",value:0},"cardinal-open":{curve:Ua,tension:"tension",value:0},"cardinal-closed":{curve:Fa,tension:"tension",value:0},"catmull-rom":{curve:Ba,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Ga,tension:"alpha",value:.5},"catmull-rom-open":{curve:Wa,tension:"alpha",value:.5},linear:{curve:xa},"linear-closed":{curve:function(t){return new Ya(t)}},monotone:{horizontal:function(t){return new Ka(t)},vertical:function(t){return new Ja(t)}},natural:{curve:function(t){return new es(t)}},step:{curve:function(t){return new rs(t,.5)}},"step-after":{curve:function(t){return new rs(t,1)}},"step-before":{curve:function(t){return new rs(t,0)}}};function os(t,e,n){var r=is.hasOwnProperty(t)&&is[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var as={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},ss=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],us=function(t){var e,n,r,i,o,a,s,u,c,l,h,f=[];for(u=0,l=(e=t.slice().replace(ss[0],"###$1").split(ss[1]).slice(1)).length;u<l;++u){for(r=(n=e[u]).slice(1).trim().replace(ss[2],"$1###$2").split(ss[3]),i=[a=n.charAt(0)],c=0,h=r.length;c<h;++c)(o=+r[c])===o&&i.push(o);if(s=as[a.toLowerCase()],i.length-1>s)for(c=1,h=i.length;c<h;c+=s)f.push([a].concat(i.slice(c,c+s)));else f.push(i)}return f},cs={},ls={},hs=[].join;function fs(t){var e=hs.call(t);if(ls[e])return ls[e];var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=c*a,h=-u*s,f=u*a,d=c*s,p=Math.cos(i),m=Math.sin(i),g=Math.cos(o),v=Math.sin(o),y=.5*(o-i),w=Math.sin(.5*y),x=8/3*w*w/Math.sin(y),b=n+p-x*m,_=r+m+x*p,M=n+g,S=r+v,E=M+x*v,T=S-x*g;return ls[e]=[l*b+h*_,f*b+d*_,l*E+h*T,f*E+d*T,l*M+h*S,f*M+d*S]}var ds=["l",0,0,0,0,0,0,0];function ps(t,e){var n=ds[0]=t[0];if("a"===n||"A"===n)ds[1]=e*t[1],ds[2]=e*t[2],ds[6]=e*t[6],ds[7]=e*t[7];else for(var r=1,i=t.length;r<i;++r)ds[r]=e*t[r];return ds}var ms=function(t,e,n,r,i){var o,a,s,u,c,l=null,h=0,f=0,d=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),t.beginPath&&t.beginPath();for(var m=0,g=e.length;m<g;++m){switch(o=e[m],1!==i&&(o=ps(o,i)),o[0]){case"l":t.lineTo((h+=o[1])+n,(f+=o[2])+r);break;case"L":t.lineTo((h=o[1])+n,(f=o[2])+r);break;case"h":t.lineTo((h+=o[1])+n,f+r);break;case"H":t.lineTo((h=o[1])+n,f+r);break;case"v":t.lineTo(h+n,(f+=o[1])+r);break;case"V":t.lineTo(h+n,(f=o[1])+r);break;case"m":t.moveTo((h+=o[1])+n,(f+=o[2])+r);break;case"M":t.moveTo((h=o[1])+n,(f=o[2])+r);break;case"c":t.bezierCurveTo(h+o[1]+n,f+o[2]+r,(d=h+o[3])+n,(p=f+o[4])+r,(a=h+o[5])+n,(s=f+o[6])+r),h=a,f=s;break;case"C":t.bezierCurveTo(o[1]+n,o[2]+r,(d=o[3])+n,(p=o[4])+r,(h=o[5])+n,(f=o[6])+r);break;case"s":t.bezierCurveTo((d=2*h-d)+n,(p=2*f-p)+r,h+o[1]+n,f+o[2]+r,(a=h+o[3])+n,(s=f+o[4])+r),d=h+o[1],p=f+o[2],h=a,f=s;break;case"S":t.bezierCurveTo((d=2*h-d)+n,(p=2*f-p)+r,o[1]+n,o[2]+r,(a=o[3])+n,(s=o[4])+r),h=a,f=s,d=o[1],p=o[2];break;case"q":t.quadraticCurveTo((d=h+o[1])+n,(p=f+o[2])+r,(a=h+o[3])+n,(s=f+o[4])+r),h=a,f=s;break;case"Q":t.quadraticCurveTo(o[1]+n,o[2]+r,(a=o[3])+n,(s=o[4])+r),h=a,f=s,d=o[1],p=o[2];break;case"t":a=h+o[1],s=f+o[2],null===l[0].match(/[QqTt]/)?(d=h,p=f):"t"===l[0]?(d=2*h-u,p=2*f-c):"q"===l[0]&&(d=2*h-d,p=2*f-p),u=d,c=p,t.quadraticCurveTo(d+n,p+r,a+n,s+r),d=(h=a)+o[1],p=(f=s)+o[2];break;case"T":t.quadraticCurveTo((d=2*h-d)+n,(p=2*f-p)+r,(a=o[1])+n,(s=o[2])+r),h=a,f=s;break;case"a":gs(t,h+n,f+r,[o[1],o[2],o[3],o[4],o[5],o[6]+h+n,o[7]+f+r]),h+=o[6],f+=o[7];break;case"A":gs(t,h+n,f+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),h=o[6],f=o[7];break;case"z":case"Z":t.closePath()}l=o}};function gs(t,e,n,r){for(var i=function(t,e,n,r,i,o,a,s,u){var c=hs.call(arguments);if(cs[c])return cs[c];var l=a*(Math.PI/180),h=Math.sin(l),f=Math.cos(l),d=f*(s-t)*.5+h*(u-e)*.5,p=f*(u-e)*.5-h*(s-t)*.5,m=d*d/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);1<m&&(n*=m=Math.sqrt(m),r*=m);var g=f/n,v=h/n,y=-h/r,w=f/r,x=g*s+v*u,b=y*s+w*u,_=g*t+v*e,M=y*t+w*e,S=1/((_-x)*(_-x)+(M-b)*(M-b))-.25;S<0&&(S=0);var E=Math.sqrt(S);o==i&&(E=-E);var T=.5*(x+_)-E*(M-b),A=.5*(b+M)+E*(_-x),C=Math.atan2(b-A,x-T),k=Math.atan2(M-A,_-T)-C;k<0&&1===o?k+=2*Math.PI:0<k&&0===o&&(k-=2*Math.PI);for(var R=Math.ceil(Math.abs(k/(.5*Math.PI+.001))),O=[],P=0;P<R;++P)O[P]=[T,A,C+P*k/R,C+(P+1)*k/R,n,r,h,f];return cs[c]=O}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n),o=0;o<i.length;++o){var a=fs(i[o]);t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}var vs=2*Math.PI,ys=Math.sqrt(3)/2,ws={circle:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,vs)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=ys*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=ys*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=ys*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=ys*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}}};function xs(t){return ws.hasOwnProperty(t)?ws[t]:function(t){if(!bs.hasOwnProperty(t)){var e=us(t);bs[t]={draw:function(t,n){ms(t,e,0,0,Math.sqrt(n)/2)}}}return bs[t]}(t)}var bs={};function _s(t){return t.x}function Ms(t){return t.y}function Ss(t){return t.width}function Es(t){return t.height}function Ts(t){return function(){return t}}var As=function(){var t=_s,e=Ms,n=Ss,r=Es,i=Ts(0),o=null;function a(a,s,u){var c,l=null!=s?s:+t.call(this,a),h=null!=u?u:+e.call(this,a),f=+n.call(this,a),d=+r.call(this,a),p=+i.call(this,a);if(o||(o=c=Ko()),p<=0)o.rect(l,h,f,d);else{var m=l+f,g=h+d;o.moveTo(l+p,h),o.lineTo(m-p,h),o.quadraticCurveTo(m,h,m,h+p),o.lineTo(m,g-p),o.quadraticCurveTo(m,g,m-p,g),o.lineTo(l+p,g),o.quadraticCurveTo(l,g,l,g-p),o.lineTo(l,h+p),o.quadraticCurveTo(l,h,l+p,h),o.closePath()}if(c)return o=null,c+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:Ts(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:Ts(+t),a):e},a.width=function(t){return arguments.length?(n="function"==typeof t?t:Ts(+t),a):n},a.height=function(t){return arguments.length?(r="function"==typeof t?t:Ts(+t),a):r},a.cornerRadius=function(t){return arguments.length?(i="function"==typeof t?t:Ts(+t),a):i},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a},Cs=Math.PI,ks=function(){var t,e,n,r,i,o,a,s,u=null;function c(t,e,n){var r=n/2;if(i){var c=a-e,l=t-o;if(c||l){var h=Math.sqrt(c*c+l*l),f=(c/=h)*s,d=(l/=h)*s,p=Math.atan2(l,c);u.moveTo(o-f,a-d),u.lineTo(t-c*r,e-l*r),u.arc(t,e,r,p-Cs,p),u.lineTo(o+f,a+d),u.arc(o,a,s,p,p+Cs)}else u.arc(t,e,r,0,2*Cs);u.closePath()}else i=1;o=t,a=e,s=r}function l(o){var a,s,l,h=o.length,f=!1;for(null==u&&(u=l=Ko()),a=0;a<=h;++a)!(a<h&&r(s=o[a],a,o))===f&&(f=!f)&&(i=0),f&&c(+t(s,a,o),+e(s,a,o),+n(s,a,o));if(l)return u=null,l+""||null}return l.x=function(e){return arguments.length?(t=e,l):t},l.y=function(t){return arguments.length?(e=t,l):e},l.size=function(t){return arguments.length?(n=t,l):n},l.defined=function(t){return arguments.length?(r=t,l):r},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l};function Rs(t){return t.x||0}function Os(t){return t.y||0}function Ps(t){return t.cornerRadius||0}function Ds(t){return!(!1===t.defined)}var Ls=function(){var t=da,e=pa,n=ta(0),r=null,i=ma,o=ga,a=va,s=null;function u(){var u,c,l,h,f,d,p,m,g,v,y,w,x=+t.apply(this,arguments),b=+e.apply(this,arguments),_=i.apply(this,arguments)-la,M=o.apply(this,arguments)-la,S=ea(M-_),E=_<M;if(s||(s=u=Ko()),b<x&&(c=b,b=x,x=c),ua<b)if(ha-ua<S)s.moveTo(b*ra(_),b*aa(_)),s.arc(0,0,b,_,M,!E),ua<x&&(s.moveTo(x*ra(M),x*aa(M)),s.arc(0,0,x,M,_,E));else{var T,A,C=_,k=M,R=_,O=M,P=S,D=S,L=a.apply(this,arguments)/2,N=ua<L&&(r?+r.apply(this,arguments):sa(x*x+b*b)),I=oa(ea(b-x)/2,+n.apply(this,arguments)),F=I,z=I;if(ua<N){var U=fa(N/x*aa(L)),j=fa(N/b*aa(L));(P-=2*U)>ua?(R+=U*=E?1:-1,O-=U):(P=0,R=O=(_+M)/2),(D-=2*j)>ua?(C+=j*=E?1:-1,k-=j):(D=0,C=k=(_+M)/2)}var V=b*ra(C),B=b*aa(C),H=x*ra(O),G=x*aa(O);if(ua<I){var q=b*ra(k),W=b*aa(k),Y=x*ra(R),X=x*aa(R);if(S<ca){var $=ua<P?[(h=V)+(w=((v=H-(d=q))*((f=B)-(p=W))-(y=G-p)*(h-d))/(y*(m=Y-h)-v*(g=X-f)))*m,f+w*g]:[H,G],Q=V-$[0],Z=B-$[1],J=q-$[0],K=W-$[1],tt=1/aa((1<(l=(Q*J+Z*K)/(sa(Q*Q+Z*Z)*sa(J*J+K*K)))?0:l<-1?ca:Math.acos(l))/2),et=sa($[0]*$[0]+$[1]*$[1]);F=oa(I,(x-et)/(tt-1)),z=oa(I,(b-et)/(tt+1))}}ua<D?ua<z?(T=ya(Y,X,V,B,b,z,E),A=ya(q,W,H,G,b,z,E),s.moveTo(T.cx+T.x01,T.cy+T.y01),z<I?s.arc(T.cx,T.cy,z,na(T.y01,T.x01),na(A.y01,A.x01),!E):(s.arc(T.cx,T.cy,z,na(T.y01,T.x01),na(T.y11,T.x11),!E),s.arc(0,0,b,na(T.cy+T.y11,T.cx+T.x11),na(A.cy+A.y11,A.cx+A.x11),!E),s.arc(A.cx,A.cy,z,na(A.y11,A.x11),na(A.y01,A.x01),!E))):(s.moveTo(V,B),s.arc(0,0,b,C,k,!E)):s.moveTo(V,B),ua<x&&ua<P?ua<F?(T=ya(H,G,q,W,x,-F,E),A=ya(V,B,Y,X,x,-F,E),s.lineTo(T.cx+T.x01,T.cy+T.y01),F<I?s.arc(T.cx,T.cy,F,na(T.y01,T.x01),na(A.y01,A.x01),!E):(s.arc(T.cx,T.cy,F,na(T.y01,T.x01),na(T.y11,T.x11),!E),s.arc(0,0,x,na(T.cy+T.y11,T.cx+T.x11),na(A.cy+A.y11,A.cx+A.x11),E),s.arc(A.cx,A.cy,F,na(A.y11,A.x11),na(A.y01,A.x01),!E))):s.arc(0,0,x,O,R,E):s.lineTo(H,G)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-ca/2;return[ra(r)*n,aa(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:ta(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:ta(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:ta(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:ta(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:ta(+t),u):i},u.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:ta(+t),u):o},u.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:ta(+t),u):a},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u}().startAngle(function(t){return t.startAngle||0}).endAngle(function(t){return t.endAngle||0}).padAngle(function(t){return t.padAngle||0}).innerRadius(function(t){return t.innerRadius||0}).outerRadius(function(t){return t.outerRadius||0}).cornerRadius(Ps),Ns=Sa().x(Rs).y1(Os).y0(function(t){return(t.y||0)+(t.height||0)}).defined(Ds),Is=Sa().y(Os).x1(Rs).x0(function(t){return(t.x||0)+(t.width||0)}).defined(Ds),Fs=Ma().x(Rs).y(Os).defined(Ds),zs=As().x(Rs).y(Os).width(function(t){return t.width||0}).height(function(t){return t.height||0}).cornerRadius(Ps),Us=function(){var t=ta(Ea),e=ta(64),n=null;function r(){var r;if(n||(n=r=Ko()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:ta(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:ta(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r}().type(function(t){return xs(t.shape||"circle")}).size(function(t){return null==t.size?64:t.size}),js=ks().x(Rs).y(Os).defined(Ds).size(function(t){return t.size||1});function Vs(t,e,n,r){return zs.context(t)(e,n,r)}var Bs,Hs=function(t,e){return e.stroke&&0!==e.opacity&&0!==e.strokeOpacity&&t.expand(null!=e.strokeWidth?+e.strokeWidth:1),t},Gs=2*Math.PI,qs=Gs/4,Ws=Gs-1e-8;function Ys(t){return Bs=t,Ys}function Xs(){}function $s(t,e){Bs.add(t,e)}Ys.beginPath=Xs,Ys.closePath=Xs,Ys.moveTo=$s,Ys.lineTo=$s,Ys.rect=function(t,e,n,r){$s(t,e),$s(t+n,e+r)},Ys.quadraticCurveTo=function(t,e,n,r){$s(t,e),$s(n,r)},Ys.bezierCurveTo=function(t,e,n,r,i,o){$s(t,e),$s(n,r),$s(i,o)},Ys.arc=function(t,e,n,r,i,o){if(Math.abs(i-r)>Ws)return $s(t-n,e-n),void $s(t+n,e+n);var a,s,u,c,l=1/0,h=-1/0,f=1/0,d=-1/0;function p(t){u=n*Math.cos(t),c=n*Math.sin(t),u<l&&(l=u),h<u&&(h=u),c<f&&(f=c),d<c&&(d=c)}if(p(r),p(i),i!==r)if((r%=Gs)<0&&(r+=Gs),(i%=Gs)<0&&(i+=Gs),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=Gs,a=r-r%qs,s=0;s<4&&i<a;++s,a-=qs)p(a);else for(a=r-r%qs+qs,s=0;s<4&&a<i;++s,a+=qs)p(a);$s(t+l,e+f),$s(t+h,e+d)};var Qs=function(t,e,n){return n.id?function(t,e,n){for(var r=n.width(),i=n.height(),o=e.stops,a=0,s=o.length,u=t.createLinearGradient(n.x1+e.x1*r,n.y1+e.y1*i,n.x1+e.x2*r,n.y1+e.y2*i);a<s;++a)u.addColorStop(o[a].offset,o[a].color);return u}(t,n,e.bounds):n},Zs=function(t,e,n){return 0<(n*=null==e.fillOpacity?1:e.fillOpacity)&&(t.globalAlpha=n,t.fillStyle=Qs(t,e,e.fill),!0)},Js=[],Ks=function(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&0<(n*=null==e.strokeOpacity?1:e.strokeOpacity)&&(t.globalAlpha=n,t.strokeStyle=Qs(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||Js),t.lineDashOffset=e.strokeDashOffset||0),!0)};function tu(t,e){return t.zindex-e.zindex||t.index-e.index}function eu(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,o=[];for(n=0,r=i.length;n<r;++n)(e=i[n]).index=n,e.zindex&&o.push(e);return t.zdirty=!1,t.zitems=o.sort(tu)}function nu(t,e){var n,r,i=t.items;if(i&&i.length){var o=eu(t);if(o&&o.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=o}for(n=0,r=i.length;n<r;++n)e(i[n])}}function ru(t,e){var n,r,i=t.items;if(!i||!i.length)return null;var o=eu(t);for(o&&o.length&&(i=o),r=i.length;0<=--r;)if(n=e(i[r]))return n;if(i===o)for(r=(i=t.items).length;0<=--r;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function iu(t){return function(e,n,r){nu(n,function(n){r&&!r.intersects(n.bounds)||ou(t,e,n,n)})}}function ou(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(n.fill&&Zs(e,n,i)&&e.fill(),n.stroke&&Ks(e,n,i)&&e.stroke()))}var au=function(){return!0};function su(t){return t||(t=au),function(e,n,r,i,o,a){return 1<e.pixelRatio&&(r*=e.pixelRatio,i*=e.pixelRatio),ru(n,function(n){var s=n.bounds;if((!s||s.contains(o,a))&&s)return t(e,n,r,i,o,a)?n:void 0})}}function uu(t,e){return function(n,r,i,o){var a,s,u=Array.isArray(r)?r[0]:r,c=null==e?u.fill:e,l=u.stroke&&n.isPointInStroke;return l&&(s=u.strokeCap,n.lineWidth=null!=(a=u.strokeWidth)?a:1,n.lineCap=null!=s?s:"butt"),!t(n,r)&&(c&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o))}}function cu(t){return su(uu(t))}var lu=function(t,e){return"translate("+t+","+e+")"},hu=function(t){return lu(t.x||0,t.y||0)},fu=function(t,e){function n(t,n){var r=n.x||0,i=n.y||0;t.translate(r,i),t.beginPath(),e(t,n),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:function(t,n){t("transform",hu(n)),t("d",e(null,n))},bound:function(t,n){return e(Ys(t),n),Hs(t,n).translate(n.x||0,n.y||0)},draw:iu(n),pick:cu(n)}},du=fu("arc",function(t,e){return Ls.context(t)(e)}),pu=function(t,e){function n(t,n){t.beginPath(),e(t,n)}var r,i=uu(n);return{type:t,tag:"path",nested:!0,attr:function(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))},bound:function(t,n){var r=n.items;return 0===r.length?t:(e(Ys(t),r),Hs(t,r[0]))},draw:(r=n,function(t,e,n){!e.items.length||n&&!n.intersects(e.bounds)||ou(r,t,e.items[0],e.items)}),pick:function(t,e,n,r,o,a){var s=e.items,u=e.bounds;return!s||!s.length||u&&!u.contains(o,a)?null:(1<t.pixelRatio&&(n*=t.pixelRatio,r*=t.pixelRatio),i(t,s,n,r)?s[0]:null)}}},mu=pu("area",function(t,e){var n=e[0];return("horizontal"===n.orient?Is:Ns).curve(os(n.interpolate||"linear",n.orient,n.tension)).context(t)(e)}),gu=1,vu=function(t,e,n){var r=e.clip,i=t._defs,o=e.clip_id||(e.clip_id="clip"+gu++),a=i.clipping[o]||(i.clipping[o]={id:o});return N(r)?a.path=r(null):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"},yu={type:"group",tag:"g",nested:!1,attr:function(t,e){t("transform",hu(e))},bound:function(t,e){if(!e.clip&&e.items)for(var n=e.items,r=0,i=n.length;r<i;++r)t.union(n[r].bounds);return(e.clip||e.width||e.height)&&Hs(t.add(0,0).add(e.width||0,e.height||0),e),t.translate(e.x||0,e.y||0)},draw:function(t,e,n){var r=this;nu(e,function(e){var i,o,a=e.x||0,s=e.y||0,u=e.width||0,c=e.height||0;t.save(),t.translate(a,s),(e.stroke||e.fill)&&0<(o=null==e.opacity?1:e.opacity)&&(t.beginPath(),Vs(t,e,i=e.stroke?.5:0,i),e.fill&&Zs(t,e,o)&&t.fill(),e.stroke&&Ks(t,e,o)&&t.stroke()),e.clip&&(t.beginPath(),t.rect(0,0,u,c),t.clip()),n&&n.translate(-a,-s),nu(e,function(e){r.draw(t,e,n)}),n&&n.translate(a,s),t.restore()})},pick:function(t,e,n,r,i,o){if(e.bounds&&!e.bounds.contains(i,o)||!e.items)return null;var a=this;return ru(e,function(s){var u,c,l,h;if(!(h=s.bounds)||h.contains(i,o))return c=s.x||0,l=s.y||0,t.save(),t.translate(c,l),c=i-c,l=o-l,u=ru(s,function(t){return(!1!==(e=t).interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(c,l)?a.pick(t,n,r,c,l):null;var e}),t.restore(),u||((u=!1!==e.interactive&&(s.fill||s.stroke)&&0<=c&&c<=s.width&&0<=l&&l<=s.height)?s:null)})},background:function(t,e){var n=e.stroke?.5:0;t("class","background"),t("d",Vs(null,e,n,n))},foreground:function(t,e,n){t("clip-path",e.clip?vu(n,e,e):null)}};function wu(t,e){var n=t.image;return n&&n.url===t.url||(n={loaded:!1,width:0,height:0},e.loadImage(t.url).then(function(e){t.image=e,t.image.url=t.url})),n}function xu(t,e){return"center"===t?e/2:"right"===t?e:0}function bu(t,e){return"middle"===t?e/2:"bottom"===t?e:0}var _u={type:"image",tag:"image",nested:!1,attr:function(t,e,n){var r=wu(e,n),i=e.x||0,o=e.y||0,a=(null!=e.width?e.width:r.width)||0,s=(null!=e.height?e.height:r.height)||0,u=!1===e.aspect?"none":"xMidYMid";i-=xu(e.align,a),o-=bu(e.baseline,s),t("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),t("transform",lu(i,o)),t("width",a),t("height",s),t("preserveAspectRatio",u)},bound:function(t,e){var n=e.image,r=e.x||0,i=e.y||0,o=(null!=e.width?e.width:n&&n.width)||0,a=(null!=e.height?e.height:n&&n.height)||0;return r-=xu(e.align,o),i-=bu(e.baseline,a),t.set(r,i,r+o,i+a)},draw:function(t,e,n){var r=this;nu(e,function(e){if(!n||n.intersects(e.bounds)){var i,o,a,s,u=wu(e,r),c=e.x||0,l=e.y||0,h=(null!=e.width?e.width:u.width)||0,f=(null!=e.height?e.height:u.height)||0;c-=xu(e.align,h),l-=bu(e.baseline,f),!1!==e.aspect&&(a=e.width/e.height,(o=u.width/u.height)==o&&a==a&&o!==a&&(a<o?(l+=(f-(s=h/o))/2,f=s):(c+=(h-(s=f*o))/2,h=s))),u.loaded&&(t.globalAlpha=null!=(i=e.opacity)?i:1,t.drawImage(u,c,l,h,f))}})},pick:su(),get:wu,xOffset:xu,yOffset:bu},Mu=pu("line",function(t,e){var n=e[0];return Fs.curve(os(n.interpolate||"linear",n.orient,n.tension)).context(t)(e)});function Su(t,e){var n=e.path;if(null==n)return!0;var r=e.pathCache;r&&r.path===n||((e.pathCache=r=us(n)).path=n),ms(t,r,e.x,e.y)}var Eu={type:"path",tag:"path",nested:!1,attr:function(t,e){t("transform",hu(e)),t("d",e.path)},bound:function(t,e){return Su(Ys(t),e)?t.set(0,0,0,0):Hs(t,e)},draw:iu(Su),pick:cu(Su)};function Tu(t,e){t.beginPath(),Vs(t,e)}var Au={type:"rect",tag:"path",nested:!1,attr:function(t,e){t("d",Vs(null,e))},bound:function(t,e){var n,r;return Hs(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)},draw:iu(Tu),pick:cu(Tu)};function Cu(t,e,n){var r,i,o,a;return!(!e.stroke||!Ks(t,e,n)||(r=e.x||0,i=e.y||0,o=null!=e.x2?e.x2:r,a=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(o,a),0))}var ku,Ru,Ou={type:"rule",tag:"line",nested:!1,attr:function(t,e){t("transform",hu(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)},bound:function(t,e){var n,r;return Hs(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)},draw:function(t,e,n){nu(e,function(e){if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&Cu(t,e,r)&&t.stroke()}})},pick:su(function(t,e,n,r){return!!t.isPointInStroke&&Cu(t,e,1)&&t.isPointInStroke(n,r)})},Pu=fu("shape",function(t,e){return(e.mark.shape||e.shape).context(t)(e)}),Du=fu("symbol",function(t,e){return Us.context(t)(e)}),Lu={height:Uu,measureWidth:Fu,estimateWidth:Nu,width:Nu,canvas:ju};function Nu(t){return Ru=Uu(t),Iu(Vu(t))}function Iu(t){return~~(.8*t.length*Ru)}function Fu(t){return ku.font=Bu(t),zu(Vu(t))}function zu(t){return ku.measureText(t).width}function Uu(t){return null!=t.fontSize?t.fontSize:11}function ju(t){ku=t&&(ku=Ho(1,1))?ku.getContext("2d"):null,Lu.width=ku?Fu:Nu}function Vu(t){var e=t.text;return null==e?"":0<t.limit?function(t){var e,n=+t.limit,r=t.text+"";if(ku?(ku.font=Bu(t),e=zu):(Ru=Uu(t),e=Iu),e(r)<n)return r;var i,o=t.ellipsis||"\u2026",a="rtl"===t.dir,s=0,u=r.length;if(n-=e(o),a){for(;s<u;)e(r.slice(i=s+u>>>1))>n?s=i+1:u=i;return o+r.slice(s)}for(;s<u;)e(r.slice(0,i=1+(s+u>>>1)))<n?s=i:u=i-1;return r.slice(0,s)+o}(t):e+""}function Bu(t,e){var n=t.font;return e&&n&&(n=String(n).replace(/"/g,"'")),(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Uu(t)+"px "+(n||"sans-serif")}function Hu(t){var e=t.baseline,n=Uu(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:0)}ju(!0);var Gu={left:"start",center:"middle",right:"end"},qu=new Io;function Wu(t,e,n){var r,i,o=Lu.height(e),a=e.align,s=e.radius||0,u=e.x||0,c=e.y||0,l=e.dx||0,h=(e.dy||0)+Hu(e)-Math.round(.8*o);return s&&(i=(e.theta||0)-Math.PI/2,u+=s*Math.cos(i),c+=s*Math.sin(i)),r=Lu.width(e),"center"===a?l-=r/2:"right"===a&&(l-=r),t.set(l+=u,h+=c,l+r,h+o),e.angle&&!n&&t.rotate(e.angle*Math.PI/180,u,c),t.expand(n||!r?0:1)}var Yu={arc:du,area:mu,group:yu,image:_u,line:Mu,path:Eu,rect:Au,rule:Ou,shape:Pu,symbol:Du,text:{type:"text",tag:"text",nested:!1,attr:function(t,e){var n,r=e.dx||0,i=(e.dy||0)+Hu(e),o=e.x||0,a=e.y||0,s=e.angle||0,u=e.radius||0;u&&(n=(e.theta||0)-Math.PI/2,o+=u*Math.cos(n),a+=u*Math.sin(n)),t("text-anchor",Gu[e.align]||"start"),s?(n=lu(o,a)+" rotate("+s+")",(r||i)&&(n+=" "+lu(r,i))):n=lu(o+r,a+i),t("transform",n)},bound:Wu,draw:function(t,e,n){nu(e,function(e){var r,i,o,a,s,u;n&&!n.intersects(e.bounds)||(u=Vu(e))&&0!==(r=null==e.opacity?1:e.opacity)&&(t.font=Bu(e),t.textAlign=e.align||"left",i=e.x||0,o=e.y||0,(a=e.radius)&&(s=(e.theta||0)-Math.PI/2,i+=a*Math.cos(s),o+=a*Math.sin(s)),e.angle&&(t.save(),t.translate(i,o),t.rotate(e.angle*Math.PI/180),i=o=0),i+=e.dx||0,o+=(e.dy||0)+Hu(e),e.fill&&Zs(t,e,r)&&t.fillText(u,i,o),e.stroke&&Ks(t,e,r)&&t.strokeText(u,i,o),e.angle&&t.restore())})},pick:su(function(t,e,n,r,i,o){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var a=Wu(qu,e,!0),s=-e.angle*Math.PI/180,u=Math.cos(s),c=Math.sin(s),l=e.x,h=e.y;return a.contains(u*i-c*o+(l-l*u+h*c),c*i+u*o+(h-l*c-h*u))})},trail:pu("trail",function(t,e){return js.context(t)(e)})},Xu=function(t,e,n){var r=Yu[t.mark.marktype];return r.nested&&(t=t.mark),(e||r.bound)(t.bounds||(t.bounds=new Io),t,n)},$u={mark:null},Qu=function(t,e,n){var r,i,o,a,s=Yu[t.marktype],u=s.bound,c=t.items,l=c&&c.length;if(s.nested)return l?o=c[0]:($u.mark=t,o=$u),a=Xu(o,u,n),e&&e.union(a)||a;if(e=e||t.bounds&&t.bounds.clear()||new Io,l)for(r=0,i=c.length;r<i;++r)e.union(Xu(c[r],u,n));return t.bounds=e},Zu=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function Ju(t,e){return JSON.stringify(t,Zu,e)}function Ku(t){return function t(e){var n,r,i,o=e.marktype,a=e.items;if(a)for(r=0,i=a.length;r<i;++r)a[r][n=o?"mark":"group"]=e,a[r].zindex&&(a[r][n].zdirty=!0),"group"===(o||n)&&t(a[r]);return o&&Qu(e),e}("string"==typeof t?JSON.parse(t):t)}function tc(t){arguments.length?this.root=Ku(t):(this.root=nc({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Bo(this.root)])}var ec=tc.prototype;function nc(t,e){return{bounds:new Io,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0}}function rc(t,e,n){return!t&&"undefined"!=typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function ic(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function oc(t,e,n,r){var i,o=t.childNodes[e];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(i=o||null,o=rc(t.ownerDocument,n,r),t.insertBefore(o,i)),o}function ac(t,e){for(var n=t.childNodes,r=n.length;e<r;)t.removeChild(n[--r]);return t}function sc(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function uc(t){this._active=null,this._handlers={},this._loader=t||te()}ec.toJSON=function(t){return Ju(this.root,t||0)},ec.mark=function(t,e,n){var r=nc(t,e=e||this.root.items[0]);return(e.items[n]=r).zindex&&(r.group.zdirty=!0),r};var cc=uc.prototype;function lc(t){this._el=null,this._bgcolor=null,this._loader=new Go(t)}cc.initialize=function(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},cc.element=function(){return this._el},cc.origin=function(t){return this._origin=t||[0,0],this},cc.scene=function(t){return arguments.length?(this._scene=t,this):this._scene},cc.on=function(){},cc.off=function(){},cc._handlerIndex=function(t,e,n){for(var r=t?t.length:0;0<=--r;)if(t[r].type===e&&!n||t[r].handler===n)return r;return-1},cc.handlers=function(){var t,e=this._handlers,n=[];for(t in e)n.push.apply(n,e[t]);return n},cc.eventName=function(t){var e=t.indexOf(".");return e<0?t:t.slice(0,e)},cc.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then(function(e){var n=new MouseEvent(t.type,t),r=rc(null,"a");for(var i in e)r.setAttribute(i,e[i]);r.dispatchEvent(n)}).catch(function(){})},cc.handleTooltip=function(t,e,n){this._el.setAttribute("title",n||"")};var hc=lc.prototype;hc.initialize=function(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},hc.element=function(){return this._el},hc.scene=function(){return this._el&&this._el.firstChild},hc.background=function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},hc.resize=function(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},hc.dirty=function(){},hc.render=function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},hc._render=function(){},hc.renderAsync=function(t){var e=this.render(t);return this._ready?this._ready.then(function(){return e}):Promise.resolve(e)},hc._load=function(t,e){var n=this,r=n._loader[t](e);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(t){t&&i(),n._ready=null})}return r},hc.sanitizeURL=function(t){return this._load("sanitizeURL",t)},hc.loadImage=function(t){return this._load("loadImage",t)};var fc=function(t,e){var n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]};function dc(t){uc.call(this,t),this._down=null,this._touch=null,this._first=!0}var pc=H(dc,uc);function mc(t,e,n){return function(r){var i=this._active,o=this.pickEvent(r);o===i||(i&&i.exit||this.fire(n,r),this._active=o,this.fire(e,r)),this.fire(t,r)}}function gc(t){return function(e){this.fire(t,e),this._active=null}}pc.initialize=function(t,e,n){var r=this._canvas=t&&ic(t,"canvas");if(r){var i=this;this.events.forEach(function(t){r.addEventListener(t,function(e){pc[t]?pc[t].call(i,e):i.fire(t,e)})})}return uc.prototype.initialize.call(this,t,e,n)},pc.canvas=function(){return this._canvas},pc.context=function(){return this._canvas.getContext("2d")},pc.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],pc.DOMMouseScroll=function(t){this.fire("mousewheel",t)},pc.mousemove=mc("mousemove","mouseover","mouseout"),pc.dragover=mc("dragover","dragenter","dragleave"),pc.mouseout=gc("mouseout"),pc.dragleave=gc("dragleave"),pc.mousedown=function(t){this._down=this._active,this.fire("mousedown",t)},pc.click=function(t){this._down===this._active&&(this.fire("click",t),this._down=null)},pc.touchstart=function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",t,!0)},pc.touchmove=function(t){this.fire("touchmove",t,!0)},pc.touchend=function(t){this.fire("touchend",t,!0),this._touch=null},pc.fire=function(t,e,n){var r,i,o=n?this._touch:this._active,a=this._handlers[t];if("click"===t&&o&&o.href?this.handleHref(e,o,o.href):("mouseover"===t||"mouseout"===t)&&o&&o.tooltip&&this.handleTooltip(e,o,"mouseover"===t?o.tooltip:null),a)for(e.vegaType=t,r=0,i=a.length;r<i;++r)a[r].handler.call(this._obj,e,o)},pc.on=function(t,e){var n=this.eventName(t),r=this._handlers;return this._handlerIndex(r[n],t,e)<0&&(r[n]||(r[n]=[])).push({type:t,handler:e}),this},pc.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return 0<=i&&r.splice(i,1),this},pc.pickEvent=function(t){var e=fc(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},pc.pick=function(t,e,n,r,i){var o=this.context();return Yu[t.marktype].pick.call(this,o,t,e,n,r,i)};var vc="undefined"!=typeof window&&window.devicePixelRatio||1;function yc(t){lc.call(this,t),this._redraw=!1,this._dirty=new Io}var wc=H(yc,lc),xc=lc.prototype,bc=new Io;function _c(t){uc.call(this,t);var e=this;e._hrefHandler=Sc(e,function(t,n){n&&n.href&&e.handleHref(t,n,n.href)}),e._tooltipHandler=Sc(e,function(t,n){n&&n.tooltip&&e.handleTooltip(t,n,"mouseover"===t.type?n.tooltip:null)})}wc.initialize=function(t,e,n,r,i){return this._canvas=Ho(1,1),t&&(ac(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),xc.initialize.call(this,t,e,n,r,i)},wc.resize=function(t,e,n,r){var i,o,a,s,u,c,l,h;return xc.resize.call(this,t,e,n,r),i=this._canvas,o=this._width,a=this._height,s=this._origin,u=this._scale,c="undefined"!=typeof HTMLElement&&i instanceof HTMLElement&&null!=i.parentNode,l=i.getContext("2d"),i.width=o*(h=c?vc:u),i.height=a*h,c&&1!==h&&(i.style.width=o+"px",i.style.height=a+"px"),l.pixelRatio=h,l.setTransform(h,0,0,h,h*s[0],h*s[1]),this._redraw=!0,this},wc.canvas=function(){return this._canvas},wc.context=function(){return this._canvas?this._canvas.getContext("2d"):null},wc.dirty=function(t){var e=function(t,e){if(null==e)return t;for(var n=bc.clear().union(t);null!=e;e=e.mark.group)n.translate(e.x||0,e.y||0);return n}(t.bounds,t.mark.group);this._dirty.union(e)},wc._render=function(t){var e,n,r,i=this.context(),o=this._origin,a=this._width,s=this._height,u=this._dirty;return i.save(),this._redraw||u.empty()?(this._redraw=!1,u=null):(e=i,r=o,(n=u).expand(1).round(),n.translate(-r[0]%1,-r[1]%1),e.beginPath(),e.rect(n.x1,n.y1,n.width(),n.height()),e.clip(),u=n),this.clear(-o[0],-o[1],a,s),this.draw(i,t,u),i.restore(),this._dirty.clear(),this},wc.draw=function(t,e,n){var r=Yu[e.marktype];e.clip&&function(t,e){var n=e.clip;if(t.save(),t.beginPath(),N(n))n(t);else{var r=e.group;t.rect(0,0,r.width||0,r.height||0)}t.clip()}(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},wc.clear=function(t,e,n,r){var i=this.context();i.clearRect(t,e,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(t,e,n,r))};var Mc=H(_c,uc);function Sc(t,e){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,e.call(t._obj,n,r)}}function Ec(t,e,n){var r,i,o="<"+t;if(e)for(r in e)null!=(i=e[r])&&(o+=" "+r+'="'+i+'"');return n&&(o+=" "+n),o+">"}function Tc(t){return"</"+t+">"}Mc.initialize=function(t,e,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mouseover",this._tooltipHandler),r.removeEventListener("mouseout",this._tooltipHandler)),this._svg=r=t&&ic(t,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mouseover",this._tooltipHandler),r.addEventListener("mouseout",this._tooltipHandler)),uc.prototype.initialize.call(this,t,e,n)},Mc.svg=function(){return this._svg},Mc.on=function(t,e){var n=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[n],t,e)<0){var i={type:t,handler:e,listener:Sc(this,e)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},Mc.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return 0<=i&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var Ac={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Cc={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},kc=Object.keys(Cc),Rc=Ac.xmlns;function Oc(t){lc.call(this,t),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var Pc=H(Oc,lc),Dc=lc.prototype;function Lc(t,e,n){var r,i,o;for((t=oc(t,n,"linearGradient",Rc)).setAttribute("id",e.id),t.setAttribute("x1",e.x1),t.setAttribute("x2",e.x2),t.setAttribute("y1",e.y1),t.setAttribute("y2",e.y2),r=0,i=e.stops.length;r<i;++r)(o=oc(t,r,"stop",Rc)).setAttribute("offset",e.stops[r].offset),o.setAttribute("stop-color",e.stops[r].color);ac(t,r)}function Nc(t,e,n){var r;(t=oc(t,n,"clipPath",Rc)).setAttribute("id",e.id),e.path?(r=oc(t,0,"path",Rc)).setAttribute("d",e.path):((r=oc(t,0,"rect",Rc)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",e.width),r.setAttribute("height",e.height))}function Ic(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function Fc(t,e,n,r){var i,o=t._svg;if(!o&&(o=rc(i=e.ownerDocument,r,Rc),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},"g"===r))){var a=rc(i,"path",Rc);a.setAttribute("class","background"),o.appendChild(a),a.__data__=t;var s=rc(i,"g",Rc);o.appendChild(s),s.__data__=t}return!i&&o.previousSibling===n&&n||e.insertBefore(o,n?n.nextSibling:e.firstChild),o}Pc.initialize=function(t,e,n,r){return t&&(this._svg=oc(t,0,"svg",Rc),this._svg.setAttribute("class","marks"),ac(t,1),this._root=oc(this._svg,0,"g",Rc),ac(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),Dc.initialize.call(this,t,e,n,r)},Pc.background=function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),Dc.background.apply(this,arguments)},Pc.resize=function(t,e,n,r){return Dc.resize.call(this,t,e,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},Pc.svg=function(){if(!this._svg)return null;var t={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var e in Ac)t[e]=Ac[e];var n=this._bgcolor?Ec("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+Tc("rect"):"";return Ec("svg",t)+n+this._svg.innerHTML+Tc("svg")},Pc._render=function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,t),ac(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},Pc.updateDefs=function(){var t,e=this._svg,n=this._defs,r=n.el,i=0;for(t in n.gradient)r||(n.el=r=oc(e,0,"defs",Rc)),Lc(r,n.gradient[t],i++);for(t in n.clipping)r||(n.el=r=oc(e,0,"defs",Rc)),Nc(r,n.clipping[t],i++);r&&(0===i?(e.removeChild(r),n.el=null):ac(r,i))},Pc._resetDefs=function(){var t=this._defs;t.gradient={},t.clipping={}},Pc.dirty=function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},Pc.isDirty=function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},Pc._dirtyCheck=function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length)return!0;var e,n,r,i,o,a,s,u=++this._dirtyID;for(o=0,a=t.length;o<a;++o)(n=(e=t[o]).mark).marktype!==r&&(i=Yu[r=n.marktype]),n.zdirty&&n.dirty!==u&&(this._dirtyAll=!1,n.dirty=u,Ic(n.group,u)),e.exit?(i.nested&&n.items.length?(s=n.items[0])._svg&&this._update(i,s._svg,s):e._svg&&(s=e._svg.parentNode)&&s.removeChild(e._svg),e._svg=null):(e=i.nested?n.items[0]:e)._update!==u&&(e._svg&&e._svg.ownerSVGElement?this._update(i,e._svg,e):(this._dirtyAll=!1,Ic(e,u)),e._update=u);return!this._dirtyAll},Pc.draw=function(t,e,n){if(!this.isDirty(e))return e._svg;var r,i=this,o=Yu[e.marktype],a=!1===e.interactive?"none":null,s="g"===o.tag,u=null,c=0;function l(t){var e=i.isDirty(t),n=Fc(t,r,u,o.tag);e&&(i._update(o,n,t),s&&function(t,e,n){e=e.lastChild;var r,i=0;nu(n,function(n){r=t.draw(e,n,r),++i}),ac(e,1+i)}(i,n,t)),u=n,++c}return(r=Fc(e,t,n,"g")).setAttribute("class",sc(e)),s||r.style.setProperty("pointer-events",a),e.clip?r.setAttribute("clip-path",vu(i,e,e.group)):r.removeAttribute("clip-path"),o.nested?e.items.length&&l(e.items[0]):nu(e,l),ac(r,c),r};var zc=null,Uc=null,jc={group:function(t,e,n){Uc=e.__values__,zc=e.childNodes[1],t.foreground(Vc,n,this),zc=e.childNodes[0],t.background(Vc,n,this);var r=!1===n.mark.interactive?"none":null;r!==Uc.events&&(zc.style.setProperty("pointer-events",r),Uc.events=r)},text:function(t,e,n){var r=Vu(n);r!==Uc.text&&(e.textContent=r,Uc.text=r),(r=Bu(n))!==Uc.font&&(e.style.setProperty("font",r),Uc.font=r)}};function Vc(t,e,n){e!==Uc[t]&&(null!=e?n?zc.setAttributeNS(n,t,e):zc.setAttribute(t,e):n?zc.removeAttributeNS(n,t):zc.removeAttribute(t),Uc[t]=e)}function Bc(t){lc.call(this,t),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}Pc._update=function(t,e,n){Uc=(zc=e).__values__,t.attr(Vc,n,this);var r=jc[t.type];r&&r.call(this,t,e,n),this.style(zc,n)},Pc.style=function(t,e){var n,r,i,o,a,s;if(null!=e)for(n=0,r=kc.length;n<r;++n)(a=e[i=kc[n]])!==Uc[i]&&(o=Cc[i],null==a?"fill"===o?t.style.setProperty(o,"none"):t.style.removeProperty(o):(a.id&&(this._defs.gradient[a.id]=a,a="url("+(s=void 0,"undefined"==typeof window?"":(s=window.location).hash?s.href.slice(0,-s.hash.length):s.href)+"#"+a.id+")"),t.style.setProperty(o,a+"")),Uc[i]=a)};var Hc,Gc=H(Bc,lc),qc=lc.prototype;function Wc(t,e,n,r){Hc[r||t]=e}function Yc(t,e,n,r){if(null==t)return"";var i,o,a,s,u,c="";for("bgrect"===n&&!1===e.interactive&&(c+="pointer-events: none; "),"text"===n&&(c+="font: "+Bu(t)+"; "),i=0,o=kc.length;i<o;++i)s=Cc[a=kc[i]],null==(u=t[a])?"fill"===s&&(c+="fill: none; "):"transparent"!==u||"fill"!==s&&"stroke"!==s?(u.id&&(u="url(#"+(r.gradient[u.id]=u).id+")"),c+=s+": "+u+"; "):c+=s+": none; ";return c?'style="'+c.trim()+'"':null}Gc.resize=function(t,e,n,r){qc.resize.call(this,t,e,n,r);var i=this._origin,o=this._text,a={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var s in Ac)a[s]=Ac[s];o.head=Ec("svg",a);var u=this._bgcolor;return"transparent"!==u&&"none"!==u||(u=null),o.bg=u?Ec("rect",{width:this._width,height:this._height,style:"fill: "+u+";"})+Tc("rect"):"",o.root=Ec("g",{transform:"translate("+i+")"}),o.foot=Tc("g")+Tc("svg"),this},Gc.background=function(){var t=qc.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),t},Gc.svg=function(){var t=this._text;return t.head+t.bg+t.defs+t.root+t.body+t.foot},Gc._render=function(t){return this._text.body=this.mark(t),this._text.defs=this.buildDefs(),this},Gc.buildDefs=function(){var t,e,n,r,i=this._defs,o="";for(e in i.gradient){for(r=(n=i.gradient[e]).stops,o+=Ec("linearGradient",{id:e,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),t=0;t<r.length;++t)o+=Ec("stop",{offset:r[t].offset,"stop-color":r[t].color})+Tc("stop");o+=Tc("linearGradient")}for(e in i.clipping)n=i.clipping[e],o+=Ec("clipPath",{id:e}),o+=n.path?Ec("path",{d:n.path})+Tc("path"):Ec("rect",{x:0,y:0,width:n.width,height:n.height})+Tc("rect"),o+=Tc("clipPath");return 0<o.length?Ec("defs")+o+Tc("defs"):""},Gc.attributes=function(t,e){return Hc={},t(Wc,e,this),Hc},Gc.href=function(t){var e,n=this,r=t.href;if(r){if(e=n._hrefs&&n._hrefs[r])return e;n.sanitizeURL(r).then(function(t){t["xlink:href"]=t.href,t.href=null,(n._hrefs||(n._hrefs={}))[r]=t})}return null},Gc.mark=function(t){var e,n=this,r=Yu[t.marktype],i=r.tag,o=this._defs,a="";function s(s){var u=n.href(s);u&&(a+=Ec("a",u)),e="g"!==i?Yc(s,t,i,o):null,a+=Ec(i,n.attributes(r.attr,s),e),"text"===i?a+=Vu(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"g"===i&&(a+=Ec("path",n.attributes(r.background,s),Yc(s,t,"bgrect",o))+Tc("path"),a+=Ec("g",n.attributes(r.foreground,s))+n.markGroup(s)+Tc("g")),a+=Tc(i),u&&(a+=Tc("a"))}return"g"!==i&&!1===t.interactive&&(e='style="pointer-events: none;"'),a+=Ec("g",{class:sc(t),"clip-path":t.clip?vu(n,t,t.group):null},e),r.nested?t.items&&t.items.length&&s(t.items[0]):nu(t,s),a+Tc("g")},Gc.markGroup=function(t){var e=this,n="";return nu(t,function(t){n+=e.mark(t)}),n};var Xc={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},$c={};function Qc(t,e){return t=String(t||"").toLowerCase(),1<arguments.length?($c[t]=e,this):$c[t]}$c.canvas=$c.png={renderer:yc,headless:yc,handler:dc},$c.svg={renderer:Oc,headless:Bc,handler:_c},$c.none={};var Zc=new Io,Jc=function(t){var e=t.clip;if(N(e))e(Ys(Zc.clear()));else{if(!e)return;Zc.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(Zc)},Kc=1e-9;function tl(t,e,n){return t===e||("path"===n?el(t,e):t instanceof Date&&e instanceof Date?+t==+e:W(t)&&W(e)?Math.abs(t-e)<=Kc:t&&e&&(s(t)||s(e))?null!=t&&null!=e&&function(t,e){var n,r,i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(i.sort(),o.sort(),r=i.length-1;0<=r;r--)if(i[r]!=o[r])return!1;for(r=i.length-1;0<=r;r--)if(!tl(t[n=i[r]],e[n],n))return!1;return typeof t==typeof e}(t,e):t==e)}function el(t,e){return tl(us(t),us(e))}function nl(t){zr.call(this,null,t)}function rl(t,e,n){return e(t.bounds.clear(),t,n)}H(nl,zr).transform=function(t,e){var n,r=e.dataflow,i=t.mark,o=i.marktype,a=Yu[o],s=a.bound,u=i.bounds;return a.nested?(i.items.length&&r.dirty(i.items[0]),u=rl(i,s),i.items.forEach(function(t){t.bounds.clear().union(u)})):"group"===o||t.modified()?(e.visit(e.MOD,function(t){r.dirty(t)}),u.clear(),i.items.forEach(function(t){u.union(rl(t,s))})):(n=e.changed(e.REM),e.visit(e.ADD,function(t){u.union(rl(t,s))}),e.visit(e.MOD,function(t){n=n||u.alignsWith(t.bounds),r.dirty(t),u.union(rl(t,s))}),n&&(u.clear(),i.items.forEach(function(t){u.union(t.bounds)}))),Jc(i),e.modifies("bounds")};var il=":vega_identifier:";function ol(t){zr.call(this,0,t)}function al(t){zr.call(this,null,t)}ol.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},H(ol,zr).transform=function(t,e){var n=function(t){var e=t._signals[il];return e||(t._signals[il]=e=t.add(0)),e}(e.dataflow),r=n.value,i=t.as;return e.visit(e.ADD,function(t){t[i]||(t[i]=++r)}),n.set(this.value=r),e},H(al,zr).transform=function(t,e){var n,r,i,o=this.value;o||((o=e.dataflow.scenegraph().mark(t.markdef,(r=(n=t).groups,i=n.parent,r&&1===r.size?r.get(Object.keys(r.object)[0]):r&&i?r.lookup(i):null),t.index)).group.context=t.context,t.context.group||(t.context.group=o.group),o.source=this,o.clip=t.clip,o.interactive=t.interactive,this.value=o);var a="group"===o.marktype?Bo:Vo;return e.visit(e.ADD,function(t){a.call(t,o)}),(t.modified("clip")||t.modified("interactive"))&&(o.clip=t.clip,o.interactive=!!t.interactive,o.zdirty=!0,e.reflow()),o.items=e.source,e};var sl="top",ul="left",cl="right",ll="bottom";function hl(t){zr.call(this,null,t)}var fl={parity:function(t){return t.filter(function(t,e){return e%2?t.opacity=0:1})},greedy:function(t){var e;return t.filter(function(t,n){return n&&dl(e.bounds,t.bounds)?t.opacity=0:(e=t,1)})}};function dl(t,e){return!(t.x2-1<e.x1||t.x1+1>e.x2||t.y2-1<e.y1||t.y1+1>e.y2)}function pl(t){for(var e,n=1,r=t.length,i=t[0].bounds;n<r;i=e,++n)if(dl(i,e=t[n].bounds))return!0}function ml(t){var e=t.bounds;return 1<e.width()&&1<e.height()}function gl(t){zr.call(this,null,t)}function vl(t,e){for(var n=0,r=t.length;n<r;++n)e.push(t[n])}function yl(t){return{x1:0,y1:0,x2:t.width||0,y2:t.height||0}}function wl(t){var e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function xl(t,e){return"x1"===e?t.x||0:"y1"===e?t.y||0:"x2"===e?(t.x||0)+(t.width||0):"y2"===e?(t.y||0)+(t.height||0):void 0}function bl(t,e){return t.bounds[e]}function _l(t,e,n){var r=s(t)?t[e]:t;return null!=r?r:void 0!==n?n:0}function Ml(t){return t<0?Math.ceil(-t):0}function Sl(t,e,n,r,i,o,a,s,u,c,l,h,f,d){var p,m,g,v,y,w,x,b,_,M=n.length,S=0,E=0;if(!M)return S;for(p=l;p<M;p+=h)n[p]&&(S=a(S,u(n[p],c)));if(!e.length)return S;for(e.length>i&&(t.warn("Grid headers exceed limit: "+i),e=e.slice(0,i)),S+=o,m=0,v=e.length;m<v;++m)t.dirty(e[m]),e[m].mark.bounds.clear();for(p=l,m=0,v=e.length;m<v;++m,p+=h){for(y=(w=e[m]).mark.bounds,g=p;0<=g&&null==(x=n[g]);g-=f);s?(b=null==d?x.x:Math.round(x.bounds.x1+d*x.bounds.width()),_=S):(b=S,_=null==d?x.y:Math.round(x.bounds.y1+d*x.bounds.height())),y.union(w.bounds.translate(b-(w.x||0),_-(w.y||0))),w.x=b,w.y=_,t.dirty(w),E=a(E,y[c])}return E}function El(t,e,n,r,i,o){if(e){t.dirty(e);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),e.bounds.translate(a-(e.x||0),s-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=a,e.y=s,t.dirty(e)}}H(hl,zr).transform=function(t,e){var n=fl[t.method]||fl.parity,r=e.materialize(e.SOURCE).source;if(r){t.sort&&(r=r.slice().sort(t.sort)),"greedy"===t.method&&(r=r.filter(ml)),r.forEach(function(t){t.opacity=1});var i,o,a,s,u=r;if(3<=u.length&&pl(u)){for(e=e.reflow(t.modified()).modifies("opacity");3<=(u=n(u)).length&&pl(u););u.length<3&&!b(r).opacity&&(1<u.length&&(b(u).opacity=0),b(r).opacity=1)}if(t.boundScale){var c=(i=t.boundOrient,o=t.boundTolerance,a=t.boundScale.range(),s=new Io,i===sl||i===ll?s.set(a[0],-1/0,a[1],1/0):s.set(-1/0,a[0],1/0,a[1]),s.expand(o||1),function(t){return s.encloses(t.bounds)});r.forEach(function(t){c(t)||(t.opacity=0)})}return e}},H(gl,zr).transform=function(t,e){var n=e.dataflow;if(e.visit(e.ALL,function(t){n.dirty(t)}),e.fields&&e.fields.zindex){var r=e.source&&e.source[0];r&&(r.mark.zdirty=!0)}};var Tl=.5,Al=new Io;function Cl(t){zr.call(this,null,t)}function kl(t,e,n){return t[e]===n?0:(t[e]=n,1)}function Rl(t){var e=t.items[0].datum.orient;return e===ul||e===cl}function Ol(t,e,n,r){var i,o,a,s,u=e.items[0],c=u.datum,l=c.orient,h=(s=+(a=c).grid,[a.ticks?s++:-1,a.labels?s++:-1,s+ +a.domain]),f=u.range,d=u.offset,p=u.position,m=u.minExtent,g=u.maxExtent,v=c.title&&u.items[h[2]].items[0],y=u.titlePadding,w=u.bounds,x=0,b=0;switch(Al.clear().union(w),w.clear(),-1<(i=h[0])&&w.union(u.items[i].bounds),-1<(i=h[1])&&w.union(u.items[i].bounds),l){case sl:x=p||0,b=-d,o=Math.max(m,Math.min(g,-w.y1)),v&&(v.auto?(v.y=-(o+=y),o+=v.bounds.height(),w.add(v.bounds.x1,0).add(v.bounds.x2,0)):w.union(v.bounds)),w.add(0,-o).add(f,0);break;case ul:x=-d,b=p||0,o=Math.max(m,Math.min(g,-w.x1)),v&&(v.auto?(v.x=-(o+=y),o+=v.bounds.width(),w.add(0,v.bounds.y1).add(0,v.bounds.y2)):w.union(v.bounds)),w.add(-o,0).add(0,f);break;case cl:x=n+d,b=p||0,o=Math.max(m,Math.min(g,w.x2)),v&&(v.auto?(v.x=o+=y,o+=v.bounds.width(),w.add(0,v.bounds.y1).add(0,v.bounds.y2)):w.union(v.bounds)),w.add(0,0).add(o,f);break;case ll:x=p||0,b=r+d,o=Math.max(m,Math.min(g,w.y2)),v&&(v.auto?(v.y=o+=y,o+=v.bounds.height(),w.add(v.bounds.x1,0).add(v.bounds.x2,0)):w.union(v.bounds)),w.add(0,0).add(f,o);break;default:x=u.x,b=u.y}return Hs(w.translate(x,b),u),kl(u,"x",x+Tl)|kl(u,"y",b+Tl)&&(u.bounds=Al,t.dirty(u),u.bounds=w,t.dirty(u)),u.mark.bounds.clear().union(w)}function Pl(t,e,n,r,i,o,a){var s,u,c,l=e.items[0],h=l.datum.orient,f=l.offset,d=l.bounds,p=0,m=0;switch(h===sl||h===ll?(c=i,p=n[h]):h!==ul&&h!==cl||(c=r,m=n[h]),Al.clear().union(d),d.clear(),l.items.forEach(function(t){d.union(t.bounds)}),s=Math.round(d.width())+2*l.padding-1,u=Math.round(d.height())+2*l.padding-1,h){case ul:p-=s+f-Math.floor(c.x1),n.left+=u+n.margin;break;case cl:p+=f+Math.ceil(c.x2),n.right+=u+n.margin;break;case sl:m-=u+f-Math.floor(c.y1),n.top+=s+n.margin;break;case ll:m+=f+Math.ceil(c.y2),n.bottom+=s+n.margin;break;case"top-left":p+=f,m+=f;break;case"top-right":p+=o-s-f,m+=f;break;case"bottom-left":p+=f,m+=a-u-f;break;case"bottom-right":p+=o-s-f,m+=a-u-f;break;default:p=l.x,m=l.y}return Hs(d.set(p,m,p+s,m+u),l),kl(l,"x",p)|kl(l,"width",s)|kl(l,"y",m)|kl(l,"height",u)&&(l.bounds=Al,t.dirty(l),l.bounds=d,t.dirty(l)),l.mark.bounds.clear().union(d)}H(Cl,zr).transform=function(t,e){var n=e.dataflow;return t.mark.items.forEach(function(e){t.layout&&function(t,e,n){var r,i,o,a,s,u,c,l,h,f,d,p,m,g=function(t){for(var e,n,r=t.items,i=r.length,o=0,a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};o<i;++o)if(n=(e=r[o]).items,"group"===e.marktype)switch(e.role){case"axis":case"legend":break;case"row-header":vl(n,a.rowheaders);break;case"row-footer":vl(n,a.rowfooters);break;case"column-header":vl(n,a.colheaders);break;case"column-footer":vl(n,a.colfooters);break;case"row-title":a.rowtitle=n[0];break;case"column-title":a.coltitle=n[0];break;default:vl(n,a.marks)}return a}(e),v=g.marks,y="flush"===n.bounds,w=y?yl:wl,x=new Io(0,0,0,0),b=_l(n.align,"column"),_=_l(n.align,"row"),M=_l(n.padding,"column"),S=_l(n.padding,"row"),E=n.offset,T=e.columns||n.columns||v.length,A=T<0?1:Math.ceil(v.length/T),C=A*T,k=[],R=[],O=[],P=[],D=v.length;for(i=0;i<T;++i)R[i]=0;for(i=0;i<A;++i)P[i]=0;for(i=0;i<D;++i)s=w(v[i]),a=~~(i/T),c=(o=i%T)?Math.ceil(w(v[i-1]).x2):0,l=a?Math.ceil(w(v[i-T]).y2):0,R[o]=Math.max(R[o],c),P[a]=Math.max(P[a],l),k.push(M+Ml(s.x1)),O.push(S+Ml(s.y1)),t.dirty(v[i]);for(i=0;i<D;++i)i%T==0&&(k[i]=0),i<T&&(O[i]=0);if("each"===b)for(o=1;o<T;++o){for(m=0,i=o;i<D;i+=T)m<k[i]&&(m=k[i]);for(i=o;i<D;i+=T)k[i]=m+R[o]}else if("all"===b){for(p=0,o=1;o<T;++o)p<R[o]&&(p=R[o]);for(i=m=0;i<D;++i)i%T&&m<k[i]&&(m=k[i]);for(i=0;i<D;++i)i%T&&(k[i]=m+p)}else for(o=1;o<T;++o)for(i=o;i<D;i+=T)k[i]+=R[o];if("each"===_)for(a=1;a<A;++a){for(m=0,r=(i=a*T)+T;i<r;++i)m<O[i]&&(m=O[i]);for(i=a*T;i<r;++i)O[i]=m+P[a]}else if("all"===_){for(p=0,a=1;a<A;++a)p<P[a]&&(p=P[a]);for(m=0,i=T;i<D;++i)m<O[i]&&(m=O[i]);for(i=T;i<D;++i)O[i]=m+p}else for(a=1;a<A;++a)for(r=(i=a*T)+T;i<r;++i)O[i]+=P[a];for(i=h=0;i<D;++i)c=(u=v[i]).x||0,u.x=h=k[i]+(i%T?h:0),u.bounds.translate(h-c,0);for(o=0;o<T;++o)for(f=0,i=o;i<D;i+=T)l=(u=v[i]).y||0,u.y=f+=O[i],u.bounds.translate(0,f-l);for(i=0;i<D;++i)v[i].mark.bounds.clear();for(i=0;i<D;++i)t.dirty(u=v[i]),x.union(u.mark.bounds.union(u.bounds));function L(t,e){return Math.floor(Math.min(t,e))}function N(t,e){return Math.ceil(Math.max(t,e))}w=y?xl:bl,d=_l(n.headerBand,"row",null),h=Sl(t,g.rowheaders,v,0,A,-_l(E,"rowHeader"),L,0,w,"x1",0,T,1,d),d=_l(n.headerBand,"column",null),f=Sl(t,g.colheaders,v,0,T,-_l(E,"columnHeader"),L,1,w,"y1",0,1,T,d),d=_l(n.footerBand,"row",null),Sl(t,g.rowfooters,v,0,A,_l(E,"rowFooter"),N,0,w,"x2",T-1,T,1,d),d=_l(n.footerBand,"column",null),Sl(t,g.colfooters,v,0,T,_l(E,"columnFooter"),N,1,w,"y2",C-T,1,T,d),g.rowtitle&&(m=h-_l(E,"rowTitle"),d=_l(n.titleBand,"row",.5),El(t,g.rowtitle,m,0,x,d)),g.coltitle&&(m=f-_l(E,"columnTitle"),d=_l(n.titleBand,"column",.5),El(t,g.coltitle,m,1,x,d))}(n,e,t.layout),function(t,e,n){var r,i,o,a,s,u,c=e.items,l=Math.max(0,e.width||0),h=Math.max(0,e.height||0),f=(new Io).set(0,0,l,h),d=f.clone(),p=f.clone(),m=f.clone(),g=[];for(s=0,u=c.length;s<u;++s)switch((i=c[s]).role){case"axis":d.union(a=Ol(t,i,l,h)),(Rl(i)?p:m).union(a);break;case"title":r=i;break;case"legend":g.push(i);break;case"frame":case"scope":case"row-header":case"row-footer":case"column-header":case"column-footer":p.union(i.bounds),m.union(i.bounds);break;default:f.union(i.bounds)}if(r&&(d.union(a=function(t,e,n){var r=e.items[0],i=r.datum.orient,o=r.offset,a=r.bounds,s=0,u=0;switch(Al.clear().union(a),i){case sl:s=r.x,u=n.y1-o;break;case ul:s=n.x1-o,u=r.y;break;case cl:s=n.x2+o,u=r.y;break;case ll:s=r.x,u=n.y2+o;break;default:s=r.x,u=r.y}return a.translate(s-r.x,u-r.y),kl(r,"x",s)|kl(r,"y",u)&&(r.bounds=Al,t.dirty(r),r.bounds=a,t.dirty(r)),e.bounds.clear().union(a)}(t,r,d)),(Rl(r)?p:m).union(a)),g.length)for(o={left:0,right:0,top:0,bottom:0,margin:n.legendMargin||8},s=0,u=g.length;s<u;++s)if(a=Pl(t,g[s],o,p,m,l,h),n.autosize&&"fit"===n.autosize.type){var v=g[s].items[0].datum.orient;v===ul||v===cl?f.add(a.x1,0).add(a.x2,0):v!==sl&&v!==ll||f.add(0,a.y1).add(0,a.y2)}else f.union(a);f.union(p).union(m).union(d),function(t,e,n,r){var i=r.autosize||{},o=i.type,a=t._width,s=t._height,u=t.padding();if(!(t._autosize<1)&&o){var c=Math.max(0,e.width||0),l=Math.max(0,Math.ceil(-n.x1)),h=Math.max(0,Math.ceil(n.x2-c)),f=Math.max(0,e.height||0),d=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.y2-f));"padding"===i.contains&&(a-=u.left+u.right,s-=u.top+u.bottom),"none"===o?(d=l=0,c=a,f=s):"fit"===o?(c=Math.max(0,a-l-h),f=Math.max(0,s-d-p)):"fit-x"===o?(c=Math.max(0,a-l-h),s=f+d+p):"fit-y"===o?(a=c+l+h,f=Math.max(0,s-d-p)):"pad"===o&&(a=c+l+h,s=f+d+p),t._resizeView(a,s,c,f,[l,d],i.resize)}}(t,e,f,n)}(n,e,t)}),e};var Dl=Object.freeze({bound:nl,identifier:ol,mark:al,overlap:hl,render:gl,viewlayout:Cl}),Ll="log",Nl="sqrt",Il="linear",Fl="ordinal",zl="quantile",Ul="quantize",jl="threshold",Vl="bin-ordinal",Bl="sequential",Hl=function(t){return function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}},Gl=function(t){return function(e){var n,r,i,o,a=t.range(),s=e[0],u=e[1],c=-1;for(u<s&&(r=s,s=u,u=r),i=0,o=a.length;i<o;++i)a[i]>=s&&a[i]<=u&&(c<0&&(c=i),n=i);if(!(c<0))return s=t.invertExtent(a[c]),u=t.invertExtent(a[n]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}},ql=function(t,e,n){var r=t-e+2*n;return t?0<r?r:1:0},Wl=Array.prototype,Yl=Wl.map,Xl=Wl.slice,$l={name:"implicit"};function Ql(t){var e=Ot(),n=[],r=$l;function i(i){var o=i+"",a=e.get(o);if(!a){if(r!==$l)return r;e.set(o,a=n.push(i))}return t[(a-1)%t.length]}return t=null==t?[]:Xl.call(t),i.domain=function(t){if(!arguments.length)return n.slice();n=[],e=Ot();for(var r,o,a=-1,s=t.length;++a<s;)e.has(o=(r=t[a])+"")||e.set(o,n.push(r));return i},i.range=function(e){return arguments.length?(t=Xl.call(e),i):t.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Ql().domain(n).range(t).unknown(r)},i}var Zl=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function Jl(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Kl(){}var th=1/.7,eh="\\s*([+-]?\\d+)\\s*",nh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",rh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ih=/^#([0-9a-f]{3})$/,oh=/^#([0-9a-f]{6})$/,ah=new RegExp("^rgb\\("+[eh,eh,eh]+"\\)$"),sh=new RegExp("^rgb\\("+[rh,rh,rh]+"\\)$"),uh=new RegExp("^rgba\\("+[eh,eh,eh,nh]+"\\)$"),ch=new RegExp("^rgba\\("+[rh,rh,rh,nh]+"\\)$"),lh=new RegExp("^hsl\\("+[nh,rh,rh]+"\\)$"),hh=new RegExp("^hsla\\("+[nh,rh,rh,nh]+"\\)$"),fh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function dh(t){var e;return t=(t+"").trim().toLowerCase(),(e=ih.exec(t))?new yh((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=oh.exec(t))?ph(parseInt(e[1],16)):(e=ah.exec(t))?new yh(e[1],e[2],e[3],1):(e=sh.exec(t))?new yh(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=uh.exec(t))?mh(e[1],e[2],e[3],e[4]):(e=ch.exec(t))?mh(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=lh.exec(t))?wh(e[1],e[2]/100,e[3]/100,1):(e=hh.exec(t))?wh(e[1],e[2]/100,e[3]/100,e[4]):fh.hasOwnProperty(t)?ph(fh[t]):"transparent"===t?new yh(NaN,NaN,NaN,0):null}function ph(t){return new yh(t>>16&255,t>>8&255,255&t,1)}function mh(t,e,n,r){return r<=0&&(t=e=n=NaN),new yh(t,e,n,r)}function gh(t){return t instanceof Kl||(t=dh(t)),t?new yh((t=t.rgb()).r,t.g,t.b,t.opacity):new yh}function vh(t,e,n,r){return 1===arguments.length?gh(t):new yh(t,e,n,null==r?1:r)}function yh(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function wh(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new bh(t,e,n,r)}function xh(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof bh)return new bh(t.h,t.s,t.l,t.opacity);if(t instanceof Kl||(t=dh(t)),!t)return new bh;if(t instanceof bh)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=0<u&&u<1?0:a,new bh(a,s,u,t.opacity)}(t):new bh(t,e,n,null==r?1:r)}function bh(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function _h(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Zl(Kl,dh,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Zl(yh,vh,Jl(Kl,{brighter:function(t){return t=null==t?th:Math.pow(th,t),new yh(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new yh(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Zl(bh,xh,Jl(Kl,{brighter:function(t){return t=null==t?th:Math.pow(th,t),new bh(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new bh(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new yh(_h(240<=t?t-240:t+120,i,r),_h(t,i,r),_h(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Mh=Math.PI/180,Sh=180/Math.PI,Eh=.95047,Th=1,Ah=1.08883,Ch=4/29,kh=6/29,Rh=3*kh*kh,Oh=kh*kh*kh;function Ph(t){if(t instanceof Lh)return new Lh(t.l,t.a,t.b,t.opacity);if(t instanceof jh){var e=t.h*Mh;return new Lh(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof yh||(t=gh(t));var n=zh(t.r),r=zh(t.g),i=zh(t.b),o=Nh((.4124564*n+.3575761*r+.1804375*i)/Eh),a=Nh((.2126729*n+.7151522*r+.072175*i)/Th);return new Lh(116*a-16,500*(o-a),200*(a-Nh((.0193339*n+.119192*r+.9503041*i)/Ah)),t.opacity)}function Dh(t,e,n,r){return 1===arguments.length?Ph(t):new Lh(t,e,n,null==r?1:r)}function Lh(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Nh(t){return Oh<t?Math.pow(t,1/3):t/Rh+Ch}function Ih(t){return kh<t?t*t*t:Rh*(t-Ch)}function Fh(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function zh(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Uh(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof jh)return new jh(t.h,t.c,t.l,t.opacity);t instanceof Lh||(t=Ph(t));var e=Math.atan2(t.b,t.a)*Sh;return new jh(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new jh(t,e,n,null==r?1:r)}function jh(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}Zl(Lh,Dh,Jl(Kl,{brighter:function(t){return new Lh(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Lh(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=Th*Ih(t),new yh(Fh(3.2404542*(e=Eh*Ih(e))-1.5371385*t-.4985314*(n=Ah*Ih(n))),Fh(-.969266*e+1.8760108*t+.041556*n),Fh(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),Zl(jh,Uh,Jl(Kl,{brighter:function(t){return new jh(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new jh(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ph(this).rgb()}}));var Vh=1.78277,Bh=-.29227,Hh=-.90649,Gh=1.97294,qh=Gh*Hh,Wh=Gh*Vh,Yh=Vh*Bh- -.14861*Hh;function Xh(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof $h)return new $h(t.h,t.s,t.l,t.opacity);t instanceof yh||(t=gh(t));var e=t.g/255,n=t.b/255,r=(Yh*n+qh*(t.r/255)-Wh*e)/(Yh+qh-Wh),i=n-r,o=(Gh*(e-r)-Bh*i)/Hh,a=Math.sqrt(o*o+i*i)/(Gh*r*(1-r)),s=a?Math.atan2(o,i)*Sh-120:NaN;return new $h(s<0?s+360:s,a,r,t.opacity)}(t):new $h(t,e,n,null==r?1:r)}function $h(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Qh(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}Zl($h,Xh,Jl(Kl,{brighter:function(t){return t=null==t?th:Math.pow(th,t),new $h(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new $h(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Mh,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new yh(255*(e+n*(-.14861*r+Vh*i)),255*(e+n*(Bh*r+Hh*i)),255*(e+n*(Gh*r)),this.opacity)}}));var Zh=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:1<=n?e-(n=1):Math.floor(n*e),i=t[r],o=t[r+1];return Qh((n-r/e)*e,0<r?t[r-1]:2*i-o,i,o,r<e-1?t[r+2]:2*o-i)}},Jh=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e);return Qh((n-r/e)*e,t[(r+e-1)%e],t[r%e],t[(r+1)%e],t[(r+2)%e])}},Kh=function(t){return function(){return t}};function tf(t,e){return function(n){return t+n*e}}function ef(t,e){var n=e-t;return n?tf(t,180<n||n<-180?n-360*Math.round(n/360):n):Kh(isNaN(t)?e:t)}function nf(t,e){var n=e-t;return n?tf(t,n):Kh(isNaN(t)?e:t)}var rf=function t(e){var n,r=1==(n=+(n=e))?nf:function(t,e){return e-t?(r=t,i=e,o=n,r=Math.pow(r,o),i=Math.pow(i,o)-r,o=1/o,function(t){return Math.pow(r+t*i,o)}):Kh(isNaN(t)?e:t);var r,i,o};function i(t,e){var n=r((t=vh(t)).r,(e=vh(e)).r),i=r(t.g,e.g),o=r(t.b,e.b),a=nf(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function of(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=vh(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var af,sf,uf,cf,lf=of(Zh),hf=of(Jh),ff=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=wf(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}},df=function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}},pf=function(t,e){return e-=t=+t,function(n){return t+e*n}},mf=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=wf(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},gf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vf=new RegExp(gf.source,"g"),yf=function(t,e){var n,r,i,o,a,s=gf.lastIndex=vf.lastIndex=0,u=-1,c=[],l=[];for(t+="",e+="";(n=gf.exec(t))&&(r=vf.exec(e));)(i=r.index)>s&&(i=e.slice(s,i),c[u]?c[u]+=i:c[++u]=i),(n=n[0])===(r=r[0])?c[u]?c[u]+=r:c[++u]=r:(c[++u]=null,l.push({i:u,x:pf(n,r)})),s=vf.lastIndex;return s<e.length&&(i=e.slice(s),c[u]?c[u]+=i:c[++u]=i),c.length<2?l[0]?(a=l[0].x,function(t){return a(t)+""}):(o=e,function(){return o}):(e=l.length,function(t){for(var n,r=0;r<e;++r)c[(n=l[r]).i]=n.x(t);return c.join("")})},wf=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?Kh(e):("number"===r?pf:"string"===r?(n=dh(e))?(e=n,rf):yf:e instanceof dh?rf:e instanceof Date?df:Array.isArray(e)?ff:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?mf:pf)(t,e)},xf=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},bf=180/Math.PI,_f={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Mf=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*bf,skewX:Math.atan(u)*bf,scaleX:a,scaleY:s}};function Sf(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s,u,c,l,h,f,d=[],p=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:pf(t,i)},{i:u-2,x:pf(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,d,p),c=d,(s=o.rotate)!==(u=a.rotate)?(180<s-u?u+=360:180<u-s&&(s+=360),p.push({i:c.push(i(c)+"rotate(",null,r)-2,x:pf(s,u)})):u&&c.push(i(c)+"rotate("+u+r),f=d,(l=o.skewX)!==(h=a.skewX)?p.push({i:f.push(i(f)+"skewX(",null,r)-2,x:pf(l,h)}):h&&f.push(i(f)+"skewX("+h+r),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:pf(t,n)},{i:s-2,x:pf(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,d,p),o=a=null,function(t){for(var e,n=-1,r=p.length;++n<r;)d[(e=p[n]).i]=e.x(t);return d.join("")}}}var Ef=Sf(function(t){return"none"===t?_f:(af||(af=document.createElement("DIV"),sf=document.documentElement,uf=document.defaultView),af.style.transform=t,t=uf.getComputedStyle(sf.appendChild(af),null).getPropertyValue("transform"),sf.removeChild(af),t=t.slice(7,-1).split(","),Mf(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Tf=Sf(function(t){return null==t?_f:(cf||(cf=document.createElementNS("http://www.w3.org/2000/svg","g")),cf.setAttribute("transform",t),(t=cf.transform.baseVal.consolidate())?Mf((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):_f)},", ",")",")"),Af=Math.SQRT2;function Cf(t){return((t=Math.exp(t))+1/t)/2}function kf(t){return function(e,n){var r=t((e=xh(e)).h,(n=xh(n)).h),i=nf(e.s,n.s),o=nf(e.l,n.l),a=nf(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var Rf=kf(ef),Of=kf(nf);function Pf(t){return function(e,n){var r=t((e=Uh(e)).h,(n=Uh(n)).h),i=nf(e.c,n.c),o=nf(e.l,n.l),a=nf(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var Df=Pf(ef),Lf=Pf(nf);function Nf(t){return function e(n){function r(e,r){var i=t((e=Xh(e)).h,(r=Xh(r)).h),o=nf(e.s,r.s),a=nf(e.l,r.l),s=nf(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var If=Nf(ef),Ff=Nf(nf),zf=Object.freeze({interpolate:wf,interpolateArray:ff,interpolateBasis:Zh,interpolateBasisClosed:Jh,interpolateDate:df,interpolateNumber:pf,interpolateObject:mf,interpolateRound:xf,interpolateString:yf,interpolateTransformCss:Ef,interpolateTransformSvg:Tf,interpolateZoom:function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[2],u=e[0]-i,c=e[1]-o,l=u*u+c*c;if(l<1e-12)r=Math.log(s/a)/Af,n=function(t){return[i+t*u,o+t*c,a*Math.exp(Af*t*r)]};else{var h=Math.sqrt(l),f=(s*s-a*a+4*l)/(2*a*2*h),d=(s*s-a*a-4*l)/(2*s*2*h),p=Math.log(Math.sqrt(f*f+1)-f),m=Math.log(Math.sqrt(d*d+1)-d);r=(m-p)/Af,n=function(t){var e,n,s=t*r,l=Cf(p),f=a/(2*h)*(l*(n=Af*s+p,((n=Math.exp(2*n))-1)/(n+1))-(e=p,((e=Math.exp(e))-1/e)/2));return[i+f*u,o+f*c,a*l/Cf(Af*s+p)]}}return n.duration=1e3*r,n},interpolateRgb:rf,interpolateRgbBasis:lf,interpolateRgbBasisClosed:hf,interpolateHsl:Rf,interpolateHslLong:Of,interpolateLab:function(t,e){var n=nf((t=Dh(t)).l,(e=Dh(e)).l),r=nf(t.a,e.a),i=nf(t.b,e.b),o=nf(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}},interpolateHcl:Df,interpolateHclLong:Lf,interpolateCubehelix:If,interpolateCubehelixLong:Ff,quantize:function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}}),Uf=function(t){return function(){return t}},jf=function(t){return+t},Vf=[0,1];function Bf(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Uf(e)}function Hf(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1];return o<i?(i=n(o,i),a=r(s,a)):(i=n(i,o),a=r(a,s)),function(t){return a(i(t))}}function Gf(t,e,n,r){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)o[s]=n(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(e){var n=ri(t,e,1,i)-1;return a[n](o[n](e))}}function qf(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Wf(t,e){var n,r,i,o=Vf,a=Vf,s=wf,u=!1;function c(){return n=2<Math.min(o.length,a.length)?Gf:Hf,r=i=null,l}function l(e){return(r||(r=n(o,a,u?(i=t,function(t,e){var n=i(t=+t,e=+e);return function(r){return r<=t?0:e<=r?1:n(r)}}):t,s)))(+e);var i}return l.invert=function(t){return(i||(i=n(a,o,Bf,u?(r=e,function(t,e){var n=r(t=+t,e=+e);return function(r){return r<=0?t:1<=r?e:n(r)}}):e)))(+t);var r},l.domain=function(t){return arguments.length?(o=Yl.call(t,jf),c()):o.slice()},l.range=function(t){return arguments.length?(a=Xl.call(t),c()):a.slice()},l.rangeRound=function(t){return a=Xl.call(t),s=xf,c()},l.clamp=function(t){return arguments.length?(u=!!t,c()):u},l.interpolate=function(t){return arguments.length?(s=t,c()):s},c()}var Yf,Xf=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[1<r.length?r[0]+r.slice(2):r,+t.slice(n+1)]},$f=function(t){return(t=Xf(Math.abs(t)))?t[1]:NaN},Qf=function(t,e){var n=Xf(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Zf={"":function(t,e){t:for(var n,r=(t=t.toPrecision(e)).length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:0<o&&(o=0)}return 0<o?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Qf(100*t,e)},r:Qf,s:function(t,e){var n=Xf(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Yf=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:a<o?r+new Array(o-a+1).join("0"):0<o?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Xf(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Jf=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function Kf(t){return new td(t)}function td(t){if(!(e=Jf.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",o=e[4]||"",a=!!e[5],s=e[6]&&+e[6],u=!!e[7],c=e[8]&&+e[8].slice(1),l=e[9]||"";"n"===l?(u=!0,l="g"):Zf[l]||(l=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=s,this.comma=u,this.precision=c,this.type=l}Kf.prototype=td.prototype,td.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var ed,nd,rd,id=function(t){return t},od=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],ad=function(t){var e,n,r,i=t.grouping&&t.thousands?(n=t.grouping,r=t.thousands,function(t,e){for(var i=t.length,o=[],a=0,s=n[0],u=0;0<i&&0<s&&(e<u+s+1&&(s=Math.max(1,e-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>e));)s=n[a=(a+1)%n.length];return o.reverse().join(r)}):id,o=t.currency,a=t.decimal,s=t.numerals?(e=t.numerals,function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}):id,u=t.percent||"%";function c(t){var e=(t=Kf(t)).fill,n=t.align,r=t.sign,c=t.symbol,l=t.zero,h=t.width,f=t.comma,d=t.precision,p=t.type,m="$"===c?o[0]:"#"===c&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",g="$"===c?o[1]:/[%p]/.test(p)?u:"",v=Zf[p],y=!p||/[defgprs%]/.test(p);function w(t){var o,u,c,w=m,x=g;if("c"===p)x=v(t)+x,t="";else{var b=(t=+t)<0;if(t=v(Math.abs(t),d),b&&0==+t&&(b=!1),w=(b?"("===r?r:"-":"-"===r||"("===r?"":r)+w,x=("s"===p?od[8+Yf/3]:"")+x+(b&&"("===r?")":""),y)for(o=-1,u=t.length;++o<u;)if((c=t.charCodeAt(o))<48||57<c){x=(46===c?a+t.slice(o+1):t.slice(o))+x,t=t.slice(0,o);break}}f&&!l&&(t=i(t,1/0));var _=w.length+t.length+x.length,M=_<h?new Array(h-_+1).join(e):"";switch(f&&l&&(t=i(M+t,M.length?h-x.length:1/0),M=""),n){case"<":t=w+t+x+M;break;case"=":t=w+M+t+x;break;case"^":t=M.slice(0,_=M.length>>1)+w+t+x+M.slice(_);break;default:t=M+w+t+x}return s(t)}return d=null==d?p?6:12:/[gprs]/.test(p)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),w.toString=function(){return t+""},w}return{format:c,formatPrefix:function(t,e){var n=c(((t=Kf(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor($f(e)/3))),i=Math.pow(10,-r),o=od[8+r/3];return function(t){return n(i*t)+o}}}};function sd(t){return ed=ad(t),nd=ed.format,rd=ed.formatPrefix,ed}sd({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var ud=function(t,e,n){var r,i,o,a,s=t[0],u=t[t.length-1],c=di(s,u,null==e?10:e);switch((n=Kf(null==n?",f":n)).type){case"s":var l=Math.max(Math.abs(s),Math.abs(u));return null!=n.precision||isNaN((a=c,r=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor($f(l)/3)))-$f(Math.abs(a)))))||(n.precision=r),rd(n,l);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN((i=c,o=Math.max(Math.abs(s),Math.abs(u)),i=Math.abs(i),o=Math.abs(o)-i,r=Math.max(0,$f(o)-$f(i))+1))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=Math.max(0,-$f(Math.abs(c))))||(n.precision=r-2*("%"===n.type))}return nd(n)};function cd(t){var e=t.domain;return t.ticks=function(t){var n=e();return hi(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return ud(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),0<(r=fi(s,u,n))?r=fi(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=fi(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),0<r?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,e(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,e(i)),t},t}function ld(){var t=Wf(Bf,pf);return t.copy=function(){return qf(t,ld())},cd(t)}var hd=function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t};function fd(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:Uf(e)}function dd(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function pd(t){return isFinite(t)?+("1e"+t):t<0?0:t}function md(t){return 10===t?pd:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function gd(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function vd(t){return function(e){return-t(-e)}}function yd(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function wd(){var t=1,e=Wf(function(e,n){return(n=yd(n,t)-(e=yd(e,t)))?function(r){return(yd(r,t)-e)/n}:Uf(n)},function(e,n){return n=yd(n,t)-(e=yd(e,t)),function(r){return yd(e+n*r,1/t)}}),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return qf(e,wd().exponent(t))},cd(e)}var xd=1e3,bd=60*xd,_d=60*bd,Md=24*_d,Sd=7*Md,Ed=30*Md,Td=365*Md;function Ad(t){return new Date(t)}function Cd(t){return t instanceof Date?+t:+new Date(+t)}function kd(t,e,n,r,i,o,a,s,u){var c=Wf(Bf,pf),l=c.invert,h=c.domain,f=u(".%L"),d=u(":%S"),p=u("%I:%M"),m=u("%I %p"),g=u("%a %d"),v=u("%b %d"),y=u("%B"),w=u("%Y"),x=[[a,1,xd],[a,5,5*xd],[a,15,15*xd],[a,30,30*xd],[o,1,bd],[o,5,5*bd],[o,15,15*bd],[o,30,30*bd],[i,1,_d],[i,3,3*_d],[i,6,6*_d],[i,12,12*_d],[r,1,Md],[r,2,2*Md],[n,1,Sd],[e,1,Ed],[e,3,3*Ed],[t,1,Td]];function b(s){return(a(s)<s?f:o(s)<s?d:i(s)<s?p:r(s)<s?m:e(s)<s?n(s)<s?g:v:t(s)<s?y:w)(s)}function _(e,n,r,i){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(r-n)/e,a=ei(function(t){return t[2]}).right(x,o);a===x.length?(i=di(n/Td,r/Td,e),e=t):a?(i=(a=x[o/x[a-1][2]<x[a][2]/o?a-1:a])[1],e=a[0]):(i=Math.max(di(n,r,e),1),e=s)}return null==i?e:e.every(i)}return c.invert=function(t){return new Date(l(t))},c.domain=function(t){return arguments.length?h(Yl.call(t,Cd)):h().map(Ad)},c.ticks=function(t,e){var n,r=h(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=(n=_(t,i,o,e))?n.range(i,o+1):[],a?n.reverse():n},c.tickFormat=function(t,e){return null==e?b:u(e)},c.nice=function(t,e){var n=h();return(t=_(t,n[0],n[n.length-1],e))?h(hd(n,t)):c},c.copy=function(){return qf(c,kd(t,e,n,r,i,o,a,s,u))},c}function Rd(){var t,e,n=Ql().unknown(void 0),r=n.domain,i=n.range,o=[0,1],a=!1,s=0,u=0,c=.5;function l(){var n=r().length,l=o[1]<o[0],h=o[l-0],f=o[1-l],d=ql(n,s,u);t=(f-h)/(d||1),a&&(t=Math.floor(t)),h+=(f-h-t*(n-s))*c,e=t*(1-s),a&&(h=Math.round(h),e=Math.round(e));var p=si(n).map(function(e){return h+t*e});return i(l?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),l()):r()},n.range=function(t){return arguments.length?(o=[+t[0],+t[1]],l()):o.slice()},n.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,l()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,l()):a},n.padding=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),s=u,l()):s},n.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},n.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},n.invertRange=function(t){if(null!=t[0]&&null!=t[1]){var n,a,s,u=+t[0],c=+t[1],l=o[1]<o[0],h=l?i().reverse():i(),f=h.length-1;if(u==u&&c==c&&(c<u&&(s=u,u=c,c=s),!(c<h[0]||u>o[1-l])))return n=Math.max(0,ri(h,u)-1),a=u===c?n:ri(h,c)-1,u-h[n]>e+1e-10&&++n,l&&(s=n,n=f-a,a=f-s),a<n?void 0:r().slice(n,a+1)}},n.invert=function(t){var e=n.invertRange([t,t]);return e?e[0]:e},n.copy=function(){return Rd().domain(r()).range(o).round(a).paddingInner(s).paddingOuter(u).align(c)},l()}var Od=Array.prototype.map,Pd=Array.prototype.slice;function Dd(t){return Od.call(t,function(t){return+t})}function Ld(t,e){return 1<arguments.length?(Nd[t]=(n=t,r=e,function(){var t=r();return t.invertRange||(t.invertRange=t.invert?Hl(t):t.invertExtent?Gl(t):void 0),t.type=n,t}),this):Nd.hasOwnProperty(t)?Nd[t]:void 0;var n,r}var Nd={identity:function t(){var e=[0,1];function n(t){return+t}return(n.invert=n).domain=n.range=function(t){return arguments.length?(e=Yl.call(t,jf),n):e.slice()},n.copy=function(){return t().domain(e)},cd(n)},linear:ld,log:function t(){var e=Wf(fd,dd).domain([1,10]),n=e.domain,r=10,i=gd(10),o=md(10);function a(){return i=gd(r),o=md(r),n()[0]<0&&(i=vd(i),o=vd(o)),e}return e.base=function(t){return arguments.length?(r=+t,a()):r},e.domain=function(t){return arguments.length?(n(t),a()):n()},e.ticks=function(t){var e,a=n(),s=a[0],u=a[a.length-1];(e=u<s)&&(f=s,s=u,u=f);var c,l,h,f=i(s),d=i(u),p=null==t?10:+t,m=[];if(!(r%1)&&d-f<p){if(f=Math.round(f)-1,d=Math.round(d)+1,0<s){for(;f<d;++f)for(l=1,c=o(f);l<r;++l)if(!((h=c*l)<s)){if(u<h)break;m.push(h)}}else for(;f<d;++f)for(l=r-1,c=o(f);1<=l;--l)if(!((h=c*l)<s)){if(u<h)break;m.push(h)}}else m=hi(f,d,Math.min(d-f,p)).map(o);return e?m.reverse():m},e.tickFormat=function(t,n){if(null==n&&(n=10===r?".0e":","),"function"!=typeof n&&(n=nd(n)),t===1/0)return n;null==t&&(t=10);var a=Math.max(1,r*t/e.ticks().length);return function(t){var e=t/o(Math.round(i(t)));return e*r<r-.5&&(e*=r),e<=a?n(t):""}},e.nice=function(){return n(hd(n(),{floor:function(t){return o(Math.floor(i(t)))},ceil:function(t){return o(Math.ceil(i(t)))}}))},e.copy=function(){return qf(e,t().base(r))},e},ordinal:Ql,pow:wd,sqrt:function(){return wd().exponent(.5)},quantile:function t(){var e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=mi(e,t/i);return o}function o(t){if(!isNaN(t=+t))return n[ri(r,t)]}return o.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[0<i?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,r=0,o=t.length;r<o;++r)null==(n=t[r])||isNaN(n=+n)||e.push(n);return e.sort(ti),i()},o.range=function(t){return arguments.length?(n=Xl.call(t),i()):n.slice()},o.quantiles=function(){return r.slice()},o.copy=function(){return t().domain(e).range(n)},o},quantize:function t(){var e=0,n=1,r=1,i=[.5],o=[0,1];function a(t){if(t<=t)return o[ri(i,t,0,r)]}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return a}return a.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],s()):[e,n]},a.range=function(t){return arguments.length?(r=(o=Xl.call(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,i[0]]:r<=a?[i[r-1],n]:[i[a-1],i[a]]},a.copy=function(){return t().domain([e,n]).range(o)},cd(a)},threshold:function t(){var e=[.5],n=[0,1],r=1;function i(t){if(t<=t)return n[ri(e,t,0,r)]}return i.domain=function(t){return arguments.length?(e=Xl.call(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Xl.call(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.copy=function(){return t().domain(e).range(n)},i},time:function(){return kd(Be,Ve,ze,Ie,Ne,Le,De,ke,nn).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},utc:function(){return kd(Ze,Qe,Ye,qe,Ge,He,De,ke,on).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},band:Rd,point:function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return t(n())},e}(Rd().paddingInner(1))},sequential:function t(e){var n=ld(),r=0,i=1,o=!1;function a(){var t=n.domain();r=t[0],i=b(t)-r}function s(t){var n=(t-r)/i;return e(o?Math.max(0,Math.min(1,n)):n)}return s.clamp=function(t){return arguments.length?(o=!!t,s):o},s.domain=function(t){return arguments.length?(n.domain(t),a(),s):n.domain()},s.interpolator=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return t().domain(n.domain()).clamp(o).interpolator(e)},s.ticks=function(t){return n.ticks(t)},s.tickFormat=function(t,e){return n.tickFormat(t,e)},s.nice=function(t){return n.nice(t),a(),s},s},"bin-linear":function t(){var e=ld(),n=[];function r(t){return e(t)}return r.domain=function(t){return arguments.length?(n=Dd(t),e.domain([n[0],b(n)]),r):n.slice()},r.range=function(t){return arguments.length?(e.range(t),r):e.range()},r.rangeRound=function(t){return arguments.length?(e.rangeRound(t),r):e.rangeRound()},r.interpolate=function(t){return arguments.length?(e.interpolate(t),r):e.interpolate()},r.invert=function(t){return e.invert(t)},r.ticks=function(t){var e=n.length,i=~~(e/(t||e));return i<2?r.domain():n.filter(function(t,e){return!(e%i)})},r.tickFormat=function(){return e.tickFormat.apply(e,arguments)},r.copy=function(){return t().domain(r.domain()).range(r.range())},r},"bin-ordinal":function t(){var e=[],n=[];function r(t){return null==t||t!=t?void 0:n[(ri(e,t)-1)%n.length]}return r.domain=function(t){return arguments.length?(e=Dd(t),r):e.slice()},r.range=function(t){return arguments.length?(n=Pd.call(t),r):n.slice()},r.copy=function(){return t().domain(r.domain()).range(r.range())},r}};for(var Id in Nd)Ld(Id,Nd[Id]);function Fd(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}var zd=Fd("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Ud=Fd("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),jd=Fd("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Vd=Fd("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),Bd=Fd("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),Hd=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(Fd),Gd=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n},qd=Gd("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Wd=Gd("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Yd=Gd("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Xd=Gd("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),$d=Gd("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Qd=Gd("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Zd=Gd("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Jd=Gd("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Kd=Gd("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),tp=function(t){return lf(t[t.length-1])},ep=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Gd),np=tp(ep),rp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Gd),ip=tp(rp),op=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Gd),ap=tp(op),sp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Gd),up=tp(sp),cp=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Gd),lp=tp(cp),hp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Gd),fp=tp(hp),dp=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Gd),pp=tp(dp),mp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Gd),gp=tp(mp),vp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Gd),yp=tp(vp),wp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Gd),xp=tp(wp),bp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Gd),_p=tp(bp),Mp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Gd),Sp=tp(Mp),Ep=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Gd),Tp=tp(Ep),Ap=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Gd),Cp=tp(Ap),kp=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Gd),Rp=tp(kp),Op=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Gd),Pp=tp(Op),Dp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Gd),Lp=tp(Dp),Np=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Gd),Ip=tp(Np),Fp=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Gd),zp=tp(Fp),Up=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Gd),jp=tp(Up),Vp=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Gd),Bp=tp(Vp),Hp=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Gd),Gp=tp(Hp),qp=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Gd),Wp=tp(qp),Yp=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Gd),Xp=tp(Yp),$p=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Gd),Qp=tp($p),Zp=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Gd),Jp=tp(Zp),Kp=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Gd),tm=tp(Kp),em=Ff(Xh(300,.5,0),Xh(-240,.5,1)),nm=Ff(Xh(-100,.75,.35),Xh(80,1.5,.8)),rm=Ff(Xh(260,.75,.35),Xh(80,1.5,.8)),im=Xh();function om(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var am=om(Gd("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),sm=om(Gd("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),um=om(Gd("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),cm=om(Gd("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),lm=Object.freeze({schemeCategory10:qd,schemeAccent:Wd,schemeDark2:Yd,schemePaired:Xd,schemePastel1:$d,schemePastel2:Qd,schemeSet1:Zd,schemeSet2:Jd,schemeSet3:Kd,interpolateBrBG:np,schemeBrBG:ep,interpolatePRGn:ip,schemePRGn:rp,interpolatePiYG:ap,schemePiYG:op,interpolatePuOr:up,schemePuOr:sp,interpolateRdBu:lp,schemeRdBu:cp,interpolateRdGy:fp,schemeRdGy:hp,interpolateRdYlBu:pp,schemeRdYlBu:dp,interpolateRdYlGn:gp,schemeRdYlGn:mp,interpolateSpectral:yp,schemeSpectral:vp,interpolateBuGn:xp,schemeBuGn:wp,interpolateBuPu:_p,schemeBuPu:bp,interpolateGnBu:Sp,schemeGnBu:Mp,interpolateOrRd:Tp,schemeOrRd:Ep,interpolatePuBuGn:Cp,schemePuBuGn:Ap,interpolatePuBu:Rp,schemePuBu:kp,interpolatePuRd:Pp,schemePuRd:Op,interpolateRdPu:Lp,schemeRdPu:Dp,interpolateYlGnBu:Ip,schemeYlGnBu:Np,interpolateYlGn:zp,schemeYlGn:Fp,interpolateYlOrBr:jp,schemeYlOrBr:Up,interpolateYlOrRd:Bp,schemeYlOrRd:Vp,interpolateBlues:Gp,schemeBlues:Hp,interpolateGreens:Wp,schemeGreens:qp,interpolateGreys:Xp,schemeGreys:Yp,interpolatePurples:Qp,schemePurples:$p,interpolateReds:Jp,schemeReds:Zp,interpolateOranges:tm,schemeOranges:Kp,interpolateCubehelixDefault:em,interpolateRainbow:function(t){(t<0||1<t)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return im.h=360*t-100,im.s=1.5-1.5*e,im.l=.8-.9*e,im+""},interpolateWarm:nm,interpolateCool:rm,interpolateViridis:am,interpolateMagma:sm,interpolateInferno:um,interpolatePlasma:cm}),hm={blueorange:Hd},fm={category10:qd,accent:Wd,dark2:Yd,paired:Xd,pastel1:$d,pastel2:Qd,set1:Zd,set2:Jd,set3:Kd,category20:zd,category20b:Ud,category20c:jd,tableau10:Vd,tableau20:Bd,viridis:am,magma:sm,inferno:um,plasma:cm,blueorange:lf(b(Hd))};function dm(t,e){fm[t]=lm["interpolate"+e],hm[t]=lm["scheme"+e]}dm("blues","Blues"),dm("greens","Greens"),dm("greys","Greys"),dm("purples","Purples"),dm("reds","Reds"),dm("oranges","Oranges"),dm("brownbluegreen","BrBG"),dm("purplegreen","PRGn"),dm("pinkyellowgreen","PiYG"),dm("purpleorange","PuOr"),dm("redblue","RdBu"),dm("redgrey","RdGy"),dm("redyellowblue","RdYlBu"),dm("redyellowgreen","RdYlGn"),dm("spectral","Spectral"),dm("bluegreen","BuGn"),dm("bluepurple","BuPu"),dm("greenblue","GnBu"),dm("orangered","OrRd"),dm("purplebluegreen","PuBuGn"),dm("purpleblue","PuBu"),dm("purplered","PuRd"),dm("redpurple","RdPu"),dm("yellowgreenblue","YlGnBu"),dm("yellowgreen","YlGn"),dm("yelloworangebrown","YlOrBr"),dm("yelloworangered","YlOrRd");var pm=function(t,e){if(1<arguments.length)return fm[t]=e,this;var n=t.split("-");return t=n[0],(n=+n[1]+1)&&hm.hasOwnProperty(t)?hm[t][n-1]:!n&&fm.hasOwnProperty(t)?fm[t]:void 0};function mm(t,e){var n=e[0],r=b(e)-n;return function(e){return t(n+e*r)}}function gm(t,e,n){var r=n-e;return r?"linear"===t.type||"sequential"===t.type?function(t){return(t-e)/r}:t.copy().domain([e,n]).range([0,1]).interpolate(vm):F(0)}function vm(t,e){var n=e-t;return function(e){return t+e*n}}function ym(t,e){var n,r=zf[(n=t,"interpolate"+n.toLowerCase().split("-").map(function(t){return t[0].toUpperCase()+t.slice(1)}).join(""))];return null!=e&&r&&r.gamma?r.gamma(e):r}var wm={millisecond:ke,second:De,minute:Le,hour:Ne,day:Ie,week:ze,month:Ve,year:Be},xm={millisecond:ke,second:De,minute:He,hour:Ge,day:qe,week:Ye,month:Qe,year:Ze};function bm(t){return wm.hasOwnProperty(t)&&wm[t]}function _m(t){return xm.hasOwnProperty(t)&&xm[t]}function Mm(t,e){var n;return s(e)&&(n=e.step,e=e.interval),u(e)&&(e="time"===t.type?bm(e):"utc"===t.type?_m(e):i("Only time and utc scales accept interval strings."),n&&(e=e.every(n))),e}function Sm(t,e,n){var r=t.range(),i=r[0],o=b(r);if(o<i&&(r=o,o=i,i=r),e=e.filter(function(e){return!((e=t(e))<i||o<e)}),0<n&&1<e.length){for(var a=[e[0],b(e)];e.length>n&&3<=e.length;)e=e.filter(function(t,e){return!(e%2)});e.length<3&&(e=a)}return e}function Em(t,e){return t.ticks?t.ticks(e):t.domain()}function Tm(t,e,n){var r,i,o=t.tickFormat?t.tickFormat(e,n):String;return t.type===Ll?(r=o,i=function(t){var e,r,i=Kf(n||",");if(null==i.precision){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1}return e=nd(i),r=nd(".1f")(1)[1],function(t){var n,i,o=e(t),a=o.indexOf(r);if(a<0)return o;for(n=function(t,e){var n,r=t.lastIndexOf("e");if(0<r)return r;for(r=t.length;--r>e;)if(48<=(n=t.charCodeAt(r))&&n<=57)return r+1}(o,a),i=n<o.length?o.slice(n):"";--n>a;)if("0"!==o[n]){++n;break}return o.slice(0,n)+i}}return nd(i)}(),function(t){return r(t)?i(t):""}):o}function Am(t){zr.call(this,null,t)}function Cm(t){zr.call(this,null,t)}function km(){return ht({})}function Rm(t){return t.exit}function Om(t){zr.call(this,null,t)}H(Am,zr).transform=function(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,i=t.scale,o=null==t.count?t.values?t.values.length:10:Mm(i,t.count),a=t.format||Tm(i,o,t.formatSpecifier),s=t.values?Sm(i,t.values,o):Em(i,o);return r&&(n.rem=r),r=s.map(function(t,e){return ht({index:e/(s.length-1),value:t,label:a(t)})}),t.extra&&r.push(ht({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n},H(Cm,zr).transform=function(t,e){var n=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),o=t.item||km,s=t.key||ct,u=this.value;return a(r.encode)&&(r.encode=null),u&&(t.modified("key")||e.modified(s))&&i("DataJoin does not support modified key function or fields."),u||(e=e.addAll(),this.value=u=B().test(Rm),u.lookup=function(t){return u.get(s(t))}),e.visit(e.ADD,function(t){var e=s(t),n=u.get(e);n?n.exit?(u.empty--,r.add.push(n)):r.mod.push(n):(u.set(e,n=o(t)),r.add.push(n)),n.datum=t,n.exit=!1}),e.visit(e.MOD,function(t){var e=s(t),n=u.get(e);n&&(n.datum=t,r.mod.push(n))}),e.visit(e.REM,function(t){var e=s(t),n=u.get(e);t!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++u.empty)}),e.changed(e.ADD_MOD)&&r.modifies("datum"),t.clean&&u.empty>n.cleanThreshold&&n.runAfter(u.clean),r},H(Om,zr).transform=function(t,e){var n=e.fork(e.ADD_REM),r=t.encoders,i=e.encode;if(a(i)){if(!n.changed()&&!i.every(function(t){return r[t]}))return e.StopPropagation;i=i[0]}var o="enter"===i,s=r.update||v,u=r.enter||v,c=r.exit||v,l=(i&&!o?r[i]:s)||v;if(e.changed(e.ADD)&&(e.visit(e.ADD,function(e){u(e,t),s(e,t),l!==v&&l!==s&&l(e,t)}),n.modifies(u.output),n.modifies(s.output),l!==v&&l!==s&&n.modifies(l.output)),e.changed(e.REM)&&c!==v&&(e.visit(e.REM,function(e){c(e,t)}),n.modifies(c.output)),o||l!==v){var h=e.MOD|(t.modified()?e.REFLOW:0);o?(e.visit(h,function(e){var r=u(e,t);(l(e,t)||r)&&n.mod.push(e)}),n.mod.length&&n.modifies(u.output)):e.visit(h,function(e){l(e,t)&&n.mod.push(e)}),n.mod.length&&n.modifies(l.output)}return n.changed()?n:e.StopPropagation};var Pm={};function Dm(t){var e=t.domain();return e.max=e.pop(),e}function Lm(t,e){return isFinite(t)?e(t):null}function Nm(t){zr.call(this,[],t)}Pm[zl]=function(t){var e=[-1/0].concat(t.quantiles());return e.max=1/0,e},Pm[Ul]=function(t){var e=t.domain(),n=e[0],r=b(e),i=t.range().length,o=new Array(i),a=0;for(o[0]=-1/0;++a<i;)o[a]=(a*r-(a-i)*n)/i;return o.max=1/0,o},Pm[jl]=function(t){var e=[-1/0].concat(t.domain());return e.max=1/0,e},Pm["bin-linear"]=Dm,Pm[Vl]=Dm,H(Nm,zr).transform=function(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=0,i=this.value,o="gradient"===t.type,a=t.scale,s=null==t.count?5:Mm(a,t.count),u=t.format||Tm(a,s,t.formatSpecifier),c=t.values||function(t,e,n){if(o)return t.domain();var r=Pm[t.type];return r?r(t):Em(t,e)}(a,s);if(u=function(t,e){return Pm[t.type]?(r=u,function(t,e,n){var i=n[e+1]||n.max||1/0,o=Lm(t,r),a=Lm(i,r);return o&&a?o+"\u2013"+a:a?"< "+a:"\u2265 "+o}):(n=u,function(t){return n(t)});var n,r}(a),i&&(n.rem=i),o)var l=t.values?a.domain():c,h=gm(a,l[0],b(l));else{var f,d=t.size;N(d)?(t.values||0!==a(c[0])||(c=c.slice(1)),f=c.reduce(function(e,n){return Math.max(e,d(n,t))},0)):d=F(f=d||8)}return i=c.map(function(e,n){var i=ht({index:n,label:u(e,n,c),value:e});return o?i.perc=h(e):(i.offset=f,i.size=d(e,t),i.total=Math.round(r),r+=i.size),i}),n.source=i,n.add=i,this.value=i,n};var Im=B({line:Bm,"line-radial":function(t,e,n,r){return Bm(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},arc:Hm,"arc-radial":function(t,e,n,r){return Hm(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},curve:Gm,"curve-radial":function(t,e,n,r){return Gm(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(t,e,n,r){return"M"+t+","+e+"V"+r+"H"+n},"orthogonal-vertical":function(t,e,n,r){return"M"+t+","+e+"H"+n+"V"+r},"orthogonal-radial":function(t,e,n,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(n),s=Math.sin(n);return"M"+e*i+","+e*o+"A"+e+","+e+" 0 0,"+((Math.abs(n-t)>Math.PI?n<=t:t<n)?1:0)+" "+e*a+","+e*s+"L"+r*a+","+r*s},"diagonal-horizontal":function(t,e,n,r){var i=(t+n)/2;return"M"+t+","+e+"C"+i+","+e+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function(t,e,n,r){var i=(e+r)/2;return"M"+t+","+e+"C"+t+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function(t,e,n,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(n),s=Math.sin(n),u=(e+r)/2;return"M"+e*i+","+e*o+"C"+u*i+","+u*o+" "+u*a+","+u*s+" "+r*a+","+r*s}});function Fm(t){return t.source.x}function zm(t){return t.source.y}function Um(t){return t.target.x}function jm(t){return t.target.y}function Vm(t){zr.call(this,{},t)}function Bm(t,e,n,r){return"M"+t+","+e+"L"+n+","+r}function Hm(t,e,n,r){var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o)/2;return"M"+t+","+e+"A"+a+","+a+" "+180*Math.atan2(o,i)/Math.PI+" 0 1 "+n+","+r}function Gm(t,e,n,r){var i=n-t,o=r-e,a=.2*(i+o),s=.2*(o-i);return"M"+t+","+e+"C"+(t+a)+","+(e+s)+" "+(n+s)+","+(r-a)+" "+n+","+r}function qm(t){zr.call(this,null,t)}Vm.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"as",type:"string",default:"path"}]},H(Vm,zr).transform=function(t,e){var n=t.sourceX||Fm,r=t.sourceY||zm,o=t.targetX||Um,a=t.targetY||jm,s=t.as||"path",u=t.shape||"line",c=Im.get(u+"-"+(t.orient||"vertical"))||Im.get(u);return c||i("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,function(t){t[s]=c(n(t),r(t),o(t),a(t))}),e.reflow(t.modified()).modifies(s)},qm.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},H(qm,zr).transform=function(t,e){var n,r,i,o=t.as||["startAngle","endAngle"],a=o[0],s=o[1],u=t.startAngle||0,c=null!=t.endAngle?t.endAngle:2*Math.PI,l=e.source,h=l.map(t.field||m),f=h.length,d=u,p=(c-u)/function(t,e){for(var n,r=t.length,i=-1,o=0;++i<r;)(n=+t[i])&&(o+=n);return o}(h),g=si(f);for(t.sort&&g.sort(function(t,e){return h[t]-h[e]}),n=0;n<f;++n)i=h[g[n]],(r=l[g[n]])[a]=d,r[s]=d+=i*p;return this.value=h,e.reflow(t.modified()).modifies(o)};var Wm=nt([Il,"pow",Nl]),Ym=nt([Il,Ll,"pow",Nl,"time","utc"]),Xm=nt(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function $m(t){zr.call(this,null,t),this.modified(!0)}function Qm(t,e,n){return N(t)&&(e||n)?mm(t,Zm(e||[0,1],n)):t}function Zm(t,e){return e?t.slice().reverse():t}function Jm(t){zr.call(this,null,t)}function Km(t){zr.call(this,null,t)}function tg(t,e,n,r,i){for(var o,a=(e-t.sum)/2,s=t.length,u=0;u<s;++u)(o=t[u])[r]=a,o[i]=a+=Math.abs(n(o))}function eg(t,e,n,r,i){for(var o,a=1/t.sum,s=0,u=t.length,c=0,l=0;c<u;++c)(o=t[c])[r]=s,o[i]=s=a*(l+=Math.abs(n(o)))}function ng(t,e,n,r,i){for(var o,a,s=0,u=0,c=t.length,l=0;l<c;++l)(o=n(a=t[l]))<0?(a[r]=u,a[i]=u+=o):(a[r]=s,a[i]=s+=o)}H($m,zr).transform=function(t,e){var n,r=e.dataflow,o=this.value;for(n in o&&!t.modified("type")||(this.value=o=Ld((t.type||Il).toLowerCase())()),t)if(!Xm[n]){if("padding"===n&&Ym[o.type])continue;N(o[n])?o[n](t[n]):r.warn("Unsupported scale property: "+n)}return function(t,e,n){var r=e.round||!1,o=e.range;if(null!=e.rangeStep)o=function(t,e,n){return"band"!==t&&"point"!==t&&i("Only band and point scales support rangeStep."),[0,e.rangeStep*ql(n,"point"===t?1:(null!=e.paddingInner?e.paddingInner:e.padding)||0,(null!=e.paddingOuter?e.paddingOuter:e.padding)||0)]}(t.type,e,n);else if(e.scheme){if(o=function(t,e,n){var r,o=e.scheme.toLowerCase(),a=pm(o),s=e.schemeExtent;return a||i("Unrecognized scheme name: "+e.scheme),n=t===jl?n+1:t===Vl?n-1:t===zl||t===Ul?+e.schemeCount||5:n,t===Bl?Qm(a,s,e.reverse):!s&&(r=pm(o+"-"+n))?r:N(a)?function(t,e){for(var n=new Array(e),r=e-1||1,i=0;i<e;++i)n[i]=t(i/r);return n}(Qm(a,s),n):t===Fl?a:a.slice(0,n)}(t.type,e,n),N(o))return t.interpolator(o)}else if(o&&t.type===Bl)return t.interpolator(lf(Zm(o,e.reverse)));o&&e.interpolate&&t.interpolate?t.interpolate(ym(e.interpolate,e.interpolateGamma)):N(t.round)?t.round(r):N(t.rangeRound)&&t.interpolate(r?xf:wf),o&&t.range(Zm(o,e.reverse))}(o,t,function(t,e,n){var r,i=(r=e.domainRaw)?(t.domain(r),r.length):-1;if(-1<i)return i;var o,a,s,u,c,l,h,f,d,p,m=e.domain,g=t.type,v=e.zero||void 0===e.zero&&Wm[g];return m?(Ym[g]&&e.padding&&m[0]!==b(m)&&(s=g,u=m,c=e.range,l=e.padding,h=e.exponent,d=(f=Math.abs(b(c)-c[0]))/(f-2*l),p=s===Ll?P(u,null,d):s===Nl?D(u,null,d,.5):"pow"===s?D(u,null,d,h):O(u,null,d),(u=u.slice())[0]=p[0],u[u.length-1]=p[1],m=u),(v||null!=e.domainMin||null!=e.domainMax||null!=e.domainMid)&&(o=(m=m.slice()).length-1||1,v&&(0<m[0]&&(m[0]=0),m[o]<0&&(m[o]=0)),null!=e.domainMin&&(m[0]=e.domainMin),null!=e.domainMax&&(m[o]=e.domainMax),null!=e.domainMid&&(((a=e.domainMid)<m[0]||a>m[o])&&n.warn("Scale domainMid exceeds domain min or max.",a),m.splice(o,0,a))),t.domain(m),g===Fl&&t.unknown(void 0),e.nice&&t.nice&&t.nice(!0!==e.nice&&Mm(t,e.nice)||null),m.length):0}(o,t,r)),e.fork(e.NO_SOURCE|e.NO_FIELDS)},H(Jm,zr).transform=function(t,e){var n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(t.sort),this.modified(n),e},Km.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:["y0","y1"]}]},H(Km,zr).transform=function(t,e){var n,r,i,o,a=t.as||["y0","y1"],s=a[0],u=a[1],c=t.field||m,l="center"===t.offset?tg:"normalize"===t.offset?eg:ng;for(r=0,i=(n=function(t,e,n,r){var i,o,a,s,u,c,l,h,f,d=[],p=function(t){return t(u)};if(null==e)d.push(t.slice());else for(i={},o=0,a=t.length;o<a;++o)u=t[o],(l=i[c=e.map(p)])||(i[c]=l=[],d.push(l)),l.push(u);for(f=c=0,s=d.length;c<s;++c){for(h=o=0,a=(l=d[c]).length;o<a;++o)h+=Math.abs(r(l[o]));l.sum=h,f<h&&(f=h),n&&l.sort(n)}return d.max=f,d}(e.source,t.groupby,t.sort,c)).length,o=n.max;r<i;++r)l(n[r],o,c,s,u);return e.reflow(t.modified()).modifies(a)};var rg=Object.freeze({axisticks:Am,datajoin:Cm,encode:Om,legendentries:Nm,linkpath:Vm,pie:qm,scale:$m,sortitems:Jm,stack:Km,validTicks:Sm}),ig=Array.prototype.slice,og=function(t,e){return t-e},ag=function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r},sg=function(t){return function(){return t}},ug=function(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=cg(t,e[r]))return n;return 0};function cg(t,e){for(var n,r,i,o,a,s,u,c,l,h,f=e[0],d=e[1],p=-1,m=0,g=t.length,v=g-1;m<g;v=m++){var y=t[m],w=y[0],x=y[1],b=t[v],_=b[0],M=b[1];if(h=void 0,o=u=y,s=l=e,((a=c=b)[0]-o[0])*(s[1]-o[1])==(s[0]-o[0])*(a[1]-o[1])&&(n=u[h=+(u[0]===c[0])],i=c[h],n<=(r=l[h])&&r<=i||i<=r&&r<=n))return 0;d<x!=d<M&&f<(_-w)*(d-x)/(M-x)+w&&(p=-p)}return p}var lg=function(){},hg=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],fg=function(){var t=1,e=1,n=pi,r=s;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(og);else{var r=ai(t),i=r[0],a=r[1];e=di(i,a,e),e=si(Math.floor(i/e)*e,Math.floor(a/e)*e,e)}return e.map(function(e){return o(t,e)})}function o(n,i){var o=[],s=[];return function(n,r,i){var o,s,u,c,l,h=new Array,f=new Array;for(o=s=-1,hg[(u=n[0]>=r)<<1].forEach(d);++o<t-1;)hg[u|(u=n[o+1]>=r)<<1].forEach(d);for(hg[u<<0].forEach(d);++s<e-1;){for(o=-1,hg[(u=n[s*t+t]>=r)<<1|(c=n[s*t]>=r)<<2].forEach(d);++o<t-1;)l=c,hg[u|(u=n[s*t+t+o+1]>=r)<<1|(c=n[s*t+o+1]>=r)<<2|l<<3].forEach(d);hg[u|c<<3].forEach(d)}for(o=-1,hg[(c=n[s*t]>=r)<<2].forEach(d);++o<t-1;)l=c,hg[(c=n[s*t+o+1]>=r)<<2|l<<3].forEach(d);function d(t){var e,n,r=[t[0][0]+o,t[0][1]+s],u=[t[1][0]+o,t[1][1]+s],c=a(r),l=a(u);(e=f[c])?(n=h[l])?(delete f[e.end],delete h[n.start],e===n?(e.ring.push(u),i(e.ring)):h[e.start]=f[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete f[e.end],e.ring.push(u),f[e.end=l]=e):(e=h[l])?(n=f[c])?(delete h[e.start],delete f[n.end],e===n?(e.ring.push(u),i(e.ring)):h[n.start]=f[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(r),h[e.start=c]=e):h[c]=f[l]={start:c,end:l,ring:[r,u]}}hg[c<<3].forEach(d)}(n,i,function(t){r(t,n,i),0<ag(t)?o.push([t]):s.push(t)}),s.forEach(function(t){for(var e,n=0,r=o.length;n<r;++n)if(-1!==ug((e=o[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:i,coordinates:o}}function a(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach(function(n){var o,a=n[0],s=n[1],u=0|a,c=0|s,l=r[c*t+u];0<a&&a<t&&u===a&&(n[0]=a+(i-(o=r[c*t+u-1]))/(l-o)-.5),0<s&&s<e&&c===s&&(n[1]=s+(i-(o=r[(c-1)*t+u]))/(l-o)-.5)})}return i.contour=o,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.ceil(n[0]),o=Math.ceil(n[1]);if(!(0<r&&0<o))throw new Error("invalid size");return t=r,e=o,i},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?sg(ig.call(t)):sg(t),i):n},i.smooth=function(t){return arguments.length?(r=t?s:lg,i):r===s},i};function dg(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),a=0;a<i;++a)for(var s=0,u=0;s<r+n;++s)s<r&&(u+=t.data[s+a*r]),n<=s&&(o<=s&&(u-=t.data[s-o+a*r]),e.data[s-n+a*r]=u/Math.min(s+1,r-1+o-s,o))}function pg(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),a=0;a<r;++a)for(var s=0,u=0;s<i+n;++s)s<i&&(u+=t.data[a+s*r]),n<=s&&(o<=s&&(u-=t.data[a+(s-o)*r]),e.data[a+(s-n)*r]=u/Math.min(s+1,i-1+o-s,o))}function mg(t){return t[0]}function gg(t){return t[1]}var vg=["values","size"],yg=["x","y","size","cellSize","bandwidth"];function wg(t){zr.call(this,null,t)}wg.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"number",default:!1},{name:"thresholds",type:"number",array:!0}]},H(wg,zr).transform=function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,r,i,o,a=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=t.count||10;return t.values?(n=fg(),r=vg,i=t.values):(n=function(){var t=mg,e=gg,n=960,r=500,i=20,o=2,a=3*i,s=n+2*a>>o,u=r+2*a>>o,c=sg(20);function l(n){var r=new Float32Array(s*u),l=new Float32Array(s*u);n.forEach(function(n,i,c){var l=t(n,i,c)+a>>o,h=e(n,i,c)+a>>o;0<=l&&l<s&&0<=h&&h<u&&++r[l+h*s]}),dg({width:s,height:u,data:r},{width:s,height:u,data:l},i>>o),pg({width:s,height:u,data:l},{width:s,height:u,data:r},i>>o),dg({width:s,height:u,data:r},{width:s,height:u,data:l},i>>o),pg({width:s,height:u,data:l},{width:s,height:u,data:r},i>>o),dg({width:s,height:u,data:r},{width:s,height:u,data:l},i>>o),pg({width:s,height:u,data:l},{width:s,height:u,data:r},i>>o);var f=c(r);if(!Array.isArray(f)){var d=gi(r);f=di(0,d,f),(f=si(0,Math.floor(d/f)*f,f)).shift()}return fg().thresholds(f).size([s,u])(r).map(h)}function h(t){return t.value*=Math.pow(2,-2*o),t.coordinates.forEach(f),t}function f(t){t.forEach(d)}function d(t){t.forEach(p)}function p(t){t[0]=t[0]*Math.pow(2,o)-a,t[1]=t[1]*Math.pow(2,o)-a}function m(){return s=n+2*(a=3*i)>>o,u=r+2*a>>o,l}return l.x=function(e){return arguments.length?(t="function"==typeof e?e:sg(+e),l):t},l.y=function(t){return arguments.length?(e="function"==typeof t?t:sg(+t),l):e},l.size=function(t){if(!arguments.length)return[n,r];var e=Math.ceil(t[0]),i=Math.ceil(t[1]);if(!(0<=e||0<=e))throw new Error("invalid size");return n=e,r=i,m()},l.cellSize=function(t){if(!arguments.length)return 1<<o;if(!(1<=(t=+t)))throw new Error("invalid cell size");return o=Math.floor(Math.log(t)/Math.LN2),m()},l.thresholds=function(t){return arguments.length?(c="function"==typeof t?t:Array.isArray(t)?sg(ig.call(t)):sg(t),l):c},l.bandwidth=function(t){if(!arguments.length)return Math.sqrt(i*(i+1));if(!(0<=(t=+t)))throw new Error("invalid bandwidth");return i=Math.round((Math.sqrt(4*t*t+1)-1)/2),m()},l}(),r=yg,i=e.materialize(e.SOURCE).source),n.thresholds(t.thresholds||(t.nice?s:(o=s,function(t){for(var e=ai(t),n=e[0],r=e[1]-n,i=[],a=1;a<=o;++a)i.push(n+r*a/(o+1));return i}))),r.forEach(function(e){null!=t[e]&&n[e](t[e])}),this.value&&(a.rem=this.value),i=i&&i.length?n(i).map(ht):[],this.value=a.source=a.add=i,a};var xg="FeatureCollection";function bg(t){zr.call(this,null,t)}bg.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},H(bg,zr).transform=function(t,e){var n,i=this._features,o=this._points,a=t.fields,s=a&&a[0],u=a&&a[1],c=t.geojson,l=e.ADD;n=t.modified()||e.changed(e.REM)||e.modified(r(c))||s&&e.modified(r(s))||u&&e.modified(r(u)),this.value&&!n||(l=e.SOURCE,this._features=i=[],this._points=o=[]),c&&e.visit(l,function(t){i.push(c(t))}),s&&u&&(e.visit(l,function(t){var e=s(t),n=u(t);null!=e&&null!=n&&(e=+e)===e&&(n=+n)===n&&o.push([e,n])}),i=i.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:o}})),this.value={type:xg,features:i}};var _g=function(){return new Mg};function Mg(){this.reset()}Mg.prototype={constructor:Mg,reset:function(){this.s=this.t=0},add:function(t){Eg(Sg,t,this.t),Eg(this,Sg.s,this.s),this.s?this.t+=Sg.t:this.s=Sg.t},valueOf:function(){return this.s}};var Sg=new Mg;function Eg(t,e,n){var r=t.s=e+n,i=r-e;t.t=e-(r-i)+(n-i)}var Tg=1e-6,Ag=Math.PI,Cg=Ag/2,kg=Ag/4,Rg=2*Ag,Og=180/Ag,Pg=Ag/180,Dg=Math.abs,Lg=Math.atan,Ng=Math.atan2,Ig=Math.cos,Fg=Math.ceil,zg=Math.exp,Ug=Math.log,jg=Math.pow,Vg=Math.sin,Bg=Math.sign||function(t){return 0<t?1:t<0?-1:0},Hg=Math.sqrt,Gg=Math.tan;function qg(t){return 1<t?0:t<-1?Ag:Math.acos(t)}function Wg(t){return 1<t?Cg:t<-1?-Cg:Math.asin(t)}function Yg(){}function Xg(t,e){t&&Qg.hasOwnProperty(t.type)&&Qg[t.type](t,e)}var $g={Feature:function(t,e){Xg(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Xg(n[r].geometry,e)}},Qg={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){Zg(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Zg(n[r],e,0)},Polygon:function(t,e){Jg(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Jg(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Xg(n[r],e)}};function Zg(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)e.point((r=t[i])[0],r[1],r[2]);e.lineEnd()}function Jg(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Zg(t[n],e,1);e.polygonEnd()}var Kg,tv,ev,nv,rv,iv,ov,av,sv,uv,cv,lv,hv,fv=function(t,e){t&&$g.hasOwnProperty(t.type)?$g[t.type](t,e):Xg(t,e)},dv=_g(),pv=_g(),mv={point:Yg,lineStart:Yg,lineEnd:Yg,polygonStart:function(){dv.reset(),mv.lineStart=gv,mv.lineEnd=vv},polygonEnd:function(){var t=+dv;pv.add(t<0?Rg+t:t),this.lineStart=this.lineEnd=this.point=Yg},sphere:function(){pv.add(Rg)}};function gv(){mv.point=yv}function vv(){wv(Kg,tv)}function yv(t,e){mv.point=wv,Kg=t,tv=e,ev=t*=Pg,nv=Ig(e=(e*=Pg)/2+kg),rv=Vg(e)}function wv(t,e){var n=(t*=Pg)-ev,r=0<=n?1:-1,i=r*n,o=Ig(e=(e*=Pg)/2+kg),a=Vg(e),s=rv*a,u=nv*o+s*Ig(i),c=s*r*Vg(i);dv.add(Ng(c,u)),ev=t,nv=o,rv=a}function xv(t){return[Ng(t[1],t[0]),Wg(t[2])]}function bv(t){var e=t[0],n=t[1],r=Ig(n);return[r*Ig(e),r*Vg(e),Vg(n)]}function _v(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Mv(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Sv(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ev(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Tv(t){var e=Hg(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Av,Cv,kv=_g(),Rv={point:Ov,lineStart:Dv,lineEnd:Lv,polygonStart:function(){Rv.point=Nv,Rv.lineStart=Iv,Rv.lineEnd=Fv,kv.reset(),mv.polygonStart()},polygonEnd:function(){mv.polygonEnd(),Rv.point=Ov,Rv.lineStart=Dv,Rv.lineEnd=Lv,dv<0?(iv=-(av=180),ov=-(sv=90)):Tg<kv?sv=90:kv<-Tg&&(ov=-90),Cv[0]=iv,Cv[1]=av}};function Ov(t,e){Av.push(Cv=[iv=t,av=t]),e<ov&&(ov=e),sv<e&&(sv=e)}function Pv(t,e){var n=bv([t*Pg,e*Pg]);if(hv){var r=Mv(hv,n),i=Mv([r[1],-r[0],0],r);Tv(i),i=xv(i);var o,a=t-uv,s=0<a?1:-1,u=i[0]*Og*s,c=180<Dg(a);c^(s*uv<u&&u<s*t)?sv<(o=i[1]*Og)&&(sv=o):c^(s*uv<(u=(u+360)%360-180)&&u<s*t)?(o=-i[1]*Og)<ov&&(ov=o):(e<ov&&(ov=e),sv<e&&(sv=e)),c?t<uv?zv(iv,t)>zv(iv,av)&&(av=t):zv(t,av)>zv(iv,av)&&(iv=t):iv<=av?(t<iv&&(iv=t),av<t&&(av=t)):uv<t?zv(iv,t)>zv(iv,av)&&(av=t):zv(t,av)>zv(iv,av)&&(iv=t)}else Av.push(Cv=[iv=t,av=t]);e<ov&&(ov=e),sv<e&&(sv=e),hv=n,uv=t}function Dv(){Rv.point=Pv}function Lv(){Cv[0]=iv,Cv[1]=av,Rv.point=Ov,hv=null}function Nv(t,e){if(hv){var n=t-uv;kv.add(180<Dg(n)?n+(0<n?360:-360):n)}else cv=t,lv=e;mv.point(t,e),Pv(t,e)}function Iv(){mv.lineStart()}function Fv(){Nv(cv,lv),mv.lineEnd(),Dg(kv)>Tg&&(iv=-(av=180)),Cv[0]=iv,Cv[1]=av,hv=null}function zv(t,e){return(e-=t)<0?e+360:e}function Uv(t,e){return t[0]-e[0]}function jv(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Vv,Bv,Hv,Gv,qv,Wv,Yv,Xv,$v,Qv,Zv,Jv,Kv,ty,ey,ny,ry={sphere:Yg,point:iy,lineStart:ay,lineEnd:cy,polygonStart:function(){ry.lineStart=ly,ry.lineEnd=hy},polygonEnd:function(){ry.lineStart=ay,ry.lineEnd=cy}};function iy(t,e){t*=Pg;var n=Ig(e*=Pg);oy(n*Ig(t),n*Vg(t),Vg(e))}function oy(t,e,n){Hv+=(t-Hv)/++Vv,Gv+=(e-Gv)/Vv,qv+=(n-qv)/Vv}function ay(){ry.point=sy}function sy(t,e){t*=Pg;var n=Ig(e*=Pg);ty=n*Ig(t),ey=n*Vg(t),ny=Vg(e),ry.point=uy,oy(ty,ey,ny)}function uy(t,e){t*=Pg;var n=Ig(e*=Pg),r=n*Ig(t),i=n*Vg(t),o=Vg(e),a=Ng(Hg((a=ey*o-ny*i)*a+(a=ny*r-ty*o)*a+(a=ty*i-ey*r)*a),ty*r+ey*i+ny*o);Bv+=a,Wv+=a*(ty+(ty=r)),Yv+=a*(ey+(ey=i)),Xv+=a*(ny+(ny=o)),oy(ty,ey,ny)}function cy(){ry.point=iy}function ly(){ry.point=fy}function hy(){dy(Jv,Kv),ry.point=iy}function fy(t,e){Jv=t,Kv=e,t*=Pg,e*=Pg,ry.point=dy;var n=Ig(e);ty=n*Ig(t),ey=n*Vg(t),ny=Vg(e),oy(ty,ey,ny)}function dy(t,e){t*=Pg;var n=Ig(e*=Pg),r=n*Ig(t),i=n*Vg(t),o=Vg(e),a=ey*o-ny*i,s=ny*r-ty*o,u=ty*i-ey*r,c=Hg(a*a+s*s+u*u),l=Wg(c),h=c&&-l/c;$v+=h*a,Qv+=h*s,Zv+=h*u,Bv+=l,Wv+=l*(ty+(ty=r)),Yv+=l*(ey+(ey=i)),Xv+=l*(ny+(ny=o)),oy(ty,ey,ny)}var py=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function my(t,e){return[Ag<t?t-Rg:t<-Ag?t+Rg:t,e]}function gy(t,e,n){return(t%=Rg)?e||n?py(yy(t),wy(e,n)):yy(t):e||n?wy(e,n):my}function vy(t){return function(e,n){return[Ag<(e+=t)?e-Rg:e<-Ag?e+Rg:e,n]}}function yy(t){var e=vy(t);return e.invert=vy(-t),e}function wy(t,e){var n=Ig(t),r=Vg(t),i=Ig(e),o=Vg(e);function a(t,e){var a=Ig(e),s=Ig(t)*a,u=Vg(t)*a,c=Vg(e),l=c*n+s*r;return[Ng(u*i-l*o,s*n-c*r),Wg(l*i+u*o)]}return a.invert=function(t,e){var a=Ig(e),s=Ig(t)*a,u=Vg(t)*a,c=Vg(e),l=c*i-u*o;return[Ng(u*i+c*o,s*n+l*r),Wg(l*n-s*r)]},a}my.invert=my;var xy=function(t){function e(e){return(e=t(e[0]*Pg,e[1]*Pg))[0]*=Og,e[1]*=Og,e}return t=gy(t[0]*Pg,t[1]*Pg,2<t.length?t[2]*Pg:0),e.invert=function(e){return(e=t.invert(e[0]*Pg,e[1]*Pg))[0]*=Og,e[1]*=Og,e},e};function by(t,e){(e=bv(e))[0]-=t,Tv(e);var n=qg(-e[1]);return((-e[2]<0?-n:n)+Rg-Tg)%Rg}var _y=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Yg,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},My=function(t,e){return Dg(t[0]-e[0])<Tg&&Dg(t[1]-e[1])<Tg};function Sy(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var Ey=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(My(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new Sy(r,t,null,!0)),u.push(n.o=new Sy(r,null,n,!1)),s.push(n=new Sy(a,t,null,!1)),u.push(n.o=new Sy(a,null,n,!0))}}),s.length){for(u.sort(e),Ty(s),Ty(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,h=s[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(o=(c=f.p.z).length-1;0<=o;--o)i.point((l=c[o])[0],l[1]);else r(f.x,f.p.x,-1,i);f=f.p}c=(f=f.o).z,d=!d}while(!f.v);i.lineEnd()}}};function Ty(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var Ay=_g(),Cy=function(t,e,n,r){return function(i){var o,a,s,u=e(i),c=_y(),l=e(c),h=!1,f={point:d,lineStart:m,lineEnd:g,polygonStart:function(){f.point=v,f.lineStart=y,f.lineEnd=w,a=[],o=[]},polygonEnd:function(){f.point=d,f.lineStart=m,f.lineEnd=g,a=vi(a);var t=function(t,e){var n=e[0],r=e[1],i=[Vg(n),-Ig(n),0],o=0,a=0;Ay.reset();for(var s=0,u=t.length;s<u;++s)if(l=(c=t[s]).length)for(var c,l,h=c[l-1],f=h[0],d=h[1]/2+kg,p=Vg(d),m=Ig(d),g=0;g<l;++g,f=y,p=x,m=b,h=v){var v=c[g],y=v[0],w=v[1]/2+kg,x=Vg(w),b=Ig(w),_=y-f,M=0<=_?1:-1,S=M*_,E=Ag<S,T=p*x;if(Ay.add(Ng(T*M*Vg(S),m*b+T*Ig(S))),o+=E?_+M*Rg:_,E^n<=f^n<=y){var A=Mv(bv(h),bv(v));Tv(A);var C=Mv(i,A);Tv(C);var k=(E^0<=_?-1:1)*Wg(C[2]);(k<r||r===k&&(A[0]||A[1]))&&(a+=E^0<=_?1:-1)}}return(o<-Tg||o<Tg&&Ay<-Tg)^1&a}(o,r);a.length?(h||(i.polygonStart(),h=!0),Ey(a,Ry,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function m(){f.point=p,u.lineStart()}function g(){f.point=d,u.lineEnd()}function v(t,e){s.push([t,e]),l.point(t,e)}function y(){l.lineStart(),s=[]}function w(){v(s[0][0],s[0][1]),l.lineEnd();var t,e,n,r,u=l.clean(),f=c.result(),d=f.length;if(s.pop(),o.push(s),s=null,d)if(1&u){if(0<(e=(n=f[0]).length-1)){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else 1<d&&2&u&&f.push(f.pop().concat(f.shift())),a.push(f.filter(ky))}return f}};function ky(t){return 1<t.length}function Ry(t,e){return((t=t.x)[0]<0?t[1]-Cg-Tg:Cg-t[1])-((e=e.x)[0]<0?e[1]-Cg-Tg:Cg-e[1])}var Oy=Cy(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s,u,c,l,h,f,d,p=0<o?Ag:-Ag,m=Dg(o-n);Dg(m-Ag)<Tg?(t.point(n,r=0<(r+a)/2?Cg:-Cg),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(p,r),t.point(o,r),e=0):i!==p&&Ag<=m&&(Dg(n-i)<Tg&&(n-=i*Tg),Dg(o-p)<Tg&&(o-=p*Tg),u=r,l=a,d=Vg((s=n)-(c=o)),r=Dg(d)>Tg?Lg((Vg(u)*(f=Ig(l))*Vg(c)-Vg(l)*(h=Ig(u))*Vg(s))/(h*f*d)):(u+l)/2,t.point(i,r),t.lineEnd(),t.lineStart(),t.point(p,r),e=0),t.point(n=o,r=a),i=p},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)r.point(-Ag,i=n*Cg),r.point(0,i),r.point(Ag,i),r.point(Ag,0),r.point(Ag,-i),r.point(0,-i),r.point(-Ag,-i),r.point(-Ag,0),r.point(-Ag,i);else if(Dg(t[0]-e[0])>Tg){var o=t[0]<e[0]?Ag:-Ag;r.point(-o,i=n*o/2),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-Ag,-Cg]),Py=function(t){var e=Ig(t),n=6*Pg,r=0<e,i=Dg(e)>Tg;function o(t,n){return Ig(t)*Ig(n)>e}function a(t,n,r){var i=[1,0,0],o=Mv(bv(t),bv(n)),a=_v(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var c=e*a/u,l=-e*s/u,h=Mv(i,o),f=Ev(i,c);Sv(f,Ev(o,l));var d=h,p=_v(f,d),m=_v(d,d),g=p*p-m*(_v(f,f)-1);if(!(g<0)){var v=Hg(g),y=Ev(d,(-p-v)/m);if(Sv(y,f),y=xv(y),!r)return y;var w,x=t[0],b=n[0],_=t[1],M=n[1];b<x&&(w=x,x=b,b=w);var S=b-x,E=Dg(S-Ag)<Tg;if(!E&&M<_&&(w=_,_=M,M=w),E||S<Tg?E?0<_+M^y[1]<(Dg(y[0]-x)<Tg?_:M):_<=y[1]&&y[1]<=M:Ag<S^(x<=y[0]&&y[0]<=b)){var T=Ev(d,(-p+v)/m);return Sv(T,f),[y,xv(T)]}}}function s(e,n){var i=r?t:Ag-t,o=0;return e<-i?o|=1:i<e&&(o|=2),n<-i?o|=4:i<n&&(o|=8),o}return Cy(o,function(t){var e,n,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(h,f){var d,p=[h,f],m=o(h,f),g=r?m?0:s(h,f):m?s(h+(h<0?Ag:-Ag),f):0;if(!e&&(c=u=m)&&t.lineStart(),m!==u&&(!(d=a(e,p))||My(e,d)||My(p,d))&&(p[0]+=Tg,p[1]+=Tg,m=o(p[0],p[1])),m!==u)l=0,m?(t.lineStart(),d=a(p,e),t.point(d[0],d[1])):(d=a(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(i&&e&&r^m){var v;g&n||!(v=a(p,e,!0))||(l=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!m||e&&My(e,p)||t.point(p[0],p[1]),e=p,u=m,n=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}},function(e,r,i,o){!function(t,e,n,r,i,o){if(n){var a=Ig(e),s=Vg(e),u=r*n;null==i?(i=e+r*Rg,o=e-u/2):(i=by(a,i),o=by(a,o),(0<r?i<o:o<i)&&(i+=r*Rg));for(var c,l=i;0<r?o<l:l<o;l-=u)c=xv([a,-s*Ig(l),-s*Vg(l)]),t.point(c[0],c[1])}}(o,t,n,i,e,r)},r?[0,-t]:[-Ag,t-Ag])},Dy=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=0,l=1,h=e[0]-s,f=e[1]-u;if(a=n-s,h||!(0<a)){if(a/=h,h<0){if(a<c)return;a<l&&(l=a)}else if(0<h){if(l<a)return;c<a&&(c=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(l<a)return;c<a&&(c=a)}else if(0<h){if(a<c)return;a<l&&(l=a)}if(a=r-u,f||!(0<a)){if(a/=f,f<0){if(a<c)return;a<l&&(l=a)}else if(0<f){if(l<a)return;c<a&&(c=a)}if(a=o-u,f||!(a<0)){if(a/=f,f<0){if(l<a)return;c<a&&(c=a)}else if(0<f){if(a<c)return;a<l&&(l=a)}return 0<c&&(t[0]=s+c*h,t[1]=u+c*f),l<1&&(e[0]=s+l*h,e[1]=u+l*f),!0}}}}},Ly=1e9,Ny=-Ly;function Iy(t,e,n){var r=si(t,e-Tg,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function Fy(t,e,n){var r=si(t,e-Tg,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}_g();var zy,Uy,jy,Vy,By=function(t){return t},Hy=_g(),Gy=_g(),qy={point:Yg,lineStart:Yg,lineEnd:Yg,polygonStart:function(){qy.lineStart=Wy,qy.lineEnd=$y},polygonEnd:function(){qy.lineStart=qy.lineEnd=qy.point=Yg,Hy.add(Dg(Gy)),Gy.reset()},result:function(){var t=Hy/2;return Hy.reset(),t}};function Wy(){qy.point=Yy}function Yy(t,e){qy.point=Xy,zy=jy=t,Uy=Vy=e}function Xy(t,e){Gy.add(Vy*t-jy*e),jy=t,Vy=e}function $y(){Xy(zy,Uy)}var Qy,Zy,Jy,Ky,tw=1/0,ew=tw,nw=-tw,rw=nw,iw={point:function(t,e){t<tw&&(tw=t),nw<t&&(nw=t),e<ew&&(ew=e),rw<e&&(rw=e)},lineStart:Yg,lineEnd:Yg,polygonStart:Yg,polygonEnd:Yg,result:function(){var t=[[tw,ew],[nw,rw]];return nw=rw=-(ew=tw=1/0),t}},ow=0,aw=0,sw=0,uw=0,cw=0,lw=0,hw=0,fw=0,dw=0,pw={point:mw,lineStart:gw,lineEnd:ww,polygonStart:function(){pw.lineStart=xw,pw.lineEnd=bw},polygonEnd:function(){pw.point=mw,pw.lineStart=gw,pw.lineEnd=ww},result:function(){var t=dw?[hw/dw,fw/dw]:lw?[uw/lw,cw/lw]:sw?[ow/sw,aw/sw]:[NaN,NaN];return ow=aw=sw=uw=cw=lw=hw=fw=dw=0,t}};function mw(t,e){ow+=t,aw+=e,++sw}function gw(){pw.point=vw}function vw(t,e){pw.point=yw,mw(Jy=t,Ky=e)}function yw(t,e){var n=t-Jy,r=e-Ky,i=Hg(n*n+r*r);uw+=i*(Jy+t)/2,cw+=i*(Ky+e)/2,lw+=i,mw(Jy=t,Ky=e)}function ww(){pw.point=mw}function xw(){pw.point=_w}function bw(){Mw(Qy,Zy)}function _w(t,e){pw.point=Mw,mw(Qy=Jy=t,Zy=Ky=e)}function Mw(t,e){var n=t-Jy,r=e-Ky,i=Hg(n*n+r*r);uw+=i*(Jy+t)/2,cw+=i*(Ky+e)/2,lw+=i,hw+=(i=Ky*t-Jy*e)*(Jy+t),fw+=i*(Ky+e),dw+=3*i,mw(Jy=t,Ky=e)}function Sw(t){this._context=t}Sw.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Rg)}},result:Yg};var Ew,Tw,Aw,Cw,kw,Rw=_g(),Ow={point:Yg,lineStart:function(){Ow.point=Pw},lineEnd:function(){Ew&&Dw(Tw,Aw),Ow.point=Yg},polygonStart:function(){Ew=!0},polygonEnd:function(){Ew=null},result:function(){var t=+Rw;return Rw.reset(),t}};function Pw(t,e){Ow.point=Dw,Tw=Cw=t,Aw=kw=e}function Dw(t,e){Rw.add(Hg((Cw-=t)*Cw+(kw-=e)*kw)),Cw=t,kw=e}function Lw(){this._string=[]}function Nw(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}Lw.prototype={_radius:4.5,_circle:Nw(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Nw(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var Iw=function(t,e){var n,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),fv(t,n(r))),r.result()}return o.area=function(t){return fv(t,n(qy)),qy.result()},o.measure=function(t){return fv(t,n(Ow)),Ow.result()},o.bounds=function(t){return fv(t,n(iw)),iw.result()},o.centroid=function(t){return fv(t,n(pw)),pw.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,By):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new Lw):new Sw(e=t),"function"!=typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)};function Fw(t){return function(e){var n=new zw;for(var r in t)n[r]=t[r];return n.stream=e,n}}function zw(){}function Uw(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),fv(n,t.stream(iw)),e(iw.result()),null!=r&&t.clipExtent(r),t}function jw(t,e,n){return Uw(t,function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])},n)}function Vw(t,e,n){return jw(t,[[0,0],e],n)}function Bw(t,e,n){return Uw(t,function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])},n)}function Hw(t,e,n){return Uw(t,function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])},n)}zw.prototype={constructor:zw,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Gw=16,qw=Ig(30*Pg),Ww=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,c,l,h,f,d,p,m,g){var v=c-r,y=l-i,w=v*v+y*y;if(4*e<w&&m--){var x=a+f,b=s+d,_=u+p,M=Hg(x*x+b*b+_*_),S=Wg(_/=M),E=Dg(Dg(_)-1)<Tg||Dg(o-h)<Tg?(o+h)/2:Ng(b,x),T=t(E,S),A=T[0],C=T[1],k=A-r,R=C-i,O=y*k-v*R;(e<O*O/w||.3<Dg((v*k+y*R)/w-.5)||a*f+s*d+u*p<qw)&&(n(r,i,o,a,s,u,A,C,E,x/=M,b/=M,_,m,g),g.point(A,C),n(A,C,E,x,b,_,c,l,h,f,d,p,m,g))}}return function(e){var r,i,o,a,s,u,c,l,h,f,d,p,m={point:g,lineStart:v,lineEnd:w,polygonStart:function(){e.polygonStart(),m.lineStart=x},polygonEnd:function(){e.polygonEnd(),m.lineStart=v}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){l=NaN,m.point=y,e.lineStart()}function y(r,i){var o=bv([r,i]),a=t(r,i);n(l,h,c,f,d,p,l=a[0],h=a[1],c=r,f=o[0],d=o[1],p=o[2],Gw,e),e.point(l,h)}function w(){m.point=g,e.lineEnd()}function x(){v(),m.point=b,m.lineEnd=_}function b(t,e){y(r=t,e),i=l,o=h,a=f,s=d,u=p,m.point=y}function _(){n(l,h,c,f,d,p,i,o,r,a,s,u,Gw,e),(m.lineEnd=w)()}return m}}(t,e):(n=t,Fw({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}}));var n},Yw=Fw({point:function(t,e){this.stream.point(t*Pg,e*Pg)}});function Xw(t){return $w(function(){return t})()}function $w(t){var e,n,r,i,o,a,s,u,c,l,h=150,f=480,d=250,p=0,m=0,g=0,v=0,y=0,w=null,x=Oy,b=null,_=By,M=.5,S=Ww(A,M);function E(t){return[(t=o(t[0]*Pg,t[1]*Pg))[0]*h+n,r-t[1]*h]}function T(t){return(t=o.invert((t[0]-n)/h,(r-t[1])/h))&&[t[0]*Og,t[1]*Og]}function A(t,i){return[(t=e(t,i))[0]*h+n,r-t[1]*h]}function C(){o=py(i=gy(g,v,y),e);var t=e(p,m);return n=f-t[0]*h,r=d+t[1]*h,k()}function k(){return c=l=null,E}return E.stream=function(t){return c&&l===t?c:c=Yw((e=i,Fw({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}}))(x(S(_(l=t)))));var e},E.preclip=function(t){return arguments.length?(x=t,w=void 0,k()):x},E.postclip=function(t){return arguments.length?(_=t,b=a=s=u=null,k()):_},E.clipAngle=function(t){return arguments.length?(x=+t?Py(w=t*Pg):(w=null,Oy),k()):w*Og},E.clipExtent=function(t){return arguments.length?(_=null==t?(b=a=s=u=null,By):function(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,h=0;if(null==i||(l=a(i,s))!==(h=a(o,s))||u(i,o)<0^0<s)for(;c.point(0===l||3===l?t:n,1<l?r:e),(l=(l+s+4)%4)!==h;);else c.point(o[0],o[1])}function a(r,i){return Dg(r[0]-t)<Tg?0<i?0:3:Dg(r[0]-n)<Tg?0<i?2:1:Dg(r[1]-e)<Tg?0<i?1:0:0<i?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,l,h,f,d,p,m,g,v,y,w=a,x=_y(),b={point:_,lineStart:function(){b.point=M,c&&c.push(l=[]),v=!0,g=!1,p=m=NaN},lineEnd:function(){u&&(M(h,f),d&&g&&x.rejoin(),u.push(x.result())),b.point=_,g&&w.lineEnd()},polygonStart:function(){w=x,u=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],u=1,l=s.length,h=s[0],f=h[0],d=h[1];u<l;++u)o=f,a=d,f=(h=s[u])[0],d=h[1],a<=r?r<d&&(d-a)*(t-o)<(f-o)*(r-a)&&++e:d<=r&&(f-o)*(r-a)<(d-a)*(t-o)&&--e;return e}(),n=y&&e,i=(u=vi(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Ey(u,s,e,o,a),a.polygonEnd()),w=a,u=c=l=null}};function _(t,e){i(t,e)&&w.point(t,e)}function M(o,a){var s=i(o,a);if(c&&l.push([o,a]),v)h=o,f=a,v=!1,(d=s)&&(w.lineStart(),w.point(o,a));else if(s&&g)w.point(o,a);else{var u=[p=Math.max(Ny,Math.min(Ly,p)),m=Math.max(Ny,Math.min(Ly,m))],x=[o=Math.max(Ny,Math.min(Ly,o)),a=Math.max(Ny,Math.min(Ly,a))];Dy(u,x,t,e,n,r)?(g||(w.lineStart(),w.point(u[0],u[1])),w.point(x[0],x[1]),s||w.lineEnd(),y=!1):s&&(w.lineStart(),w.point(o,a),y=!1)}p=o,m=a,g=s}return b}}(b=+t[0][0],a=+t[0][1],s=+t[1][0],u=+t[1][1]),k()):null==b?null:[[b,a],[s,u]]},E.scale=function(t){return arguments.length?(h=+t,C()):h},E.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],C()):[f,d]},E.center=function(t){return arguments.length?(p=t[0]%360*Pg,m=t[1]%360*Pg,C()):[p*Og,m*Og]},E.rotate=function(t){return arguments.length?(g=t[0]%360*Pg,v=t[1]%360*Pg,y=2<t.length?t[2]%360*Pg:0,C()):[g*Og,v*Og,y*Og]},E.precision=function(t){return arguments.length?(S=Ww(A,M=t*t),k()):Hg(M)},E.fitExtent=function(t,e){return jw(E,t,e)},E.fitSize=function(t,e){return Vw(E,t,e)},E.fitWidth=function(t,e){return Bw(E,t,e)},E.fitHeight=function(t,e){return Hw(E,t,e)},function(){return e=t.apply(this,arguments),E.invert=e.invert&&T,C()}}function Qw(t){var e=0,n=Ag/3,r=$w(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Pg,n=t[1]*Pg):[e*Og,n*Og]},i}function Zw(t,e){var n=Vg(t),r=(n+Vg(e))/2;if(Dg(r)<Tg)return function(t){var e=Ig(t);function n(t,n){return[t*e,Vg(n)/e]}return n.invert=function(t,n){return[t/e,Wg(n*e)]},n}(t);var i=1+n*(2*r-n),o=Hg(i)/r;function a(t,e){var n=Hg(i-2*r*Vg(e))/r;return[n*Vg(t*=r),o-n*Ig(t)]}return a.invert=function(t,e){var n=o-e;return[Ng(t,Dg(n))/r*Bg(n),Wg((i-(t*t+n*n)*r*r)/(2*r))]},a}var Jw=function(){return Qw(Zw).scale(155.424).center([0,33.6442])},Kw=function(){return Jw().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function tx(t){return function(e,n){var r=Ig(e),i=Ig(n),o=t(r*i);return[o*i*Vg(e),o*Vg(n)]}}function ex(t){return function(e,n){var r=Hg(e*e+n*n),i=t(r),o=Vg(i),a=Ig(i);return[Ng(e*o,r*a),Wg(r&&n*o/r)]}}var nx=tx(function(t){return Hg(2/(1+t))});nx.invert=ex(function(t){return 2*Wg(t/2)});var rx=tx(function(t){return(t=qg(t))&&t/Vg(t)});function ix(t,e){return[t,Ug(Gg((Cg+e)/2))]}function ox(t){var e,n,r,i=Xw(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,c=null;function l(){var o=Ag*a(),s=i(xy(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===ix?[[Math.max(s[0]-o,c),e],[Math.min(s[0]+o,n),r]]:[[c,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),l()):a()},i.translate=function(t){return arguments.length?(s(t),l()):s()},i.center=function(t){return arguments.length?(o(t),l()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),l()):null==c?null:[[c,e],[n,r]]},l()}function ax(t){return Gg((Cg+t)/2)}function sx(t,e){var n=Ig(t),r=t===e?Vg(t):Ug(n/Ig(e))/Ug(ax(e)/ax(t)),i=n*jg(ax(t),r)/r;if(!r)return ix;function o(t,e){0<i?e<-Cg+Tg&&(e=-Cg+Tg):Cg-Tg<e&&(e=Cg-Tg);var n=i/jg(ax(e),r);return[n*Vg(r*t),i-n*Ig(r*t)]}return o.invert=function(t,e){var n=i-e,o=Bg(r)*Hg(t*t+n*n);return[Ng(t,Dg(n))/r*Bg(n),2*Lg(jg(i/o,1/r))-Cg]},o}function ux(t,e){return[t,e]}function cx(t,e){var n=Ig(t),r=t===e?Vg(t):(n-Ig(e))/(e-t),i=n/r+t;if(Dg(r)<Tg)return ux;function o(t,e){var n=i-e,o=r*t;return[n*Vg(o),i-n*Ig(o)]}return o.invert=function(t,e){var n=i-e;return[Ng(t,Dg(n))/r*Bg(n),i-Bg(r)*Hg(t*t+n*n)]},o}function lx(t,e){var n=Ig(e),r=Ig(t)*n;return[n*Vg(t)/r,Vg(e)/r]}function hx(t,e){return[Ig(e)*Vg(t),Vg(e)]}function fx(t,e){var n=Ig(e),r=1+Ig(t)*n;return[n*Vg(t)/r,Vg(e)/r]}function dx(t,e){return[Ug(Gg((Cg+e)/2)),-t]}rx.invert=ex(function(t){return t}),ix.invert=function(t,e){return[t,2*Lg(zg(e))-Cg]},ux.invert=ux,lx.invert=ex(Lg),hx.invert=ex(Wg),fx.invert=ex(function(t){return 2*Lg(t)}),dx.invert=function(t,e){return[-e,2*Lg(zg(t))-Cg]};var px=Iw(),mx=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function gx(t,e){if(!t||"string"!=typeof t)throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),1<arguments.length?(yx[t]=(n=t,r=e,function t(){var e=r();return e.type=n,e.path=Iw().projection(e),e.copy=e.copy||function(){var n=t();return mx.forEach(function(t){e.hasOwnProperty(t)&&n[t](e[t]())}),n.path.pointRadius(e.path.pointRadius()),n},e}),this):yx.hasOwnProperty(t)?yx[t]:null;var n,r}function vx(t){return t&&t.path||px}var yx={albers:Kw,albersusa:function(){var t,e,n,r,i,o,a=Kw(),s=Jw().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Jw().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function l(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function h(){return t=e=null,l}return l.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(.12<=i&&i<.234&&-.425<=r&&r<-.214?s:.166<=i&&i<.234&&-.214<=r&&r<-.115?u:a).invert(t)},l.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},l.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),h()):a.precision()},l.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),l.translate(a.translate())):a.scale()},l.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],l=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,l-.238*e],[o+.455*e,l+.238*e]]).stream(c),r=s.translate([o-.307*e,l+.201*e]).clipExtent([[o-.425*e+Tg,l+.12*e+Tg],[o-.214*e-Tg,l+.234*e-Tg]]).stream(c),i=u.translate([o-.205*e,l+.212*e]).clipExtent([[o-.214*e+Tg,l+.166*e+Tg],[o-.115*e-Tg,l+.234*e-Tg]]).stream(c),h()},l.fitExtent=function(t,e){return jw(l,t,e)},l.fitSize=function(t,e){return Vw(l,t,e)},l.fitWidth=function(t,e){return Bw(l,t,e)},l.fitHeight=function(t,e){return Hw(l,t,e)},l.scale(1070)},azimuthalequalarea:function(){return Xw(nx).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return Xw(rx).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return Qw(sx).scale(109.5).parallels([30,30])},conicequalarea:Jw,conicequidistant:function(){return Qw(cx).scale(131.154).center([0,13.9389])},equirectangular:function(){return Xw(ux).scale(152.63)},gnomonic:function(){return Xw(lx).scale(144.049).clipAngle(60)},mercator:function(){return ox(ix).scale(961/Rg)},orthographic:function(){return Xw(hx).scale(249.5).clipAngle(90+Tg)},stereographic:function(){return Xw(fx).scale(250).clipAngle(142)},transversemercator:function(){var t=ox(dx),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}};for(var wx in yx)gx(wx,yx[wx]);function xx(t){zr.call(this,null,t)}function bx(t){zr.call(this,null,t)}function _x(t){zr.call(this,null,t)}function Mx(t){zr.call(this,[],t),this.generator=function(){var t,e,n,r,i,o,a,s,u,c,l,h,f=10,d=f,p=90,m=360,g=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return si(Fg(r/p)*p,n,p).map(l).concat(si(Fg(s/m)*m,a,m).map(h)).concat(si(Fg(e/f)*f,t,f).filter(function(t){return Dg(t%p)>Tg}).map(u)).concat(si(Fg(o/d)*d,i,d).filter(function(t){return Dg(t%m)>Tg}).map(c))}return v.lines=function(){return y().map(function(t){return{type:"LineString",coordinates:t}})},v.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(h(a).slice(1),l(n).reverse().slice(1),h(s).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(s=+t[0][1],a=+t[1][1],(n=+t[1][0])<(r=+t[0][0])&&(t=r,r=n,n=t),a<s&&(t=s,s=a,a=t),v.precision(g)):[[r,s],[n,a]]},v.extentMinor=function(n){return arguments.length?(o=+n[0][1],i=+n[1][1],(t=+n[1][0])<(e=+n[0][0])&&(n=e,e=t,t=n),i<o&&(n=o,o=i,i=n),v.precision(g)):[[e,o],[t,i]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(p=+t[0],m=+t[1],v):[p,m]},v.stepMinor=function(t){return arguments.length?(f=+t[0],d=+t[1],v):[f,d]},v.precision=function(f){return arguments.length?(g=+f,u=Iy(o,i,90),c=Fy(e,t,g),l=Iy(s,a,90),h=Fy(r,n,g),v):g},v.extentMajor([[-180,-90+Tg],[180,90-Tg]]).extentMinor([[-180,-80-Tg],[180,80+Tg]])}()}function Sx(t){zr.call(this,null,t),this.modified(!0)}function Ex(t,e,n){N(t[e])&&t[e](n)}xx.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},H(xx,zr).transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||d,o=t.as||"path",a=n.SOURCE;!r||t.modified()?(this.value=r=vx(t.projection),n.materialize().reflow()):a=i===d||e.modified(i.fields)?n.ADD_MOD:n.ADD;var s=function(t,e){var n=t.pointRadius();return t.context(null),null!=e&&t.pointRadius(e),n}(r,t.pointRadius);return n.visit(a,function(t){t[o]=r(i(t))}),r.pointRadius(s),n.modifies(o)},bx.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},H(bx,zr).transform=function(t,e){var n,r=t.projection,i=t.fields[0],o=t.fields[1],a=t.as||["x","y"],s=a[0],u=a[1];function c(t){var e=r([i(t),o(t)]);e?(t[s]=e[0],t[u]=e[1]):(t[s]=void 0,t[u]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,c):(n=e.modified(i.fields)||e.modified(o.fields),e.visit(n?e.ADD_MOD:e.ADD,c)),e.modifies(a)},_x.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},H(_x,zr).transform=function(t,e){var n,r,i,o,a=e.fork(e.ALL),s=this.value,u=t.field||l("datum"),c=t.as||"shape",h=a.ADD_MOD;return s&&!t.modified()||(this.value=(n=vx(t.projection),r=u,(o=null==(i=t.pointRadius)?function(t){return n(r(t))}:function(t){var e=n.pointRadius(),o=n.pointRadius(i)(r(t));return n.pointRadius(e),o}).context=function(t){return n.context(t),o},s=o),a.materialize().reflow(),h=a.SOURCE),a.visit(h,function(t){t[c]=s}),a.modifies(c)},Mx.Definition={type:"Graticule",metadata:{source:!0,generates:!0,changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},H(Mx,zr).transform=function(t,e){var n,r=e.fork(),i=this.value,o=this.generator;if(!i.length||t.modified())for(var a in t)N(o[a])&&o[a](t[a]);return n=o(),i.length?r.mod.push(pt(i[0],n)):r.add.push(ht(n)),i[0]=n,r.source=i,r},H(Sx,zr).transform=function(t,e){var n,r,o,s,u=this.value;return!u||t.modified("type")?(this.value=u=function(t){var e=gx((t||"mercator").toLowerCase());return e||i("Unrecognized projection type: "+t),e()}(t.type),mx.forEach(function(e){null!=t[e]&&Ex(u,e,t[e])})):mx.forEach(function(e){t.modified(e)&&Ex(u,e,t[e])}),null!=t.pointRadius&&u.path.pointRadius(t.pointRadius),t.fit&&(n=u,s=(r=t).fit,o=1===(s=L(s)).length?s[0]:{type:xg,features:s.reduce(function(t,e){return e&&e.type===xg?t.push.apply(t,e.features):a(e)?t.push.apply(t,e):t.push(e),t},[])},r.extent?n.fitExtent(r.extent,o):r.size&&n.fitSize(r.size,o)),e.fork(e.NO_SOURCE|e.NO_FIELDS)};var Tx=Object.freeze({contour:wg,geojson:bg,geopath:xx,geopoint:bx,geoshape:_x,graticule:Mx,projection:Sx}),Ax=function(t){return function(){return t}},Cx=function(){return 1e-6*(Math.random()-.5)};function kx(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,l,h,f,d=t._root,p={data:r},m=t._x0,g=t._y0,v=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(o=(m+v)/2))?m=o:v=o,(l=n>=(a=(g+y)/2))?g=a:y=a,!(d=(i=d)[h=l<<1|c]))return i[h]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[h]=p:t._root=p,t;for(;i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(m+v)/2))?m=o:v=o,(l=n>=(a=(g+y)/2))?g=a:y=a,(h=l<<1|c)==(f=(a<=u)<<1|o<=s););return i[f]=d,i[h]=p,t}var Rx=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function Ox(t){return t[0]}function Px(t){return t[1]}function Dx(t,e,n){var r=new Lx(null==e?Ox:e,null==n?Px:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Lx(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Nx(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Ix=Dx.prototype=Lx.prototype;function Fx(t){return t.x+t.vx}function zx(t){return t.y+t.vy}function Ux(t){return t.index}function jx(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}Ix.copy=function(){var t,e,n=new Lx(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Nx(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Nx(e));return n},Ix.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return kx(this.cover(e,n),e,n,t)},Ix.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,l=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||((a[n]=r)<u&&(u=r),l<r&&(l=r),(s[n]=i)<c&&(c=i),h<i&&(h=i));for(l<u&&(u=this._x0,l=this._x1),h<c&&(c=this._y0,h=this._y1),this.cover(u,c).cover(l,h),n=0;n<o;++n)kx(this,a[n],s[n],t[n]);return this},Ix.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{if(!(t<n||i<t||e<r||o<e))return this;var a,s,u=i-n,c=this._root;switch(s=(e<(r+o)/2)<<1|t<(n+i)/2){case 0:for(;(a=new Array(4))[s]=c,c=a,o=r+(u*=2),(i=n+u)<t||o<e;);break;case 1:for(;(a=new Array(4))[s]=c,c=a,o=r+(u*=2),t<(n=i-u)||o<e;);break;case 2:for(;(a=new Array(4))[s]=c,c=a,r=o-(u*=2),(i=n+u)<t||e<r;);break;case 3:for(;(a=new Array(4))[s]=c,c=a,r=o-(u*=2),t<(n=i-u)||e<r;);}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Ix.data=function(){var t=[];return this.visit(function(e){if(!e.length)for(;t.push(e.data),e=e.next;);}),t},Ix.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ix.find=function(t,e,n){var r,i,o,a,s,u,c,l=this._x0,h=this._y0,f=this._x1,d=this._y1,p=[],m=this._root;for(m&&p.push(new Rx(m,l,h,f,d)),null==n?n=1/0:(l=t-n,h=e-n,f=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(m=u.node)||(i=u.x0)>f||(o=u.y0)>d||(a=u.x1)<l||(s=u.y1)<h))if(m.length){var g=(i+a)/2,v=(o+s)/2;p.push(new Rx(m[3],g,v,a,s),new Rx(m[2],i,v,g,s),new Rx(m[1],g,o,a,v),new Rx(m[0],i,o,g,v)),(c=(v<=e)<<1|g<=t)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var y=t-+this._x.call(null,m.data),w=e-+this._y.call(null,m.data),x=y*y+w*w;if(x<n){var b=Math.sqrt(n=x);l=t-b,h=e-b,f=t+b,d=e+b,r=m.data}}return r},Ix.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,h,f,d=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(s=(p+g)/2))?p=s:g=s,(l=a>=(u=(m+v)/2))?m=u:v=u,!(d=(e=d)[h=l<<1|c]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;d.data!==t;)if(!(d=(r=d).next))return this;return(i=d.next)&&delete d.next,r?i?r.next=i:delete r.next:e?(i?e[h]=i:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d)):this._root=i,this},Ix.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Ix.root=function(){return this._root},Ix.size=function(){var t=0;return this.visit(function(e){if(!e.length)for(;++t,e=e.next;);}),t},Ix.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new Rx(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,l=(i+a)/2;(n=u[3])&&s.push(new Rx(n,c,l,o,a)),(n=u[2])&&s.push(new Rx(n,r,l,c,a)),(n=u[1])&&s.push(new Rx(n,c,i,o,l)),(n=u[0])&&s.push(new Rx(n,r,i,c,l))}return this},Ix.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Rx(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,l=(a+u)/2,h=(s+c)/2;(o=i[0])&&n.push(new Rx(o,a,s,l,h)),(o=i[1])&&n.push(new Rx(o,l,s,u,h)),(o=i[2])&&n.push(new Rx(o,a,h,l,c)),(o=i[3])&&n.push(new Rx(o,l,h,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Ix.x=function(t){return arguments.length?(this._x=t,this):this._x},Ix.y=function(t){return arguments.length?(this._y=t,this):this._y};var Vx,Bx,Hx=0,Gx=0,qx=0,Wx=1e3,Yx=0,Xx=0,$x=0,Qx="object"==typeof performance&&performance.now?performance:Date,Zx="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Jx(){return Xx||(Zx(Kx),Xx=Qx.now()+$x)}function Kx(){Xx=0}function tb(){this._call=this._time=this._next=null}function eb(t,e,n){var r=new tb;return r.restart(t,e,n),r}function nb(){Xx=(Yx=Qx.now())+$x,Hx=Gx=0;try{!function(){Jx(),++Hx;for(var t,e=Vx;e;)0<=(t=Xx-e._time)&&e._call.call(null,t),e=e._next;--Hx}()}finally{Hx=0,function(){for(var t,e,n=Vx,r=1/0;n;)n._call?(r>n._time&&(r=n._time),n=(t=n)._next):(e=n._next,n._next=null,n=t?t._next=e:Vx=e);Bx=t,ib(r)}(),Xx=0}}function rb(){var t=Qx.now(),e=t-Yx;Wx<e&&($x-=e,Yx=t)}function ib(t){Hx||(Gx&&(Gx=clearTimeout(Gx)),24<t-Xx?(t<1/0&&(Gx=setTimeout(nb,t-Qx.now()-$x)),qx&&(qx=clearInterval(qx))):(qx||(Yx=Qx.now(),qx=setInterval(rb,Wx)),Hx=1,Zx(nb)))}function ob(t){return t.x}function ab(t){return t.y}tb.prototype=eb.prototype={constructor:tb,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Jx():+n)+(null==e?0:+e),this._next||Bx===this||(Bx?Bx._next=this:Vx=this,Bx=this),this._call=t,this._time=n,ib()},stop:function(){this._call&&(this._call=null,this._time=1/0,ib())}};var sb=10,ub=Math.PI*(3-Math.sqrt(5)),cb={center:function(t,e){var n;function r(){var r,i,o=n.length,a=0,s=0;for(r=0;r<o;++r)a+=(i=n[r]).x,s+=i.y;for(a=a/o-t,s=s/o-e,r=0;r<o;++r)(i=n[r]).x-=a,i.y-=s}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},collide:function(t){var e,n,r=1,i=1;function o(){for(var t,o,s,u,c,l,h,f=e.length,d=0;d<i;++d)for(o=Dx(e,Fx,zx).visitAfter(a),t=0;t<f;++t)h=(l=n[(s=e[t]).index])*l,u=s.x+s.vx,c=s.y+s.vy,o.visit(p);function p(t,e,n,i,o){var a=t.data,f=t.r,d=l+f;if(!a)return u+d<e||i<u-d||c+d<n||o<c-d;if(a.index>s.index){var p=u-a.x-a.vx,m=c-a.y-a.vy,g=p*p+m*m;g<d*d&&(0===p&&(g+=(p=Cx())*p),0===m&&(g+=(m=Cx())*m),g=(d-(g=Math.sqrt(g)))/g*r,s.vx+=(p*=g)*(d=(f*=f)/(h+f)),s.vy+=(m*=g)*d,a.vx-=p*(d=1-d),a.vy-=m*d)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)n[(i=e[r]).index]=+t(i,r,e)}}return"function"!=typeof t&&(t=Ax(null==t?1:+t)),o.initialize=function(t){e=t,s()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:Ax(+e),s(),o):t},o},nbody:function(){var t,e,n,r,i=Ax(-30),o=1,a=1/0,s=.81;function u(r){var i,o=t.length,a=Dx(t,ob,ab).visitAfter(l);for(n=r,i=0;i<o;++i)e=t[i],a.visit(h)}function c(){if(t){var e,n,o=t.length;for(r=new Array(o),e=0;e<o;++e)r[(n=t[e]).index]=+i(n,e,t)}}function l(t){var e,n,i,o,a,s=0,u=0;if(t.length){for(i=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,i+=n*e.x,o+=n*e.y);t.x=i/u,t.y=o/u}else for((e=t).x=e.data.x,e.y=e.data.y;s+=r[e.data.index],e=e.next;);t.value=s}function h(t,i,u,c){if(!t.value)return!0;var l=t.x-e.x,h=t.y-e.y,f=c-i,d=l*l+h*h;if(f*f/s<d)return d<a&&(0===l&&(d+=(l=Cx())*l),0===h&&(d+=(h=Cx())*h),d<o&&(d=Math.sqrt(o*d)),e.vx+=l*t.value*n/d,e.vy+=h*t.value*n/d),!0;if(!(t.length||a<=d))for((t.data!==e||t.next)&&(0===l&&(d+=(l=Cx())*l),0===h&&(d+=(h=Cx())*h),d<o&&(d=Math.sqrt(o*d)));t.data!==e&&(e.vx+=l*(f=r[t.data.index]*n/d),e.vy+=h*f),t=t.next;);}return u.initialize=function(e){t=e,c()},u.strength=function(t){return arguments.length?(i="function"==typeof t?t:Ax(+t),c(),u):i},u.distanceMin=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.distanceMax=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.theta=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u},link:function(t){var e,n,r,i,o,a=Ux,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=Ax(30),c=1;function l(r){for(var i=0,a=t.length;i<c;++i)for(var s,u,l,h,f,d,p,m=0;m<a;++m)u=(s=t[m]).source,h=(l=s.target).x+l.vx-u.x-u.vx||Cx(),f=l.y+l.vy-u.y-u.vy||Cx(),h*=d=((d=Math.sqrt(h*h+f*f))-n[m])/d*r*e[m],f*=d,l.vx-=h*(p=o[m]),l.vy-=f*p,u.vx+=h*(p=1-p),u.vy+=f*p}function h(){if(r){var s,u,c=r.length,l=t.length,h=Ot(r,a);for(s=0,i=new Array(c);s<l;++s)(u=t[s]).index=s,"object"!=typeof u.source&&(u.source=jx(h,u.source)),"object"!=typeof u.target&&(u.target=jx(h,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,o=new Array(l);s<l;++s)o[s]=i[(u=t[s]).source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(l),f(),n=new Array(l),d()}}function f(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),l.initialize=function(t){r=t,h()},l.links=function(e){return arguments.length?(t=e,h(),l):t},l.id=function(t){return arguments.length?(a=t,l):a},l.iterations=function(t){return arguments.length?(c=+t,l):c},l.strength=function(t){return arguments.length?(s="function"==typeof t?t:Ax(+t),f(),l):s},l.distance=function(t){return arguments.length?(u="function"==typeof t?t:Ax(+t),d(),l):u},l},x:function(t){var e,n,r,i=Ax(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=Ax(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Ax(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:Ax(+e),a(),o):t},o},y:function(t){var e,n,r,i=Ax(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=Ax(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Ax(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:Ax(+e),a(),o):t},o}},lb="forces",hb=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],fb=["static","iterations"],db=["x","y","vx","vy"];function pb(t){zr.call(this,null,t)}pb.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:db}]};var mb=H(pb,zr);function gb(t,e,n,r){var i,o,a,s,u=L(e.forces);for(i=0,o=hb.length;i<o;++i)(a=hb[i])!==lb&&e.modified(a)&&t[a](e[a]);for(i=0,o=u.length;i<o;++i)s=lb+i,(a=n||e.modified(lb,i)?yb(u[i]):r&&vb(u[i],r)?t.force(s):null)&&t.force(s,a);for(o=t.numForces||0;i<o;++i)t.force(lb+i,null);return t.numForces=u.length,t}function vb(t,e){var n,i;for(n in t)if(N(i=t[n])&&e.modified(r(i)))return 1;return 0}function yb(t){var e,n;for(n in cb.hasOwnProperty(t.force)||i("Unrecognized force: "+t.force),e=cb[t.force](),t)N(e[n])&&wb(e[n],t[n],t);return e}function wb(t,e,n){t(N(e)?function(t){return e(t,n)}:e)}mb.transform=function(t,e){var n,r,i,o,a,s,u,c=this.value,l=e.changed(e.ADD_REM),h=t.modified(hb),f=t.iterations||300;if(c?(l&&(e.modifies("index"),c.nodes(e.source)),(h||e.changed(e.MOD))&&gb(c,t,0,e)):(this.value=(i=t,o=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=Ot(),u=eb(l),c=Ut("tick","end");function l(){h(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function h(){var e,r,u=t.length;for(n+=(o-n)*i,s.each(function(t){t(n)}),e=0;e<u;++e)null==(r=t[e]).fx?r.x+=r.vx*=a:(r.x=r.fx,r.vx=0),null==r.fy?r.y+=r.vy*=a:(r.y=r.fy,r.vy=0)}function f(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,isNaN(e.x)||isNaN(e.y)){var i=sb*Math.sqrt(n),o=n*ub;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),f(),e={tick:h,restart:function(){return u.restart(l),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),s.each(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},force:function(t,n){return 1<arguments.length?(null==n?s.remove(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return 1<arguments.length?(c.on(t,n),e):c.on(t)}}}(e.source),a=!1,s=o.stop,u=o.restart,o.stopped=function(){return a},o.restart=function(){return a=!1,u()},o.stop=function(){return a=!0,s()},c=gb(o,i,!0).on("end",function(){a=!0})),c.on("tick",(n=e.dataflow,r=this,function(){n.touch(r).run()})),t.static||(l=!0,c.tick()),e.modifies("index")),h||l||t.modified(fb)||e.changed()&&t.restart)if(c.alpha(Math.max(c.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(c.alphaMin(),1/f)),t.static)for(c.stop();0<=--f;)c.tick();else if(c.stopped()&&c.restart(),!l)return e.StopPropagation;return this.finish(t,e)},mb.finish=function(t,e){for(var n,r=e.dataflow,i=this._argops,o=0,a=i.length;o<a;++o)if((n=i[o]).name===lb&&"link"===n.op._argval.force)for(var s,u=n.op._argops,c=0,l=u.length;c<l;++c)if("links"===u[c].name&&(s=u[c].op.source)){r.pulse(s,r.changeset().reflow());break}return e.reflow(t.modified()).modifies(db)};var xb=Object.freeze({force:pb});function bb(t,e){return t.parent===e.parent?1:2}function _b(t,e){return t+e.x}function Mb(t,e){return Math.max(t,e.y)}function Sb(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;0<=--r;)e+=n[r].value;else e=1;t.value=e}function Eb(t,e){var n,r,i,o,a,s=new kb(t),u=+t.value&&(s.value=t.value),c=[s];for(null==e&&(e=Tb);n=c.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;0<=o;--o)c.push(r=n.children[o]=new kb(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Cb)}function Tb(t){return t.children}function Ab(t){t.data=t.data.data}function Cb(t){for(var e=0;t.height=e,(t=t.parent)&&t.height<++e;);}function kb(t){this.data=t,this.depth=this.height=0,this.parent=null}kb.prototype=Eb.prototype={constructor:kb,count:function(){return this.eachAfter(Sb)},each:function(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;0<=n;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;0<=--i;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)r.push(e=e.parent);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return Eb(this).eachBefore(Ab)}};var Rb=Array.prototype.slice,Ob=function(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(Rb.call(t))).length,o=[];r<i;)e=t[r],n&&Lb(n,e)?++r:(n=Ib(o=Pb(o,e)),r=0);return n};function Pb(t,e){var n,r;if(Nb(e,t))return[e];for(n=0;n<t.length;++n)if(Db(e,t[n])&&Nb(Fb(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Db(Fb(t[n],t[r]),e)&&Db(Fb(t[n],e),t[r])&&Db(Fb(t[r],e),t[n])&&Nb(zb(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Db(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Lb(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return 0<n&&r*r+i*i<n*n}function Nb(t,e){for(var n=0;n<e.length;++n)if(!Lb(t,e[n]))return!1;return!0}function Ib(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return Fb(t[0],t[1]);case 3:return zb(t[0],t[1],t[2])}var e}function Fb(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,l=s-i,h=Math.sqrt(u*u+c*c);return{x:(n+o+u/h*l)/2,y:(r+a+c/h*l)/2,r:(h+i+s)/2}}function zb(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,l=n.y,h=n.r,f=r-a,d=r-c,p=i-s,m=i-l,g=u-o,v=h-o,y=r*r+i*i-o*o,w=y-a*a-s*s+u*u,x=y-c*c-l*l+h*h,b=d*p-f*m,_=(p*x-m*w)/(2*b)-r,M=(m*g-p*v)/b,S=(d*w-f*x)/(2*b)-i,E=(f*v-d*g)/b,T=M*M+E*E-1,A=2*(o+_*M+S*E),C=_*_+S*S-o*o,k=-(T?(A+Math.sqrt(A*A-4*T*C))/(2*T):C/A);return{x:r+_+M*k,y:i+S+E*k,r:k}}function Ub(t,e,n){var r=t.x,i=t.y,o=e.r+n.r,a=t.r+n.r,s=e.x-r,u=e.y-i,c=s*s+u*u;if(c){var l=.5+((a*=a)-(o*=o))/(2*c),h=Math.sqrt(Math.max(0,2*o*(a+c)-(a-=c)*a-o*o))/(2*c);n.x=r+l*s+h*u,n.y=i+l*u-h*s}else n.x=r+a,n.y=i}function jb(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return n*n+r*r<i*i-1e-6}function Vb(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function Bb(t){this._=t,this.next=null,this.previous=null}function Hb(t){if("function"!=typeof t)throw new Error;return t}function Gb(){return 0}var qb=function(t){return function(){return t}};function Wb(t){return Math.sqrt(t.value)}function Yb(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Xb(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=function(t){if(!(i=t.length))return 0;var e,n,r,i,o,a,s,u,c,l,h;if((e=t[0]).x=0,e.y=0,!(1<i))return e.r;if(e.x=-(n=t[1]).r,n.x=e.r,n.y=0,!(2<i))return e.r+n.r;Ub(n,e,r=t[2]),e=new Bb(e),n=new Bb(n),r=new Bb(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){Ub(e._,n._,r=t[s]),r=new Bb(r),u=n.next,c=e.previous,l=n._.r,h=e._.r;do{if(l<=h){if(jb(u._,r._)){(e.next=n=u).previous=e,--s;continue t}l+=u._.r,u=u.next}else{if(jb(c._,r._)){((e=c).next=n).previous=e,--s;continue t}h+=c._.r,c=c.previous}}while(u!==c.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,o=Vb(e);(r=r.next)!==n;)(a=Vb(r))<o&&(e=r,o=a);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=Ob(e),s=0;s<i;++s)(e=t[s]).x-=r.x,e.y-=r.y;return r.r}(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function $b(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var Qb=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Zb=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c},Jb="$",Kb={depth:-1},t_={};function e_(t){return t.id}function n_(t){return t.parentId}function r_(t,e){return t.parent===e.parent?1:2}function i_(t){var e=t.children;return e?e[0]:t.t}function o_(t){var e=t.children;return e?e[e.length-1]:t.t}function a_(t,e){this._=t,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}a_.prototype=Object.create(kb.prototype);var s_=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;++s<u;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c},u_=(1+Math.sqrt(5))/2;function c_(t,e,n,r,i,o){for(var a,s,u,c,l,h,f,d,p,m,g,v=[],y=e.children,w=0,x=0,b=y.length,_=e.value;w<b;){for(u=i-n,c=o-r;!(l=y[x++].value)&&x<b;);for(h=f=l,g=l*l*(m=Math.max(c/u,u/c)/(_*t)),p=Math.max(f/g,g/h);x<b;++x){if(l+=s=y[x].value,s<h&&(h=s),f<s&&(f=s),g=l*l*m,p<(d=Math.max(f/g,g/h))){l-=s;break}p=d}v.push(a={value:l,dice:u<c,children:y.slice(w,x)}),a.dice?Zb(a,n,r,i,_?r+=c*l/_:o):s_(a,n,r,_?n+=u*l/_:i,o),_-=l,w=x}return v}var l_=function t(e){function n(t,n,r,i,o){c_(e,t,n,r,i,o)}return n.ratio=function(e){return t(1<(e=+e)?e:1)},n}(u_),h_=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,c,l,h=-1,f=a.length,d=t.value;++h<f;){for(u=(s=a[h]).children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?Zb(s,n,r,i,r+=(o-r)*s.value/d):s_(s,n,r,n+=(i-n)*s.value/d,o),d-=s.value}else t._squarify=a=c_(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t(1<(e=+e)?e:1)},n}(u_);function f_(t){zr.call(this,null,t)}function d_(t){return t.values}function p_(t){zr.call(this,null,t)}f_.Definition={type:"Nest",metadata:{treesource:!0,generates:!0},params:[{name:"keys",type:"field",array:!0},{name:"key",type:"field"},{name:"generate",type:"boolean"}]},H(f_,zr).transform=function(t,e){e.source||i("Nest transform requires an upstream data source.");var n,r,o,a=t.key||ct,s=t.generate,u=t.modified(),c=s||u?e.fork(e.ALL):e;return(!this.value||u||e.changed())&&(s&&this.value&&(c.materialize(c.REM),this.value.each(function(t){t.children&&c.rem.push(t)})),n=L(t.keys).reduce(function(t,e){return t.key(e),t},function(){var t,e,n,r=[],i=[];function o(n,i,a,s){if(i>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var u,c,l,h=-1,f=n.length,d=r[i++],p=Ot(),m=a();++h<f;)(l=p.get(u=d(c=n[h])+""))?l.push(c):p.set(u,[c]);return p.each(function(t,e){s(m,e,o(t,i,a,s))}),m}return n={object:function(t){return o(t,0,Pt,Dt)},map:function(t){return o(t,0,Lt,Nt)},entries:function(t){return function t(n,o){if(++o>r.length)return n;var a,s=i[o-1];return null!=e&&o>=r.length?a=n.entries():(a=[],n.each(function(e,n){a.push({key:n,values:t(e,o)})})),null!=s?a.sort(function(t,e){return s(t.key,e.key)}):a}(o(t,0,Lt,Nt),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}}()).entries(c.materialize(c.SOURCE).source),this.value=r=Eb({values:n},d_),s&&(c.materialize(c.ADD),c.source=c.source.slice(),r.each(function(t){t.children&&(t=ht(t.data),c.add.push(t),c.source.push(t))})),o=r.lookup={},r.each(function(t){null!=ct(t.data)&&(o[a(t.data)]=t)})),c.source.root=this.value,c},H(p_,zr).transform=function(t,e){e.source&&e.source.root||i(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(t.method),r=this.fields,o=e.source.root,a=t.as||r;t.field&&o.sum(t.field),t.sort&&o.sort(t.sort),function(t,e,n){for(var r,i=0,o=e.length;i<o;++i)(r=e[i])in n&&t[r](n[r])}(n,this.params,t);try{this.value=n(o)}catch(t){i(t)}return o.each(function(t){!function(t,e,n){for(var r=t.data,i=0,o=e.length-1;i<o;++i)r[n[i]]=t[e[i]];r[n[o]]=t.children?t.children.length:0}(t,r,a)}),e.reflow(t.modified()).modifies(a).modifies("leaf")};var m_=["x","y","r","depth","children"];function g_(t){p_.call(this,t)}g_.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:3,default:m_}]};var v_=H(g_,p_);v_.layout=function(){var t=null,e=1,n=1,r=Gb;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(Yb(t)).eachAfter(Xb(r,.5)).eachBefore($b(1)):i.eachBefore(Yb(Wb)).eachAfter(Xb(Gb,1)).eachAfter(Xb(r,i.r/Math.min(e,n))).eachBefore($b(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=null==(n=e)?null:Hb(n),i):t;var n},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:qb(+t),i):r},i},v_.params=["size","padding"],v_.fields=m_;var y_=["x0","y0","x1","y1","depth","children"];function w_(t){p_.call(this,t)}w_.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:y_}]};var x_=H(w_,p_);function b_(t){zr.call(this,null,t)}x_.layout=function(){var t=1,e=1,n=0,r=!1;function i(i){var o,a,s=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/s,i.eachBefore((o=e,a=s,function(t){t.children&&Zb(t,t.x0,o*(t.depth+1)/a,t.x1,o*(t.depth+2)/a);var e=t.x0,r=t.y0,i=t.x1-n,s=t.y1-n;i<e&&(e=i=(e+i)/2),s<r&&(r=s=(r+s)/2),t.x0=e,t.y0=r,t.x1=i,t.y1=s})),r&&i.eachBefore(Qb),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},x_.params=["size","round","padding"],x_.fields=y_,b_.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},H(b_,zr).transform=function(t,e){e.source||i("Stratify transform requires an upstream data source.");var n,r,o=t.modified();return(!this.value||o||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields))&&(n=function(){var t=e_,e=n_;function n(n){var r,i,o,a,s,u,c,l=n.length,h=new Array(l),f={};for(i=0;i<l;++i)s=h[i]=new kb(r=n[i]),null!=(u=t(r,i,n))&&(u+="")&&(f[c=Jb+(s.id=u)]=c in f?t_:s);for(i=0;i<l;++i)if(s=h[i],null!=(u=e(n[i],i,n))&&(u+="")){if(!(a=f[Jb+u]))throw new Error("missing: "+u);if(a===t_)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=Kb,o.eachBefore(function(t){t.depth=t.parent.depth+1,--l}).eachBefore(Cb),o.parent=null,0<l)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=Hb(e),n):t},n.parentId=function(t){return arguments.length?(e=Hb(t),n):e},n}().id(t.key).parentId(t.parentKey)(e.source),r=n.lookup={},n.each(function(e){r[t.key(e.data)]=e}),this.value=n),e.source.root=this.value,o?e.fork(e.ALL):e};var __={tidy:function(){var t=r_,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,o,a=new a_(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;0<=i;--i)s.push(n=e.children[i]=new a_(r[i],i)),n.parent=e;return(a.parent=new a_(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var c=i,l=i,h=i;i.eachBefore(function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>h.depth&&(h=t)});var f=c===l?1:t(c,l)/2,d=f-c.x,p=e/(l.x+f+d),m=n/(h.depth||1);i.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*m})}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;0<=--o;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,s=n,u=o.parent.children[0],c=o.m,l=a.m,h=s.m,f=u.m;s=o_(s),o=i_(o),s&&o;)u=i_(u),(a=o_(a)).a=e,0<(i=s.z+h-o.z-c+t(s._,o._))&&(d=(v=s).a.parent===e.parent?v.a:r,g=(m=i)/((p=e).i-d.i),p.c-=g,p.s+=m,d.c+=g,p.z+=m,p.m+=m,c+=i,l+=i),h+=s.m,c+=o.m,f+=u.m,l+=a.m;s&&!o_(a)&&(a.t=s,a.m+=h-l),o&&!i_(u)&&(u.t=o,u.m+=c-f,r=e)}var d,p,m,g,v;return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},cluster:function(){var t=bb,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter(function(e){var n,r=e.children;r?(e.x=(n=r).reduce(_b,0)/n.length,e.y=1+r.reduce(Mb,0)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)});var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=s.x-t(s,u)/2,l=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(l-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}},M_=["x","y","depth","children"];function S_(t){p_.call(this,t)}S_.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:M_}]};var E_=H(S_,p_);function T_(t){zr.call(this,{},t)}E_.layout=function(t){var e=t||"tidy";if(__.hasOwnProperty(e))return __[e]();i("Unrecognized Tree layout method: "+e)},E_.params=["size","nodeSize","separation"],E_.fields=M_,T_.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[{name:"key",type:"field"}]},H(T_,zr).transform=function(t,e){e.source&&e.source.root||i("TreeLinks transform requires a backing tree data source.");var n=e.source.root.lookup,r=this.value,o=t.key||ct,a={},s=e.fork();function u(t){var e=r[t];e&&(a[t]=1,s.mod.push(e))}return e.visit(e.REM,function(t){var e=o(t),n=r[e];n&&(delete r[e],s.rem.push(n))}),e.visit(e.ADD,function(t){var e,i,u,c=o(t);(e=(i=n[c]).parent&&(u=i.parent.data)&&null!=ct(u)&&u)&&(s.add.push(r[c]=ht({source:e,target:t})),a[c]=1)}),e.visit(e.MOD,function(t){var e=o(t),r=n[e].children;if(u(e),r)for(var i=0,s=r.length;i<s;++i)a[e=o(r[i].data)]||u(e)}),s};var A_={binary:function(t,e,n,r,i){var o,a,s=t.children,u=s.length,c=new Array(u+1);for(c[0]=a=o=0;o<u;++o)c[o+1]=a+=s[o].value;!function t(e,n,r,i,o,a,u){if(n-1<=e){var l=s[e];return l.x0=i,l.y0=o,l.x1=a,void(l.y1=u)}for(var h=c[e],f=r/2+h,d=e+1,p=n-1;d<p;){var m=d+p>>>1;c[m]<f?d=m+1:p=m}f-c[d-1]<c[d]-f&&e+1<d&&--d;var g=c[d]-h,v=r-g;if(u-o<a-i){var y=(i*v+a*g)/r;t(e,d,g,i,o,y,u),t(d,n,v,y,o,a,u)}else{var w=(o*v+u*g)/r;t(e,d,g,i,o,a,w),t(d,n,v,i,w,a,u)}}(0,u,t.value,e,n,r,i)},dice:Zb,slice:s_,slicedice:function(t,e,n,r,i){(1&t.depth?s_:Zb)(t,e,n,r,i)},squarify:l_,resquarify:h_},C_=["x0","y0","x1","y1","depth","children"];function k_(t){p_.call(this,t)}k_.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:C_}]};var R_=H(k_,p_);R_.layout=function(){var t=function(){var t=l_,e=!1,n=1,r=1,i=[0],o=Gb,a=Gb,s=Gb,u=Gb,c=Gb;function l(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(h),i=[0],e&&t.eachBefore(Qb),t}function h(e){var n=i[e.depth],r=e.x0+n,l=e.y0+n,h=e.x1-n,f=e.y1-n;h<r&&(r=h=(r+h)/2),f<l&&(l=f=(l+f)/2),e.x0=r,e.y0=l,e.x1=h,e.y1=f,e.children&&(n=i[e.depth+1]=o(e)/2,r+=c(e)-n,l+=a(e)-n,(h-=s(e)-n)<r&&(r=h=(r+h)/2),(f-=u(e)-n)<l&&(l=f=(l+f)/2),t(e,r,l,h,f))}return l.round=function(t){return arguments.length?(e=!!t,l):e},l.size=function(t){return arguments.length?(n=+t[0],r=+t[1],l):[n,r]},l.tile=function(e){return arguments.length?(t=Hb(e),l):t},l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()},l.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:qb(+t),l):o},l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()},l.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:qb(+t),l):a},l.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:qb(+t),l):s},l.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:qb(+t),l):u},l.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:qb(+t),l):c},l}();return t.ratio=function(e){var n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=function(e){A_.hasOwnProperty(e)?t.tile(A_[e]):i("Unrecognized Treemap layout method: "+e)},t},R_.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],R_.fields=C_;var O_=Object.freeze({nest:f_,pack:g_,partition:w_,stratify:b_,tree:S_,treelinks:T_,treemap:k_}),P_=function(t){return function(){return t}};function D_(t){return t[0]}function L_(t){return t[1]}function N_(){this._=null}function I_(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function F_(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function z_(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function U_(t){for(;t.L;)t=t.L;return t}function j_(t,e,n,r){var i=[null,null],o=aM.push(i)-1;return i.left=t,i.right=e,n&&B_(i,t,e,n),r&&B_(i,e,t,r),iM[t.index].halfedges.push(o),iM[e.index].halfedges.push(o),i}function V_(t,e,n){var r=[e,n];return r.left=t,r}function B_(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function H_(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],c=a[1],l=0,h=1,f=s[0]-u,d=s[1]-c;if(o=e-u,f||!(0<o)){if(o/=f,f<0){if(o<l)return;o<h&&(h=o)}else if(0<f){if(h<o)return;l<o&&(l=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(h<o)return;l<o&&(l=o)}else if(0<f){if(o<l)return;o<h&&(h=o)}if(o=n-c,d||!(0<o)){if(o/=d,d<0){if(o<l)return;o<h&&(h=o)}else if(0<d){if(h<o)return;l<o&&(l=o)}if(o=i-c,d||!(o<0)){if(o/=d,d<0){if(h<o)return;l<o&&(l=o)}else if(0<d){if(o<l)return;o<h&&(h=o)}return(0<l||h<1)&&(0<l&&(t[0]=[u+l*f,c+l*d]),h<1&&(t[1]=[u+h*f,c+h*d])),!0}}}}}function G_(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],c=t.left,l=t.right,h=c[0],f=c[1],d=l[0],p=l[1],m=(h+d)/2,g=(f+p)/2;if(p===f){if(m<e||r<=m)return;if(d<h){if(u){if(u[1]>=i)return}else u=[m,n];o=[m,i]}else{if(u){if(u[1]<n)return}else u=[m,i];o=[m,n]}}else if(s=g-(a=(h-d)/(p-f))*m,a<-1||1<a)if(d<h){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(f<p){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function q_(t,e){return e[+(e.left!==t.site)]}N_.prototype={constructor:N_,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=U_(this._),e.P=null,(e.N=t).P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(F_(this,n),n=(t=n).U),n.C=!1,r.C=!0,z_(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(z_(this,n),n=(t=n).U),n.C=!1,r.C=!0,F_(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?U_(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,((n.L=o).U=n)!==a?(i=n.U,n.U=t.U,i.L=t=n.R,(n.R=a).U=n):(n.U=i,t=(i=n).R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,F_(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,z_(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,F_(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,z_(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,F_(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,z_(this,i),t=this._;break}e.C=!0,i=(t=i).U}while(!t.C);t&&(t.C=!1)}}};var W_,Y_=[];function X_(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,c=r[1]-s,l=o[0]-a,h=o[1]-s,f=2*(u*h-c*l);if(!(-uM<=f)){var d=u*u+c*c,p=l*l+h*h,m=(h*d-c*p)/f,g=(u*p-l*d)/f,v=Y_.pop()||new function(){I_(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=i,v.x=m+a,v.y=(v.cy=g+s)+Math.sqrt(m*m+g*g),t.circle=v;for(var y=null,w=oM._;w;)if(v.y<w.y||v.y===w.y&&v.x<=w.x){if(!w.L){y=w.P;break}w=w.L}else{if(!w.R){y=w;break}w=w.R}oM.insert(y,v),y||(W_=v)}}}}function $_(t){var e=t.circle;e&&(e.P||(W_=e.N),oM.remove(e),Y_.push(e),I_(e),t.circle=null)}var Q_=[];function Z_(t){var e=Q_.pop()||new function(){I_(this),this.edge=this.site=this.circle=null};return e.site=t,e}function J_(t){$_(t),rM.remove(t),Q_.push(t),I_(t)}function K_(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];J_(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<sM&&Math.abs(r-u.circle.cy)<sM;)o=u.P,s.unshift(u),J_(u),u=o;s.unshift(u),$_(u);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<sM&&Math.abs(r-c.circle.cy)<sM;)a=c.N,s.push(c),J_(c),c=a;s.push(c),$_(c);var l,h=s.length;for(l=1;l<h;++l)B_((c=s[l]).edge,(u=s[l-1]).site,c.site,i);(c=s[h-1]).edge=j_((u=s[0]).site,c.site,null,i),X_(u),X_(c)}function tM(t){for(var e,n,r,i,o,a=t[0],s=t[1],u=rM._;u;)if(r=eM(u,s)-a,sM<r)u=u.L;else{if(i=a-nM(u,s),!(sM<i)){-sM<r?(e=u.P,n=u):-sM<i?n=(e=u).N:e=n=u;break}if(!u.R){e=u;break}u=u.R}iM[(o=t).index]={site:o,halfedges:[]};var c=Z_(t);if(rM.insert(e,c),e||n){if(e===n)return $_(e),n=Z_(e.site),rM.insert(c,n),c.edge=n.edge=j_(e.site,c.site),X_(e),void X_(n);if(n){$_(e),$_(n);var l=e.site,h=l[0],f=l[1],d=t[0]-h,p=t[1]-f,m=n.site,g=m[0]-h,v=m[1]-f,y=2*(d*v-p*g),w=d*d+p*p,x=g*g+v*v,b=[(v*w-p*x)/y+h,(d*x-g*w)/y+f];B_(n.edge,l,m,b),c.edge=j_(l,t,null,b),n.edge=j_(t,m,null,b),X_(e),X_(n)}else c.edge=j_(e.site,c.site)}}function eM(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],c=u-e;if(!c)return s;var l=s-r,h=1/o-1/c,f=l/c;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+r:(r+s)/2}function nM(t,e){var n=t.N;if(n)return eM(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var rM,iM,oM,aM,sM=1e-6,uM=1e-12;function cM(t,e){return e[1]-t[1]||e[0]-t[0]}function lM(t,e){var n,r,i,o=t.sort(cM).pop();for(aM=[],iM=new Array(t.length),rM=new N_,oM=new N_;;)if(i=W_,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(tM(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;K_(i.arc)}if(function(){for(var t,e,n,r,i=0,o=iM.length;i<o;++i)if((t=iM[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=(h=l=void 0,l=(u=aM[e[n]]).left,(c=t.site)===(h=u.right)&&(h=l,l=c),h?Math.atan2(h[1]-l[1],h[0]-l[0]):(c===l?(l=u[1],h=u[0]):(l=u[0],h=u[1]),Math.atan2(l[0]-h[0],h[1]-l[1])));for(a.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}var u,c,l,h}(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=aM.length;o--;)G_(i=aM[o],t,e,n,r)&&H_(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>sM||Math.abs(i[0][1]-i[1][1])>sM)||delete aM[o]}(a,s,u,c),function(t,e,n,r){var i,o,a,s,u,c,l,h,f,d,p,m,g,v=iM.length,y=!0;for(i=0;i<v;++i)if(o=iM[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)aM[u[s]]||u.splice(s,1);for(s=0,c=u.length;s<c;)p=(d=(g=aM[u[s]])[+(g.left===o.site)])[0],m=d[1],h=(l=q_(o,aM[u[++s%c]]))[0],f=l[1],(Math.abs(p-h)>sM||Math.abs(m-f)>sM)&&(u.splice(s,0,aM.push(V_(a,d,Math.abs(p-t)<sM&&sM<r-m?[t,Math.abs(h-t)<sM?f:r]:Math.abs(m-r)<sM&&sM<n-p?[Math.abs(f-r)<sM?h:n,r]:Math.abs(p-n)<sM&&sM<m-e?[n,Math.abs(h-n)<sM?f:e]:Math.abs(m-e)<sM&&sM<p-t?[Math.abs(f-e)<sM?h:t,e]:null))-1),++c);c&&(y=!1)}if(y){var w,x,b,_=1/0;for(i=0,y=null;i<v;++i)(o=iM[i])&&(b=(w=(a=o.site)[0]-t)*w+(x=a[1]-e)*x)<_&&(_=b,y=o);if(y){var M=[t,e],S=[t,r],E=[n,r],T=[n,e];y.halfedges.push(aM.push(V_(a=y.site,M,S))-1,aM.push(V_(a,S,E))-1,aM.push(V_(a,E,T))-1,aM.push(V_(a,T,M))-1)}}for(i=0;i<v;++i)(o=iM[i])&&(o.halfedges.length||delete iM[i])}(a,s,u,c)}this.edges=aM,this.cells=iM,rM=oM=aM=iM=null}function hM(t){zr.call(this,null,t)}lM.prototype={constructor:lM,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return q_(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s,u,c,l=n.site,h=-1,f=e[i[o-1]],d=f.left===l?f.right:f.left;++h<o;)a=d,d=(f=e[i[h]]).left===l?f.right:f.left,a&&d&&r<a.index&&r<d.index&&((s=l)[0]-(c=d)[0])*((u=a)[1]-s[1])-(s[0]-u[0])*(c[1]-s[1])<0&&t.push([l.data,a.data,d.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;for(var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;i=o.cells[r=a],a=null,i.halfedges.forEach(function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],h=u*u+c*c;h<l&&(l=h,a=s.index)}}),null!==a;);return o._found=r,null==n||l<=n*n?i.site:null}},hM.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var fM=[[-1e5,-1e5],[1e5,1e5]];H(hM,zr).transform=function(t,e){var n,r,i,o,a=t.as||"path",s=e.source;for(n=function(){var t=D_,e=L_,n=null;function r(r){return new lM(r.map(function(n,i){var o=[Math.round(t(n,i,r)/sM)*sM,Math.round(e(n,i,r)/sM)*sM];return o.index=i,o.data=n,o}),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:P_(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:P_(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}().x(t.x).y(t.y),t.size?n.size(t.size):n.extent(t.extent||fM),this.value=n=n(s),r=n.polygons(),i=0,o=s.length;i<o;++i)s[i][a]=r[i]?"M"+r[i].join("L")+"Z":null;return e.reflow(t.modified()).modifies(a)};var dM=Object.freeze({voronoi:hM}),pM=Math.PI/180,mM=64,gM=2048,vM=function(){var t,e,n,r,i,o,a,s=[256,256],u=bM,c=[],l=Math.random,h={};function f(t,e,n){for(var r,i,o,a,c,h=e.x,f=e.y,d=Math.sqrt(s[0]*s[0]+s[1]*s[1]),p=u(s),m=l()<.5?1:-1,g=-m;(r=p(g+=m))&&(i=~~r[0],o=~~r[1],!(Math.min(Math.abs(i),Math.abs(o))>=d));)if(e.x=h+i,e.y=f+o,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>s[0]||e.y+e.y1>s[1]||n&&wM(e,t,s[0])||n&&(c=n,!((a=e).x+a.x1>c[0].x&&a.x+a.x0<c[1].x&&a.y+a.y1>c[0].y&&a.y+a.y0<c[1].y)))){for(var v,y=e.sprite,w=e.width>>5,x=s[0]>>5,b=e.x-(w<<4),_=127&b,M=32-_,S=e.y1-e.y0,E=(e.y+e.y0)*x+(b>>5),T=0;T<S;T++){for(var A=v=0;A<=w;A++)t[E+A]|=v<<M|(A<w?(v=y[T*w+A])>>>_:0);E+=x}return e.sprite=null,!0}return!1}return h.layout=function(){for(var u=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(mM<<5)/e,t.height=gM/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}(Ho()),h=function(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}((s[0]>>5)*s[1]),d=null,p=c.length,m=-1,g=[],v=c.map(function(s){return{text:t(s),font:e(s),style:r(s),weight:i(s),rotate:o(s),size:~~n(s),padding:a(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s}}).sort(function(t,e){return e.size-t.size});++m<p;){var y=v[m];y.x=s[0]*(l()+.5)>>1,y.y=s[1]*(l()+.5)>>1,yM(u,y,v,m),y.hasText&&f(h,y,d)&&(g.push(y),d?xM(d,y):d=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=s[0]>>1,y.y-=s[1]>>1)}return g},h.words=function(t){return arguments.length?(c=t,h):c},h.size=function(t){return arguments.length?(s=[+t[0],+t[1]],h):s},h.font=function(t){return arguments.length?(e=_M(t),h):e},h.fontStyle=function(t){return arguments.length?(r=_M(t),h):r},h.fontWeight=function(t){return arguments.length?(i=_M(t),h):i},h.rotate=function(t){return arguments.length?(o=_M(t),h):o},h.text=function(e){return arguments.length?(t=_M(e),h):t},h.spiral=function(t){return arguments.length?(u=MM[t]||t,h):u},h.fontSize=function(t){return arguments.length?(n=_M(t),h):n},h.padding=function(t){return arguments.length?(a=_M(t),h):a},h.random=function(t){return arguments.length?(l=t,h):l},h};function yM(t,e,n,r){if(!e.sprite){var i=t.context,o=t.ratio;i.clearRect(0,0,(mM<<5)/o,gM/o);var a,s,u,c,l,h=0,f=0,d=0,p=n.length;for(--r;++r<p;){if(e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/o)+"px "+e.font,a=i.measureText(e.text+"m").width*o,u=e.size<<1,e.rotate){var m=Math.sin(e.rotate*pM),g=Math.cos(e.rotate*pM),v=a*g,y=a*m,w=u*g,x=u*m;a=Math.max(Math.abs(v+x),Math.abs(v-x))+31>>5<<5,u=~~Math.max(Math.abs(y+w),Math.abs(y-w))}else a=a+31>>5<<5;if(d<u&&(d=u),mM<<5<=h+a&&(f+=d,d=h=0),gM<=f+u)break;i.translate((h+(a>>1))/o,(f+(u>>1))/o),e.rotate&&i.rotate(e.rotate*pM),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=a,e.height=u,e.xoff=h,e.yoff=f,e.x1=a>>1,e.y1=u>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,h+=a}for(var b=i.getImageData(0,0,(mM<<5)/o,gM/o).data,_=[];0<=--r;)if((e=n[r]).hasText){for(s=(a=e.width)>>5,u=e.y1-e.y0,c=0;c<u*s;c++)_[c]=0;if(null==(h=e.xoff))return;f=e.yoff;var M=0,S=-1;for(l=0;l<u;l++){for(c=0;c<a;c++){var E=b[(f+l)*(mM<<5)+(h+c)<<2]?1<<31-c%32:0;_[s*l+(c>>5)]|=E,M|=E}M?S=l:(e.y0++,u--,l--,f++)}e.y1=e.y0+S,e.sprite=_.slice(0,(e.y1-e.y0)*s)}}}function wM(t,e,n){for(var r,i=t.sprite,o=t.width>>5,a=t.x-(o<<4),s=127&a,u=32-s,c=t.y1-t.y0,l=(t.y+t.y0)*(n>>=5)+(a>>5),h=0;h<c;h++){for(var f=r=0;f<=o;f++)if((r<<u|(f<o?(r=i[h*o+f])>>>s:0))&e[l+f])return!0;l+=n}return!1}function xM(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function bM(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function _M(t){return"function"==typeof t?t:function(){return t}}var MM={archimedean:bM,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}},SM=["x","y","font","fontSize","fontStyle","fontWeight","angle"],EM=["text","font","rotate","fontSize","fontStyle","fontWeight"];function TM(t){zr.call(this,vM(),t)}TM.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:SM}]},H(TM,zr).transform=function(e,n){var r=e.modified();if(r||n.changed(n.ADD_REM)||EM.some(function(t){var r=e[t];return N(r)&&n.modified(r.fields)})){var i,o=n.materialize(n.SOURCE).source,a=this.value,s=e.as||SM,u=e.fontSize||14;if(N(u)?i=e.fontSizeRange:u=F(u),i){var c=u,l=Ld("sqrt")().domain(function(t,e){for(var n,r=1/0,i=-1/0,o=0,a=e.length;o<a;++o)(n=t(e[o]))<r&&(r=n),i<n&&(i=n);return[r,i]}(c,o)).range(i);u=function(t){return l(c(t))}}o.forEach(function(t){t[s[0]]=NaN,t[s[1]]=NaN,t[s[3]]=0});for(var h,f,d=a.words(o).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(u).random(t.random).layout(),p=a.size(),m=p[0]>>1,g=p[1]>>1,v=0,y=d.length;v<y;++v)(f=(h=d[v]).datum)[s[0]]=h.x+m,f[s[1]]=h.y+g,f[s[2]]=h.font,f[s[3]]=h.size,f[s[4]]=h.style,f[s[5]]=h.weight,f[s[6]]=h.rotate;return n.reflow(r).modifies(s)}};var AM=Object.freeze({wordcloud:TM});function CM(t){return new Uint32Array(t)}function kM(t,e,n){var r=(e<257?function(t){return new Uint8Array(t)}:e<65537?function(t){return new Uint16Array(t)}:CM)(t);return n&&r.set(n),r}var RM=function(t,e,n){var r=1<<e;return{one:r,zero:~r,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd:function(t,e){var n,i=this.bisect(this.range,t.value),o=t.index,a=i[0],s=i[1],u=o.length;for(n=0;n<a;++n)e[o[n]]|=r;for(n=s;n<u;++n)e[o[n]]|=r;return this}}};function OM(){var t=CM(0),e=[],n=0;return{insert:function(r,i,o){if(!i.length)return[];var a,s,u,c,l,h=n,f=i.length,d=Array(f),p=CM(f);for(u=0;u<f;++u)d[u]=r(i[u]),p[u]=u;if((c=d).sort.call(l=p,function(t,e){var n=c[t],r=c[e];return n<r?-1:r<n?1:0}),d=yi(c,l),h)a=e,s=t,e=Array(h+f),t=CM(h+f),function(t,e,n,r,i,o,a,s,u){var c,l=0,h=0;for(c=0;l<r&&h<a;++c)e[l]<i[h]?(s[c]=e[l],u[c]=n[l++]):(s[c]=i[h],u[c]=o[h++]+t);for(;l<r;++l,++c)s[c]=e[l],u[c]=n[l];for(;h<a;++h,++c)s[c]=i[h],u[c]=o[h]+t}(o,a,s,h,d,p,f,e,t);else{if(0<o)for(u=0;u<f;++u)p[u]+=o;e=d,t=p}return n=h+f,{index:p,value:d}},remove:function(r,i){var o,a,s,u=n;for(a=0;!i[t[a]]&&a<u;++a);for(s=a;a<u;++a)i[o=t[a]]||(t[s]=o,e[s]=e[a],++s);n=u-r},bisect:function(t,r){var i;return r?i=r.length:(r=e,i=n),[ii(r,t[0],0,i),ri(r,t[1],0,i)]},reindex:function(e){for(var r=0,i=n;r<i;++r)t[r]=e[t[r]]},index:function(){return t},size:function(){return n}}}function PM(t){var e,n,r,i,o;zr.call(this,(e=8,n=[],r=CM(0),i=kM(0,e),o=kM(0,e),{data:function(){return n},seen:function(){return r=(t=r).length>=(e=n.length)?t:((i=i||new t.constructor(e)).set(t),i);var t,e,i},add:function(t){for(var e,r=0,i=n.length,o=t.length;r<o;++r)(e=t[r])._index=i++,n.push(e)},remove:function(t,e){var r,a,s,u=n.length,c=Array(u-t),l=n;for(a=0;!e[a]&&a<u;++a)c[a]=n[a],l[a]=a;for(s=a;a<u;++a)r=n[a],e[a]?l[a]=-1:(l[a]=s,i[s]=i[a],o[s]=o[a],(c[s]=r)._index=s++),i[a]=0;return n=c,l},size:function(){return n.length},curr:function(){return i},prev:function(){return o},reset:function(t){o[t]=i[t]},all:function(){return e<257?255:e<65537?65535:4294967295},set:function(t,e){i[t]|=e},clear:function(t,e){i[t]&=~e},resize:function(t,n){(i.length<t||e<n)&&(e=Math.max(n,e),i=kM(t,e,i),o=kM(t,e))}}),t),this._indices=null,this._dims=null}PM.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var DM=H(PM,zr);function LM(t){zr.call(this,null,t)}DM.transform=function(t,e){return this._dims?t.modified("fields")||t.fields.some(function(t){return e.modified(t.fields)})?this.reinit(t,e):this.eval(t,e):this.init(t,e)},DM.init=function(t,e){for(var n,r,i=t.fields,o=t.query,a=this._indices={},s=this._dims=[],u=o.length,c=0;c<u;++c)r=a[n=i[c].fname]||(a[n]=OM()),s.push(RM(r,c,o[c]));return this.eval(t,e)},DM.reinit=function(t,e){var n,r,i,o,a,s,u,c,l,h=e.materialize().fork(),f=t.fields,d=t.query,p=this._indices,m=this._dims,g=this.value,v=g.curr(),y=g.prev(),w=g.all(),x=h.rem=h.add,b=h.mod,_=d.length,M={};if(y.set(v),e.rem.length&&(a=this.remove(t,e,h)),e.add.length&&g.add(e.add),e.mod.length)for(s={},u=0,c=(o=e.mod).length;u<c;++u)s[o[u]._index]=1;for(u=0;u<_;++u)l=f[u],(!m[u]||t.modified("fields",u)||e.modified(l.fields))&&((n=M[i=l.fname])||(p[i]=r=OM(),M[i]=n=r.insert(l,e.source,0)),m[u]=RM(r,u,d[u]).onAdd(n,v));for(u=0,c=g.data().length;u<c;++u)a[u]||(y[u]!==v[u]?x.push(u):s[u]&&v[u]!==w&&b.push(u));return g.mask=(1<<_)-1,h},DM.eval=function(t,e){var n=e.materialize().fork(),r=this._dims.length,i=0;return e.rem.length&&(this.remove(t,e,n),i|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),i|=(1<<r)-1),e.mod.length&&(this.modify(e,n),i|=(1<<r)-1),this.value.mask=i,n},DM.insert=function(t,e,n){var r,i,o,a=e.add,s=this.value,u=this._dims,c=this._indices,l=t.fields,h={},f=n.add,d=s.size(),p=d+a.length,m=u.length;s.resize(p,m),s.add(a);var g=s.curr(),v=s.prev(),y=s.all();for(r=0;r<m;++r)o=h[i=l[r].fname]||(h[i]=c[i].insert(l[r],a,d)),u[r].onAdd(o,g);for(;d<p;++d)v[d]=y,g[d]!==y&&f.push(d)},DM.modify=function(t,e){var n,r,i,o=e.mod,a=this.value,s=a.curr(),u=a.all(),c=t.mod;for(n=0,r=c.length;n<r;++n)s[i=c[n]._index]!==u&&o.push(i)},DM.remove=function(t,e,n){var r,i,o,a,s=this._indices,u=this.value,c=u.curr(),l=u.prev(),h=u.all(),f={},d=n.rem,p=e.rem;for(r=0,i=p.length;r<i;++r)f[o=p[r]._index]=1,l[o]=a=c[o],a!==(c[o]=h)&&d.push(o);for(o in s)s[o].remove(i,f);return this.reindex(e,i,f),f},DM.reindex=function(t,e,n){var r=this._indices,i=this.value;t.runAfter(function(){var t=i.remove(e,n);for(var o in r)r[o].reindex(t)})},DM.update=function(t,e,n){var r,i,o=this._dims,a=t.query,s=e.stamp,u=o.length,c=0;for(i=n.filters=0;i<u;++i)t.modified("query",i)&&(r=i,++c);if(1===c)c=o[r].one,this.incrementOne(o[r],a[r],n.add,n.rem);else for(c=i=0;i<u;++i)t.modified("query",i)&&(c|=o[i].one,this.incrementAll(o[i],a[i],s,n.add),n.rem=n.add);return c},DM.incrementAll=function(t,e,n,r){var i,o,a,s=this.value,u=s.seen(),c=s.curr(),l=s.prev(),h=t.index(),f=t.bisect(t.range),d=t.bisect(e),p=d[0],m=d[1],g=f[0],v=f[1],y=t.one;if(p<g)for(i=p,o=Math.min(g,m);i<o;++i)u[a=h[i]]!==n&&(l[a]=c[a],u[a]=n,r.push(a)),c[a]^=y;else if(g<p)for(i=g,o=Math.min(p,v);i<o;++i)u[a=h[i]]!==n&&(l[a]=c[a],u[a]=n,r.push(a)),c[a]^=y;if(v<m)for(i=Math.max(p,v),o=m;i<o;++i)u[a=h[i]]!==n&&(l[a]=c[a],u[a]=n,r.push(a)),c[a]^=y;else if(m<v)for(i=Math.max(g,m),o=v;i<o;++i)u[a=h[i]]!==n&&(l[a]=c[a],u[a]=n,r.push(a)),c[a]^=y;t.range=e.slice()},DM.incrementOne=function(t,e,n,r){var i,o,a,s=this.value.curr(),u=t.index(),c=t.bisect(t.range),l=t.bisect(e),h=l[0],f=l[1],d=c[0],p=c[1],m=t.one;if(h<d)for(i=h,o=Math.min(d,f);i<o;++i)s[a=u[i]]^=m,n.push(a);else if(d<h)for(i=d,o=Math.min(h,p);i<o;++i)s[a=u[i]]^=m,r.push(a);if(p<f)for(i=Math.max(h,p),o=f;i<o;++i)s[a=u[i]]^=m,n.push(a);else if(f<p)for(i=Math.max(d,f),o=p;i<o;++i)s[a=u[i]]^=m,r.push(a);t.range=e.slice()},LM.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},H(LM,zr).transform=function(t,e){var n=~(t.ignore||0),r=t.filter,i=r.mask;if(0==(i&n))return e.StopPropagation;var o=e.fork(e.ALL),a=r.data(),s=r.curr(),u=r.prev(),c=function(t){return s[t]&n?null:a[t]};return o.filter(o.MOD,c),i&i-1?(o.filter(o.ADD,function(t){var e=s[t]&n;return!e&&e^u[t]&n?a[t]:null}),o.filter(o.REM,function(t){var e=s[t]&n;return!e||e^e^u[t]&n?null:a[t]})):(o.filter(o.ADD,c),o.filter(o.REM,function(t){return(s[t]&n)===i?a[t]:null})),o.filter(o.SOURCE,function(t){return c(t._index)})};var NM=Object.freeze({crossfilter:PM,resolvefilter:LM}),IM="default",FM=function(t){var e=t._signals.cursor;e||(t._signals.cursor=e=t.add({user:IM,item:null})),t.on(t.events("view","mousemove"),e,function(t,n){var r=e.value,i=r?u(r)?r:r.user:IM,o=n.item&&n.item.cursor||null;return r&&i===r.user&&o==r.item?r:{user:i,item:o}}),t.add(null,function(t){var e=t.cursor,n=this.value;return u(e)||(n=e.item,e=e.user),"undefined"!=typeof document&&document.body&&(document.body.style.cursor=e&&e!==IM?e:n||e),n},{cursor:e})};function zM(t,e){var n=t._runtime.data;return n.hasOwnProperty(e)||i("Unrecognized data set: "+e),n[e]}function UM(t,e){mt(e)||i("Second argument to changes must be a changeset.");var n=zM(this,t);return n.modified=!0,this.pulse(n.input,e)}function jM(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function VM(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function BM(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function HM(t){return t.item}function GM(t){var e=t.item.mark.source;return e.source||e}function qM(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}var WM=function(t,e,n){var r=document.createElement(t);for(var i in e)r.setAttribute(i,e[i]);return null!=n&&(r.textContent=n),r},YM="vega-bind-radio",XM="vega-option-";function $M(t,e,n,r){var i=WM("input");for(var o in n)"signal"!==o&&"element"!==o&&i.setAttribute("input"===o?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,e.appendChild(i),i.addEventListener("input",function(){t.update(i.value)}),t.elements=[i],t.set=function(t){i.value=t}}function QM(t,e,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var o=WM("input",i);e.appendChild(o),o.addEventListener("change",function(){t.update(o.checked)}),t.elements=[o],t.set=function(t){o.checked=!!t||null}}function ZM(t,e,n,r){var i=WM("select",{name:n.signal});n.options.forEach(function(t){var e={value:t};tS(t,r)&&(e.selected=!0),i.appendChild(WM("option",e,t+""))}),e.appendChild(i),i.addEventListener("change",function(){t.update(n.options[i.selectedIndex])}),t.elements=[i],t.set=function(t){for(var e=0,r=n.options.length;e<r;++e)if(tS(n.options[e],t))return void(i.selectedIndex=e)}}function JM(t,e,n,r){var i=WM("span",{class:YM});e.appendChild(i),t.elements=n.options.map(function(e){var o=XM+n.signal+"-"+e,a={id:o,type:"radio",name:n.signal,value:e};tS(e,r)&&(a.checked=!0);var s=WM("input",a);return s.addEventListener("change",function(){t.update(e)}),i.appendChild(s),i.appendChild(WM("label",{for:o},e+"")),s}),t.set=function(e){for(var n=t.elements,r=0,i=n.length;r<i;++r)tS(n[r].value,e)&&(n[r].checked=!0)}}function KM(t,e,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;var i=n.min||Math.min(0,+r)||0,o=n.max||Math.max(100,+r)||100,a=n.step||di(i,o,100),s=WM("input",{type:"range",name:n.signal,min:i,max:o,step:a});s.value=r;var u=WM("label",{},+r);function c(){u.textContent=s.value,t.update(+s.value)}e.appendChild(s),e.appendChild(u),s.addEventListener("input",c),s.addEventListener("change",c),t.elements=[s],t.set=function(t){s.value=t,u.textContent=t}}function tS(t,e){return t===e||t+""==e+""}var eS=function(t,e,n,r,i){return(e=e||new r(t.loader())).initialize(n,jM(t),VM(t),BM(t),i).background(t._background)};function nS(t,e){if("string"==typeof e){if("undefined"==typeof document)return t.error("DOM document instance not found."),null;if(!(e=document.querySelector(e)))return t.error("Signal bind element not found: "+e),null}if(e)try{e.innerHTML=""}catch(n){e=null,t.error(n)}return e}var rS=function(t,e,n){var r=Qc(e),i=r&&r.headless;return i?t.runAsync().then(function(){return eS(t,null,null,i,n).renderAsync(t._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+e)};function iS(t){return+t||0}var oS=["value","update","react","bind"];function aS(t,e){i(t+' for "outer" push: '+c(e))}var sS,uS,cS,lS,hS=function(t,e){var n=t.name;if("outer"===t.push)e.signals[n]||aS("No prior signal definition",n),oS.forEach(function(e){void 0!==t[e]&&aS("Invalid property ",e)});else{var r=e.addSignal(n,t.value);!1===t.react&&(r.react=!1),t.bind&&e.addBinding(n,t.bind)}};function fS(t){this.type=t}fS.prototype.visit=function(t){var e,n,r;if(t(this))return 1;for(n=0,r=(e=function(t){switch(t.type){case"ArrayExpression":return t.elements;case"BinaryExpression":case"LogicalExpression":return[t.left,t.right];case"CallExpression":var e=t.arguments.slice();return e.unshift(t.callee),e;case"ConditionalExpression":return[t.test,t.consequent,t.alternate];case"MemberExpression":return[t.object,t.property];case"ObjectExpression":return t.properties;case"Property":return[t.key,t.value];case"UnaryExpression":return[t.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}(this)).length;n<r;++n)if(e[n].visit(t))return 1};var dS=1,pS=2,mS=3,gS=4,vS=5,yS=6,wS=7,xS=8,bS="ArrayExpression",_S="BinaryExpression",MS="CallExpression",SS="ConditionalExpression",ES="Identifier",TS="Literal",AS="LogicalExpression",CS="MemberExpression",kS="ObjectExpression",RS="Property",OS="UnaryExpression",PS="Unexpected token %0",DS="Unexpected number",LS="Unexpected string",NS="Unexpected identifier",IS="Unexpected reserved word",FS="Unexpected end of input",zS="Invalid regular expression",US="Invalid regular expression: missing /",jS="Octal literals are not allowed in strict mode.",VS="Duplicate data property in object literal not allowed in strict mode",BS="ILLEGAL",HS="Disabled.",GS=new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),qS=new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]");function WS(t,e){if(!t)throw new Error("ASSERT: "+e)}function YS(t){return 48<=t&&t<=57}function XS(t){return 0<="0123456789abcdefABCDEF".indexOf(t)}function $S(t){return 0<="01234567".indexOf(t)}function QS(t){return 10===t||13===t||8232===t||8233===t}function ZS(t){return 36===t||95===t||65<=t&&t<=90||97<=t&&t<=122||92===t||128<=t&&GS.test(String.fromCharCode(t))}function JS(t){return 36===t||95===t||65<=t&&t<=90||97<=t&&t<=122||48<=t&&t<=57||92===t||128<=t&&qS.test(String.fromCharCode(t))}var KS={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function tE(){for(var t,e;uS<cS&&(32===(e=t=sS.charCodeAt(uS))||9===e||11===e||12===e||160===e||5760<=e&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)||QS(t));)++uS}function eE(t){var e,n,r,i=0;for(n="u"===t?4:2,e=0;e<n;++e)uS<cS&&XS(sS[uS])?(r=sS[uS++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):pE({},PS,BS);return String.fromCharCode(i)}function nE(){var t,e;for(e=0,"}"===(t=sS[uS])&&pE({},PS,BS);uS<cS&&XS(t=sS[uS++]);)e=16*e+"0123456789abcdef".indexOf(t.toLowerCase());return(1114111<e||"}"!==t)&&pE({},PS,BS),e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}function rE(){var t,e;for(t=sS.charCodeAt(uS++),e=String.fromCharCode(t),92===t&&(117!==sS.charCodeAt(uS)&&pE({},PS,BS),++uS,(t=eE("u"))&&"\\"!==t&&ZS(t.charCodeAt(0))||pE({},PS,BS),e=t);uS<cS&&JS(t=sS.charCodeAt(uS));)++uS,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==sS.charCodeAt(uS)&&pE({},PS,BS),++uS,(t=eE("u"))&&"\\"!==t&&JS(t.charCodeAt(0))||pE({},PS,BS),e+=t);return e}function iE(){var t,e,n,r,i=uS,o=sS.charCodeAt(uS),a=sS[uS];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++uS,{type:wS,value:String.fromCharCode(o),start:i,end:uS};default:if(61===(t=sS.charCodeAt(uS+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return uS+=2,{type:wS,value:String.fromCharCode(o)+String.fromCharCode(t),start:i,end:uS};case 33:case 61:return 61===sS.charCodeAt(uS+=2)&&++uS,{type:wS,value:sS.slice(i,uS),start:i,end:uS}}}return">>>="===(r=sS.substr(uS,4))?{type:wS,value:r,start:i,end:uS+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:wS,value:n,start:i,end:uS+=3}:a===(e=n.substr(0,2))[1]&&0<="+-<>&|".indexOf(a)||"=>"===e?{type:wS,value:e,start:i,end:uS+=2}:0<="<>=!+-*%&|^/".indexOf(a)?{type:wS,value:a,start:i,end:++uS}:void pE({},PS,BS)}function oE(){var t,e,n;if(WS(YS((n=sS[uS]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),e=uS,t="","."!==n){if(t=sS[uS++],n=sS[uS],"0"===t){if("x"===n||"X"===n)return++uS,function(t){for(var e="";uS<cS&&XS(sS[uS]);)e+=sS[uS++];return 0===e.length&&pE({},PS,BS),ZS(sS.charCodeAt(uS))&&pE({},PS,BS),{type:yS,value:parseInt("0x"+e,16),start:t,end:uS}}(e);if($S(n))return function(t){for(var e="0"+sS[uS++];uS<cS&&$S(sS[uS]);)e+=sS[uS++];return(ZS(sS.charCodeAt(uS))||YS(sS.charCodeAt(uS)))&&pE({},PS,BS),{type:yS,value:parseInt(e,8),octal:!0,start:t,end:uS}}(e);n&&YS(n.charCodeAt(0))&&pE({},PS,BS)}for(;YS(sS.charCodeAt(uS));)t+=sS[uS++];n=sS[uS]}if("."===n){for(t+=sS[uS++];YS(sS.charCodeAt(uS));)t+=sS[uS++];n=sS[uS]}if("e"===n||"E"===n)if(t+=sS[uS++],"+"!==(n=sS[uS])&&"-"!==n||(t+=sS[uS++]),YS(sS.charCodeAt(uS)))for(;YS(sS.charCodeAt(uS));)t+=sS[uS++];else pE({},PS,BS);return ZS(sS.charCodeAt(uS))&&pE({},PS,BS),{type:yS,value:parseFloat(t),start:e,end:uS}}function aE(){var t;return tE(),cS<=uS?{type:pS,start:uS,end:uS}:ZS(t=sS.charCodeAt(uS))?function(){var t,e;return t=uS,{type:1===(e=92===sS.charCodeAt(uS)?rE():function(){var t,e;for(t=uS++;uS<cS;){if(92===(e=sS.charCodeAt(uS)))return uS=t,rE();if(!JS(e))break;++uS}return sS.slice(t,uS)}()).length?mS:KS.hasOwnProperty(e)?gS:"null"===e?vS:"true"===e||"false"===e?dS:mS,value:e,start:t,end:uS}}():40===t||41===t||59===t?iE():39===t||34===t?function(){var t,e,n,r,i="",o=!1;for(WS("'"===(t=sS[uS])||'"'===t,"String literal must starts with a quote"),e=uS,++uS;uS<cS;){if((n=sS[uS++])===t){t="";break}if("\\"===n)if((n=sS[uS++])&&QS(n.charCodeAt(0)))"\r"===n&&"\n"===sS[uS]&&++uS;else switch(n){case"u":case"x":"{"===sS[uS]?(++uS,i+=nE()):i+=eE(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:$S(n)?(0!==(r="01234567".indexOf(n))&&(o=!0),uS<cS&&$S(sS[uS])&&(o=!0,r=8*r+"01234567".indexOf(sS[uS++]),0<="0123".indexOf(n)&&uS<cS&&$S(sS[uS])&&(r=8*r+"01234567".indexOf(sS[uS++]))),i+=String.fromCharCode(r)):i+=n}else{if(QS(n.charCodeAt(0)))break;i+=n}}return""!==t&&pE({},PS,BS),{type:xS,value:i,octal:o,start:e,end:uS}}():46===t?YS(sS.charCodeAt(uS+1))?oE():iE():YS(t)?oE():iE()}function sE(){var t;return uS=(t=lS).end,lS=aE(),uS=t.end,t}function uE(){var t;t=uS,lS=aE(),uS=t}function cE(t,e,n){var r=new fS("||"===t||"&&"===t?AS:_S);return r.operator=t,r.left=e,r.right=n,r}function lE(t){var e=new fS(ES);return e.name=t,e}function hE(t){var e=new fS(TS);return e.value=t.value,e.raw=sS.slice(t.start,t.end),t.regex&&("//"===e.raw&&(e.raw="/(?:)/"),e.regex=t.regex),e}function fE(t,e,n){var r=new fS(CS);return r.computed="["===t,r.object=e,r.property=n,r.computed||(n.member=!0),r}function dE(t,e,n){var r=new fS(RS);return r.key=e,r.value=n,r.kind=t,r}function pE(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,function(t,e){return WS(e<r.length,"Message reference must be in range"),r[e]});throw(n=new Error(i)).index=uS,n.description=i,n}function mE(t){t.type===pS&&pE(t,FS),t.type===yS&&pE(t,DS),t.type===xS&&pE(t,LS),t.type===mS&&pE(t,NS),t.type===gS&&pE(t,IS),pE(t,PS,t.value)}function gE(t){var e=sE();e.type===wS&&e.value===t||mE(e)}function vE(t){return lS.type===wS&&lS.value===t}function yE(t){return lS.type===gS&&lS.value===t}function wE(){var t;return uS=lS.start,(t=sE()).type===xS||t.type===yS?(t.octal&&pE(t,jS),hE(t)):lE(t.value)}var xE={if:1,this:1};function bE(){var t=[];if(gE("("),!vE(")"))for(;uS<cS&&(t.push(TE()),!vE(")"));)gE(",");return gE(")"),t}function _E(){var t,e;return uS=lS.start,(e=t=sE()).type!==mS&&e.type!==gS&&e.type!==dS&&e.type!==vS&&mE(t),lE(t.value)}function ME(){var t=function(){var t,e,n,r,i;for(t=function(){var t,e,n,r;if(vE("("))return gE("("),r=AE(),gE(")"),r;if(vE("["))return function(){var t,e,n=[];for(uS=lS.start,gE("[");!vE("]");)vE(",")?(sE(),n.push(null)):(n.push(TE()),vE("]")||gE(","));return sE(),t=n,(e=new fS(bS)).elements=t,e}();if(vE("{"))return function(){var t,e,n,r,i,o,a,s=[],u={},c=String;for(uS=lS.start,gE("{");!vE("}");)i=r=n=void 0,uS=lS.start,e="$"+((t=(n=lS).type===mS?(i=wE(),gE(":"),dE("init",i,TE())):n.type!==pS&&n.type!==wS?(r=wE(),gE(":"),dE("init",r,TE())):void mE(n)).key.type===ES?t.key.name:c(t.key.value)),Object.prototype.hasOwnProperty.call(u,e)?pE({},VS):u[e]=!0,s.push(t),vE("}")||gE(",");return gE("}"),o=s,(a=new fS(kS)).properties=o,a}();if(uS=lS.start,(t=lS.type)===mS||xE[lS.value])n=lE(sE().value);else if(t===xS||t===yS)lS.octal&&pE(lS,jS),n=hE(sE());else{if(t===gS)throw new Error(HS);t===dS?((e=sE()).value="true"===e.value,n=hE(e)):t===vS?((e=sE()).value=null,n=hE(e)):vE("/")||vE("/=")?(n=hE(function(){var t,e,n,r;return lS=null,tE(),t=uS,e=function(){var t,e,n,r;for(WS("/"===(t=sS[uS]),"Regular expression literal must start with a slash"),e=sS[uS++],r=n=!1;uS<cS;)if(e+=t=sS[uS++],"\\"===t)QS((t=sS[uS++]).charCodeAt(0))&&pE({},US),e+=t;else if(QS(t.charCodeAt(0)))pE({},US);else if(n)"]"===t&&(n=!1);else{if("/"===t){r=!0;break}"["===t&&(n=!0)}return r||pE({},US),{value:e.substr(1,e.length-2),literal:e}}(),n=function(){var t,e,n;for(n=e="";uS<cS&&JS((t=sS[uS]).charCodeAt(0));)++uS,"\\"===t&&uS<cS?pE({},PS,BS):(n+=t,e+=t);return 0<=n.search(/[^gimuy]/g)&&pE({},zS,n),{value:n,literal:e}}(),r=function(t,e){var n=t;0<=e.indexOf("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(t,e){if(parseInt(e,16)<=1114111)return"x";pE({},zS)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(t){pE({},zS)}try{return new RegExp(t,e)}catch(t){return null}}(e.value,n.value),{literal:e.literal+n.literal,value:r,regex:{pattern:e.value,flags:n.value},start:t,end:uS}}()),uE()):mE(sE())}return n}();;)if(vE("."))gE("."),t=fE(".",t,_E());else if(vE("("))n=t,r=bE(),i=void 0,(i=new fS(MS)).callee=n,i.arguments=r,t=i;else{if(!vE("["))break;e=void 0,gE("["),e=AE(),gE("]"),t=fE("[",t,e)}return t}();if(lS.type===wS&&(vE("++")||vE("--")))throw new Error(HS);return t}function SE(){var t,e,n,r,i;if(lS.type!==wS&&lS.type!==gS)e=ME();else{if(vE("++")||vE("--"))throw new Error(HS);if(vE("+")||vE("-")||vE("~")||vE("!"))t=sE(),e=SE(),n=t.value,r=e,(i=new fS(OS)).operator=n,i.argument=r,i.prefix=!0,e=i;else{if(yE("delete")||yE("void")||yE("typeof"))throw new Error(HS);e=ME()}}return e}function EE(t){var e=0;if(t.type!==wS&&t.type!==gS)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11}return e}function TE(){var t,e,n,r,i,o;return t=function(){var t,e,n,r,i,o,a,s,u,c;if(t=lS,u=SE(),0===(i=EE(r=lS)))return u;for(r.prec=i,sE(),e=[t,lS],o=[u,r,a=SE()];0<(i=EE(lS));){for(;2<o.length&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,u=o.pop(),e.pop(),n=cE(s,u,a),o.push(n);(r=sE()).prec=i,o.push(r),e.push(lS),n=SE(),o.push(n)}for(n=o[c=o.length-1],e.pop();1<c;)e.pop(),n=cE(o[c-1].value,o[c-2],n),c-=2;return n}(),vE("?")&&(sE(),e=TE(),gE(":"),n=t,r=e,i=TE(),(o=new fS(SS)).test=n,o.consequent=r,o.alternate=i,t=o),t}function AE(){var t=TE();if(vE(","))throw new Error(HS);return t}var CE={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},kE=function(t){function e(e,n,r){return function(i){return o=e,s=n,u=r,c=t((a=i)[0]),s&&(c=s+"("+c+")",0===s.lastIndexOf("new ",0)&&(c="("+c+")")),c+"."+o+(u<0?"":0===u?"()":"("+a.slice(1).map(t).join(",")+")");var o,a,s,u,c}}var n="new Date",r="String";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(e){e.length<3&&i("Missing arguments to clamp function."),3<e.length&&i("Too many arguments to clamp function.");var n=e.map(t);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:e("getDate",n,0),day:e("getDay",n,0),year:e("getFullYear",n,0),month:e("getMonth",n,0),hours:e("getHours",n,0),minutes:e("getMinutes",n,0),seconds:e("getSeconds",n,0),milliseconds:e("getMilliseconds",n,0),time:e("getTime",n,0),timezoneoffset:e("getTimezoneOffset",n,0),utcdate:e("getUTCDate",n,0),utcday:e("getUTCDay",n,0),utcyear:e("getUTCFullYear",n,0),utcmonth:e("getUTCMonth",n,0),utchours:e("getUTCHours",n,0),utcminutes:e("getUTCMinutes",n,0),utcseconds:e("getUTCSeconds",n,0),utcmilliseconds:e("getUTCMilliseconds",n,0),length:e("length",null,-1),indexof:e("indexOf",null),lastindexof:e("lastIndexOf",null),slice:e("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:e("toUpperCase",r,0),lower:e("toLowerCase",r,0),substring:e("substring",r),replace:e("replace",r),regexp:"RegExp",test:e("test","RegExp"),if:function(e){e.length<3&&i("Missing arguments to if function."),3<e.length&&i("Too many arguments to if function.");var n=e.map(t);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}},RE={};function OE(t,e,n){var r=t+":"+n,i=RE[r];return i&&i[0]===e||(RE[r]=i=[e,e(n)]),i[1]}function PE(t,e){return OE("timeFormat",nn,e)(t)}var DE=new Date(2e3,0,1);function LE(t,e,n){return DE.setMonth(t),DE.setDate(e),PE(DE,n)}function NE(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(e){t.warn(e)}return n[n.length-1]}var IE="undefined"!=typeof window&&window||null,FE="Literal",zE="Identifier",UE="@",jE="%",VE=":";function BE(t,e){var n;return N(t)?t:u(t)?(n=e.scales[t])&&n.value:void 0}function HE(t,e,n){var r=jE+n;if(!e.hasOwnProperty(r))try{e[r]=t.scaleRef(n)}catch(t){}}function GE(t,e,n,r){if(e[0].type===FE)HE(n,r,e[0].value);else if(e[0].type===zE)for(t in n.scales)HE(n,r,t)}function qE(t,e){return function(n,r,i){if(n){var o=BE(n,(i||this).context);return o&&o.path[t](r)}return e(r)}}var WE=qE("area",function(t){return pv.reset(),fv(t,mv),2*pv}),YE=qE("bounds",function(t){var e,n,r,i,o,a,s;if(sv=av=-(iv=ov=1/0),Av=[],fv(t,Rv),n=Av.length){for(Av.sort(Uv),e=1,o=[r=Av[0]];e<n;++e)jv(r,(i=Av[e])[0])||jv(r,i[1])?(zv(r[0],i[1])>zv(r[0],r[1])&&(r[1]=i[1]),zv(i[0],r[1])>zv(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)(s=zv(r[1],(i=o[e])[0]))>a&&(a=s,iv=i[0],av=r[1])}return Av=Cv=null,iv===1/0||ov===1/0?[[NaN,NaN],[NaN,NaN]]:[[iv,ov],[av,sv]]}),XE=qE("centroid",function(t){Vv=Bv=Hv=Gv=qv=Wv=Yv=Xv=$v=Qv=Zv=0,fv(t,ry);var e=$v,n=Qv,r=Zv,i=e*e+n*n+r*r;return i<1e-12&&(e=Wv,n=Yv,r=Xv,Bv<Tg&&(e=Hv,n=Gv,r=qv),(i=e*e+n*n+r*r)<1e-12)?[NaN,NaN]:[Ng(n,e)*Og,Wg(r/Hg(i))*Og]});function $E(t){var e=this.context.data[t];return e?e.values.value:[]}function QE(t,e,n,r){e[0].type!==FE&&i("First argument to data functions must be a string literal.");var o=e[0].value,a=VE+o;r.hasOwnProperty(a)||(r[a]=n.getData(o).tuplesRef())}var ZE={};function JE(t){return t.data}function KE(t,e){var n=$E.call(e,t);return n.root&&n.root.lookup||ZE}var tT=function(t,e,n,r){var i,o=e[0],a=e[e.length-1];return a<o&&(i=o,o=a,a=i),r=void 0===r||r,((n=void 0===n||n)?o<=t:o<t)&&(r?t<=a:t<a)};function eT(t,e){return t===e||t!=t&&e!=e||!(!a(t)||!a(e)||t.length!==e.length)&&function(t,e){for(var n=0,r=t.length;n<r;++n)if(!eT(t[n],e[n]))return!1;return!0}(t,e)}function nT(t){return function(e){for(var n in t)if(!eT(e[n],t[n]))return!1;return!0}}var rT="bin_",iT="intersect",oT="union",aT="index:unit";function sT(t,e){for(var n,r=e.fields,i=e.values,o=e.getter||(e.getter=[]),a=r.length,s=0;s<a;++s)if(o[s]=o[s]||l(r[s]),n=o[s](t),q(n)&&(n=_(n)),q(i[s])&&(i[s]=_(i[s])),e[rT+r[s]]){if(q(i[s][0])&&(i[s]=i[s].map(_)),!tT(n,i[s],!0,!1))return!1}else if(n!==i[s])return!1;return!0}function uT(t,e){for(var n,r,i=e.intervals,o=i.length,a=0;a<o;++a){if(n=i[a].extent,r=(i[a].getter||(i[a].getter=l(i[a].field)))(t),!n||n[0]===n[1])return!1;if(q(r)&&(r=_(r)),q(n[0])&&(n=i[a].extent=n.map(_)),W(n[0])&&!tT(r,n))return!1;if(u(n[0])&&n.indexOf(r)<0)return!1}return!0}function cT(t,e,n,r){for(var i,o,a,s,u,c=this.context.data[t],l=c?c.values.value:[],h=c?c[aT]&&c[aT].value:void 0,f=n===iT,d=l.length,p=0;p<d;++p)if(i=l[p],h&&f){if(-1===(a=(o=o||{})[s=i.unit]||0))continue;if(u=r(e,i),o[s]=u?-1:++a,u&&1===h.size)return!0;if(!u&&a===h.get(s).count)return!1}else if(f^(u=r(e,i)))return u;return d&&f}function lT(t,e,n){return cT.call(this,t,e,n,sT)}function hT(t,e,n,r){e[0].type!==FE&&i("First argument to indata must be a string literal.");var o=e[0].value,a=UE+"unit";(2<=e.length&&e[e.length-1].value)!==iT||r.hasOwnProperty(a)||(r[a]=n.getData(o).indataRef(n,"unit")),QE(0,e,n,r)}function fT(t,e,n,r){var i,o,a,s,u,c=this.context.data[t],l=c?c.values.value:[],h=c?c[aT]&&c[aT].value:void 0,f=l[0],d=0;if(f){for(i=e?f.encodings.length:f.fields.length;d<i;++d)if(e&&f.encodings[d]===e||n&&f.fields[d]===n){o=d,s=f[rT+f.fields[d]];break}return h&&1===h.size&&(r=oT),h&&r===iT?(u=l.reduce(function(t,e){return(t[e.unit]||(t[e.unit]=[])).push({unit:e.unit,value:e.values[o]}),t},{}),a=Object.keys(u).map(function(t){return{unit:t,value:s?pT(u[t],oT):dT(u[t],oT)}})):a=l.map(function(t){return{unit:t.unit,value:t.values[o]}}),s?pT(a,r):dT(a,r)}}function dT(t,e){for(var n,r,i,o,a={},s=0,u={},c=[],l=0,h=t.length;l<h;++l)r=(n=t[l]).unit,o=n.value,a[r]||(a[r]=++s),(i=u[o])||(u[o]=i={value:o,units:{},count:0}),i.units[r]||(i.units[r]=++i.count);for(o in u)i=u[o],e===iT&&i.count!==s||c.push(i.value);return c.length?c:void 0}function pT(t,e){for(var n,r,i,o,a=e===iT?gT:mT,s=0,u=t.length;s<u;++s)q((n=t[s].value)[0])&&(n=n.map(_)),(o=n[1])<(i=n[0])&&(o=n[0],i=n[1]),r=r?a(r,i,o):[i,o];return r&&r.length&&+r[0]!=+r[1]?r:void 0}function mT(t,e,n){return t[0]>e&&(t[0]=e),t[1]<n&&(t[1]=n),t}function gT(t,e,n){return n<t[0]||t[1]<e?[]:(t[0]<e&&(t[0]=e),t[1]>n&&(t[1]=n),t)}var vT={random:function(){return t.random()},isArray:a,isBoolean:G,isDate:q,isNumber:W,isObject:s,isRegExp:Y,isString:u,isTuple:ut,toBoolean:J,toDate:tt,toNumber:_,toString:et,pad:Z,peek:b,truncate:rt,rgb:vh,lab:Dh,hcl:Uh,hsl:xh,sequence:si,format:function(t,e){return OE("format",nd,e)(t)},utcFormat:function(t,e){return OE("utcFormat",on,e)(t)},utcParse:function(t,e){return OE("utcParse",an,e)(t)},timeFormat:PE,timeParse:function(t,e){return OE("timeParse",rn,e)(t)},monthFormat:function(t){return LE(t,1,"%B")},monthAbbrevFormat:function(t){return LE(t,1,"%b")},dayFormat:function(t){return LE(0,2+t,"%A")},dayAbbrevFormat:function(t){return LE(0,2+t,"%a")},quarter:function(t){return 1+~~(new Date(t).getMonth()/3)},utcquarter:function(t){return 1+~~(new Date(t).getUTCMonth()/3)},warn:function(){return NE(this.context.dataflow,"warn",arguments)},info:function(){return NE(this.context.dataflow,"info",arguments)},debug:function(){return NE(this.context.dataflow,"debug",arguments)},inScope:function(t){var e=this.context.group,n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n},clampRange:function(t,e,n){var r,i=t[0],o=t[1];return o<i&&(r=o,o=i,i=r),n-e<=(r=o-i)?[e,n]:[Math.min(Math.max(i,e),n-r),Math.min(Math.max(o,r),n)]},pinchDistance:function(t){var e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(t){var e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)},screen:function(){return IE?IE.screen:{}},containerSize:function(){var t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]},windowSize:function(){return IE?[IE.innerWidth,IE.innerHeight]:[void 0,void 0]},span:function(t){return t[t.length-1]-t[0]||0},flush:function(t,e,n,r,i,o){var a=Math.abs(e-t[0]),s=Math.abs(b(t)-e);return a<s&&a<=n?r:s<=n?i:o},bandspace:function(t,e,n){return ql(t||0,e||0,n||0)},inrange:tT,setdata:function(t,e){var n=this.context.dataflow;return n.pulse(this.context.data[t].input,n.changeset().remove(g).insert(e)),1},pathShape:function(t){var e=null;return function(n){return n?ms(n,e=e||us(t)):t}},panLinear:A,panLog:C,panPow:k,zoomLinear:O,zoomLog:P,zoomPow:D,encode:function(t,e,n){if(t){var r=this.context.dataflow;r.pulse(t.mark.source,r.changeset().encode(t,e))}return void 0!==n?n:t},modify:function(t,e,n,r,i,o){var s,u,c=this.context.dataflow,l=this.context.data[t],h=l.input,f=l.changes,d=c.stamp();if(!1===c._trigger||!(h.value.length||e||r))return 0;if((!f||f.stamp<d)&&(l.changes=f=c.changeset(),f.stamp=d,c.runAfter(function(){l.modified=!0,c.pulse(h,f).run()},!0,1)),n&&(s=!0===n?g:a(n)||ut(n)?n:nT(n),f.remove(s)),e&&f.insert(e),r&&(s=nT(r),h.value.some(s)?f.remove(s):f.insert(r)),i)for(u in o)f.modify(i,u,o[u]);return 1}},yT=["view","item","group","xy","x","y"],wT="this.",xT={};function bT(t,e,n){return 1===arguments.length?vT[t]:(vT[t]=e,n&&(xT[t]=n),MT&&(MT.functions[t]=wT+t),this)}bT("bandwidth",function(t,e){var n=BE(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0},GE),bT("copy",function(t,e){var n=BE(t,(e||this).context);return n?n.copy():void 0},GE),bT("domain",function(t,e){var n=BE(t,(e||this).context);return n?n.domain():[]},GE),bT("range",function(t,e){var n=BE(t,(e||this).context);return n&&n.range?n.range():[]},GE),bT("invert",function(t,e,n){var r=BE(t,(n||this).context);return r?a(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0},GE),bT("scale",function(t,e,n){var r=BE(t,(n||this).context);return r?r(e):void 0},GE),bT("gradient",function(t,e,n,r,i){t=BE(t,(i||this).context);var o=jo(e,n),a=t.domain(),s=a[0],u=a[a.length-1],c=gm(t,s,u);t.ticks&&(s!==(a=t.ticks(+r||15))[0]&&a.unshift(s),u!==a[a.length-1]&&a.push(u));for(var l=0,h=a.length;l<h;++l)o.stop(c(a[l]),t(a[l]));return o},GE),bT("geoArea",WE,GE),bT("geoBounds",YE,GE),bT("geoCentroid",XE,GE),bT("geoShape",function(t,e,n){var r=BE(t,(n||this).context);return function(t){return r?r.path.context(t)(e):""}},GE),bT("indata",function(t,e,n){var r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i?i.count:i},function(t,e,n,r){e[0].type!==FE&&i("First argument to indata must be a string literal."),e[1].type!==FE&&i("Second argument to indata must be a string literal.");var o=e[0].value,a=e[1].value,s=UE+a;r.hasOwnProperty(s)||(r[s]=n.getData(o).indataRef(n,a))}),bT("data",$E,QE),bT("vlSingle",lT,QE),bT("vlSingleDomain",fT,QE),bT("vlMulti",lT,hT),bT("vlMultiDomain",fT,hT),bT("vlInterval",function(t,e,n){return cT.call(this,t,e,n,uT)},QE),bT("vlIntervalDomain",function(t,e,n,r){var i,o,a,s,u,c=this.context.data[t],l=c?c.values.value:[],h=l[0],f=0;if(h){for(i=h.intervals.length;f<i;++f)if(o=h.intervals[f],e&&o.encoding===e||n&&o.field===n){if(!o.extent)return;a=f,u=2<o.extent.length;break}return s=l.reduce(function(t,e){var n=e.intervals[a].extent,r=u?n.map(function(t){return{unit:e.unit,value:t}}):{unit:e.unit,value:n};return u?t.push.apply(t,r):t.push(r),t},[]),u?dT(s,r):pT(s,r)}},QE),bT("treePath",function(t,e,n){var r=KE(t,this),i=r[e],o=r[n];return i&&o?i.path(o).map(JE):void 0},QE),bT("treeAncestors",function(t,e){var n=KE(t,this)[e];return n?n.ancestors().map(JE):void 0},QE);var _T={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(t){return"_["+c("$"+t)+"]"},functions:function(t){var e=kE(t);for(var n in yT.forEach(function(t){e[t]="event.vega."+t}),vT)e[n]=wT+n;return e},constants:CE,visitors:xT},MT=function(t){var e=(t=t||{}).whitelist?nt(t.whitelist):{},n=t.blacklist?nt(t.blacklist):{},r=t.constants||CE,o=(t.functions||kE)(d),a=t.globalvar,s=t.fieldvar,c={},l={},h=0,f=N(a)?a:function(t){return a+'["'+t+'"]'};function d(t){if(u(t))return t;var e=p[t.type];return null==e&&i("Unsupported type: "+t.type),e(t)}var p={Literal:function(t){return t.raw},Identifier:function(t){var o=t.name;return 0<h?o:n.hasOwnProperty(o)?i("Illegal identifier: "+o):r.hasOwnProperty(o)?r[o]:e.hasOwnProperty(o)?o:(c[o]=1,f(o))},MemberExpression:function(t){var e=!t.computed,n=d(t.object);e&&(h+=1);var r=d(t.property);return n===s&&(l[r]=1),e&&(h-=1),n+(e?"."+r:"["+r+"]")},CallExpression:function(t){"Identifier"!==t.callee.type&&i("Illegal callee type: "+t.callee.type);var e=t.callee.name,n=t.arguments,r=o.hasOwnProperty(e)&&o[e];return r||i("Unrecognized function: "+e),N(r)?r(n):r+"("+n.map(d).join(",")+")"},ArrayExpression:function(t){return"["+t.elements.map(d).join(",")+"]"},BinaryExpression:function(t){return"("+d(t.left)+t.operator+d(t.right)+")"},UnaryExpression:function(t){return"("+t.operator+d(t.argument)+")"},ConditionalExpression:function(t){return"("+d(t.test)+"?"+d(t.consequent)+":"+d(t.alternate)+")"},LogicalExpression:function(t){return"("+d(t.left)+t.operator+d(t.right)+")"},ObjectExpression:function(t){return"{"+t.properties.map(d).join(",")+"}"},Property:function(t){h+=1;var e=d(t.key);return h-=1,e+":"+d(t.value)}};function m(t){var e={code:d(t),globals:Object.keys(c),fields:Object.keys(l)};return c={},l={},e}return m.functions=o,m.constants=r,m}(_T),ST=function(t,e,n){var r,o,a={};try{r=function(t){uS=0,cS=(sS=t).length,lS=null,uE();var e=AE();if(lS.type!==pS)throw new Error("Unexpect token after expression.");return e}(t)}catch(n){i("Expression parse error: "+c(t))}return r.visit(function(t){if("CallExpression"===t.type){var n=t.callee.name,r=_T.visitors[n];r&&r(n,t.arguments,e,a)}}),(o=MT(r)).globals.forEach(function(t){var n="$"+t;!a.hasOwnProperty(n)&&e.getSignal(t)&&(a[n]=e.signalRef(t))}),{$expr:n?n+"return("+o.code+");":o.code,$fields:o.fields,$params:a}},ET="view",TT="scope";function AT(t,e){return(t.merge?function(t,e){var n=CT({merge:t.merge.map(function(t){return AT(t,e)})},t,e);return e.addStream(n).id}:t.stream?function(t,e){var n=CT({stream:AT(t.stream,e)},t,e);return e.addStream(n).id}:t.type?function(t,e){var n,r=e.event((n=t.source)===TT?ET:n||ET,t.type),i=CT({stream:r},t,e);return 1===Object.keys(i).length?r:e.addStream(i).id}:i("Invalid stream specification: "+c(t)))(t,e)}function CT(t,e,n){var r,o,a,s,u=e.between;return u&&(2!==u.length&&i('Stream "between" parameter must have 2 entries: '+c(e)),t.between=[AT(u[0],n),AT(u[1],n)]),u=e.filter?L(e.filter):[],(e.marktype||e.markname||e.markrole)&&u.push((o=e.markname,a=e.markrole,(s="event.item")+((r=e.marktype)&&"*"!==r?"&&"+s+".mark.marktype==='"+r+"'":"")+(a?"&&"+s+".mark.role==='"+a+"'":"")+(o?"&&"+s+".mark.name==='"+o+"'":""))),e.source===TT&&u.push("inScope(event.item)"),u.length&&(t.filter=ST("("+u.join(")&&(")+")").$expr),null!=(u=e.throttle)&&(t.throttle=+u),null!=(u=e.debounce)&&(t.debounce=+u),e.consume&&(t.consume=!0),t}var kT,RT,OT="[",PT="]",DT="{",LT="}",NT=":",IT=",",FT="@",zT=">",UT=/[[\]{}]/,jT={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function VT(t,e,n,r,i){for(var o,a=0,s=t.length;e<s;++e){if(o=t[e],!a&&o===n)return e;i&&0<=i.indexOf(o)?--a:r&&0<=r.indexOf(o)&&++a}return e}function BT(t){for(var e=[],n=0,r=t.length,i=0;i<r;)i=VT(t,i,IT,OT+DT,PT+LT),e.push(t.substring(n,i).trim()),n=++i;if(0===e.length)throw"Empty event selector: "+t;return e}function HT(t){return"["===t[0]?function(t){var e,n,r=t.length,i=1;if((i=VT(t,i,PT,OT,PT))===r)throw"Empty between selector: "+t;if(2!==(e=BT(t.substring(1,i))).length)throw"Between selector must have two elements: "+t;if((t=t.slice(i+1).trim())[0]!==zT)throw"Expected '>' after between selector: "+t;return e=e.map(HT),(n=HT(t.slice(1).trim())).between?{between:e,stream:n}:(n.between=e,n)}(t):function(t){var e,n,r={source:kT},i=[],o=[0,0],a=0,s=0,u=t.length,c=0;if(t[u-1]===LT){if(!(0<=(c=t.lastIndexOf(DT))))throw"Unmatched right brace: "+t;try{o=function(t){var e=t.split(IT);if(!t.length||2<e.length)throw t;return e.map(function(e){var n=+e;if(n!=n)throw t;return n})}(t.substring(c+1,u-1))}catch(e){throw"Invalid throttle specification: "+t}u=(t=t.slice(0,c).trim()).length,c=0}if(!u)throw t;if(t[0]===FT&&(a=++c),(e=VT(t,c,NT))<u&&(i.push(t.substring(s,e).trim()),s=c=++e),(c=VT(t,c,OT))===u)i.push(t.substring(s,u).trim());else if(i.push(t.substring(s,c).trim()),n=[],(s=++c)===u)throw"Unmatched left bracket: "+t;for(;c<u;){if((c=VT(t,c,PT))===u)throw"Unmatched left bracket: "+t;if(n.push(t.substring(s,c).trim()),c<u-1&&t[++c]!==OT)throw"Expected left bracket: "+t;s=++c}if(!(u=i.length)||UT.test(i[u-1]))throw"Invalid event selector: "+t;return 1<u?(r.type=i[1],a?r.markname=i[0].slice(1):RT.hasOwnProperty(i[0])?r.marktype=i[0]:r.source=i[0]):r.type=i[0],"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1)),null!=n&&(r.filter=n),o[0]&&(r.throttle=o[0]),o[1]&&(r.debounce=o[1]),r}(t)}var GT="var datum=event.item&&event.item.datum;";function qT(t,e,n,r){this.id=-1,this.type=t,this.value=e,this.params=n,r&&(this.parent=r)}function WT(t,e,n,r){return new qT(t,e,n,r)}function YT(t,e){return WT("operator",t,e)}function XT(t){var e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}var $T={$tupleid:1,toString:function(){return":_tupleid_:"}};function QT(t,e){return e?{$field:t,$name:e}:{$field:t}}var ZT=QT("key");function JT(t,e){return{$compare:t,$order:e}}var KT="descending";function tA(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}function eA(t){return t&&t.signal}function nA(t,e){return null!=t?t:e}function rA(t){return function(e,n,r){return WT(t,n,e||void 0,r)}}var iA=rA("aggregate"),oA=rA("axisticks"),aA=rA("bound"),sA=rA("collect"),uA=rA("compare"),cA=rA("datajoin"),lA=rA("encode"),hA=rA("facet"),fA=rA("field"),dA=rA("key"),pA=rA("legendentries"),mA=rA("mark"),gA=rA("multiextent"),vA=rA("multivalues"),yA=rA("overlap"),wA=rA("params"),xA=rA("prefacet"),bA=rA("projection"),_A=rA("proxy"),MA=rA("relay"),SA=rA("render"),EA=rA("scale"),TA=rA("sieve"),AA=rA("sortitems"),CA=rA("viewlayout"),kA=rA("values"),RA=0,OA=["identity","ordinal","band","point","bin-linear","bin-ordinal","linear","pow","sqrt","log","sequential","time","utc","quantize","quantile","threshold"],PA=nt(OA),DA=nt(OA.slice(1,6));function LA(t){return DA.hasOwnProperty(t)}function NA(t){return"quantile"===t}function IA(t,e){return s(t)?t.signal?e.signalRef(t.signal):i("Unsupported object: "+c(t)):t}function FA(t){i("Can not find data set: "+c(t))}function zA(t,e,n){if(t)return t.signal?n.signalRef(t.signal):(a(t)?function(t,e,n){return t.map(function(t){return IA(t,n)})}:t.fields?function(t,e,n){var r=t.data,i=t.fields.reduce(function(t,e){return e=u(e)?{data:r,field:e}:a(e)||e.signal?function(t,e){var n="_:vega:_"+RA++,r=sA({});if(a(t))r.value={$ingest:t};else if(t.signal){var i="setdata("+c(n)+","+t.signal+")";r.params.input=e.signalRef(i)}return e.addDataPipeline(n,[r,TA({})]),{data:n,field:"data"}}(e,n):e,t.push(e),t},[]);return(LA(e.type)?function(t,e,n){var r,i,o;return r=n.map(function(t){var n=e.getData(t.data);return n||FA(t.data),n.countsRef(e,t.field)}),i=e.add(iA({groupby:ZT,ops:["sum"],fields:[e.fieldRef("count")],as:["count"],pulse:r})),o=e.add(sA({pulse:XT(i)})),XT(e.add(kA({field:ZT,sort:e.sortRef(UA(t.sort,!0)),pulse:XT(o)})))}:NA(e.type)?function(t,e,n){var r=n.map(function(t){var n=e.getData(t.data);return n||FA(t.data),n.domainRef(e,t.field)});return XT(e.add(vA({values:r})))}:function(t,e,n){var r=n.map(function(t){var n=e.getData(t.data);return n||FA(t.data),n.extentRef(e,t.field)});return XT(e.add(gA({extents:r})))})(t,n,i)}:function(t,e,n){var r=n.getData(t.data);return r||FA(t.data),LA(e.type)?r.valuesRef(n,t.field,UA(t.sort,!1)):NA(e.type)?r.domainRef(n,t.field):r.extentRef(n,t.field)})(t,e,n);null==e.domainMin&&null==e.domainMax||i("No scale domain defined for domainMin/domainMax to override.")}function UA(t,e){return t&&(t.field||t.op?t.field||"count"===t.op?e&&t.field?i("Multiple domain scales can not sort by field."):e&&t.op&&"count"!==t.op&&i("Multiple domain scales support op count only."):i("No field provided for sort aggregate op: "+t.op):s(t)?t.field="key":t={field:"key"}),t}function jA(t,e,n){return a(t)?t.map(function(t){return jA(t,e,n)}):s(t)?t.signal?n.signalRef(t.signal):"fit"===e?t:i("Unsupported parameter object: "+c(t)):t}var VA="top",BA="left",HA="bottom",GA="label",qA="value",WA="guide-label",YA="guide-title",XA=["shape","size","fill","stroke","strokeDash","opacity"],$A={name:1,interactive:1},QA=nt(["rule"]),ZA=nt(["group","image","rect"]),JA=function(t,e){var n="";return QA[e]||(t.x2&&(t.x?(ZA[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(ZA[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n},KA=function(t,e,n,r){var i=ST(t,e);return i.$fields.forEach(function(t){r[t]=1}),U(n,i.$params),i.$expr},tC=function(t,e,n,r){return function t(e,n,r,a){var s,l,h;if(e.signal)s="datum",h=KA(e.signal,n,r,a);else if(e.group||e.parent){for(l=Math.max(1,e.level||1),s="item";0<l--;)s+=".mark.group";e.parent?(h=e.parent,s+=".datum"):h=e.group}else e.datum?(s="datum",h=e.datum):i("Invalid field reference: "+c(e));return e.signal||(u(h)?(a[h]=1,h=o(h).map(c).join("][")):h=t(h,n,r,a)),s+"["+h+"]"}(s(t)?t:{datum:t},e,n,r)};function eC(t,e,n,r){var i;if(u(t))n.hasOwnProperty(i=jE+t)||(n[i]=e.scaleRef(t)),i=c(i);else{for(i in e.scales)n[jE+i]=e.scaleRef(i);i=c(jE)+"+"+(t.signal?"("+KA(t.signal,e,n,r)+")":tC(t,e,n,r))}return"_["+i+"]"}var nC=function(t,e,n,r){return s(t)?"("+rC(null,t,e,n,r)+")":t},rC=function(t,e,n,r,i){if(null!=e.gradient)return"this.gradient("+eC((o=e).gradient,n,r,i)+","+c(o.start)+","+c(o.stop)+","+c(o.count)+")";var o,a=e.signal?KA(e.signal,n,r,i):e.color?function(t,e,n,r){function i(t,i,o,a){return"this."+t+"("+[rC(null,i,e,n,r),rC(null,o,e,n,r),rC(null,a,e,n,r)].join(",")+").toString()"}return t.c?i("hcl",t.h,t.c,t.l):t.h||t.s?i("hsl",t.h,t.s,t.l):t.l||t.a?i("lab",t.l,t.a,t.b):t.r||t.g||t.b?i("rgb",t.r,t.g,t.b):null}(e.color,n,r,i):null!=e.field?tC(e.field,n,r,i):void 0!==e.value?c(e.value):void 0;return null!=e.scale&&(a=function(t,e,n,r,i){var o,a,s,c=eC(t.scale,n,r,i);return null!=t.range?(a=c+".range()",e=0==(o=+t.range)?a+"[0]":"($="+a+","+(1===o?"$[$.length-1]":"$[0]+"+o+"*($[$.length-1]-$[0])")+")"):(void 0!==e&&(e=c+"("+e+")"),t.band&&(s=function(t,e){if(!u(t))return-1;var n=e.scaleType(t);return"band"===n||"point"===n?1:0}(t.scale,n))&&(o=(a=c+".bandwidth")+"()"+(1==(o=+t.band)?"":"*"+o),s<0&&(o="("+a+"?"+o+":0)"),e=(e?e+"+":"")+o,t.extra&&(e="(datum.extra?"+c+"(datum.extra.value):"+e+")")),null==e&&(e="0")),e}(e,a,n,r,i)),void 0===a&&(a=null),null!=e.exponent&&(a="Math.pow("+a+","+nC(e.exponent,n,r,i)+")"),null!=e.mult&&(a+="*"+nC(e.mult,n,r,i)),null!=e.offset&&(a+="+"+nC(e.offset,n,r,i)),e.round&&(a="Math.round("+a+")"),a},iC=function(t,e,n){return t+"["+c(e)+"]="+n+";"},oC=function(t,e,n,r,i){var o="";return e.forEach(function(e){var a=rC(t,e,n,r,i);o+=e.test?KA(e.test,n,r,i)+"?"+a+":":a}),iC("o",t,o)};function aC(t,e,n,r){var i,o,s,u={},c="var o=item,datum=o.datum,$;";for(i in t)a(o=t[i])?c+=oC(i,o,r,n,u):(s=rC(i,o,r,n,u),c+=iC("o",i,s));return c+=JA(t,e),{$expr:c+="return 1;",$fields:Object.keys(u),$output:Object.keys(t)}}var sC="mark",uC="frame",cC="legend-label";function lC(t){return s(t)?t:{value:t}}function hC(t,e,n){return null!=n?(t[e]=s(n)&&!a(n)?n:{value:n},1):0}function fC(t,e,n){for(var r in e)n&&n.hasOwnProperty(r)||(t[r]=U(t[r]||{},e[r]));return t}function dC(t,e,n,r,i,o){var a,s;for(s in(o=o||{}).encoders={$encode:a={}},t=function(t,e,n,r,i){var o,a,s={};for(o in"legend"!=n&&0!==String(n).indexOf("axis")||(n=null),a=n===uC?i.group:n===sC?U({},i.mark,i[e]):null)pC(o,t)||("fill"===o||"stroke"===o)&&(pC("fill",t)||pC("stroke",t))||(s[o]={value:a[o]});return L(r).forEach(function(e){var n=i.style&&i.style[e];for(var r in n)pC(r,t)||(s[r]={value:n[r]})}),(t=U({},t)).enter=U(s,t.enter),t}(t,e,n,r,i.config))a[s]=aC(t[s],e,o,i);return o}function pC(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}var mC=function(t,e,n,r,i,o,a){return{type:t,name:a?a.name:void 0,role:e,style:a&&a.style||n,key:r,from:i,interactive:!(!a||!a.interactive),encode:fC(o,a,$A)}},gC="group",vC="rule",yC="text",wC=function(t,e,n,r,i,o,a){return{type:gC,name:n,role:t,style:e,from:r,interactive:i||!1,encode:o,marks:a}};function xC(t){return s(t)&&t.signal?t.signal:c(t)}var bC=function(t){var e=t.role||"";return e.indexOf("axis")&&e.indexOf("legend")?t.type===gC?"scope":e||sC:e},_C=function(t,e){var n=Vr(t.type);n||i("Unrecognized transform type: "+c(t.type));var r=WT(n.type.toLowerCase(),null,MC(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(r)),r.metadata=n.metadata||{},r};function MC(t,e,n){var r,i,o,a={};for(i=0,o=t.params.length;i<o;++i)a[(r=t.params[i]).name]=SC(r,e,n);return a}function SC(t,e,n){var r,o,s,l=t.type,h=e[t.name];return"index"===l?function(t,e,n){return u(e.from)||i('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}(0,e,n):void 0!==h?"param"===l?(o=n,s=e[(r=t).name],r.array?(a(s)||i("Expected an array of sub-parameters. Instead: "+c(s)),s.map(function(t){return TC(r,t,o)})):TC(r,s,o)):"projection"===l?n.projectionRef(e[t.name]):t.array&&!eA(h)?h.map(function(e){return EC(t,e,n)}):EC(t,h,n):void(t.required&&i("Missing required "+c(e.type)+" parameter: "+c(t.name)))}function EC(t,e,n){var r=t.type;if(eA(e))return AC(r)?i("Expression references can not be signals."):CC(r)?n.fieldRef(e):kC(r)?n.compareRef(e):n.signalRef(e.signal);var o,a,s=t.expr||CC(r);return s&&(a=e)&&a.expr?ST(e.expr,n):s&&(o=e)&&o.field?QT(e.field):AC(r)?ST(e,n):"data"===r?XT(n.getData(e).values):CC(r)?QT(e):kC(r)?n.compareRef(e):e}function TC(t,e,n){var r,o,a,s,u;for(s=0,u=t.params.length;s<u;++s){for(a in(o=t.params[s]).key)if(o.key[a]!==e[a]){o=null;break}if(o)break}return o||i("Unsupported parameter: "+c(e)),r=U(MC(o,e,n),o.key),XT(n.add(wA(r)))}function AC(t){return"expr"===t}function CC(t){return"field"===t}function kC(t){return"compare"===t}function RC(t,e,n,r,i){this.scope=t,this.input=e,this.output=n,this.values=r,this.aggregate=i,this.index={}}RC.fromEntries=function(t,e){var n=e.length,r=1,i=e[0],o=e[n-1],a=e[n-2],s=null;for(t.add(e[0]);r<n;++r)e[r].params.pulse=XT(e[r-1]),t.add(e[r]),"aggregate"===e[r].type&&(s=e[r]);return new RC(t,i,a,o,s)};var OC=RC.prototype;function PC(t){return u(t)?t:null}function DC(t,e,n){var r,i=tA(n.op,n.field);if(e.ops){for(var o=0,a=e.as.length;o<a;++o)if(e.as[o]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((r=n.op.signal)?t.signalRef(r):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function LC(t,e,n,r,i,o,a){var u,c,l,h=e[n]||(e[n]={}),f=s(l=o)?(l.order===KT?"-":"+")+tA(l.op,l.field):"",d=PC(i);if(null!=d&&(t=e.scope,u=h[d+=f?"|"+f:""]),!u){var p=o?{field:ZT,pulse:e.countsRef(t,i,o)}:{field:t.fieldRef(i),pulse:XT(e.output)};f&&(p.sort=t.sortRef(o)),c=t.add(WT(r,void 0,p)),a&&(e.index[i]=c),u=XT(c),null!=d&&(h[d]=u)}return u}OC.countsRef=function(t,e,n){var r,i,o,a=this.counts||(this.counts={}),s=PC(e);return null!=s&&(t=this.scope,r=a[s]),r?n&&n.field&&DC(t,r.agg.params,n):(o={groupby:t.fieldRef(e,"key"),pulse:XT(this.output)},n&&n.field&&DC(t,o,n),r={agg:i=t.add(iA(o)),ref:XT(r=t.add(sA({pulse:XT(i)})))},null!=s&&(a[s]=r)),r.ref},OC.tuplesRef=function(){return XT(this.values)},OC.extentRef=function(t,e){return LC(t,this,"extent","extent",e,!1)},OC.domainRef=function(t,e){return LC(t,this,"domain","values",e,!1)},OC.valuesRef=function(t,e,n){return LC(t,this,"vals","values",e,n||!0)},OC.lookupRef=function(t,e){return LC(t,this,"lookup","tupleindex",e,!1)},OC.indataRef=function(t,e){return LC(t,this,"indata","tupleindex",e,!0,!0)};var NC=function(t,e,n){var r,i,o=t.remove,a=t.insert,s=t.toggle,u=t.modify,c=t.values,l=e.add(YT());r="if("+t.trigger+',modify("'+n+'",'+[a,o,s,u,c].map(function(t){return null==t?"null":t}).join(",")+"),0)",i=ST(r,e),l.update=i.$expr,l.params=i.$params},IC=function(t,e){var n,r,o,a,u,l,h,f,d,p,m,g,v,y,w,x,b,_,M,S,E,T,A,C,k,R,O,P,D,N,I,F,z,j,V,B,H,G,q,W,Y=bC(t),X=t.type===gC,$=t.from&&t.from.facet,Q=t.layout||"scope"===Y||Y===uC,Z=Y===sC||Q||$,J=t.overlap;w=e,(y=t.from)?(x=y.facet)&&(X||i("Only group marks can be faceted."),null!=x.field?M=S=XT(w.getData(x.data).output):(y.data?S=XT(w.getData(y.data).aggregate):((_=_C(U({type:"aggregate",groupby:L(x.groupby)},x.aggregate),w)).params.key=w.keyRef(x.groupby),_.params.pulse=XT(w.getData(x.data).output),M=S=XT(w.add(_))),b=w.keyRef(x.groupby,!0))):M=XT(w.add(sA(null,[{}]))),M||(M=y.$ref?y:XT(w.getData(y.data).output)),d=XT(r=e.add(cA({key:(o={key:b,pulse:M,parent:S}).key||(t.key?QT(t.key):void 0),pulse:o.pulse,clean:!X}))),r=a=e.add(sA({pulse:d})),p=XT(r=e.add(mA({markdef:(R=t,{marktype:R.type,name:R.name||void 0,role:R.role||bC(R),zindex:+R.zindex||void 0}),interactive:(C=t.interactive,k=e,C&&C.signal?k.signalRef(C.signal):!1!==C),clip:(E=t.clip,T=e,s(E)&&(E.signal?A=E.signal:E.path?A="pathShape("+xC(E.path)+")":E.sphere&&(A="geoShape("+xC(E.sphere)+', {type: "Sphere"})')),A?T.signalRef(A):!!E),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:XT(r)}))),(r=e.add(lA(dC(t.encode,t.type,Y,t.style,e,{pulse:p})))).params.parent=e.encode(),t.transform&&t.transform.forEach(function(t){var n=_C(t,e);(n.metadata.generates||n.metadata.changes)&&i("Mark transforms should not generate new data."),n.params.pulse=XT(r),e.add(r=n)}),t.sort&&(r=e.add(AA({sort:e.compareRef(t.sort,!0),pulse:XT(r)}))),m=XT(r),($||Q)&&(g=XT(Q=e.add(CA({layout:e.objectProperty(t.layout),legendMargin:e.config.legendMargin,mark:p,pulse:m})))),v=XT(u=e.add(aA({mark:p,pulse:g||m}))),X&&(Z&&((n=e.operators).pop(),Q&&n.pop()),e.pushState(m,g||v,d),$?(z=o,q=(G=(I=t).from.facet).name,W=XT((F=e).getData(G.data).output),G.name||i("Facet must have a name: "+c(G)),G.data||i("Facet must reference a data set: "+c(G)),G.field?H=F.add(xA({field:F.fieldRef(G.field),pulse:W})):G.groupby?H=F.add(hA({key:F.keyRef(G.groupby),group:XT(F.proxy(z.parent)),pulse:W})):i("Facet must specify groupby or field: "+c(G)),V=(j=F.fork()).add(sA()),B=j.add(TA({pulse:XT(V)})),j.addData(q,new RC(j,V,V,B)),j.addSignal("parent",null),H.params.subflow={$subflow:VC(I,j).toRuntime()}):Z?(O=t,D=(P=e).add(xA({pulse:o.pulse})),(N=P.fork()).add(TA()),N.addSignal("parent",null),D.params.subflow={$subflow:VC(O,N).toRuntime()}):VC(t,e),e.popState(),Z&&(Q&&n.push(Q),n.push(u))),J&&(r={method:!0===J.method?"parity":J.method,pulse:v},J.order&&(r.sort=e.compareRef({field:J.order})),J.bound&&(r.boundScale=e.scaleRef(J.bound.scale),r.boundOrient=J.bound.orient,r.boundTolerance=J.bound.tolerance),v=XT(e.add(yA(r)))),l=e.add(SA({pulse:v})),h=e.add(TA({pulse:XT(l)},void 0,e.parent())),null!=t.name&&(e.addData(f=t.name,new RC(e,a,l,h)),t.on&&t.on.forEach(function(t){(t.insert||t.remove||t.toggle)&&i("Marks only support modify triggers."),NC(t,e,f)}))};function FC(t,e,n,r){var i=e&&(e.update&&e.update[n]||e.enter&&e.enter[n]);return+(i?i.value:r&&(i=t.config.style[r])&&i[n])}function zC(t){var e=sA({},t);return e.metadata={source:!0},e}function UC(t,e){return{scale:t.scale,range:e}}function jC(t,e,n,r,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+r+","+i+")"}}var VC=function(t,e,n){var r=L(t.signals),o=L(t.scales);return n||r.forEach(function(t){hS(t,e)}),L(t.projections).forEach(function(t){!function(t,e){var n={};for(var r in t)"name"!==r&&(n[r]=jA(t[r],r,e));e.addProjection(t.name,n)}(t,e)}),o.forEach(function(t){var n,r,o;r=e,o=(n=t).type||"linear",PA.hasOwnProperty(o)||i("Unrecognized scale type: "+c(o)),r.addScale(n.name,{type:o,domain:void 0})}),L(t.data).forEach(function(t){var n,r,i;r=e,i=[],(n=t).transform&&n.transform.forEach(function(t){i.push(_C(t,r))}),n.on&&n.on.forEach(function(t){NC(t,r,n.name)}),r.addDataPipeline(n.name,function(t,e,n){var r,i,o,a,s,u=[],c=null,l=!1,h=!1;for(t.values?u.push(c=zC({$ingest:t.values,$format:t.format})):t.url?u.push(c=zC({$request:t.url,$format:t.format})):t.source&&(c=r=L(t.source).map(function(t){return XT(e.getData(t).output)}),u.push(null)),i=0,o=n.length;i<o;++i)s=(a=n[i]).metadata,c||s.source||u.push(c=zC()),u.push(a),s.generates&&(h=!0),s.modifies&&!h&&(l=!0),s.source?c=a:s.changes&&(c=null);return r&&(u[0]=MA({derive:l,pulse:(o=r.length-1)?r:r[0]}),(l||o)&&u.splice(1,0,zC())),c||u.push(zC()),u.push(TA({})),u}(n,r,i))}),o.forEach(function(t){!function(t,e){var n,r,o,l,h=e.getScale(t.name).params;for(n in h.domain=zA(t.domain,t,e),null!=t.range&&(h.range=function t(e,n,r){var o,s,l=e.range,h=n.config.range;if(l.signal)return n.signalRef(l.signal);if(u(l)){if(h&&h.hasOwnProperty(l))return t(e=U({},e,{range:h[l]}),n,r);"width"===l?l=[0,{signal:"width"}]:"height"===l?l=LA(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:i("Unrecognized scale range value: "+c(l))}else{if(l.scheme)return r.scheme=IA(l.scheme,n),l.extent&&(r.schemeExtent=(s=n,(o=l.extent).signal?s.signalRef(o.signal):o.map(function(t){return IA(t,s)}))),void(l.count&&(r.schemeCount=IA(l.count,n)));if(l.step)return void(r.rangeStep=IA(l.step,n));if(LA(e.type)&&!a(l))return zA(l,e,n);a(l)||i("Unsupported range type: "+c(l))}return l.map(function(t){return IA(t,n)})}(t,e,h)),null!=t.interpolate&&((o=h).interpolate=IA((r=t.interpolate).type||r),null!=r.gamma&&(o.interpolateGamma=IA(r.gamma))),null!=t.nice&&(h.nice=s(l=t.nice)?{interval:IA(l.interval),step:IA(l.step)}:IA(l)),t)h.hasOwnProperty(n)||"name"===n||(h[n]=IA(t[n],e))}(t,e)}),r.forEach(function(t){!function(t,e){var n=e.getSignal(t.name);if(t.update){var r=ST(t.update,e);n.update=r.$expr,n.params=r.$params}t.on&&t.on.forEach(function(t){!function(t,e,n){var r,o,a=t.events,s=t.update,l=t.encode,h=[];a||i("Signal update missing events specification."),u(a)&&(kT="view",RT=jT,a=BT(a.trim()).map(HT)),(a=L(a).filter(function(t){return t.signal||t.scale?(h.push(t),0):1})).length&&h.push(1<a.length?{merge:a}:a[0]),null!=l&&(s&&i("Signal encode and update are mutually exclusive."),s="encode(item(),"+c(l)+")"),r=u(s)?ST(s,e,GT):null!=s.expr?ST(s.expr,e,GT):null!=s.value?s.value:null!=s.signal?{$expr:"_.value",$params:{value:e.signalRef(s.signal)}}:i("Invalid signal update specification."),o={target:n,update:r},t.force&&(o.options={force:!0}),h.forEach(function(t){var n,r;t={source:(n=t,r=e,n.signal?r.getSignal(n.signal).id:n.scale?r.getScale(n.scale).id:AT(n,r))},e.addUpdate(U(t,o))})}(t,e,n.id)})}(t,e)}),L(t.axes).forEach(function(t){!function(t,e){var n,r,i,o,a,s,u,c,l,h,f,d,p,m,g,v,y,w,x,b,_,M,S,E,T,A,C,k,R,O,P,D,L,N,I,F,z,j,V,B,H,G,q,W,Y,X,$,Q,Z,J,K,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ht,ft,dt,pt,mt,gt,vt,yt,wt,xt,bt,_t,Mt,St,Et,Tt,At,Ct,kt,Rt,Ot,Pt,Dt,Lt,Nt,It,Ft,zt=(l=(c=e).config,f=(h=(u=t).orient)===VA||h===HA?l.axisX:l.axisY,d=l["axis"+h[0].toUpperCase()+h.slice(1)],p="band"===c.scaleType(u.scale)&&l.axisBand,f||d||p?U({},l.axis,f,d,p):l.axis),Ut=t.encode||{},jt=Ut.axis||{},Vt=jt.name||void 0,Bt=jt.interactive,Ht=jt.style;n={orient:t.orient,ticks:!!nA(t.ticks,zt.ticks),labels:!!nA(t.labels,zt.labels),grid:!!nA(t.grid,zt.grid),domain:!!nA(t.domain,zt.domain),title:!!nA(t.title,!1)},r=XT(e.add(sA({},[n]))),jt=fC({update:{range:{signal:'abs(span(range("'+t.scale+'")))'},offset:lC(nA(t.offset,0)),position:lC(nA(t.position,0)),titlePadding:lC(nA(t.titlePadding,zt.titlePadding)),minExtent:lC(nA(t.minExtent,zt.minExtent)),maxExtent:lC(nA(t.maxExtent,zt.maxExtent))}},Ut.axis,$A),i=XT(e.add(oA({scale:e.scaleRef(t.scale),extra:zt.tickExtra,count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),formatSpecifier:e.property(t.format)}))),s=[],n.grid&&s.push((g=zt,v=Ut.grid,y=i,A=(m=t).gridScale,k=(C=(T=m.orient)===BA||T===VA?1:-1)*m.offset||0,(O={}).enter=w={opacity:R={value:0}},hC(w,"stroke",g.gridColor),hC(w,"strokeWidth",g.gridWidth),hC(w,"strokeDash",g.gridDash),O.exit=x={opacity:R},O.update=b={},hC(b,"opacity",g.gridOpacity),T===VA||T===HA?(_="x",M="y",E="height"):(_="y",M="x",E="width"),S=M+"2",b[_]=w[_]=x[_]={scale:m.scale,field:qA,band:g.bandPosition,round:g.tickRound,extra:g.tickExtra,offset:g.tickOffset},A?(w[M]={scale:A,range:0,mult:C,offset:k},b[S]=w[S]={scale:A,range:1,mult:C,offset:k}):(w[M]={value:k},b[S]=w[S]={signal:E,mult:C,offset:k}),mC(vC,"axis-grid",null,qA,y,O,v))),n.ticks&&(o=nA(t.tickSize,zt.tickSize),s.push((D=zt,L=Ut.ticks,N=i,I=o,G=(H=(P=t).orient)===BA||H===VA?-1:1,(W={}).enter=F={opacity:q={value:0}},hC(F,"stroke",D.tickColor),hC(F,"strokeWidth",D.tickWidth),W.exit=z={opacity:q},W.update=j={opacity:{value:1}},(V=lC(I)).mult=G,B={scale:P.scale,field:qA,band:D.bandPosition,round:D.tickRound,extra:D.tickExtra,offset:D.tickOffset},H===VA||H===HA?(j.y=F.y=q,j.y2=F.y2=V,j.x=F.x=z.x=B):(j.x=F.x=q,j.x2=F.x2=V,j.y=F.y=z.y=B),mC(vC,"axis-tick",null,qA,N,W,L)))),n.labels&&s.push((X=zt,$=Ut.labels,Q=i,Z=o=n.ticks?o:0,it=(rt=(Y=t).orient)===BA||rt===VA?-1:1,ot=Y.scale,at=nA(Y.labelPadding,X.labelPadding),st=nA(Y.labelBound,X.labelBound),ct=null!=(ut=nA(Y.labelFlush,X.labelFlush))&&!1!==ut&&(ut=+ut)===ut,lt=+nA(Y.labelFlushOffset,X.labelFlushOffset),ht=nA(Y.labelOverlap,X.labelOverlap),(dt={}).enter=J={opacity:ft={value:0}},hC(J,"angle",X.labelAngle),hC(J,"fill",X.labelColor),hC(J,"font",X.labelFont),hC(J,"fontSize",X.labelFontSize),hC(J,"fontWeight",X.labelFontWeight),hC(J,"limit",X.labelLimit),dt.exit=K={opacity:ft},dt.update=tt={opacity:{value:1},text:{field:GA}},(et=lC(Z)).mult=it,et.offset=lC(at),et.offset.mult=it,nt={scale:ot,field:qA,band:.5,offset:X.tickOffset},rt===VA||rt===HA?(tt.y=J.y=et,tt.x=J.x=K.x=nt,hC(tt,"align",ct?jC(ot,ut,'"left"','"right"','"center"'):"center"),ct&&lt&&hC(tt,"dx",jC(ot,ut,-lt,lt,0)),hC(tt,"baseline",rt===VA?"bottom":"top")):(tt.x=J.x=et,tt.y=J.y=K.y=nt,hC(tt,"align","right"===rt?"left":"right"),hC(tt,"baseline",ct?jC(ot,ut,'"bottom"','"top"','"middle"'):"middle"),ct&&lt&&hC(tt,"dy",jC(ot,ut,lt,-lt,0))),Y=mC(yC,"axis-label",WA,qA,Q,dt,$),(ht||st)&&(Y.overlap={method:ht,order:"datum.index",bound:st?{scale:ot,orient:rt,tolerance:+st}:null}),Y)),n.domain&&s.push((mt=zt,gt=Ut.domain,vt=r,Mt=(pt=t).orient,(Et={}).enter=yt={opacity:St={value:0}},hC(yt,"stroke",mt.domainColor),hC(yt,"strokeWidth",mt.domainWidth),Et.exit={opacity:St},Et.update=wt={opacity:{value:1}},Mt===VA||Mt===HA?(xt="x",_t="y"):(xt="y",_t="x"),bt=xt+"2",yt[_t]=St,wt[xt]=yt[xt]=UC(pt,0),wt[bt]=yt[bt]=UC(pt,1),mC(vC,"axis-domain",null,null,vt,Et,gt))),n.title&&s.push((At=zt,Ct=Ut.title,kt=r,Lt=(Tt=t).title,Nt=(Dt=Tt.orient)===BA||Dt===VA?-1:1,It=Dt===VA||Dt===HA,(Ft={}).enter=Rt={opacity:{value:0}},hC(Rt,"align",At.titleAlign),hC(Rt,"fill",At.titleColor),hC(Rt,"font",At.titleFont),hC(Rt,"fontSize",At.titleFontSize),hC(Rt,"fontWeight",At.titleFontWeight),hC(Rt,"limit",At.titleLimit),Ft.exit={opacity:{value:0}},Ft.update=Ot={opacity:{value:1},text:Lt&&Lt.signal?{signal:Lt.signal}:{value:Lt+""}},Pt={scale:Tt.scale,range:.5},It?(Ot.x=Pt,Ot.angle={value:0},Ot.baseline={value:Dt===VA?"bottom":"top"}):(Ot.y=Pt,Ot.angle={value:90*Nt},Ot.baseline={value:"bottom"}),hC(Ot,"angle",At.titleAngle),hC(Ot,"baseline",At.titleBaseline),!hC(Ot,"x",At.titleX)&&It&&!pC("x",Ct)&&(Ft.enter.auto={value:!0}),!hC(Ot,"y",At.titleY)&&!It&&!pC("y",Ct)&&(Ft.enter.auto={value:!0}),mC(yC,"axis-title",YA,null,kt,Ft,Ct))),a=wC("axis",Ht,Vt,r,Bt,jt,s),t.zindex&&(a.zindex=t.zindex),IC(a,e)}(t,e)}),L(t.marks).forEach(function(t){IC(t,e)}),L(t.legends).forEach(function(t){!function(t,e){var n,r,o,a,s,u,c,l,h,f,d,p,m,g,v,y,w,x,b,_,M,S,E,T,A,C,k,R,O,P,D,L,N,I,F,z,U,j,V,B,H,G,q,W,Y,X,$=t.type||"symbol",Q=e.config.legend,Z=t.encode||{},J=Z.legend||{},K=J.name||void 0,tt=J.interactive,et=J.style,nt=t.size||t.shape||t.fill||t.stroke||t.strokeDash||t.opacity;nt||i("Missing valid scale for legend."),n={orient:nA(t.orient,Q.orient),title:null!=t.title},r=XT(e.add(sA(null,[n]))),J=fC({enter:(h=Q,f={},hC(f,"fill",h.fillColor)+hC(f,"stroke",h.strokeColor)+hC(f,"strokeWidth",h.strokeWidth)+hC(f,"strokeDash",h.strokeDash)+hC(f,"cornerRadius",h.cornerRadius)?f:void 0),update:{offset:lC(nA(t.offset,Q.offset)),padding:lC(nA(t.padding,Q.padding)),titlePadding:lC(nA(t.titlePadding,Q.titlePadding))}},J,$A),u={update:{x:{field:{group:"padding"}},y:{field:{group:"padding"}},entryPadding:lC(nA(t.entryPadding,Q.entryPadding))}},"gradient"===$?(o=XT(e.add(pA({type:"gradient",scale:e.scaleRef(nt),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),formatSpecifier:e.property(t.format)}))),l=[(N=nt,I=Q,F=Z.gradient,j={value:0},V={},V.enter=z={opacity:j,x:j,y:j},hC(z,"width",I.gradientWidth),hC(z,"height",I.gradientHeight),hC(z,"stroke",I.gradientStrokeColor),hC(z,"strokeWidth",I.gradientStrokeWidth),V.exit={opacity:j},V.update=U={x:j,y:j,fill:{gradient:N},opacity:{value:1}},hC(U,"width",I.gradientWidth),hC(U,"height",I.gradientHeight),mC("rect","legend-gradient",null,void 0,void 0,V,F)),(C=Q,k=Z.labels,R=o,D={value:0},L={},L.enter=O={opacity:D},hC(O,"fill",C.labelColor),hC(O,"font",C.labelFont),hC(O,"fontSize",C.labelFontSize),hC(O,"fontWeight",C.labelFontWeight),hC(O,"baseline",C.gradientLabelBaseline),hC(O,"limit",C.gradientLabelLimit),L.exit={opacity:D},L.update=P={opacity:{value:1},text:{field:GA}},O.x=P.x={field:"perc",mult:C.gradientWidth},O.y=P.y={value:C.gradientHeight,offset:C.gradientLabelOffset},O.align=P.align={signal:'datum.perc<=0?"left":datum.perc>=1?"right":"center"'},mC(yC,cC,WA,"perc",R,L,k))]):(o=XT(e.add(pA(c={scale:e.scaleRef(nt),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),formatSpecifier:e.property(t.format)}))),l=[(x=t,b=Q,_=Z.symbols,M=o,T={value:0},A={},A.enter=S={opacity:T},hC(S,"shape",b.symbolType),hC(S,"size",b.symbolSize),hC(S,"strokeWidth",b.symbolStrokeWidth),x.fill||(hC(S,"fill",b.symbolFillColor),hC(S,"stroke",b.symbolStrokeColor)),A.exit={opacity:T},A.update=E={opacity:{value:1}},S.x=E.x={field:"offset",mult:.5},S.y=E.y={field:"size",mult:.5,offset:{field:"total",offset:{field:{group:"entryPadding"},mult:{field:"index"}}}},XA.forEach(function(t){x[t]&&(E[t]=S[t]={scale:x[t],field:qA})}),mC("symbol","legend-symbol",null,qA,M,A,_)),(d=Q,p=Z.labels,m=o,y={value:0},w={},w.enter=g={opacity:y},hC(g,"align",d.labelAlign),hC(g,"baseline",d.labelBaseline),hC(g,"fill",d.labelColor),hC(g,"font",d.labelFont),hC(g,"fontSize",d.labelFontSize),hC(g,"fontWeight",d.labelFontWeight),hC(g,"limit",d.labelLimit),w.exit={opacity:y},w.update=v={opacity:{value:1},text:{field:GA}},g.x=v.x={field:"offset",offset:d.labelOffset},g.y=v.y={field:"size",mult:.5,offset:{field:"total",offset:{field:{group:"entryPadding"},mult:{field:"index"}}}},mC(yC,cC,WA,qA,m,w,p))],c.size=function(t,e,n){var r=FC(e,n[1].encode,"fontSize",WA);if(t.size)return{$expr:"Math.max(Math.ceil(Math.sqrt(_.scale(datum))),"+r+")"};var i=FC(e,n[0].encode,"size");return Math.max(Math.ceil(Math.sqrt(i)),r)}(t,e,l)),l=[wC("legend-entry",null,null,r,tt,u,l)],n.title&&(B=Q,H=Z.title,G=r,Y=t.title,(X={}).enter=q={x:{field:{group:"padding"}},y:{field:{group:"padding"}},opacity:W={value:0}},hC(q,"align",B.titleAlign),hC(q,"baseline",B.titleBaseline),hC(q,"fill",B.titleColor),hC(q,"font",B.titleFont),hC(q,"fontSize",B.titleFontSize),hC(q,"fontWeight",B.titleFontWeight),hC(q,"limit",B.titleLimit),X.exit={opacity:W},X.update={opacity:{value:1},text:Y&&Y.signal?{signal:Y.signal}:{value:Y+""}},s=mC(yC,"legend-title",YA,null,G,X,H),u.update.y.offset={field:{group:"titlePadding"},offset:FC(e,s.encode,"fontSize",YA)},l.push(s)),a=wC("legend",et,K,r,tt,J,l),t.zindex&&(a.zindex=t.zindex),IC(a,e)}(t,e)}),t.title&&function(t,e){t=u(t)?{text:t}:t;var n,r,i=e.config.title,o=U({},t.encode);n=XT(e.add(sA(null,[{orient:null!=t.orient?t.orient:i.orient}]))),o.name=t.name,o.interactive=t.interactive,r=function(t,e,n,r){var i,o,a,u,c,l,h=t.text,f=t.orient||e.orient,d=t.anchor||e.anchor,p=f===BA||f===VA?-1:1,m=f===VA||f===HA,g={group:m?"width":"height"},v={};return v.enter=i={opacity:{value:0}},hC(i,"fill",e.color),hC(i,"font",e.font),hC(i,"fontSize",e.fontSize),hC(i,"fontWeight",e.fontWeight),v.exit={opacity:{value:0}},v.update=o={opacity:{value:1},text:s(h)?h:{value:h+""},offset:lC((null!=t.offset?t.offset:e.offset)||0)},"start"===d?(c=0,l="left"):"end"===d?(c=1,l="right"):(c=.5,l="center"),a={field:g,mult:c},u=p<0?{value:0}:m?{field:{group:"height"}}:{field:{group:"width"}},m?(o.x=a,o.y=u,o.angle={value:0},o.baseline={value:f===VA?"bottom":"top"}):(o.x=u,o.y=a,o.angle={value:90*p},o.baseline={value:"bottom"}),o.align={value:l},o.limit={field:g},hC(o,"angle",e.angle),hC(o,"baseline",e.baseline),hC(o,"limit",e.limit),mC(yC,"title",t.style||"group-title",null,r,v,n)}(t,i,o,n),t.zindex&&(r.zindex=t.zindex),IC(r,e)}(t.title,e),e.parseLambdas(),e},BC=nt(["width","height","padding","autosize"]);function HC(t){this.config=t,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function GC(t){this.config=t.config,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}var qC=HC.prototype=GC.prototype;qC.fork=function(){return new GC(this)},qC.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},qC.id=function(){return(this._subid?this._subid+":":0)+this._id++},qC.add=function(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(function(e){e.$ref=t.id}),t.refs=null),t},qC.proxy=function(t){var e=t instanceof qT?XT(t):t;return this.add(_A({value:e}))},qC.addStream=function(t){return this.streams.push(t),t.id=this.id(),t},qC.addUpdate=function(t){return this.updates.push(t),t},qC.finish=function(){var t,e;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(t,e,n){var r;t&&((r=t.data||(t.data={}))[e]||(r[e]=[])).push(n)}for(t in this.data)for(var r in n((e=this.data[t]).input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values"),e.index)n(e.index[r],t,"index:"+r);return this},qC.pushState=function(t,e,n){this._encode.push(XT(this.add(TA({pulse:t})))),this._parent.push(e),this._lookup.push(n?XT(this.proxy(n)):null),this._markpath.push(-1)},qC.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},qC.parent=function(){return b(this._parent)},qC.encode=function(){return b(this._encode)},qC.lookup=function(){return b(this._lookup)},qC.markpath=function(){var t=this._markpath;return++t[t.length-1]},qC.fieldRef=function(t,e){if(u(t))return QT(t,e);t.signal||i("Unsupported field reference: "+c(t));var n,r=t.signal,o=this.field[r];return o||(n={name:this.signalRef(r)},e&&(n.as=e),this.field[r]=o=XT(this.add(fA(n)))),o},qC.compareRef=function(t,e){function n(t){return eA(t)?(i=!0,XT(r[t.signal])):t}var r=this.signals,i=!1,o=L(t.field).map(n),a=L(t.order).map(n);return e&&o.push($T),i?XT(this.add(uA({fields:o,orders:a}))):JT(o,a)},qC.keyRef=function(t,e){var n,r=this.signals,i=!1;return t=L(t).map(function(t){return eA(t)?(i=!0,XT(r[t.signal])):t}),i?XT(this.add(dA({fields:t,flat:e}))):(n={$key:t},e&&(n.$flat=!0),n)},qC.sortRef=function(t){if(!t)return t;var e=[tA(t.op,t.field),$T],n=t.order||"ascending";return n.signal?XT(this.add(uA({fields:e,orders:[n=this.signalRef(n.signal),n]}))):JT(e,[n,n])},qC.event=function(t,e){var n=t+":"+e;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:t,type:e}),this.events[n]=r}return this.events[n]},qC.addSignal=function(t,e){this.signals.hasOwnProperty(t)&&i("Duplicate signal name: "+c(t));var n=e instanceof qT?e:this.add(YT(e));return this.signals[t]=n},qC.getSignal=function(t){return this.signals[t]||i("Unrecognized signal name: "+c(t)),this.signals[t]},qC.signalRef=function(t){return this.signals[t]?XT(this.signals[t]):(this.lambdas.hasOwnProperty(t)||(this.lambdas[t]=this.add(YT(null))),XT(this.lambdas[t]))},qC.parseLambdas=function(){for(var t=Object.keys(this.lambdas),e=0,n=t.length;e<n;++e){var r=t[e],i=ST(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},qC.property=function(t){return t&&t.signal?this.signalRef(t.signal):t},qC.objectProperty=function(t){return t&&s(t)?this.signalRef(t.signal||function t(e){return(a(e)?function(e){for(var n,r="[",i=0,o=e.length;i<o;++i)n=e[i],r+=(0<i?",":"")+(s(n)?n.signal||t(n):c(n));return r+"]"}:function(e){var n,r,i="{",o=0;for(n in e)r=e[n],i+=(1<++o?",":"")+c(n)+":"+(s(r)?r.signal||t(r):c(r));return i+"}"})(e)}(t)):t},qC.addBinding=function(t,e){this.bindings||i("Nested signals do not support binding: "+c(t)),this.bindings.push(U({signal:t},e))},qC.addScaleProj=function(t,e){this.scales.hasOwnProperty(t)&&i("Duplicate scale or projection name: "+c(t)),this.scales[t]=this.add(e)},qC.addScale=function(t,e){this.addScaleProj(t,EA(e))},qC.addProjection=function(t,e){this.addScaleProj(t,bA(e))},qC.getScale=function(t){return this.scales[t]||i("Unrecognized scale name: "+c(t)),this.scales[t]},qC.projectionRef=qC.scaleRef=function(t){return XT(this.getScale(t))},qC.projectionType=qC.scaleType=function(t){return this.getScale(t).params.type},qC.addData=function(t,e){return this.data.hasOwnProperty(t)&&i("Duplicate data set name: "+c(t)),this.data[t]=e},qC.getData=function(t){return this.data[t]||i("Undefined data set name: "+c(t)),this.data[t]},qC.addDataPipeline=function(t,e){return this.data.hasOwnProperty(t)&&i("Duplicate data set name: "+c(t)),this.addData(t,RC.fromEntries(this,e))};var WC="sans-serif",YC="#4c78a8",XC="#000",$C="#888",QC="#ddd";function ZC(t,e,n){";"!==e[e.length-1]&&(e="return("+e+");");var r=Function.apply(null,t.concat(e));return n&&n.functions?r.bind(n.functions):r}function JC(t,e){return ZC(["event"],t,e)}function KC(t,e,n){var r,i;for(r in n=n||{},t)(i=t[r])&&i.$expr&&i.$params&&KC(i.$params,e,n),n[r]=a(i)?i.map(function(t){return tk(t,e)}):tk(i,e);return n}function tk(t,e){if(!t||!s(t))return t;for(var n,r=0,i=ek.length;r<i;++r)if(t.hasOwnProperty((n=ek[r]).key))return n.parse(t,e);return t}var ek=[{key:"$ref",parse:function(t,e){return e.get(t.$ref)||i("Operator not defined: "+t.$ref)}},{key:"$key",parse:function(t,e){var n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=X(t.$key,t.$flat))}},{key:"$expr",parse:function(t,n){var r="e:"+t.$expr;return n.fn[r]||(n.fn[r]=e(ZC(["datum","_"],t.$expr,n),t.$fields,t.$name))}},{key:"$field",parse:function(t,e){if(!t.$field)return null;var n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=l(t.$field,t.$name))}},{key:"$encode",parse:function(t,n){var r,i,o=t.$encode,a={};for(r in o)a[r]=e(ZC(["item","_"],(i=o[r]).$expr,n),i.$fields),a[r].output=i.$output;return a}},{key:"$compare",parse:function(t,e){var n="c:"+t.$compare+"_"+t.$order,r=L(t.$compare).map(function(t){return t&&t.$tupleid?ct:t});return e.fn[n]||(e.fn[n]=I(r,t.$order))}},{key:"$context",parse:function(t,e){return e}},{key:"$subflow",parse:function(t,e){var n=t.$subflow;return function(t,r,i){var o=rk(n,e.fork()),a=o.get(n.operators[0].id),s=o.signals.parent;return s&&s.set(i),a}}},{key:"$tupleid",parse:function(){return ct}}];function nk(t){return(t+"").toLowerCase()}var rk=function(t,e){var n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),n.forEach(function(t){!function(t,e){"operator"!==nk(t.type)&&t.type?e.transform(t,t.type):e.operator(t,t.update?ZC(["_"],t.update,e):null)}(t,e)}),n.forEach(function(t){var n,r,o,a;r=e,(n=t).params&&((o=r.get(n.id))||i("Invalid operator id: "+n.id),a=KC(n.params,r),r.dataflow.connect(o,o.parameters(a)))}),(t.streams||[]).forEach(function(t){var n,r,o,a,s;r=e,a=null!=(n=t).filter?JC(n.filter,r):void 0,s=null!=n.stream?r.get(n.stream):void 0,n.source?s=r.events(n.source,n.type,a):n.merge&&(s=(o=n.merge.map(r.get.bind(r)))[0].merge.apply(o[0],o.slice(1))),n.between&&(o=n.between.map(r.get.bind(r)),s=s.between(o[0],o[1])),n.filter&&(s=s.filter(a)),null!=n.throttle&&(s=s.throttle(+n.throttle)),null!=n.debounce&&(s=s.debounce(+n.debounce)),null==s&&i("Invalid stream definition: "+JSON.stringify(n)),n.consume&&s.consume(!0),r.stream(n,s)}),(t.updates||[]).forEach(function(t){!function(t,e){var n,r=e.get(t.source),o=t.update,a=void 0;r||i("Source not defined: "+t.source),n=t.target&&t.target.$expr?JC(t.target.$expr,e):e.get(t.target),o&&o.$expr&&(o.$params&&(a=KC(o.$params,e)),o=ZC(["_","event"],o.$expr,e)),e.update(t,r,n,o,a)}(t,e)}),e.resolve()},ik={skip:!0},ok=function(t,e,n){return new ak(t,e,n)};function ak(t,e,n){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function sk(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.functions=t.functions,this.events=t.events,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}ak.prototype=sk.prototype={fork:function(){var t=new sk(this);return(this.subcontext||(this.subcontext=[])).push(t),t},get:function(t){return this.nodes[t]},set:function(t,e){return this.nodes[t]=e},add:function(t,e){var n,r=this,i=r.dataflow;if(r.set(t.id,e),"collect"===nk(t.type)&&(n=t.value)&&(n.$ingest?i.ingest(e,n.$ingest,n.$format):n.$request?i.request(e,n.$request,n.$format):i.pulse(e,i.changeset().insert(n))),t.root&&(r.root=e),t.parent){var o=r.get(t.parent.$ref);o?(i.connect(o,[e]),e.targets().add(o)):(r.unresolved=r.unresolved||[]).push(function(){o=r.get(t.parent.$ref),i.connect(o,[e]),e.targets().add(o)})}if(t.signal&&(r.signals[t.signal]=e),t.scale&&(r.scales[t.scale]=e),t.data)for(var a in t.data)n=r.data[a]||(r.data[a]={}),t.data[a].forEach(function(t){n[t]=e})},resolve:function(){return(this.unresolved||[]).forEach(function(t){t()}),delete this.unresolved,this},operator:function(t,e,n){this.add(t,this.dataflow.add(t.value,e,n,t.react))},transform:function(t,e,n){this.add(t,this.dataflow.add(this.transforms[nk(e)],n))},stream:function(t,e){this.set(t.id,e)},update:function(t,e,n,r,i){this.dataflow.on(e,n,r,i,t.options)},getState:function(t){var e=this,n={};if(t.signals){var r=n.signals={};Object.keys(e.signals).forEach(function(n){var i=e.signals[n];t.signals(n,i)&&(r[n]=i.value)})}if(t.data){var i=n.data={};Object.keys(e.data).forEach(function(n){var r=e.data[n];t.data(n,r)&&(i[n]=r.input.value)})}return e.subcontext&&!1!==t.recurse&&(n.subcontext=e.subcontext.map(function(e){return e.getState(t)})),n},setState:function(t){var e=this,n=e.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach(function(t){n.update(e.signals[t],i[t],ik)}),Object.keys(r||{}).forEach(function(t){n.pulse(e.data[t].input,n.changeset().remove(g).insert(r[t]))}),(t.subcontext||[]).forEach(function(t,n){var r=e.subcontext[n];r&&r.setState(t)})}};var uk=function(t,e,n){return rk(e,ok(t,jr,n||vT))},ck="padding";function lk(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===ck?r.left+r.right:0)}function hk(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===ck?r.top+r.bottom:0)}function fk(t,e){return e.modified&&a(e.input.value)&&t.indexOf("_:vega:_")}function dk(t,e){return!("parent"===t||e instanceof jr.proxy)}function pk(t,e){var n=this;e=e||{},Nr.call(n),n.loader(e.loader||n._loader),n.logLevel(e.logLevel||0),n._el=null,n._renderType=e.renderer||Xc.Canvas,n._scenegraph=new tc;var r=n._scenegraph.root;n._renderer=null,n._redraw=!0,n._handler=(new dc).scene(r),n._preventDefault=!1,n._eventListeners=[],n._resizeListeners=[];var i,o,s=uk(n,t,e.functions);n._runtime=s,n._signals=s.signals,n._bind=(t.bindings||[]).map(function(t){return{state:null,param:U({},t)}}),s.root&&s.root.set(r),r.source=s.data.root.input,n.pulse(s.data.root.input,n.changeset().insert(r.items)),n._background=s.background||null,n._eventConfig=((o=(i=U({},i=s.eventConfig)).defaults)&&(a(o.prevent)&&(o.prevent=nt(o.prevent)),a(o.allow)&&(o.allow=nt(o.allow))),i),n._width=n.width(),n._height=n.height(),n._viewWidth=lk(n,n._width),n._viewHeight=hk(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(t){var e=t._signals,n=e.width,r=e.height,i=e.padding;function o(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,function(e){t._width=e.size,t._viewWidth=lk(t,e.size),o()},{size:n}),t._resizeHeight=t.add(null,function(e){t._height=e.size,t._viewHeight=hk(t,e.size),o()},{size:r});var a=t.add(null,o,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}(n),FM(n)}var mk=H(pk,Nr);function gk(t,e){return t._signals.hasOwnProperty(e)?t._signals[e]:i("Unrecognized signal name: "+c(e))}function vk(t,e){var n=(t._targets||[]).filter(function(t){var n=t._update;return n&&n.handler===e});return n.length?n[0]:null}mk.run=function(t){if(Nr.prototype.run.call(this,t),this._redraw||this._resize)try{this.render()}catch(t){this.error(t)}return this},mk.render=function(){var t,e,n,r;return this._renderer&&(this._resize&&(this._resize=0,e=BM(t=this),n=jM(t),r=VM(t),t._renderer.background(t._background),t._renderer.resize(n,r,e),t._handler.origin(e),t._resizeListeners.forEach(function(t){t(n,r)})),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},mk.dirty=function(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},mk.container=function(){return this._el},mk.scenegraph=function(){return this._scenegraph},mk.signal=function(t,e,n){var r=gk(this,t);return 1===arguments.length?r.value:this.update(r,e,n)},mk.background=function(t){return arguments.length?(this._background=t,this._resize=1,this):this._background},mk.width=function(t){return arguments.length?this.signal("width",t):this.signal("width")},mk.height=function(t){return arguments.length?this.signal("height",t):this.signal("height")},mk.padding=function(t){return arguments.length?this.signal("padding",t):this.signal("padding")},mk.autosize=function(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},mk.renderer=function(t){return arguments.length?(Qc(t)||i("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._renderer&&(this._renderer=null,this.initialize(this._el))),this):this._renderType},mk.loader=function(t){return arguments.length?(t!==this._loader&&(Nr.prototype.loader.call(this,t),this._renderer&&(this._renderer=null,this.initialize(this._el))),this):this._loader},mk.resize=function(){return this._autosize=1,this},mk._resizeView=function(t,e,n,r,i,o){this.runAfter(function(a){var s=0;a._autosize=0,a.width()!==n&&(s=1,a.width(n),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.height(r),a._resizeHeight.skip(!0)),a._viewWidth!==t&&(a._resize=1,a._viewWidth=t),a._viewHeight!==e&&(a._resize=1,a._viewHeight=e),a._origin[0]===i[0]&&a._origin[1]===i[1]||(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter(function(){a.resize()})},!1,1)},mk.addEventListener=function(t,e){return this._handler.on(t,e),this},mk.removeEventListener=function(t,e){return this._handler.off(t,e),this},mk.addResizeListener=function(t){var e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},mk.removeResizeListener=function(t){var e=this._resizeListeners,n=e.indexOf(t);return 0<=n&&e.splice(n,1),this},mk.addSignalListener=function(t,e){var n=gk(this,t),r=vk(n,e);return r||((r=function(){e(t,n.value)}).handler=e,this.on(n,null,r)),this},mk.removeSignalListener=function(t,e){var n=gk(this,t),r=vk(n,e);return r&&n._targets.remove(r),this},mk.preventDefault=function(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},mk.tooltipHandler=function(t){var e=this._handler;return arguments.length?(e.handleTooltip=t||uc.prototype.handleTooltip,this):e.handleTooltip},mk.events=function(t,e,n){var r,i=this,o=new Tt(n),a=function(n,r){var a,s,c,l,h;"view"!==t||(s=e,l=(c=(a=i)._eventConfig.defaults)&&c.prevent,h=c&&c.allow,!1===l||!0===h||!0!==l&&!1!==h&&(l?!l[s]:h?h[s]:!a.preventDefault()))||n.preventDefault();try{o.receive(function(t,e,n){var r,i,o=t._renderer.scene();return o&&(i=BM(t),(r=fc(e.changedTouches?e.changedTouches[0]:e,o))[0]-=i[0],r[1]-=i[1]),e.dataflow=t,e.vega=function(t,e,n){var r=e?"group"===e.mark.marktype?e:e.mark.group:null;function i(t){var n,i=r;if(t)for(n=e;n;n=n.mark.group)if(n.mark.name===t){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function o(t){if(!t)return n;u(t)&&(t=i(t));for(var e=n.slice();t;)e[0]-=t.x||0,e[1]-=t.y||0,t=t.mark&&t.mark.group;return e}return{view:F(t),item:F(e||{}),group:i,xy:o,x:function(t){return o(t)[0]},y:function(t){return o(t)[1]}}}(t,n,r),e.item=n,e}(i,n,r))}catch(n){i.error(n)}finally{i.run()}};if("view"===t)return i.addEventListener(e,a),o;if("window"===t?"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&(r=document.querySelectorAll(t)),!r)return i.warn("Can not resolve event source: "+t),o;for(var s=0,c=r.length;s<c;++s)r[s].addEventListener(e,a);return i._eventListeners.push({type:e,sources:r,handler:a}),o},mk.finalize=function(){for(var t,e,n=this._eventListeners,r=n.length;0<=--r;)for(t=(e=n[r]).sources.length;0<=--t;)e.sources[t].removeEventListener(e.type,e.handler)},mk.hover=function(t,e){return e=[e||"update",t=[t||"hover"]],this.on(this.events("view","mouseover",HM),GM,qM(t)),this.on(this.events("view","mouseout",HM),GM,qM(e)),this},mk.data=function(t){return zM(this,t).values.value},mk.change=UM,mk.insert=function(t,e){return UM.call(this,t,gt().insert(e))},mk.remove=function(t,e){return UM.call(this,t,gt().remove(e))},mk.initialize=function(t,e){var n,r,i,o,a,s,u=this,c=u._renderType,l=Qc(c);return t=u._el=t?nS(u,t):null,l||u.error("Unrecognized renderer type: "+c),n=l.handler||dc,u._renderer=(r=t?l.renderer:l.headless)?eS(u,u._renderer,t,r):null,u._handler=(o=(i=u)._handler,a=t,s=new n(i.loader()).scene(i.scenegraph().root).initialize(a,BM(i),i),o&&(s.handleTooltip=o.handleTooltip,o.handlers().forEach(function(t){s.on(t.type,t.handler)})),s),u._redraw=!0,t&&(e=e?nS(u,e):t.appendChild(WM("div",{class:"vega-bindings"})),u._bind.forEach(function(t){t.param.element&&(t.element=nS(u,t.param.element))}),u._bind.forEach(function(t){!function(t,e,n){if(e){var r=n.param,i=n.state;i||(i=n.state={elements:null,active:!1,set:null,update:function(e){i.source=!0,t.signal(r.signal,e).run()}},r.debounce&&(i.update=z(r.debounce,i.update))),function(t,e,n,r){var i=WM("div",{class:"vega-bind"});i.appendChild(WM("span",{class:"vega-bind-name"},n.name||n.signal)),e.appendChild(i);var o=$M;switch(n.input){case"checkbox":o=QM;break;case"select":o=ZM;break;case"radio":o=JM;break;case"range":o=KM}o(t,i,n,r)}(i,e,r,t.signal(r.signal)),i.active||(t.on(t._signals[r.signal],null,function(){i.source?i.source=!1:i.set(t.signal(r.signal))}),i.active=!0)}}(u,t.element||e,t)})),u},mk.toImageURL=function(t,e){return t!==Xc.Canvas&&t!==Xc.SVG&&t!==Xc.PNG?Promise.reject("Unrecognized image type: "+t):rS(this,t,e).then(function(e){return t===Xc.SVG?(n=e.svg(),r=new Blob([n],{type:"image/svg+xml"}),window.URL.createObjectURL(r)):e.canvas().toDataURL("image/png");var n,r})},mk.toCanvas=function(t){return rS(this,Xc.Canvas,t).then(function(t){return t.canvas()})},mk.toSVG=function(t){return rS(this,Xc.SVG,t).then(function(t){return t.svg()})},mk.getState=function(t){return this._runtime.getState(t||{data:fk,signals:dk,recurse:!0})},mk.setState=function(t){var e=this;return e.runAfter(function(){e._trigger=!1,e._runtime.setState(t),e.run().runAfter(function(){e._trigger=!0})}),this},U(jr,No,Dl,rg,Tx,xb,O_,dM,AM,NM),t.version="3.2.1",t.Dataflow=Nr,t.EventStream=Tt,t.Parameters=yt,t.Pulse=_r,t.MultiPulse=Ar,t.Operator=_t,t.Transform=zr,t.changeset=gt,t.ingest=ht,t.isTuple=ut,t.definition=Vr,t.transform=Br,t.transforms=jr,t.tupleid=ct,t.scale=Ld,t.scheme=pm,t.interpolate=ym,t.interpolateRange=mm,t.timeInterval=bm,t.utcInterval=_m,t.projection=gx,t.View=pk,t.parse=function(t,e){return s(t)||i("Input Vega specification must be an object."),(n=t,r=new HC(function(t){var e={padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:YC},area:{fill:YC},image:null,line:{stroke:YC,strokeWidth:2},path:{stroke:YC},rect:{fill:YC},rule:{stroke:XC},shape:{stroke:YC},symbol:{fill:YC,size:64},text:{fill:XC,font:WC,fontSize:11},style:{"guide-label":{fill:XC,font:WC,fontSize:10},"guide-title":{fill:XC,font:WC,fontSize:11,fontWeight:"bold"},"group-title":{fill:XC,font:WC,fontSize:13,fontWeight:"bold"},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:QC}},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:$C,grid:!1,gridWidth:1,gridColor:QC,gridOpacity:1,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:$C,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,entryPadding:5,titlePadding:5,gradientWidth:100,gradientHeight:20,gradientStrokeColor:QC,gradientStrokeWidth:0,gradientLabelBaseline:"top",gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelOffset:8,labelLimit:160,symbolType:"circle",symbolSize:100,symbolFillColor:"transparent",symbolStrokeColor:$C,symbolStrokeWidth:1.5,titleAlign:"left",titleBaseline:"top",titleLimit:180},title:{orient:"top",anchor:"middle",offset:4},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}};return(t||[]).forEach(function(t){var n,r,i;if(t)for(n in t)if("style"===n)for(n in i=e.style||(e.style={}),t.style)i[n]=U(i[n]||{},t.style[n]);else e[n]=s(r=t[n])&&!a(r)?U(s(e[n])?e[n]:{},r):r}),e}([e,t.config])),f=r.config,r.background=n.background||f.background,r.eventConfig=f.events,h=XT(r.root=r.add(YT())),r.addSignal("width",n.width||0),r.addSignal("height",n.height||0),r.addSignal("padding",function(t,e){return s(t=t||f.padding)?{top:iS(t.top),bottom:iS(t.bottom),left:iS(t.left),right:iS(t.right)}:{top:n=iS(t),bottom:n,left:n,right:n};var n}(n.padding)),r.addSignal("autosize",function(t,e){return s(t=t||f.autosize)?t:{type:t=t||"pad"}}(n.autosize)),L(n.signals).forEach(function(t){BC[t.name]||hS(t,r)}),u=r.add(sA()),c=fC({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},n.encode),c=r.add(lA(dC(c,gC,uC,n.style,r,{pulse:XT(u)}))),l=r.add(CA({layout:r.objectProperty(n.layout),legendMargin:f.legendMargin,autosize:r.signalRef("autosize"),mark:h,pulse:XT(c)})),r.operators.pop(),r.pushState(XT(c),XT(l),null),VC(n,r,!0),r.operators.push(l),o=r.add(aA({mark:h,pulse:XT(l)})),o=r.add(SA({pulse:XT(o)})),o=r.add(TA({pulse:XT(o)})),r.addData("root",new RC(r,u,u,o)),r).toRuntime();var n,r,o,u,c,l,h,f},t.expressionFunction=bT,t.formatLocale=sd,t.timeFormatLocale=vr,t.runtime=rk,t.runtimeContext=ok,t.bin=Zr,t.bootstrapCI=wi,t.quartiles=xi,t.setRandom=function(e){t.random=e},t.randomInteger=function(e,n){null==n&&(n=e,e=0);var r,i,o,a={min:function(t){return arguments.length?(o=i-(r=t||0),a):r},max:function(t){return arguments.length?(o=(i=t||0)-r,a):i},sample:function(){return r+Math.floor(o*t.random())},pdf:function(t){return t===Math.floor(t)&&r<=t&&t<i?1/o:0},cdf:function(t){var e=Math.floor(t);return e<r?0:i<=e?1:(e-r+1)/o},icdf:function(t){return 0<=t&&t<=1?r-1+Math.floor(t*o):NaN}};return a.min(e).max(n)},t.randomKDE=_i,t.randomMixture=Mi,t.randomNormal=bi,t.randomUniform=Si,t.accessor=e,t.accessorName=n,t.accessorFields=r,t.id=f,t.identity=d,t.zero=p,t.one=m,t.truthy=g,t.falsy=v,t.logger=x,t.None=0,t.Error=w,t.Warn=2,t.Info=3,t.Debug=4,t.panLinear=A,t.panLog=C,t.panPow=k,t.zoomLinear=O,t.zoomLog=P,t.zoomPow=D,t.array=L,t.compare=I,t.constant=F,t.debounce=z,t.error=i,t.extend=U,t.extentIndex=j,t.fastmap=B,t.field=l,t.inherits=H,t.isArray=a,t.isBoolean=G,t.isDate=q,t.isFunction=N,t.isNumber=W,t.isObject=s,t.isRegExp=Y,t.isString=u,t.key=X,t.merge=$,t.pad=Z,t.peek=b,t.repeat=Q,t.splitAccessPath=o,t.stringValue=c,t.toBoolean=J,t.toDate=tt,t.toNumber=_,t.toString=et,t.toSet=nt,t.truncate=rt,t.visitArray=it,t.loader=te,t.read=wr,t.inferType=he,t.inferTypes=fe,t.typeParsers=ue,t.formats=Ee,t.Bounds=Io,t.Gradient=jo,t.GroupItem=Bo,t.ResourceLoader=Go,t.Item=Vo,t.Scenegraph=tc,t.Handler=uc,t.Renderer=lc,t.CanvasHandler=dc,t.CanvasRenderer=yc,t.SVGHandler=_c,t.SVGRenderer=Oc,t.SVGStringRenderer=Bc,t.RenderType=Xc,t.renderModule=Qc,t.Marks=Yu,t.boundClip=Jc,t.boundContext=Ys,t.boundStroke=Hs,t.boundItem=Xu,t.boundMark=Qu,t.pathCurves=os,t.pathSymbols=xs,t.pathRectangle=As,t.pathTrail=ks,t.pathParse=us,t.pathRender=ms,t.point=fc,t.domCreate=rc,t.domFind=ic,t.domChild=oc,t.domClear=ac,t.openTag=Ec,t.closeTag=Tc,t.font=Bu,t.textMetrics=Lu,t.resetSVGClipId=function(){gu=1},t.sceneEqual=tl,t.pathEqual=el,t.sceneToJSON=Ju,t.sceneFromJSON=Ku,t.sceneZOrder=eu,t.sceneVisit=nu,t.scenePickVisit=ru,Object.defineProperty(t,"__esModule",{value:!0})}),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).vegaTooltip=t()}(function(){return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){return i(e[a][1][t]||t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){var r;r=this,function(t){"use strict";var e,n=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[1<r.length?r[0]+r.slice(2):r,+t.slice(n+1)]},r=function(t){return(t=n(Math.abs(t)))?t[1]:NaN},i=function(t,e){var r=n(t,e);if(!r)return t+"";var i=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")},o={"":function(t,e){t:for(var n,r=(t=t.toPrecision(e)).length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:0<o&&(o=0)}return 0<o?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return i(100*t,e)},r:i,s:function(t,r){var i=n(t,r);if(!i)return t+"";var o=i[0],a=i[1],s=a-(e=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,u=o.length;return s===u?o:u<s?o+new Array(s-u+1).join("0"):0<s?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+n(t,Math.max(0,r+s-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},a=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function s(t){return new u(t)}function u(t){if(!(e=a.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",s=e[4]||"",u=!!e[5],c=e[6]&&+e[6],l=!!e[7],h=e[8]&&+e[8].slice(1),f=e[9]||"";"n"===f?(l=!0,f="g"):o[f]||(f=""),(u||"0"===n&&"="===r)&&(u=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=s,this.zero=u,this.width=c,this.comma=l,this.precision=h,this.type=f}s.prototype=u.prototype,u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var c,l=function(t){return t},h=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],f=function(t){var n,i,a,u=t.grouping&&t.thousands?(i=t.grouping,a=t.thousands,function(t,e){for(var n=t.length,r=[],o=0,s=i[0],u=0;0<n&&0<s&&(e<u+s+1&&(s=Math.max(1,e-u)),r.push(t.substring(n-=s,n+s)),!((u+=s+1)>e));)s=i[o=(o+1)%i.length];return r.reverse().join(a)}):l,c=t.currency,f=t.decimal,d=t.numerals?(n=t.numerals,function(t){return t.replace(/[0-9]/g,function(t){return n[+t]})}):l,p=t.percent||"%";function m(t){var n=(t=s(t)).fill,r=t.align,i=t.sign,a=t.symbol,l=t.zero,m=t.width,g=t.comma,v=t.precision,y=t.type,w="$"===a?c[0]:"#"===a&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===a?c[1]:/[%p]/.test(y)?p:"",b=o[y],_=!y||/[defgprs%]/.test(y);function M(t){var o,a,s,c=w,p=x;if("c"===y)p=b(t)+p,t="";else{var M=(t=+t)<0;if(t=b(Math.abs(t),v),M&&0==+t&&(M=!1),c=(M?"("===i?i:"-":"-"===i||"("===i?"":i)+c,p=("s"===y?h[8+e/3]:"")+p+(M&&"("===i?")":""),_)for(o=-1,a=t.length;++o<a;)if((s=t.charCodeAt(o))<48||57<s){p=(46===s?f+t.slice(o+1):t.slice(o))+p,t=t.slice(0,o);break}}g&&!l&&(t=u(t,1/0));var S=c.length+t.length+p.length,E=S<m?new Array(m-S+1).join(n):"";switch(g&&l&&(t=u(E+t,E.length?m-p.length:1/0),E=""),r){case"<":t=c+t+p+E;break;case"=":t=c+E+t+p;break;case"^":t=E.slice(0,S=E.length>>1)+c+t+p+E.slice(S);break;default:t=E+c+t+p}return d(t)}return v=null==v?y?6:12:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),M.toString=function(){return t+""},M}return{format:m,formatPrefix:function(t,e){var n=m(((t=s(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(r(e)/3))),o=Math.pow(10,-i),a=h[8+i/3];return function(t){return n(o*t)+a}}}};function d(e){return c=f(e),t.format=c.format,t.formatPrefix=c.formatPrefix,c}d({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),t.formatDefaultLocale=d,t.formatLocale=f,t.formatSpecifier=s,t.precisionFixed=function(t){return Math.max(0,-r(Math.abs(t)))},t.precisionPrefix=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(r(e)/3)))-r(Math.abs(t)))},t.precisionRound=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,r(e)-r(t))+1},Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&void 0!==e?n:r.d3=r.d3||{})},{}],2:[function(t,e,n){var r;r=this,function(t){"use strict";var e="http://www.w3.org/1999/xhtml",n={svg:"http://www.w3.org/2000/svg",xhtml:e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function r(t){var e=t+="",r=e.indexOf(":");return 0<=r&&"xmlns"!==(e=t.slice(0,r))&&(t=t.slice(r+1)),n.hasOwnProperty(e)?{space:n[e],local:t}:t}function i(t){var n=r(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===e&&n.documentElement.namespaceURI===e?n.createElement(t):n.createElementNS(r,t)}})(n)}function o(){}function a(t){return null==t?o:function(){return this.querySelector(t)}}function s(){return[]}function u(t){return null==t?s:function(){return this.querySelectorAll(t)}}var c=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var l=document.documentElement;if(!l.matches){var h=l.webkitMatchesSelector||l.msMatchesSelector||l.mozMatchesSelector||l.oMatchesSelector;c=function(t){return function(){return h.call(this,t)}}}}var f=c;function d(t){return new Array(t.length)}function p(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}p.prototype={constructor:p,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var m="$";function g(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new p(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function v(t,e,n,r,i,o,a){var s,u,c,l={},h=e.length,f=o.length,d=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(d[s]=c=m+a.call(u,u.__data__,s,e),c in l?i[s]=u:l[c]=u);for(s=0;s<f;++s)(u=l[c=m+a.call(t,o[s],s,o)])?((r[s]=u).__data__=o[s],l[c]=null):n[s]=new p(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&l[d[s]]===u&&(i[s]=u)}function y(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function w(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function x(t,e){return t.style.getPropertyValue(e)||w(t).getComputedStyle(t,null).getPropertyValue(e)}function b(t){return t.trim().split(/^|\s+/)}function _(t){return t.classList||new M(t)}function M(t){this._node=t,this._names=b(t.getAttribute("class")||"")}function S(t,e){for(var n=_(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function E(t,e){for(var n=_(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function T(){this.textContent=""}function A(){this.innerHTML=""}function C(){this.nextSibling&&this.parentNode.appendChild(this)}function k(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function R(){return null}function O(){var t=this.parentNode;t&&t.removeChild(this)}function P(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function D(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}M.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var L={};function N(t,e,n){return t=I(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function I(e,n,r){return function(i){var o=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=o}}}function F(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function z(t,e,n){var r=L.hasOwnProperty(t.type)?N:I;return function(i,o,a){var s,u=this.__on,c=r(e,o,a);if(u)for(var l=0,h=u.length;l<h;++l)if((s=u[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function U(t,e,n){var r=w(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}t.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(L={mouseenter:"mouseover",mouseleave:"mouseout"}));var j=[null];function V(t,e){this._groups=t,this._parents=e}function B(){return new V([[document.documentElement]],j)}function H(t){return"string"==typeof t?new V([[document.querySelector(t)]],[document.documentElement]):new V([[t]],j)}V.prototype=B.prototype={constructor:V,select:function(t){"function"!=typeof t&&(t=a(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s,u=e[i],c=u.length,l=r[i]=new Array(c),h=0;h<c;++h)(o=u[h])&&(s=t.call(o,o.__data__,h,u))&&("__data__"in o&&(s.__data__=o.__data__),l[h]=s);return new V(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],c=s.length,l=0;l<c;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new V(r,i)},filter:function(t){"function"!=typeof t&&(t=f(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new V(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),l=-1,this.each(function(t){p[++l]=t}),p;var n,r=e?v:g,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),u=new Array(a),c=new Array(a),l=0;l<a;++l){var h=i[l],f=o[l],d=f.length,p=t.call(h,h&&h.__data__,l,i),m=p.length,y=u[l]=new Array(m),w=s[l]=new Array(m);r(h,f,y,w,c[l]=new Array(d),p,e);for(var x,b,_=0,M=0;_<m;++_)if(x=y[_]){for(M<=_&&(M=_+1);!(b=w[M])&&++M<m;);x._next=b||null}}return(s=new V(s,i))._enter=u,s._exit=c,s},enter:function(){return new V(this._enter||this._groups.map(d),this._parents)},exit:function(){return new V(this._exit||this._groups.map(d),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=Math.min(r,n.length),o=new Array(r),a=0;a<i;++a)for(var s,u=e[a],c=n[a],l=u.length,h=o[a]=new Array(l),f=0;f<l;++f)(s=u[f]||c[f])&&(h[f]=s);for(;a<r;++a)o[a]=e[a];return new V(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];0<=--o;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=y);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(e)}return new V(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=r(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):x(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=b(t+"");if(arguments.length<2){for(var r=_(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?S:E)(this,t)}}:e?function(t){return function(){S(this,t)}}:function(t){return function(){E(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?T:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?A:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(C)},lower:function(){return this.each(k)},append:function(t){var e="function"==typeof t?t:i(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:i(t),r=null==e?R:"function"==typeof e?e:a(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(O)},clone:function(t){return this.select(t?D:P)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),a=o.length;if(!(arguments.length<2)){for(s=e?z:F,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return U(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return U(this,t,e)}})(t,e))}};var G=0;function q(){return new W}function W(){this._="@"+(++G).toString(36)}function Y(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function X(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}W.prototype=q.prototype={constructor:W,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},t.create=function(t){return H(i(t).call(document.documentElement))},t.creator=i,t.local=q,t.matcher=f,t.mouse=function(t){var e=Y();return e.changedTouches&&(e=e.changedTouches[0]),X(t,e)},t.namespace=r,t.namespaces=n,t.clientPoint=X,t.select=H,t.selectAll=function(t){return"string"==typeof t?new V([document.querySelectorAll(t)],[document.documentElement]):new V([null==t?[]:t],j)},t.selection=B,t.selector=a,t.selectorAll=u,t.style=x,t.touch=function(t,e,n){arguments.length<3&&(n=e,e=Y().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return X(t,r);return null},t.touches=function(t,e){null==e&&(e=Y().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=X(t,e[n]);return i},t.window=w,t.customEvent=function(e,n,r,i){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=o}},Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&void 0!==e?n:r.d3=r.d3||{})},{}],3:[function(t,e,n){var r,i;r=this,i=function(t,e){"use strict";function n(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function r(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function i(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function o(t){var o=t.dateTime,a=t.date,u=t.time,c=t.periods,l=t.days,h=t.shortDays,f=t.months,vt=t.shortMonths,yt=d(c),wt=p(c),xt=d(l),bt=p(l),_t=d(h),Mt=p(h),St=d(f),Et=p(f),Tt=d(vt),At=p(vt),Ct={a:function(t){return h[t.getDay()]},A:function(t){return l[t.getDay()]},b:function(t){return vt[t.getMonth()]},B:function(t){return f[t.getMonth()]},c:null,d:L,e:L,f:U,H:N,I:I,j:F,L:z,m:j,M:V,p:function(t){return c[+(12<=t.getHours())]},Q:mt,s:gt,S:B,u:H,U:G,V:q,w:W,W:Y,x:null,X:null,y:X,Y:$,Z:Q,"%":pt},kt={a:function(t){return h[t.getUTCDay()]},A:function(t){return l[t.getUTCDay()]},b:function(t){return vt[t.getUTCMonth()]},B:function(t){return f[t.getUTCMonth()]},c:null,d:Z,e:Z,f:nt,H:J,I:K,j:tt,L:et,m:rt,M:it,p:function(t){return c[+(12<=t.getUTCHours())]},Q:mt,s:gt,S:ot,u:at,U:st,V:ut,w:ct,W:lt,x:null,X:null,y:ht,Y:ft,Z:dt,"%":pt},Rt={a:function(t,e,n){var r=_t.exec(e.slice(n));return r?(t.w=Mt[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=xt.exec(e.slice(n));return r?(t.w=bt[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=Tt.exec(e.slice(n));return r?(t.m=At[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=St.exec(e.slice(n));return r?(t.m=Et[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,e,n){return Dt(t,o,e,n)},d:S,e:S,f:R,H:T,I:T,j:E,L:k,m:M,M:A,p:function(t,e,n){var r=yt.exec(e.slice(n));return r?(t.p=wt[r[0].toLowerCase()],n+r[0].length):-1},Q:P,s:D,S:C,u:g,U:v,V:y,w:m,W:w,x:function(t,e,n){return Dt(t,a,e,n)},X:function(t,e,n){return Dt(t,u,e,n)},y:b,Y:x,Z:_,"%":O};function Ot(t,e){return function(n){var r,i,o,a=[],u=-1,c=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++u<l;)37===t.charCodeAt(u)&&(a.push(t.slice(c,u)),null!=(i=s[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),c=u+1);return a.push(t.slice(c,u)),a.join("")}}function Pt(t,n){return function(o){var a,s,u=i(1900);if(Dt(u,t,o+="",0)!=o.length)return null;if("Q"in u)return new Date(u.Q);if("p"in u&&(u.H=u.H%12+12*u.p),"V"in u){if(u.V<1||53<u.V)return null;"w"in u||(u.w=1),"Z"in u?(a=4<(s=(a=r(i(u.y))).getUTCDay())||0===s?e.utcMonday.ceil(a):e.utcMonday(a),a=e.utcDay.offset(a,7*(u.V-1)),u.y=a.getUTCFullYear(),u.m=a.getUTCMonth(),u.d=a.getUTCDate()+(u.w+6)%7):(a=4<(s=(a=n(i(u.y))).getDay())||0===s?e.timeMonday.ceil(a):e.timeMonday(a),a=e.timeDay.offset(a,7*(u.V-1)),u.y=a.getFullYear(),u.m=a.getMonth(),u.d=a.getDate()+(u.w+6)%7)}else("W"in u||"U"in u)&&("w"in u||(u.w="u"in u?u.u%7:"W"in u?1:0),s="Z"in u?r(i(u.y)).getUTCDay():n(i(u.y)).getDay(),u.m=0,u.d="W"in u?(u.w+6)%7+7*u.W-(s+5)%7:u.w+7*u.U-(s+6)%7);return"Z"in u?(u.H+=u.Z/100|0,u.M+=u.Z%100,r(u)):n(u)}}function Dt(t,e,n,r){for(var i,o,a=0,u=e.length,c=n.length;a<u;){if(c<=r)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=Rt[i in s?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return Ct.x=Ot(a,Ct),Ct.X=Ot(u,Ct),Ct.c=Ot(o,Ct),kt.x=Ot(a,kt),kt.X=Ot(u,kt),kt.c=Ot(o,kt),{format:function(t){var e=Ot(t+="",Ct);return e.toString=function(){return t},e},parse:function(t){var e=Pt(t+="",n);return e.toString=function(){return t},e},utcFormat:function(t){var e=Ot(t+="",kt);return e.toString=function(){return t},e},utcParse:function(t){var e=Pt(t,r);return e.toString=function(){return t},e}}}var a,s={"-":"",_:" ",0:"0"},u=/^\s*\d+/,c=/^%/,l=/[\\^$*+?|[\]().{}]/g;function h(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function f(t){return t.replace(l,"\\$&")}function d(t){return new RegExp("^(?:"+t.map(f).join("|")+")","i")}function p(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function m(t,e,n){var r=u.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function g(t,e,n){var r=u.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function v(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function y(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function w(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function x(t,e,n){var r=u.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function b(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(68<+r[0]?1900:2e3),n+r[0].length):-1}function _(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function M(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function S(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function E(t,e,n){var r=u.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function T(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function A(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function C(t,e,n){var r=u.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function k(t,e,n){var r=u.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function R(t,e,n){var r=u.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function O(t,e,n){var r=c.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function P(t,e,n){var r=u.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function D(t,e,n){var r=u.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function L(t,e){return h(t.getDate(),e,2)}function N(t,e){return h(t.getHours(),e,2)}function I(t,e){return h(t.getHours()%12||12,e,2)}function F(t,n){return h(1+e.timeDay.count(e.timeYear(t),t),n,3)}function z(t,e){return h(t.getMilliseconds(),e,3)}function U(t,e){return z(t,e)+"000"}function j(t,e){return h(t.getMonth()+1,e,2)}function V(t,e){return h(t.getMinutes(),e,2)}function B(t,e){return h(t.getSeconds(),e,2)}function H(t){var e=t.getDay();return 0===e?7:e}function G(t,n){return h(e.timeSunday.count(e.timeYear(t),t),n,2)}function q(t,n){var r=t.getDay();return t=4<=r||0===r?e.timeThursday(t):e.timeThursday.ceil(t),h(e.timeThursday.count(e.timeYear(t),t)+(4===e.timeYear(t).getDay()),n,2)}function W(t){return t.getDay()}function Y(t,n){return h(e.timeMonday.count(e.timeYear(t),t),n,2)}function X(t,e){return h(t.getFullYear()%100,e,2)}function $(t,e){return h(t.getFullYear()%1e4,e,4)}function Q(t){var e=t.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+h(e/60|0,"0",2)+h(e%60,"0",2)}function Z(t,e){return h(t.getUTCDate(),e,2)}function J(t,e){return h(t.getUTCHours(),e,2)}function K(t,e){return h(t.getUTCHours()%12||12,e,2)}function tt(t,n){return h(1+e.utcDay.count(e.utcYear(t),t),n,3)}function et(t,e){return h(t.getUTCMilliseconds(),e,3)}function nt(t,e){return et(t,e)+"000"}function rt(t,e){return h(t.getUTCMonth()+1,e,2)}function it(t,e){return h(t.getUTCMinutes(),e,2)}function ot(t,e){return h(t.getUTCSeconds(),e,2)}function at(t){var e=t.getUTCDay();return 0===e?7:e}function st(t,n){return h(e.utcSunday.count(e.utcYear(t),t),n,2)}function ut(t,n){var r=t.getUTCDay();return t=4<=r||0===r?e.utcThursday(t):e.utcThursday.ceil(t),h(e.utcThursday.count(e.utcYear(t),t)+(4===e.utcYear(t).getUTCDay()),n,2)}function ct(t){return t.getUTCDay()}function lt(t,n){return h(e.utcMonday.count(e.utcYear(t),t),n,2)}function ht(t,e){return h(t.getUTCFullYear()%100,e,2)}function ft(t,e){return h(t.getUTCFullYear()%1e4,e,4)}function dt(){return"+0000"}function pt(){return"%"}function mt(t){return+t}function gt(t){return Math.floor(+t/1e3)}function vt(e){return a=o(e),t.timeFormat=a.format,t.timeParse=a.parse,t.utcFormat=a.utcFormat,t.utcParse=a.utcParse,a}vt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var yt="%Y-%m-%dT%H:%M:%S.%LZ",wt=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat(yt),xt=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:t.utcParse(yt);t.timeFormatDefaultLocale=vt,t.timeFormatLocale=o,t.isoFormat=wt,t.isoParse=xt,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-time")):i(r.d3=r.d3||{},r.d3)},{"d3-time":4}],4:[function(t,e,n){var r;r=this,function(t){"use strict";var e=new Date,n=new Date;function r(t,i,o,a){function s(e){return t(e=new Date(+e)),e}return(s.floor=s).ceil=function(e){return t(e=new Date(e-1)),i(e,1),t(e),e},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,e){return i(t=new Date(+t),null==e?1:Math.floor(e)),t},s.range=function(e,n,r){var o,a=[];if(e=s.ceil(e),r=null==r?1:Math.floor(r),!(e<n&&0<r))return a;for(;a.push(o=new Date(+e)),i(e,r),t(e),o<e&&e<n;);return a},s.filter=function(e){return r(function(n){if(n<=n)for(;t(n),!e(n);)n.setTime(n-1)},function(t,n){if(t<=t)if(n<0)for(;++n<=0;)for(;i(t,-1),!e(t););else for(;0<=--n;)for(;i(t,1),!e(t););})},o&&(s.count=function(r,i){return e.setTime(+r),n.setTime(+i),t(e),t(n),Math.floor(o(e,n))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?s.filter(a?function(e){return a(e)%t==0}:function(e){return s.count(0,e)%t==0}):s:null}),s}var i=r(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});i.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?r(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):i:null};var o=i.range,a=6e4,s=36e5,u=6048e5,c=r(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),l=c.range,h=r(function(t){t.setTime(Math.floor(t/a)*a)},function(t,e){t.setTime(+t+e*a)},function(t,e){return(e-t)/a},function(t){return t.getMinutes()}),f=h.range,d=r(function(t){var e=t.getTimezoneOffset()*a%s;e<0&&(e+=s),t.setTime(Math.floor((+t-e)/s)*s+e)},function(t,e){t.setTime(+t+e*s)},function(t,e){return(e-t)/s},function(t){return t.getHours()}),p=d.range,m=r(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*a)/864e5},function(t){return t.getDate()-1}),g=m.range;function v(t){return r(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*a)/u})}var y=v(0),w=v(1),x=v(2),b=v(3),_=v(4),M=v(5),S=v(6),E=y.range,T=w.range,A=x.range,C=b.range,k=_.range,R=M.range,O=S.range,P=r(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),D=P.range,L=r(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});L.every=function(t){return isFinite(t=Math.floor(t))&&0<t?r(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var N=L.range,I=r(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*a)},function(t,e){return(e-t)/a},function(t){return t.getUTCMinutes()}),F=I.range,z=r(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*s)},function(t,e){return(e-t)/s},function(t){return t.getUTCHours()}),U=z.range,j=r(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),V=j.range;function B(t){return r(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/u})}var H=B(0),G=B(1),q=B(2),W=B(3),Y=B(4),X=B(5),$=B(6),Q=H.range,Z=G.range,J=q.range,K=W.range,tt=Y.range,et=X.range,nt=$.range,rt=r(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),it=rt.range,ot=r(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});ot.every=function(t){return isFinite(t=Math.floor(t))&&0<t?r(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var at=ot.range;t.timeInterval=r,t.timeMillisecond=i,t.timeMilliseconds=o,t.utcMillisecond=i,t.utcMilliseconds=o,t.timeSecond=c,t.timeSeconds=l,t.utcSecond=c,t.utcSeconds=l,t.timeMinute=h,t.timeMinutes=f,t.timeHour=d,t.timeHours=p,t.timeDay=m,t.timeDays=g,t.timeWeek=y,t.timeWeeks=E,t.timeSunday=y,t.timeSundays=E,t.timeMonday=w,t.timeMondays=T,t.timeTuesday=x,t.timeTuesdays=A,t.timeWednesday=b,t.timeWednesdays=C,t.timeThursday=_,t.timeThursdays=k,t.timeFriday=M,t.timeFridays=R,t.timeSaturday=S,t.timeSaturdays=O,t.timeMonth=P,t.timeMonths=D,t.timeYear=L,t.timeYears=N,t.utcMinute=I,t.utcMinutes=F,t.utcHour=z,t.utcHours=U,t.utcDay=j,t.utcDays=V,t.utcWeek=H,t.utcWeeks=Q,t.utcSunday=H,t.utcSundays=Q,t.utcMonday=G,t.utcMondays=Z,t.utcTuesday=q,t.utcTuesdays=J,t.utcWednesday=W,t.utcWednesdays=K,t.utcThursday=Y,t.utcThursdays=tt,t.utcFriday=X,t.utcFridays=et,t.utcSaturday=$,t.utcSaturdays=nt,t.utcMonth=rt,t.utcMonths=it,t.utcYear=ot,t.utcYears=at,Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&void 0!==e?n:r.d3=r.d3||{})},{}],5:[function(t,e,n){var r="undefined"!=typeof JSON?JSON:t("jsonify");e.exports=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var n=e.space||"";"number"==typeof n&&(n=Array(n+1).join(" "));var a,s="boolean"==typeof e.cycles&&e.cycles,u=e.replacer||function(t,e){return e},c=e.cmp&&(a=e.cmp,function(t){return function(e,n){return a({key:e,value:t[e]},{key:n,value:t[n]})}}),l=[];return function t(e,a,h,f){var d=n?"\n"+new Array(f+1).join(n):"",p=n?": ":":";if(h&&h.toJSON&&"function"==typeof h.toJSON&&(h=h.toJSON()),void 0!==(h=u.call(e,a,h))){if("object"!=typeof h||null===h)return r.stringify(h);if(i(h)){for(var m=[],g=0;g<h.length;g++){var v=t(h,g,h[g],f+1)||r.stringify(null);m.push(d+n+v)}return"["+m.join(",")+d+"]"}if(-1!==l.indexOf(h)){if(s)return r.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}l.push(h);var y=o(h).sort(c&&c(h));for(m=[],g=0;g<y.length;g++){var w=t(h,a=y[g],h[a],f+1);if(w){var x=r.stringify(a)+p+w;m.push(d+n+x)}}return l.splice(l.indexOf(h),1),"{"+m.join(",")+d+"}"}}({"":t},"",t,0)};var i=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},o=Object.keys||function(t){var e=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in t)e.call(t,r)&&n.push(r);return n}},{jsonify:6}],6:[function(t,e,n){n.parse=t("./lib/parse"),n.stringify=t("./lib/stringify")},{"./lib/parse":7,"./lib/stringify":8}],7:[function(t,e,n){var r,i,o,a,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},u=function(t){throw{name:"SyntaxError",message:t,at:r,text:o}},c=function(t){return t&&t!==i&&u("Expected '"+t+"' instead of '"+i+"'"),i=o.charAt(r),r+=1,i},l=function(){var t,e="";for("-"===i&&c(e="-");"0"<=i&&i<="9";)e+=i,c();if("."===i)for(e+=".";c()&&"0"<=i&&i<="9";)e+=i;if("e"===i||"E"===i)for(e+=i,c(),"-"!==i&&"+"!==i||(e+=i,c());"0"<=i&&i<="9";)e+=i,c();if(t=+e,isFinite(t))return t;u("Bad number")},h=function(){var t,e,n,r="";if('"'===i)for(;c();){if('"'===i)return c(),r;if("\\"===i)if(c(),"u"===i){for(e=n=0;e<4&&(t=parseInt(c(),16),isFinite(t));e+=1)n=16*n+t;r+=String.fromCharCode(n)}else{if("string"!=typeof s[i])break;r+=s[i]}else r+=i}u("Bad string")},f=function(){for(;i&&i<=" ";)c()};a=function(){switch(f(),i){case"{":return function(){var t,e={};if("{"===i){if(c("{"),f(),"}"===i)return c("}"),e;for(;i;){if(t=h(),f(),c(":"),Object.hasOwnProperty.call(e,t)&&u('Duplicate key "'+t+'"'),e[t]=a(),f(),"}"===i)return c("}"),e;c(","),f()}}u("Bad object")}();case"[":return function(){var t=[];if("["===i){if(c("["),f(),"]"===i)return c("]"),t;for(;i;){if(t.push(a()),f(),"]"===i)return c("]"),t;c(","),f()}}u("Bad array")}();case'"':return h();case"-":return l();default:return"0"<=i&&i<="9"?l():function(){switch(i){case"t":return c("t"),c("r"),c("u"),c("e"),!0;case"f":return c("f"),c("a"),c("l"),c("s"),c("e"),!1;case"n":return c("n"),c("u"),c("l"),c("l"),null}u("Unexpected '"+i+"'")}()}},e.exports=function(t,e){var n;return o=t,r=0,i=" ",n=a(),f(),i&&u("Syntax error"),"function"==typeof e?function t(n,r){var i,o,a=n[r];if(a&&"object"==typeof a)for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(void 0!==(o=t(a,i))?a[i]=o:delete a[i]);return e.call(n,r,a)}({"":n},""):n}},{}],8:[function(t,e,n){var r,i,o,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function u(t){return a.lastIndex=0,a.test(t)?'"'+t.replace(a,function(t){var e=s[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}e.exports=function(t,e,n){var a;if(i=r="","number"==typeof n)for(a=0;a<n;a+=1)i+=" ";else"string"==typeof n&&(i=n);if((o=e)&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return function t(e,n){var a,s,c,l,h,f=r,d=n[e];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(e)),"function"==typeof o&&(d=o.call(n,e,d)),typeof d){case"string":return u(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(r+=i,h=[],"[object Array]"===Object.prototype.toString.apply(d)){for(l=d.length,a=0;a<l;a+=1)h[a]=t(a,d)||"null";return c=0===h.length?"[]":r?"[\n"+r+h.join(",\n"+r)+"\n"+f+"]":"["+h.join(",")+"]",r=f,c}if(o&&"object"==typeof o)for(l=o.length,a=0;a<l;a+=1)"string"==typeof(s=o[a])&&(c=t(s,d))&&h.push(u(s)+(r?": ":":")+c);else for(s in d)Object.prototype.hasOwnProperty.call(d,s)&&(c=t(s,d))&&h.push(u(s)+(r?": ":":")+c);return c=0===h.length?"{}":r?"{\n"+r+h.join(",\n"+r)+"\n"+f+"}":"{"+h.join(",")+"}",r=f,c}}("",{"":t})}},{}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("vega-util"),i=t("./util"),o={argmax:1,argmin:1,average:1,count:1,distinct:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1};n.AGGREGATE_OPS=i.flagKeys(o),n.isAggregateOp=function(t){return!!o[t]},n.COUNTING_OPS=["count","valid","missing","distinct"],n.isCountingAggregateOp=function(t){return t&&i.contains(n.COUNTING_OPS,t)},n.SUM_OPS=["count","sum","distinct","valid","missing"],n.SHARED_DOMAIN_OPS=["mean","average","median","q1","q3","min","max"],n.SHARED_DOMAIN_OP_INDEX=r.toSet(n.SHARED_DOMAIN_OPS)},{"./util":27,"vega-util":28}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("vega-util"),i=t("./channel"),o=t("./util");n.binToString=function(t){return r.isBoolean(t)?"bin":"bin"+o.keys(t).map(function(e){return o.varName("_"+e+"_"+t[e])}).join("")},n.autoMaxBins=function(t){switch(t){case i.ROW:case i.COLUMN:case i.SIZE:case i.COLOR:case i.FILL:case i.STROKE:case i.OPACITY:case i.SHAPE:return 6;default:return 10}}},{"./channel":11,"./util":27,"vega-util":28}],11:[function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var o,a,s=t("./util");(a=o=n.Channel||(n.Channel={})).ROW="row",a.COLUMN="column",a.X="x",a.Y="y",a.X2="x2",a.Y2="y2",a.LATITUDE="latitude",a.LONGITUDE="longitude",a.LATITUDE2="latitude2",a.LONGITUDE2="longitude2",a.COLOR="color",a.FILL="fill",a.STROKE="stroke",a.SHAPE="shape",a.SIZE="size",a.OPACITY="opacity",a.TEXT="text",a.ORDER="order",a.DETAIL="detail",a.KEY="key",a.TOOLTIP="tooltip",a.HREF="href",n.X=o.X,n.Y=o.Y,n.X2=o.X2,n.Y2=o.Y2,n.LATITUDE=o.LATITUDE,n.LATITUDE2=o.LATITUDE2,n.LONGITUDE=o.LONGITUDE,n.LONGITUDE2=o.LONGITUDE2,n.ROW=o.ROW,n.COLUMN=o.COLUMN,n.SHAPE=o.SHAPE,n.SIZE=o.SIZE,n.COLOR=o.COLOR,n.FILL=o.FILL,n.STROKE=o.STROKE,n.TEXT=o.TEXT,n.DETAIL=o.DETAIL,n.KEY=o.KEY,n.ORDER=o.ORDER,n.OPACITY=o.OPACITY,n.TOOLTIP=o.TOOLTIP,n.HREF=o.HREF,n.GEOPOSITION_CHANNEL_INDEX={longitude:1,longitude2:1,latitude:1,latitude2:1},n.GEOPOSITION_CHANNELS=s.flagKeys(n.GEOPOSITION_CHANNEL_INDEX);var u=r({x:1,y:1,x2:1,y2:1},n.GEOPOSITION_CHANNEL_INDEX,{color:1,fill:1,stroke:1,opacity:1,size:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1});n.isColorChannel=function(t){return"color"===t||"fill"===t||"stroke"===t};var c=r({},u,{row:1,column:1});n.CHANNELS=s.flagKeys(c);var l=i(c,["order","detail"]);n.SINGLE_DEF_CHANNELS=s.flagKeys(l),n.isChannel=function(t){return!!c[t]},n.UNIT_CHANNELS=s.flagKeys(u);var h=i(u,["x","y","x2","y2","latitude","longitude","latitude2","longitude2"]);n.NONPOSITION_CHANNELS=s.flagKeys(h);var f={x:1,y:1};n.POSITION_SCALE_CHANNELS=s.flagKeys(f);var d=i(h,["text","tooltip","href","detail","key","order"]);n.NONPOSITION_SCALE_CHANNELS=s.flagKeys(d);var p=r({},f,d);function m(t){switch(t){case n.COLOR:case n.FILL:case n.STROKE:case n.DETAIL:case n.KEY:case n.TOOLTIP:case n.HREF:case n.ORDER:case n.OPACITY:case n.ROW:case n.COLUMN:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,area:!0,text:!0,geoshape:!0};case n.X:case n.Y:case n.LATITUDE:case n.LONGITUDE:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,area:!0,text:!0};case n.X2:case n.Y2:case n.LATITUDE2:case n.LONGITUDE2:return{rule:!0,bar:!0,rect:!0,area:!0};case n.SIZE:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0,line:!0};case n.SHAPE:return{point:!0,geoshape:!0};case n.TEXT:return{text:!0}}}n.SCALE_CHANNELS=s.flagKeys(p),n.isScaleChannel=function(t){return!!p[t]},n.supportMark=function(t,e){return e in m(t)},n.getSupportedMark=m,n.rangeType=function(t){switch(t){case n.X:case n.Y:case n.SIZE:case n.OPACITY:case n.X2:case n.Y2:return"continuous";case n.ROW:case n.COLUMN:case n.SHAPE:case n.TEXT:case n.TOOLTIP:case n.HREF:return"discrete";case n.COLOR:case n.FILL:case n.STROKE:return"flexible";case n.LATITUDE:case n.LONGITUDE:case n.LATITUDE2:case n.LONGITUDE2:case n.DETAIL:case n.KEY:case n.ORDER:return}throw new Error("rangeType not implemented for "+t)}},{"./util":27}],12:[function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var o=t("vega-util"),a=t("../encoding"),s=t("./../encoding"),u=t("./../fielddef"),c=t("./../log"),l=t("./common");function h(t){return!!t.type}n.BOXPLOT="box-plot",n.isBoxPlotDef=h,n.BOXPLOT_STYLES=["boxWhisker","box","boxMid"],n.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX={box:["size","color","extent"],boxWhisker:["color"],boxMid:["color"]};var f=["x","y","color","detail","opacity","size"];function d(t){return r({},t,{encoding:a.reduce(t.encoding,function(t,e,r){return-1<f.indexOf(r)?t[r]=e:c.warn(c.message.incompatibleChannel(r,n.BOXPLOT)),t},{})})}n.filterUnsupportedChannels=d,n.normalizeBoxPlot=function(t,e){var a=(t=d(t)).mark,f=t.selection,p=i(t,["mark","encoding","selection","projection"]),m=void 0;o.isNumber(e.box.extent)&&(m=e.box.extent),h(a)&&a.extent&&"min-max"===a.extent&&(m=void 0);var g,v,y,w,x=function(t,e,r){var o=function(t,e){var r,o,a=t.encoding;if(i(t,["mark","encoding","projection"]),"vertical"===e?(o="y",r=a.y):(o="x",r=a.x),r&&r.aggregate){var s=r.aggregate,u=i(r,["aggregate"]);s!==n.BOXPLOT&&c.warn("Continuous axis should not have customized aggregation function "+s),r=u}return{continuousAxisChannelDef:r,continuousAxis:o}}(t,e),a=o.continuousAxisChannelDef,l=o.continuousAxis,h=t.encoding,f=void 0===r,d=[{op:"q1",field:a.field,as:"lower_box_"+a.field},{op:"q3",field:a.field,as:"upper_box_"+a.field},{op:"median",field:a.field,as:"mid_box_"+a.field}],p=[];d.push({op:"min",field:a.field,as:(f?"lower_whisker_":"min_")+a.field}),d.push({op:"max",field:a.field,as:(f?"upper_whisker_":"max_")+a.field}),f||(p=[{calculate:"datum.upper_box_"+a.field+" - datum.lower_box_"+a.field,as:"iqr_"+a.field},{calculate:"min(datum.upper_box_"+a.field+" + datum.iqr_"+a.field+" * "+r+", datum.max_"+a.field+")",as:"upper_whisker_"+a.field},{calculate:"max(datum.lower_box_"+a.field+" - datum.iqr_"+a.field+" * "+r+", datum.min_"+a.field+")",as:"lower_whisker_"+a.field}]);var m=[],g=[],v=[],y={};return s.forEach(h,function(t,e){if(e!==l)if(u.isFieldDef(t)){if(t.aggregate&&t.aggregate!==n.BOXPLOT)d.push({op:t.aggregate,field:t.field,as:u.vgField(t)});else if(void 0===t.aggregate){var r=u.vgField(t),i=t.bin;if(i){var o=t.field;g.push({bin:i,field:o,as:r})}else t.timeUnit&&v.push({timeUnit:t.timeUnit,field:o=t.field,as:r});m.push(r)}y[e]={field:u.vgField(t),type:t.type}}else y[e]=h[e]}),{transform:[].concat(g,v,[{aggregate:d,groupby:m}],p),continuousAxisChannelDef:a,continuousAxis:l,encodingWithoutContinuousAxis:y}}(t,function(t){var e=t.mark,r=t.encoding;if(i(t,["mark","encoding","projection"]),u.isFieldDef(r.x)&&u.isContinuous(r.x)){if(u.isFieldDef(r.y)&&u.isContinuous(r.y)){if(void 0===r.x.aggregate&&r.y.aggregate===n.BOXPLOT)return"vertical";if(void 0===r.y.aggregate&&r.x.aggregate===n.BOXPLOT)return"horizontal";if(r.x.aggregate===n.BOXPLOT&&r.y.aggregate===n.BOXPLOT)throw new Error("Both x and y cannot have aggregate");return h(e)&&e.orient?e.orient:"vertical"}return"horizontal"}if(u.isFieldDef(r.y)&&u.isContinuous(r.y))return"vertical";throw new Error("Need a valid continuous axis for boxplots")}(t),m),b=x.transform,_=x.continuousAxisChannelDef,M=x.continuousAxis,S=x.encodingWithoutContinuousAxis,E=S.size,T=i(S,["color","size"]),A=E?{size:E}:l.getMarkSpecificConfigMixins(e.box,"size"),C={};return _.scale&&(C.scale=_.scale),_.axis&&(C.axis=_.axis),r({},p,{transform:b,layer:[{mark:{type:"rule",style:"boxWhisker"},encoding:r((g={},g[M]=r({field:"lower_whisker_"+_.field,type:_.type},C),g[M+"2"]={field:"lower_box_"+_.field,type:_.type},g),T,l.getMarkSpecificConfigMixins(e.boxWhisker,"color"))},{mark:{type:"rule",style:"boxWhisker"},encoding:r((v={},v[M]={field:"upper_box_"+_.field,type:_.type},v[M+"2"]={field:"upper_whisker_"+_.field,type:_.type},v),T,l.getMarkSpecificConfigMixins(e.boxWhisker,"color"))},r({},f?{selection:f}:{},{mark:{type:"bar",style:"box"},encoding:r((y={},y[M]={field:"lower_box_"+_.field,type:_.type},y[M+"2"]={field:"upper_box_"+_.field,type:_.type},y),S,S.color?{}:l.getMarkSpecificConfigMixins(e.box,"color"),A)}),{mark:{type:"tick",style:"boxMid"},encoding:r((w={},w[M]={field:"mid_box_"+_.field,type:_.type},w),T,l.getMarkSpecificConfigMixins(e.boxMid,"color"),A)}]})}},{"../encoding":17,"./../encoding":17,"./../fielddef":18,"./../log":19,"./common":13,"vega-util":28}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getMarkSpecificConfigMixins=function(t,e){var n,r=t[e];return void 0!==r?((n={})[e]={value:r},n):{}}},{}],14:[function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.ERRORBAR="error-bar",n.normalizeErrorBar=function(t){var e=t.encoding,n=i(t,["mark","selection","projection","encoding"]),o=i(e,["size"]),a=i(e,["x2","y2"]),s=i(a,["x","y"]);if(!e.x2&&!e.y2)throw new Error("Neither x2 or y2 provided");return r({},n,{layer:[{mark:"rule",encoding:o},{mark:"tick",encoding:a},{mark:"tick",encoding:r(e.x2?{x:e.x2,y:e.y}:{x:e.x,y:e.y2},s)}]})}},{}],15:[function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./../mark"),o=t("./boxplot"),a=t("./errorbar"),s={};function u(t,e){s[t]=e}n.add=u,n.remove=function(t){delete s[t]},n.COMPOSITE_MARK_STYLES=o.BOXPLOT_STYLES,n.VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX=r({},o.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX),u(o.BOXPLOT,o.normalizeBoxPlot),u(a.ERRORBAR,a.normalizeErrorBar),n.normalize=function(t,e){var n=i.isMarkDef(t.mark)?t.mark.type:t.mark,r=s[n];if(r)return r(t,e);throw new Error('Invalid mark type "'+n+'"')}},{"./../mark":21,"./boxplot":12,"./errorbar":14}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("vega-util"),i=t("./log"),o=t("./util");n.isDateTime=function(t){return!(!t||!(t.year||t.quarter||t.month||t.date||t.day||t.hours||t.minutes||t.seconds||t.milliseconds))},n.MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],n.SHORT_MONTHS=n.MONTHS.map(function(t){return t.substr(0,3)}),n.DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n.SHORT_DAYS=n.DAYS.map(function(t){return t.substr(0,3)}),n.dateTimeExpr=function(t,e){void 0===e&&(e=!1);var a=[];if(e&&void 0!==t.day&&1<o.keys(t).length&&(i.warn(i.message.droppedDay(t)),delete(t=o.duplicate(t)).day),a.push(void 0!==t.year?t.year:void 0!==t.day?2006:0),void 0!==t.month){var s=e?function(t){if(r.isNumber(t))return t-1+"";var e=t.toLowerCase(),o=n.MONTHS.indexOf(e);if(-1!==o)return o+"";var a=e.substr(0,3),s=n.SHORT_MONTHS.indexOf(a);if(-1!==s)return s+"";throw new Error(i.message.invalidTimeUnit("month",t))}(t.month):t.month;a.push(s)}else if(void 0!==t.quarter){var u=e?function(t){if(r.isNumber(t))return 4<t&&i.warn(i.message.invalidTimeUnit("quarter",t)),t-1+"";throw new Error(i.message.invalidTimeUnit("quarter",t))}(t.quarter):t.quarter;a.push(u+"*3")}else a.push(0);if(void 0!==t.date)a.push(t.date);else if(void 0!==t.day){var c=e?function(t){if(r.isNumber(t))return t%7+"";var e=t.toLowerCase(),o=n.DAYS.indexOf(e);if(-1!==o)return o+"";var a=e.substr(0,3),s=n.SHORT_DAYS.indexOf(a);if(-1!==s)return s+"";throw new Error(i.message.invalidTimeUnit("day",t))}(t.day):t.day;a.push(c+"+1")}else a.push(1);for(var l=0,h=["hours","minutes","seconds","milliseconds"];l<h.length;l++){var f=h[l];a.push(void 0!==t[f]?t[f]:0)}return t.utc?"utc("+a.join(", ")+")":"datetime("+a.join(", ")+")"}},{"./log":19,"./util":27,"vega-util":28}],17:[function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var o=t("vega-util"),a=t("./channel"),s=t("./fielddef"),u=t("./log"),c=t("./type"),l=t("./util");function h(t,e){var n=t&&t[e];return!!n&&(o.isArray(n)?l.some(n,function(t){return!!t.field}):s.isFieldDef(n)||s.hasConditionalFieldDef(n))}n.channelHasField=h,n.isAggregate=function(t){return l.some(a.CHANNELS,function(e){if(h(t,e)){var n=t[e];if(o.isArray(n))return l.some(n,function(t){return!!t.aggregate});var r=s.getFieldDef(n);return r&&!!r.aggregate}return!1})},n.normalizeEncoding=function(t,e){return l.keys(t).reduce(function(n,h){if(!a.isChannel(h))return u.warn(u.message.invalidEncodingChannel(h)),n;if(!a.supportMark(h,e))return u.warn(u.message.incompatibleChannel(h,e)),n;var f;if("size"===h&&"line"===e&&(d=s.getFieldDef(t[h]))&&d.aggregate)return u.warn(u.message.incompatibleChannel(h,e,"when the field is aggregated.")),n;if("detail"===h||"order"===h)(p=t[h])&&(n[h]=(o.isArray(p)?p:[p]).reduce(function(t,e){return s.isFieldDef(e)?t.push(s.normalizeFieldDef(e,h)):u.warn(u.message.emptyFieldDef(e,h)),t},[]));else{var d,p=t[h];if((d=s.getFieldDef(t[h]))&&l.contains([c.Type.LATITUDE,c.Type.LONGITUDE],d.type)){var m=i(n,["symbol"==typeof h?h:h+""]),g="x"===h?"longitude":"y"===h?"latitude":"x2"===h?"longitude2":"y2"===h?"latitude2":void 0;return u.warn(u.message.latLongDeprecated(h,d.type,g)),r({},m,((f={})[g]=r({},s.normalize(d,h),{type:"quantitative"}),f))}if(!s.isFieldDef(p)&&!s.isValueDef(p)&&!s.isConditionalDef(p))return u.warn(u.message.emptyFieldDef(p,h)),n;n[h]=s.normalize(p,h)}return n},{})},n.isRanged=function(t){return t&&(!!t.x&&!!t.x2||!!t.y&&!!t.y2)},n.fieldDefs=function(t){var e=[];return a.CHANNELS.forEach(function(n){if(h(t,n)){var r=t[n];(o.isArray(r)?r:[r]).forEach(function(t){s.isFieldDef(t)?e.push(t):s.hasConditionalFieldDef(t)&&e.push(t.condition)})}}),e},n.forEach=function(t,e,n){if(t)for(var r=function(r){o.isArray(t[r])?t[r].forEach(function(t){e.call(n,t,r)}):e.call(n,t[r],r)},i=0,a=l.keys(t);i<a.length;i++)r(a[i])},n.reduce=function(t,e,n,r){return t?l.keys(t).reduce(function(n,i){var a=t[i];return o.isArray(a)?a.reduce(function(t,n){return e.call(r,t,n,i)},n):e.call(r,n,a,i)},n):n}},{"./channel":11,"./fielddef":18,"./log":19,"./type":26,"./util":27,"vega-util":28}],18:[function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var o=t("vega-util"),a=t("./aggregate"),s=t("./bin"),u=t("./channel"),c=t("./log"),l=t("./timeunit"),h=t("./type"),f=t("./util");function d(t){return!!t&&!!t.condition&&!o.isArray(t.condition)&&p(t.condition)}function p(t){return!(!t||!t.field&&"count"!==t.aggregate)}function m(t){return t&&"value"in t&&void 0!==t.value}function g(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return!!t.bin;case"latitude":case"longitude":case"temporal":return!1}throw new Error(c.message.invalidFieldType(t.type))}function v(t){return!g(t)}function y(t){return"count"===t.aggregate}function w(t,e){var n=t.field,r=t.timeUnit,i=t.aggregate;return"count"===i?e.countTitle:t.bin?n+" (binned)":r?n+" ("+l.getTimeUnitParts(r).join("-")+")":i?f.titlecase(i)+" of "+n:n}function x(t,e){var n=t.aggregate||t.timeUnit||t.bin&&"bin";return n?n.toUpperCase()+"("+t.field+")":t.field}n.isConditionalSelection=function(t){return t.selection},n.isRepeatRef=function(t){return t&&!o.isString(t)&&"repeat"in t},n.toFieldDefBase=function(t){var e=t.timeUnit,n=t.bin,i=t.aggregate;return r({},e?{timeUnit:e}:{},n?{bin:n}:{},i?{aggregate:i}:{},{field:t.field})},n.isConditionalDef=function(t){return!!t&&!!t.condition},n.hasConditionalFieldDef=d,n.hasConditionalValueDef=function(t){return!!t&&!!t.condition&&(o.isArray(t.condition)||m(t.condition))},n.isFieldDef=p,n.isStringFieldDef=function(t){return p(t)&&o.isString(t.field)},n.isValueDef=m,n.isScaleFieldDef=function(t){return!(!t||!t.scale&&!t.sort)},n.vgField=function(t,e){void 0===e&&(e={});var n=t.field,r=e.prefix,i=e.suffix;if(y(t))n="count_*";else{var o=void 0;e.nofn||(t.bin?(o=s.binToString(t.bin),i=e.binSuffix||""):t.aggregate?o=String(e.aggregate||t.aggregate):t.timeUnit&&(o=String(t.timeUnit))),o&&(n=o+"_"+n)}return i&&(n=n+"_"+i),r&&(n=r+"_"+n),e.expr&&(n=""+e.expr+f.accessPath(n)),n},n.isDiscrete=g,n.isContinuous=v,n.isCount=y,n.verbalTitleFormatter=w,n.functionalTitleFormatter=x,n.defaultTitleFormatter=function(t,e){switch(e.fieldTitle){case"plain":return t.field;case"functional":return x(t);default:return w(t,e)}};var b=n.defaultTitleFormatter;function _(t){b=t}function M(t,e){if(t.timeUnit)return"temporal";if(t.bin)return"quantitative";switch(u.rangeType(e)){case"continuous":return"quantitative";case"discrete":case"flexible":return"nominal";default:return"quantitative"}}function S(t,e){if(t.aggregate&&!a.isAggregateOp(t.aggregate)){var n=i(t,["aggregate"]);c.warn(c.message.invalidAggregate(t.aggregate)),t=n}if(t.timeUnit&&(t=r({},t,{timeUnit:l.normalizeTimeUnit(t.timeUnit)})),t.bin&&(t=r({},t,{bin:E(t.bin,e)})),t.type){var o=h.getFullName(t.type);t.type!==o&&(t=r({},t,{type:o})),"quantitative"!==t.type&&a.isCountingAggregateOp(t.aggregate)&&(c.warn(c.message.invalidFieldTypeForCountAggregate(t.type,t.aggregate)),t=r({},t,{type:"quantitative"}))}else{var s=M(t,e);c.warn(c.message.emptyOrInvalidFieldType(t.type,e,s)),t=r({},t,{type:s})}var u=A(t,e);return u.compatible||c.warn(u.warning),t}function E(t,e){return o.isBoolean(t)?{maxbins:s.autoMaxBins(e)}:t.maxbins||t.step?t:r({},t,{maxbins:s.autoMaxBins(e)})}n.setTitleFormatter=_,n.resetTitleFormatter=function(){_(n.defaultTitleFormatter)},n.title=function(t,e){return b(t,e)},n.defaultType=M,n.getFieldDef=function(t){return p(t)?t:d(t)?t.condition:void 0},n.normalize=function(t,e){if(o.isString(t)||o.isNumber(t)||o.isBoolean(t)){var n=o.isString(t)?"string":o.isNumber(t)?"number":"boolean";return c.warn(c.message.primitiveChannelDef(e,n,t)),{value:t}}return p(t)?S(t,e):d(t)?r({},t,{condition:S(t.condition,e)}):t},n.normalizeFieldDef=S,n.normalizeBin=E;var T={compatible:!0};function A(t,e){switch(e){case"row":case"column":return v(t)&&!t.timeUnit?{compatible:!1,warning:c.message.facetChannelShouldBeDiscrete(e)}:T;case"x":case"y":case"color":case"fill":case"stroke":case"text":case"detail":case"key":case"tooltip":case"href":return T;case"longitude":case"longitude2":case"latitude":case"latitude2":return t.type!==h.QUANTITATIVE?{compatible:!1,warning:"Channel "+e+" should not be used with "+t.type+" field."}:T;case"opacity":case"size":case"x2":case"y2":return g(t)&&!t.bin?{compatible:!1,warning:"Channel "+e+" should not be used with discrete field."}:T;case"shape":return"nominal"!==t.type&&"geojson"!==t.type?{compatible:!1,warning:"Shape channel should be used with nominal data or geojson only"}:T;case"order":return"nominal"===t.type?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:T}throw new Error("channelCompatability not implemented for channel "+e)}n.channelCompatibility=A,n.isNumberFieldDef=function(t){return"quantitative"===t.type||!!t.bin},n.isTimeFieldDef=function(t){return"temporal"===t.type||!!t.timeUnit}},{"./aggregate":9,"./bin":10,"./channel":11,"./log":19,"./timeunit":25,"./type":26,"./util":27,"vega-util":28}],19:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=t("vega-util"),o=t("./util"),a=i.logger(i.Warn),s=a,u=function(){function t(){this.warns=[],this.infos=[],this.debugs=[]}return t.prototype.level=function(){return this},t.prototype.warn=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.warns).push.apply(t,e),this},t.prototype.info=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.infos).push.apply(t,e),this},t.prototype.debug=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.debugs).push.apply(t,e),this},t}();function c(){return s=a}n.LocalLogger=u,n.wrap=function(t){return function(){s=new u,t(s),c()}},n.set=function(t){return s=t},n.reset=c,n.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.warn.apply(s,arguments)},n.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.info.apply(s,arguments)},n.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.debug.apply(s,arguments)},(r=n.message||(n.message={})).INVALID_SPEC="Invalid spec",r.FIT_NON_SINGLE='Autosize "fit" only works for single views and layered views.',r.CANNOT_FIX_RANGE_STEP_WITH_FIT='Cannot use a fixed value of "rangeStep" when "autosize" is "fit".',r.cannotProjectOnChannelWithoutField=function(t){return'Cannot project a selection on encoding channel "'+t+'", which has no field.'},r.nearestNotSupportForContinuous=function(t){return'The "nearest" transform is not supported for '+t+" marks."},r.selectionNotFound=function(t){return'Cannot find a selection named "'+t+'"'},r.SCALE_BINDINGS_CONTINUOUS="Scale bindings are currently only supported for scales with unbinned, continuous domains.",r.noSuchRepeatedValue=function(t){return'Unknown repeated value "'+t+'".'},r.CONCAT_CANNOT_SHARE_AXIS="Axes cannot be shared in concatenated views.",r.REPEAT_CANNOT_SHARE_AXIS="Axes cannot be shared in repeated views.",r.cannotSetTitleAnchor=function(t){return'Cannot set title "anchor" for a '+t+" spec"},r.unrecognizedParse=function(t){return'Unrecognized parse "'+t+'".'},r.differentParse=function(t,e,n){return'An ancestor parsed field "'+t+'" as '+n+" but a child wants to parse the field as "+e+"."},r.invalidTransformIgnored=function(t){return"Ignoring an invalid transform: "+o.stringify(t)+"."},r.NO_FIELDS_NEEDS_AS='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the the data from the secondary source.',r.encodingOverridden=function(t){return"Layer's shared "+t.join(",")+" channel "+(1===t.length?"is":"are")+" overriden"},r.projectionOverridden=function(t){var e=t.projection;return"Layer's shared projection "+o.stringify(t.parentProjection)+" is overridden by a child projection "+o.stringify(e)+"."},r.primitiveChannelDef=function(t,e,n){return"Channel "+t+" is a "+e+". Converted to {value: "+o.stringify(n)+"}."},r.invalidFieldType=function(t){return'Invalid field type "'+t+'"'},r.invalidFieldTypeForCountAggregate=function(t,e){return'Invalid field type "'+t+'" for aggregate: "'+e+'", using "quantitative" instead.'},r.invalidAggregate=function(t){return'Invalid aggregation operator "'+t+'"'},r.emptyOrInvalidFieldType=function(t,e,n){return'Invalid field type "'+t+'" for channel "'+e+'", using "'+n+'" instead.'},r.emptyFieldDef=function(t,e){return"Dropping "+o.stringify(t)+' from channel "'+e+'" since it does not contain data field or value.'},r.latLongDeprecated=function(t,e,n){return t+"-encoding with type "+e+" is deprecated. Replacing with "+n+"-encoding."},r.incompatibleChannel=function(t,e,n){return t+' dropped as it is incompatible with "'+e+'"'+(n?" when "+n:"")+"."},r.invalidEncodingChannel=function(t){return t+"-encoding is dropped as "+t+" is not a valid encoding channel."},r.facetChannelShouldBeDiscrete=function(t){return t+" encoding should be discrete (ordinal / nominal / binned)."},r.discreteChannelCannotEncode=function(t,e){return'Using discrete channel "'+t+'" to encode "'+e+'" field can be misleading as it does not encode '+("ordinal"===e?"order":"magnitude")+"."},r.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL="Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.",r.unclearOrientContinuous=function(t){return'Cannot clearly determine orientation for "'+t+'" since both x and y channel encode continuous fields. In this case, we use vertical by default'},r.unclearOrientDiscreteOrEmpty=function(t){return'Cannot clearly determine orientation for "'+t+'" since both x and y channel encode discrete or empty fields.'},r.orientOverridden=function(t,e){return'Specified orient "'+t+'" overridden with "'+e+'"'},r.CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN="custom domain scale cannot be unioned with default field-based domain",r.cannotUseScalePropertyWithNonColor=function(t){return'Cannot use the scale property "'+t+'" with non-color channel.'},r.unaggregateDomainHasNoEffectForRawField=function(t){return"Using unaggregated domain with raw field has no effect ("+o.stringify(t)+")."},r.unaggregateDomainWithNonSharedDomainOp=function(t){return'Unaggregated domain not applicable for "'+t+'" since it produces values outside the origin domain of the source data.'},r.unaggregatedDomainWithLogScale=function(t){return"Unaggregated domain is currently unsupported for log scale ("+o.stringify(t)+")."},r.cannotUseSizeFieldWithBandSize=function(t){return"Using size field when "+t+"-channel has a band scale is not supported."},r.cannotApplySizeToNonOrientedMark=function(t){return'Cannot apply size to non-oriented mark "'+t+'".'},r.rangeStepDropped=function(t){return'rangeStep for "'+t+'" is dropped as top-level '+("x"===t?"width":"height")+" is provided."},r.scaleTypeNotWorkWithChannel=function(t,e,n){return'Channel "'+t+'" does not work with "'+e+'" scale. We are using "'+n+'" scale instead.'},r.scaleTypeNotWorkWithFieldDef=function(t,e){return'FieldDef does not work with "'+t+'" scale. We are using "'+e+'" scale instead.'},r.scalePropertyNotWorkWithScaleType=function(t,e,n){return n+"-scale's \""+e+'" is dropped as it does not work with '+t+" scale."},r.scaleTypeNotWorkWithMark=function(t,e){return'Scale type "'+e+'" does not work with mark "'+t+'".'},r.mergeConflictingProperty=function(t,e,n,r){return"Conflicting "+e+' property "'+t+'" ('+o.stringify(n)+" and "+o.stringify(r)+").  Using "+o.stringify(n)+"."},r.independentScaleMeansIndependentGuide=function(t){return'Setting the scale to be independent for "'+t+'" means we also have to set the guide (axis or legend) to be independent.'},r.conflictedDomain=function(t){return"Cannot set "+t+'-scale\'s "domain" as it is binned. Please use "bin"\'s "extent" instead.'},r.domainSortDropped=function(t){return"Dropping sort property "+o.stringify(t)+" as unioned domains only support boolean or op 'count'."},r.UNABLE_TO_MERGE_DOMAINS="Unable to merge domains",r.MORE_THAN_ONE_SORT="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",r.INVALID_CHANNEL_FOR_AXIS="Invalid channel for axis.",r.cannotStackRangedMark=function(t){return'Cannot stack "'+t+'" if there is already "'+t+'2"'},r.cannotStackNonLinearScale=function(t){return"Cannot stack non-linear scale ("+t+")"},r.stackNonSummativeAggregate=function(t){return'Stacking is applied even though the aggregate function is non-summative ("'+t+'")'},r.invalidTimeUnit=function(t,e){return"Invalid "+t+": "+o.stringify(e)},r.dayReplacedWithDate=function(t){return'Time unit "'+t+'" is not supported. We are replacing it with '+t.replace("day","date")+"."},r.droppedDay=function(t){return"Dropping day from datetime "+o.stringify(t)+" as day cannot be combined with other units."}},{"./util":27,"vega-util":28}],20:[function(t,e,n){"use strict";function r(t){return!!t.or}function i(t){return!!t.and}function o(t){return!!t.not}Object.defineProperty(n,"__esModule",{value:!0}),n.isLogicalOr=r,n.isLogicalAnd=i,n.isLogicalNot=o,n.forEachLeave=function t(e,n){if(o(e))t(e.not,n);else if(i(e))for(var a=0,s=e.and;a<s.length;a++)t(s[a],n);else if(r(e))for(var u=0,c=e.or;u<c.length;u++)t(c[u],n);else n(e)},n.normalizeLogicalOperand=function t(e,n){return o(e)?{not:t(e.not,n)}:i(e)?{and:e.and.map(function(e){return t(e,n)})}:r(e)?{or:e.or.map(function(e){return t(e,n)})}:n(e)}},{}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i,o=t("vega-util"),a=t("./util");(i=r=n.Mark||(n.Mark={})).AREA="area",i.BAR="bar",i.LINE="line",i.POINT="point",i.RECT="rect",i.RULE="rule",i.TEXT="text",i.TICK="tick",i.CIRCLE="circle",i.SQUARE="square",i.GEOSHAPE="geoshape",n.AREA=r.AREA,n.BAR=r.BAR,n.LINE=r.LINE,n.POINT=r.POINT,n.TEXT=r.TEXT,n.TICK=r.TICK,n.RECT=r.RECT,n.RULE=r.RULE,n.GEOSHAPE=r.GEOSHAPE,n.CIRCLE=r.CIRCLE,n.SQUARE=r.SQUARE;var s={area:1,bar:1,line:1,point:1,text:1,tick:1,rect:1,geoshape:1,rule:1,circle:1,square:1};function u(t){return t.type}n.isMark=function(t){return!!s[t]},n.PRIMITIVE_MARKS=a.flagKeys(s),n.isMarkDef=u;var c=o.toSet(n.PRIMITIVE_MARKS);n.isPrimitiveMark=function(t){return(u(t)?t.type:t)in c},n.STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity"],n.FILL_CONFIG=["fill","fillOpacity"],n.FILL_STROKE_CONFIG=[].concat(n.STROKE_CONFIG,n.FILL_CONFIG),n.VL_ONLY_MARK_CONFIG_PROPERTIES=["filled","color"],n.VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX={bar:["binSpacing","continuousBandSize","discreteBandSize"],text:["shortTimeLabels"],tick:["bandSize","thickness"]},n.defaultMarkConfig={color:"#4c78a8"},n.defaultBarConfig={binSpacing:1,continuousBandSize:5},n.defaultTickConfig={thickness:1}},{"./util":27,"vega-util":28}],22:[function(t,e,n){"use strict";var r=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var i,o=t("vega-util"),a=t("./channel"),s=t("./log"),u=t("./util");(i=n.ScaleType||(n.ScaleType={})).LINEAR="linear",i.BIN_LINEAR="bin-linear",i.LOG="log",i.POW="pow",i.SQRT="sqrt",i.TIME="time",i.UTC="utc",i.SEQUENTIAL="sequential",i.QUANTILE="quantile",i.QUANTIZE="quantize",i.THRESHOLD="threshold",i.ORDINAL="ordinal",i.BIN_ORDINAL="bin-ordinal",i.POINT="point",i.BAND="band";var c={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric","bin-linear":"bin-linear",time:"time",utc:"time",sequential:"sequential",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position"};n.SCALE_TYPES=u.keys(c),n.scaleCompatible=function(t,e){var n=c[t],r=c[e];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n};var l={linear:0,log:1,pow:1,sqrt:1,time:0,utc:0,point:10,band:11,"bin-linear":0,sequential:0,ordinal:0,"bin-ordinal":0};n.scaleTypePrecedence=function(t){return l[t]},n.CONTINUOUS_TO_CONTINUOUS_SCALES=["linear","bin-linear","log","pow","sqrt","time","utc"];var h=o.toSet(n.CONTINUOUS_TO_CONTINUOUS_SCALES);n.CONTINUOUS_DOMAIN_SCALES=n.CONTINUOUS_TO_CONTINUOUS_SCALES.concat(["sequential"]);var f=o.toSet(n.CONTINUOUS_DOMAIN_SCALES);n.DISCRETE_DOMAIN_SCALES=["ordinal","bin-ordinal","point","band"];var d=o.toSet(n.DISCRETE_DOMAIN_SCALES),p=o.toSet(["bin-linear","bin-ordinal"]);function m(t){return t in f}function g(t){return t in h}n.TIME_SCALE_TYPES=["time","utc"],n.hasDiscreteDomain=function(t){return t in d},n.isBinScale=function(t){return t in p},n.hasContinuousDomain=m,n.isContinuousToContinuous=g,n.defaultScaleConfig={textXRangeStep:90,rangeStep:21,pointPadding:.5,bandPaddingInner:.1,facetSpacing:16,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4},n.isExtendedScheme=function(t){return t&&!!t.name},n.isSelectionDomain=function(t){return t&&t.selection};var v={type:1,domain:1,range:1,rangeStep:1,scheme:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1};n.SCALE_PROPERTIES=u.flagKeys(v);var y=r(v,["type","domain","range","rangeStep","scheme"]);n.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES=u.flagKeys(y),n.scaleTypeSupportProperty=function(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":return u.contains(["sequential","ordinal","bin-ordinal","quantile","quantize"],t);case"interpolate":return u.contains(["linear","bin-linear","pow","log","sqrt","utc","time"],t);case"round":return g(t)||"band"===t||"point"===t;case"padding":return g(t)||u.contains(["point","band"],t);case"paddingOuter":case"rangeStep":return u.contains(["point","band"],t);case"paddingInner":return"band"===t;case"clamp":return g(t)||"sequential"===t;case"nice":return g(t)||"sequential"===t||"quantize"===t;case"exponent":return"pow"===t;case"base":return"log"===t;case"zero":return m(t)&&!u.contains(["log","time","utc","bin-linear","threshold","quantile"],t)}throw new Error("Invalid scale property "+e+".")},n.channelScalePropertyIncompatability=function(t,e){switch(e){case"interpolate":case"scheme":return a.isColorChannel(t)?void 0:s.message.cannotUseScalePropertyWithNonColor(t);case"type":case"domain":case"range":case"base":case"exponent":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeStep":case"reverse":case"round":case"clamp":case"zero":return}throw new Error('Invalid scale property "'+e+'".')},n.channelSupportScaleType=function(t,e){switch(t){case a.Channel.X:case a.Channel.Y:case a.Channel.SIZE:case a.Channel.OPACITY:return g(e)||u.contains(["band","point"],e);case a.Channel.COLOR:case a.Channel.FILL:case a.Channel.STROKE:return"band"!==e;case a.Channel.SHAPE:return"ordinal"===e}return!1}},{"./channel":11,"./log":19,"./util":27,"vega-util":28}],23:[function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var o=t("./channel"),a=t("./compositemark"),s=t("./encoding"),u=t("./encoding"),c=t("./log"),l=t("./mark"),h=t("./stack"),f=t("./util");function d(t){return void 0!==t.facet}function p(t){return!!t.mark}function m(t){return void 0!==t.layer}function g(t){return void 0!==t.repeat}function v(t){return y(t)||w(t)}function y(t){return void 0!==t.vconcat}function w(t){return void 0!==t.hconcat}function x(t){var e=t.parentEncoding,n=t.encoding;if(e&&n){var i=f.keys(e).reduce(function(t,e){return n[e]&&t.push(e),t},[]);0<i.length&&c.warn(c.message.encodingOverridden(i))}var o=r({},e||{},n||{});return 0<f.keys(o).length?o:void 0}function b(t){var e=t.parentProjection,n=t.projection;return e&&n&&c.warn(c.message.projectionOverridden({parentProjection:e,projection:n})),n||e}function _(t,e,n,u){var c=t.encoding;if(n||u){var d=b({parentProjection:u,projection:t.projection}),p=x({parentEncoding:n,encoding:c});return _(r({},t,d?{projection:d}:{},p?{encoding:p}:{}),e)}if(l.isPrimitiveMark(t.mark)){if(s.isRanged(c))return function(t){var e=s.channelHasField(t.encoding,o.X),n=s.channelHasField(t.encoding,o.Y),r=s.channelHasField(t.encoding,o.X2),i=s.channelHasField(t.encoding,o.Y2);if(r&&!e||i&&!n){var a=f.duplicate(t);return r&&!e&&(a.encoding.x=a.encoding.x2,delete a.encoding.x2),i&&!n&&(a.encoding.y=a.encoding.y2,delete a.encoding.y2),a}return t}(t);var m=e&&e.overlay,g=m&&t.mark===l.AREA&&f.contains(["linepoint","line"],m.area),v=m&&(m.line&&t.mark===l.LINE||"linepoint"===m.area&&t.mark===l.AREA);return v||g?function(t,e,n,o){var a,s=t.mark,u=t.selection,c=t.projection,l=t.encoding,f=i(t,["mark","selection","projection","encoding"]),d=[{mark:s,encoding:l}],p=h.stack(s,l,o?o.stack:void 0),m=l;if(p){var g=p.fieldChannel,v=p.offset;m=r({},l,((a={})[g]=r({},l[g],v?{stack:v}:{}),a))}return n&&d.push(r({},c?{projection:c}:{},{mark:{type:"line",style:"lineOverlay"}},u?{selection:u}:{},{encoding:m})),e&&d.push(r({},c?{projection:c}:{},{mark:{type:"point",filled:!0,style:"pointOverlay"}},u?{selection:u}:{},{encoding:m})),r({},f,{layer:d})}(t,v,g,e):t}return a.normalize(t,e)}function M(t,e){return e.forEach(function(e){var n=["field","type","value","timeUnit","bin","aggregate"].reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{}),r=f.hash(n);t[r]=t[r]||e}),t}n.isFacetSpec=d,n.isUnitSpec=p,n.isLayerSpec=m,n.isRepeatSpec=g,n.isConcatSpec=v,n.isVConcatSpec=y,n.isHConcatSpec=w,n.normalize=function t(e,n){if(d(e))return u=n,l=(a=e).spec,h=i(a,["spec"]),r({},h,{spec:t(l,u)});var a,u,l,h,f,v,M,S,E,T,A,C,k,R,O,P,D,L,N,I,F,z,U,j,V,B,H,G;if(m(e))return function t(e,n,o,a){var s=e.layer,u=e.encoding,c=e.projection,l=i(e,["layer","encoding","projection"]),h=x({parentEncoding:o,encoding:u}),f=b({parentProjection:a,projection:c});return r({},l,{layer:s.map(function(e){return m(e)?t(e,n,h,f):_(e,n,h,f)})})}(e,n);if(g(e))return v=n,M=(f=e).spec,S=i(f,["spec"]),r({},S,{spec:t(M,v)});if(y(e))return T=n,A=(E=e).vconcat,C=i(E,["vconcat"]),r({},C,{vconcat:A.map(function(e){return t(e,T)})});if(w(e))return R=n,O=(k=e).hconcat,P=i(k,["hconcat"]),r({},P,{hconcat:O.map(function(e){return t(e,R)})});if(p(e)){var q=s.channelHasField(e.encoding,o.ROW),W=s.channelHasField(e.encoding,o.COLUMN);return q||W?(L=n,I=(N=(D=e).encoding).row,F=N.column,z=i(N,["row","column"]),U=D.mark,j=D.width,V=D.projection,B=D.height,H=D.selection,G=i(D,["mark","width","projection","height","selection","encoding"]),r({},G,{facet:r({},I?{row:I}:{},F?{column:F}:{}),spec:_(r({},V?{projection:V}:{},{mark:U},j?{width:j}:{},B?{height:B}:{},{encoding:z},H?{selection:H}:{}),L)})):_(e,n)}throw new Error(c.message.INVALID_SPEC)},n.fieldDefs=function(t){return f.vals(function t(e,n){return void 0===n&&(n={}),m(e)?e.layer.forEach(function(e){p(e)?M(n,u.fieldDefs(e.encoding)):t(e,n)}):d(e)?(M(n,u.fieldDefs(e.facet)),t(e.spec,n)):g(e)?t(e.spec,n):v(e)?(y(e)?e.vconcat:e.hconcat).forEach(function(e){return t(e,n)}):M(n,u.fieldDefs(e.encoding)),n}(t))},n.isStacked=function(t,e){return e=e||t.config,!!l.isPrimitiveMark(t.mark)&&null!==h.stack(t.mark,t.encoding,e?e.stack:void 0)}},{"./channel":11,"./compositemark":15,"./encoding":17,"./log":19,"./mark":21,"./stack":24,"./util":27}],24:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("vega-util"),i=t("./aggregate"),o=t("./channel"),a=t("./encoding"),s=t("./fielddef"),u=t("./log"),c=t("./mark"),l=t("./scale"),h=t("./util"),f={zero:1,center:1,normalize:1};function d(t){return!!f[t]}n.isStackOffset=d,n.STACKABLE_MARKS=[c.BAR,c.AREA,c.RULE,c.POINT,c.CIRCLE,c.SQUARE,c.LINE,c.TEXT,c.TICK],n.STACK_BY_DEFAULT_MARKS=[c.BAR,c.AREA],n.stack=function(t,e,f){var p=c.isMarkDef(t)?t.type:t;if(!h.contains(n.STACKABLE_MARKS,p))return null;var m=function(t){var e=t.x,n=t.y;if(s.isFieldDef(e)&&s.isFieldDef(n))if("quantitative"===e.type&&"quantitative"===n.type){if(e.stack)return"x";if(n.stack)return"y";if(!!e.aggregate!=!!n.aggregate)return e.aggregate?"x":"y"}else{if("quantitative"===e.type)return"x";if("quantitative"===n.type)return"y"}else{if(s.isFieldDef(e)&&"quantitative"===e.type)return"x";if(s.isFieldDef(n)&&"quantitative"===n.type)return"y"}}(e);if(!m)return null;var g,v=e[m],y=s.isStringFieldDef(v)?s.vgField(v,{}):void 0,w="x"===m?"y":"x",x=e[w],b=s.isStringFieldDef(x)?s.vgField(x,{}):void 0,_=o.NONPOSITION_CHANNELS.reduce(function(t,n){if(a.channelHasField(e,n)){var i=e[n];(r.isArray(i)?i:[i]).forEach(function(e){var r=s.getFieldDef(e);if(!r.aggregate){var i=s.isStringFieldDef(r)?s.vgField(r,{}):void 0;(!i||i!==b&&i!==y)&&t.push({channel:n,fieldDef:r})}})}return t},[]);return 0===_.length?null:(g=void 0!==v.stack?v.stack:h.contains(n.STACK_BY_DEFAULT_MARKS,p)&&void 0===f?"zero":f)&&d(g)?v.scale&&v.scale.type&&v.scale.type!==l.ScaleType.LINEAR?(u.warn(u.message.cannotStackNonLinearScale(v.scale.type)),null):a.channelHasField(e,m===o.X?o.X2:o.Y2)?(u.warn(u.message.cannotStackRangedMark(m)),null):(v.aggregate&&!h.contains(i.SUM_OPS,v.aggregate)&&u.warn(u.message.stackNonSummativeAggregate(v.aggregate)),{groupbyChannel:x?w:void 0,fieldChannel:m,impute:h.contains(["area","line"],p),stackBy:_,offset:g}):null}},{"./aggregate":9,"./channel":11,"./encoding":17,"./fielddef":18,"./log":19,"./mark":21,"./scale":22,"./util":27,"vega-util":28}],25:[function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};Object.defineProperty(n,"__esModule",{value:!0});var i,o,a=t("./datetime"),s=t("./log"),u=t("./util");(o=i=n.TimeUnit||(n.TimeUnit={})).YEAR="year",o.MONTH="month",o.DAY="day",o.DATE="date",o.HOURS="hours",o.MINUTES="minutes",o.SECONDS="seconds",o.MILLISECONDS="milliseconds",o.YEARMONTH="yearmonth",o.YEARMONTHDATE="yearmonthdate",o.YEARMONTHDATEHOURS="yearmonthdatehours",o.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",o.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",o.MONTHDATE="monthdate",o.HOURSMINUTES="hoursminutes",o.HOURSMINUTESSECONDS="hoursminutesseconds",o.MINUTESSECONDS="minutesseconds",o.SECONDSMILLISECONDS="secondsmilliseconds",o.QUARTER="quarter",o.YEARQUARTER="yearquarter",o.QUARTERMONTH="quartermonth",o.YEARQUARTERMONTH="yearquartermonth",o.UTCYEAR="utcyear",o.UTCMONTH="utcmonth",o.UTCDAY="utcday",o.UTCDATE="utcdate",o.UTCHOURS="utchours",o.UTCMINUTES="utcminutes",o.UTCSECONDS="utcseconds",o.UTCMILLISECONDS="utcmilliseconds",o.UTCYEARMONTH="utcyearmonth",o.UTCYEARMONTHDATE="utcyearmonthdate",o.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",o.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",o.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",o.UTCMONTHDATE="utcmonthdate",o.UTCHOURSMINUTES="utchoursminutes",o.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",o.UTCMINUTESSECONDS="utcminutesseconds",o.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",o.UTCQUARTER="utcquarter",o.UTCYEARQUARTER="utcyearquarter",o.UTCQUARTERMONTH="utcquartermonth",o.UTCYEARQUARTERMONTH="utcyearquartermonth";var c={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};n.TIMEUNIT_PARTS=u.flagKeys(c),n.isLocalSingleTimeUnit=function(t){return!!c[t]};var l={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};n.isUtcSingleTimeUnit=function(t){return!!l[t]};var h={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},f=r({},l,h);function d(t){return!!f[t]}n.isUTCTimeUnit=d,n.getLocalTimeUnit=function(t){return t.substr(3)};var p=r({},c,l,{yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1},h);n.TIMEUNITS=u.flagKeys(p),n.isTimeUnit=function(t){return!!p[t]};var m={year:"setFullYear",month:"setMonth",date:"setDate",hours:"setHours",minutes:"setMinutes",seconds:"setSeconds",milliseconds:"setMilliseconds",quarter:null,day:null};function g(t,e){var n=m[t];return{setDateMethod:e?"setUTC"+n.substr(3):n,getDateMethod:"get"+(e?"UTC":"")+n.substr(3)}}function v(t,e){var n=t.indexOf(e);return-1<n&&(e!==i.SECONDS||0===n||"i"!==t.charAt(n-1))}n.convert=function(t,e){for(var r=d(t),o=r?new Date(Date.UTC(0,0,1,0,0,0,0)):new Date(0,0,1,0,0,0,0),a=0,s=n.TIMEUNIT_PARTS;a<s.length;a++){var u=s[a];if(v(t,u))switch(u){case i.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case i.QUARTER:var c=g("month",r);o[c.setDateMethod](3*Math.floor(e[c.getDateMethod]()/3));break;default:var l=g(u,r);o[l.setDateMethod](e[l.getDateMethod]())}}return o},n.getTimeUnitParts=function(t){return n.TIMEUNIT_PARTS.reduce(function(e,n){return v(t,n)?e.concat(n):e},[])},n.containsTimeUnit=v,n.fieldExpr=function(t,e){var r="datum"+u.accessPath(e),o=d(t)?"utc":"",s=n.TIMEUNIT_PARTS.reduce(function(e,n){var a;return v(t,n)&&(e[n]=(a=n)===i.QUARTER?"("+o+"quarter("+r+")-1)":""+o+a+"("+r+")"),e},{});return a.dateTimeExpr(s)},n.formatExpression=function(t,e,n,r){if(t){var o=[],a="",s=v(t,i.YEAR);v(t,i.QUARTER)&&(a="'Q' + quarter("+e+")"),v(t,i.MONTH)&&o.push(!1!==n?"%b":"%B"),v(t,i.DAY)?o.push(n?"%a":"%A"):v(t,i.DATE)&&o.push("%d"+(s?",":"")),s&&o.push(n?"%y":"%Y");var u=[];v(t,i.HOURS)&&u.push("%H"),v(t,i.MINUTES)&&u.push("%M"),v(t,i.SECONDS)&&u.push("%S"),v(t,i.MILLISECONDS)&&u.push("%L");var c=[];return 0<o.length&&c.push(o.join(" ")),0<u.length&&c.push(u.join(":")),0<c.length&&(a&&(a+=" + ' ' + "),a+=r?"utcFormat("+e+", '"+c.join(" ")+"')":"timeFormat("+e+", '"+c.join(" ")+"')"),a||void 0}},n.normalizeTimeUnit=function(t){return"day"!==t&&0<=t.indexOf("day")?(s.warn(s.message.dayReplacedWithDate(t)),t.replace("day","date")):t}},{"./datetime":16,"./log":19,"./util":27}],26:[function(t,e,n){"use strict";var r,i;Object.defineProperty(n,"__esModule",{value:!0}),(i=r=n.Type||(n.Type={})).QUANTITATIVE="quantitative",i.ORDINAL="ordinal",i.TEMPORAL="temporal",i.NOMINAL="nominal",i.LATITUDE="latitude",i.LONGITUDE="longitude",i.GEOJSON="geojson";var o={quantitative:1,ordinal:1,temporal:1,nominal:1,latitude:1,longitude:1,geojson:1};n.isType=function(t){return!!o[t]},n.QUANTITATIVE=r.QUANTITATIVE,n.ORDINAL=r.ORDINAL,n.TEMPORAL=r.TEMPORAL,n.NOMINAL=r.NOMINAL,n.GEOJSON=r.GEOJSON,n.getFullName=function(t){if(t)switch(t=t.toLowerCase()){case"q":case n.QUANTITATIVE:return"quantitative";case"t":case n.TEMPORAL:return"temporal";case"o":case n.ORDINAL:return"ordinal";case"n":case n.NOMINAL:return"nominal";case r.LATITUDE:return"latitude";case r.LONGITUDE:return"longitude";case n.GEOJSON:return"geojson"}}},{}],27:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("json-stable-stringify"),i=t("vega-util"),o=t("./logical");function a(t,e){return-1<t.indexOf(e)}function s(t,e){return t.filter(function(t){return!a(e,t)})}function u(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=c(t,i[r]);return t}function c(t,e){if("object"!=typeof e||null===e)return t;for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&("object"!=typeof e[n]||i.isArray(e[n])||null===e[n]?t[n]=e[n]:"object"!=typeof t[n]||null===t[n]?t[n]=u(i.isArray(e[n].constructor)?[]:{},e[n]):u(t[n],e[n]));return t}function l(t){return JSON.parse(JSON.stringify(t))}n.pick=function(t,e){for(var n={},r=0,i=e;r<i.length;r++){var o=i[r];t.hasOwnProperty(o)&&(n[o]=t[o])}return n},n.omit=function(t,e){for(var n=l(t),r=0,i=e;r<i.length;r++)delete n[i[r]];return n},n.stringify=r,n.hash=function(t){if(i.isNumber(t))return t;var e=i.isString(t)?t:r(t);if(e.length<100)return e;for(var n=0,o=0;o<e.length;o++)n=(n<<5)-n+e.charCodeAt(o),n&=n;return n},n.contains=a,n.without=s,n.union=function(t,e){return t.concat(s(e,t))},n.some=function(t,e){for(var n=0,r=0;r<t.length;r++)if(e(t[r],r,n++))return!0;return!1},n.every=function(t,e){for(var n=0,r=0;r<t.length;r++)if(!e(t[r],r,n++))return!1;return!0},n.flatten=function(t){return[].concat.apply([],t)},n.mergeDeep=u,n.unique=function(t,e){for(var n,r=[],i={},o=0,a=t;o<a.length;o++){var s=a[o];(n=e(s))in i||(i[n]=1,r.push(s))}return r},n.differ=function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e[n]&&t[n]&&e[n]!==t[n])return!0;return!1},n.hasIntersection=function(t,e){for(var n in t)if(n in e)return!0;return!1},n.isNumeric=function(t){return!isNaN(t)},n.differArray=function(t,e){if(t.length!==e.length)return!0;t.sort(),e.sort();for(var n=0;n<t.length;n++)if(e[n]!==t[n])return!0;return!1},n.keys=Object.keys,n.vals=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e},n.flagKeys=function(t){return n.keys(t)},n.duplicate=l,n.isBoolean=function(t){return!0===t||!1===t},n.varName=function(t){var e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e},n.logicalExpr=function t(e,n){return o.isLogicalNot(e)?"!("+t(e.not,n)+")":o.isLogicalAnd(e)?"("+e.and.map(function(e){return t(e,n)}).join(") && (")+")":o.isLogicalOr(e)?"("+e.or.map(function(e){return t(e,n)}).join(") || (")+")":n(e)},n.deleteNestedProperty=function(t,e){for(var r=!0;0<e.length&&r;){for(var i=t,o=0;o<e.length-1;o++)i=i[e[o]];delete i[e.pop()],0!==n.keys(i).length&&(r=!1)}},n.titlecase=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},n.accessPath=function(t){return"["+i.splitAccessPath(t).map(i.stringValue).join("][")+"]"}},{"./logical":20,"json-stable-stringify":5,"vega-util":28}],28:[function(t,e,n){var r;r=this,function(t){"use strict";var e=function(t,e,n){return t.fields=e||[],t.fname=n,t};function n(t){return null==t?null:t.fields}var r=function(t){throw Error(t)},i=function(t){var e,n,i,o=[],a=null,s=0,u=t.length,c="";function l(){o.push(c+t.substring(e,n)),c="",e=n+1}for(t+="",e=n=0;n<u;++n)if("\\"===(i=t[n]))c+=t.substring(e,n),e=++n;else if(i===a)l(),a=null,s=-1;else{if(a)continue;e===s&&'"'===i?(e=n+1,a=i):e===s&&"'"===i?(e=n+1,a=i):"."!==i||s?"["===i?(e<n&&l(),s=e=n+1):"]"===i&&(s||r("Access path missing open bracket: "+t),0<s&&l(),s=0,e=n+1):e<n?l():e=n+1}return s&&r("Access path missing closing bracket: "+t),a&&r("Access path missing closing quote: "+t),e<n&&(n++,l()),o},o=Array.isArray,a=function(t){return t===Object(t)},s=function(t){return"string"==typeof t};function u(t){return o(t)?"["+t.map(u)+"]":a(t)||s(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var c=function(t,n){var r=i(t),o="return _["+r.map(u).join("][")+"];";return e(Function("_",o),[t=1===r.length?r[0]:t],n||t)},l=[],h=c("id"),f=e(function(t){return t},l,"identity"),d=e(function(){return 0},l,"zero"),p=e(function(){return 1},l,"one"),m=e(function(){return!0},l,"true"),g=e(function(){return!1},l,"false");function v(t,e,n){var r=[e].concat([].slice.call(n));console[t].apply(console,r)}var y=function(t){return t[t.length-1]},w=function(t){return null==t||""===t?null:+t};function x(t){return function(e){return t*Math.exp(e)}}function b(t){return function(e){return Math.log(t*e)}}function _(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function M(t,e,n,r){var i=n(t[0]),o=n(y(t)),a=(o-i)*e;return[r(i-a),r(o-a)]}function S(t,e,n,r,i){var o=r(t[0]),a=r(y(t)),s=null!=e?r(e):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}var E=function(t){return null!=t?o(t)?t:[t]:[]},T=function(t){return"function"==typeof t},A={},C=function(t){return"[object Date]"===Object.prototype.toString.call(t)},k=function(t){return"number"==typeof t},R=function(t,e){for(var n="";0<=--e;)n+=t;return n};function O(t){return k(t)?t:C(t)?t:Date.parse(t)}t.accessor=e,t.accessorName=function(t){return null==t?null:t.fname},t.accessorFields=n,t.id=h,t.identity=f,t.zero=d,t.one=p,t.truthy=m,t.falsy=g,t.logger=function(t){var e=t||0;return{level:function(t){return arguments.length?(e=+t,this):e},error:function(){return 1<=e&&v("error","ERROR",arguments),this},warn:function(){return 2<=e&&v("warn","WARN",arguments),this},info:function(){return 3<=e&&v("log","INFO",arguments),this},debug:function(){return 4<=e&&v("log","DEBUG",arguments),this}}},t.None=0,t.Error=1,t.Warn=2,t.Info=3,t.Debug=4,t.panLinear=function(t,e){return M(t,e,w,f)},t.panLog=function(t,e){var n=Math.sign(t[0]);return M(t,e,b(n),x(n))},t.panPow=function(t,e,n){return M(t,e,_(n),_(1/n))},t.zoomLinear=function(t,e,n){return S(t,e,n,w,f)},t.zoomLog=function(t,e,n){var r=Math.sign(t[0]);return S(t,e,n,b(r),x(r))},t.zoomPow=function(t,e,n,r){return S(t,e,n,_(r),_(1/r))},t.array=E,t.compare=function(t,r){var o,a,s,c,l,h,f,d,p,m=[],g=(t=E(t)).map(function(t,e){return null==t?null:(m.push(e),T(t)?t:i(t).map(u).join("]["))}),v=m.length-1,y=E(r),w="var u,v;return ";if(v<0)return null;for(a=0;a<=v;++a)s=g[o=m[a]],T(s)?(c="(u=this."+(h="f"+o)+"(a))",l="(v=this."+h+"(b))",(f=f||{})[h]=s):(c="(u=a["+s+"])",l="(v=b["+s+"])"),h="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==y[o]?d=-(p=1):(p=-1,d=1),w+="("+c+"<"+l+"||u==null)&&v!=null?"+d+":(u>v||v==null)&&u!=null?"+p+":"+h+"!==u&&v===v?"+d+":v!==v&&u===u?"+p+(o<v?":":":0");return s=Function("a","b",w+";"),f&&(s=s.bind(f)),t=t.reduce(function(t,e){return T(e)?(n(e)||[]).forEach(function(e){t[e]=1}):null!=e&&(t[e+""]=1),t},{}),e(s,Object.keys(t))},t.constant=function(t){return T(t)?t:function(){return t}},t.debounce=function(t,e){var n,r;function i(){e(r),n=r=null}return function(e){r=e,n&&clearTimeout(n),n=setTimeout(i,t)}},t.error=r,t.extend=function(t){for(var e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r])t[n]=e[n];return t},t.extentIndex=function(t,e){var n,r,i,o,a,s=-1,u=t.length;if(null==e){for(;++s<u;)if(null!=(r=t[s])&&r<=r){n=i=r;break}for(o=a=s;++s<u;)null!=(r=t[s])&&(r<n&&(n=r,o=s),i<r&&(i=r,a=s))}else{for(;++s<u;)if(null!=(r=e(t[s],s,t))&&r<=r){n=i=r;break}for(o=a=s;++s<u;)null!=(r=e(t[s],s,t))&&(r<n&&(n=r,o=s),i<r&&(i=r,a=s))}return[o,a]},t.fastmap=function(t){var e,n,r={};function i(t){return r.hasOwnProperty(t)&&r[t]!==A}return e={size:0,empty:0,object:r,has:i,get:function(t){return i(t)?r[t]:void 0},set:function(t,n){return i(t)||(++e.size,r[t]===A&&--e.empty),r[t]=n,this},delete:function(t){return i(t)&&(--e.size,++e.empty,r[t]=A),this},clear:function(){e.size=e.empty=0,e.object=r={}},test:function(t){return arguments.length?(n=t,e):n},clean:function(){var t,i,o={},a=0;for(t in r)(i=r[t])===A||n&&n(i)||(o[t]=i,++a);e.size=a,e.empty=0,e.object=r=o}},t&&Object.keys(t).forEach(function(n){e.set(n,t[n])}),e},t.field=c,t.inherits=function(t,e){var n=t.prototype=Object.create(e.prototype);return n.constructor=t,n},t.isArray=o,t.isBoolean=function(t){return"boolean"==typeof t},t.isDate=C,t.isFunction=T,t.isNumber=k,t.isObject=a,t.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},t.isString=s,t.key=function(t,n){t&&(t=n?E(t).map(function(t){return t.replace(/\\(.)/g,"$1")}):E(t));var r=t&&t.length?Function("_","return ''+"+t.map(function(t){return"_["+(n?u(t):i(t).map(u).join("]["))+"]"}).join("+'|'+")+";"):function(){return""};return e(r,t,"key")},t.merge=function(t,e,n,r){var i=e.length,o=n.length;if(!o)return e;if(!i)return n;for(var a=r||new e.constructor(i+o),s=0,u=0,c=0;s<i&&u<o;++c)a[c]=0<t(e[s],n[u])?n[u++]:e[s++];for(;s<i;++s,++c)a[c]=e[s];for(;u<o;++u,++c)a[c]=n[u];return a},t.pad=function(t,e,n,r){var i=n||" ",o=t+"",a=e-o.length;return a<=0?o:"left"===r?R(i,a)+o:"center"===r?R(i,~~(a/2))+o+R(i,Math.ceil(a/2)):o+R(i,a)},t.peek=y,t.repeat=R,t.splitAccessPath=i,t.stringValue=u,t.toBoolean=function(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t||!t)},t.toDate=function(t,e){return e=e||O,null==t||""===t?null:e(t)},t.toNumber=w,t.toString=function(t){return null==t||""===t?null:t+""},t.toSet=function(t){for(var e={},n=0,r=t.length;n<r;++n)e[t[n]]=!0;return e},t.truncate=function(t,e,n,r){var i=null!=r?r:"\u2026",o=t+"",a=o.length,s=Math.max(0,e-i.length);return a<=e?o:"left"===n?i+o.slice(a-s):"center"===n?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i},t.visitArray=function(t,e,n){if(t){var r,i=0,o=t.length;if(e)for(;i<o;++i)(r=e(t[i]))&&n(r,i,t);else t.forEach(n)}},Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&void 0!==e?n:r.vega=r.vega||{})},{}],29:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("d3-format"),i=t("d3-time"),o=t("d3-time-format"),a=t("vega-util");function s(t){return t%1==0?r.format(",")(t):r.format(",.2f")(t)}function u(t){var e=o.timeFormat(".%L"),n=o.timeFormat(":%S"),r=o.timeFormat("%I:%M"),a=o.timeFormat("%I %p"),s=o.timeFormat("%a %d"),u=o.timeFormat("%b %d"),c=o.timeFormat("%B"),l=o.timeFormat("%Y");return(i.timeSecond(t)<t?e:i.timeMinute(t)<t?n:i.timeHour(t)<t?r:i.timeDay(t)<t?a:i.timeMonth(t)<t?i.timeWeek(t)<t?s:u:i.timeYear(t)<t?c:l)(t)}n.customFormat=function(t,e,n){if(null!=t&&(e||n)){if(a.isString(n))switch(e){case"time":return n?o.timeFormat(n)(t):u(t);case"number":return n?r.format(n)(t):s(t);case"string":default:return t}return a.isFunction(n)?n(t):void 0}},n.autoFormat=function(t){return a.isNumber(t)?s(t):a.isDate(t)?u(t):t},n.autoNumberFormat=s,n.autoTimeFormat=u},{"d3-format":1,"d3-time":4,"d3-time-format":3,"vega-util":28}],30:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("d3-selection"),i=t("./options"),o=t("./parseOption"),a=t("./supplementField"),s=t("./tooltipDisplay"),u=void 0,c=!1;function l(t,e){t.addEventListener("mouseover.tooltipInit",function(t,n){f(n)&&(h(),u=window.setTimeout(function(){!function(t,e,n){var i=s.getTooltipPlaceholder(),a=o.getTooltipData(e,n);a&&0!==a.length&&(s.bindData(i,a),s.updatePosition(t,n),s.updateColorTheme(n),r.select("#vis-tooltip").style("visibility","visible"),c=!0,n.onAppear&&n.onAppear(t,e))}(t,n,e)},e.delay||i.DELAY))}),t.addEventListener("mousemove.tooltipUpdate",function(t,n){f(n)&&c&&function(t,e,n){f(e)&&(s.updatePosition(t,n),n.onMove&&n.onMove(t,e))}(t,n,e)}),t.addEventListener("mouseout.tooltipRemove",function(t,n){f(n)&&(h(),c&&function(t,e,n){f(e)&&(r.select("#vis-tooltip").style("visibility","hidden"),c=!1,s.clearData(),s.clearColorTheme(),s.clearPosition(),n.onDisappear&&n.onDisappear(t,e))}(t,n,e))})}function h(){window.clearTimeout(u),u=void 0}function f(t){return!(!t||!t.datum||t.datum._facetID)}function d(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}n.vega=function(t,e){return void 0===e&&(e={showAllFields:!0,isComposition:!1}),l(t,d(e)),{destroy:function(){t.removeEventListener("mouseover.tooltipInit"),t.removeEventListener("mousemove.tooltipUpdate"),t.removeEventListener("mouseout.tooltipRemove"),h()}}},n.vegaLite=function(t,e,n){return void 0===n&&(n={showAllFields:!0,isComposition:!1}),n=a.supplementOptions(d(n),e),l(t,d(n)),{destroy:function(){t.removeEventListener("mouseover.tooltipInit"),t.removeEventListener("mousemove.tooltipUpdate"),t.removeEventListener("mouseout.tooltipRemove"),h()}}}},{"./options":31,"./parseOption":32,"./supplementField":33,"./tooltipDisplay":34,"d3-selection":2}],31:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DELAY=100},{}],32:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("vega-util"),i=t("./formatFieldValue");function o(t,e){void 0===e&&(e={});var n=[];return e.fields.forEach(function(o){var s=r.isString(o.title)?o.title:void 0,u=r.isFunction(o.title)?o.title:void 0,c=u&&u(t)||s||o.field,l=o.valueAccessor&&o.valueAccessor(t)||a(t,o.field,e.isComposition);if(void 0!==l){var h=i.customFormat(l,o.formatType,o.format)||i.autoFormat(l);n.push({title:c,value:h,rawValue:l,render:o.render})}}),n}function a(t,e,n){var r,i=e.split("."),o=i[0];return i.shift(),t[o]&&(r=t[o],i.forEach(function(t){(r=r)[t]&&(r=r[t])})),void 0===r?void(n||console.warn("[Tooltip] Cannot find field "+e+" in data.")):r}function s(t,e){void 0===e&&(e={});var n=[],r={};if(e&&e.fields)for(var o=0,a=e.fields;o<a.length;o++){var s=a[o];r[s.field]=s}for(var u in t)if(t.hasOwnProperty(u)){var c,l=t[u];c=r[u]&&r[u].title?r[u].title:u;var h=void 0,f=void 0;r[u]&&(h=r[u].formatType,f=r[u].format);var d=i.customFormat(l,h,f)||i.autoFormat(l);n.push({title:c,value:d,rawValue:l})}return n}function u(t,e){e.forEach(function(e){delete t[e]})}function c(t,e){e&&e.forEach(function(e){e.removeOriginalTemporalField&&u(t,[e.removeOriginalTemporalField])})}function l(t,e){if(e)return e.forEach(function(e){if(!0===e.bin){var n=e.field,r=n,i=n.concat("_mid"),o=n.concat("_end"),a=t[r],s=t[o];void 0!==a&&void 0!==s&&(t[n]=a+"-"+s),u(t,[i,o])}}),t}function h(t,e){if("line"===t||"area"===t){var n=[];for(var i in e)e.hasOwnProperty(i)&&r.isDate(e[i])&&n.push(i);u(e,n)}}n.getTooltipData=function(t,e){if("group"!==t.mark.marktype){var n,i,a={};for(var f in t.datum)t.datum.hasOwnProperty(f)&&(a[f]=t.datum[f]);if(u(a,["width","height","count_start","count_end","layout_start","layout_mid","layout_end","layout_path","layout_x","layout_y"]),c(a,e.fields),l(a,e.fields),h(t.mark.marktype,a),n=!0===e.showAllFields?s(a,e):o(a,e),e.sort){var d="title"===e.sort?"title":"value"===e.sort?"rawValue":null,p=d?(i=d,function(t,e){return r.isNumber(t[i])&&r.isNumber(e[i])?e[i]-t[i]:r.isString(t[i])&&r.isString(e[i])?t[i].localeCompare(e[i]):r.isDate(t[i])&&r.isDate(e[i])?t[i]-e[i]:r.isDate(t[i])?-1:r.isDate(e[i])?1:r.isNumber(t[i])?-1:(r.isNumber(e[i]),1)}):r.isFunction(e.sort)&&e.sort;p&&(n=n.sort(p))}return n}},n.prepareCustomFieldsData=o,n.getValue=a,n.prepareAllFieldsData=s,n.removeFields=u,n.removeDuplicateTimeFields=c,n.combineBinFields=l,n.dropFieldsForLineArea=h},{"./formatFieldValue":29,"vega-util":28}],33:[function(t,e,n){(function(e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="undefined"!=typeof window?window.vl:void 0!==e?e.vl:null,i=t("vega-lite/build/src/spec"),o=t("vega-lite/build/src/type"),a={quantitative:"number",temporal:"time",ordinal:void 0,nominal:void 0};function s(t,e){if(e&&t&&!(t.length<=0))if(e.aggregate){for(var n=0,r=t;n<r.length;n++)if((u=r[n]).field===e.field&&u.aggregate===e.aggregate)return u;for(var i=0,o=t;i<o.length;i++)if((u=o[i]).field===e.field&&!u.aggregate)return u}else for(var a=0,s=t;a<s.length;a++){var u;if((u=s[a]).field===e.field)return u}}function u(t,e){if(e&&e.field&&t)for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i.field===e.field){if(!i.aggregate)return i;if(i.aggregate===e.aggregate||!e.aggregate)return i}}}function c(t,e,n,i){if(void 0===n&&(n={}),t||e){!t&&e&&(t={}),t&&!e&&(e={});var s={};if(e.bin&&(e.bin=r.fieldDef.normalizeBin(e.bin,void 0)),s.field=r.fieldDef.vgField(e)||t.field,e.type===o.TEMPORAL&&e.timeUnit){var u=e.field;s.removeOriginalTemporalField=u;for(var c=0,l=r.spec.fieldDefs(i);c<l.length;c++){var h=l[c];if(h.field===u&&!h.timeUnit){s.removeOriginalTemporalField=void 0;break}}}n.countTitle||(n.countTitle=r.config.defaultConfig.countTitle);var f=r.fieldDef.title(e,n);if("axis"in e&&e.axis&&e.axis.title&&(f=e.axis.title),"legend"in e&&e.legend&&e.legend.title&&(f=e.legend.title),s.title=t.title||f,s.formatType=t.formatType||a[e.type],t.format)s.format=t.format;else switch(s.formatType){case"time":s.format=e.timeUnit?r.timeUnit.formatExpression(e.timeUnit,"",!1,!1).split("'")[1]:n.timeFormat||r.config.defaultConfig.timeFormat;break;case"number":s.format=n.numberFormat}return e.bin&&(s.field=s.field.replace("_start","_range"),s.bin=!0,s.formatType="string"),s}console.error("[Tooltip] Cannot supplement a field when field and fieldDef are both empty.")}n.supplementOptions=function(t,e){var n,o=[],a=i.normalize(e,{});return!1!==t.showAllFields?r.spec.fieldDefs(e).forEach(function(n){var r=c(s(t.fields,n),n,e.config,a);o.push(r)}):t.fields&&t.fields.forEach(function(t){var n=c(t,u(r.spec.fieldDefs(e),t),e.config,a);o.push(n)}),(i.isConcatSpec(n=e)||i.isFacetSpec(n)||i.isLayerSpec(n)||i.isRepeatSpec(n))&&(t.isComposition=!0),t.fields=o,t},n.getFieldOption=s,n.getFieldDef=u,n.supplementFieldOption=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"vega-lite/build/src/spec":23,"vega-lite/build/src/type":26}],34:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("d3-selection");function i(){r.select("#vis-tooltip").classed("dark-theme light-theme",!1)}n.getTooltipPlaceholder=function(){return r.select("#vis-tooltip").empty()?r.select("body").append("div").attr("id","vis-tooltip").attr("class","vg-tooltip"):r.select("#vis-tooltip")},n.bindData=function(t,e){t.selectAll("table").remove();var n=t.append("table").selectAll(".tooltip-row").data(e);n.exit().remove(),n.enter().append("tr").attr("class","tooltip-row").each(function(t){var e=r.select(this);t.render?e.append("td").attr("colspan","2").append(function(){return t.render(t.title,t.value)}):(e.append("td").attr("class","key").text(function(t){return t.title+":"}),e.append("td").attr("class","value").text(function(t){return t.value}))})},n.clearData=function(){r.select("#vis-tooltip").selectAll(".tooltip-row").data([]).exit().remove()},n.updatePosition=function(t,e){var n=10,i=10;e&&e.offset&&void 0!==e.offset.x&&null!==e.offset.x&&(n=e.offset.x),e&&e.offset&&void 0!==e.offset.y&&null!==e.offset.y&&(i=e.offset.y),r.select("#vis-tooltip").style("top",function(){var e=this.getBoundingClientRect().height;return t.clientY+e+i<window.innerHeight?t.clientY+i+"px":t.clientY-e-i+"px"}).style("left",function(){var e=this.getBoundingClientRect().width;return t.clientX+e+n<window.innerWidth?t.clientX+n+"px":t.clientX-e-n+"px"})},n.clearPosition=function(){r.select("#vis-tooltip").style("top","-9999px").style("left","-9999px")},n.updateColorTheme=function(t){i(),t&&"dark"===t.colorTheme?r.select("#vis-tooltip").classed("dark-theme",!0):r.select("#vis-tooltip").classed("light-theme",!0)},n.clearColorTheme=i},{"d3-selection":2}]},{},[30])(30)}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ML=e():t.ML=e()}(this,function(){var e=Number.MAX_VALUE,t=Number.MIN_VALUE,n=Math.tanh,o=Math.exp,s=Math.ceil,r=Math.log,c=Math.pow,u=Math.abs,a=Number.EPSILON,M=Math.max,v=Math.min,g=Math.floor,m=Number.isInteger,R=Math.sqrt;return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=103)}([function(t){"use strict";function e(t,e){for(var n=0,r=0;r<t.length;r++)n+=(t[r]-e[r])*(t[r]-e[r]);return n}function n(t,n){return R(e(t,n))}t.exports=n,n.squared=e},function(t,e,n){"use strict";t.exports=e=n(105),e.getEquallySpacedData=n(107).getEquallySpacedData,e.SNV=n(108).SNV},function(t,e,n){"use strict";e.array=n(52),e.matrix=n(106)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(125);Object.defineProperty(e,"maybeToPrecision",{enumerable:!0,get:function(){return r(i).default}});var o=n(126);Object.defineProperty(e,"checkArrayLength",{enumerable:!0,get:function(){return r(o).default}});class a{constructor(){if(new.target===a)throw new Error("BaseRegression must be subclassed")}predict(t){if("number"==typeof t)return this._predict(t);if(Array.isArray(t)){for(var e=Array(t.length),n=0;n<t.length;n++)e[n]=this._predict(t[n]);return e}throw new TypeError("x must be a number or array")}_predict(){throw new Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)throw new Error("x and y must be arrays of the same length");for(var n=t.length,r=Array(n),i=0;i<n;i++)r[i]=this._predict(t[i]);for(var o=0,a=0,s=0,u=0,c=0,l=0,h=0,f=0;f<n;f++)o+=r[f],a+=e[f],c+=r[f]*r[f],l+=e[f]*e[f],h+=r[f]*e[f],0!==e[f]&&(s+=(e[f]-r[f])*(e[f]-r[f])/e[f]),u=(e[f]-r[f])*(e[f]-r[f]);var d=(n*h-o*a)/R((n*c-o*o)*(n*l-a*a));return{r:d,r2:d*d,chi2:s,rmsd:u*u/n}}}e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(104);var r=n(32),i=r&&r.__esModule?r:{default:r},o=n(23);class a extends((0,i.default)(Array)){constructor(t,e){var n;if(1===arguments.length&&"number"==typeof t)return Array(t);if(a.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError("nColumns must be a positive integer");for(n=0;n<t;n++)this[n]=Array(e)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var r=t;if(t=r.length,"number"!=typeof(e=r[0].length)||0===e)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),n=0;n<t;n++){if(r[n].length!==e)throw new RangeError("Inconsistent array dimensions");this[n]=[].concat(r[n])}}return this.rows=t,this.columns=e,this}set(t,e,n){return this[t][e]=n,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}removeRow(t){if((0,o.checkRowIndex)(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),(0,o.checkRowIndex)(this,t,!0),e=(0,o.checkRowVector)(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if((0,o.checkColumnIndex)(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){"undefined"==typeof e&&(e=t,t=this.columns),(0,o.checkColumnIndex)(this,t,!0),e=(0,o.checkColumnVector)(this,e);for(var n=0;n<this.rows;n++)this[n].splice(t,0,e[n]);return this.columns+=1,this}}e.default=a},function(t,e,n){"use strict";n(193);var r=n(69),i=n(24);class o extends(r(Array)){constructor(t,e){var n;if(1===arguments.length&&"number"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError("nColumns must be a positive integer");for(n=0;n<t;n++)this[n]=Array(e)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var r=t;if(t=r.length,"number"!=typeof(e=r[0].length)||0===e)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),n=0;n<t;n++){if(r[n].length!==e)throw new RangeError("Inconsistent array dimensions");this[n]=[].concat(r[n])}}return this.rows=t,this.columns=e,this}set(t,e,n){return this[t][e]=n,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){"undefined"==typeof e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this[n].splice(t,0,e[n]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=r},function(t,e,n){"use strict";n(211);var r=n(73),i=n(25);class o extends(r(Array)){constructor(t,e){var n;if(1===arguments.length&&"number"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError("nColumns must be a positive integer");for(n=0;n<t;n++)this[n]=Array(e)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var r=t;if(t=r.length,"number"!=typeof(e=r[0].length)||0===e)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),n=0;n<t;n++){if(r[n].length!==e)throw new RangeError("Inconsistent array dimensions");this[n]=[].concat(r[n])}}return this.rows=t,this.columns=e,this}set(t,e,n){return this[t][e]=n,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){"undefined"==typeof e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this[n].splice(t,0,e[n]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=r},function(t,e,n){"use strict";n(228);var r=n(76),i=n(26);class o extends(r(Array)){constructor(t,e){var n;if(1===arguments.length&&"number"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError("nColumns must be a positive integer");for(n=0;n<t;n++)this[n]=Array(e)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var r=t;if(t=r.length,"number"!=typeof(e=r[0].length)||0===e)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),n=0;n<t;n++){if(r[n].length!==e)throw new RangeError("Inconsistent array dimensions");this[n]=[].concat(r[n])}}return this.rows=t,this.columns=e,this}set(t,e,n){return this[t][e]=n,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){"undefined"==typeof e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this[n].splice(t,0,e[n]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=r},function(t,e,n){"use strict";n(241);var r=n(80),i=n(27);class o extends(r(Array)){constructor(t,e){var n;if(1===arguments.length&&"number"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError("nColumns must be a positive integer");for(n=0;n<t;n++)this[n]=Array(e)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var r=t;if(t=r.length,"number"!=typeof(e=r[0].length)||0===e)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),n=0;n<t;n++){if(r[n].length!==e)throw new RangeError("Inconsistent array dimensions");this[n]=[].concat(r[n])}}return this.rows=t,this.columns=e,this}set(t,e,n){return this[t][e]=n,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){"undefined"==typeof e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this[n].splice(t,0,e[n]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=r},function(t,e,n){"use strict";n(257);var r=n(83),i=n(28);class o extends(r(Array)){constructor(t,e){var n;if(1===arguments.length&&"number"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError("nColumns must be a positive integer");for(n=0;n<t;n++)this[n]=Array(e)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var r=t;if(t=r.length,"number"!=typeof(e=r[0].length)||0===e)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),n=0;n<t;n++){if(r[n].length!==e)throw new RangeError("Inconsistent array dimensions");this[n]=[].concat(r[n])}}return this.rows=t,this.columns=e,this}set(t,e,n){return this[t][e]=n,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){"undefined"==typeof e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this[n].splice(t,0,e[n]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=r},function(t,e,n){"use strict";n(277);var r=n(88),i=n(29);class o extends(r(Array)){constructor(t,e){var n;if(1===arguments.length&&"number"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError("nColumns must be a positive integer");for(n=0;n<t;n++)this[n]=Array(e)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var r=t;if(t=r.length,"number"!=typeof(e=r[0].length)||0===e)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),n=0;n<t;n++){if(r[n].length!==e)throw new RangeError("Inconsistent array dimensions");this[n]=[].concat(r[n])}}return this.rows=t,this.columns=e,this}set(t,e,n){return this[t][e]=n,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){"undefined"==typeof e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this[n].splice(t,0,e[n]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=r},function(t,e,n){"use strict";n(291);var r=n(91),i=n(30);class o extends(r(Array)){constructor(t,e){var n;if(1===arguments.length&&"number"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError("nColumns must be a positive integer");for(n=0;n<t;n++)this[n]=Array(e)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var r=t;if(t=r.length,"number"!=typeof(e=r[0].length)||0===e)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),n=0;n<t;n++){if(r[n].length!==e)throw new RangeError("Inconsistent array dimensions");this[n]=[].concat(r[n])}}return this.rows=t,this.columns=e,this}set(t,e,n){return this[t][e]=n,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){"undefined"==typeof e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this[n].splice(t,0,e[n]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=r},function(t,e,n){"use strict";n(322);var r=n(97),i=n(31);class o extends(r(Array)){constructor(t,e){var n;if(1===arguments.length&&"number"==typeof t)return Array(t);if(o.isMatrix(t))return t.clone();if(m(t)&&0<t){if(super(t),!(m(e)&&0<e))throw new TypeError("nColumns must be a positive integer");for(n=0;n<t;n++)this[n]=Array(e)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var r=t;if(t=r.length,"number"!=typeof(e=r[0].length)||0===e)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),n=0;n<t;n++){if(r[n].length!==e)throw new RangeError("Inconsistent array dimensions");this[n]=[].concat(r[n])}}return this.rows=t,this.columns=e,this}set(t,e,n){return this[t][e]=n,this}get(t,e){return this[t][e]}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}removeRow(t){if(i.checkRowIndex(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),i.checkRowIndex(this,t,!0),e=i.checkRowVector(this,e,!0),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(i.checkColumnIndex(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){"undefined"==typeof e&&(e=t,t=this.columns),i.checkColumnIndex(this,t,!0),e=i.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this[n].splice(t,0,e[n]);return this.columns+=1,this}}e.Matrix=o,o.abstractMatrix=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(4);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return r(i).default}});var o=n(32);Object.defineProperty(e,"abstractMatrix",{enumerable:!0,get:function(){return r(o).default}});var a=n(116);Object.defineProperty(e,"solve",{enumerable:!0,get:function(){return a.solve}}),Object.defineProperty(e,"inverse",{enumerable:!0,get:function(){return a.inverse}});var s=n(51);Object.defineProperty(e,"SingularValueDecomposition",{enumerable:!0,get:function(){return r(s).default}}),Object.defineProperty(e,"SVD",{enumerable:!0,get:function(){return r(s).default}});var u=n(117);Object.defineProperty(e,"EigenvalueDecomposition",{enumerable:!0,get:function(){return r(u).default}}),Object.defineProperty(e,"EVD",{enumerable:!0,get:function(){return r(u).default}});var c=n(118);Object.defineProperty(e,"CholeskyDecomposition",{enumerable:!0,get:function(){return r(c).default}}),Object.defineProperty(e,"CHO",{enumerable:!0,get:function(){return r(c).default}});var l=n(33);Object.defineProperty(e,"LuDecomposition",{enumerable:!0,get:function(){return r(l).default}}),Object.defineProperty(e,"LU",{enumerable:!0,get:function(){return r(l).default}});var h=n(53);Object.defineProperty(e,"QrDecomposition",{enumerable:!0,get:function(){return r(h).default}}),Object.defineProperty(e,"QR",{enumerable:!0,get:function(){return r(h).default}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(32)),o=r(n(4));e.default=class extends((0,i.default)()){constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}static get[Symbol.species](){return o.default}}},function(t,e,n){"use strict";var r=n(69),i=n(5);t.exports=class extends(r()){constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}static get[Symbol.species](){return i.Matrix}}},function(t,e,n){"use strict";var r=n(73),i=n(6);t.exports=class extends(r()){constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}static get[Symbol.species](){return i.Matrix}}},function(t,e,n){"use strict";var r=n(76),i=n(7);t.exports=class extends(r()){constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}static get[Symbol.species](){return i.Matrix}}},function(t,e,n){"use strict";var r=n(80),i=n(8);t.exports=class extends(r()){constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}static get[Symbol.species](){return i.Matrix}}},function(t,e,n){"use strict";var r=n(83),i=n(9);t.exports=class extends(r()){constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}static get[Symbol.species](){return i.Matrix}}},function(t,e,n){"use strict";var r=n(88),i=n(10);t.exports=class extends(r()){constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}static get[Symbol.species](){return i.Matrix}}},function(t,e,n){"use strict";var r=n(91),i=n(11);t.exports=class extends(r()){constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}static get[Symbol.species](){return i.Matrix}}},function(t,e,n){"use strict";var r=n(97),i=n(12);t.exports=class extends(r()){constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}static get[Symbol.species](){return i.Matrix}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkRowIndex=function(t,e,n){if(0>e||e>(n?t.rows:t.rows-1))throw new RangeError("Row index out of range")},e.checkColumnIndex=function(t,e,n){if(0>e||e>(n?t.columns:t.columns-1))throw new RangeError("Column index out of range")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e},e.checkIndices=function(t,e,n){var r=e.some(e=>0>e||e>=t.rows),i=n.some(e=>0>e||e>=t.columns);if(r||i)throw new RangeError("Indices are out of range");if("object"!=typeof e||"object"!=typeof n)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(n)||(e=Array.from(n)),{row:e,column:n}},e.checkRange=function(t,e,n,r,i){if(5!==arguments.length)throw new TypeError("Invalid argument type");if(Array.from(arguments).slice(1).some(function(t){return"number"!=typeof t}))throw new TypeError("Invalid argument type");if(e>n||r>i||0>e||e>=t.rows||0>n||n>=t.rows||0>r||r>=t.columns||0>i||i>=t.columns)throw new RangeError("Submatrix indices are out of range")},e.getRange=function(t,e){for(var n=Array(e-t+1),r=0;r<n.length;r++)n[r]=t+r;return n},e.sumByRow=function(t){for(var e=i.default.zeros(t.rows,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e.set(n,0,e.get(n,0)+t.get(n,r));return e},e.sumByColumn=function(t){for(var e=i.default.zeros(1,t.columns),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e.set(0,r,e.get(0,r)+t.get(n,r));return e},e.sumAll=function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e};var r=n(4),i=r&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";var r=n(5);e.checkRowIndex=function(t,e,n){if(0>e||e>(n?t.rows:t.rows-1))throw new RangeError("Row index out of range")},e.checkColumnIndex=function(t,e,n){if(0>e||e>(n?t.columns:t.columns-1))throw new RangeError("Column index out of range")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e},e.checkIndices=function(t,e,n){var r=e.some(e=>0>e||e>=t.rows),i=n.some(e=>0>e||e>=t.columns);if(r||i)throw new RangeError("Indices are out of range");if("object"!=typeof e||"object"!=typeof n)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(n)||(e=Array.from(n)),{row:e,column:n}},e.checkRange=function(t,e,n,r,i){if(5!==arguments.length)throw new TypeError("Invalid argument type");if(Array.from(arguments).slice(1).some(function(t){return"number"!=typeof t}))throw new TypeError("Invalid argument type");if(e>n||r>i||0>e||e>=t.rows||0>n||n>=t.rows||0>r||r>=t.columns||0>i||i>=t.columns)throw new RangeError("Submatrix indices are out of range")},e.getRange=function(t,e){for(var n=Array(e-t+1),r=0;r<n.length;r++)n[r]=t+r;return n},e.sumByRow=function(t){for(var e=r.Matrix.zeros(t.rows,1),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(n,0,e.get(n,0)+t.get(n,i));return e},e.sumByColumn=function(t){for(var e=r.Matrix.zeros(1,t.columns),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(n,i));return e},e.sumAll=function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}},function(t,e,n){"use strict";var r=n(6);e.checkRowIndex=function(t,e,n){if(0>e||e>(n?t.rows:t.rows-1))throw new RangeError("Row index out of range")},e.checkColumnIndex=function(t,e,n){if(0>e||e>(n?t.columns:t.columns-1))throw new RangeError("Column index out of range")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e},e.checkIndices=function(t,e,n){var r=e.some(e=>0>e||e>=t.rows),i=n.some(e=>0>e||e>=t.columns);if(r||i)throw new RangeError("Indices are out of range");if("object"!=typeof e||"object"!=typeof n)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(n)||(e=Array.from(n)),{row:e,column:n}},e.checkRange=function(t,e,n,r,i){if(5!==arguments.length)throw new TypeError("Invalid argument type");if(Array.from(arguments).slice(1).some(function(t){return"number"!=typeof t}))throw new TypeError("Invalid argument type");if(e>n||r>i||0>e||e>=t.rows||0>n||n>=t.rows||0>r||r>=t.columns||0>i||i>=t.columns)throw new RangeError("Submatrix indices are out of range")},e.getRange=function(t,e){for(var n=Array(e-t+1),r=0;r<n.length;r++)n[r]=t+r;return n},e.sumByRow=function(t){for(var e=r.Matrix.zeros(t.rows,1),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(n,0,e.get(n,0)+t.get(n,i));return e},e.sumByColumn=function(t){for(var e=r.Matrix.zeros(1,t.columns),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(n,i));return e},e.sumAll=function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}},function(t,e,n){"use strict";var r=n(7);e.checkRowIndex=function(t,e,n){if(0>e||e>(n?t.rows:t.rows-1))throw new RangeError("Row index out of range")},e.checkColumnIndex=function(t,e,n){if(0>e||e>(n?t.columns:t.columns-1))throw new RangeError("Column index out of range")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e},e.checkIndices=function(t,e,n){var r=e.some(e=>0>e||e>=t.rows),i=n.some(e=>0>e||e>=t.columns);if(r||i)throw new RangeError("Indices are out of range");if("object"!=typeof e||"object"!=typeof n)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(n)||(e=Array.from(n)),{row:e,column:n}},e.checkRange=function(t,e,n,r,i){if(5!==arguments.length)throw new TypeError("Invalid argument type");if(Array.from(arguments).slice(1).some(function(t){return"number"!=typeof t}))throw new TypeError("Invalid argument type");if(e>n||r>i||0>e||e>=t.rows||0>n||n>=t.rows||0>r||r>=t.columns||0>i||i>=t.columns)throw new RangeError("Submatrix indices are out of range")},e.getRange=function(t,e){for(var n=Array(e-t+1),r=0;r<n.length;r++)n[r]=t+r;return n},e.sumByRow=function(t){for(var e=r.Matrix.zeros(t.rows,1),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(n,0,e.get(n,0)+t.get(n,i));return e},e.sumByColumn=function(t){for(var e=r.Matrix.zeros(1,t.columns),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(n,i));return e},e.sumAll=function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}},function(t,e,n){"use strict";var r=n(8);e.checkRowIndex=function(t,e,n){if(0>e||e>(n?t.rows:t.rows-1))throw new RangeError("Row index out of range")},e.checkColumnIndex=function(t,e,n){if(0>e||e>(n?t.columns:t.columns-1))throw new RangeError("Column index out of range")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e},e.checkIndices=function(t,e,n){var r=e.some(e=>0>e||e>=t.rows),i=n.some(e=>0>e||e>=t.columns);if(r||i)throw new RangeError("Indices are out of range");if("object"!=typeof e||"object"!=typeof n)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(n)||(e=Array.from(n)),{row:e,column:n}},e.checkRange=function(t,e,n,r,i){if(5!==arguments.length)throw new TypeError("Invalid argument type");if(Array.from(arguments).slice(1).some(function(t){return"number"!=typeof t}))throw new TypeError("Invalid argument type");if(e>n||r>i||0>e||e>=t.rows||0>n||n>=t.rows||0>r||r>=t.columns||0>i||i>=t.columns)throw new RangeError("Submatrix indices are out of range")},e.getRange=function(t,e){for(var n=Array(e-t+1),r=0;r<n.length;r++)n[r]=t+r;return n},e.sumByRow=function(t){for(var e=r.Matrix.zeros(t.rows,1),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(n,0,e.get(n,0)+t.get(n,i));return e},e.sumByColumn=function(t){for(var e=r.Matrix.zeros(1,t.columns),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(n,i));return e},e.sumAll=function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}},function(t,e,n){"use strict";var r=n(9);e.checkRowIndex=function(t,e,n){if(0>e||e>(n?t.rows:t.rows-1))throw new RangeError("Row index out of range")},e.checkColumnIndex=function(t,e,n){if(0>e||e>(n?t.columns:t.columns-1))throw new RangeError("Column index out of range")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e},e.checkIndices=function(t,e,n){var r=e.some(e=>0>e||e>=t.rows),i=n.some(e=>0>e||e>=t.columns);if(r||i)throw new RangeError("Indices are out of range");if("object"!=typeof e||"object"!=typeof n)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(n)||(e=Array.from(n)),{row:e,column:n}},e.checkRange=function(t,e,n,r,i){if(5!==arguments.length)throw new TypeError("Invalid argument type");if(Array.from(arguments).slice(1).some(function(t){return"number"!=typeof t}))throw new TypeError("Invalid argument type");if(e>n||r>i||0>e||e>=t.rows||0>n||n>=t.rows||0>r||r>=t.columns||0>i||i>=t.columns)throw new RangeError("Submatrix indices are out of range")},e.getRange=function(t,e){for(var n=Array(e-t+1),r=0;r<n.length;r++)n[r]=t+r;return n},e.sumByRow=function(t){for(var e=r.Matrix.zeros(t.rows,1),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(n,0,e.get(n,0)+t.get(n,i));return e},e.sumByColumn=function(t){for(var e=r.Matrix.zeros(1,t.columns),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(n,i));return e},e.sumAll=function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}},function(t,e,n){"use strict";var r=n(10);e.checkRowIndex=function(t,e,n){if(0>e||e>(n?t.rows:t.rows-1))throw new RangeError("Row index out of range")},e.checkColumnIndex=function(t,e,n){if(0>e||e>(n?t.columns:t.columns-1))throw new RangeError("Column index out of range")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e},e.checkIndices=function(t,e,n){var r=e.some(e=>0>e||e>=t.rows),i=n.some(e=>0>e||e>=t.columns);if(r||i)throw new RangeError("Indices are out of range");if("object"!=typeof e||"object"!=typeof n)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(n)||(e=Array.from(n)),{row:e,column:n}},e.checkRange=function(t,e,n,r,i){if(5!==arguments.length)throw new TypeError("Invalid argument type");if(Array.from(arguments).slice(1).some(function(t){return"number"!=typeof t}))throw new TypeError("Invalid argument type");if(e>n||r>i||0>e||e>=t.rows||0>n||n>=t.rows||0>r||r>=t.columns||0>i||i>=t.columns)throw new RangeError("Submatrix indices are out of range")},e.getRange=function(t,e){for(var n=Array(e-t+1),r=0;r<n.length;r++)n[r]=t+r;return n},e.sumByRow=function(t){for(var e=r.Matrix.zeros(t.rows,1),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(n,0,e.get(n,0)+t.get(n,i));return e},e.sumByColumn=function(t){for(var e=r.Matrix.zeros(1,t.columns),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(n,i));return e},e.sumAll=function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}},function(t,e,n){"use strict";var r=n(11);e.checkRowIndex=function(t,e,n){if(0>e||e>(n?t.rows:t.rows-1))throw new RangeError("Row index out of range")},e.checkColumnIndex=function(t,e,n){if(0>e||e>(n?t.columns:t.columns-1))throw new RangeError("Column index out of range")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e},e.checkIndices=function(t,e,n){var r=e.some(e=>0>e||e>=t.rows),i=n.some(e=>0>e||e>=t.columns);if(r||i)throw new RangeError("Indices are out of range");if("object"!=typeof e||"object"!=typeof n)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(n)||(e=Array.from(n)),{row:e,column:n}},e.checkRange=function(t,e,n,r,i){if(5!==arguments.length)throw new TypeError("Invalid argument type");if(Array.from(arguments).slice(1).some(function(t){return"number"!=typeof t}))throw new TypeError("Invalid argument type");if(e>n||r>i||0>e||e>=t.rows||0>n||n>=t.rows||0>r||r>=t.columns||0>i||i>=t.columns)throw new RangeError("Submatrix indices are out of range")},e.getRange=function(t,e){for(var n=Array(e-t+1),r=0;r<n.length;r++)n[r]=t+r;return n},e.sumByRow=function(t){for(var e=r.Matrix.zeros(t.rows,1),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(n,0,e.get(n,0)+t.get(n,i));return e},e.sumByColumn=function(t){for(var e=r.Matrix.zeros(1,t.columns),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(n,i));return e},e.sumAll=function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}},function(t,e,n){"use strict";var r=n(12);e.checkRowIndex=function(t,e,n){if(0>e||e>(n?t.rows:t.rows-1))throw new RangeError("Row index out of range")},e.checkColumnIndex=function(t,e,n){if(0>e||e>(n?t.columns:t.columns-1))throw new RangeError("Column index out of range")},e.checkRowVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e},e.checkColumnVector=function(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e},e.checkIndices=function(t,e,n){var r=e.some(e=>0>e||e>=t.rows),i=n.some(e=>0>e||e>=t.columns);if(r||i)throw new RangeError("Indices are out of range");if("object"!=typeof e||"object"!=typeof n)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(e)||(e=Array.from(e)),Array.isArray(n)||(e=Array.from(n)),{row:e,column:n}},e.checkRange=function(t,e,n,r,i){if(5!==arguments.length)throw new TypeError("Invalid argument type");if(Array.from(arguments).slice(1).some(function(t){return"number"!=typeof t}))throw new TypeError("Invalid argument type");if(e>n||r>i||0>e||e>=t.rows||0>n||n>=t.rows||0>r||r>=t.columns||0>i||i>=t.columns)throw new RangeError("Submatrix indices are out of range")},e.getRange=function(t,e){for(var n=Array(e-t+1),r=0;r<n.length;r++)n[r]=t+r;return n},e.sumByRow=function(t){for(var e=r.Matrix.zeros(t.rows,1),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(n,0,e.get(n,0)+t.get(n,i));return e},e.sumByColumn=function(t){for(var e=r.Matrix.zeros(1,t.columns),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e.set(0,i,e.get(0,i)+t.get(n,i));return e},e.sumAll=function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){function e(t,e){return t-e}function n(t,e){for(var n in e)t=t.replace(new RegExp("%"+n+"%","g"),e[n]);return t}void 0===t&&(t=Object);class r extends t{static get[Symbol.species](){return this}static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("Data length does not match given dimensions");for(var r=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n[i*e+o]);return r}static rowVector(t){for(var e=new this(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){for(var e=new this(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,n){void 0===n&&(n=Math.random);for(var r=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n());return r}static randInt(t,e,n,r){void 0===n&&(n=1e3),void 0===r&&(r=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var a,s=0;s<e;s++)a=g(r()*n),i.set(o,s,a);return i}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=v(t,e),i=this.zeros(t,e),o=0;o<r;o++)i.set(o,o,n);return i}static diag(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var i=v(r,e,n),o=this.zeros(e,n),a=0;a<i;a++)o.set(a,a,t[a]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,v(t.get(o,a),e.get(o,a)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,M(t.get(o,a),e.get(o,a)));return i}static checkMatrix(t){return r.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=this.rows,n=this.columns,r=0;r<e;r++)for(var i=0;i<n;i++)t.call(this,r,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t[e*this.columns+n]=this.get(e,n);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var n=0;n<this.columns;n++)t[e][n]=this.get(e,n)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t,e){t=t||1,e=e||1;for(var n=new this.constructor[Symbol.species](this.rows*t,this.columns*e),r=0;r<t;r++)for(var i=0;i<e;i++)n.setSubMatrix(this,this.rows*r,this.columns*i);return n}fill(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){c.checkRowIndex(this,t);for(var e=Array(this.columns),n=0;n<this.columns;n++)e[n]=this.get(t,n);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){c.checkRowIndex(this,t),e=c.checkRowVector(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){c.checkRowIndex(this,t),c.checkRowIndex(this,e);for(var n,r=0;r<this.columns;r++)n=this.get(t,r),this.set(t,r,this.get(e,r)),this.set(e,r,n);return this}getColumn(t){c.checkColumnIndex(this,t);for(var e=Array(this.rows),n=0;n<this.rows;n++)e[n]=this.get(n,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){c.checkColumnIndex(this,t),e=c.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){c.checkColumnIndex(this,t),c.checkColumnIndex(this,e);for(var n,r=0;r<this.rows;r++)n=this.get(r,t),this.set(r,t,this.get(r,e)),this.set(r,e,n);return this}addRowVector(t){t=c.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=c.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=c.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=c.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=c.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=c.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=c.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=c.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){c.checkRowIndex(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){c.checkColumnIndex(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){c.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){c.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){c.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){c.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){c.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){c.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){c.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){c.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){for(var t=v(this.rows,this.columns),e=Array(t),n=0;n<t;n++)e[n]=this.get(n,n);return e}sum(t){return"row"===t?c.sumByRow(this):"column"===t?c.sumByColumn(this):c.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t*=this.get(e,n);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){r.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,i=0;i<e.length;i++)n+=e[i]*t[i];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var e=this.rows,n=this.columns,r=t.columns,i=new this.constructor[Symbol.species](e,r),o=Array(n),a=0;a<r;a++){for(var s=0;s<n;s++)o[s]=t.get(s,a);for(var u,c=0;c<e;c++){for(u=0,s=0;s<n;s++)u+=this.get(c,s)*o[s];i.set(c,a,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(n+u)*(r+c),h=(a+u)*r,f=n*(o-c),d=u*(s-r),p=(n+i)*c;return e.set(0,0,l+d-p+(i-u)*(s+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(a-n)*(r+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(n-o)*(-f+m),b=(-n+o+a)*(h-f+m),_=(o+a)*(-h+f),M=n*h,S=(-n+u+c)*(h-d+g),E=(-n+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),C=(i-l)*(m-y),k=i*v,R=(c+l)*(-v+y),O=(-i+a+s)*(g+v-w),P=(i-s)*(g-w),D=(a+s)*(-v+w);return e.set(0,0,M+k+r*p),e.set(0,1,(n+r+i-o-a-c-l)*m+b+_+M+A+k+R),e.set(0,2,M+S+T+(n+r+i-a-s-u-c)*g+k+O+D),e.set(1,0,x+a*(-h+f+p-m-g-v+w)+b+M+k+O+P),e.set(1,1,x+b+_+M+s*y),e.set(1,2,k+O+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+C+k),e.set(2,1,A+C+k+R+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,n){return t.rows===e&&t.columns===n?t:r.zeros(e,n).setSubMatrix(t,0,0)}var n=this.clone(),i=n.rows,o=n.columns,a=t.rows,s=t.columns;o!==a&&console.warn(`Multiplying ${i} x ${o} and ${a} x ${s} matrix: dimensions do not match.`);var u=M(i,a),c=M(o,s);return function t(n,i,o,a){if(512>=o||512>=a)return n.mmul(i);1==o%2&&1==a%2?(n=e(n,o+1,a+1),i=e(i,o+1,a+1)):1==o%2?(n=e(n,o+1,a),i=e(i,o+1,a)):1==a%2&&(n=e(n,o,a+1),i=e(i,o,a+1));var s=parseInt(n.rows/2),u=parseInt(n.columns/2),c=n.subMatrix(0,s-1,0,u-1),l=i.subMatrix(0,s-1,0,u-1),h=n.subMatrix(0,s-1,u,n.columns-1),f=i.subMatrix(0,s-1,u,i.columns-1),d=n.subMatrix(s,n.rows-1,0,u-1),p=i.subMatrix(s,i.rows-1,0,u-1),m=n.subMatrix(s,n.rows-1,u,n.columns-1),g=i.subMatrix(s,i.rows-1,u,i.columns-1),v=t(r.add(c,m),r.add(l,g),s,u),y=t(r.add(d,m),l,s,u),w=t(c,r.sub(f,g),s,u),x=t(m,r.sub(p,l),s,u),b=t(r.add(c,h),g,s,u),_=t(r.sub(d,c),r.add(l,f),s,u),M=t(r.sub(h,m),r.add(p,g),s,u),S=r.add(v,x);S.sub(b),S.add(M);var E=r.add(w,b),T=r.add(y,x),A=r.sub(v,y);A.add(w),A.add(_);var C=r.zeros(2*S.rows,2*S.columns);return(C=(C=(C=(C=C.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,o-1,0,a-1)}(n=e(n,u,c),t=e(t,u,c),u,c)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)n=(0,s.scale)(this.getRow(i),{min:t,max:e}),r.setRow(i,n);return r}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)n=(0,s.scale)(this.getColumn(i),{min:t,max:e}),r.setColumn(i,n);return r}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*r,n*i),a=0;a<e;a++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var c=0;c<i;c++)o[r*a+u][i*s+c]=this.get(a,s)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t){void 0===t&&(t=e);for(var n=0;n<this.rows;n++)this.setRow(n,this.getRow(n).sort(t));return this}sortColumns(t){void 0===t&&(t=e);for(var n=0;n<this.columns;n++)this.setColumn(n,this.getColumn(n).sort(t));return this}subMatrix(t,e,n,r){c.checkRange(this,t,e,n,r);for(var i=new this.constructor[Symbol.species](e-t+1,r-n+1),o=t;o<=e;o++)for(var a=n;a<=r;a++)i[o-t][a-n]=this.get(o,a);return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||0>e||e>=this.columns||0>n||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](t.length,n-e+1),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError("Row index out of range: "+t[i]);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||0>e||e>=this.rows||0>n||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](n-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError("Column index out of range: "+t[i]);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){t=this.constructor.checkMatrix(t),c.checkRange(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var i=0;i<t.columns;i++)this[e+r][n+i]=t.get(r,i);return this}selection(t,e){for(var n,r=c.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<r.row.length;o++){n=r.row[o];for(var a=0;a<r.column.length;a++)i[o][a]=this.get(n,r.column[a])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}transposeView(){return new l.default(this)}rowView(t){return c.checkRowIndex(this,t),new h.default(this,t)}columnView(t){return c.checkColumnIndex(this,t),new p.default(this,t)}flipRowView(){return new m.default(this)}flipColumnView(){return new y.default(this)}subMatrixView(t,e,n,r){return new f.default(this,t,e,n,r)}selectionView(t,e){return new d.default(this,t,e)}det(){var t,e,n,r,o,a;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),n=this.get(1,0),t*this.get(1,1)-e*n):3===this.columns?(r=this.selectionView([1,2],[1,2]),o=this.selectionView([1,2],[0,2]),a=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),n=this.get(0,2),t*r.det()-e*o.det()+n*a.det()):new i.default(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new o.default(this,{autoTranspose:!0}),n=e.leftSingularVectors,r=e.rightSingularVectors,i=e.diagonal,s=0;s<i.length;s++)i[s]=u(i[s])>t?1/i[s]:0;return i=this.constructor[Symbol.species].diag(i),r.mmul(i.mmul(n.transposeView()))}}r.prototype.klass="Matrix",r.random=r.rand,r.diagonal=r.diag,r.prototype.diagonal=r.prototype.diag,r.identity=r.eye,r.prototype.negate=r.prototype.neg,r.prototype.tensorProduct=r.prototype.kroneckerProduct,r.prototype.determinant=r.prototype.det;var w,x,b="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",_=eval,S=!0,E=!1;try{for(var T,A=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]][Symbol.iterator]();!(S=(T=A.next()).done);S=!0){var C=T.value,k=_(n("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",{name:C[1],op:C[0]})),R=_(n("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",{name:C[1]+"S",op:C[0]})),O=_(n("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",{name:C[1]+"M",op:C[0]})),P=_(n("\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",{name:C[1]}));for(w=1;w<C.length;w++)r.prototype[C[w]]=k,r.prototype[C[w]+"S"]=R,r.prototype[C[w]+"M"]=O,r[C[w]]=P}}catch(t){E=!0,x=t}finally{try{!S&&A.return&&A.return()}finally{if(E)throw x}}var D=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){D.push(["Math."+t,t])});var L,N=!0,I=!1;try{for(var F,z=D[Symbol.iterator]();!(N=(F=z.next()).done);N=!0){var U=F.value,j=_(n("\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",{name:U[1],method:U[0]})),V=_(n("\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",{name:U[1]}));for(w=1;w<U.length;w++)r.prototype[U[w]]=j,r[U[w]]=V}}catch(t){I=!0,L=t}finally{try{!N&&z.return&&z.return()}finally{if(I)throw L}}var B,H=!0,G=!1;try{for(var q,W=[["Math.pow",1,"pow"]][Symbol.iterator]();!(H=(q=W.next()).done);H=!0){var Y=q.value,X="arg0";for(w=1;w<Y[1];w++)X+=`, arg${w}`;if(1!==Y[1]){var $=_(n("\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",{name:Y[2],method:Y[0],args:X})),Q=_(n(b,{name:Y[2],args:X}));for(w=2;w<Y.length;w++)r.prototype[Y[w]]=$,r[Y[w]]=Q}else{var Z={name:Y[2],args:X,method:Y[0]},J=_(n("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",Z)),K=_(n("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",Z)),tt=_(n("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",Z)),et=_(n(b,Z));for(w=2;w<Y.length;w++)r.prototype[Y[w]]=J,r.prototype[Y[w]+"M"]=tt,r.prototype[Y[w]+"S"]=K,r[Y[w]]=et}}}catch(t){G=!0,B=t}finally{try{!H&&W.return&&W.return()}finally{if(G)throw B}}return r};var i=r(n(33)),o=r(n(51)),s=n(1),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(23)),l=r(n(109)),h=r(n(110)),f=r(n(111)),d=r(n(112)),p=r(n(113)),m=r(n(114)),y=r(n(115))},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,i,a,s,c,l,h,f,d,p=(t=o.default.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),n=0;n<g;n++){for(e=0;e<m;e++)f[e]=p[e][n];for(e=0;e<m;e++){for(h=p[e],d=v(e,n),s=0,i=0;i<d;i++)s+=h[i]*f[i];h[n]=f[e]-=s}for(a=n,e=n+1;e<m;e++)u(f[e])>u(f[a])&&(a=e);if(a!==n){for(i=0;i<g;i++)c=p[a][i],p[a][i]=p[n][i],p[n][i]=c;l=y[a],y[a]=y[n],y[n]=l,w=-w}if(n<m&&0!==p[n][n])for(e=n+1;e<m;e++)p[e][n]/=p[n][n]}this.LU=p,this.pivotVector=y,this.pivotSign=w}Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=i&&i.__esModule?i:{default:i};r.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,n=0;n<e;n++)if(0===t[n][n])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,n=t.columns,r=0;r<n;r++)e*=t[r][r];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new o.default(e,n),i=0;i<e;i++)for(var a=0;a<n;a++)r[i][a]=i>a?t[i][a]:i===a?1:0;return r},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new o.default(e,n),i=0;i<e;i++)for(var a=0;a<n;a++)r[i][a]=i<=a?t[i][a]:0;return r},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=o.default.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,r,i,a=t.columns,s=t.subMatrixRow(this.pivotVector,0,a-1),u=e.columns;for(i=0;i<u;i++)for(n=i+1;n<u;n++)for(r=0;r<a;r++)s[n][r]-=s[i][r]*e[n][i];for(i=u-1;0<=i;i--){for(r=0;r<a;r++)s[i][r]/=e[i][i];for(n=0;n<i;n++)for(r=0;r<a;r++)s[n][r]-=s[i][r]*e[n][i]}return s}},e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hypotenuse=function(t,e){var n;return u(t)>u(e)?(n=e/t,u(t)*R(1+n*n)):0===e?0:(n=t/e,u(e)*R(1+n*n))},e.getEmpty2DArray=function(t,e){for(var n=Array(t),r=0;r<t;r++)n[r]=Array(e);return n},e.getFilled2DArray=function(t,e,n){for(var r=Array(t),i=0;i<t;i++){r[i]=Array(e);for(var o=0;o<e;o++)r[i][o]=n}return r}},function(t){"use strict";var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===n.call(t)},i=function(t){if(!t||"[object Object]"!==n.call(t))return!1;var r=e.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&e.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!i)return!1;for(var o in t);return"undefined"==typeof o||e.call(t,o)};t.exports=function t(){var e,n,o,a,s,u,c=arguments[0],l=1,h=arguments.length,f=!1;for("boolean"==typeof c&&(f=c,c=arguments[1]||{},l=2),(null==c||"object"!=typeof c&&"function"!=typeof c)&&(c={});l<h;++l)if(null!=(e=arguments[l]))for(n in e)o=c[n],c!==(a=e[n])&&(f&&a&&(i(a)||(s=r(a)))?(s?(s=!1,u=o&&r(o)?o:[]):u=o&&i(o)?o:{},c[n]=t(f,u,a)):"undefined"!=typeof a&&(c[n]=a));return c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=r&&r.__esModule?r:{default:r};class o extends i.default{constructor(t,e){super(),!0===t?(this.slope=e.slope,this.intercept=e.intercept,this.coefficients=[e.intercept,e.slope]):((0,r.checkArrayLength)(t,e),function(t,e,n){for(var r=e.length,i=0,o=0,a=0,s=0,u=0;u<r;u++)i+=e[u],o+=n[u],a+=e[u]*e[u],s+=e[u]*n[u];t.slope=(r*s-i*o)/(r*a-i*i),t.intercept=1/r*o-t.slope*(1/r)*i,t.coefficients=[t.intercept,t.slope]}(this,t,e))}toJSON(){return{name:"simpleLinearRegression",slope:this.slope,intercept:this.intercept}}_predict(t){return this.slope*t+this.intercept}computeX(t){return(t-this.intercept)/this.slope}toString(t){var e="f(x) = ";if(0!==this.slope){var n=(0,r.maybeToPrecision)(this.slope,t);if(e+=("1"===n?"":n+" * ")+"x",this.intercept){var i=u(this.intercept);e+=` ${i===this.intercept?"+":"-"} ${(0,r.maybeToPrecision)(i,t)}`}}else e+=(0,r.maybeToPrecision)(this.intercept,t);return e}toLaTeX(t){return this.toString(t)}static load(t){if("simpleLinearRegression"!==t.name)throw new TypeError("not a SLR model");return new o(!0,t)}}e.default=o},function(t,e,n){"use strict";var r=n(13).Matrix,i=n(131),o=n(132),a=n(133),s=n(134),u=n(135),c=n(136),l=n(137),h=n(138),f=n(139),d=n(140),p={gaussian:i,rbf:i,polynomial:o,poly:o,anova:a,cauchy:s,exponential:u,histogram:c,min:c,laplacian:l,multiquadratic:h,rational:f,sigmoid:d,mlp:d};t.exports=class{constructor(t,e){if(this.kernelType=t,"linear"!==t)if("string"==typeof t){t=t.toLowerCase();var n=p[t];if(!n)throw new Error("unsupported kernel type: "+t);this.kernelFunction=new n(e)}else{if("object"!=typeof t||"function"!=typeof t.compute)throw new TypeError("first argument must be a valid kernel type or instance");this.kernelFunction=t}}compute(t,e){if(void 0===e&&(e=t),"linear"===this.kernelType)return new r(t).mmul(new r(e).transposeView());var n,i,o=new r(t.length,e.length);if(t===e)for(n=0;n<t.length;n++)for(i=n;i<t.length;i++)o[n][i]=o[i][n]=this.kernelFunction.compute(t[n],t[i]);else for(n=0;n<t.length;n++)for(i=0;i<e.length;i++)o[n][i]=this.kernelFunction.compute(t[n],e[i]);return o}}},function(t,e){"use strict";e.hypotenuse=function(t,e){var n;return u(t)>u(e)?(n=e/t,u(t)*R(1+n*n)):0===e?0:(n=t/e,u(e)*R(1+n*n))},e.getEmpty2DArray=function(t,e){for(var n=Array(t),r=0;r<t;r++)n[r]=Array(e);return n},e.getFilled2DArray=function(t,e,n){for(var r=Array(t),i=0;i<t;i++){r[i]=Array(e);for(var o=0;o<e;o++)r[i][o]=n}return r}},function(t,e){"use strict";e.hypotenuse=function(t,e){var n;return u(t)>u(e)?(n=e/t,u(t)*R(1+n*n)):0===e?0:(n=t/e,u(e)*R(1+n*n))},e.getEmpty2DArray=function(t,e){for(var n=Array(t),r=0;r<t;r++)n[r]=Array(e);return n},e.getFilled2DArray=function(t,e,n){for(var r=Array(t),i=0;i<t;i++){r[i]=Array(e);for(var o=0;o<e;o++)r[i][o]=n}return r}},function(t,e,n){"use strict";t.exports=n(7).Matrix,t.exports.Decompositions=t.exports.DC=n(236)},function(t,e){"use strict";e.hypotenuse=function(t,e){var n;return u(t)>u(e)?(n=e/t,u(t)*R(1+n*n)):0===e?0:(n=t/e,u(e)*R(1+n*n))},e.getEmpty2DArray=function(t,e){for(var n=Array(t),r=0;r<t;r++)n[r]=Array(e);return n},e.getFilled2DArray=function(t,e,n){for(var r=Array(t),i=0;i<t;i++){r[i]=Array(e);for(var o=0;o<e;o++)r[i][o]=n}return r}},function(t,e){"use strict";e.hypotenuse=function(t,e){var n;return u(t)>u(e)?(n=e/t,u(t)*R(1+n*n)):0===e?0:(n=t/e,u(e)*R(1+n*n))},e.getEmpty2DArray=function(t,e){for(var n=Array(t),r=0;r<t;r++)n[r]=Array(e);return n},e.getFilled2DArray=function(t,e,n){for(var r=Array(t),i=0;i<t;i++){r[i]=Array(e);for(var o=0;o<e;o++)r[i][o]=n}return r}},function(t,e){"use strict";e.hypotenuse=function(t,e){var n;return u(t)>u(e)?(n=e/t,u(t)*R(1+n*n)):0===e?0:(n=t/e,u(e)*R(1+n*n))},e.getEmpty2DArray=function(t,e){for(var n=Array(t),r=0;r<t;r++)n[r]=Array(e);return n},e.getFilled2DArray=function(t,e,n){for(var r=Array(t),i=0;i<t;i++){r[i]=Array(e);for(var o=0;o<e;o++)r[i][o]=n}return r}},function(t,e){"use strict";e.hypotenuse=function(t,e){var n;return u(t)>u(e)?(n=e/t,u(t)*R(1+n*n)):0===e?0:(n=t/e,u(e)*R(1+n*n))},e.getEmpty2DArray=function(t,e){for(var n=Array(t),r=0;r<t;r++)n[r]=Array(e);return n},e.getFilled2DArray=function(t,e,n){for(var r=Array(t),i=0;i<t;i++){r[i]=Array(e);for(var o=0;o<e;o++)r[i][o]=n}return r}},function(t,e,n){"use strict";t.exports=n(11).Matrix,t.exports.Decompositions=t.exports.DC=n(299)},function(t,e){"use strict";e.hypotenuse=function(t,e){var n;return u(t)>u(e)?(n=e/t,u(t)*R(1+n*n)):0===e?0:(n=t/e,u(e)*R(1+n*n))},e.getEmpty2DArray=function(t,e){for(var n=Array(t),r=0;r<t;r++)n[r]=Array(e);return n},e.getFilled2DArray=function(t,e,n){for(var r=Array(t),i=0;i<t;i++){r[i]=Array(e);for(var o=0;o<e;o++)r[i][o]=n}return r}},function(t,e,n){"use strict";function r(t,e){return this[t][e]*=this[t][e],this}var i=n(45),o=n(2);t.exports={norm:function(t){return R(t.clone().apply(r).sum())},pow2array:r,featureNormalize:function(t){var e=o.matrix.mean(t),n=o.matrix.standardDeviation(t,e,!0);return{result:i.checkMatrix(t).subRowVector(e).divRowVector(n),means:e,std:n}}}},function(t,e,n){"use strict";function r(){this.children=[],this.distance=-1,this.index=[]}var i=n(311);r.prototype.cut=function(t){if(0>t)throw new RangeError("Threshold too small");var e=new r;e.children=this.children,e.distance=this.distance,e.index=this.index;for(var n=[e],i=[];0<n.length;){var o=n.shift();t>=o.distance?i.push(o):n=n.concat(o.children)}return i},r.prototype.group=function(t){if(!m(t)||1>t)throw new RangeError("Number of groups must be a positive integer");var e=new i(function(t,e){return e.distance-t.distance});for(e.push(this);e.size()<t;){var n=e.pop();if(0===n.children.length)break;n.children.forEach(t=>e.push(t))}var o=new r;return o.children=e.toArray(),o.distance=this.distance,o},r.prototype.traverse=function(t){!function t(e,n){if(n(e),e.children)for(var r=e.children.length-1;0<=r;r--)t(e.children[r],n)}(this,t)},t.exports=r},function(t,e,n){"use strict";t.exports=n(12).Matrix,t.exports.Decompositions=t.exports.DC=n(330)},function(t,e){"use strict";e.hypotenuse=function(t,e){var n;return u(t)>u(e)?(n=e/t,u(t)*R(1+n*n)):0===e?0:(n=t/e,u(e)*R(1+n*n))},e.getEmpty2DArray=function(t,e){for(var n=Array(t),r=0;r<t;r++)n[r]=Array(e);return n},e.getFilled2DArray=function(t,e,n){for(var r=Array(t),i=0;i<t;i++){r[i]=Array(e);for(var o=0;o<e;o++)r[i][o]=n}return r}},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);t=o.default.checkMatrix(t),e=e||{};var n=t.rows,i=t.columns,s=v(n,i),c=!0,l=!0;!1===e.computeLeftSingularVectors&&(c=!1),!1===e.computeRightSingularVectors&&(l=!1);var h,f=!1;if(n<i)if(!0===e.autoTranspose){n=(h=t.transpose()).rows,i=h.columns,f=!0;var d=c;c=l,l=d}else h=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else h=t.clone();var p,m,g,y,w,x,b,_,S,E,T,A,C,k,O,P,D,L,N,I,F,z=Array(v(n+1,i)),U=(0,a.getFilled2DArray)(n,s,0),j=(0,a.getFilled2DArray)(i,i,0),V=Array(i),B=Array(n),H=v(n-1,i),G=M(0,v(i-2,n));for(g=0,E=M(H,G);g<E;g++){if(g<H){for(z[g]=0,p=g;p<n;p++)z[g]=(0,a.hypotenuse)(z[g],h[p][g]);if(0!==z[g]){for(0>h[g][g]&&(z[g]=-z[g]),p=g;p<n;p++)h[p][g]/=z[g];h[g][g]+=1}z[g]=-z[g]}for(m=g+1;m<i;m++){if(g<H&&0!==z[g]){for(w=0,p=g;p<n;p++)w+=h[p][g]*h[p][m];for(w=-w/h[g][g],p=g;p<n;p++)h[p][m]+=w*h[p][g]}V[m]=h[g][m]}if(c&&g<H)for(p=g;p<n;p++)U[p][g]=h[p][g];if(g<G){for(V[g]=0,p=g+1;p<i;p++)V[g]=(0,a.hypotenuse)(V[g],V[p]);if(0!==V[g]){for(0>V[g+1]&&(V[g]=0-V[g]),p=g+1;p<i;p++)V[p]/=V[g];V[g+1]+=1}if(V[g]=-V[g],g+1<n&&0!==V[g]){for(p=g+1;p<n;p++)B[p]=0;for(m=g+1;m<i;m++)for(p=g+1;p<n;p++)B[p]+=V[m]*h[p][m];for(m=g+1;m<i;m++)for(w=-V[m]/V[g+1],p=g+1;p<n;p++)h[p][m]+=w*B[p]}if(l)for(p=g+1;p<i;p++)j[p][g]=V[p]}}if(y=v(i,n+1),H<i&&(z[H]=h[H][H]),n<y&&(z[y-1]=0),G+1<y&&(V[G]=h[G][y-1]),V[y-1]=0,c){for(m=H;m<s;m++){for(p=0;p<n;p++)U[p][m]=0;U[m][m]=1}for(g=H-1;0<=g;g--)if(0!==z[g]){for(m=g+1;m<s;m++){for(w=0,p=g;p<n;p++)w+=U[p][g]*U[p][m];for(w=-w/U[g][g],p=g;p<n;p++)U[p][m]+=w*U[p][g]}for(p=g;p<n;p++)U[p][g]=-U[p][g];for(U[g][g]=1+U[g][g],p=0;p<g-1;p++)U[p][g]=0}else{for(p=0;p<n;p++)U[p][g]=0;U[g][g]=1}}if(l)for(g=i-1;0<=g;g--){if(g<G&&0!==V[g])for(m=g+1;m<i;m++){for(w=0,p=g+1;p<i;p++)w+=j[p][g]*j[p][m];for(w=-w/j[g+1][g],p=g+1;p<i;p++)j[p][m]+=w*j[p][g]}for(p=0;p<i;p++)j[p][g]=0;j[g][g]=1}for(var q=y-1,W=2.220446049250313e-16;0<y;){for(g=y-2;-1<=g&&-1!==g;g--)if(u(V[g])<=W*(u(z[g])+u(z[g+1]))){V[g]=0;break}if(g===y-2)T=4;else{for(x=y-1;x>=g&&x!==g;x--)if(w=(x===y?0:u(V[x]))+(x===g+1?0:u(V[x-1])),u(z[x])<=W*w){z[x]=0;break}x===g?T=3:x===y-1?T=1:(T=2,g=x)}switch(g++,T){case 1:for(b=V[y-2],V[y-2]=0,m=y-2;m>=g;m--)if(w=(0,a.hypotenuse)(z[m],b),_=z[m]/w,S=b/w,z[m]=w,m!==g&&(b=-S*V[m-1],V[m-1]=_*V[m-1]),l)for(p=0;p<i;p++)w=_*j[p][m]+S*j[p][y-1],j[p][y-1]=-S*j[p][m]+_*j[p][y-1],j[p][m]=w;break;case 2:for(b=V[g-1],V[g-1]=0,m=g;m<y;m++)if(w=(0,a.hypotenuse)(z[m],b),_=z[m]/w,S=b/w,z[m]=w,b=-S*V[m],V[m]=_*V[m],c)for(p=0;p<n;p++)w=_*U[p][m]+S*U[p][g-1],U[p][g-1]=-S*U[p][m]+_*U[p][g-1],U[p][m]=w;break;case 3:for(A=M(M(M(M(u(z[y-1]),u(z[y-2])),u(V[y-2])),u(z[g])),u(V[g])),P=z[g]/A,D=V[g]/A,N=(C=z[y-1]/A)*(O=V[y-2]/A)*(C*O),I=0,(0!=(L=(((k=z[y-2]/A)+C)*(k-C)+O*O)/2)||0!==N)&&(I=R(L*L+N),0>L&&(I=-I),I=N/(L+I)),b=(P+C)*(P-C)+I,F=P*D,m=g;m<y-1;m++){if(_=b/(w=(0,a.hypotenuse)(b,F)),S=F/w,m!==g&&(V[m-1]=w),b=_*z[m]+S*V[m],V[m]=_*V[m]-S*z[m],F=S*z[m+1],z[m+1]=_*z[m+1],l)for(p=0;p<i;p++)w=_*j[p][m]+S*j[p][m+1],j[p][m+1]=-S*j[p][m]+_*j[p][m+1],j[p][m]=w;if(_=b/(w=(0,a.hypotenuse)(b,F)),S=F/w,z[m]=w,b=_*V[m]+S*z[m+1],z[m+1]=-S*V[m]+_*z[m+1],F=S*V[m+1],V[m+1]=_*V[m+1],c&&m<n-1)for(p=0;p<n;p++)w=_*U[p][m]+S*U[p][m+1],U[p][m+1]=-S*U[p][m]+_*U[p][m+1],U[p][m]=w}V[y-2]=b;break;case 4:if(0>=z[g]&&(z[g]=0>z[g]?-z[g]:0,l))for(p=0;p<=q;p++)j[p][g]=-j[p][g];for(;g<q&&!(z[g]>=z[g+1]);){if(w=z[g],z[g]=z[g+1],z[g+1]=w,l&&g<i-1)for(p=0;p<i;p++)w=j[p][g+1],j[p][g+1]=j[p][g],j[p][g]=w;if(c&&g<n-1)for(p=0;p<n;p++)w=U[p][g+1],U[p][g+1]=U[p][g],U[p][g]=w;g++}y--}}if(f){var Y=j;j=U,U=Y}this.m=n,this.n=i,this.s=z,this.U=U,this.V=j}Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=i&&i.__esModule?i:{default:i},a=n(34);r.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,n=this.s,r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return o.default.isMatrix(this.U)||(this.U=new o.default(this.U)),this.U},get rightSingularVectors(){return o.default.isMatrix(this.V)||(this.V=new o.default(this.V)),this.V},get diagonalMatrix(){return o.default.diag(this.s)},solve:function(t){var e,n=this.threshold,r=this.s.length,i=o.default.zeros(r,r);for(e=0;e<r;e++)i[e][e]=u(this.s[e])<=n?0:1/this.s[e];var a,s,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(i),d=h.rows,p=l.length,m=o.default.zeros(d,p);for(e=0;e<d;e++)for(a=0;a<p;a++){for(c=0,s=0;s<r;s++)c+=f[e][s]*l[a][s];m[e][a]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(o.default.diag(t))},inverse:function(){var t,e,n=this.V,r=this.threshold,i=n.length,a=n[0].length,s=new o.default(i,this.s.length);for(t=0;t<i;t++)for(e=0;e<a;e++)s[t][e]=u(this.s[e])>r?n[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new o.default(i,f);for(t=0;t<i;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=s[t][c]*h[e][c];p[t][e]=l}return p}},e.default=r},function(t,e){"use strict";function n(t,e){return t-e}e.sum=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e},e.max=function(t){for(var e=t[0],n=t.length,r=1;r<n;r++)t[r]>e&&(e=t[r]);return e},e.min=function(t){for(var e=t[0],n=t.length,r=1;r<n;r++)t[r]<e&&(e=t[r]);return e},e.minMax=function(t){for(var e=t[0],n=t[0],r=t.length,i=1;i<r;i++)t[i]<e&&(e=t[i]),t[i]>n&&(n=t[i]);return{min:e,max:n}},e.arithmeticMean=function(t){for(var e=0,n=t.length,r=0;r<n;r++)e+=t[r];return e/n},e.mean=e.arithmeticMean,e.geometricMean=function(t){for(var e=1,n=t.length,r=0;r<n;r++)e*=t[r];return c(e,1/n)},e.logMean=function(t){for(var e=0,n=t.length,i=0;i<n;i++)e+=r(t[i]);return e/n},e.grandMean=function(t,e){for(var n=0,r=0,i=t.length,o=0;o<i;o++)n+=e[o]*t[o],r+=e[o];return n/r},e.truncatedMean=function(t,e,r){void 0===r&&(r=!1),r||(t=[].concat(t).sort(n));for(var i=t.length,o=g(i*e),a=0,s=o;s<i-o;s++)a+=t[s];return a/(i-2*o)},e.harmonicMean=function(t){for(var e=0,n=t.length,r=0;r<n;r++){if(0===t[r])throw new RangeError("value at index "+r+"is zero");e+=1/t[r]}return n/e},e.contraHarmonicMean=function(t){for(var e=0,n=0,r=t.length,i=0;i<r;i++)e+=t[i]*t[i],n+=t[i];if(0>n)throw new RangeError("sum of values is negative");return e/n},e.median=function(t,e){void 0===e&&(e=!1),e||(t=[].concat(t).sort(n));var r=t.length,i=g(r/2);return 0==r%2?.5*(t[i-1]+t[i]):t[i]},e.variance=function(t,n){void 0===n&&(n=!0);for(var r,i=e.mean(t),o=0,a=t.length,s=0;s<a;s++)o+=(r=t[s]-i)*r;return n?o/(a-1):o/a},e.standardDeviation=function(t,n){return R(e.variance(t,n))},e.standardError=function(t){return e.standardDeviation(t)/R(t.length)},e.robustMeanAndStdev=function(t){var e=0,r=t.length,i=0;for(i=0;i<r;i++)e+=t[i];e/=r;var o=Array(r);for(i=0;i<r;i++)o[i]=u(t[i]-e);return o.sort(n),{mean:e,stdev:1==r%2?o[(r-1)/2]/.6745:.5*(o[r/2]+o[r/2-1])/.6745}},e.quartiles=function(t,r){"undefined"==typeof r&&(r=!1),r||(t=[].concat(t).sort(n));var i=t.length/4;return{q1:t[s(i)-1],q2:e.median(t,!0),q3:t[s(3*i)-1]}},e.pooledStandardDeviation=function(t,n){return R(e.pooledVariance(t,n))},e.pooledVariance=function(t,n){"undefined"==typeof n&&(n=!0);for(var r=0,i=0,o=t.length,a=0;a<o;a++){var s=t[a],u=e.variance(s);r+=(s.length-1)*u,i+=n?s.length-1:s.length}return r/i},e.mode=function(t){var e,n=t.length,r=Array(n);for(e=0;e<n;e++)r[e]=0;var i=Array(n),o=0;for(e=0;e<n;e++){var a=i.indexOf(t[e]);0<=a?r[a]++:(i[o]=t[e],r[o]=1,o++)}var s=0,u=0;for(e=0;e<o;e++)r[e]>s&&(s=r[e],u=e);return i[u]},e.covariance=function(t,n,r){"undefined"==typeof r&&(r=!0);var i=e.mean(t),o=e.mean(n);if(t.length!==n.length)throw"Vectors do not have the same dimensions";for(var a=0,s=t.length,u=0;u<s;u++)a+=(t[u]-i)*(n[u]-o);return r?a/(s-1):a/s},e.skewness=function(t,n){"undefined"==typeof n&&(n=!0);for(var r,i=e.mean(t),o=0,a=0,s=t.length,u=0;u<s;u++)o+=(r=t[u]-i)*r,a+=r*r*r;var l=a/s/c(o/s,1.5);return n?R(s*(s-1))/(s-2)*l:l},e.kurtosis=function(t,n){"undefined"==typeof n&&(n=!0);for(var r,i=e.mean(t),o=t.length,a=0,s=0,u=0;u<o;u++)a+=(r=t[u]-i)*r,s+=r*r*r*r;var c=a/o,l=s/o;if(n){var h=a/(o-1);return o*(o+1)/((o-1)*(o-2)*(o-3))*(s/(h*h))-(o-1)*(o-1)/((o-2)*(o-3))*3}return l/(c*c)-3},e.entropy=function(t,e){"undefined"==typeof e&&(e=0);for(var n=0,i=t.length,o=0;o<i;o++)n+=t[o]*r(t[o]+e);return-n},e.weightedMean=function(t,e){for(var n=0,r=t.length,i=0;i<r;i++)n+=t[i]*e[i];return n},e.weightedStandardDeviation=function(t,n){return R(e.weightedVariance(t,n))},e.weightedVariance=function(t,n){for(var r=e.weightedMean(t,n),i=0,o=t.length,a=0,s=0,u=0;u<o;u++){var c=t[u]-r,l=n[u];i+=l*(c*c),s+=l,a+=l*l}return i*(s/(s*s-a))},e.center=function(t,n){"undefined"==typeof n&&(n=!1);var r=t;n||(r=[].concat(t));for(var i=e.mean(r),o=r.length,a=0;a<o;a++)r[a]-=i},e.standardize=function(t,n,r){"undefined"==typeof n&&(n=e.standardDeviation(t)),"undefined"==typeof r&&(r=!1);for(var i=t.length,o=r?t:Array(i),a=0;a<i;a++)o[a]=t[a]/n;return o},e.cumulativeSum=function(t){var e=t.length,n=Array(e);n[0]=t[0];for(var r=1;r<e;r++)n[r]=n[r-1]+t[r];return n}},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,i,s,u=(t=o.default.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(i=0;i<l;i++){var f=0;for(e=i;e<c;e++)f=(0,a.hypotenuse)(f,u[e][i]);if(0!==f){for(0>u[i][i]&&(f=-f),e=i;e<c;e++)u[e][i]/=f;for(u[i][i]+=1,n=i+1;n<l;n++){for(s=0,e=i;e<c;e++)s+=u[e][i]*u[e][n];for(s=-s/u[i][i],e=i;e<c;e++)u[e][n]+=s*u[e][i]}}h[i]=-f}this.QR=u,this.Rdiag=h}Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=i&&i.__esModule?i:{default:i},a=n(34);r.prototype={solve:function(t){t=o.default.checkMatrix(t);var e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r,i,a,s,u=t.columns,c=t.clone(),l=e.columns;for(a=0;a<l;a++)for(i=0;i<u;i++){for(s=0,r=a;r<n;r++)s+=e[r][a]*c[r][i];for(s=-s/e[a][a],r=a;r<n;r++)c[r][i]+=s*e[r][a]}for(a=l-1;0<=a;a--){for(i=0;i<u;i++)c[a][i]/=this.Rdiag[a];for(r=0;r<a;r++)for(i=0;i<u;i++)c[r][i]-=c[a][i]*e[r][a]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,n=this.QR,r=n.columns,i=new o.default(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)i[t][e]=t<e?n[t][e]:t===e?this.Rdiag[t]:0;return i},get orthogonalMatrix(){var t,e,n,r,i=this.QR,a=i.rows,s=i.columns,u=new o.default(a,s);for(n=s-1;0<=n;n--){for(t=0;t<a;t++)u[t][n]=0;for(u[n][n]=1,e=n;e<s;e++)if(0!==i[n][n]){for(r=0,t=n;t<a;t++)r+=i[t][n]*u[t][e];for(r=-r/i[n][n],t=n;t<a;t++)u[t][e]+=r*i[t][n]}}return u}},e.default=r},function(t,e,n){"use strict";function r(t,e){return v(t-2,0|t*e)}function i(t,e,n){return s(M(t+1,0|4*t/(3*e+n)))}var o=n(121),a=n(122),s=a.nextPrime,u=a.largestPrime,c=0,l=1,h=2;class f{constructor(t={}){if(t instanceof f)return this.table=t.table.slice(),this.values=t.values.slice(),this.state=t.state.slice(),this.minLoadFactor=t.minLoadFactor,this.maxLoadFactor=t.maxLoadFactor,this.distinct=t.distinct,this.freeEntries=t.freeEntries,this.lowWaterMark=t.lowWaterMark,void(this.highWaterMark=t.maxLoadFactor);var e=void 0===t.initialCapacity?150:t.initialCapacity;if(0>e)throw new RangeError(`initial capacity must not be less than zero: ${e}`);var n=void 0===t.minLoadFactor?1/6:t.minLoadFactor,i=void 0===t.maxLoadFactor?2/3:t.maxLoadFactor;if(0>n||1<=n)throw new RangeError(`invalid minLoadFactor: ${n}`);if(0>=i||1<=i)throw new RangeError(`invalid maxLoadFactor: ${i}`);if(n>=i)throw new RangeError(`minLoadFactor (${n}) must be smaller than maxLoadFactor (${i})`);var a=e;0===(a=s(a=0|a/i))&&(a=1),this.table=o(a,0),this.values=o(a,0),this.state=o(a,0),this.minLoadFactor=n,this.maxLoadFactor=a===u?1:i,this.distinct=0,this.freeEntries=a,this.lowWaterMark=0,this.highWaterMark=r(a,this.maxLoadFactor)}clone(){return new f(this)}get size(){return this.distinct}get(t){var e=this.indexOfKey(t);return 0>e?0:this.values[e]}set(t,e){var n=this.indexOfInsertion(t);if(0>n)return this.values[n=-n-1]=e,!1;if(this.distinct>this.highWaterMark){var r=i(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);return this.rehash(r),this.set(t,e)}if(this.table[n]=t,this.values[n]=e,this.state[n]===c&&this.freeEntries--,this.state[n]=l,this.distinct++,1>this.freeEntries){var o=i(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);this.rehash(o)}return!0}remove(t,e){var n=this.indexOfKey(t);return!(0>n||(this.state[n]=h,this.distinct--,e||this.maybeShrinkCapacity(),0))}delete(t,e){var n=this.indexOfKey(t);return!(0>n||(this.state[n]=c,this.distinct--,e||this.maybeShrinkCapacity(),0))}maybeShrinkCapacity(){if(this.distinct<this.lowWaterMark){var t=function(t,e,n){return s(M(t+1,0|4*t/(e+3*n)))}(this.distinct,this.minLoadFactor,this.maxLoadFactor);this.rehash(t)}}containsKey(t){return 0<=this.indexOfKey(t)}indexOfKey(t){var e=this.table,n=this.state,r=this.table.length,i=2147483647&t,o=i%r,a=i%(r-2);for(0==a&&(a=1);n[o]!==c&&(n[o]===h||e[o]!==t);)0>(o-=a)&&(o+=r);return n[o]===c?-1:o}containsValue(t){return 0<=this.indexOfValue(t)}indexOfValue(t){for(var e=this.values,n=this.state,r=0;r<n.length;r++)if(n[r]===l&&e[r]===t)return r;return-1}indexOfInsertion(t){var e=this.table,n=this.state,r=e.length,i=2147483647&t,o=i%r,a=i%(r-2);for(0==a&&(a=1);n[o]===l&&e[o]!==t;)0>(o-=a)&&(o+=r);if(n[o]===h){for(var s=o;n[o]!==c&&(n[o]===h||e[o]!==t);)0>(o-=a)&&(o+=r);n[o]===c&&(o=s)}return n[o]===l?-o-1:o}ensureCapacity(t){if(this.table.length<t){var e=s(t);this.rehash(e)}}rehash(t){var e=this.table.length;if(t<=this.distinct)throw new Error("Unexpected");var n=this.table,i=this.values,a=this.state,s=o(t,0),u=o(t,0),c=o(t,0);this.lowWaterMark=function(t,e){return 0|t*e}(t,this.minLoadFactor),this.highWaterMark=r(t,this.maxLoadFactor),this.table=s,this.values=u,this.state=c,this.freeEntries=t-this.distinct;for(var h=0;h<e;h++)if(a[h]===l){var f=n[h],d=this.indexOfInsertion(f);s[d]=f,u[d]=i[h],c[d]=l}}forEachKey(t){for(var e=0;e<this.state.length;e++)if(this.state[e]===l&&!t(this.table[e]))return!1;return!0}forEachValue(t){for(var e=0;e<this.state.length;e++)if(this.state[e]===l&&!t(this.values[e]))return!1;return!0}forEachPair(t){for(var e=0;e<this.state.length;e++)if(this.state[e]===l&&!t(this.table[e],this.values[e]))return!1;return!0}}t.exports=f},function(t){"use strict";t.exports=function(t,e,n,r,i){var o,a;if(void 0===r)r=0;else if(0>(r|=0)||r>=t.length)throw new RangeError("invalid lower bound");if(void 0===i)i=t.length-1;else if((i|=0)<r||i>=t.length)throw new RangeError("invalid upper bound");for(;r<=i;)if(0>(a=+n(t[o=r+(i-r>>1)],e,o,t)))r=o+1;else{if(!(0<a))return o;i=o-1}return~r}},function(t,e,n){"use strict";function r(t){if("number"!=typeof t||i(t))throw new TypeError("Expected a number")}var i=n(123);e.asc=function(t,e){return r(t),r(e),t-e},e.desc=function(t,e){return r(t),r(e),e-t}},function(t,e,n){"use strict";var r=n(35),i={size:1,value:0};t.exports=function(t,e){if(e=r({},i,e),Array.isArray(t))return Array.isArray(t[0])?function(t,e){throw void 0===e.size[0]&&(e.size=[e.size,e.size,e.size,e.size]),new Error("matrix not supported yet, sorry")}(0,e):function(t,e){var n=t.length;"number"==typeof e.size&&(e.size=[e.size,e.size]);var r,i,o=n+e.size[0]+e.size[1];if(e.output){if(e.output.length!==o)throw new RangeError("Wrong output size");r=e.output}else r=Array(o);if("circular"===e.value)for(i=0;i<o;i++)r[i]=i<e.size[0]?t[(n-e.size[0]%n+i)%n]:i<e.size[0]+n?t[i-e.size[0]]:t[(i-e.size[0])%n];else if("replicate"===e.value)for(i=0;i<o;i++)r[i]=i<e.size[0]?t[0]:i<e.size[0]+n?t[i-e.size[0]]:t[n-1];else if("symmetric"===e.value){if(e.size[0]>n||e.size[1]>n)throw new RangeError("expanded value should not be bigger than the data length");for(i=0;i<o;i++)r[i]=i<e.size[0]?t[e.size[0]-1-i]:i<e.size[0]+n?t[i-e.size[0]]:t[2*n+e.size[0]-i-1]}else for(i=0;i<o;i++)r[i]=i<e.size[0]?e.value:i<e.size[0]+n?t[i-e.size[0]]:e.value;return r}(t,e);throw new TypeError("data should be an array")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=r(i),a=n(13),s=r(a);class u extends o.default{constructor(t,e,n){super(),!0===t?(this.degree=e.degree,this.powers=e.powers,this.coefficients=e.coefficients):((0,i.checkArrayLength)(t,e),function(t,e,n,r){var i,o=e.length;if(Array.isArray(r))r=(i=r).length;else{r++,i=Array(r);for(var u=0;u<r;u++)i[u]=u}for(var l=new s.default(o,r),h=new s.default([n]),f=0;f<r;f++)for(var d=0;d<o;d++)l[d][f]=0===i[f]?1:c(e[d],i[f]);var p=l.transposeView(),m=p.mmul(l),g=p.mmul(h.transposeView());t.degree=r-1,t.powers=i,t.coefficients=(0,a.solve)(m,g).to1DArray()}(this,t,e,n))}_predict(t){for(var e=0,n=0;n<this.powers.length;n++)e+=this.coefficients[n]*c(t,this.powers[n]);return e}toJSON(){return{name:"polynomialRegression",degree:this.degree,powers:this.powers,coefficients:this.coefficients}}toString(t){return this._toFormula(t,!1)}toLaTeX(t){return this._toFormula(t,!0)}_toFormula(t,e){var n="^",r="",o=" * ";e&&(n="^{",r="}",o="");for(var a="",s="",u=0;u<this.coefficients.length;u++)s="",0!==this.coefficients[u]&&(s=0===this.powers[u]?(0,i.maybeToPrecision)(this.coefficients[u],t):1===this.powers[u]?(0,i.maybeToPrecision)(this.coefficients[u],t)+o+"x":(0,i.maybeToPrecision)(this.coefficients[u],t)+o+"x"+n+this.powers[u]+r,0<this.coefficients[u]&&u!==this.coefficients.length-1?s=" + "+s:u!==this.coefficients.length-1&&(s=" "+s)),a=s+a;return"+"===a.charAt(0)&&(a=a.slice(1)),"f(x) = "+a}static load(t){if("polynomialRegression"!==t.name)throw new TypeError("not a polynomial regression model");return new u(!0,t)}}e.default=u},function(t){"use strict";t.exports=function(t,e){for(var n=0,r=0,i=0;i<t.length;i++)n+=v(t[i],e[i]),r+=t[i]+e[i];return 2*n/r}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0,o=0,a=0;a<n;a++)r+=t[a]*t[a],i+=e[a]*e[a],o+=(t[a]-e[a])*(t[a]-e[a]);return o/(r+i)}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0;i<n;i++)r+=v(t[i],e[i]);return 1-r}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0,o=0,a=0,s=0;s<n;s++)r+=t[s]*e[s],i+=t[s]*t[s],o+=e[s]*e[s],a+=(t[s]-e[s])*(t[s]-e[s]);return a/(i+o-r)}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0,o=0;o<n;o++)r+=u(t[o]-e[o]),i+=v(t[o],e[o]);return r/i}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0,o=0;o<n;o++)r+=v(t[o],e[o]),i+=t[o]+e[o];return 1-r/i}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0;i<n;i++)r+=(R(t[i])-R(e[i]))*(R(t[i])-R(e[i]));return r}},function(t){"use strict";t.exports=function(t,e,n){if(n){for(var r=0,i=0,o=0;o<t.length;o++)r+=t[o]&&e[o],i+=t[o]||e[o];return 0===i?1:r/i}for(var a=t.length,s=0,u=0,c=0,l=0;l<a;l++)s+=t[l],u+=e[l],c+=v(t[l],e[l]);return 1-(s+u-2*c)/(s+u-c)}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0,o=0,a=0;a<n;a++)r+=t[a]*e[a],i+=t[a]*t[a],o+=e[a]*e[a];return r/(R(i)*R(o))}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=Array.from({length:n}).map(()=>Array.from({length:n})),i=0;i<n;i++)for(var o=0;o<=i;o++)r[i][o]=e(t[i],t[o]);for(var a=0;a<n;a++)for(var s=a+1;s<n;s++)r[a][s]=r[s][a];return r}},function(e,t,i){"use strict";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal")}function n(t,e){return t-e}function x(t,e){for(var n in e)t=t.replace(new RegExp("%"+n+"%","g"),e[n]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("Data length does not match given dimensions");for(var r=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n[i*e+o]);return r}static rowVector(t){for(var e=new this(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){for(var e=new this(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,n){void 0===n&&(n=Math.random);for(var r=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n());return r}static randInt(t,e,n,r){void 0===n&&(n=1e3),void 0===r&&(r=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var a,s=0;s<e;s++)a=g(r()*n),i.set(o,s,a);return i}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=v(t,e),i=this.zeros(t,e),o=0;o<r;o++)i.set(o,o,n);return i}static diag(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var i=v(r,e,n),o=this.zeros(e,n),a=0;a<i;a++)o.set(a,a,t[a]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,v(t.get(o,a),e.get(o,a)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,M(t.get(o,a),e.get(o,a)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=this.rows,n=this.columns,r=0;r<e;r++)for(var i=0;i<n;i++)t.call(this,r,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t[e*this.columns+n]=this.get(e,n);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var n=0;n<this.columns;n++)t[e][n]=this.get(e,n)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t,e){t=t||1,e=e||1;for(var n=new this.constructor[Symbol.species](this.rows*t,this.columns*e),r=0;r<t;r++)for(var i=0;i<e;i++)n.setSubMatrix(this,this.rows*r,this.columns*i);return n}fill(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),n=0;n<this.columns;n++)e[n]=this.get(t,n);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var n,r=0;r<this.columns;r++)n=this.get(t,r),this.set(t,r,this.get(e,r)),this.set(e,r,n);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),n=0;n<this.rows;n++)e[n]=this.get(n,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var n,r=0;r<this.rows;r++)n=this.get(r,t),this.set(r,t,this.get(r,e)),this.set(r,e,n);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){for(var t=v(this.rows,this.columns),e=Array(t),n=0;n<t;n++)e[n]=this.get(n,n);return e}sum(t){return"row"===t?l.sumByRow(this):"column"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t*=this.get(e,n);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var e=this.rows,n=this.columns,r=t.columns,i=new this.constructor[Symbol.species](e,r),o=Array(n),a=0;a<r;a++){for(var s=0;s<n;s++)o[s]=t.get(s,a);for(var u,c=0;c<e;c++){for(u=0,s=0;s<n;s++)u+=this.get(c,s)*o[s];i.set(c,a,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(n+u)*(r+c),h=(a+u)*r,f=n*(o-c),d=u*(s-r),p=(n+i)*c;return e.set(0,0,l+d-p+(i-u)*(s+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(a-n)*(r+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(n-o)*(-f+m),b=(-n+o+a)*(h-f+m),_=(o+a)*(-h+f),M=n*h,S=(-n+u+c)*(h-d+g),E=(-n+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),C=(i-l)*(m-y),k=i*v,R=(c+l)*(-v+y),O=(-i+a+s)*(g+v-w),P=(i-s)*(g-w),D=(a+s)*(-v+w);return e.set(0,0,M+k+r*p),e.set(0,1,(n+r+i-o-a-c-l)*m+b+_+M+A+k+R),e.set(0,2,M+S+T+(n+r+i-a-s-u-c)*g+k+O+D),e.set(1,0,x+a*(-h+f+p-m-g-v+w)+b+M+k+O+P),e.set(1,1,x+b+_+M+s*y),e.set(1,2,k+O+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+C+k),e.set(2,1,A+C+k+R+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,n){return t.rows===e&&t.columns===n?t:w.zeros(e,n).setSubMatrix(t,0,0)}var n=this.clone(),r=n.rows,i=n.columns,o=t.rows,a=t.columns;i!==o&&console.warn(`Multiplying ${r} x ${i} and ${o} x ${a} matrix: dimensions do not match.`);var s=M(r,o),u=M(i,a);return function t(n,r,i,o){if(512>=i||512>=o)return n.mmul(r);1==i%2&&1==o%2?(n=e(n,i+1,o+1),r=e(r,i+1,o+1)):1==i%2?(n=e(n,i+1,o),r=e(r,i+1,o)):1==o%2&&(n=e(n,i,o+1),r=e(r,i,o+1));var a=parseInt(n.rows/2),s=parseInt(n.columns/2),u=n.subMatrix(0,a-1,0,s-1),c=r.subMatrix(0,a-1,0,s-1),l=n.subMatrix(0,a-1,s,n.columns-1),h=r.subMatrix(0,a-1,s,r.columns-1),f=n.subMatrix(a,n.rows-1,0,s-1),d=r.subMatrix(a,r.rows-1,0,s-1),p=n.subMatrix(a,n.rows-1,s,n.columns-1),m=r.subMatrix(a,r.rows-1,s,r.columns-1),g=t(w.add(u,p),w.add(c,m),a,s),v=t(w.add(f,p),c,a,s),y=t(u,w.sub(h,m),a,s),x=t(p,w.sub(d,c),a,s),b=t(w.add(u,l),m,a,s),_=t(w.sub(f,u),w.add(c,h),a,s),M=t(w.sub(l,p),w.add(d,m),a,s),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var C=w.zeros(2*S.rows,2*S.columns);return(C=(C=(C=(C=C.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(n=e(n,s,u),t=e(t,s,u),s,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)n=s.scale(this.getRow(i),{min:t,max:e}),r.setRow(i,n);return r}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)n=s.scale(this.getColumn(i),{min:t,max:e}),r.setColumn(i,n);return r}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*r,n*i),a=0;a<e;a++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var c=0;c<i;c++)o[r*a+u][i*s+c]=this.get(a,s)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){l.checkRange(this,t,e,n,r);for(var i=new this.constructor[Symbol.species](e-t+1,r-n+1),o=t;o<=e;o++)for(var a=n;a<=r;a++)i[o-t][a-n]=this.get(o,a);return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||0>e||e>=this.columns||0>n||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](t.length,n-e+1),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError("Row index out of range: "+t[i]);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||0>e||e>=this.rows||0>n||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](n-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError("Column index out of range: "+t[i]);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var i=0;i<t.columns;i++)this[e+r][n+i]=t.get(r,i);return this}selection(t,e){for(var n,r=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<r.row.length;o++){n=r.row[o];for(var a=0;a<r.column.length;a++)i[o][a]=this.get(n,r.column[a])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,n,r){return new d(this,t,e,n,r)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,n,r,i,a;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),n=this.get(1,0),t*this.get(1,1)-e*n):3===this.columns?(r=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),a=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),n=this.get(0,2),t*r.det()-e*i.det()+n*a.det()):new o(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass="Matrix",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",y="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",b="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",R="\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",I="\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",S="\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",C="\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",V="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",D="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",z="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",_="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",P=V,A=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+"S",op:N[0]})),B=eval(x(b,{name:N[1]+"M",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+"S"]=E,w.prototype[N[F]+"M"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){W.push(["Math."+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[["Math.pow",1,"pow"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae="arg0";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+"M"]=ge,w.prototype[re[F]+"S"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(70),r=i(71),s=i(1),l=i(24),c=i(194),m=i(195),d=i(196),h=i(197),p=i(198),k=i(199),j=i(200)},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,o,a,s,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),n=0;n<g;n++){for(e=0;e<m;e++)f[e]=p[e][n];for(e=0;e<m;e++){for(h=p[e],d=v(e,n),s=0,o=0;o<d;o++)s+=h[o]*f[o];h[n]=f[e]-=s}for(a=n,e=n+1;e<m;e++)u(f[e])>u(f[a])&&(a=e);if(a!==n){for(o=0;o<g;o++)c=p[a][o],p[a][o]=p[n][o],p[n][o]=c;l=y[a],y[a]=y[n],y[n]=l,w=-w}if(n<m&&0!==p[n][n])for(e=n+1;e<m;e++)p[e][n]/=p[n][n]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=n(5);r.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,n=0;n<e;n++)if(0===t[n][n])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,n=t.columns,r=0;r<n;r++)e*=t[r][r];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o>a?t[o][a]:o===a?1:0;return r},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o<=a?t[o][a]:0;return r},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,r,o,a=t.columns,s=t.subMatrixRow(this.pivotVector,0,a-1),u=e.columns;for(o=0;o<u;o++)for(n=o+1;n<u;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o];for(o=u-1;0<=o;o--){for(r=0;r<a;r++)s[o][r]/=e[o][o];for(n=0;n<o;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o]}return s}},t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var n=t.rows,o=t.columns,c=v(n,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(n<o)if(!0===e.autoTranspose){n=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,C,k,O,P,D,L,N,I,F,z,U=Array(v(n+1,o)),j=s(n,c,0),V=s(o,o,0),B=Array(o),H=Array(n),G=v(n-1,o),q=M(0,v(o-2,n));for(y=0,T=M(G,q);y<T;y++){if(y<G){for(U[y]=0,m=y;m<n;m++)U[y]=a(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<n;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<n;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<n;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<n;m++)j[m][y]=f[m][y];if(y<q){for(B[y]=0,m=y+1;m<o;m++)B[y]=a(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<n&&0!==B[y]){for(m=y+1;m<n;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<n;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<n;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,n+1),G<o&&(U[G]=f[G][G]),n<w&&(U[w-1]=0),q+1<w&&(B[q]=f[q][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<n;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<n;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<n;m++)j[m][g]+=x*j[m][y]}for(m=y;m<n;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<n;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<q&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var W=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(C=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/C,L=B[y]/C,I=(k=U[w-1]/C)*(P=B[w-2]/C)*(k*P),F=0,(0!=(N=(((O=U[w-2]/C)+k)*(O-k)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+k)*(D-k)+F,z=D*L,g=y;g<w-1;g++){if(S=_/(x=a(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=a(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<n-1)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=W;m++)V[m][y]=-V[m][y];for(;y<W&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<n-1)for(m=0;m<n;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=n,this.n=o,this.s=U,this.U=j,this.V=V}var i=n(5),o=n(38),a=o.hypotenuse,s=o.getFilled2DArray;r.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,n=this.s,r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,n=this.threshold,r=this.s.length,o=i.Matrix.zeros(r,r);for(e=0;e<r;e++)o[e][e]=u(this.s[e])<=n?0:1/this.s[e];var a,s,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(a=0;a<p;a++){for(c=0,s=0;s<r;s++)c+=f[e][s]*l[a][s];m[e][a]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,n=this.V,r=this.threshold,o=n.length,a=n[0].length,s=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<a;e++)s[t][e]=u(this.s[e])>r?n[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=s[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=r},function(t,e){"use strict";function n(t,e){return t-e}e.sum=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e},e.max=function(t){for(var e=-1/0,n=t.length,r=0;r<n;r++)t[r]>e&&(e=t[r]);return e},e.min=function(t){for(var e=1/0,n=t.length,r=0;r<n;r++)t[r]<e&&(e=t[r]);return e},e.minMax=function(t){for(var e=1/0,n=-1/0,r=t.length,i=0;i<r;i++)t[i]<e&&(e=t[i]),t[i]>n&&(n=t[i]);return{min:e,max:n}},e.arithmeticMean=function(t){for(var e=0,n=t.length,r=0;r<n;r++)e+=t[r];return e/n},e.mean=e.arithmeticMean,e.geometricMean=function(t){for(var e=1,n=t.length,r=0;r<n;r++)e*=t[r];return c(e,1/n)},e.logMean=function(t){for(var e=0,n=t.length,i=0;i<n;i++)e+=r(t[i]);return e/n},e.grandMean=function(t,e){for(var n=0,r=0,i=t.length,o=0;o<i;o++)n+=e[o]*t[o],r+=e[o];return n/r},e.truncatedMean=function(t,e,r){void 0===r&&(r=!1),r||(t=t.slice().sort(n));for(var i=t.length,o=g(i*e),a=0,s=o;s<i-o;s++)a+=t[s];return a/(i-2*o)},e.harmonicMean=function(t){for(var e=0,n=t.length,r=0;r<n;r++){if(0===t[r])throw new RangeError("value at index "+r+"is zero");e+=1/t[r]}return n/e},e.contraHarmonicMean=function(t){for(var e=0,n=0,r=t.length,i=0;i<r;i++)e+=t[i]*t[i],n+=t[i];if(0>n)throw new RangeError("sum of values is negative");return e/n},e.median=function(t,e){void 0===e&&(e=!1),e||(t=t.slice().sort(n));var r=t.length,i=g(r/2);return 0==r%2?.5*(t[i-1]+t[i]):t[i]},e.variance=function(t,n){void 0===n&&(n=!0);for(var r,i=e.mean(t),o=0,a=t.length,s=0;s<a;s++)o+=(r=t[s]-i)*r;return n?o/(a-1):o/a},e.standardDeviation=function(t,n){return R(e.variance(t,n))},e.standardError=function(t){return e.standardDeviation(t)/R(t.length)},e.quartiles=function(t,r){"undefined"==typeof r&&(r=!1),r||(t=t.slice()).sort(n);var i=t.length/4;return{q1:t[s(i)-1],q2:e.median(t,!0),q3:t[s(3*i)-1]}},e.pooledStandardDeviation=function(t,n){return R(e.pooledVariance(t,n))},e.pooledVariance=function(t,n){"undefined"==typeof n&&(n=!0);for(var r=0,i=0,o=t.length,a=0;a<o;a++){var s=t[a],u=e.variance(s);r+=(s.length-1)*u,i+=n?s.length-1:s.length}return r/i},e.mode=function(t){var e,n=t.length,r=Array(n);for(e=0;e<n;e++)r[e]=0;var i=Array(n),o=0;for(e=0;e<n;e++){var a=i.indexOf(t[e]);0<=a?r[a]++:(i[o]=t[e],r[o]=1,o++)}var s=0,u=0;for(e=0;e<o;e++)r[e]>s&&(s=r[e],u=e);return i[u]},e.covariance=function(t,n,r){"undefined"==typeof r&&(r=!0);var i=e.mean(t),o=e.mean(n);if(t.length!==n.length)throw"Vectors do not have the same dimensions";for(var a=0,s=t.length,u=0;u<s;u++)a+=(t[u]-i)*(n[u]-o);return r?a/(s-1):a/s},e.skewness=function(t,n){"undefined"==typeof n&&(n=!0);for(var r,i=e.mean(t),o=0,a=0,s=t.length,u=0;u<s;u++)o+=(r=t[u]-i)*r,a+=r*r*r;var l=a/s/c(o/s,1.5);return n?R(s*(s-1))/(s-2)*l:l},e.kurtosis=function(t,n){"undefined"==typeof n&&(n=!0);for(var r,i=e.mean(t),o=t.length,a=0,s=0,u=0;u<o;u++)a+=(r=t[u]-i)*r,s+=r*r*r*r;var c=a/o,l=s/o;if(n){var h=a/(o-1);return o*(o+1)/((o-1)*(o-2)*(o-3))*(s/(h*h))-(o-1)*(o-1)/((o-2)*(o-3))*3}return l/(c*c)-3},e.entropy=function(t,e){"undefined"==typeof e&&(e=0);for(var n=0,i=t.length,o=0;o<i;o++)n+=t[o]*r(t[o]+e);return-n},e.weightedMean=function(t,e){for(var n=0,r=t.length,i=0;i<r;i++)n+=t[i]*e[i];return n},e.weightedStandardDeviation=function(t,n){return R(e.weightedVariance(t,n))},e.weightedVariance=function(t,n){for(var r=e.weightedMean(t,n),i=0,o=t.length,a=0,s=0,u=0;u<o;u++){var c=t[u]-r,l=n[u];i+=l*(c*c),s+=l,a+=l*l}return i*(s/(s*s-a))},e.center=function(t,n){"undefined"==typeof n&&(n=!1);var r=t;n||(r=t.slice());for(var i=e.mean(r),o=r.length,a=0;a<o;a++)r[a]-=i},e.standardize=function(t,n,r){"undefined"==typeof n&&(n=e.standardDeviation(t)),"undefined"==typeof r&&(r=!1);for(var i=t.length,o=r?t:Array(i),a=0;a<i;a++)o[a]=t[a]/n;return o},e.cumulativeSum=function(t){var e=t.length,n=Array(e);n[0]=t[0];for(var r=1;r<e;r++)n[r]=n[r-1]+t[r];return n}},function(e,t,i){"use strict";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal")}function n(t,e){return t-e}function x(t,e){for(var n in e)t=t.replace(new RegExp("%"+n+"%","g"),e[n]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("Data length does not match given dimensions");for(var r=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n[i*e+o]);return r}static rowVector(t){for(var e=new this(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){for(var e=new this(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,n){void 0===n&&(n=Math.random);for(var r=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n());return r}static randInt(t,e,n,r){void 0===n&&(n=1e3),void 0===r&&(r=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var a,s=0;s<e;s++)a=g(r()*n),i.set(o,s,a);return i}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=v(t,e),i=this.zeros(t,e),o=0;o<r;o++)i.set(o,o,n);return i}static diag(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var i=v(r,e,n),o=this.zeros(e,n),a=0;a<i;a++)o.set(a,a,t[a]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,v(t.get(o,a),e.get(o,a)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,M(t.get(o,a),e.get(o,a)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=this.rows,n=this.columns,r=0;r<e;r++)for(var i=0;i<n;i++)t.call(this,r,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t[e*this.columns+n]=this.get(e,n);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var n=0;n<this.columns;n++)t[e][n]=this.get(e,n)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t,e){t=t||1,e=e||1;for(var n=new this.constructor[Symbol.species](this.rows*t,this.columns*e),r=0;r<t;r++)for(var i=0;i<e;i++)n.setSubMatrix(this,this.rows*r,this.columns*i);return n}fill(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),n=0;n<this.columns;n++)e[n]=this.get(t,n);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var n,r=0;r<this.columns;r++)n=this.get(t,r),this.set(t,r,this.get(e,r)),this.set(e,r,n);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),n=0;n<this.rows;n++)e[n]=this.get(n,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var n,r=0;r<this.rows;r++)n=this.get(r,t),this.set(r,t,this.get(r,e)),this.set(r,e,n);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){for(var t=v(this.rows,this.columns),e=Array(t),n=0;n<t;n++)e[n]=this.get(n,n);return e}sum(t){return"row"===t?l.sumByRow(this):"column"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t*=this.get(e,n);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var e=this.rows,n=this.columns,r=t.columns,i=new this.constructor[Symbol.species](e,r),o=Array(n),a=0;a<r;a++){for(var s=0;s<n;s++)o[s]=t.get(s,a);for(var u,c=0;c<e;c++){for(u=0,s=0;s<n;s++)u+=this.get(c,s)*o[s];i.set(c,a,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(n+u)*(r+c),h=(a+u)*r,f=n*(o-c),d=u*(s-r),p=(n+i)*c;return e.set(0,0,l+d-p+(i-u)*(s+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(a-n)*(r+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(n-o)*(-f+m),b=(-n+o+a)*(h-f+m),_=(o+a)*(-h+f),M=n*h,S=(-n+u+c)*(h-d+g),E=(-n+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),C=(i-l)*(m-y),k=i*v,R=(c+l)*(-v+y),O=(-i+a+s)*(g+v-w),P=(i-s)*(g-w),D=(a+s)*(-v+w);return e.set(0,0,M+k+r*p),e.set(0,1,(n+r+i-o-a-c-l)*m+b+_+M+A+k+R),e.set(0,2,M+S+T+(n+r+i-a-s-u-c)*g+k+O+D),e.set(1,0,x+a*(-h+f+p-m-g-v+w)+b+M+k+O+P),e.set(1,1,x+b+_+M+s*y),e.set(1,2,k+O+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+C+k),e.set(2,1,A+C+k+R+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,n){return t.rows===e&&t.columns===n?t:w.zeros(e,n).setSubMatrix(t,0,0)}var n=this.clone(),r=n.rows,i=n.columns,o=t.rows,a=t.columns;i!==o&&console.warn(`Multiplying ${r} x ${i} and ${o} x ${a} matrix: dimensions do not match.`);var s=M(r,o),u=M(i,a);return function t(n,r,i,o){if(512>=i||512>=o)return n.mmul(r);1==i%2&&1==o%2?(n=e(n,i+1,o+1),r=e(r,i+1,o+1)):1==i%2?(n=e(n,i+1,o),r=e(r,i+1,o)):1==o%2&&(n=e(n,i,o+1),r=e(r,i,o+1));var a=parseInt(n.rows/2),s=parseInt(n.columns/2),u=n.subMatrix(0,a-1,0,s-1),c=r.subMatrix(0,a-1,0,s-1),l=n.subMatrix(0,a-1,s,n.columns-1),h=r.subMatrix(0,a-1,s,r.columns-1),f=n.subMatrix(a,n.rows-1,0,s-1),d=r.subMatrix(a,r.rows-1,0,s-1),p=n.subMatrix(a,n.rows-1,s,n.columns-1),m=r.subMatrix(a,r.rows-1,s,r.columns-1),g=t(w.add(u,p),w.add(c,m),a,s),v=t(w.add(f,p),c,a,s),y=t(u,w.sub(h,m),a,s),x=t(p,w.sub(d,c),a,s),b=t(w.add(u,l),m,a,s),_=t(w.sub(f,u),w.add(c,h),a,s),M=t(w.sub(l,p),w.add(d,m),a,s),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var C=w.zeros(2*S.rows,2*S.columns);return(C=(C=(C=(C=C.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(n=e(n,s,u),t=e(t,s,u),s,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)n=s.scale(this.getRow(i),{min:t,max:e}),r.setRow(i,n);return r}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)n=s.scale(this.getColumn(i),{min:t,max:e}),r.setColumn(i,n);return r}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*r,n*i),a=0;a<e;a++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var c=0;c<i;c++)o[r*a+u][i*s+c]=this.get(a,s)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){l.checkRange(this,t,e,n,r);for(var i=new this.constructor[Symbol.species](e-t+1,r-n+1),o=t;o<=e;o++)for(var a=n;a<=r;a++)i[o-t][a-n]=this.get(o,a);return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||0>e||e>=this.columns||0>n||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](t.length,n-e+1),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError("Row index out of range: "+t[i]);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||0>e||e>=this.rows||0>n||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](n-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError("Column index out of range: "+t[i]);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var i=0;i<t.columns;i++)this[e+r][n+i]=t.get(r,i);return this}selection(t,e){for(var n,r=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<r.row.length;o++){n=r.row[o];for(var a=0;a<r.column.length;a++)i[o][a]=this.get(n,r.column[a])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,n,r){return new d(this,t,e,n,r)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,n,r,i,a;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),n=this.get(1,0),t*this.get(1,1)-e*n):3===this.columns?(r=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),a=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),n=this.get(0,2),t*r.det()-e*i.det()+n*a.det()):new o(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass="Matrix",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",y="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",b="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",R="\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",I="\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",S="\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",C="\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",V="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",D="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",z="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",_="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",P=V,A=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+"S",op:N[0]})),B=eval(x(b,{name:N[1]+"M",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+"S"]=E,w.prototype[N[F]+"M"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){W.push(["Math."+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[["Math.pow",1,"pow"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae="arg0";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+"M"]=ge,w.prototype[re[F]+"S"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(74),r=i(75),s=i(1),l=i(25),c=i(212),m=i(213),d=i(214),h=i(215),p=i(216),k=i(217),j=i(218)},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,o,a,s,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),n=0;n<g;n++){for(e=0;e<m;e++)f[e]=p[e][n];for(e=0;e<m;e++){for(h=p[e],d=v(e,n),s=0,o=0;o<d;o++)s+=h[o]*f[o];h[n]=f[e]-=s}for(a=n,e=n+1;e<m;e++)u(f[e])>u(f[a])&&(a=e);if(a!==n){for(o=0;o<g;o++)c=p[a][o],p[a][o]=p[n][o],p[n][o]=c;l=y[a],y[a]=y[n],y[n]=l,w=-w}if(n<m&&0!==p[n][n])for(e=n+1;e<m;e++)p[e][n]/=p[n][n]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=n(6);r.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,n=0;n<e;n++)if(0===t[n][n])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,n=t.columns,r=0;r<n;r++)e*=t[r][r];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o>a?t[o][a]:o===a?1:0;return r},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o<=a?t[o][a]:0;return r},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,r,o,a=t.columns,s=t.subMatrixRow(this.pivotVector,0,a-1),u=e.columns;for(o=0;o<u;o++)for(n=o+1;n<u;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o];for(o=u-1;0<=o;o--){for(r=0;r<a;r++)s[o][r]/=e[o][o];for(n=0;n<o;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o]}return s}},t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var n=t.rows,o=t.columns,c=v(n,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(n<o)if(!0===e.autoTranspose){n=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,C,k,O,P,D,L,N,I,F,z,U=Array(v(n+1,o)),j=s(n,c,0),V=s(o,o,0),B=Array(o),H=Array(n),G=v(n-1,o),q=M(0,v(o-2,n));for(y=0,T=M(G,q);y<T;y++){if(y<G){for(U[y]=0,m=y;m<n;m++)U[y]=a(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<n;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<n;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<n;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<n;m++)j[m][y]=f[m][y];if(y<q){for(B[y]=0,m=y+1;m<o;m++)B[y]=a(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<n&&0!==B[y]){for(m=y+1;m<n;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<n;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<n;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,n+1),G<o&&(U[G]=f[G][G]),n<w&&(U[w-1]=0),q+1<w&&(B[q]=f[q][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<n;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<n;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<n;m++)j[m][g]+=x*j[m][y]}for(m=y;m<n;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<n;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<q&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var W=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(C=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/C,L=B[y]/C,I=(k=U[w-1]/C)*(P=B[w-2]/C)*(k*P),F=0,(0!=(N=(((O=U[w-2]/C)+k)*(O-k)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+k)*(D-k)+F,z=D*L,g=y;g<w-1;g++){if(S=_/(x=a(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=a(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<n-1)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=W;m++)V[m][y]=-V[m][y];for(;y<W&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<n-1)for(m=0;m<n;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=n,this.n=o,this.s=U,this.U=j,this.V=V}var i=n(6),o=n(39),a=o.hypotenuse,s=o.getFilled2DArray;r.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,n=this.s,r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,n=this.threshold,r=this.s.length,o=i.Matrix.zeros(r,r);for(e=0;e<r;e++)o[e][e]=u(this.s[e])<=n?0:1/this.s[e];var a,s,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(a=0;a<p;a++){for(c=0,s=0;s<r;s++)c+=f[e][s]*l[a][s];m[e][a]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,n=this.V,r=this.threshold,o=n.length,a=n[0].length,s=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<a;e++)s[t][e]=u(this.s[e])>r?n[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=s[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=r},function(e,t,i){"use strict";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal")}function n(t,e){return t-e}function x(t,e){for(var n in e)t=t.replace(new RegExp("%"+n+"%","g"),e[n]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("Data length does not match given dimensions");for(var r=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n[i*e+o]);return r}static rowVector(t){for(var e=new this(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){for(var e=new this(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,n){void 0===n&&(n=Math.random);for(var r=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n());return r}static randInt(t,e,n,r){void 0===n&&(n=1e3),void 0===r&&(r=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var a,s=0;s<e;s++)a=g(r()*n),i.set(o,s,a);return i}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=v(t,e),i=this.zeros(t,e),o=0;o<r;o++)i.set(o,o,n);return i}static diag(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var i=v(r,e,n),o=this.zeros(e,n),a=0;a<i;a++)o.set(a,a,t[a]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,v(t.get(o,a),e.get(o,a)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,M(t.get(o,a),e.get(o,a)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=this.rows,n=this.columns,r=0;r<e;r++)for(var i=0;i<n;i++)t.call(this,r,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t[e*this.columns+n]=this.get(e,n);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var n=0;n<this.columns;n++)t[e][n]=this.get(e,n)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t,e){t=t||1,e=e||1;for(var n=new this.constructor[Symbol.species](this.rows*t,this.columns*e),r=0;r<t;r++)for(var i=0;i<e;i++)n.setSubMatrix(this,this.rows*r,this.columns*i);return n}fill(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),n=0;n<this.columns;n++)e[n]=this.get(t,n);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var n,r=0;r<this.columns;r++)n=this.get(t,r),this.set(t,r,this.get(e,r)),this.set(e,r,n);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),n=0;n<this.rows;n++)e[n]=this.get(n,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var n,r=0;r<this.rows;r++)n=this.get(r,t),this.set(r,t,this.get(r,e)),this.set(r,e,n);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){for(var t=v(this.rows,this.columns),e=Array(t),n=0;n<t;n++)e[n]=this.get(n,n);return e}sum(t){return"row"===t?l.sumByRow(this):"column"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t*=this.get(e,n);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var e=this.rows,n=this.columns,r=t.columns,i=new this.constructor[Symbol.species](e,r),o=Array(n),a=0;a<r;a++){for(var s=0;s<n;s++)o[s]=t.get(s,a);for(var u,c=0;c<e;c++){for(u=0,s=0;s<n;s++)u+=this.get(c,s)*o[s];i.set(c,a,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(n+u)*(r+c),h=(a+u)*r,f=n*(o-c),d=u*(s-r),p=(n+i)*c;return e.set(0,0,l+d-p+(i-u)*(s+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(a-n)*(r+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(n-o)*(-f+m),b=(-n+o+a)*(h-f+m),_=(o+a)*(-h+f),M=n*h,S=(-n+u+c)*(h-d+g),E=(-n+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),C=(i-l)*(m-y),k=i*v,R=(c+l)*(-v+y),O=(-i+a+s)*(g+v-w),P=(i-s)*(g-w),D=(a+s)*(-v+w);return e.set(0,0,M+k+r*p),e.set(0,1,(n+r+i-o-a-c-l)*m+b+_+M+A+k+R),e.set(0,2,M+S+T+(n+r+i-a-s-u-c)*g+k+O+D),e.set(1,0,x+a*(-h+f+p-m-g-v+w)+b+M+k+O+P),e.set(1,1,x+b+_+M+s*y),e.set(1,2,k+O+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+C+k),e.set(2,1,A+C+k+R+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,n){return t.rows===e&&t.columns===n?t:w.zeros(e,n).setSubMatrix(t,0,0)}var n=this.clone(),r=n.rows,i=n.columns,o=t.rows,a=t.columns;i!==o&&console.warn(`Multiplying ${r} x ${i} and ${o} x ${a} matrix: dimensions do not match.`);var s=M(r,o),u=M(i,a);return function t(n,r,i,o){if(512>=i||512>=o)return n.mmul(r);1==i%2&&1==o%2?(n=e(n,i+1,o+1),r=e(r,i+1,o+1)):1==i%2?(n=e(n,i+1,o),r=e(r,i+1,o)):1==o%2&&(n=e(n,i,o+1),r=e(r,i,o+1));var a=parseInt(n.rows/2),s=parseInt(n.columns/2),u=n.subMatrix(0,a-1,0,s-1),c=r.subMatrix(0,a-1,0,s-1),l=n.subMatrix(0,a-1,s,n.columns-1),h=r.subMatrix(0,a-1,s,r.columns-1),f=n.subMatrix(a,n.rows-1,0,s-1),d=r.subMatrix(a,r.rows-1,0,s-1),p=n.subMatrix(a,n.rows-1,s,n.columns-1),m=r.subMatrix(a,r.rows-1,s,r.columns-1),g=t(w.add(u,p),w.add(c,m),a,s),v=t(w.add(f,p),c,a,s),y=t(u,w.sub(h,m),a,s),x=t(p,w.sub(d,c),a,s),b=t(w.add(u,l),m,a,s),_=t(w.sub(f,u),w.add(c,h),a,s),M=t(w.sub(l,p),w.add(d,m),a,s),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var C=w.zeros(2*S.rows,2*S.columns);return(C=(C=(C=(C=C.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(n=e(n,s,u),t=e(t,s,u),s,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)n=s.scale(this.getRow(i),{min:t,max:e}),r.setRow(i,n);return r}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)n=s.scale(this.getColumn(i),{min:t,max:e}),r.setColumn(i,n);return r}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*r,n*i),a=0;a<e;a++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var c=0;c<i;c++)o[r*a+u][i*s+c]=this.get(a,s)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){l.checkRange(this,t,e,n,r);for(var i=new this.constructor[Symbol.species](e-t+1,r-n+1),o=t;o<=e;o++)for(var a=n;a<=r;a++)i[o-t][a-n]=this.get(o,a);return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||0>e||e>=this.columns||0>n||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](t.length,n-e+1),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError("Row index out of range: "+t[i]);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||0>e||e>=this.rows||0>n||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](n-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError("Column index out of range: "+t[i]);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var i=0;i<t.columns;i++)this[e+r][n+i]=t.get(r,i);return this}selection(t,e){for(var n,r=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<r.row.length;o++){n=r.row[o];for(var a=0;a<r.column.length;a++)i[o][a]=this.get(n,r.column[a])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,n,r){return new d(this,t,e,n,r)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,n,r,i,a;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),n=this.get(1,0),t*this.get(1,1)-e*n):3===this.columns?(r=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),a=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),n=this.get(0,2),t*r.det()-e*i.det()+n*a.det()):new o(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass="Matrix",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",y="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",b="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",R="\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",I="\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",S="\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",C="\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",V="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",D="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",z="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",_="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",P=V,A=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+"S",op:N[0]})),B=eval(x(b,{name:N[1]+"M",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+"S"]=E,w.prototype[N[F]+"M"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){W.push(["Math."+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[["Math.pow",1,"pow"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae="arg0";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+"M"]=ge,w.prototype[re[F]+"S"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(77),r=i(78),s=i(1),l=i(26),c=i(229),m=i(230),d=i(231),h=i(232),p=i(233),k=i(234),j=i(235)},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,o,a,s,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),n=0;n<g;n++){for(e=0;e<m;e++)f[e]=p[e][n];for(e=0;e<m;e++){for(h=p[e],d=v(e,n),s=0,o=0;o<d;o++)s+=h[o]*f[o];h[n]=f[e]-=s}for(a=n,e=n+1;e<m;e++)u(f[e])>u(f[a])&&(a=e);if(a!==n){for(o=0;o<g;o++)c=p[a][o],p[a][o]=p[n][o],p[n][o]=c;l=y[a],y[a]=y[n],y[n]=l,w=-w}if(n<m&&0!==p[n][n])for(e=n+1;e<m;e++)p[e][n]/=p[n][n]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=n(7);r.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,n=0;n<e;n++)if(0===t[n][n])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,n=t.columns,r=0;r<n;r++)e*=t[r][r];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o>a?t[o][a]:o===a?1:0;return r},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o<=a?t[o][a]:0;return r},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,r,o,a=t.columns,s=t.subMatrixRow(this.pivotVector,0,a-1),u=e.columns;for(o=0;o<u;o++)for(n=o+1;n<u;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o];for(o=u-1;0<=o;o--){for(r=0;r<a;r++)s[o][r]/=e[o][o];for(n=0;n<o;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o]}return s}},t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var n=t.rows,o=t.columns,c=v(n,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(n<o)if(!0===e.autoTranspose){n=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,C,k,O,P,D,L,N,I,F,z,U=Array(v(n+1,o)),j=s(n,c,0),V=s(o,o,0),B=Array(o),H=Array(n),G=v(n-1,o),q=M(0,v(o-2,n));for(y=0,T=M(G,q);y<T;y++){if(y<G){for(U[y]=0,m=y;m<n;m++)U[y]=a(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<n;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<n;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<n;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<n;m++)j[m][y]=f[m][y];if(y<q){for(B[y]=0,m=y+1;m<o;m++)B[y]=a(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<n&&0!==B[y]){for(m=y+1;m<n;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<n;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<n;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,n+1),G<o&&(U[G]=f[G][G]),n<w&&(U[w-1]=0),q+1<w&&(B[q]=f[q][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<n;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<n;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<n;m++)j[m][g]+=x*j[m][y]}for(m=y;m<n;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<n;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<q&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var W=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(C=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/C,L=B[y]/C,I=(k=U[w-1]/C)*(P=B[w-2]/C)*(k*P),F=0,(0!=(N=(((O=U[w-2]/C)+k)*(O-k)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+k)*(D-k)+F,z=D*L,g=y;g<w-1;g++){if(S=_/(x=a(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=a(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<n-1)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=W;m++)V[m][y]=-V[m][y];for(;y<W&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<n-1)for(m=0;m<n;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=n,this.n=o,this.s=U,this.U=j,this.V=V}var i=n(7),o=n(41),a=o.hypotenuse,s=o.getFilled2DArray;r.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,n=this.s,r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,n=this.threshold,r=this.s.length,o=i.Matrix.zeros(r,r);for(e=0;e<r;e++)o[e][e]=u(this.s[e])<=n?0:1/this.s[e];var a,s,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(a=0;a<p;a++){for(c=0,s=0;s<r;s++)c+=f[e][s]*l[a][s];m[e][a]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,n=this.V,r=this.threshold,o=n.length,a=n[0].length,s=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<a;e++)s[t][e]=u(this.s[e])>r?n[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=s[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=r},function(t,e,n){"use strict";var r=n(40);t.exports={transpose:function(t){return"number"==typeof t?t:t.clone().transpose()},add:function(t,e){return"number"==typeof t&&"number"==typeof e?t+e:"number"==typeof t?this.add(e,t):t.clone().add(e)},subtract:function(t,e){return"number"==typeof t&&"number"==typeof e?t-e:"number"==typeof t?this.subtract(e,t):t.clone().sub(e)},multiply:function(t,e){if("number"==typeof t&&"number"==typeof e)return t*e;if("number"==typeof t)return this.multiply(e,t);var n=t.clone();return"number"==typeof e?n.mul(e):n=n.mmul(e),1==n.rows&&1==n.columns?n[0][0]:n},dotMultiply:function(t,e){return t.clone().mul(e)},dotDivide:function(t,e){return t.clone().div(e)},diag:function(t){var e,n,i=null,o=t.rows,a=t.columns;if("undefined"==typeof a&&"object"==typeof t)if(t[0]&&t[0].length)for(n=v(o=t.length,a=t[0].length),i=r.zeros(a,a),e=0;e<a;e++)i[e][e]=t[e][e];else for(i=r.zeros(a=t.length,a),e=0;e<a;e++)i[e][e]=t[e];if(1==o)for(i=r.zeros(a,a),e=0;e<a;e++)i[e][e]=t[0][e];else if(0<o&&0<a)for(n=v(o,a),i=Array(n),e=0;e<n;e++)i[e]=t[e][e];return i},min:function(t,e){if("number"==typeof t&&"number"==typeof e)return v(t,e);for(var n=t.rows,i=t.columns,o=new r(n,i),a=0;a<n;a++)for(var s=0;s<i;s++)o[a][s]=t[a][s]<e[a][s]?t[a][s]:e[a][s];return o},max:function(t,e){if("number"==typeof t&&"number"==typeof e)return M(t,e);for(var n=t.rows,i=t.columns,o=new r(n,i),a=0;a<n;a++)for(var s=0;s<i;s++)o[a][s]=t[a][s]>e[a][s]?t[a][s]:e[a][s];return o},solve:function(t,e){return t.solve(e)},inv:function(t){return"number"==typeof t?1/t:t.inverse()},sqrt:function(t){if("number"==typeof t)return R(t);for(var e=t.rows,n=t.columns,i=new r(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)i[o][a]=R(t[o][a]);return i},exp:function(t){if("number"==typeof t)return R(t);for(var e=t.rows,n=t.columns,i=new r(e,n),a=0;a<e;a++)for(var s=0;s<n;s++)i[a][s]=o(t[a][s]);return i},dotPow:function(t,e){if("number"==typeof t)return c(t,e);for(var n=t.rows,i=t.columns,o=new r(n,i),a=0;a<n;a++)for(var s=0;s<i;s++)o[a][s]=c(t[a][s],e);return o},abs:function(t){if("number"==typeof t)return u(t);for(var e=t.rows,n=t.columns,i=new r(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)i[o][a]=u(t[o][a]);return i},matrix:function(t,e){return new r(t,e)},ones:function(t,e){return r.ones(t,e)},zeros:function(t,e){return r.zeros(t,e)},random:function(t,e){return r.rand(t,e)},eye:function(t,e){return r.eye(t,e)}}},function(e,t,i){"use strict";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal")}function n(t,e){return t-e}function x(t,e){for(var n in e)t=t.replace(new RegExp("%"+n+"%","g"),e[n]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("Data length does not match given dimensions");for(var r=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n[i*e+o]);return r}static rowVector(t){for(var e=new this(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){for(var e=new this(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,n){void 0===n&&(n=Math.random);for(var r=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n());return r}static randInt(t,e,n,r){void 0===n&&(n=1e3),void 0===r&&(r=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var a,s=0;s<e;s++)a=g(r()*n),i.set(o,s,a);return i}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=v(t,e),i=this.zeros(t,e),o=0;o<r;o++)i.set(o,o,n);return i}static diag(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var i=v(r,e,n),o=this.zeros(e,n),a=0;a<i;a++)o.set(a,a,t[a]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,v(t.get(o,a),e.get(o,a)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,M(t.get(o,a),e.get(o,a)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=this.rows,n=this.columns,r=0;r<e;r++)for(var i=0;i<n;i++)t.call(this,r,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t[e*this.columns+n]=this.get(e,n);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var n=0;n<this.columns;n++)t[e][n]=this.get(e,n)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t,e){t=t||1,e=e||1;for(var n=new this.constructor[Symbol.species](this.rows*t,this.columns*e),r=0;r<t;r++)for(var i=0;i<e;i++)n.setSubMatrix(this,this.rows*r,this.columns*i);return n}fill(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),n=0;n<this.columns;n++)e[n]=this.get(t,n);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var n,r=0;r<this.columns;r++)n=this.get(t,r),this.set(t,r,this.get(e,r)),this.set(e,r,n);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),n=0;n<this.rows;n++)e[n]=this.get(n,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var n,r=0;r<this.rows;r++)n=this.get(r,t),this.set(r,t,this.get(r,e)),this.set(r,e,n);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){for(var t=v(this.rows,this.columns),e=Array(t),n=0;n<t;n++)e[n]=this.get(n,n);return e}sum(t){return"row"===t?l.sumByRow(this):"column"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t*=this.get(e,n);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var e=this.rows,n=this.columns,r=t.columns,i=new this.constructor[Symbol.species](e,r),o=Array(n),a=0;a<r;a++){for(var s=0;s<n;s++)o[s]=t.get(s,a);for(var u,c=0;c<e;c++){for(u=0,s=0;s<n;s++)u+=this.get(c,s)*o[s];i.set(c,a,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(n+u)*(r+c),h=(a+u)*r,f=n*(o-c),d=u*(s-r),p=(n+i)*c;return e.set(0,0,l+d-p+(i-u)*(s+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(a-n)*(r+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(n-o)*(-f+m),b=(-n+o+a)*(h-f+m),_=(o+a)*(-h+f),M=n*h,S=(-n+u+c)*(h-d+g),E=(-n+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),C=(i-l)*(m-y),k=i*v,R=(c+l)*(-v+y),O=(-i+a+s)*(g+v-w),P=(i-s)*(g-w),D=(a+s)*(-v+w);return e.set(0,0,M+k+r*p),e.set(0,1,(n+r+i-o-a-c-l)*m+b+_+M+A+k+R),e.set(0,2,M+S+T+(n+r+i-a-s-u-c)*g+k+O+D),e.set(1,0,x+a*(-h+f+p-m-g-v+w)+b+M+k+O+P),e.set(1,1,x+b+_+M+s*y),e.set(1,2,k+O+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+C+k),e.set(2,1,A+C+k+R+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,n){return t.rows===e&&t.columns===n?t:w.zeros(e,n).setSubMatrix(t,0,0)}var n=this.clone(),r=n.rows,i=n.columns,o=t.rows,a=t.columns;i!==o&&console.warn(`Multiplying ${r} x ${i} and ${o} x ${a} matrix: dimensions do not match.`);var s=M(r,o),u=M(i,a);return function t(n,r,i,o){if(512>=i||512>=o)return n.mmul(r);1==i%2&&1==o%2?(n=e(n,i+1,o+1),r=e(r,i+1,o+1)):1==i%2?(n=e(n,i+1,o),r=e(r,i+1,o)):1==o%2&&(n=e(n,i,o+1),r=e(r,i,o+1));var a=parseInt(n.rows/2),s=parseInt(n.columns/2),u=n.subMatrix(0,a-1,0,s-1),c=r.subMatrix(0,a-1,0,s-1),l=n.subMatrix(0,a-1,s,n.columns-1),h=r.subMatrix(0,a-1,s,r.columns-1),f=n.subMatrix(a,n.rows-1,0,s-1),d=r.subMatrix(a,r.rows-1,0,s-1),p=n.subMatrix(a,n.rows-1,s,n.columns-1),m=r.subMatrix(a,r.rows-1,s,r.columns-1),g=t(w.add(u,p),w.add(c,m),a,s),v=t(w.add(f,p),c,a,s),y=t(u,w.sub(h,m),a,s),x=t(p,w.sub(d,c),a,s),b=t(w.add(u,l),m,a,s),_=t(w.sub(f,u),w.add(c,h),a,s),M=t(w.sub(l,p),w.add(d,m),a,s),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var C=w.zeros(2*S.rows,2*S.columns);return(C=(C=(C=(C=C.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(n=e(n,s,u),t=e(t,s,u),s,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)n=s.scale(this.getRow(i),{min:t,max:e}),r.setRow(i,n);return r}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)n=s.scale(this.getColumn(i),{min:t,max:e}),r.setColumn(i,n);return r}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*r,n*i),a=0;a<e;a++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var c=0;c<i;c++)o[r*a+u][i*s+c]=this.get(a,s)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){l.checkRange(this,t,e,n,r);for(var i=new this.constructor[Symbol.species](e-t+1,r-n+1),o=t;o<=e;o++)for(var a=n;a<=r;a++)i[o-t][a-n]=this.get(o,a);return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||0>e||e>=this.columns||0>n||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](t.length,n-e+1),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError("Row index out of range: "+t[i]);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||0>e||e>=this.rows||0>n||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](n-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError("Column index out of range: "+t[i]);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var i=0;i<t.columns;i++)this[e+r][n+i]=t.get(r,i);return this}selection(t,e){for(var n,r=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<r.row.length;o++){n=r.row[o];for(var a=0;a<r.column.length;a++)i[o][a]=this.get(n,r.column[a])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,n,r){return new d(this,t,e,n,r)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,n,r,i,a;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),n=this.get(1,0),t*this.get(1,1)-e*n):3===this.columns?(r=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),a=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),n=this.get(0,2),t*r.det()-e*i.det()+n*a.det()):new o(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass="Matrix",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",y="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",b="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",R="\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",I="\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",S="\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",C="\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",V="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",D="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",z="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",_="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",P=V,A=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+"S",op:N[0]})),B=eval(x(b,{name:N[1]+"M",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+"S"]=E,w.prototype[N[F]+"M"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){W.push(["Math."+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[["Math.pow",1,"pow"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae="arg0";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+"M"]=ge,w.prototype[re[F]+"S"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(81),r=i(82),s=i(1),l=i(27),c=i(242),m=i(243),d=i(244),h=i(245),p=i(246),k=i(247),j=i(248)},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,o,a,s,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),n=0;n<g;n++){for(e=0;e<m;e++)f[e]=p[e][n];for(e=0;e<m;e++){for(h=p[e],d=v(e,n),s=0,o=0;o<d;o++)s+=h[o]*f[o];h[n]=f[e]-=s}for(a=n,e=n+1;e<m;e++)u(f[e])>u(f[a])&&(a=e);if(a!==n){for(o=0;o<g;o++)c=p[a][o],p[a][o]=p[n][o],p[n][o]=c;l=y[a],y[a]=y[n],y[n]=l,w=-w}if(n<m&&0!==p[n][n])for(e=n+1;e<m;e++)p[e][n]/=p[n][n]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=n(8);r.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,n=0;n<e;n++)if(0===t[n][n])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,n=t.columns,r=0;r<n;r++)e*=t[r][r];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o>a?t[o][a]:o===a?1:0;return r},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o<=a?t[o][a]:0;return r},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,r,o,a=t.columns,s=t.subMatrixRow(this.pivotVector,0,a-1),u=e.columns;for(o=0;o<u;o++)for(n=o+1;n<u;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o];for(o=u-1;0<=o;o--){for(r=0;r<a;r++)s[o][r]/=e[o][o];for(n=0;n<o;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o]}return s}},t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var n=t.rows,o=t.columns,c=v(n,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(n<o)if(!0===e.autoTranspose){n=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,C,k,O,P,D,L,N,I,F,z,U=Array(v(n+1,o)),j=s(n,c,0),V=s(o,o,0),B=Array(o),H=Array(n),G=v(n-1,o),q=M(0,v(o-2,n));for(y=0,T=M(G,q);y<T;y++){if(y<G){for(U[y]=0,m=y;m<n;m++)U[y]=a(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<n;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<n;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<n;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<n;m++)j[m][y]=f[m][y];if(y<q){for(B[y]=0,m=y+1;m<o;m++)B[y]=a(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<n&&0!==B[y]){for(m=y+1;m<n;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<n;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<n;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,n+1),G<o&&(U[G]=f[G][G]),n<w&&(U[w-1]=0),q+1<w&&(B[q]=f[q][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<n;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<n;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<n;m++)j[m][g]+=x*j[m][y]}for(m=y;m<n;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<n;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<q&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var W=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(C=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/C,L=B[y]/C,I=(k=U[w-1]/C)*(P=B[w-2]/C)*(k*P),F=0,(0!=(N=(((O=U[w-2]/C)+k)*(O-k)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+k)*(D-k)+F,z=D*L,g=y;g<w-1;g++){if(S=_/(x=a(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=a(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<n-1)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=W;m++)V[m][y]=-V[m][y];for(;y<W&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<n-1)for(m=0;m<n;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=n,this.n=o,this.s=U,this.U=j,this.V=V}var i=n(8),o=n(42),a=o.hypotenuse,s=o.getFilled2DArray;r.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,n=this.s,r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,n=this.threshold,r=this.s.length,o=i.Matrix.zeros(r,r);for(e=0;e<r;e++)o[e][e]=u(this.s[e])<=n?0:1/this.s[e];var a,s,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(a=0;a<p;a++){for(c=0,s=0;s<r;s++)c+=f[e][s]*l[a][s];m[e][a]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,n=this.V,r=this.threshold,o=n.length,a=n[0].length,s=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<a;e++)s[t][e]=u(this.s[e])>r?n[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=s[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=r},function(e,t,i){"use strict";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal")}function n(t,e){return t-e}function x(t,e){for(var n in e)t=t.replace(new RegExp("%"+n+"%","g"),e[n]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("Data length does not match given dimensions");for(var r=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n[i*e+o]);return r}static rowVector(t){for(var e=new this(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){for(var e=new this(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,n){void 0===n&&(n=Math.random);for(var r=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n());return r}static randInt(t,e,n,r){void 0===n&&(n=1e3),void 0===r&&(r=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var a,s=0;s<e;s++)a=g(r()*n),i.set(o,s,a);return i}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=v(t,e),i=this.zeros(t,e),o=0;o<r;o++)i.set(o,o,n);return i}static diag(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var i=v(r,e,n),o=this.zeros(e,n),a=0;a<i;a++)o.set(a,a,t[a]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,v(t.get(o,a),e.get(o,a)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,M(t.get(o,a),e.get(o,a)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=this.rows,n=this.columns,r=0;r<e;r++)for(var i=0;i<n;i++)t.call(this,r,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t[e*this.columns+n]=this.get(e,n);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var n=0;n<this.columns;n++)t[e][n]=this.get(e,n)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t,e){t=t||1,e=e||1;for(var n=new this.constructor[Symbol.species](this.rows*t,this.columns*e),r=0;r<t;r++)for(var i=0;i<e;i++)n.setSubMatrix(this,this.rows*r,this.columns*i);return n}fill(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),n=0;n<this.columns;n++)e[n]=this.get(t,n);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var n,r=0;r<this.columns;r++)n=this.get(t,r),this.set(t,r,this.get(e,r)),this.set(e,r,n);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),n=0;n<this.rows;n++)e[n]=this.get(n,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var n,r=0;r<this.rows;r++)n=this.get(r,t),this.set(r,t,this.get(r,e)),this.set(r,e,n);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){for(var t=v(this.rows,this.columns),e=Array(t),n=0;n<t;n++)e[n]=this.get(n,n);return e}sum(t){return"row"===t?l.sumByRow(this):"column"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t*=this.get(e,n);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var e=this.rows,n=this.columns,r=t.columns,i=new this.constructor[Symbol.species](e,r),o=Array(n),a=0;a<r;a++){for(var s=0;s<n;s++)o[s]=t.get(s,a);for(var u,c=0;c<e;c++){for(u=0,s=0;s<n;s++)u+=this.get(c,s)*o[s];i.set(c,a,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(n+u)*(r+c),h=(a+u)*r,f=n*(o-c),d=u*(s-r),p=(n+i)*c;return e.set(0,0,l+d-p+(i-u)*(s+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(a-n)*(r+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(n-o)*(-f+m),b=(-n+o+a)*(h-f+m),_=(o+a)*(-h+f),M=n*h,S=(-n+u+c)*(h-d+g),E=(-n+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),C=(i-l)*(m-y),k=i*v,R=(c+l)*(-v+y),O=(-i+a+s)*(g+v-w),P=(i-s)*(g-w),D=(a+s)*(-v+w);return e.set(0,0,M+k+r*p),e.set(0,1,(n+r+i-o-a-c-l)*m+b+_+M+A+k+R),e.set(0,2,M+S+T+(n+r+i-a-s-u-c)*g+k+O+D),e.set(1,0,x+a*(-h+f+p-m-g-v+w)+b+M+k+O+P),e.set(1,1,x+b+_+M+s*y),e.set(1,2,k+O+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+C+k),e.set(2,1,A+C+k+R+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,n){return t.rows===e&&t.columns===n?t:w.zeros(e,n).setSubMatrix(t,0,0)}var n=this.clone(),r=n.rows,i=n.columns,o=t.rows,a=t.columns;i!==o&&console.warn(`Multiplying ${r} x ${i} and ${o} x ${a} matrix: dimensions do not match.`);var s=M(r,o),u=M(i,a);return function t(n,r,i,o){if(512>=i||512>=o)return n.mmul(r);1==i%2&&1==o%2?(n=e(n,i+1,o+1),r=e(r,i+1,o+1)):1==i%2?(n=e(n,i+1,o),r=e(r,i+1,o)):1==o%2&&(n=e(n,i,o+1),r=e(r,i,o+1));var a=parseInt(n.rows/2),s=parseInt(n.columns/2),u=n.subMatrix(0,a-1,0,s-1),c=r.subMatrix(0,a-1,0,s-1),l=n.subMatrix(0,a-1,s,n.columns-1),h=r.subMatrix(0,a-1,s,r.columns-1),f=n.subMatrix(a,n.rows-1,0,s-1),d=r.subMatrix(a,r.rows-1,0,s-1),p=n.subMatrix(a,n.rows-1,s,n.columns-1),m=r.subMatrix(a,r.rows-1,s,r.columns-1),g=t(w.add(u,p),w.add(c,m),a,s),v=t(w.add(f,p),c,a,s),y=t(u,w.sub(h,m),a,s),x=t(p,w.sub(d,c),a,s),b=t(w.add(u,l),m,a,s),_=t(w.sub(f,u),w.add(c,h),a,s),M=t(w.sub(l,p),w.add(d,m),a,s),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var C=w.zeros(2*S.rows,2*S.columns);return(C=(C=(C=(C=C.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(n=e(n,s,u),t=e(t,s,u),s,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)n=s.scale(this.getRow(i),{min:t,max:e}),r.setRow(i,n);return r}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)n=s.scale(this.getColumn(i),{min:t,max:e}),r.setColumn(i,n);return r}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*r,n*i),a=0;a<e;a++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var c=0;c<i;c++)o[r*a+u][i*s+c]=this.get(a,s)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){l.checkRange(this,t,e,n,r);for(var i=new this.constructor[Symbol.species](e-t+1,r-n+1),o=t;o<=e;o++)for(var a=n;a<=r;a++)i[o-t][a-n]=this.get(o,a);return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||0>e||e>=this.columns||0>n||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](t.length,n-e+1),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError("Row index out of range: "+t[i]);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||0>e||e>=this.rows||0>n||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](n-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError("Column index out of range: "+t[i]);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var i=0;i<t.columns;i++)this[e+r][n+i]=t.get(r,i);return this}selection(t,e){for(var n,r=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<r.row.length;o++){n=r.row[o];for(var a=0;a<r.column.length;a++)i[o][a]=this.get(n,r.column[a])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,n,r){return new d(this,t,e,n,r)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,n,r,i,a;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),n=this.get(1,0),t*this.get(1,1)-e*n):3===this.columns?(r=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),a=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),n=this.get(0,2),t*r.det()-e*i.det()+n*a.det()):new o(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass="Matrix",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",y="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",b="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",R="\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",I="\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",S="\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",C="\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",V="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",D="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",z="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",_="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",P=V,A=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+"S",op:N[0]})),B=eval(x(b,{name:N[1]+"M",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+"S"]=E,w.prototype[N[F]+"M"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){W.push(["Math."+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[["Math.pow",1,"pow"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae="arg0";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+"M"]=ge,w.prototype[re[F]+"S"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(84),r=i(85),s=i(1),l=i(28),c=i(258),m=i(259),d=i(260),h=i(261),p=i(262),k=i(263),j=i(264)},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,o,a,s,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),n=0;n<g;n++){for(e=0;e<m;e++)f[e]=p[e][n];for(e=0;e<m;e++){for(h=p[e],d=v(e,n),s=0,o=0;o<d;o++)s+=h[o]*f[o];h[n]=f[e]-=s}for(a=n,e=n+1;e<m;e++)u(f[e])>u(f[a])&&(a=e);if(a!==n){for(o=0;o<g;o++)c=p[a][o],p[a][o]=p[n][o],p[n][o]=c;l=y[a],y[a]=y[n],y[n]=l,w=-w}if(n<m&&0!==p[n][n])for(e=n+1;e<m;e++)p[e][n]/=p[n][n]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=n(9);r.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,n=0;n<e;n++)if(0===t[n][n])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,n=t.columns,r=0;r<n;r++)e*=t[r][r];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o>a?t[o][a]:o===a?1:0;return r},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o<=a?t[o][a]:0;return r},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,r,o,a=t.columns,s=t.subMatrixRow(this.pivotVector,0,a-1),u=e.columns;for(o=0;o<u;o++)for(n=o+1;n<u;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o];for(o=u-1;0<=o;o--){for(r=0;r<a;r++)s[o][r]/=e[o][o];for(n=0;n<o;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o]}return s}},t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var n=t.rows,o=t.columns,c=v(n,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(n<o)if(!0===e.autoTranspose){n=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,C,k,O,P,D,L,N,I,F,z,U=Array(v(n+1,o)),j=s(n,c,0),V=s(o,o,0),B=Array(o),H=Array(n),G=v(n-1,o),q=M(0,v(o-2,n));for(y=0,T=M(G,q);y<T;y++){if(y<G){for(U[y]=0,m=y;m<n;m++)U[y]=a(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<n;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<n;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<n;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<n;m++)j[m][y]=f[m][y];if(y<q){for(B[y]=0,m=y+1;m<o;m++)B[y]=a(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<n&&0!==B[y]){for(m=y+1;m<n;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<n;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<n;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,n+1),G<o&&(U[G]=f[G][G]),n<w&&(U[w-1]=0),q+1<w&&(B[q]=f[q][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<n;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<n;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<n;m++)j[m][g]+=x*j[m][y]}for(m=y;m<n;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<n;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<q&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var W=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(C=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/C,L=B[y]/C,I=(k=U[w-1]/C)*(P=B[w-2]/C)*(k*P),F=0,(0!=(N=(((O=U[w-2]/C)+k)*(O-k)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+k)*(D-k)+F,z=D*L,g=y;g<w-1;g++){if(S=_/(x=a(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=a(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<n-1)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=W;m++)V[m][y]=-V[m][y];for(;y<W&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<n-1)for(m=0;m<n;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=n,this.n=o,this.s=U,this.U=j,this.V=V}var i=n(9),o=n(43),a=o.hypotenuse,s=o.getFilled2DArray;r.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,n=this.s,r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,n=this.threshold,r=this.s.length,o=i.Matrix.zeros(r,r);for(e=0;e<r;e++)o[e][e]=u(this.s[e])<=n?0:1/this.s[e];var a,s,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(a=0;a<p;a++){for(c=0,s=0;s<r;s++)c+=f[e][s]*l[a][s];m[e][a]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,n=this.V,r=this.threshold,o=n.length,a=n[0].length,s=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<a;e++)s[t][e]=u(this.s[e])>r?n[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=s[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=r},function(t){"use strict";class e{constructor(t,e){if(t.length!==t[0].length)throw new Error("Confusion matrix must be square");if(e.length!==t.length)throw new Error("Confusion matrix and labels should have the same length");this.labels=e,this.matrix=t}static fromLabels(t,n,r={}){if(n.length!==t.length)throw new Error("predicted and actual must have the same length");var i;i=r.labels?new Set(r.labels):new Set([...t,...n]),i=Array.from(i),r.sort&&i.sort(r.sort);for(var o=Array.from({length:i.length}),a=0;a<o.length;a++)o[a]=Array(o.length),o[a].fill(0);for(var s=0;s<n.length;s++){var u=i.indexOf(t[s]),c=i.indexOf(n[s]);0<=u&&0<=c&&o[u][c]++}return new e(o,i)}getMatrix(){return this.matrix}getLabels(){return this.labels}getTotalCount(){for(var t=0,e=0;e<this.matrix.length;e++)for(var n=0;n<this.matrix.length;n++)t+=this.matrix[e][n];return t}getTrueCount(){for(var t=0,e=0;e<this.matrix.length;e++)t+=this.matrix[e][e];return t}getFalseCount(){return this.getTotalCount()-this.getTrueCount()}getTruePositiveCount(t){var e=this.getIndex(t);return this.matrix[e][e]}getTrueNegativeCount(t){for(var e=this.getIndex(t),n=0,r=0;r<this.matrix.length;r++)for(var i=0;i<this.matrix.length;i++)r!==e&&i!==e&&(n+=this.matrix[r][i]);return n}getFalsePositiveCount(t){for(var e=this.getIndex(t),n=0,r=0;r<this.matrix.length;r++)r!==e&&(n+=this.matrix[r][e]);return n}getFalseNegativeCount(t){for(var e=this.getIndex(t),n=0,r=0;r<this.matrix.length;r++)r!==e&&(n+=this.matrix[e][r]);return n}getPositiveCount(t){return this.getTruePositiveCount(t)+this.getFalseNegativeCount(t)}getNegativeCount(t){return this.getTrueNegativeCount(t)+this.getFalsePositiveCount(t)}getIndex(t){var e=this.labels.indexOf(t);if(-1===e)throw new Error("The label does not exist");return e}getTruePositiveRate(t){return this.getTruePositiveCount(t)/this.getPositiveCount(t)}getTrueNegativeRate(t){return this.getTrueNegativeCount(t)/this.getNegativeCount(t)}getPositivePredictiveValue(t){var e=this.getTruePositiveCount(t);return e/(e+this.getFalsePositiveCount(t))}getNegativePredictiveValue(t){var e=this.getTrueNegativeCount(t);return e/(e+this.getFalseNegativeCount(t))}getFalseNegativeRate(t){return 1-this.getTruePositiveRate(t)}getFalsePositiveRate(t){return 1-this.getTrueNegativeRate(t)}getFalseDiscoveryRate(t){var e=this.getFalsePositiveCount(t);return e/(e+this.getTruePositiveCount(t))}getFalseOmissionRate(t){var e=this.getFalseNegativeCount(t);return e/(e+this.getTruePositiveCount(t))}getF1Score(t){var e=this.getTruePositiveCount(t);return 2*e/(2*e+this.getFalsePositiveCount(t)+this.getFalseNegativeCount(t))}getMatthewsCorrelationCoefficient(t){var e=this.getTruePositiveCount(t),n=this.getTrueNegativeCount(t),r=this.getFalsePositiveCount(t),i=this.getFalseNegativeCount(t);return(e*n-r*i)/R((e+r)*(e+i)*(n+r)*(n+i))}getInformedness(t){return this.getTruePositiveRate(t)+this.getTrueNegativeRate(t)-1}getMarkedness(t){return this.getPositivePredictiveValue(t)+this.getNegativePredictiveValue(t)-1}getConfusionTable(t){return[[this.getTruePositiveCount(t),this.getFalseNegativeCount(t)],[this.getFalsePositiveCount(t),this.getTrueNegativeCount(t)]]}getAccuracy(){for(var t=0,e=0,n=0;n<this.matrix.length;n++)for(var r=0;r<this.matrix.length;r++)n===r?t+=this.matrix[n][r]:e+=this.matrix[n][r];return t/(t+e)}getCount(t,e){var n=this.getIndex(t),r=this.getIndex(e);return this.matrix[n][r]}get accuracy(){return this.getAccuracy()}get total(){return this.getTotalCount()}}t.exports=e},function(t,e,n){"use strict";function i(t,e){t&&(this.means=e.means,this.calculateProbabilities=e.calculateProbabilities)}function a(t,e,n){for(var r,i=0,a=-1,u=0;u<n.length;++u){r=n[u][0];for(var c=1;c<n[0][1].length+1;++c)r+=s(t[c-1],e[u][c-1],n[u][c][0],n[u][c][1]);(r=o(r))>i&&(i=r,a=u)}return a}function s(t,e,n,i){return r(n*o((t-=e)*t/i))}function u(t,e){for(var n=t.columns,r=0,i=Array(100),o=0;o<e.length;o++)void 0===i[e[o]]&&(i[e[o]]=0,r++),i[e[o]]++;var a=Array(r),s=Array(r);for(o=0;o<r;++o)a[o]=new c(i[o],n),s[o]=0;for(o=0;o<t.rows;++o)a[e[o]].setRow(s[e[o]],t.getRow(o)),s[e[o]]++;return a}var c=n(276),l=n(2);t.exports.NaiveBayes=i,t.exports.separateClasses=u,i.prototype.train=function(t,e){var n=R(2*Math.PI);if((t=c.isMatrix(t)?t.clone():new c(t)).rows!==e.length)throw new RangeError("the size of the training set and the training labels must be the same.");var i=u(t,e),o=Array(i.length);this.means=Array(i.length);for(var a=0;a<i.length;++a){var s=l.matrix.mean(i[a]),h=l.matrix.standardDeviation(i[a],s),f=r(i[a].rows/t.rows);o[a]=Array(s.length+1),o[a][0]=f;for(var d,p=1;p<s.length+1;++p)o[a][p]=[1/(n*(d=h[p-1])),-2*d*d];this.means[a]=s}this.calculateProbabilities=o},i.prototype.predict=function(t){if(t[0].length===this.calculateProbabilities[0].length)throw new RangeError("the dataset must have the same features as the training set");for(var e=Array(t.length),n=0;n<e.length;++n)e[n]=a(t[n],this.means,this.calculateProbabilities);return e},i.prototype.export=function(){return{modelName:"NaiveBayes",means:this.means,calculateProbabilities:this.calculateProbabilities}},i.load=function(t){if("NaiveBayes"!==t.modelName)throw new RangeError("The given model is invalid!");return new i(!0,t)}},function(e,t,i){"use strict";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal")}function n(t,e){return t-e}function x(t,e){for(var n in e)t=t.replace(new RegExp("%"+n+"%","g"),e[n]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("Data length does not match given dimensions");for(var r=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n[i*e+o]);return r}static rowVector(t){for(var e=new this(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){for(var e=new this(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,n){void 0===n&&(n=Math.random);for(var r=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n());return r}static randInt(t,e,n,r){void 0===n&&(n=1e3),void 0===r&&(r=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var a,s=0;s<e;s++)a=g(r()*n),i.set(o,s,a);return i}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=v(t,e),i=this.zeros(t,e),o=0;o<r;o++)i.set(o,o,n);return i}static diag(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var i=v(r,e,n),o=this.zeros(e,n),a=0;a<i;a++)o.set(a,a,t[a]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,v(t.get(o,a),e.get(o,a)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,M(t.get(o,a),e.get(o,a)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=this.rows,n=this.columns,r=0;r<e;r++)for(var i=0;i<n;i++)t.call(this,r,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t[e*this.columns+n]=this.get(e,n);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var n=0;n<this.columns;n++)t[e][n]=this.get(e,n)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t,e){t=t||1,e=e||1;for(var n=new this.constructor[Symbol.species](this.rows*t,this.columns*e),r=0;r<t;r++)for(var i=0;i<e;i++)n.setSubMatrix(this,this.rows*r,this.columns*i);return n}fill(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),n=0;n<this.columns;n++)e[n]=this.get(t,n);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var n,r=0;r<this.columns;r++)n=this.get(t,r),this.set(t,r,this.get(e,r)),this.set(e,r,n);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),n=0;n<this.rows;n++)e[n]=this.get(n,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var n,r=0;r<this.rows;r++)n=this.get(r,t),this.set(r,t,this.get(r,e)),this.set(r,e,n);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){for(var t=v(this.rows,this.columns),e=Array(t),n=0;n<t;n++)e[n]=this.get(n,n);return e}sum(t){return"row"===t?l.sumByRow(this):"column"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t*=this.get(e,n);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var e=this.rows,n=this.columns,r=t.columns,i=new this.constructor[Symbol.species](e,r),o=Array(n),a=0;a<r;a++){for(var s=0;s<n;s++)o[s]=t.get(s,a);for(var u,c=0;c<e;c++){for(u=0,s=0;s<n;s++)u+=this.get(c,s)*o[s];i.set(c,a,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(n+u)*(r+c),h=(a+u)*r,f=n*(o-c),d=u*(s-r),p=(n+i)*c;return e.set(0,0,l+d-p+(i-u)*(s+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(a-n)*(r+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(n-o)*(-f+m),b=(-n+o+a)*(h-f+m),_=(o+a)*(-h+f),M=n*h,S=(-n+u+c)*(h-d+g),E=(-n+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),C=(i-l)*(m-y),k=i*v,R=(c+l)*(-v+y),O=(-i+a+s)*(g+v-w),P=(i-s)*(g-w),D=(a+s)*(-v+w);return e.set(0,0,M+k+r*p),e.set(0,1,(n+r+i-o-a-c-l)*m+b+_+M+A+k+R),e.set(0,2,M+S+T+(n+r+i-a-s-u-c)*g+k+O+D),e.set(1,0,x+a*(-h+f+p-m-g-v+w)+b+M+k+O+P),e.set(1,1,x+b+_+M+s*y),e.set(1,2,k+O+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+C+k),e.set(2,1,A+C+k+R+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,n){return t.rows===e&&t.columns===n?t:w.zeros(e,n).setSubMatrix(t,0,0)}var n=this.clone(),r=n.rows,i=n.columns,o=t.rows,a=t.columns;i!==o&&console.warn(`Multiplying ${r} x ${i} and ${o} x ${a} matrix: dimensions do not match.`);var s=M(r,o),u=M(i,a);return function t(n,r,i,o){if(512>=i||512>=o)return n.mmul(r);1==i%2&&1==o%2?(n=e(n,i+1,o+1),r=e(r,i+1,o+1)):1==i%2?(n=e(n,i+1,o),r=e(r,i+1,o)):1==o%2&&(n=e(n,i,o+1),r=e(r,i,o+1));var a=parseInt(n.rows/2),s=parseInt(n.columns/2),u=n.subMatrix(0,a-1,0,s-1),c=r.subMatrix(0,a-1,0,s-1),l=n.subMatrix(0,a-1,s,n.columns-1),h=r.subMatrix(0,a-1,s,r.columns-1),f=n.subMatrix(a,n.rows-1,0,s-1),d=r.subMatrix(a,r.rows-1,0,s-1),p=n.subMatrix(a,n.rows-1,s,n.columns-1),m=r.subMatrix(a,r.rows-1,s,r.columns-1),g=t(w.add(u,p),w.add(c,m),a,s),v=t(w.add(f,p),c,a,s),y=t(u,w.sub(h,m),a,s),x=t(p,w.sub(d,c),a,s),b=t(w.add(u,l),m,a,s),_=t(w.sub(f,u),w.add(c,h),a,s),M=t(w.sub(l,p),w.add(d,m),a,s),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var C=w.zeros(2*S.rows,2*S.columns);return(C=(C=(C=(C=C.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(n=e(n,s,u),t=e(t,s,u),s,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)n=s.scale(this.getRow(i),{min:t,max:e}),r.setRow(i,n);return r}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)n=s.scale(this.getColumn(i),{min:t,max:e}),r.setColumn(i,n);return r}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*r,n*i),a=0;a<e;a++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var c=0;c<i;c++)o[r*a+u][i*s+c]=this.get(a,s)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){l.checkRange(this,t,e,n,r);for(var i=new this.constructor[Symbol.species](e-t+1,r-n+1),o=t;o<=e;o++)for(var a=n;a<=r;a++)i[o-t][a-n]=this.get(o,a);return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||0>e||e>=this.columns||0>n||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](t.length,n-e+1),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError("Row index out of range: "+t[i]);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||0>e||e>=this.rows||0>n||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](n-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError("Column index out of range: "+t[i]);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var i=0;i<t.columns;i++)this[e+r][n+i]=t.get(r,i);return this}selection(t,e){for(var n,r=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<r.row.length;o++){n=r.row[o];for(var a=0;a<r.column.length;a++)i[o][a]=this.get(n,r.column[a])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,n,r){return new d(this,t,e,n,r)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,n,r,i,a;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),n=this.get(1,0),t*this.get(1,1)-e*n):3===this.columns?(r=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),a=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),n=this.get(0,2),t*r.det()-e*i.det()+n*a.det()):new o(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass="Matrix",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",y="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",b="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",R="\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",I="\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",S="\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",C="\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",V="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",D="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",z="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",_="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",P=V,A=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+"S",op:N[0]})),B=eval(x(b,{name:N[1]+"M",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+"S"]=E,w.prototype[N[F]+"M"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){W.push(["Math."+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[["Math.pow",1,"pow"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae="arg0";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+"M"]=ge,w.prototype[re[F]+"S"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(89),r=i(90),s=i(1),l=i(29),c=i(278),m=i(279),d=i(280),h=i(281),p=i(282),k=i(283),j=i(284)},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,o,a,s,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),n=0;n<g;n++){for(e=0;e<m;e++)f[e]=p[e][n];for(e=0;e<m;e++){for(h=p[e],d=v(e,n),s=0,o=0;o<d;o++)s+=h[o]*f[o];h[n]=f[e]-=s}for(a=n,e=n+1;e<m;e++)u(f[e])>u(f[a])&&(a=e);if(a!==n){for(o=0;o<g;o++)c=p[a][o],p[a][o]=p[n][o],p[n][o]=c;l=y[a],y[a]=y[n],y[n]=l,w=-w}if(n<m&&0!==p[n][n])for(e=n+1;e<m;e++)p[e][n]/=p[n][n]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=n(10);r.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,n=0;n<e;n++)if(0===t[n][n])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,n=t.columns,r=0;r<n;r++)e*=t[r][r];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o>a?t[o][a]:o===a?1:0;return r},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o<=a?t[o][a]:0;return r},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,r,o,a=t.columns,s=t.subMatrixRow(this.pivotVector,0,a-1),u=e.columns;for(o=0;o<u;o++)for(n=o+1;n<u;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o];for(o=u-1;0<=o;o--){for(r=0;r<a;r++)s[o][r]/=e[o][o];for(n=0;n<o;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o]}return s}},t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var n=t.rows,o=t.columns,c=v(n,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(n<o)if(!0===e.autoTranspose){n=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,C,k,O,P,D,L,N,I,F,z,U=Array(v(n+1,o)),j=s(n,c,0),V=s(o,o,0),B=Array(o),H=Array(n),G=v(n-1,o),q=M(0,v(o-2,n));for(y=0,T=M(G,q);y<T;y++){if(y<G){for(U[y]=0,m=y;m<n;m++)U[y]=a(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<n;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<n;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<n;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<n;m++)j[m][y]=f[m][y];if(y<q){for(B[y]=0,m=y+1;m<o;m++)B[y]=a(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<n&&0!==B[y]){for(m=y+1;m<n;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<n;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<n;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,n+1),G<o&&(U[G]=f[G][G]),n<w&&(U[w-1]=0),q+1<w&&(B[q]=f[q][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<n;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<n;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<n;m++)j[m][g]+=x*j[m][y]}for(m=y;m<n;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<n;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<q&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var W=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(C=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/C,L=B[y]/C,I=(k=U[w-1]/C)*(P=B[w-2]/C)*(k*P),F=0,(0!=(N=(((O=U[w-2]/C)+k)*(O-k)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+k)*(D-k)+F,z=D*L,g=y;g<w-1;g++){if(S=_/(x=a(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=a(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<n-1)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=W;m++)V[m][y]=-V[m][y];for(;y<W&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<n-1)for(m=0;m<n;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=n,this.n=o,this.s=U,this.U=j,this.V=V}var i=n(10),o=n(44),a=o.hypotenuse,s=o.getFilled2DArray;r.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,n=this.s,r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,n=this.threshold,r=this.s.length,o=i.Matrix.zeros(r,r);for(e=0;e<r;e++)o[e][e]=u(this.s[e])<=n?0:1/this.s[e];var a,s,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(a=0;a<p;a++){for(c=0,s=0;s<r;s++)c+=f[e][s]*l[a][s];m[e][a]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,n=this.V,r=this.threshold,o=n.length,a=n[0].length,s=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<a;e++)s[t][e]=u(this.s[e])>r?n[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=s[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=r},function(e,t,i){"use strict";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal")}function n(t,e){return t-e}function x(t,e){for(var n in e)t=t.replace(new RegExp("%"+n+"%","g"),e[n]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("Data length does not match given dimensions");for(var r=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n[i*e+o]);return r}static rowVector(t){for(var e=new this(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){for(var e=new this(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,n){void 0===n&&(n=Math.random);for(var r=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n());return r}static randInt(t,e,n,r){void 0===n&&(n=1e3),void 0===r&&(r=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var a,s=0;s<e;s++)a=g(r()*n),i.set(o,s,a);return i}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=v(t,e),i=this.zeros(t,e),o=0;o<r;o++)i.set(o,o,n);return i}static diag(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var i=v(r,e,n),o=this.zeros(e,n),a=0;a<i;a++)o.set(a,a,t[a]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,v(t.get(o,a),e.get(o,a)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,M(t.get(o,a),e.get(o,a)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=this.rows,n=this.columns,r=0;r<e;r++)for(var i=0;i<n;i++)t.call(this,r,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t[e*this.columns+n]=this.get(e,n);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var n=0;n<this.columns;n++)t[e][n]=this.get(e,n)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t,e){t=t||1,e=e||1;for(var n=new this.constructor[Symbol.species](this.rows*t,this.columns*e),r=0;r<t;r++)for(var i=0;i<e;i++)n.setSubMatrix(this,this.rows*r,this.columns*i);return n}fill(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),n=0;n<this.columns;n++)e[n]=this.get(t,n);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var n,r=0;r<this.columns;r++)n=this.get(t,r),this.set(t,r,this.get(e,r)),this.set(e,r,n);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),n=0;n<this.rows;n++)e[n]=this.get(n,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var n,r=0;r<this.rows;r++)n=this.get(r,t),this.set(r,t,this.get(r,e)),this.set(r,e,n);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){for(var t=v(this.rows,this.columns),e=Array(t),n=0;n<t;n++)e[n]=this.get(n,n);return e}sum(t){return"row"===t?l.sumByRow(this):"column"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t*=this.get(e,n);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var e=this.rows,n=this.columns,r=t.columns,i=new this.constructor[Symbol.species](e,r),o=Array(n),a=0;a<r;a++){for(var s=0;s<n;s++)o[s]=t.get(s,a);for(var u,c=0;c<e;c++){for(u=0,s=0;s<n;s++)u+=this.get(c,s)*o[s];i.set(c,a,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(n+u)*(r+c),h=(a+u)*r,f=n*(o-c),d=u*(s-r),p=(n+i)*c;return e.set(0,0,l+d-p+(i-u)*(s+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(a-n)*(r+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(n-o)*(-f+m),b=(-n+o+a)*(h-f+m),_=(o+a)*(-h+f),M=n*h,S=(-n+u+c)*(h-d+g),E=(-n+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),C=(i-l)*(m-y),k=i*v,R=(c+l)*(-v+y),O=(-i+a+s)*(g+v-w),P=(i-s)*(g-w),D=(a+s)*(-v+w);return e.set(0,0,M+k+r*p),e.set(0,1,(n+r+i-o-a-c-l)*m+b+_+M+A+k+R),e.set(0,2,M+S+T+(n+r+i-a-s-u-c)*g+k+O+D),e.set(1,0,x+a*(-h+f+p-m-g-v+w)+b+M+k+O+P),e.set(1,1,x+b+_+M+s*y),e.set(1,2,k+O+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+C+k),e.set(2,1,A+C+k+R+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,n){return t.rows===e&&t.columns===n?t:w.zeros(e,n).setSubMatrix(t,0,0)}var n=this.clone(),r=n.rows,i=n.columns,o=t.rows,a=t.columns;i!==o&&console.warn(`Multiplying ${r} x ${i} and ${o} x ${a} matrix: dimensions do not match.`);var s=M(r,o),u=M(i,a);return function t(n,r,i,o){if(512>=i||512>=o)return n.mmul(r);1==i%2&&1==o%2?(n=e(n,i+1,o+1),r=e(r,i+1,o+1)):1==i%2?(n=e(n,i+1,o),r=e(r,i+1,o)):1==o%2&&(n=e(n,i,o+1),r=e(r,i,o+1));var a=parseInt(n.rows/2),s=parseInt(n.columns/2),u=n.subMatrix(0,a-1,0,s-1),c=r.subMatrix(0,a-1,0,s-1),l=n.subMatrix(0,a-1,s,n.columns-1),h=r.subMatrix(0,a-1,s,r.columns-1),f=n.subMatrix(a,n.rows-1,0,s-1),d=r.subMatrix(a,r.rows-1,0,s-1),p=n.subMatrix(a,n.rows-1,s,n.columns-1),m=r.subMatrix(a,r.rows-1,s,r.columns-1),g=t(w.add(u,p),w.add(c,m),a,s),v=t(w.add(f,p),c,a,s),y=t(u,w.sub(h,m),a,s),x=t(p,w.sub(d,c),a,s),b=t(w.add(u,l),m,a,s),_=t(w.sub(f,u),w.add(c,h),a,s),M=t(w.sub(l,p),w.add(d,m),a,s),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var C=w.zeros(2*S.rows,2*S.columns);return(C=(C=(C=(C=C.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(n=e(n,s,u),t=e(t,s,u),s,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)n=s.scale(this.getRow(i),{min:t,max:e}),r.setRow(i,n);return r}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)n=s.scale(this.getColumn(i),{min:t,max:e}),r.setColumn(i,n);return r}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*r,n*i),a=0;a<e;a++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var c=0;c<i;c++)o[r*a+u][i*s+c]=this.get(a,s)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){l.checkRange(this,t,e,n,r);for(var i=new this.constructor[Symbol.species](e-t+1,r-n+1),o=t;o<=e;o++)for(var a=n;a<=r;a++)i[o-t][a-n]=this.get(o,a);return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||0>e||e>=this.columns||0>n||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](t.length,n-e+1),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError("Row index out of range: "+t[i]);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||0>e||e>=this.rows||0>n||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](n-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError("Column index out of range: "+t[i]);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var i=0;i<t.columns;i++)this[e+r][n+i]=t.get(r,i);return this}selection(t,e){for(var n,r=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<r.row.length;o++){n=r.row[o];for(var a=0;a<r.column.length;a++)i[o][a]=this.get(n,r.column[a])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,n,r){return new d(this,t,e,n,r)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,n,r,i,a;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),n=this.get(1,0),t*this.get(1,1)-e*n):3===this.columns?(r=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),a=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),n=this.get(0,2),t*r.det()-e*i.det()+n*a.det()):new o(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass="Matrix",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",y="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",b="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",R="\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",I="\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",S="\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",C="\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",V="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",D="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",z="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",_="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",P=V,A=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+"S",op:N[0]})),B=eval(x(b,{name:N[1]+"M",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+"S"]=E,w.prototype[N[F]+"M"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){W.push(["Math."+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[["Math.pow",1,"pow"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae="arg0";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+"M"]=ge,w.prototype[re[F]+"S"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(92),r=i(93),s=i(1),l=i(30),c=i(292),m=i(293),d=i(294),h=i(295),p=i(296),k=i(297),j=i(298)},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,o,a,s,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),n=0;n<g;n++){for(e=0;e<m;e++)f[e]=p[e][n];for(e=0;e<m;e++){for(h=p[e],d=v(e,n),s=0,o=0;o<d;o++)s+=h[o]*f[o];h[n]=f[e]-=s}for(a=n,e=n+1;e<m;e++)u(f[e])>u(f[a])&&(a=e);if(a!==n){for(o=0;o<g;o++)c=p[a][o],p[a][o]=p[n][o],p[n][o]=c;l=y[a],y[a]=y[n],y[n]=l,w=-w}if(n<m&&0!==p[n][n])for(e=n+1;e<m;e++)p[e][n]/=p[n][n]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=n(11);r.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,n=0;n<e;n++)if(0===t[n][n])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,n=t.columns,r=0;r<n;r++)e*=t[r][r];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o>a?t[o][a]:o===a?1:0;return r},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o<=a?t[o][a]:0;return r},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,r,o,a=t.columns,s=t.subMatrixRow(this.pivotVector,0,a-1),u=e.columns;for(o=0;o<u;o++)for(n=o+1;n<u;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o];for(o=u-1;0<=o;o--){for(r=0;r<a;r++)s[o][r]/=e[o][o];for(n=0;n<o;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o]}return s}},t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var n=t.rows,o=t.columns,c=v(n,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(n<o)if(!0===e.autoTranspose){n=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,C,k,O,P,D,L,N,I,F,z,U=Array(v(n+1,o)),j=s(n,c,0),V=s(o,o,0),B=Array(o),H=Array(n),G=v(n-1,o),q=M(0,v(o-2,n));for(y=0,T=M(G,q);y<T;y++){if(y<G){for(U[y]=0,m=y;m<n;m++)U[y]=a(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<n;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<n;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<n;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<n;m++)j[m][y]=f[m][y];if(y<q){for(B[y]=0,m=y+1;m<o;m++)B[y]=a(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<n&&0!==B[y]){for(m=y+1;m<n;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<n;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<n;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,n+1),G<o&&(U[G]=f[G][G]),n<w&&(U[w-1]=0),q+1<w&&(B[q]=f[q][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<n;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<n;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<n;m++)j[m][g]+=x*j[m][y]}for(m=y;m<n;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<n;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<q&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var W=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(C=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/C,L=B[y]/C,I=(k=U[w-1]/C)*(P=B[w-2]/C)*(k*P),F=0,(0!=(N=(((O=U[w-2]/C)+k)*(O-k)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+k)*(D-k)+F,z=D*L,g=y;g<w-1;g++){if(S=_/(x=a(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=a(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<n-1)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=W;m++)V[m][y]=-V[m][y];for(;y<W&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<n-1)for(m=0;m<n;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=n,this.n=o,this.s=U,this.U=j,this.V=V}var i=n(11),o=n(46),a=o.hypotenuse,s=o.getFilled2DArray;r.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,n=this.s,r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,n=this.threshold,r=this.s.length,o=i.Matrix.zeros(r,r);for(e=0;e<r;e++)o[e][e]=u(this.s[e])<=n?0:1/this.s[e];var a,s,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(a=0;a<p;a++){for(c=0,s=0;s<r;s++)c+=f[e][s]*l[a][s];m[e][a]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,n=this.V,r=this.threshold,o=n.length,a=n[0].length,s=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<a;e++)s[t][e]=u(this.s[e])>r?n[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=s[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=r},function(t,e,n){"use strict";var r=n(305);e.updateClusterID=function(t,e,n,i){for(var o=0;o<t.length;o++)n[o]=r(e,t[o],{distanceFunction:i});return n},e.updateCenters=function(t,e,n){for(var r=t[0].length,i=Array(n),o=Array(n),a=0;a<n;a++){i[a]=Array(r),o[a]=0;for(var s=0;s<r;s++)i[a][s]=0}for(var u=0;u<t.length;u++){o[e[u]]++;for(var c=0;c<r;c++)i[e[u]][c]+=t[u][c]}for(var l=0;l<n;l++)for(var h=0;h<r;h++)i[l][h]/=o[l];return i},e.calculateDistanceMatrix=function(t,e){for(var n=Array(t.length),r=0;r<t.length;++r)for(var i=r;i<t.length;++i){n[r]||(n[r]=Array(t.length)),n[i]||(n[i]=Array(t.length));var o=e(t[r],t[i]);n[r][i]=o,n[i][r]=o}return n},e.converged=function(t,e,n,r){for(var i=0;i<t.length;i++)if(n(t[i],e[i])>r)return!1;return!0}},function(t,e,n){"use strict";function r(t){i.call(this),this.index=t,this.distance=0,this.children=[]}var i=n(48);n(313).inherits(r,i),t.exports=r},function(t){"use strict";function e(t,e,n,r){this.x=t,this.y=e,this.weights=n,this.som=r,this.neighbors={}}e.prototype.adjustWeights=function(t,e,n){for(var r=0,i=this.weights.length;r<i;r++)this.weights[r]+=e*n*(t[r]-this.weights[r])},e.prototype.getDistance=function(t){return M(u(this.x-t.x),u(this.y-t.y))},e.prototype.getDistanceTorus=function(t){var e=u(this.x-t.x),n=u(this.y-t.y);return M(v(e,this.som.gridDim.x-e),v(n,this.som.gridDim.y-n))},e.prototype.getNeighbors=function(t){var e,n,r,i;return this.neighbors[t]||(this.neighbors[t]=[,,],0<this[t]?e=this[t]-1:this.som.torus&&(e=this.som.gridDim[t]-1),"undefined"!=typeof e&&("x"===t?(n=e,r=this.y):(n=this.x,r=e),this.neighbors[t][0]=this.som.nodes[n][r]),this[t]<this.som.gridDim[t]-1?i=this[t]+1:this.som.torus&&(i=0),"undefined"!=typeof i&&("x"===t?(n=i,r=this.y):(n=this.x,r=i),this.neighbors[t][1]=this.som.nodes[n][r])),this.neighbors[t]},e.prototype.getPos=function(t,e){var n,r,i=this.getNeighbors(t),o=this.som.distance;i[0]?i[1]?o(e,i[0].weights)<o(e,i[1].weights)?(n=i[0],r=-1):(n=i[1],r=1):(n=i[0],r=-1):(n=i[1],r=1);var a=1-o(e,this.weights),s=1-o(e,n.weights);return.5+(a-s)/(2-a-s)*.5*r},e.prototype.getPosition=function(t){return[this.getPos("x",t),this.getPos("y",t)]},t.exports=e},function(e,t,i){"use strict";function n(e){function t(t,e){if(t.rows!==e.rows||t.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal")}function n(t,e){return t-e}function x(t,e){for(var n in e)t=t.replace(new RegExp("%"+n+"%","g"),e[n]);return t}void 0===e&&(e=Object);class w extends e{static get[Symbol.species](){return this}static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("Data length does not match given dimensions");for(var r=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n[i*e+o]);return r}static rowVector(t){for(var e=new this(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){for(var e=new this(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,n){void 0===n&&(n=Math.random);for(var r=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n());return r}static randInt(t,e,n,r){void 0===n&&(n=1e3),void 0===r&&(r=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var a,s=0;s<e;s++)a=g(r()*n),i.set(o,s,a);return i}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=v(t,e),i=this.zeros(t,e),o=0;o<r;o++)i.set(o,o,n);return i}static diag(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var i=v(r,e,n),o=this.zeros(e,n),a=0;a<i;a++)o.set(a,a,t[a]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,v(t.get(o,a),e.get(o,a)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,M(t.get(o,a),e.get(o,a)));return i}static checkMatrix(t){return w.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=this.rows,n=this.columns,r=0;r<e;r++)for(var i=0;i<n;i++)t.call(this,r,i);return this}to1DArray(){for(var t=Array(this.size),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t[e*this.columns+n]=this.get(e,n);return t}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var n=0;n<this.columns;n++)t[e][n]=this.get(e,n)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t,e){t=t||1,e=e||1;for(var n=new this.constructor[Symbol.species](this.rows*t,this.columns*e),r=0;r<t;r++)for(var i=0;i<e;i++)n.setSubMatrix(this,this.rows*r,this.columns*i);return n}fill(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){l.checkRowIndex(this,t);for(var e=Array(this.columns),n=0;n<this.columns;n++)e[n]=this.get(t,n);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){l.checkRowIndex(this,t),e=l.checkRowVector(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){l.checkRowIndex(this,t),l.checkRowIndex(this,e);for(var n,r=0;r<this.columns;r++)n=this.get(t,r),this.set(t,r,this.get(e,r)),this.set(e,r,n);return this}getColumn(t){l.checkColumnIndex(this,t);for(var e=Array(this.rows),n=0;n<this.rows;n++)e[n]=this.get(n,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){l.checkColumnIndex(this,t),e=l.checkColumnVector(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){l.checkColumnIndex(this,t),l.checkColumnIndex(this,e);for(var n,r=0;r<this.rows;r++)n=this.get(r,t),this.set(r,t,this.get(r,e)),this.set(r,e,n);return this}addRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=l.checkRowVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=l.checkColumnVector(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){l.checkRowIndex(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){l.checkColumnIndex(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){l.checkRowIndex(this,t);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){l.checkColumnIndex(this,t);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){for(var t=v(this.rows,this.columns),e=Array(t),n=0;n<t;n++)e[n]=this.get(n,n);return e}sum(t){return"row"===t?l.sumByRow(this):"column"===t?l.sumByColumn(this):l.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t*=this.get(e,n);return t}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){w.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var e=this.rows,n=this.columns,r=t.columns,i=new this.constructor[Symbol.species](e,r),o=Array(n),a=0;a<r;a++){for(var s=0;s<n;s++)o[s]=t.get(s,a);for(var u,c=0;c<e;c++){for(u=0,s=0;s<n;s++)u+=this.get(c,s)*o[s];i.set(c,a,u)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2),n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(n+u)*(r+c),h=(a+u)*r,f=n*(o-c),d=u*(s-r),p=(n+i)*c;return e.set(0,0,l+d-p+(i-u)*(s+c)),e.set(0,1,f+p),e.set(1,0,h+d),e.set(1,1,l-h+f+(a-n)*(r+o)),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),w=t.get(2,2),x=(n-o)*(-f+m),b=(-n+o+a)*(h-f+m),_=(o+a)*(-h+f),M=n*h,S=(-n+u+c)*(h-d+g),E=(-n+u)*(d-g),T=(u+c)*(-h+d),A=(-i+c+l)*(m+v-y),C=(i-l)*(m-y),k=i*v,R=(c+l)*(-v+y),O=(-i+a+s)*(g+v-w),P=(i-s)*(g-w),D=(a+s)*(-v+w);return e.set(0,0,M+k+r*p),e.set(0,1,(n+r+i-o-a-c-l)*m+b+_+M+A+k+R),e.set(0,2,M+S+T+(n+r+i-a-s-u-c)*g+k+O+D),e.set(1,0,x+a*(-h+f+p-m-g-v+w)+b+M+k+O+P),e.set(1,1,x+b+_+M+s*y),e.set(1,2,k+O+P+D+o*d),e.set(2,0,M+S+E+c*(-h+d+p-m-g-v+y)+A+C+k),e.set(2,1,A+C+k+R+u*f),e.set(2,2,M+S+E+T+l*w),e}mmulStrassen(t){function e(t,e,n){return t.rows===e&&t.columns===n?t:w.zeros(e,n).setSubMatrix(t,0,0)}var n=this.clone(),r=n.rows,i=n.columns,o=t.rows,a=t.columns;i!==o&&console.warn(`Multiplying ${r} x ${i} and ${o} x ${a} matrix: dimensions do not match.`);var s=M(r,o),u=M(i,a);return function t(n,r,i,o){if(512>=i||512>=o)return n.mmul(r);1==i%2&&1==o%2?(n=e(n,i+1,o+1),r=e(r,i+1,o+1)):1==i%2?(n=e(n,i+1,o),r=e(r,i+1,o)):1==o%2&&(n=e(n,i,o+1),r=e(r,i,o+1));var a=parseInt(n.rows/2),s=parseInt(n.columns/2),u=n.subMatrix(0,a-1,0,s-1),c=r.subMatrix(0,a-1,0,s-1),l=n.subMatrix(0,a-1,s,n.columns-1),h=r.subMatrix(0,a-1,s,r.columns-1),f=n.subMatrix(a,n.rows-1,0,s-1),d=r.subMatrix(a,r.rows-1,0,s-1),p=n.subMatrix(a,n.rows-1,s,n.columns-1),m=r.subMatrix(a,r.rows-1,s,r.columns-1),g=t(w.add(u,p),w.add(c,m),a,s),v=t(w.add(f,p),c,a,s),y=t(u,w.sub(h,m),a,s),x=t(p,w.sub(d,c),a,s),b=t(w.add(u,l),m,a,s),_=t(w.sub(f,u),w.add(c,h),a,s),M=t(w.sub(l,p),w.add(d,m),a,s),S=w.add(g,x);S.sub(b),S.add(M);var E=w.add(y,b),T=w.add(v,x),A=w.sub(g,v);A.add(y),A.add(_);var C=w.zeros(2*S.rows,2*S.columns);return(C=(C=(C=(C=C.setSubMatrix(S,0,0)).setSubMatrix(E,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(A,S.rows,S.columns)).subMatrix(0,i-1,0,o-1)}(n=e(n,s,u),t=e(t,s,u),s,u)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++)n=s.scale(this.getRow(i),{min:t,max:e}),r.setRow(i,n);return r}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var n,r=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++)n=s.scale(this.getColumn(i),{min:t,max:e}),r.setColumn(i,n);return r}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*r,n*i),a=0;a<e;a++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var c=0;c<i;c++)o[r*a+u][i*s+c]=this.get(a,s)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t){void 0===t&&(t=n);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){l.checkRange(this,t,e,n,r);for(var i=new this.constructor[Symbol.species](e-t+1,r-n+1),o=t;o<=e;o++)for(var a=n;a<=r;a++)i[o-t][a-n]=this.get(o,a);return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||0>e||e>=this.columns||0>n||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](t.length,n-e+1),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.rows)throw new RangeError("Row index out of range: "+t[i]);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||0>e||e>=this.rows||0>n||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new this.constructor[Symbol.species](n-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(0>t[i]||t[i]>=this.columns)throw new RangeError("Column index out of range: "+t[i]);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){t=this.constructor.checkMatrix(t),l.checkRange(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var i=0;i<t.columns;i++)this[e+r][n+i]=t.get(r,i);return this}selection(t,e){for(var n,r=l.checkIndices(this,t,e),i=new this.constructor[Symbol.species](t.length,e.length),o=0;o<r.row.length;o++){n=r.row[o];for(var a=0;a<r.column.length;a++)i[o][a]=this.get(n,r.column[a])}return i}trace(){for(var t=v(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}transposeView(){return new c(this)}rowView(t){return l.checkRowIndex(this,t),new m(this,t)}columnView(t){return l.checkColumnIndex(this,t),new p(this,t)}flipRowView(){return new k(this)}flipColumnView(){return new j(this)}subMatrixView(t,e,n,r){return new d(this,t,e,n,r)}selectionView(t,e){return new h(this,t,e)}det(){var t,e,n,r,i,a;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),n=this.get(1,0),t*this.get(1,1)-e*n):3===this.columns?(r=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),a=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),n=this.get(0,2),t*r.det()-e*i.det()+n*a.det()):new o(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=a);for(var e=new r(this,{autoTranspose:!0}),n=e.leftSingularVectors,i=e.rightSingularVectors,o=e.diagonal,s=0;s<o.length;s++)o[s]=u(o[s])>t?1/o[s]:0;return o=this.constructor[Symbol.species].diag(o),i.mmul(o.mmul(n.transposeView()))}}w.prototype.klass="Matrix",w.random=w.rand,w.diagonal=w.diag,w.prototype.diagonal=w.prototype.diag,w.identity=w.eye,w.prototype.negate=w.prototype.neg,w.prototype.tensorProduct=w.prototype.kroneckerProduct,w.prototype.determinant=w.prototype.det;var f="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",y="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",b="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",R="\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",I="\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",S="\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",C="\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",V="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",D="\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",z="\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    checkDimensions(this, matrix);\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",_="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",P=V,A=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]],L=!0,U=!1,F,i;try{for(var T=A[Symbol.iterator](),q;!(L=(q=T.next()).done);L=!0){var N=q.value,O=eval(x(f,{name:N[1],op:N[0]})),E=eval(x(y,{name:N[1]+"S",op:N[0]})),B=eval(x(b,{name:N[1]+"M",op:N[0]})),Q=eval(x(R,{name:N[1]}));for(F=1;F<N.length;F++)w.prototype[N[F]]=O,w.prototype[N[F]+"S"]=E,w.prototype[N[F]+"M"]=B,w[N[F]]=Q}}catch(e){U=!0,i=e}finally{try{!L&&T.return&&T.return()}finally{if(U)throw i}}var W=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){W.push(["Math."+t,t])});var X=!0,J=!1,Y;try{for(var H=W[Symbol.iterator](),K;!(X=(K=H.next()).done);X=!0){var G=K.value,Z=eval(x(I,{name:G[1],method:G[0]})),$=eval(x(S,{name:G[1]}));for(F=1;F<G.length;F++)w.prototype[G[F]]=Z,w[G[F]]=$}}catch(e){J=!0,Y=e}finally{try{!X&&H.return&&H.return()}finally{if(J)throw Y}}var ee=[["Math.pow",1,"pow"]],te=!0,ie=!1,ne;try{for(var oe=ee[Symbol.iterator](),se;!(te=(se=oe.next()).done);te=!0){var re=se.value,ae="arg0";for(F=1;F<re[1];F++)ae+=`, arg${F}`;if(1!==re[1]){var le=eval(x(C,{name:re[2],method:re[0],args:ae})),ce=eval(x(V,{name:re[2],args:ae}));for(F=2;F<re.length;F++)w.prototype[re[F]]=le,w[re[F]]=ce}else{var ue={name:re[2],args:ae,method:re[0]},me=eval(x(_,ue)),de=eval(x(D,ue)),ge=eval(x(z,ue)),he=eval(x(P,ue));for(F=2;F<re.length;F++)w.prototype[re[F]]=me,w.prototype[re[F]+"M"]=ge,w.prototype[re[F]+"S"]=de,w[re[F]]=he}}}catch(e){ie=!0,ne=e}finally{try{!te&&oe.return&&oe.return()}finally{if(ie)throw ne}}return w}e.exports=n;var o=i(98),r=i(99),s=i(1),l=i(31),c=i(323),m=i(324),d=i(325),h=i(326),p=i(327),k=i(328),j=i(329)},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,o,a,s,c,l,h,f,d,p=(t=i.Matrix.checkMatrix(t)).clone(),m=p.rows,g=p.columns,y=Array(m),w=1;for(e=0;e<m;e++)y[e]=e;for(f=Array(m),n=0;n<g;n++){for(e=0;e<m;e++)f[e]=p[e][n];for(e=0;e<m;e++){for(h=p[e],d=v(e,n),s=0,o=0;o<d;o++)s+=h[o]*f[o];h[n]=f[e]-=s}for(a=n,e=n+1;e<m;e++)u(f[e])>u(f[a])&&(a=e);if(a!==n){for(o=0;o<g;o++)c=p[a][o],p[a][o]=p[n][o],p[n][o]=c;l=y[a],y[a]=y[n],y[n]=l,w=-w}if(n<m&&0!==p[n][n])for(e=n+1;e<m;e++)p[e][n]/=p[n][n]}this.LU=p,this.pivotVector=y,this.pivotSign=w}var i=n(12);r.prototype={isSingular:function(){for(var t=this.LU,e=t.columns,n=0;n<e;n++)if(0===t[n][n])return!0;return!1},get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,n=t.columns,r=0;r<n;r++)e*=t[r][r];return e},get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o>a?t[o][a]:o===a?1:0;return r},get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Matrix(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)r[o][a]=o<=a?t[o][a]:0;return r},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(t){t=i.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,r,o,a=t.columns,s=t.subMatrixRow(this.pivotVector,0,a-1),u=e.columns;for(o=0;o<u;o++)for(n=o+1;n<u;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o];for(o=u-1;0<=o;o--){for(r=0;r<a;r++)s[o][r]/=e[o][o];for(n=0;n<o;n++)for(r=0;r<a;r++)s[n][r]-=s[o][r]*e[n][o]}return s}},t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);t=i.Matrix.checkMatrix(t),e=e||{};var n=t.rows,o=t.columns,c=v(n,o),l=!0,h=!0;!1===e.computeLeftSingularVectors&&(l=!1),!1===e.computeRightSingularVectors&&(h=!1);var f,d=!1;if(n<o)if(!0===e.autoTranspose){n=(f=t.transpose()).rows,o=f.columns,d=!0;var p=l;l=h,h=p}else f=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else f=t.clone();var m,g,y,w,x,b,_,S,E,T,A,C,k,O,P,D,L,N,I,F,z,U=Array(v(n+1,o)),j=s(n,c,0),V=s(o,o,0),B=Array(o),H=Array(n),G=v(n-1,o),q=M(0,v(o-2,n));for(y=0,T=M(G,q);y<T;y++){if(y<G){for(U[y]=0,m=y;m<n;m++)U[y]=a(U[y],f[m][y]);if(0!==U[y]){for(0>f[y][y]&&(U[y]=-U[y]),m=y;m<n;m++)f[m][y]/=U[y];f[y][y]+=1}U[y]=-U[y]}for(g=y+1;g<o;g++){if(y<G&&0!==U[y]){for(x=0,m=y;m<n;m++)x+=f[m][y]*f[m][g];for(x=-x/f[y][y],m=y;m<n;m++)f[m][g]+=x*f[m][y]}B[g]=f[y][g]}if(l&&y<G)for(m=y;m<n;m++)j[m][y]=f[m][y];if(y<q){for(B[y]=0,m=y+1;m<o;m++)B[y]=a(B[y],B[m]);if(0!==B[y]){for(0>B[y+1]&&(B[y]=0-B[y]),m=y+1;m<o;m++)B[m]/=B[y];B[y+1]+=1}if(B[y]=-B[y],y+1<n&&0!==B[y]){for(m=y+1;m<n;m++)H[m]=0;for(g=y+1;g<o;g++)for(m=y+1;m<n;m++)H[m]+=B[g]*f[m][g];for(g=y+1;g<o;g++)for(x=-B[g]/B[y+1],m=y+1;m<n;m++)f[m][g]+=x*H[m]}if(h)for(m=y+1;m<o;m++)V[m][y]=B[m]}}if(w=v(o,n+1),G<o&&(U[G]=f[G][G]),n<w&&(U[w-1]=0),q+1<w&&(B[q]=f[q][w-1]),B[w-1]=0,l){for(g=G;g<c;g++){for(m=0;m<n;m++)j[m][g]=0;j[g][g]=1}for(y=G-1;0<=y;y--)if(0!==U[y]){for(g=y+1;g<c;g++){for(x=0,m=y;m<n;m++)x+=j[m][y]*j[m][g];for(x=-x/j[y][y],m=y;m<n;m++)j[m][g]+=x*j[m][y]}for(m=y;m<n;m++)j[m][y]=-j[m][y];for(j[y][y]=1+j[y][y],m=0;m<y-1;m++)j[m][y]=0}else{for(m=0;m<n;m++)j[m][y]=0;j[y][y]=1}}if(h)for(y=o-1;0<=y;y--){if(y<q&&0!==B[y])for(g=y+1;g<o;g++){for(x=0,m=y+1;m<o;m++)x+=V[m][y]*V[m][g];for(x=-x/V[y+1][y],m=y+1;m<o;m++)V[m][g]+=x*V[m][y]}for(m=0;m<o;m++)V[m][y]=0;V[y][y]=1}for(var W=w-1,Y=2.220446049250313e-16;0<w;){for(y=w-2;-1<=y&&-1!==y;y--)if(u(B[y])<=Y*(u(U[y])+u(U[y+1]))){B[y]=0;break}if(y===w-2)A=4;else{for(b=w-1;b>=y&&b!==y;b--)if(x=(b===w?0:u(B[b]))+(b===y+1?0:u(B[b-1])),u(U[b])<=Y*x){U[b]=0;break}b===y?A=3:b===w-1?A=1:(A=2,y=b)}switch(y++,A){case 1:for(_=B[w-2],B[w-2]=0,g=w-2;g>=y;g--)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,g!==y&&(_=-E*B[g-1],B[g-1]=S*B[g-1]),h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][w-1],V[m][w-1]=-E*V[m][g]+S*V[m][w-1],V[m][g]=x;break;case 2:for(_=B[y-1],B[y-1]=0,g=y;g<w;g++)if(x=a(U[g],_),S=U[g]/x,E=_/x,U[g]=x,_=-E*B[g],B[g]=S*B[g],l)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][y-1],j[m][y-1]=-E*j[m][g]+S*j[m][y-1],j[m][g]=x;break;case 3:for(C=M(M(M(M(u(U[w-1]),u(U[w-2])),u(B[w-2])),u(U[y])),u(B[y])),D=U[y]/C,L=B[y]/C,I=(k=U[w-1]/C)*(P=B[w-2]/C)*(k*P),F=0,(0!=(N=(((O=U[w-2]/C)+k)*(O-k)+P*P)/2)||0!==I)&&(F=R(N*N+I),0>N&&(F=-F),F=I/(N+F)),_=(D+k)*(D-k)+F,z=D*L,g=y;g<w-1;g++){if(S=_/(x=a(_,z)),E=z/x,g!==y&&(B[g-1]=x),_=S*U[g]+E*B[g],B[g]=S*B[g]-E*U[g],z=E*U[g+1],U[g+1]=S*U[g+1],h)for(m=0;m<o;m++)x=S*V[m][g]+E*V[m][g+1],V[m][g+1]=-E*V[m][g]+S*V[m][g+1],V[m][g]=x;if(S=_/(x=a(_,z)),E=z/x,U[g]=x,_=S*B[g]+E*U[g+1],U[g+1]=-E*B[g]+S*U[g+1],z=E*B[g+1],B[g+1]=S*B[g+1],l&&g<n-1)for(m=0;m<n;m++)x=S*j[m][g]+E*j[m][g+1],j[m][g+1]=-E*j[m][g]+S*j[m][g+1],j[m][g]=x}B[w-2]=_;break;case 4:if(0>=U[y]&&(U[y]=0>U[y]?-U[y]:0,h))for(m=0;m<=W;m++)V[m][y]=-V[m][y];for(;y<W&&!(U[y]>=U[y+1]);){if(x=U[y],U[y]=U[y+1],U[y+1]=x,h&&y<o-1)for(m=0;m<o;m++)x=V[m][y+1],V[m][y+1]=V[m][y],V[m][y]=x;if(l&&y<n-1)for(m=0;m<n;m++)x=j[m][y+1],j[m][y+1]=j[m][y],j[m][y]=x;y++}w--}}if(d){var X=V;V=j,j=X}this.m=n,this.n=o,this.s=U,this.U=j,this.V=V}var i=n(12),o=n(50),a=o.hypotenuse,s=o.getFilled2DArray;r.prototype={get condition(){return this.s[0]/this.s[v(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var t=M(this.m,this.n)*this.s[0]*2.220446049250313e-16,e=0,n=this.s,r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e},get diagonal(){return this.s},get threshold(){return 1.1102230246251565e-16*M(this.m,this.n)*this.s[0]},get leftSingularVectors(){return i.Matrix.isMatrix(this.U)||(this.U=new i.Matrix(this.U)),this.U},get rightSingularVectors(){return i.Matrix.isMatrix(this.V)||(this.V=new i.Matrix(this.V)),this.V},get diagonalMatrix(){return i.Matrix.diag(this.s)},solve:function(t){var e,n=this.threshold,r=this.s.length,o=i.Matrix.zeros(r,r);for(e=0;e<r;e++)o[e][e]=u(this.s[e])<=n?0:1/this.s[e];var a,s,c,l=this.U,h=this.rightSingularVectors,f=h.mmul(o),d=h.rows,p=l.length,m=i.Matrix.zeros(d,p);for(e=0;e<d;e++)for(a=0;a<p;a++){for(c=0,s=0;s<r;s++)c+=f[e][s]*l[a][s];m[e][a]=c}return m.mmul(t)},solveForDiagonal:function(t){return this.solve(i.Matrix.diag(t))},inverse:function(){var t,e,n=this.V,r=this.threshold,o=n.length,a=n[0].length,s=new i.Matrix(o,this.s.length);for(t=0;t<o;t++)for(e=0;e<a;e++)s[t][e]=u(this.s[e])>r?n[t][e]/this.s[e]:0;var c,l,h=this.U,f=h.length,d=h[0].length,p=new i.Matrix(o,f);for(t=0;t<o;t++)for(e=0;e<f;e++){for(l=0,c=0;c<d;c++)l+=s[t][c]*h[e][c];p[t][e]=l}return p}},t.exports=r},function(t,e,n){"use strict";var r=n(49),i=n(101),o=n(102);class a{constructor(t){this.inputSize=t.inputSize,this.outputSize=t.outputSize,this.regularization=t.regularization,this.epsilon=t.epsilon,this.activation=t.activation,this.activationParam=t.activationParam;var e=o[t.activation],n=e.activation.length,i=1<n?n=>e.activation(n,t.activationParam):e.activation,a=1<n?n=>e.derivate(n,t.activationParam):e.derivate;this.activationFunction=function(t,e){this[t][e]=i(this[t][e])},this.derivate=function(t,e){this[t][e]=a(this[t][e])},t.model?(this.W=r.checkMatrix(t.W),this.b=r.checkMatrix(t.b)):(this.W=r.rand(this.inputSize,this.outputSize),this.b=r.zeros(1,this.outputSize),this.W.apply(function(e,n){this[e][n]/=R(t.inputSize)}))}forward(t){var e=t.mmul(this.W).addRowVector(this.b);return e.apply(this.activationFunction),this.a=e.clone(),e}backpropagation(t,e){this.dW=e.transposeView().mmul(t),this.db=i.sumCol(t);var n=e.clone();return t.mmul(this.W.transposeView()).mul(n.apply(this.derivate))}update(){this.dW.add(this.W.clone().mul(this.regularization)),this.W.add(this.dW.mul(-this.epsilon)),this.b.add(this.db.mul(-this.epsilon))}toJSON(){return{model:"Layer",inputSize:this.inputSize,outputSize:this.outputSize,regularization:this.regularization,epsilon:this.epsilon,activation:this.activation,W:this.W,b:this.b}}static load(t){if("Layer"!==t.model)throw new RangeError("the current model is not a Layer model");return new a(t)}}t.exports=a},function(t,e,n){"use strict";var r=n(49);t.exports={dictOutputs:function(t){for(var e={},n={},r=t.length,i=0,o=0;o<r;o+=1)void 0===e[t[o]]&&(e[t[o]]=i,n[i]=t[o],i++);return{inputs:e,outputs:n}},sumCol:function(t){for(var e=r.zeros(1,t.columns),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e[0][i]+=t[n][i];return e},sumRow:function(t){for(var e=r.zeros(t.rows,1),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)e[n][0]+=t[n][i];return e}}},function(t){"use strict";function e(t){return 1/(1+o(-t))}function i(t,e){return 0>t?e*(o(t)-1):t}var a=Math.cos,s=Math.sin,c={tanh:{activation:n,derivate:t=>1-t*t},identity:{activation:t=>t,derivate:()=>1},logistic:{activation:e,derivate:t=>e(t)*(1-e(t))},arctan:{activation:Math.atan,derivate:t=>1/(t*t+1)},softsign:{activation:t=>t/(1+u(t)),derivate:t=>1/((1+u(t))*(1+u(t)))},relu:{activation:t=>0>t?0:t,derivate:t=>0>t?0:1},softplus:{activation:t=>r(1+o(t)),derivate:t=>1/(1+o(-t))},bent:{activation:t=>(R(t*t+1)-1)/2+t,derivate:t=>t/(2*R(t*t+1))+1},sinusoid:{activation:s,derivate:a},sinc:{activation:t=>0===t?1:s(t)/t,derivate:t=>0===t?0:a(t)/t-s(t)/(t*t)},gaussian:{activation:t=>o(-t*t),derivate:t=>-2*t*o(-t*t)},"parametric-relu":{activation:(t,e)=>0>t?e*t:t,derivate:(t,e)=>0>t?e:1},"exponential-elu":{activation:i,derivate:(t,e)=>0>t?i(t,e)+e:1},"soft-exponential":{activation:function(t,e){return 0>e?-r(1-e*(t+e))/e:0<e?(o(e*t)-1)/e+e:t},derivate:function(t,e){return 0>e?1/(1-e*(e+t)):o(e*t)}}};t.exports=c},function(t,e,n){"use strict";var r=n(13);e.ArrayUtils=e.AU=n(1),e.BitArray=n(119),e.HashTable=n(54),e.Matrix=r.default,e.PadArray=n(57),e.Regression=n(124),e.binarySearch=n(55),e.numSort=n(56);var i=e.Math={},o=n(145);i.Distance=o.distance,i.Similarity=o.similarity,i.DistanceMatrix=n(68),i.SG=n(191),i.SGG=n(205),i.Matrix=r,i.SparseMatrix=n(208),i.Kernel=n(37);var a=e.Stat={};a.array=n(2).array,a.matrix=n(2).matrix,a.PCA=n(209),a.Performance=n(223);var s=e.Optimization={};s.BellOptimizer=n(225),s.LevenbergMarquardt=n(253),(e.RNG={}).XSadd=n(269);var u=e.SL={};u.CV=n(270),u.CrossValidation=u.CV,u.CM=n(86),u.ConfusionMatrix=u.CM,u.SVM=n(272),u.KNN=n(273),u.NaiveBayes=n(275),u.PLS=n(289);var c=e.Clust={};c.kmeans=n(304),c.hclust=n(309);var l=e.NN=e.nn={};l.SOM=n(319),l.FNN=n(321)},function(){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},function(t,e,n){"use strict";function r(t){for(var e=Array(t[0].length),n=0;n<e.length;++n)e[n]=Array(t.length);for(n=0;n<t.length;++n)for(var r=0;r<t[0].length;++r)e[r][n]=t[n][r];return e}var i=n(2).array;t.exports={coordArrayToPoints:function(t,e){if(0!=t.length%e)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var n,r=Array(t.length/e),i=0,o=0;o<t.length;o+=e){n=Array(e);for(var a=0;a<e;++a)n[a]=t[o+a];r[i]=n,i++}return r},coordArrayToCoordMatrix:function(t,e){if(0!=t.length%e)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var n=Array(e),r=t.length/e,i=0;i<n.length;i++)n[i]=Array(r);for(i=0;i<t.length;i+=e)for(var o,a=0;a<e;++a)o=g(i/e),n[a][o]=t[i+a];return n},coordMatrixToCoordArray:function(t){for(var e=Array(t.length*t[0].length),n=0,r=0;r<t[0].length;++r)for(var i=0;i<t.length;++i)e[n]=t[i][r],++n;return e},coordMatrixToPoints:r,pointsToCoordArray:function(t){for(var e=Array(t.length*t[0].length),n=0,r=0;r<t.length;++r)for(var i=0;i<t[0].length;++i)e[n]=t[r][i],++n;return e},pointsToCoordMatrix:r,applyDotProduct:function(t,e){var n,r;t.length<=e.length?(r=t,n=e):(r=e,n=t);for(var i,o=n.length-r.length+1,a=Array(o),s=0;s<o;++s){i=0;for(var u=0;u<r.length;++u)i+=r[u]*n[s+u];a[s]=i}return a},scale:function(t,e){var n=e.inPlace?t:Array(t.length),r=e.max,o=e.min;if("number"==typeof r)if("number"==typeof o)for(var a=i.minMax(t),s=(r-o)/(a.max-a.min),u=0;u<n.length;u++)n[u]=(t[u]-a.min)*s+o;else for(s=r/i.max(t),u=0;u<n.length;u++)n[u]=t[u]*s;else if("number"==typeof o)for(s=o/i.min(t),u=0;u<n.length;u++)n[u]=t[u]*s;return n}}},function(t,e,n){"use strict";function i(t,e){return t-e}var o=n(52);e.max=function(t){for(var e=-1/0,n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)t[n][r]>e&&(e=t[n][r]);return e},e.min=function(t){for(var e=1/0,n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)t[n][r]<e&&(e=t[n][r]);return e},e.minMax=function(t){for(var e=1/0,n=-1/0,r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)t[r][i]<e&&(e=t[r][i]),t[r][i]>n&&(n=t[r][i]);return{min:e,max:n}},e.entropy=function(t,e){"undefined"==typeof e&&(e=0);for(var n=0,i=t.length,o=t[0].length,a=0;a<i;a++)for(var s=0;s<o;s++)n+=t[a][s]*r(t[a][s]+e);return-n},e.mean=function(t,e){"undefined"==typeof e&&(e=0);var n,r,i,o,a=t.length,s=t[0].length;if(-1===e){for(n=[0],r=a*s,i=0;i<a;i++)for(o=0;o<s;o++)n[0]+=t[i][o];n[0]/=r}else if(0===e)for(n=Array(s),r=a,o=0;o<s;o++){for(n[o]=0,i=0;i<a;i++)n[o]+=t[i][o];n[o]/=r}else{if(1!==e)throw new Error("Invalid dimension");for(n=Array(a),r=s,o=0;o<a;o++){for(n[o]=0,i=0;i<s;i++)n[o]+=t[o][i];n[o]/=r}}return n},e.sum=function(t,e){"undefined"==typeof e&&(e=0);var n,r,i,o=t.length,a=t[0].length;if(-1===e)for(n=[0],r=0;r<o;r++)for(i=0;i<a;i++)n[0]+=t[r][i];else if(0===e)for(n=Array(a),i=0;i<a;i++)for(n[i]=0,r=0;r<o;r++)n[i]+=t[r][i];else{if(1!==e)throw new Error("Invalid dimension");for(n=Array(o),i=0;i<o;i++)for(n[i]=0,r=0;r<a;r++)n[i]+=t[i][r]}return n},e.product=function(t,e){"undefined"==typeof e&&(e=0);var n,r,i,o=t.length,a=t[0].length;if(-1===e)for(n=[1],r=0;r<o;r++)for(i=0;i<a;i++)n[0]*=t[r][i];else if(0===e)for(n=Array(a),i=0;i<a;i++)for(n[i]=1,r=0;r<o;r++)n[i]*=t[r][i];else{if(1!==e)throw new Error("Invalid dimension");for(n=Array(o),i=0;i<o;i++)for(n[i]=1,r=0;r<a;r++)n[i]*=t[i][r]}return n},e.standardDeviation=function(t,n,r){for(var i=e.variance(t,n,r),o=i.length,a=0;a<o;a++)i[a]=R(i[a]);return i},e.variance=function(t,n,r){"undefined"==typeof r&&(r=!0),n=n||e.mean(t);var i=t.length;if(0===i)return[];for(var o=t[0].length,a=Array(o),s=0;s<o;s++){for(var u=0,c=0,l=0,h=0;h<i;h++)u+=l=t[h][s]-n[s],c+=l*l;a[s]=r?(c-u*u/i)/(i-1):(c-u*u/i)/i}return a},e.median=function(t){for(var e,n=t.length,r=t[0].length,o=Array(r),a=0;a<r;a++){e=Array(n);for(var s=0;s<n;s++)e[s]=t[s][a];e.sort(i);var u=e.length;o[a]=0==u%2?.5*(e[u/2]+e[u/2-1]):e[g(u/2)]}return o},e.mode=function(t){var e,n,r=t.length,i=t[0].length,o=Array(i);for(e=0;e<i;e++){for(var a=Array(r),s=0;s<r;s++)a[s]=0;var u=Array(r),c=0;for(n=0;n<r;n++){var l=u.indexOf(t[n][e]);0<=l?a[l]++:(u[c]=t[n][e],a[c]=1,c++)}var h=0,f=0;for(n=0;n<c;n++)a[n]>h&&(h=a[n],f=n);o[e]=u[f]}return o},e.skewness=function(t,n){"undefined"==typeof n&&(n=!0);for(var r=e.mean(t),i=t.length,o=r.length,a=Array(o),s=0;s<o;s++){for(var u,l=0,h=0,f=0;f<i;f++)l+=(u=t[f][s]-r[s])*u,h+=u*u*u;var d=h/i/c(l/i,1.5);if(n){var p=R(i*(i-1));a[s]=p/(i-2)*d}else a[s]=d}return a},e.kurtosis=function(t,n){"undefined"==typeof n&&(n=!0);for(var r=e.mean(t),i=t.length,o=t[0].length,a=Array(o),s=0;s<o;s++){for(var u,c=0,l=0,h=0;h<i;h++)c+=(u=t[h][s]-r[s])*u,l+=u*u*u*u;var f=c/i,d=l/i;if(n){var p=c/(i-1);a[s]=i*(i+1)/((i-1)*(i-2)*(i-3))*(l/(p*p))-(i-1)*(i-1)/((i-2)*(i-3))*3}else a[s]=d/(f*f)-3}return a},e.standardError=function(t){for(var n=t.length,r=e.standardDeviation(t),i=r.length,o=Array(i),a=R(n),s=0;s<i;s++)o[s]=r[s]/a;return o},e.covariance=function(t,n){return e.scatter(t,void 0,n)},e.scatter=function(t,n,r){"undefined"==typeof r&&(r=0),"undefined"==typeof n&&(0===r?n=t.length-1:1===r&&(n=t[0].length-1));var i=e.mean(t,r),o=t.length;if(0===o)return[[]];var a,s,u,c,l,h=t[0].length;if(0===r){for(a=Array(h),s=0;s<h;s++)a[s]=Array(h);for(s=0;s<h;s++)for(u=s;u<h;u++){for(c=0,l=0;l<o;l++)c+=(t[l][u]-i[u])*(t[l][s]-i[s]);a[s][u]=c/=n,a[u][s]=c}}else{if(1!==r)throw new Error("Invalid dimension");for(a=Array(o),s=0;s<o;s++)a[s]=Array(o);for(s=0;s<o;s++)for(u=s;u<o;u++){for(c=0,l=0;l<h;l++)c+=(t[u][l]-i[u])*(t[s][l]-i[s]);a[s][u]=c/=n,a[u][s]=c}}return a},e.correlation=function(t){var n,r,i=e.mean(t),o=e.standardDeviation(t,!0,i),a=e.zScores(t,i,o),s=t.length,u=t[0].length,c=Array(u);for(n=0;n<u;n++)c[n]=Array(u);for(n=0;n<u;n++)for(r=n;r<u;r++){for(var l=0,h=0,f=a.length;h<f;h++)l+=a[h][r]*a[h][n];c[n][r]=l/=s-1,c[r][n]=l}return c},e.zScores=function(t,n,r){return n=n||e.mean(t),"undefined"==typeof r&&(r=e.standardDeviation(t,!0,n)),e.standardize(e.center(t,n,!1),r,!0)},e.center=function(t,n,r){n=n||e.mean(t);var i,o,a,s=t,u=t.length;if(!r)for(s=Array(u),i=0;i<u;i++)s[i]=Array(t[i].length);for(i=0;i<u;i++){var c=s[i];for(o=0,a=c.length;o<a;o++)c[o]=t[i][o]-n[o]}return s},e.standardize=function(t,n,r){"undefined"==typeof n&&(n=e.standardDeviation(t));var i,o,a,s=t,u=t.length;if(!r)for(s=Array(u),i=0;i<u;i++)s[i]=Array(t[i].length);for(i=0;i<u;i++){var c=s[i],l=t[i];for(o=0,a=c.length;o<a;o++)0===n[o]||isNaN(n[o])||(c[o]=l[o]/n[o])}return s},e.weightedVariance=function(t,n){var r=e.mean(t),i=t.length;if(0===i)return[];for(var o=t[0].length,a=Array(o),s=0;s<o;s++){for(var u=0,c=0,l=0,h=0;h<i;h++){var f=t[h][s]-r[s],d=n[h];u+=d*(f*f),l+=d,c+=d*d}a[s]=u*(l/(l*l-c))}return a},e.weightedMean=function(t,e,n){"undefined"==typeof n&&(n=0);var r=t.length;if(0===r)return[];var i,a,s,u,c,l,h=t[0].length;if(0===n){for(i=Array(h),a=0;a<h;a++)i[a]=0;for(a=0;a<r;a++)for(l=t[a],c=e[a],u=0;u<h;u++)i[u]+=l[u]*c}else{if(1!==n)throw new Error("Invalid dimension");for(i=Array(r),a=0;a<r;a++)i[a]=0;for(u=0;u<r;u++)for(l=t[u],c=e[u],a=0;a<h;a++)i[u]+=l[a]*c}var f=o.sum(e);if(0!==f)for(a=0,s=i.length;a<s;a++)i[a]/=f;return i},e.weightedCovariance=function(t,n,r,i){i=i||0,r=r||e.weightedMean(t,n,i);for(var o=0,a=0,s=0,u=n.length;s<u;s++)o+=n[s],a+=n[s]*n[s];return e.weightedScatter(t,n,r,o/(o*o-a),i)},e.weightedScatter=function(t,n,r,i,o){o=o||0,r=r||e.weightedMean(t,n,o),"undefined"==typeof i&&(i=1);var a=t.length;if(0===a)return[[]];var s,u,c,l,h,f=t[0].length;if(0===o){for(s=Array(f),u=0;u<f;u++)s[u]=Array(f);for(u=0;u<f;u++)for(c=u;c<f;c++){for(h=0,l=0;l<a;l++)h+=n[l]*(t[l][c]-r[c])*(t[l][u]-r[u]);s[u][c]=h*i,s[c][u]=h*i}}else{if(1!==o)throw new Error("Invalid dimension");for(s=Array(a),u=0;u<a;u++)s[u]=Array(a);for(u=0;u<a;u++)for(c=u;c<a;c++){for(h=0,l=0;l<f;l++)h+=n[l]*(t[c][l]-r[c])*(t[u][l]-r[u]);s[u][c]=h*i,s[c][u]=h*i}}return s}},function(n,r){"use strict";function i(e,n,r,i,o){function s(t,e,n,r){return(r-e)/(n-t)}var u=e.length,c=(i-r)/(o-1),l=r-c/2,h=Array(o),f=e[e.length-1]-e[e.length-2],d=l,p=l+c,m=t,g=0,v=e[0]-(e[1]-e[0]),y=0,w=0,x=0,b=0,_=0,M=0,S=0,E=0;t:for(;;){for(;0<=v-p;){var T=a(0,p-m,x,g);if(h[E]=((M=w+T)-_)/c,++E===o)break t;d=p,p+=c,_=M}m<=d&&d<=v&&(_=w+(T=a(0,d-m,x,g))),w+=a(m,v,x,b),m=v,g=y,S<u?(v=e[S],y=n[S],S++):S===u&&(v+=f,y=0),b=-(x=s(m,g,v,y))*m+g}return h}function o(t,n,r,i,o){var a=t.length,s=(i-r)/(o-1),u=t[t.length-1]-t[t.length-2],c=r-s/2,l=Array(o),h=c,f=c+s,d=-e,p=0,m=t[0],g=n[0],v=0,y=!0,w=0,x=0,b=1,_=0;t:for(;;){if(d>=m)throw new Error("x must be an increasing serie");for(;0<d-f;){if(y&&(x++,y=!1),l[_]=0>=x?0:w/x,++_===o)break t;h=f,f+=s,w=0,x=0}d>h&&(w+=p,x++),(d==-e||1<v)&&x--,d=m,p=g,b<a?(m=t[b],g=n[b],b++):(m+=u,g=0,v++)}return l}function a(t,e,n,r){return.5*n*e*e+r*e-(.5*n*t*t+r*t)}r.getEquallySpacedData=function(t,e,n){if(1<t.length&&t[0]>t[1]&&(t=t.slice().reverse(),e=e.slice().reverse()),t.length!==e.length)throw new RangeError("the x and y vector doesn't have the same size.");void 0===n&&(n={});var r=void 0===n.from?t[0]:n.from;if(isNaN(r)||!isFinite(r))throw new RangeError("'From' value must be a number");var a=void 0===n.to?t[t.length-1]:n.to;if(isNaN(a)||!isFinite(a))throw new RangeError("'To' value must be a number");var s=r>a;if(s){var u=r;r=a,a=u}var c=void 0===n.numberOfPoints?100:n.numberOfPoints;if(isNaN(c)||!isFinite(c))throw new RangeError("'Number of points' value must be a number");if(1>c)throw new RangeError("the number of point must be higher than 1");var l="slot"==("slot"===n.variant?"slot":"smooth")?o(t,e,r,a,c):i(t,e,r,a,c);return s?l.reverse():l},r.integral=a},function(t,e,n){"use strict";e.SNV=function(t){for(var e=r.mean(t),n=r.standardDeviation(t),i=t.slice(),o=0;o<t.length;o++)i[o]=(i[o]-e)/n;return i};var r=n(2).array},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),i=r&&r.__esModule?r:{default:r};e.default=class extends i.default{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),i=r&&r.__esModule?r:{default:r};e.default=class extends i.default{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),i=r&&r.__esModule?r:{default:r},o=n(23);e.default=class extends i.default{constructor(t,e,n,r,i){(0,o.checkRange)(t,e,n,r,i),super(t,n-e+1,i-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),i=r&&r.__esModule?r:{default:r},o=n(23);e.default=class extends i.default{constructor(t,e,n){var r=(0,o.checkIndices)(t,e,n);super(t,r.row.length,r.column.length),this.rowIndices=r.row,this.columnIndices=r.column}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),i=r&&r.__esModule?r:{default:r};e.default=class extends i.default{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),i=r&&r.__esModule?r:{default:r};e.default=class extends i.default{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),i=r&&r.__esModule?r:{default:r};e.default=class extends i.default{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return t=o.default.checkMatrix(t),e=o.default.checkMatrix(e),t.isSquare()?new a.default(t).solve(e):new s.default(t).solve(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.inverse=function(t){return i(t=o.default.checkMatrix(t),o.default.eye(t.rows))},e.solve=i;var o=r(n(4)),a=r(n(33)),s=r(n(53))},function(t,e,n){"use strict";function r(t,e){if(e=Object.assign({},d,e),!(this instanceof r))return new r(t,e);if(!(t=h.default.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");var n,u,c=t.columns,l=(0,f.getFilled2DArray)(c,c,0),p=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(n=0;n<c;n++)for(u=0;u<c;u++)l[n][u]=g.get(n,u);i(c,m,p,l),o(c,m,p,l)}else{var v=(0,f.getFilled2DArray)(c,c,0),y=Array(c);for(u=0;u<c;u++)for(n=0;n<c;n++)v[n][u]=g.get(n,u);a(c,v,y,l),s(c,m,p,l,v)}this.n=c,this.e=m,this.d=p,this.V=l}function i(t,e,n,r){var i,o,a,s,c,l,h,f;for(c=0;c<t;c++)n[c]=r[t-1][c];for(s=t-1;0<s;s--){for(f=0,a=0,l=0;l<s;l++)f+=u(n[l]);if(0===f)for(e[s]=n[s-1],c=0;c<s;c++)n[c]=r[s-1][c],r[s][c]=0,r[c][s]=0;else{for(l=0;l<s;l++)n[l]/=f,a+=n[l]*n[l];for(i=n[s-1],o=R(a),0<i&&(o=-o),e[s]=f*o,a-=i*o,n[s-1]=i-o,c=0;c<s;c++)e[c]=0;for(c=0;c<s;c++){for(r[c][s]=i=n[c],o=e[c]+r[c][c]*i,l=c+1;l<=s-1;l++)o+=r[l][c]*n[l],e[l]+=r[l][c]*i;e[c]=o}for(i=0,c=0;c<s;c++)e[c]/=a,i+=e[c]*n[c];for(h=i/(a+a),c=0;c<s;c++)e[c]-=h*n[c];for(c=0;c<s;c++){for(i=n[c],o=e[c],l=c;l<=s-1;l++)r[l][c]-=i*e[l]+o*n[l];n[c]=r[s-1][c],r[s][c]=0}}n[s]=a}for(s=0;s<t-1;s++){if(r[t-1][s]=r[s][s],r[s][s]=1,0!==(a=n[s+1])){for(l=0;l<=s;l++)n[l]=r[l][s+1]/a;for(c=0;c<=s;c++){for(o=0,l=0;l<=s;l++)o+=r[l][s+1]*r[l][c];for(l=0;l<=s;l++)r[l][c]-=o*n[l]}}for(l=0;l<=s;l++)r[l][s+1]=0}for(c=0;c<t;c++)n[c]=r[t-1][c],r[t-1][c]=0;r[t-1][t-1]=1,e[0]=0}function o(t,e,n,r){var i,o,a,s,c,l,h,d,p,m,g,v,y,w,x,b;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(n[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=(0,f.hypotenuse)(d=(n[l+1]-(i=n[l]))/(2*e[l]),1),0>d&&(p=-p),n[l]=e[l]/(d+p),n[l+1]=e[l]*(d+p),m=n[l+1],o=i-n[l],a=l+2;a<t;a++)n[a]-=o;for(_+=o,d=n[h],v=g=1,y=g,w=e[l+1],x=0,b=0,a=h-1;a>=l;a--)for(y=v,v=g,b=x,i=g*e[a],o=g*d,p=(0,f.hypotenuse)(d,e[a]),e[a+1]=x*p,d=(g=d/p)*n[a]-(x=e[a]/p)*i,n[a+1]=o+x*(g*i+x*n[a]),c=0;c<t;c++)r[c][a+1]=x*r[c][a]+g*(o=r[c][a+1]),r[c][a]=g*r[c][a]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),n[l]=g*d}while(u(e[l])>E*S);n[l]+=_,e[l]=0}for(a=0;a<t-1;a++){for(c=a,d=n[a],s=a+1;s<t;s++)n[s]<d&&(c=s,d=n[s]);if(c!==a)for(n[c]=n[a],n[a]=d,s=0;s<t;s++)d=r[s][a],r[s][a]=r[s][c],r[s][c]=d}}function a(t,e,n,r){var i,o,a,s,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,s=l;s<=f;s++)h+=u(e[s][l-1]);if(0!==h){for(a=0,s=f;s>=l;s--)n[s]=e[s][l-1]/h,a+=n[s]*n[s];for(o=R(a),0<n[l]&&(o=-o),a-=n[l]*o,n[l]-=o,c=l;c<t;c++){for(i=0,s=f;s>=l;s--)i+=n[s]*e[s][c];for(i/=a,s=l;s<=f;s++)e[s][c]-=i*n[s]}for(s=0;s<=f;s++){for(i=0,c=f;c>=l;c--)i+=n[c]*e[s][c];for(i/=a,c=l;c<=f;c++)e[s][c]-=i*n[c]}n[l]=h*n[l],e[l][l-1]=h*o}}for(s=0;s<t;s++)for(c=0;c<t;c++)r[s][c]=s===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(s=l+1;s<=f;s++)n[s]=e[s][l-1];for(c=l;c<=f;c++){for(o=0,s=l;s<=f;s++)o+=n[s]*r[s][c];for(o=o/n[l]/e[l][l-1],s=l;s<=f;s++)r[s][c]+=o*n[s]}}}function s(t,e,n,r,i){var o,a,s,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,C=0,k=0,O=0,P=0,D=0,L=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(n[o]=i[o][o],e[o]=0),a=M(o-1,0);a<t;a++)C+=u(i[o][a]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=C),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,n[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(L=R(u(O=(k=(i[S-1][S-1]-i[S][S])/2)*k+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=O){for(n[S-1]=p+(L=0<=k?k+L:k-L),n[S]=n[S-1],0!==L&&(n[S]=p-d/L),e[S-1]=0,e[S]=0,k=(p=i[S][S-1])/(D=u(p)+u(L)),k/=P=R(k*k+(O=L/D)*O),O/=P,a=S-1;a<t;a++)i[S-1][a]=O*(L=i[S-1][a])+k*i[S][a],i[S][a]=O*i[S][a]-k*L;for(o=0;o<=S;o++)i[o][S-1]=O*(L=i[o][S-1])+k*i[o][S],i[o][S]=O*i[o][S]-k*L;for(o=0;o<=E;o++)r[o][S-1]=O*(L=r[o][S-1])+k*r[o][S],r[o][S]=O*r[o][S]-k*L}else n[S-1]=p+k,n[S]=p+k,e[S-1]=L,e[S]=-L;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(k=((P=p-(L=i[h][h]))*(D=m-L)-d)/i[h+1][h]+i[h][h+1],O=i[h+1][h+1]-L-P-D,P=i[h+2][h+1],k/=D=u(k)+u(O)+u(P),O/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(O)+u(P))<T*(u(k)*(u(i[h-1][h-1])+u(L)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(s=h;s<=S-1&&(b=s!==S-1,s!==h&&(k=i[s][s-1],O=i[s+1][s-1],P=b?i[s+2][s-1]:0,0!==(p=u(k)+u(O)+u(P))&&(k/=p,O/=p,P/=p)),0!==p);s++)if(D=R(k*k+O*O+P*P),0>k&&(D=-D),0!==D){for(s===h?l!==h&&(i[s][s-1]=-i[s][s-1]):i[s][s-1]=-D*p,p=(k+=D)/D,m=O/D,L=P/D,O/=k,P/=k,a=s;a<t;a++)k=i[s][a]+O*i[s+1][a],b&&(i[s+2][a]=i[s+2][a]-(k+=P*i[s+2][a])*L),i[s][a]-=k*p,i[s+1][a]=i[s+1][a]-k*m;for(o=0;o<=v(S,s+3);o++)k=p*i[o][s]+m*i[o][s+1],b&&(i[o][s+2]=i[o][s+2]-(k+=L*i[o][s+2])*P),i[o][s]-=k,i[o][s+1]=i[o][s+1]-k*O;for(o=0;o<=E;o++)k=p*r[o][s]+m*r[o][s+1],b&&(r[o][s+2]=r[o][s+2]-(k+=L*r[o][s+2])*P),r[o][s]-=k,r[o][s+1]=r[o][s+1]-k*O}}}if(0!==C){for(S=t-1;0<=S;S--)if(k=n[S],0===(O=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-k,P=0,a=l;a<=S;a++)P+=i[o][a]*i[a][S];if(0>e[o])L=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*C):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-L*P)/(O=(n[o]-k)*(n[o]-k)+e[o]*e[o]),i[o+1][S]=u(p)>u(L)?(-P-d*f)/p:(-D-m*f)/L),1<T*(f=u(i[o][S]))*f)for(a=o;a<=S;a++)i[a][S]/=f}else if(0>O)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=O/i[S][S-1],i[S-1][S]=-(i[S][S]-k)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-k,O),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,a=l;a<=S;a++)g+=i[o][a]*i[a][S-1],y+=i[o][a]*i[a][S];if(d=i[o][o]-k,0>e[o])L=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,O),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(n[o]-k)*O,0==(w=(n[o]-k)*(n[o]-k)+e[o]*e[o]-O*O)&&0===x&&(w=T*C*(u(d)+u(O)+u(p)+u(m)+u(L))),_=c(p*P-L*g+O*y,p*D-L*y-O*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(L)+u(O)?(i[o+1][S-1]=(-g-d*i[o][S-1]+O*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-O*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],L,O),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(a=o;a<=S;a++)i[a][S-1]=i[a][S-1]/f,i[a][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(a=o;a<t;a++)r[o][a]=i[o][a];for(a=t-1;a>=0;a--)for(o=0;o<=E;o++){for(L=0,s=0;s<=v(a,E);s++)L+=r[o][s]*i[s][a];r[o][a]=L}}}function c(t,e,n,r){var i,o;return u(n)>u(r)?[(t+(i=r/n)*e)/(o=n+i*r),(e-i*t)/o]:[((i=n/r)*t+e)/(o=r+i*n),(i*e-t)/o]}Object.defineProperty(e,"__esModule",{value:!0});var l=n(4),h=l&&l.__esModule?l:{default:l},f=n(34),d={assumeSymmetric:!1};r.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return h.default.isMatrix(this.V)||(this.V=new h.default(this.V)),this.V},get diagonalMatrix(){var t,e,n=this.n,r=this.e,i=this.d,o=new h.default(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)o[t][e]=0;o[t][t]=i[t],0<r[t]?o[t][t+1]=r[t]:0>r[t]&&(o[t][t-1]=r[t])}return o}},e.default=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);if(!(t=o.default.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var e,n,i,a=t,s=a.rows,u=new o.default(s,s),c=!0;for(n=0;n<s;n++){var l=u[n],h=0;for(i=0;i<n;i++){var f=u[i],d=0;for(e=0;e<i;e++)d+=f[e]*l[e];l[i]=d=(a[n][i]-d)/u[i][i],h+=d*d}for(c&=0<(h=a[n][n]-h),u[n][n]=R(M(h,0)),i=n+1;i<s;i++)u[n][i]=0}if(!c)throw new Error("Matrix is not positive definite");this.L=u}Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=i&&i.__esModule?i:{default:i};r.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=o.default.checkMatrix(t);var e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");var r,i,a,s=t.columns,u=t.clone();for(a=0;a<n;a++)for(i=0;i<s;i++){for(r=0;r<a;r++)u[a][i]-=u[r][i]*e[a][r];u[a][i]/=e[a][a]}for(a=n-1;0<=a;a--)for(i=0;i<s;i++){for(r=a+1;r<n;r++)u[a][i]-=u[r][i]*e[r][a];u[a][i]/=e[a][a]}return u}},e.default=r},function(t,e,n){"use strict";function r(t){for(var e,n="",r=0;r<t.length;r++)e=(t[r]>>>0).toString(2),n+="00000000000000000000000000000000".substr(e.length)+e;return n}var i=n(120);t.exports={count:function(t){for(var e=0,n=0;n<t.length;n++)e+=i[255&t[n]]+i[255&t[n]>>8]+i[255&t[n]>>16]+i[255&t[n]>>24];return e},and:function(t,e){for(var n=Array(t.length),r=0;r<t.length;r++)n[r]=t[r]&e[r];return n},or:function(t,e){for(var n=Array(t.length),r=0;r<t.length;r++)n[r]=t[r]|e[r];return n},xor:function(t,e){for(var n=Array(t.length),r=0;r<t.length;r++)n[r]=t[r]^e[r];return n},not:function(t){for(var e=Array(t.length),n=0;n<e.length;n++)e[n]=~t[n];return e},getBit:function(t,e){return!!(t[e>>5]&1<<31-e%32)},setBit:function(t,e,n){var r=e>>5,i=1<<31-e%32;return t[r]=n?i|t[r]:~i&t[r],t},toBinaryString:r,parseBinaryString:function(t){for(var e=t.length/32,n=Array(e),r=0;r<e;r++)n[r]=0|parseInt(t.substr(32*r,32),2);return n},toHexString:function(t){for(var e,n="",r=0;r<t.length;r++)e=(t[r]>>>0).toString(16),n+="00000000".substr(e.length)+e;return n},parseHexString:function(t){for(var e=t.length/8,n=Array(e),r=0;r<e;r++)n[r]=0|parseInt(t.substr(8*r,8),16);return n},toDebug:function(t){for(var e=r(t),n="",i=0;i<t.length;i++){n+="0000".substr((32*i).toString(16).length)+(32*i).toString(16)+":";for(var o=0;32>o;o+=4)n+=" "+e.substr(32*i+o,4);i<t.length-1&&(n+="\n")}return n}}},function(t){"use strict";for(var e=Array(256),n=0;256>n;n++){for(var r=n,i=0;r;)r&=r-1,i++;e[n]=i}t.exports=e},function(t){"use strict";t.exports=function(t,e){t=t||0;for(var n=Array(t),r=0;r<t;r++)n[r]=e;return n}},function(t,e,n){"use strict";var r=n(55),i=n(56).asc,o=2147483647,a=[o,5,11,23,47,97,197,397,797,1597,3203,6421,12853,25717,51437,102877,205759,411527,823117,1646237,3292489,6584983,13169977,26339969,52679969,105359939,210719881,421439783,842879579,1685759167,433,877,1759,3527,7057,14143,28289,56591,113189,226379,452759,905551,1811107,3622219,7244441,14488931,28977863,57955739,115911563,231823147,463646329,927292699,1854585413,953,1907,3821,7643,15287,30577,61169,122347,244703,489407,978821,1957651,3915341,7830701,15661423,31322867,62645741,125291483,250582987,501165979,1002331963,2004663929,1039,2081,4177,8363,16729,33461,66923,133853,267713,535481,1070981,2141977,4283963,8567929,17135863,34271747,68543509,137087021,274174111,548348231,1096696463,31,67,137,277,557,1117,2237,4481,8963,17929,35863,71741,143483,286973,573953,1147921,2295859,4591721,9183457,18366923,36733847,73467739,146935499,293871013,587742049,1175484103,599,1201,2411,4831,9677,19373,38747,77509,155027,310081,620171,1240361,2480729,4961459,9922933,19845871,39691759,79383533,158767069,317534141,635068283,1270136683,311,631,1277,2557,5119,10243,20507,41017,82037,164089,328213,656429,1312867,2625761,5251529,10503061,21006137,42012281,84024581,168049163,336098327,672196673,1344393353,3,7,17,37,79,163,331,673,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,43,89,179,359,719,1439,2879,5779,11579,23159,46327,92657,185323,370661,741337,1482707,2965421,5930887,11861791,23723597,47447201,94894427,189788857,379577741,759155483,1518310967,379,761,1523,3049,6101,12203,24407,48817,97649,195311,390647,781301,1562611,3125257,6250537,12501169,25002389,50004791,100009607,200019221,400038451,800076929,1600153859,13,29,59,127,257,521,1049,2099,4201,8419,16843,33703,67409,134837,269683,539389,1078787,2157587,4315183,8630387,17260781,34521589,69043189,138086407,276172823,552345671,1104691373,19,41,83,167,337,677,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,53,107,223,449,907,1823,3659,7321,14653,29311,58631,117269,234539,469099,938207,1876417,3752839,7505681,15011389,30022781,60045577,120091177,240182359,480364727,960729461,1921458943];a.sort(i),e.nextPrime=function(t){var e=r(a,t,i);return 0>e&&(e=~e),a[e]},e.largestPrime=o},function(t){"use strict";t.exports=Number.isNaN||function(t){return t!=t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.RobustPolynomialRegression=e.TheilSenRegression=e.PolinomialFitting2D=e.KRR=e.KernelRidgeRegression=e.NonLinearRegression=e.NLR=e.MultivariateLinearRegression=e.PowerRegression=e.ExponentialRegression=e.PolynomialRegression=e.SLR=e.SimpleLinearRegression=void 0;var i=n(36);Object.defineProperty(e,"SimpleLinearRegression",{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(e,"SLR",{enumerable:!0,get:function(){return r(i).default}});var o=n(58);Object.defineProperty(e,"PolynomialRegression",{enumerable:!0,get:function(){return r(o).default}});var a=n(127);Object.defineProperty(e,"ExponentialRegression",{enumerable:!0,get:function(){return r(a).default}});var s=n(128);Object.defineProperty(e,"PowerRegression",{enumerable:!0,get:function(){return r(s).default}});var u=n(129);Object.defineProperty(e,"MultivariateLinearRegression",{enumerable:!0,get:function(){return r(u).default}});var c=n(130);Object.defineProperty(e,"KernelRidgeRegression",{enumerable:!0,get:function(){return r(c).default}}),Object.defineProperty(e,"KRR",{enumerable:!0,get:function(){return r(c).default}});var l=n(141);Object.defineProperty(e,"PolinomialFitting2D",{enumerable:!0,get:function(){return r(l).default}});var h=n(142);Object.defineProperty(e,"TheilSenRegression",{enumerable:!0,get:function(){return r(h).default}});var f=n(143);Object.defineProperty(e,"RobustPolynomialRegression",{enumerable:!0,get:function(){return r(f).default}});var d={PotentialRegression:r(n(144)).default};e.NLR=d,e.NonLinearRegression=d},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return 0>t?(t=0-t,"number"==typeof e?"- "+t.toPrecision(e):"- "+t.toString()):"number"==typeof e?t.toPrecision(e):t.toString()}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("x and y must be arrays");if(t.length!==e.length)throw new RangeError("x and y arrays must have the same length")}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),s=i(a),u=i(n(36));class c extends s.default{constructor(t,e){super(),!0===t?(this.A=e.A,this.B=e.B):((0,a.checkArrayLength)(t,e),function(t,e,n){for(var i=e.length,a=Array(i),s=0;s<i;s++)a[s]=r(n[s]);var c=new u.default(e,a);t.A=c.slope,t.B=o(c.intercept)}(this,t,e))}_predict(t){return this.B*o(t*this.A)}toJSON(){return{name:"exponentialRegression",A:this.A,B:this.B}}toString(t){return"f(x) = "+(0,a.maybeToPrecision)(this.B,t)+" * e^("+(0,a.maybeToPrecision)(this.A,t)+" * x)"}toLaTeX(t){return 0<=this.A?"f(x) = "+(0,a.maybeToPrecision)(this.B,t)+"e^{"+(0,a.maybeToPrecision)(this.A,t)+"x}":"f(x) = \\frac{"+(0,a.maybeToPrecision)(this.B,t)+"}{e^{"+(0,a.maybeToPrecision)(-this.A,t)+"x}}"}static load(t){if("exponentialRegression"!==t.name)throw new TypeError("not a exponential regression model");return new c(!0,t)}}e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),s=i(a),u=i(n(36));class l extends s.default{constructor(t,e){super(),!0===t?(this.A=e.A,this.B=e.B):((0,a.checkArrayLength)(t,e),function(t,e,n){for(var i=e.length,a=Array(i),s=Array(i),c=0;c<i;c++)a[c]=r(e[c]),s[c]=r(n[c]);var l=new u.default(a,s);t.A=o(l.intercept),t.B=l.slope}(this,t,e))}_predict(t){return this.A*c(t,this.B)}toJSON(){return{name:"powerRegression",A:this.A,B:this.B}}toString(t){return"f(x) = "+(0,a.maybeToPrecision)(this.A,t)+" * x^"+(0,a.maybeToPrecision)(this.B,t)}toLaTeX(t){return 0<=this.B?"f(x) = "+(0,a.maybeToPrecision)(this.A,t)+"x^{"+(0,a.maybeToPrecision)(this.B,t)+"}":"f(x) = \\frac{"+(0,a.maybeToPrecision)(this.A,t)+"}{x^{"+(0,a.maybeToPrecision)(-this.B,t)+"}}"}static load(t){if("powerRegression"!==t.name)throw new TypeError("not a power regression model");return new l(!0,t)}}e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(13),o=r(i),a=r(n(3));class s extends a.default{constructor(t,e,n={}){var r=n.intercept,a=!(void 0!==r)||r;super(),!0===t?(this.weights=e.weights,this.inputs=e.inputs,this.outputs=e.outputs,this.intercept=e.intercept):(a&&(t=new o.default(t)).addColumn(Array(t.length).fill(1)),this.weights=new i.SVD(t,{autoTranspose:!0}).solve(e).to2DArray(),this.inputs=t[0].length,this.outputs=e[0].length,a&&this.inputs--,this.intercept=a)}predict(t){if(Array.isArray(t)){if("number"==typeof t[0])return this._predict(t);if(Array.isArray(t[0])){for(var e=Array(t.length),n=0;n<t.length;n++)e[n]=this._predict(t[n]);return e}}throw new TypeError("x must be a matrix or array of numbers")}_predict(t){var e=Array(this.outputs);if(this.intercept)for(var n=0;n<this.outputs;n++)e[n]=this.weights[this.inputs][n];else e.fill(0);for(var r=0;r<this.inputs;r++)for(var i=0;i<this.outputs;i++)e[i]+=this.weights[r][i]*t[r];return e}score(){throw new Error("score method is not implemented yet")}toJSON(){return{name:"multivariateLinearRegression",weights:this.weights,inputs:this.inputs,outputs:this.outputs,intercept:this.intercept}}static load(t){if("multivariateLinearRegression"!==t.name)throw new Error("not a MLR model");return new s(!0,t)}}e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(13),o=r(n(37)),a=r(n(3)),s={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class u extends a.default{constructor(t,e,n){if(super(),!0===t)this.alpha=e.alpha,this.inputs=e.inputs,this.kernelType=e.kernelType,this.kernelOptions=e.kernelOptions,this.kernel=new o.default(e.kernelType,e.kernelOptions);else{n=Object.assign({},s,n);var r=new o.default(n.kernelType,n.kernelOptions),a=r.compute(t),u=t.length;a.add(i.Matrix.eye(u,u).mul(n.lambda)),this.alpha=(0,i.solve)(a,e),this.inputs=t,this.kernelType=n.kernelType,this.kernelOptions=n.kernelOptions,this.kernel=r}}_predict(t){return this.kernel.compute([t],this.inputs).mmul(this.alpha)[0]}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(t){if("kernelRidgeRegression"!==t.name)throw new TypeError("not a KRR model");return new u(!0,t)}}e.default=u},function(t,e,n){"use strict";var r=n(0).squared,i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma,this.divisor=2*t.sigma*t.sigma}compute(t,e){var n=r(t,e);return o(-n/this.divisor)}}},function(t){"use strict";var e={degree:1,constant:1,scale:1};t.exports=class{constructor(t){t=Object.assign({},e,t),this.degree=t.degree,this.constant=t.constant,this.scale=t.scale}compute(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return c(this.scale*n+this.constant,this.degree)}}},function(t){"use strict";var e={sigma:1,degree:1};t.exports=class{constructor(t){t=Object.assign({},e,t),this.sigma=t.sigma,this.degree=t.degree}compute(t,e){for(var n=0,r=v(t.length,e.length),i=1;i<=r;++i)n+=c(o(-this.sigma*c(c(t[i-1],i)-c(e[i-1],i),2)),this.degree);return n}}},function(t,e,n){"use strict";var r=n(0).squared,i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma}compute(t,e){return 1/(1+r(t,e)/(this.sigma*this.sigma))}}},function(t,e,n){"use strict";var r=n(0),i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma,this.divisor=2*t.sigma*t.sigma}compute(t,e){var n=r(t,e);return o(-n/this.divisor)}}},function(t){"use strict";t.exports=class{compute(t,e){for(var n=v(t.length,e.length),r=0,i=0;i<n;++i)r+=v(t[i],e[i]);return r}}},function(t,e,n){"use strict";var r=n(0),i={sigma:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.sigma=t.sigma}compute(t,e){var n=r(t,e);return o(-n/this.sigma)}}},function(t,e,n){"use strict";var r=n(0).squared,i={constant:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.constant=t.constant}compute(t,e){return R(r(t,e)+this.constant*this.constant)}}},function(t,e,n){"use strict";var r=n(0).squared,i={constant:1};t.exports=class{constructor(t){t=Object.assign({},i,t),this.constant=t.constant}compute(t,e){var n=r(t,e);return 1-n/(n+this.constant)}}},function(t){"use strict";var e={alpha:.01,constant:-Math.E};t.exports=class{constructor(t){t=Object.assign({},e,t),this.alpha=t.alpha,this.constant=t.constant}compute(t,e){for(var r=0,i=0;i<t.length;i++)r+=t[i]*e[i];return n(this.alpha*r+this.constant)}}},function(t,e,n){"use strict";function r(t,e){for(var n=t.clone(),r=0;r<t.rows;++r)n[r][0]=c(n[r][0],e);return n}function i(t,e){this[t][e]=u(this[t][e])}Object.defineProperty(e,"__esModule",{value:!0});var o=n(13),a=n(3),s=a&&a.__esModule?a:{default:a},l={order:2};class h extends s.default{constructor(t,e,n){super(),!0===t?(this.coefficients=o.Matrix.columnVector(e.coefficients),this.order=e.order,e.r&&(this.r=e.r,this.r2=e.r2),e.chi2&&(this.chi2=e.chi2)):(n=Object.assign({},l,n),this.order=n.order,this.coefficients=[],this.X=t,this.y=e,this.train(this.X,this.y,n))}train(t,e){if(o.Matrix.isMatrix(t)||(t=new o.Matrix(t)),o.Matrix.isMatrix(e)||(e=o.Matrix.columnVector(e)),e.rows!==t.rows&&(e=e.transpose()),2!==t.columns)throw new RangeError("You give X with "+t.columns+" columns and it must be 2");if(t.rows!==e.rows)throw new RangeError("X and y must have the same rows");var n=t.rows,a=(this.order+2)*(this.order+1)/2;this.coefficients=Array(a);var s=t.getColumnVector(0),u=t.getColumnVector(1),l=1/s.clone().apply(i).max(),h=1/u.clone().apply(i).max(),f=1/e.clone().apply(i).max();s.mulColumn(0,l),u.mulColumn(0,h),e.mulColumn(0,f);for(var d,p=new o.Matrix(n,a),m=0,g=0;g<=this.order;++g){d=this.order-g;for(var v,y=0;y<=d;++y)v=r(s,g).mulColumnVector(r(u,y)),p.setColumn(m,v),m++}var w=new o.SVD(p.transpose(),{computeLeftSingularVectors:!0,computeRightSingularVectors:!0,autoTranspose:!1}),x=o.Matrix.rowVector(w.diagonal);x=x.apply(function(t,e){this[t][e]=1e-15<=this[t][e]?1/this[t][e]:0});var b=o.Matrix.zeros(n,a);for(g=0;g<a;++g)b[g][g]=x[0][g];var _=w.rightSingularVectors;for(this.coefficients=w.leftSingularVectors.mmul((x=b).transpose()).mmul(_.transpose()).mmul(e),m=0,g=0;g<=a;++g)for(d=this.order-g,y=0;y<=d;++y)this.coefficients[m][0]=this.coefficients[m][0]*c(l,g)*c(h,y)/f,m++}_predict(t){for(var e=t[0],n=t[1],r=0,i=0,o=0;o<=this.order;o++)for(var a=0;a<=this.order-o;a++)r+=c(e,o)*c(n,a)*this.coefficients[i][0],i++;return r}toJSON(){return{name:"polyfit2D",order:this.order,coefficients:this.coefficients}}static load(t){if("polyfit2D"!==t.name)throw new TypeError("not a polyfit2D model");return new h(!0,t)}}e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=r&&r.__esModule?r:{default:r},o=n(2).array.median;class a extends i.default{constructor(t,e){super(),!0===t?(this.slope=e.slope,this.intercept=e.intercept,this.coefficients=e.coefficients):((0,r.checkArrayLength)(t,e),function(t,e,n){for(var r=e.length,i=Array(r*r),a=0,s=0;s<r;++s)for(var u=s+1;u<r;++u)e[s]!==e[u]&&(i[a++]=(n[u]-n[s])/(e[u]-e[s]));i.length=a;for(var c=o(i),l=Array(r),h=0;h<r;++h)l[h]=n[h]-c*e[h];t.slope=c,t.intercept=o(l),t.coefficients=[t.intercept,t.slope]}(this,t,e))}toJSON(){return{name:"TheilSenRegression",slope:this.slope,intercept:this.intercept}}_predict(t){return this.slope*t+this.intercept}computeX(t){return(t-this.intercept)/this.slope}toString(t){var e="f(x) = ";if(this.slope){var n=(0,r.maybeToPrecision)(this.slope,t);if(e+=(1e-5>u(n-1)?"":n+" * ")+"x",this.intercept){var i=u(this.intercept);e+=" "+(i===this.intercept?"+":"-")+" "+(0,r.maybeToPrecision)(i,t)}}else e+=(0,r.maybeToPrecision)(this.intercept,t);return e}toLaTeX(t){return this.toString(t)}static load(t){if("TheilSenRegression"!==t.name)throw new TypeError("not a Theil-Sen model");return new a(!0,t)}}e.default=a},function(t,e,n){"use strict";function r(t,e){for(var n=t.slice(),r=t.slice(),i=0;i<n.length;i++){r[i]=[t[i].y],n[i]=Array(e.length);for(var o=0;o<e.length;o++)n[i][o]=c(t[i].x,e[o])}return(0,u.solve)(n,r).to1DArray()}function i(t,e,n){for(var r=0,i=0;i<e.length;i++)r+=n[i]*c(t,e[i]);return r}function o(t){t.sort((t,e)=>t.residual-e.residual);var e=t.length,n=g(e/2);return 0==e%2?t[n-1]:t[n]}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),s=a&&a.__esModule?a:{default:a},u=n(13);class l extends s.default{constructor(t,e,n){super(),!0===t?(this.degree=e.degree,this.powers=e.powers,this.coefficients=e.coefficients):((0,a.checkArrayLength)(t,e),function(t,e,n,a){for(var s=Array(a),u=0;u<a;u++)s[u]=u;for(var c,l=function(t,e,n){for(var r=g(t.length/n),i=Array(r),o=0;o<t.length;o++){for(var a=g(Math.random()*r),s=0;s<t.length;){if(!i[a]){i[a]=[{x:t[o],y:e[o]}];break}if(i[a].length<n){i[a].push({x:t[o],y:e[o]});break}s++,a=(a+1)%r}if(s===t.length)return i}return i}(e,n,a),h=0;h<l.length;h++){for(var f=r(l[h],s),d=e.slice(),p=0;p<e.length;p++)d[p]=n[p]-i(e[p],s,f),d[p]={residual:d[p]*d[p],coefficients:f};var m=o(d);(!c||m.residual<c.residual)&&(c=m)}t.degree=a,t.powers=s,t.coefficients=c.coefficients}(this,t,e,n))}toJSON(){return{name:"robustPolynomialRegression",degree:this.degree,powers:this.powers,coefficients:this.coefficients}}_predict(t){return i(t,this.powers,this.coefficients)}toString(t){return this._toFormula(t,!1)}toLaTeX(t){return this._toFormula(t,!0)}_toFormula(t,e){var n="^",r="",i=" * ";e&&(n="^{",r="}",i="");for(var o="",s="",u=0;u<this.coefficients.length;u++)s="",0!==this.coefficients[u]&&(s=0===this.powers[u]?(0,a.maybeToPrecision)(this.coefficients[u],t):1===this.powers[u]?(0,a.maybeToPrecision)(this.coefficients[u],t)+i+"x":(0,a.maybeToPrecision)(this.coefficients[u],t)+i+"x"+n+this.powers[u]+r,0<this.coefficients[u]&&u!==this.coefficients.length-1?s=" + "+s:u!==this.coefficients.length-1&&(s=" "+s)),o=s+o;return"+"===o.charAt(0)&&(o=o.slice(1)),"f(x) = "+o}static load(t){if("robustPolynomialRegression"!==t.name)throw new TypeError("not a RobustPolynomialRegression model");return new l(!0,t)}}e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=r(i),a=r(n(58));class s extends o.default{constructor(t,e,n){if(super(),!0===t)this.A=e.A,this.M=e.M;else{if(t.length!==e.length)throw new RangeError("input and output array have a different length");var r=new a.default(t,e,[n]);this.A=r.coefficients[0],this.M=n}}_predict(t){return this.A*c(t,this.M)}toJSON(){return{name:"potentialRegression",A:this.A,M:this.M}}toString(t){return"f(x) = "+(0,i.maybeToPrecision)(this.A,t)+" * x^"+this.M}toLaTeX(t){return 0<=this.M?"f(x) = "+(0,i.maybeToPrecision)(this.A,t)+"x^{"+this.M+"}":"f(x) = \\frac{"+(0,i.maybeToPrecision)(this.A,t)+"}{x^{"+-this.M+"}}"}static load(t){if("potentialRegression"!==t.name)throw new TypeError("not a potential regression model");return new s(!0,t)}}e.default=s},function(t,e,n){"use strict";e.distance=n(146),e.similarity=n(183)},function(t,e,n){"use strict";e.additiveSymmetric=n(147),e.avg=n(148),e.bhattacharyya=n(149),e.canberra=n(150),e.chebyshev=n(151),e.clark=n(152),e.czekanowski=n(153),e.dice=n(60),e.divergence=n(154),e.euclidean=n(0),e.fidelity=n(155),e.gower=n(156),e.harmonicMean=n(157),e.hellinger=n(158),e.innerProduct=n(159),e.intersection=n(61),e.jaccard=n(62),e.jeffreys=n(160),e.jensenDifference=n(161),e.jensenShannon=n(162),e.kdivergence=n(163),e.kulczynski=n(63),e.kullbackLeibler=n(164),e.kumarHassebrook=n(165),e.kumarJohnson=n(166),e.lorentzian=n(167),e.manhattan=n(168),e.matusita=n(169),e.minkowski=n(170),e.motyka=n(64),e.neyman=n(171),e.pearson=n(172),e.probabilisticSymmetric=n(173),e.ruzicka=n(174),e.soergel=n(175),e.sorensen=n(176),e.squared=n(177),e.squaredChord=n(65),e.squaredEuclidean=n(0).squared,e.taneja=n(178),e.tanimoto=n(179),e.topsoe=n(180),e.tree=n(181),e.waveHedges=n(182)},function(t){"use strict";t.exports=function(t,e){for(var n=0,r=t.length,i=0;n<r;n++)i+=(t[n]-e[n])*(t[n]-e[n])*(t[n]+e[n])/(t[n]*e[n]);return 2*i}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0,o=0,a=0;a<n;a++)i+=o=u(t[a]-e[a]),r<o&&(r=o);return(r+i)/2}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=R(t[o]*e[o]);return-r(i)}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0;i<n;i++)r+=u(t[i]-e[i])/(t[i]+e[i]);return r}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0,o=0;o<n;o++)r<(i=u(t[o]-e[o]))&&(r=i);return r}},function(t){"use strict";t.exports=function(t,e){for(var n=0,r=t.length,i=0;n<r;n++)i+=R((t[n]-e[n])*(t[n]-e[n])/((t[n]+e[n])*(t[n]+e[n])));return 2*i}},function(t,e,n){"use strict";var r=n(59);t.exports=function(t,e){return 1-r(t,e)}},function(t){"use strict";t.exports=function(t,e){for(var n=0,r=t.length,i=0;n<r;n++)i+=(t[n]-e[n])*(t[n]-e[n])/((t[n]+e[n])*(t[n]+e[n]));return 2*i}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0;i<n;i++)r+=R(t[i]*e[i]);return r}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0;i<n;i++)r+=u(t[i]-e[i]);return r/n}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0;i<n;i++)r+=t[i]*e[i]/(t[i]+e[i]);return 2*r}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0;i<n;i++)r+=R(t[i]*e[i]);return 2*R(1-r)}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0;i<n;i++)r+=t[i]*e[i];return r}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=(t[o]-e[o])*r(t[o]/e[o]);return i}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=(t[o]*r(t[o])+e[o]*r(e[o]))/2-(t[o]+e[o])/2*r((t[o]+e[o])/2);return i}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,i=0,o=0,a=0;a<n;a++)i+=t[a]*r(2*t[a]/(t[a]+e[a])),o+=e[a]*r(2*e[a]/(t[a]+e[a]));return(i+o)/2}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=t[o]*r(2*t[o]/(t[o]+e[o]));return i}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=t[o]*r(t[o]/e[o]);return i}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0,o=0,a=0;a<n;a++)r+=t[a]*e[a],i+=t[a]*t[a],o+=e[a]*e[a];return r/(i+o-r)}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0;i<n;i++)r+=c(t[i]*t[i]-e[i]*e[i],2)/(2*c(t[i]*e[i],1.5));return r}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=r(u(t[o]-e[o])+1);return i}},function(t){"use strict";t.exports=function(t,e){for(var n=0,r=t.length,i=0;n<r;n++)i+=u(t[n]-e[n]);return i}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0;i<n;i++)r+=R(t[i]*e[i]);return R(2-2*r)}},function(t){"use strict";t.exports=function(t,e,n){for(var r=0,i=t.length,o=0;r<i;r++)o+=c(u(t[r]-e[r]),n);return c(o,1/n)}},function(t){"use strict";t.exports=function(t,e){for(var n=0,r=t.length,i=0;n<r;n++)i+=(t[n]-e[n])*(t[n]-e[n])/t[n];return i}},function(t){"use strict";t.exports=function(t,e){for(var n=0,r=t.length,i=0;n<r;n++)i+=(t[n]-e[n])*(t[n]-e[n])/e[n];return i}},function(t){"use strict";t.exports=function(t,e){for(var n=0,r=t.length,i=0;n<r;n++)i+=(t[n]-e[n])*(t[n]-e[n])/(t[n]+e[n]);return 2*i}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0,o=0;o<n;o++)r+=v(t[o],e[o]),i+=M(t[o],e[o]);return r/i}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0,o=0;o<n;o++)r+=u(t[o]-e[o]),i+=M(t[o],e[o]);return r/i}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0,o=0;o<n;o++)r+=u(t[o]-e[o]),i+=t[o]+e[o];return r/i}},function(t){"use strict";t.exports=function(t,e){for(var n=0,r=t.length,i=0;n<r;n++)i+=(t[n]-e[n])*(t[n]-e[n])/(t[n]+e[n]);return i}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=(t[o]+e[o])/2*r((t[o]+e[o])/(2*R(t[o]*e[o])));return i}},function(t,e,n){"use strict";var r=n(66);t.exports=function(t,e,n){if(n)return 1-r(t,e,n);for(var i=t.length,o=0,a=0,s=0,u=0;u<i;u++)o+=t[u],a+=e[u],s+=v(t[u],e[u]);return(o+a-2*s)/(o+a-s)}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i+=t[o]*r(2*t[o]/(t[o]+e[o]))+e[o]*r(2*e[o]/(t[o]+e[o]));return i}},function(t){"use strict";function e(t,n,r,i,o,a){if(o=o||.16,a=a||.01,!(i-r<o)){for(var s=0,u=0;t[u]<i;u++)t[u]>r&&(s+=n[u]);if(!(s<a)){for(var c=0,l=0;t[l]<i;l++)t[u]>r&&(c+=t[l]*n[l]);return 1e-5>(c/=s)-r||1e-5>i-c?void 0:c-r<o/4?e(t,n,c,i,o,a):i-c<o/4?e(t,n,r,c,o,a):{sum:s,center:c,left:e(t,n,r,c,o,a),right:e(t,n,c,i,o,a)}}}}var n={minWindow:.16,threshold:.01,alpha:.1,beta:.33,gamma:.001};t.exports={calc:function(t,r,i,a,s){for(var c in s=s||{},n)s.hasOwnProperty(c)||(s[c]=n[c]);return function t(e,n,r,i,a){return void 0===e||void 0===n?0:i*(r*v(e.sum,n.sum)/M(e.sum,n.sum)+(1-r)*o(-a*u(e.center-n.center)))+(1-i)*(t(e.left,n.left,r,i,a)+t(e.right,n.right,r,i,a))}(t.sum?t:e(t.x,t.y,i,a,s.minWindow,s.threshold),r.sum?r:e(r.x,r.y,i,a,s.minWindow,s.threshold),s.alpha,s.beta,s.gamma)},createTree:e}},function(t){"use strict";t.exports=function(t,e){for(var n=t.length,r=0,i=0;i<n;i++)r+=1-v(t[i],e[i])/M(t[i],e[i]);return r}},function(t,e,n){"use strict";e.cosine=n(67),e.czekanowski=n(59),e.dice=n(184),e.intersection=n(185),e.jaccard=n(186),e.kulczynski=n(187),e.motyka=n(188),e.pearson=n(189),e.squaredChord=n(190),e.tanimoto=n(66)},function(t,e,n){"use strict";var r=n(60);t.exports=function(t,e){return 1-r(t,e)}},function(t,e,n){"use strict";var r=n(61);t.exports=function(t,e){return 1-r(t,e)}},function(t,e,n){"use strict";var r=n(62);t.exports=function(t,e){return 1-r(t,e)}},function(t,e,n){"use strict";var r=n(63);t.exports=function(t,e){return 1/r(t,e)}},function(t,e,n){"use strict";var r=n(64);t.exports=function(t,e){return 1-r(t,e)}},function(t,e,n){"use strict";var r=n(2).array,i=n(67);t.exports=function(t,e){for(var n=r.mean(t),o=r.mean(e),a=Array(t.length),s=Array(e.length),u=0;u<a.length;u++)a[u]=t[u]-n,s[u]=e[u]-o;return i(a,s)}},function(t,e,n){"use strict";var r=n(65);t.exports=function(t,e){return 1-r(t,e)}},function(t,e,n){"use strict";var r=n(192),i=n(57),o=n(35),a={windowSize:5,derivative:1,polynomial:2,pad:"none",padValue:"replicate"};t.exports=function(t,e,n){if(0==(n=o({},a,n)).windowSize%2||5>n.windowSize||!m(n.windowSize))throw new RangeError("Invalid window size (should be odd and at least 5 integer number)");if(0>n.derivative||!m(n.derivative))throw new RangeError("Derivative should be a positive integer");if(1>n.polynomial||!m(n.polynomial))throw new RangeError("Polynomial should be a positive integer");var s,u,l=g(n.windowSize/2);"pre"===n.pad&&(t=i(t,{size:l,value:n.padValue}));var h=Array(t.length-2*l);if(5!==n.windowSize||2!==n.polynomial||1!==n.derivative&&2!==n.derivative){for(var f=r.ones(n.windowSize,n.polynomial+1),d=-(n.windowSize-1)/2,p=0;p<f.length;p++)for(var v=0;v<f[p].length;v++)(0!=d+1||0!==v)&&(f[p][v]=c(d+p,v));var y=f.transposeView();s=(s=y.mmul(f).inverse().mmul(y))[n.derivative],u=1}else 1===n.derivative?(s=[-2,-1,0,1,2],u=10):(s=[2,-1,-2,-1,2],u=7);for(var w,x=u*c(e,n.derivative),b=l;b<t.length-l;b++){w=0;for(var _=0;_<s.length;_++)w+=s[_]*t[_+b-l]/x;h[b-l]=w}return"post"===n.pad&&(h=i(h,{size:l,value:n.padValue})),h}},function(t,e,n){"use strict";t.exports=n(5).Matrix,t.exports.Decompositions=t.exports.DC=n(201)},function(){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},function(t,e,n){"use strict";var r=n(15);t.exports=class extends r{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,n){"use strict";var r=n(15);t.exports=class extends r{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,n){"use strict";var r=n(15),i=n(24);t.exports=class extends r{constructor(t,e,n,r,o){i.checkRange(t,e,n,r,o),super(t,n-e+1,o-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,n){"use strict";var r=n(15),i=n(24);t.exports=class extends r{constructor(t,e,n){var r=i.checkIndices(t,e,n);super(t,r.row.length,r.column.length),this.rowIndices=r.row,this.columnIndices=r.column}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,n){"use strict";var r=n(15);t.exports=class extends r{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,n){"use strict";var r=n(15);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,n){"use strict";var r=n(15);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,n){"use strict";function r(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=n(5).Matrix,a=n(71),s=n(202),u=n(70),c=n(203),l=n(204);o.inverse=o.inv=r,o.prototype.inverse=o.prototype.inv=function(){return r(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:a,SVD:a,EigenvalueDecomposition:s,EVD:s,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:r,solve:i}},function(t,e,n){"use strict";function r(t,e){if(e=Object.assign({},p,e),!(this instanceof r))return new r(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");var n,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(n=0;n<c;n++)for(u=0;u<c;u++)h[n][u]=g.get(n,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(n=0;n<c;n++)v[n][u]=g.get(n,u);a(c,v,y,h),s(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,n,r){var i,o,a,s,c,l,h,f;for(c=0;c<t;c++)n[c]=r[t-1][c];for(s=t-1;0<s;s--){for(f=0,a=0,l=0;l<s;l++)f+=u(n[l]);if(0===f)for(e[s]=n[s-1],c=0;c<s;c++)n[c]=r[s-1][c],r[s][c]=0,r[c][s]=0;else{for(l=0;l<s;l++)n[l]/=f,a+=n[l]*n[l];for(i=n[s-1],o=R(a),0<i&&(o=-o),e[s]=f*o,a-=i*o,n[s-1]=i-o,c=0;c<s;c++)e[c]=0;for(c=0;c<s;c++){for(r[c][s]=i=n[c],o=e[c]+r[c][c]*i,l=c+1;l<=s-1;l++)o+=r[l][c]*n[l],e[l]+=r[l][c]*i;e[c]=o}for(i=0,c=0;c<s;c++)e[c]/=a,i+=e[c]*n[c];for(h=i/(a+a),c=0;c<s;c++)e[c]-=h*n[c];for(c=0;c<s;c++){for(i=n[c],o=e[c],l=c;l<=s-1;l++)r[l][c]-=i*e[l]+o*n[l];n[c]=r[s-1][c],r[s][c]=0}}n[s]=a}for(s=0;s<t-1;s++){if(r[t-1][s]=r[s][s],r[s][s]=1,0!==(a=n[s+1])){for(l=0;l<=s;l++)n[l]=r[l][s+1]/a;for(c=0;c<=s;c++){for(o=0,l=0;l<=s;l++)o+=r[l][s+1]*r[l][c];for(l=0;l<=s;l++)r[l][c]-=o*n[l]}}for(l=0;l<=s;l++)r[l][s+1]=0}for(c=0;c<t;c++)n[c]=r[t-1][c],r[t-1][c]=0;r[t-1][t-1]=1,e[0]=0}function o(t,e,n,r){var i,o,a,s,c,l,h,d,p,m,g,v,y,w,x,b;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(n[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(n[l+1]-(i=n[l]))/(2*e[l]),1),0>d&&(p=-p),n[l]=e[l]/(d+p),n[l+1]=e[l]*(d+p),m=n[l+1],o=i-n[l],a=l+2;a<t;a++)n[a]-=o;for(_+=o,d=n[h],v=g=1,y=g,w=e[l+1],x=0,b=0,a=h-1;a>=l;a--)for(y=v,v=g,b=x,i=g*e[a],o=g*d,p=f(d,e[a]),e[a+1]=x*p,d=(g=d/p)*n[a]-(x=e[a]/p)*i,n[a+1]=o+x*(g*i+x*n[a]),c=0;c<t;c++)r[c][a+1]=x*r[c][a]+g*(o=r[c][a+1]),r[c][a]=g*r[c][a]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),n[l]=g*d}while(u(e[l])>E*S);n[l]+=_,e[l]=0}for(a=0;a<t-1;a++){for(c=a,d=n[a],s=a+1;s<t;s++)n[s]<d&&(c=s,d=n[s]);if(c!==a)for(n[c]=n[a],n[a]=d,s=0;s<t;s++)d=r[s][a],r[s][a]=r[s][c],r[s][c]=d}}function a(t,e,n,r){var i,o,a,s,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,s=l;s<=f;s++)h+=u(e[s][l-1]);if(0!==h){for(a=0,s=f;s>=l;s--)n[s]=e[s][l-1]/h,a+=n[s]*n[s];for(o=R(a),0<n[l]&&(o=-o),a-=n[l]*o,n[l]-=o,c=l;c<t;c++){for(i=0,s=f;s>=l;s--)i+=n[s]*e[s][c];for(i/=a,s=l;s<=f;s++)e[s][c]-=i*n[s]}for(s=0;s<=f;s++){for(i=0,c=f;c>=l;c--)i+=n[c]*e[s][c];for(i/=a,c=l;c<=f;c++)e[s][c]-=i*n[c]}n[l]=h*n[l],e[l][l-1]=h*o}}for(s=0;s<t;s++)for(c=0;c<t;c++)r[s][c]=s===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(s=l+1;s<=f;s++)n[s]=e[s][l-1];for(c=l;c<=f;c++){for(o=0,s=l;s<=f;s++)o+=n[s]*r[s][c];for(o=o/n[l]/e[l][l-1],s=l;s<=f;s++)r[s][c]+=o*n[s]}}}function s(t,e,n,r,i){var o,a,s,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,C=0,k=0,O=0,P=0,D=0,L=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(n[o]=i[o][o],e[o]=0),a=M(o-1,0);a<t;a++)C+=u(i[o][a]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=C),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,n[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(L=R(u(O=(k=(i[S-1][S-1]-i[S][S])/2)*k+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=O){for(n[S-1]=p+(L=0<=k?k+L:k-L),n[S]=n[S-1],0!==L&&(n[S]=p-d/L),e[S-1]=0,e[S]=0,k=(p=i[S][S-1])/(D=u(p)+u(L)),k/=P=R(k*k+(O=L/D)*O),O/=P,a=S-1;a<t;a++)i[S-1][a]=O*(L=i[S-1][a])+k*i[S][a],i[S][a]=O*i[S][a]-k*L;for(o=0;o<=S;o++)i[o][S-1]=O*(L=i[o][S-1])+k*i[o][S],i[o][S]=O*i[o][S]-k*L;for(o=0;o<=E;o++)r[o][S-1]=O*(L=r[o][S-1])+k*r[o][S],r[o][S]=O*r[o][S]-k*L}else n[S-1]=p+k,n[S]=p+k,e[S-1]=L,e[S]=-L;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(k=((P=p-(L=i[h][h]))*(D=m-L)-d)/i[h+1][h]+i[h][h+1],O=i[h+1][h+1]-L-P-D,P=i[h+2][h+1],k/=D=u(k)+u(O)+u(P),O/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(O)+u(P))<T*(u(k)*(u(i[h-1][h-1])+u(L)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(s=h;s<=S-1&&(b=s!==S-1,s!==h&&(k=i[s][s-1],O=i[s+1][s-1],P=b?i[s+2][s-1]:0,0!==(p=u(k)+u(O)+u(P))&&(k/=p,O/=p,P/=p)),0!==p);s++)if(D=R(k*k+O*O+P*P),0>k&&(D=-D),0!==D){for(s===h?l!==h&&(i[s][s-1]=-i[s][s-1]):i[s][s-1]=-D*p,p=(k+=D)/D,m=O/D,L=P/D,O/=k,P/=k,a=s;a<t;a++)k=i[s][a]+O*i[s+1][a],b&&(i[s+2][a]=i[s+2][a]-(k+=P*i[s+2][a])*L),i[s][a]-=k*p,i[s+1][a]=i[s+1][a]-k*m;for(o=0;o<=v(S,s+3);o++)k=p*i[o][s]+m*i[o][s+1],b&&(i[o][s+2]=i[o][s+2]-(k+=L*i[o][s+2])*P),i[o][s]-=k,i[o][s+1]=i[o][s+1]-k*O;for(o=0;o<=E;o++)k=p*r[o][s]+m*r[o][s+1],b&&(r[o][s+2]=r[o][s+2]-(k+=L*r[o][s+2])*P),r[o][s]-=k,r[o][s+1]=r[o][s+1]-k*O}}}if(0!==C){for(S=t-1;0<=S;S--)if(k=n[S],0===(O=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-k,P=0,a=l;a<=S;a++)P+=i[o][a]*i[a][S];if(0>e[o])L=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*C):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-L*P)/(O=(n[o]-k)*(n[o]-k)+e[o]*e[o]),i[o+1][S]=u(p)>u(L)?(-P-d*f)/p:(-D-m*f)/L),1<T*(f=u(i[o][S]))*f)for(a=o;a<=S;a++)i[a][S]/=f}else if(0>O)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=O/i[S][S-1],i[S-1][S]=-(i[S][S]-k)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-k,O),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,a=l;a<=S;a++)g+=i[o][a]*i[a][S-1],y+=i[o][a]*i[a][S];if(d=i[o][o]-k,0>e[o])L=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,O),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(n[o]-k)*O,0==(w=(n[o]-k)*(n[o]-k)+e[o]*e[o]-O*O)&&0===x&&(w=T*C*(u(d)+u(O)+u(p)+u(m)+u(L))),_=c(p*P-L*g+O*y,p*D-L*y-O*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(L)+u(O)?(i[o+1][S-1]=(-g-d*i[o][S-1]+O*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-O*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],L,O),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(a=o;a<=S;a++)i[a][S-1]=i[a][S-1]/f,i[a][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(a=o;a<t;a++)r[o][a]=i[o][a];for(a=t-1;a>=0;a--)for(o=0;o<=E;o++){for(L=0,s=0;s<=v(a,E);s++)L+=r[o][s]*i[s][a];r[o][a]=L}}}function c(t,e,n,r){var i,o;return u(n)>u(r)?[(t+(i=r/n)*e)/(o=n+i*r),(e-i*t)/o]:[((i=n/r)*t+e)/(o=r+i*n),(i*e-t)/o]}var l=n(5).Matrix,h=n(38),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};r.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,n=this.n,r=this.e,i=this.d,o=new l(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)o[t][e]=0;o[t][t]=i[t],0<r[t]?o[t][t+1]=r[t]:0>r[t]&&(o[t][t-1]=r[t])}return o}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,a,s,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(a=0;a<l;a++){var f=0;for(e=a;e<c;e++)f=o(f,u[e][a]);if(0!==f){for(0>u[a][a]&&(f=-f),e=a;e<c;e++)u[e][a]/=f;for(u[a][a]+=1,n=a+1;n<l;n++){for(s=0,e=a;e<c;e++)s+=u[e][a]*u[e][n];for(s=-s/u[a][a],e=a;e<c;e++)u[e][n]+=s*u[e][a]}}h[a]=-f}this.QR=u,this.Rdiag=h}var i=n(5).Matrix,o=n(38).hypotenuse;r.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r,o,a,s,u=t.columns,c=t.clone(),l=e.columns;for(a=0;a<l;a++)for(o=0;o<u;o++){for(s=0,r=a;r<n;r++)s+=e[r][a]*c[r][o];for(s=-s/e[a][a],r=a;r<n;r++)c[r][o]+=s*e[r][a]}for(a=l-1;0<=a;a--){for(o=0;o<u;o++)c[a][o]/=this.Rdiag[a];for(r=0;r<a;r++)for(o=0;o<u;o++)c[r][o]-=c[a][o]*e[r][a]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,n=this.QR,r=n.columns,o=new i(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)o[t][e]=t<e?n[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,n,r,o=this.QR,a=o.rows,s=o.columns,u=new i(a,s);for(n=s-1;0<=n;n--){for(t=0;t<a;t++)u[t][n]=0;for(u[n][n]=1,e=n;e<s;e++)if(0!==o[n][n]){for(r=0,t=n;t<a;t++)r+=o[t][n]*u[t][e];for(r=-r/o[n][n],t=n;t<a;t++)u[t][e]+=r*o[t][n]}}return u}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var e,n,o,a=t,s=a.rows,u=new i(s,s),c=!0;for(n=0;n<s;n++){var l=u[n],h=0;for(o=0;o<n;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(a[n][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=a[n][n]-h),u[n][n]=R(M(h,0)),o=n+1;o<s;o++)u[n][o]=0}if(!c)throw new Error("Matrix is not positive definite");this.L=u}var i=n(5).Matrix;r.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");var r,o,a,s=t.columns,u=t.clone();for(a=0;a<n;a++)for(o=0;o<s;o++){for(r=0;r<a;r++)u[a][o]-=u[r][o]*e[a][r];u[a][o]/=e[a][a]}for(a=n-1;0<=a;a--)for(o=0;o<s;o++){for(r=a+1;r<n;r++)u[a][o]-=u[r][o]*e[r][a];u[a][o]/=e[a][a]}return u}},t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){for(var i=0,o=0,a=e-n;a<e+n;a++)0<=a&&a<t.length-1&&(i+=t[a+1]-t[a],o++);return c(i/o,r)}function i(t,e,n,r){return 0<n?(4*n-2)/(n*(2*e-n+1))*(t*i(t,e,n-1,r)+r*i(t,e,n-1,r-1))-(n-1)*(2*e+n)/(n*(2*e-n+1))*i(t,e,n-2,r):0==n&&0==r?1:0}function o(t,e){var n=1;if(t>=e)for(var r=t-e+1;r<=t;r++)n*=r;return n}function a(t,e,n,r,a){for(var s=0,u=0;u<=r;u++)s+=(2*u+1)*(o(2*n,u)/o(2*n+u+1,u+1))*i(t,n,u,0)*i(e,n,u,a);return s}function s(t,e,n){for(var r=Array(t),i=g(t/2),o=-i;o<=i;o++){r[o+i]=Array(t);for(var s=-i;s<=i;s++)r[o+i][s+i]=a(s,o,i,e,n)}return r}var u=n(35),l=(n(206),{windowSize:9,derivative:0,polynomial:3});t.exports=function(t,e,n){if(0==(n=u({},l,n)).windowSize%2||5>n.windowSize||!m(n.windowSize))throw new RangeError("Invalid window size (should be odd and at least 5 integer number)");if(n.windowSize>t.length)throw new RangeError("Window size is higher than the data length "+n.windowSize+">"+t.length);if(0>n.derivative||!m(n.derivative))throw new RangeError("Derivative should be a positive integer");if(1>n.polynomial||!m(n.polynomial))throw new RangeError("Polynomial should be a positive integer");6<=n.polynomial&&console.warn("You should not use polynomial grade higher than 5 if you are not sure that your data arises from such a model. Possible polynomial oscillation problems");var i=n.windowSize,o=g(i/2),a=t.length,h=Array(a),f=s(i,n.polynomial,n.derivative),d=0,p=!0;"[object Array]"===Object.prototype.toString.call(e)?p=!1:d=c(e,n.derivative);for(var v=0;v<o;v++){for(var y=f[o-v-1],w=f[o+v+1],x=0,b=0,_=0;_<i;_++)x+=y[_]*t[_],b+=w[_]*t[a-i+_-1];p?(h[o-v-1]=x/d,h[a-o+v]=b/d):(d=r(e,o-v-1,o,n.derivative),h[o-v-1]=x/d,d=r(e,a-o+v,o,n.derivative),h[a-o+v]=b/d)}var M,S=f[o];for(v=i;v<a+1;v++){for(M=0,_=0;_<i;_++)M+=S[_]*t[_+v-i];p||(d=r(e,v-o-1,o,n.derivative)),h[v-o-1]=M/d}return h}},function(t,e,n){"use strict";e.array=n(72),e.matrix=n(207)},function(t,e,n){"use strict";function i(t,e){"undefined"==typeof e&&(e=0);var n,r,i,o,a=t.length,s=t[0].length;if(-1===e){for(n=[0],r=a*s,i=0;i<a;i++)for(o=0;o<s;o++)n[0]+=t[i][o];n[0]/=r}else if(0===e)for(n=Array(s),r=a,o=0;o<s;o++){for(n[o]=0,i=0;i<a;i++)n[o]+=t[i][o];n[o]/=r}else{if(1!==e)throw new Error("Invalid dimension");for(n=Array(a),r=s,o=0;o<a;o++){for(n[o]=0,i=0;i<s;i++)n[o]+=t[o][i];n[o]/=r}}return n}function o(t,e,n){for(var r=a(t,e,n),i=r.length,o=0;o<i;o++)r[o]=R(r[o]);return r}function a(t,e,n){"undefined"==typeof n&&(n=!0),e=e||i(t);var r=t.length;if(0===r)return[];for(var o=t[0].length,a=Array(o),s=0;s<o;s++){for(var u=0,c=0,l=0,h=0;h<r;h++)u+=l=t[h][s]-e[s],c+=l*l;a[s]=n?(c-u*u/r)/(r-1):(c-u*u/r)/r}return a}function s(t,e,n){"undefined"==typeof n&&(n=0),"undefined"==typeof e&&(0===n?e=t.length-1:1===n&&(e=t[0].length-1));var r=i(t,n),o=t.length;if(0===o)return[[]];var a,s,u,c,l,h=t[0].length;if(0===n){for(a=Array(h),s=0;s<h;s++)a[s]=Array(h);for(s=0;s<h;s++)for(u=s;u<h;u++){for(c=0,l=0;l<o;l++)c+=(t[l][u]-r[u])*(t[l][s]-r[s]);a[s][u]=c/=e,a[u][s]=c}}else{if(1!==n)throw new Error("Invalid dimension");for(a=Array(o),s=0;s<o;s++)a[s]=Array(o);for(s=0;s<o;s++)for(u=s;u<o;u++){for(c=0,l=0;l<h;l++)c+=(t[u][l]-r[u])*(t[s][l]-r[s]);a[s][u]=c/=e,a[u][s]=c}}return a}function u(t,e,n){return e=e||i(t),"undefined"==typeof n&&(n=o(t,!0,e)),h(l(t,e,!1),n,!0)}function l(t,e,n){e=e||i(t);var r,o,a,s=t,u=t.length;if(!n)for(s=Array(u),r=0;r<u;r++)s[r]=Array(t[r].length);for(r=0;r<u;r++){var c=s[r];for(o=0,a=c.length;o<a;o++)c[o]=t[r][o]-e[o]}return s}function h(t,e,n){"undefined"==typeof e&&(e=o(t));var r,i,a,s=t,u=t.length;if(!n)for(s=Array(u),r=0;r<u;r++)s[r]=Array(t[r].length);for(r=0;r<u;r++){var c=s[r],l=t[r];for(i=0,a=c.length;i<a;i++)0===e[i]||isNaN(e[i])||(c[i]=l[i]/e[i])}return s}function f(t,e,n){"undefined"==typeof n&&(n=0);var r=t.length;if(0===r)return[];var i,o,a,s,u,c,l=t[0].length;if(0===n){for(i=Array(l),o=0;o<l;o++)i[o]=0;for(o=0;o<r;o++)for(c=t[o],u=e[o],s=0;s<l;s++)i[s]+=c[s]*u}else{if(1!==n)throw new Error("Invalid dimension");for(i=Array(r),o=0;o<r;o++)i[o]=0;for(s=0;s<r;s++)for(c=t[s],u=e[s],o=0;o<l;o++)i[s]+=c[o]*u}var h=p.sum(e);if(0!==h)for(o=0,a=i.length;o<a;o++)i[o]/=h;return i}function d(t,e,n,r,i){i=i||0,n=n||f(t,e,i),"undefined"==typeof r&&(r=1);var o=t.length;if(0===o)return[[]];var a,s,u,c,l,h=t[0].length;if(0===i){for(a=Array(h),s=0;s<h;s++)a[s]=Array(h);for(s=0;s<h;s++)for(u=s;u<h;u++){for(l=0,c=0;c<o;c++)l+=e[c]*(t[c][u]-n[u])*(t[c][s]-n[s]);a[s][u]=l*r,a[u][s]=l*r}}else{if(1!==i)throw new Error("Invalid dimension");for(a=Array(o),s=0;s<o;s++)a[s]=Array(o);for(s=0;s<o;s++)for(u=s;u<o;u++){for(l=0,c=0;c<h;c++)l+=e[c]*(t[u][c]-n[u])*(t[s][c]-n[s]);a[s][u]=l*r,a[u][s]=l*r}}return a}var p=n(72);t.exports={entropy:function(t,e){"undefined"==typeof e&&(e=0);for(var n=0,i=t.length,o=t[0].length,a=0;a<i;a++)for(var s=0;s<o;s++)n+=t[a][s]*r(t[a][s]+e);return-n},mean:i,standardDeviation:o,variance:a,median:function(t){for(var e,n=t.length,r=t[0].length,i=Array(r),o=0;o<r;o++){e=Array(n);for(var a=0;a<n;a++)e[a]=t[a][o];e.sort();var s=e.length;i[o]=0==s%2?.5*(e[s/2]+e[s/2-1]):e[g(s/2)]}return i},mode:function(t){var e,n,r=t.length,i=t[0].length,o=Array(i);for(e=0;e<i;e++){for(var a=Array(r),s=0;s<r;s++)a[s]=0;var u=Array(r),c=0;for(n=0;n<r;n++){var l=u.indexOf(t[n][e]);0<=l?a[l]++:(u[c]=t[n][e],a[c]=1,c++)}var h=0,f=0;for(n=0;n<c;n++)a[n]>h&&(h=a[n],f=n);o[e]=u[f]}return o},skewness:function(t,e){"undefined"==typeof e&&(e=!0);for(var n=i(t),r=t.length,o=n.length,a=Array(o),s=0;s<o;s++){for(var u,l=0,h=0,f=0;f<r;f++)l+=(u=t[f][s]-n[s])*u,h+=u*u*u;var d=h/r/c(l/r,1.5);if(e){var p=R(r*(r-1));a[s]=p/(r-2)*d}else a[s]=d}return a},kurtosis:function(t,e){"undefined"==typeof e&&(e=!0);for(var n=i(t),r=t.length,o=t[0].length,a=Array(o),s=0;s<o;s++){for(var u,c=0,l=0,h=0;h<r;h++)c+=(u=t[h][s]-n[s])*u,l+=u*u*u*u;var f=c/r,d=l/r;if(e){var p=c/(r-1);a[s]=r*(r+1)/((r-1)*(r-2)*(r-3))*(l/(p*p))-(r-1)*(r-1)/((r-2)*(r-3))*3}else a[s]=d/(f*f)-3}return a},standardError:function(t){for(var e=t.length,n=o(t),r=n.length,i=Array(r),a=R(e),s=0;s<r;s++)i[s]=n[s]/a;return i},covariance:function(t,e){return s(t,void 0,e)},scatter:s,correlation:function(t){var e,n,r=i(t),a=u(t,r,o(t,!0,r)),s=t.length,c=t[0].length,l=Array(c);for(e=0;e<c;e++)l[e]=Array(c);for(e=0;e<c;e++)for(n=e;n<c;n++){for(var h=0,f=0,d=a.length;f<d;f++)h+=a[f][n]*a[f][e];l[e][n]=h/=s-1,l[n][e]=h}return l},zScores:u,center:l,standardize:h,weightedVariance:function(t,e){var n=i(t),r=t.length;if(0===r)return[];for(var o=t[0].length,a=Array(o),s=0;s<o;s++){for(var u=0,c=0,l=0,h=0;h<r;h++){var f=t[h][s]-n[s],d=e[h];u+=d*(f*f),l+=d,c+=d*d}a[s]=u*(l/(l*l-c))}return a},weightedMean:f,weightedCovariance:function(t,e,n,r){r=r||0,n=n||f(t,e,r);for(var i=0,o=0,a=0,s=e.length;a<s;a++)i+=e[a],o+=e[a]*e[a];return d(t,e,n,i/(i*i-o),r)},weightedScatter:d}},function(e,t,n){"use strict";function o(t,e){for(var n in e)t=t.replace(new RegExp("%"+n+"%","g"),e[n]);return t}var s=n(54);class r{constructor(t,e,n={}){if(t instanceof r){var i=t;this._init(i.rows,i.columns,i.elements.clone(),i.threshold)}else if(Array.isArray(t)){var o=t;t=o.length,n=e||{},this._init(t,e=o[0].length,new s(n),n.threshold);for(var a=0;a<t;a++)for(var c,l=0;l<e;l++)c=o[a][l],this.threshold&&u(c)<this.threshold&&(c=0),0!==c&&this.elements.set(a*e+l,o[a][l])}else this._init(t,e,new s(n),n.threshold)}_init(t,e,n,r){this.rows=t,this.columns=e,this.elements=n,this.threshold=r||0}static eye(t=1,e=t){for(var n=v(t,e),i=new r(t,e,{initialCapacity:n}),o=0;o<n;o++)i.set(o,o,1);return i}clone(){return new r(this)}to2DArray(){for(var t=Array(this.rows),e=0;e<this.rows;e++){t[e]=Array(this.columns);for(var n=0;n<this.columns;n++)t[e][n]=this.get(e,n)}return t}isSquare(){return this.rows===this.columns}isSymmetric(){if(!this.isSquare())return!1;var t=!0;return this.forEachNonZero((e,n,r)=>this.get(n,e)===r?r:(t=!1,!1)),t}get cardinality(){return this.elements.size}get size(){return this.rows*this.columns}get(t,e){return this.elements.get(t*this.columns+e)}set(t,e,n){return this.threshold&&u(n)<this.threshold&&(n=0),0===n?this.elements.remove(t*this.columns+e):this.elements.set(t*this.columns+e,n),this}mmul(t){this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");var e=new r(this.rows,t.columns);return this.forEachNonZero((n,r,i)=>(t.forEachNonZero((t,o,a)=>(r===t&&e.set(n,o,e.get(n,o)+i*a),a)),i)),e}kroneckerProduct(t){var e=t.rows,n=t.columns,i=new r(this.rows*e,this.columns*n,{initialCapacity:this.cardinality*t.cardinality});return this.forEachNonZero((r,o,a)=>(t.forEachNonZero((t,s,u)=>(i.set(e*r+t,n*o+s,a*u),u)),a)),i}forEachNonZero(t){return this.elements.forEachPair((e,n)=>{var r=t(0|e/this.columns,e%this.columns,n);return!1!==r&&(this.threshold&&u(r)<this.threshold&&(r=0),r!==n&&(0===r?this.elements.remove(e,!0):this.elements.set(e,r)),!0)}),this.elements.maybeShrinkCapacity(),this}getNonZeros(){var t=this.cardinality,e=Array(t),n=Array(t),r=Array(t),i=0;return this.forEachNonZero((t,o,a)=>(e[i]=t,n[i]=o,r[i]=a,i++,a)),{rows:e,columns:n,values:r}}setThreshold(t){return 0!==t&&t!==this.threshold&&(this.threshold=t,this.forEachNonZero((t,e,n)=>n)),this}}r.prototype.klass="Matrix",r.identity=r.eye,r.prototype.tensorProduct=r.prototype.kroneckerProduct,e.exports=r;var a="\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",l="\n(function %name%S(value) {\n    this.forEachNonZero((i, j, v) => v %op% value);\n    return this;\n})\n",c="\n(function %name%M(matrix) {\n    matrix.forEachNonZero((i, j, v) => {\n        this.set(i, j, this.get(i, j) %op% v);\n        return v;\n    });\n    return this;\n})\n",m="\n(function %name%(matrix, value) {\n    var newMatrix = new SparseMatrix(matrix);\n    return newMatrix.%name%(value);\n})\n",d="\n(function %name%() {\n    this.forEachNonZero((i, j, v) => %method%(v));\n    return this;\n})\n",g="\n(function %name%(matrix) {\n    var newMatrix = new SparseMatrix(matrix);\n    return newMatrix.%name%();\n})\n",h=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]],p=!0,k=!1,j;try{for(var x=h[Symbol.iterator](),w,f;!(p=(w=x.next()).done);p=!0){f=w.value;for(var y=1;y<f.length;y++)r.prototype[f[y]]=eval(o(a,{name:f[y],op:f[0]})),r.prototype[f[y]+"S"]=eval(o(l,{name:f[y]+"S",op:f[0]})),r.prototype[f[y]+"M"]=eval(o(c,{name:f[y]+"M",op:f[0]})),r[f[y]]=eval(o(m,{name:f[y]}))}}catch(e){k=!0,j=e}finally{try{!p&&x.return&&x.return()}finally{if(k)throw j}}var i=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){i.push(["Math."+t,t])});var M=!0,b=!1,R;try{for(var I=i[Symbol.iterator](),S,C;!(M=(S=I.next()).done);M=!0){C=S.value;for(var y=1;y<C.length;y++)r.prototype[C[y]]=eval(o(d,{name:C[y],method:C[0]})),r[C[y]]=eval(o(g,{name:C[y]}))}}catch(e){b=!0,R=e}finally{try{!M&&I.return&&I.return()}finally{if(b)throw R}}},function(t,e,n){"use strict";var r=n(210),i=r.DC.EVD,o=r.DC.SVD,a=n(2).matrix,s=a.mean,u=a.standardDeviation,c={isCovarianceMatrix:!1,center:!0,scale:!1};class l{constructor(t,e){if(!0===t){var n=e;return this.center=n.center,this.scale=n.scale,this.means=n.means,this.stdevs=n.stdevs,this.U=r.checkMatrix(n.U),void(this.S=n.S)}if(e=Object.assign({},c,e),this.center=!1,this.scale=!1,this.means=null,this.stdevs=null,e.isCovarianceMatrix)this._computeFromCovarianceMatrix(t);else if("boolean"==typeof e.useCovarianceMatrix?e.useCovarianceMatrix:t.length>t[0].length){var i=(t=this._adjust(t,e)).transposeView().mmul(t).div(t.rows-1);this._computeFromCovarianceMatrix(i)}else{t=this._adjust(t,e);var a=new o(t,{computeLeftSingularVectors:!1,computeRightSingularVectors:!0,autoTranspose:!0});this.U=a.rightSingularVectors;for(var s=a.diagonal,u=Array(s.length),l=0;l<s.length;l++)u[l]=s[l]*s[l]/(t.length-1);this.S=u}}static load(t){if("PCA"!==t.name)throw new RangeError("Invalid model: "+t.name);return new l(!0,t)}predict(t){return t=new r(t),this.center&&(t.subRowVector(this.means),this.scale&&t.divRowVector(this.stdevs)),t.mmul(this.U)}getExplainedVariance(){for(var t=0,e=0;e<this.S.length;e++)t+=this.S[e];return this.S.map(e=>e/t)}getCumulativeVariance(){for(var t=this.getExplainedVariance(),e=1;e<t.length;e++)t[e]+=t[e-1];return t}getEigenvectors(){return this.U}getEigenvalues(){return this.S}getStandardDeviations(){return this.S.map(t=>R(t))}getLoadings(){return this.U.transpose()}toJSON(){return{name:"PCA",center:this.center,scale:this.scale,means:this.means,stdevs:this.stdevs,U:this.U,S:this.S}}_adjust(t,e){if(this.center=!!e.center,this.scale=!!e.scale,t=new r(t),this.center){var n=s(t),i=this.scale?u(t,n,!0):null;if(this.means=n,t.subRowVector(n),this.scale){for(var o=0;o<i.length;o++)if(0===i[o])throw new RangeError("Cannot scale the dataset (standard deviation is zero at index "+o);this.stdevs=i,t.divRowVector(i)}}return t}_computeFromCovarianceMatrix(t){var e=new i(t,{assumeSymmetric:!0});this.U=e.eigenvectorMatrix;for(var n=0;n<this.U.length;n++)this.U[n].reverse();this.S=e.realEigenvalues.reverse()}}t.exports=l},function(t,e,n){"use strict";t.exports=n(6).Matrix,t.exports.Decompositions=t.exports.DC=n(219)},function(){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},function(t,e,n){"use strict";var r=n(16);t.exports=class extends r{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,n){"use strict";var r=n(16);t.exports=class extends r{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,n){"use strict";var r=n(16),i=n(25);t.exports=class extends r{constructor(t,e,n,r,o){i.checkRange(t,e,n,r,o),super(t,n-e+1,o-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,n){"use strict";var r=n(16),i=n(25);t.exports=class extends r{constructor(t,e,n){var r=i.checkIndices(t,e,n);super(t,r.row.length,r.column.length),this.rowIndices=r.row,this.columnIndices=r.column}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,n){"use strict";var r=n(16);t.exports=class extends r{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,n){"use strict";var r=n(16);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,n){"use strict";var r=n(16);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,n){"use strict";function r(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=n(6).Matrix,a=n(75),s=n(220),u=n(74),c=n(221),l=n(222);o.inverse=o.inv=r,o.prototype.inverse=o.prototype.inv=function(){return r(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:a,SVD:a,EigenvalueDecomposition:s,EVD:s,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:r,solve:i}},function(t,e,n){"use strict";function r(t,e){if(e=Object.assign({},p,e),!(this instanceof r))return new r(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");var n,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(n=0;n<c;n++)for(u=0;u<c;u++)h[n][u]=g.get(n,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(n=0;n<c;n++)v[n][u]=g.get(n,u);a(c,v,y,h),s(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,n,r){var i,o,a,s,c,l,h,f;for(c=0;c<t;c++)n[c]=r[t-1][c];for(s=t-1;0<s;s--){for(f=0,a=0,l=0;l<s;l++)f+=u(n[l]);if(0===f)for(e[s]=n[s-1],c=0;c<s;c++)n[c]=r[s-1][c],r[s][c]=0,r[c][s]=0;else{for(l=0;l<s;l++)n[l]/=f,a+=n[l]*n[l];for(i=n[s-1],o=R(a),0<i&&(o=-o),e[s]=f*o,a-=i*o,n[s-1]=i-o,c=0;c<s;c++)e[c]=0;for(c=0;c<s;c++){for(r[c][s]=i=n[c],o=e[c]+r[c][c]*i,l=c+1;l<=s-1;l++)o+=r[l][c]*n[l],e[l]+=r[l][c]*i;e[c]=o}for(i=0,c=0;c<s;c++)e[c]/=a,i+=e[c]*n[c];for(h=i/(a+a),c=0;c<s;c++)e[c]-=h*n[c];for(c=0;c<s;c++){for(i=n[c],o=e[c],l=c;l<=s-1;l++)r[l][c]-=i*e[l]+o*n[l];n[c]=r[s-1][c],r[s][c]=0}}n[s]=a}for(s=0;s<t-1;s++){if(r[t-1][s]=r[s][s],r[s][s]=1,0!==(a=n[s+1])){for(l=0;l<=s;l++)n[l]=r[l][s+1]/a;for(c=0;c<=s;c++){for(o=0,l=0;l<=s;l++)o+=r[l][s+1]*r[l][c];for(l=0;l<=s;l++)r[l][c]-=o*n[l]}}for(l=0;l<=s;l++)r[l][s+1]=0}for(c=0;c<t;c++)n[c]=r[t-1][c],r[t-1][c]=0;r[t-1][t-1]=1,e[0]=0}function o(t,e,n,r){var i,o,a,s,c,l,h,d,p,m,g,v,y,w,x,b;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(n[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(n[l+1]-(i=n[l]))/(2*e[l]),1),0>d&&(p=-p),n[l]=e[l]/(d+p),n[l+1]=e[l]*(d+p),m=n[l+1],o=i-n[l],a=l+2;a<t;a++)n[a]-=o;for(_+=o,d=n[h],v=g=1,y=g,w=e[l+1],x=0,b=0,a=h-1;a>=l;a--)for(y=v,v=g,b=x,i=g*e[a],o=g*d,p=f(d,e[a]),e[a+1]=x*p,d=(g=d/p)*n[a]-(x=e[a]/p)*i,n[a+1]=o+x*(g*i+x*n[a]),c=0;c<t;c++)r[c][a+1]=x*r[c][a]+g*(o=r[c][a+1]),r[c][a]=g*r[c][a]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),n[l]=g*d}while(u(e[l])>E*S);n[l]+=_,e[l]=0}for(a=0;a<t-1;a++){for(c=a,d=n[a],s=a+1;s<t;s++)n[s]<d&&(c=s,d=n[s]);if(c!==a)for(n[c]=n[a],n[a]=d,s=0;s<t;s++)d=r[s][a],r[s][a]=r[s][c],r[s][c]=d}}function a(t,e,n,r){var i,o,a,s,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,s=l;s<=f;s++)h+=u(e[s][l-1]);if(0!==h){for(a=0,s=f;s>=l;s--)n[s]=e[s][l-1]/h,a+=n[s]*n[s];for(o=R(a),0<n[l]&&(o=-o),a-=n[l]*o,n[l]-=o,c=l;c<t;c++){for(i=0,s=f;s>=l;s--)i+=n[s]*e[s][c];for(i/=a,s=l;s<=f;s++)e[s][c]-=i*n[s]}for(s=0;s<=f;s++){for(i=0,c=f;c>=l;c--)i+=n[c]*e[s][c];for(i/=a,c=l;c<=f;c++)e[s][c]-=i*n[c]}n[l]=h*n[l],e[l][l-1]=h*o}}for(s=0;s<t;s++)for(c=0;c<t;c++)r[s][c]=s===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(s=l+1;s<=f;s++)n[s]=e[s][l-1];for(c=l;c<=f;c++){for(o=0,s=l;s<=f;s++)o+=n[s]*r[s][c];for(o=o/n[l]/e[l][l-1],s=l;s<=f;s++)r[s][c]+=o*n[s]}}}function s(t,e,n,r,i){var o,a,s,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,C=0,k=0,O=0,P=0,D=0,L=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(n[o]=i[o][o],e[o]=0),a=M(o-1,0);a<t;a++)C+=u(i[o][a]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=C),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,n[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(L=R(u(O=(k=(i[S-1][S-1]-i[S][S])/2)*k+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=O){for(n[S-1]=p+(L=0<=k?k+L:k-L),n[S]=n[S-1],0!==L&&(n[S]=p-d/L),e[S-1]=0,e[S]=0,k=(p=i[S][S-1])/(D=u(p)+u(L)),k/=P=R(k*k+(O=L/D)*O),O/=P,a=S-1;a<t;a++)i[S-1][a]=O*(L=i[S-1][a])+k*i[S][a],i[S][a]=O*i[S][a]-k*L;for(o=0;o<=S;o++)i[o][S-1]=O*(L=i[o][S-1])+k*i[o][S],i[o][S]=O*i[o][S]-k*L;for(o=0;o<=E;o++)r[o][S-1]=O*(L=r[o][S-1])+k*r[o][S],r[o][S]=O*r[o][S]-k*L}else n[S-1]=p+k,n[S]=p+k,e[S-1]=L,e[S]=-L;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(k=((P=p-(L=i[h][h]))*(D=m-L)-d)/i[h+1][h]+i[h][h+1],O=i[h+1][h+1]-L-P-D,P=i[h+2][h+1],k/=D=u(k)+u(O)+u(P),O/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(O)+u(P))<T*(u(k)*(u(i[h-1][h-1])+u(L)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(s=h;s<=S-1&&(b=s!==S-1,s!==h&&(k=i[s][s-1],O=i[s+1][s-1],P=b?i[s+2][s-1]:0,0!==(p=u(k)+u(O)+u(P))&&(k/=p,O/=p,P/=p)),0!==p);s++)if(D=R(k*k+O*O+P*P),0>k&&(D=-D),0!==D){for(s===h?l!==h&&(i[s][s-1]=-i[s][s-1]):i[s][s-1]=-D*p,p=(k+=D)/D,m=O/D,L=P/D,O/=k,P/=k,a=s;a<t;a++)k=i[s][a]+O*i[s+1][a],b&&(i[s+2][a]=i[s+2][a]-(k+=P*i[s+2][a])*L),i[s][a]-=k*p,i[s+1][a]=i[s+1][a]-k*m;for(o=0;o<=v(S,s+3);o++)k=p*i[o][s]+m*i[o][s+1],b&&(i[o][s+2]=i[o][s+2]-(k+=L*i[o][s+2])*P),i[o][s]-=k,i[o][s+1]=i[o][s+1]-k*O;for(o=0;o<=E;o++)k=p*r[o][s]+m*r[o][s+1],b&&(r[o][s+2]=r[o][s+2]-(k+=L*r[o][s+2])*P),r[o][s]-=k,r[o][s+1]=r[o][s+1]-k*O}}}if(0!==C){for(S=t-1;0<=S;S--)if(k=n[S],0===(O=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-k,P=0,a=l;a<=S;a++)P+=i[o][a]*i[a][S];if(0>e[o])L=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*C):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-L*P)/(O=(n[o]-k)*(n[o]-k)+e[o]*e[o]),i[o+1][S]=u(p)>u(L)?(-P-d*f)/p:(-D-m*f)/L),1<T*(f=u(i[o][S]))*f)for(a=o;a<=S;a++)i[a][S]/=f}else if(0>O)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=O/i[S][S-1],i[S-1][S]=-(i[S][S]-k)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-k,O),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,a=l;a<=S;a++)g+=i[o][a]*i[a][S-1],y+=i[o][a]*i[a][S];if(d=i[o][o]-k,0>e[o])L=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,O),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(n[o]-k)*O,0==(w=(n[o]-k)*(n[o]-k)+e[o]*e[o]-O*O)&&0===x&&(w=T*C*(u(d)+u(O)+u(p)+u(m)+u(L))),_=c(p*P-L*g+O*y,p*D-L*y-O*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(L)+u(O)?(i[o+1][S-1]=(-g-d*i[o][S-1]+O*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-O*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],L,O),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(a=o;a<=S;a++)i[a][S-1]=i[a][S-1]/f,i[a][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(a=o;a<t;a++)r[o][a]=i[o][a];for(a=t-1;a>=0;a--)for(o=0;o<=E;o++){for(L=0,s=0;s<=v(a,E);s++)L+=r[o][s]*i[s][a];r[o][a]=L}}}function c(t,e,n,r){var i,o;return u(n)>u(r)?[(t+(i=r/n)*e)/(o=n+i*r),(e-i*t)/o]:[((i=n/r)*t+e)/(o=r+i*n),(i*e-t)/o]}var l=n(6).Matrix,h=n(39),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};r.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,n=this.n,r=this.e,i=this.d,o=new l(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)o[t][e]=0;o[t][t]=i[t],0<r[t]?o[t][t+1]=r[t]:0>r[t]&&(o[t][t-1]=r[t])}return o}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,a,s,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(a=0;a<l;a++){var f=0;for(e=a;e<c;e++)f=o(f,u[e][a]);if(0!==f){for(0>u[a][a]&&(f=-f),e=a;e<c;e++)u[e][a]/=f;for(u[a][a]+=1,n=a+1;n<l;n++){for(s=0,e=a;e<c;e++)s+=u[e][a]*u[e][n];for(s=-s/u[a][a],e=a;e<c;e++)u[e][n]+=s*u[e][a]}}h[a]=-f}this.QR=u,this.Rdiag=h}var i=n(6).Matrix,o=n(39).hypotenuse;r.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r,o,a,s,u=t.columns,c=t.clone(),l=e.columns;for(a=0;a<l;a++)for(o=0;o<u;o++){for(s=0,r=a;r<n;r++)s+=e[r][a]*c[r][o];for(s=-s/e[a][a],r=a;r<n;r++)c[r][o]+=s*e[r][a]}for(a=l-1;0<=a;a--){for(o=0;o<u;o++)c[a][o]/=this.Rdiag[a];for(r=0;r<a;r++)for(o=0;o<u;o++)c[r][o]-=c[a][o]*e[r][a]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,n=this.QR,r=n.columns,o=new i(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)o[t][e]=t<e?n[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,n,r,o=this.QR,a=o.rows,s=o.columns,u=new i(a,s);for(n=s-1;0<=n;n--){for(t=0;t<a;t++)u[t][n]=0;for(u[n][n]=1,e=n;e<s;e++)if(0!==o[n][n]){for(r=0,t=n;t<a;t++)r+=o[t][n]*u[t][e];for(r=-r/o[n][n],t=n;t<a;t++)u[t][e]+=r*o[t][n]}}return u}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var e,n,o,a=t,s=a.rows,u=new i(s,s),c=!0;for(n=0;n<s;n++){var l=u[n],h=0;for(o=0;o<n;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(a[n][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=a[n][n]-h),u[n][n]=R(M(h,0)),o=n+1;o<s;o++)u[n][o]=0}if(!c)throw new Error("Matrix is not positive definite");this.L=u}var i=n(6).Matrix;r.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");var r,o,a,s=t.columns,u=t.clone();for(a=0;a<n;a++)for(o=0;o<s;o++){for(r=0;r<a;r++)u[a][o]-=u[r][o]*e[a][r];u[a][o]/=e[a][a]}for(a=n-1;0<=a;a--)for(o=0;o<s;o++){for(r=a+1;r<n;r++)u[a][o]-=u[r][o]*e[r][a];u[a][o]/=e[a][a]}return u}},t.exports=r},function(n,r,i){"use strict";var o=i(224);class a{constructor(n,r,i){if(i=i||{},n.length!==r.length||n[0].length!==r[0].length)throw new Error("dimensions of prediction and target do not match");var o=n.length,a=n[0].length,s=!i.max,u=[];if(i.all)for(var c=0;c<o;c++)for(var l=0;l<a;l++)u.push({pred:n[c][l],targ:r[c][l]});else{if(3>o||o!==a)throw new Error('When "all" option is false, the prediction matrix must be square and have at least 3 columns');for(c=0;c<o-1;c++)for(l=c+1;l<a;l++)u.push({pred:n[c][l],targ:r[c][l]})}u.sort(s?(t,e)=>t.pred-e.pred:(t,e)=>e.pred-t.pred);var h=this.cutoffs=[s?t:e],f=this.fp=[0],d=this.tp=[0],p=0,m=0,g=u[0].pred,v=0,y=0;for(c=0;c<u.length;c++)u[c].pred!==g&&(h.push(g),f.push(y),d.push(v),g=u[c].pred),u[c].targ?(p++,v++):(m++,y++);h.push(g),f.push(y),d.push(v);var w=h.length,x=this.fn=Array(w),b=this.tn=Array(w),_=this.nPosPred=Array(w),M=this.nNegPred=Array(w);for(c=0;c<w;c++)x[c]=p-d[c],b[c]=m-f[c],_[c]=d[c]+f[c],M[c]=b[c]+x[c];this.nPos=p,this.nNeg=m,this.nSamples=p+m}getMeasure(t){if("string"!=typeof t)throw new Error("No measure specified");if(!o[t])throw new Error(`The specified measure (${t}) does not exist`);return o[t](this)}getAURC(){for(var t=this.cutoffs.length,e=Array(t),n=Array(t),r=0;r<t;r++)e[r]=this.fp[r]/this.nNeg,n[r]=this.tp[r]/this.nPos;var i=0;for(r=1;r<t;r++)i+=.5*(e[r]-e[r-1])*(n[r]+n[r-1]);return i}getAUDC(){for(var t=this.cutoffs.length,e=Array(t),n=Array(t),r=0;r<t;r++)e[r]=this.fn[r]/this.nPos,n[r]=this.fp[r]/this.nNeg;var i=0;for(r=1;r<t;r++)i+=.5*(e[r]+e[r-1])*(n[r]-n[r-1]);return i}getDistribution(t){for(var e=this.cutoffs.length,n=(t=t||{}).xMin||g(100*this.cutoffs[e-1])/100,r=t.xMax||s(100*this.cutoffs[1])/100,i=t.interval||g((r-n)/20*1e7-1)/1e7,o=[],a=[],u=[],c=[],l=[],h=this.tp[e-1],f=0,d=this.fp[e-1],p=0,m=n,v=e-1;m<=r;m+=i){for(;this.cutoffs[v]<m;)v--;o.push(m);var y=h-f-this.tp[v],w=d-p-this.fp[v];f+=y,p+=w,a.push(w),u.push(y),c.push(100-(d-this.fp[v])/d*100),l.push(100-(h-this.tp[v])/h*100)}return{xLabels:o,interValues:a,intraValues:u,interCumPercent:c,intraCumPercent:l}}}a.names={acc:"Accuracy",err:"Error rate",fpr:"False positive rate",tpr:"True positive rate",fnr:"False negative rate",tnr:"True negative rate",ppv:"Positive predictive value",npv:"Negative predictive value",pcfall:"Prediction-conditioned fallout",pcmiss:"Prediction-conditioned miss",lift:"Lift value",rpp:"Rate of positive predictions",rnp:"Rate of negative predictions",threshold:"Threshold"},n.exports=a},function(t,e){"use strict";e.acc=(t=>{for(var e=t.cutoffs.length,n=Array(e),r=0;r<e;r++)n[r]=(t.tn[r]+t.tp[r])/(e-1);return n}),e.err=(t=>{for(var e=t.cutoffs.length,n=Array(e),r=0;r<e;r++)n[r]=t.fn[r]+t.fp[r]/(e-1);return n}),e.fpr=(t=>{for(var e=t.cutoffs.length,n=Array(e),r=0;r<e;r++)n[r]=t.fp[r]/t.nNeg;return n}),e.tpr=(t=>{for(var e=t.cutoffs.length,n=Array(e),r=0;r<e;r++)n[r]=t.tp[r]/t.nPos;return n}),e.fnr=(t=>{for(var e=t.cutoffs.length,n=Array(e),r=0;r<e;r++)n[r]=t.fn[r]/t.nPos;return n}),e.tnr=(t=>{for(var e=t.cutoffs.length,n=Array(e),r=0;r<e;r++)n[r]=t.tn[r]/t.nNeg;return n}),e.ppv=(t=>{for(var e=t.cutoffs.length,n=Array(e),r=0;r<e;r++)n[r]=0===t.fp[r]+t.tp[r]?0:t.tp[r]/(t.fp[r]+t.tp[r]);return n}),e.npv=(t=>{for(var e=t.cutoffs.length,n=Array(e),r=0;r<e;r++)n[r]=0===t.fn[r]+t.tn[r]?0:t.tn[r]/(t.fn[r]+t.tn[r]);return n}),e.pcfall=(t=>{for(var e=t.cutoffs.length,n=Array(e),r=0;r<e;r++)n[r]=0===t.fp[r]+t.tp[r]?1:1-t.tp[r]/(t.fp[r]+t.tp[r]);return n}),e.pcmiss=(t=>{for(var e=t.cutoffs.length,n=Array(e),r=0;r<e;r++)n[r]=0===t.fn[r]+t.tn[r]?1:1-t.tn[r]/(t.fn[r]+t.tn[r]);return n}),e.lift=(t=>{for(var e=t.cutoffs.length,n=Array(e),r=0;r<e;r++)n[r]=0===t.nPosPred[r]?0:t.tp[r]/t.nPos/(t.nPosPred[r]/t.nSamples);return n}),e.rpp=(t=>{for(var e=t.cutoffs.length,n=Array(e),r=0;r<e;r++)n[r]=t.nPosPred[r]/t.nSamples;return n}),e.rnp=(t=>{for(var e=t.cutoffs.length,n=Array(e),r=0;r<e;r++)n[r]=t.nNegPred[r]/t.nSamples;return n}),e.threshold=(t=>{var e=t.cutoffs.slice();return e[0]=e[1],e})},function(t,e,n){"use strict";function r(t,e){var n,r,i,o,a=e.length/3,s=t.rows,u=p.zeros(t.length,1);for(r=0;r<a;r++)for(o=c(e[r+2*a][0]/2,2),n=e[r+a][0]*o,i=0;i<s;i++)u[i][0]+=n/(c(t[i][0]-e[r][0],2)+o);return u}function i(t,e){for(var n=e[1][0]*c(e[2][0]/2,2),r=t.rows,i=new p(t.rows,t.columns),o=0;o<r;o++)i[o][0]=n/(c(t[o][0]-e[0][0],2)+c(e[2][0]/2,2));return i}function a(t,e){for(var n=e[2][0]*e[2][0]/2,r=t.rows,i=new p(t.rows,t.columns),a=0;a<r;a++)i[a][0]=e[1][0]*o(-(t[a][0]-e[0][0])*(t[a][0]-e[0][0])/n);return i}function s(t,e,n){var r=h(t,(n=n||{}).percentage||0);if(null===r||3>r[0].rows)return null;var o=r[0],a=r[1],s=r[2],c=[o.rows/R(a.dot(a))],l=(n=Object.create(n.LMOptions||[3,100,.001,.001,.001,.01,.01,11,9,1]),u(o[0][0]-o[1][0])),d=new p([[-l/1e4],[-.001],[-l/1e4]]),m=new p([[e.x],[1],[e.width]]),g=new p([[e.x-l],[.75],[e.width/4]]),v=new p([[e.x+l],[1.25],[4*e.width]]),y=f.optimize(i,m,o,a,c,d,g,v,[],n);return[(y=y.p)[0],[y[1][0]*s],y[2]]}function l(t,e,n){var r=h(t,(n=n||{}).percentage||0);if(null===r||3>r[0].rows)return null;var i=r[0],o=r[1],s=r[2],c=[i.rows/R(o.dot(o))],l=(n=Object.create(n.LMOptions||[3,100,.001,.001,.001,.01,.01,11,9,1]),u(i[0][0]-i[1][0])),d=new p([[-l/1e4],[-.001],[-l/1e4]]),m=(d=new p([[-u(i[0][0]-i[1][0])/1e3],[-.001],[-e.width/1e3]]),new p([[e.x],[1],[e.width]])),g=new p([[e.x-l],[.75],[e.width/4]]),v=new p([[e.x+l],[1.25],[4*e.width]]),y=f.optimize(a,m,i,o,c,d,g,v,[],n);return[(y=y.p)[0],[y[1][0]*s],y[2]]}function h(t,e){var n,r,i,o=t.length,a=null,s=null,u=0;if(2==o){var c=t[0].length;if(a=Array(c),s=Array(c),r=t[1],"number"==typeof(n=t[0])[0])for(i=0;i<c;i++)a[i]=n[i],s[i]=r[i],r[i]>u&&(u=r[i]);else if("object"==typeof n[0])for(i=0;i<c;i++)a[i]=n[i][0],s[i]=r[i][0],r[i][0]>u&&(u=r[i][0])}else for(c=o,a=Array(c),s=Array(c),i=0;i<c;i++)a[i]=t[i][0],s[i]=t[i][1],s[i]>u&&(u=s[i]);for(i=0;i<c;i++)s[i]/=u;if(e)for(i=c-1;0<=i;i--)s[i]<e&&(s.splice(i,1),a.splice(i,1));return 0<a.length?[new p([a]).transpose(),new p([s]).transpose(),u]:null}var f=n(226),d=f.Matrix.algebra,p=n(240);t.exports.optimizeSingleLorentzian=s,t.exports.optimizeLorentzianSum=function(t,e,n){var i=h(t);if(null===i||3>i[0].rows)return null;var o,a=i[0],s=i[1],c=i[2],l=[a.rows/d.sqrt(s.dot(s))],m=(n=Object.create(n||[3,100,.001,.001,.001,.01,.01,11,9,1]),e.length),g=new p(3*m,1),v=new p(3*m,1),y=new p(3*m,1),w=new p(3*m,1),x=u(a[0][0]-a[1][0]);for(o=0;o<m;o++)g[o][0]=e[o].x,g[o+m][0]=1,g[o+2*m][0]=e[o].width,v[o][0]=e[o].x-x,v[o+m][0]=0,v[o+2*m][0]=e[o].width/4,y[o][0]=e[o].x+x,y[o+m][0]=1.5,y[o+2*m][0]=4*e[o].width,w[o][0]=-x/1e3,w[o+m][0]=-.001,w[o+2*m][0]=-x/1e3;w=-u(a[0][0]-a[1][0])/1e4;var b=f.optimize(r,g,a,s,l,w,v,y,[],n);b=b.p;var _=Array(m);for(o=0;o<m;o++)_[o]=[b[o],[b[o+m][0]*c],b[o+2*m]];return _},t.exports.optimizeSingleGaussian=l,t.exports.optimizeGaussianSum=function(t,e,n){var i=h(t);if(null===i||3>i[0].rows)return null;var o,a=i[0],s=i[1],c=i[2],l=a.rows,m=new p(l,1),g=l/d.sqrt(s.dot(s));for(o=0;o<l;o++)m[o][0]=g;n=Object.create(n||[3,100,.001,.001,.001,.01,.01,11,9,2]);var v=e.length,y=new p(3*v,1),w=new p(3*v,1),x=new p(3*v,1),b=new p(3*v,1),_=u(a[0][0]-a[1][0]);for(o=0;o<v;o++)y[o][0]=e[o].x,y[o+v][0]=e[o].y/c,y[o+2*v][0]=e[o].width,w[o][0]=e[o].x-_,w[o+v][0]=.8*e[o].y/c,w[o+2*v][0]=e[o].width/2,x[o][0]=e[o].x+_,x[o+v][0]=1.2*e[o].y/c,x[o+2*v][0]=2*e[o].width,b[o][0]=-_/1e3,b[o+v][0]=-.001,b[o+2*v][0]=-_/1e3;var M=f.optimize(r,y,a,s,m,b,w,x,[],n);M=M.p;var S=Array(v);for(o=0;o<v;o++)S[o]=[M[o],[M[o+v][0]*c],M[o+2*v]];return S},t.exports.singleGaussian=a,t.exports.singleLorentzian=i,t.exports.optimizeGaussianTrain=function(t,e,n){var r=h(t);if(null===r||3>r[0].rows)return null;for(var i,o,a,s,u=r[0],c=r[1],f=r[2],d=0,p=u.length,m=[],g=0;g<e.length;g++){for(i=e[g].x-1.5*e[g].width;u[d++]<i&&d<p;);for(i=e[g].x+1.5*e[g].width,o=[],a=[];u[d]<=i&&d<p;)o.push(u[d][0]),a.push(c[d][0]*f),d++;s=l([o,a],e[g],n),m.push(s?{x:s[0][0],y:s[1][0],width:s[2][0],opt:!0}:{x:e[g].x,y:e[g].y,width:e[g].width,opt:!1})}return m},t.exports.optimizeLorentzianTrain=function(t,e,n){var r=h(t);if(null===r||3>r[0].rows)return null;for(var i,o,a,u,c=r[0],l=r[1],f=r[2],d=0,p=c.length,m=[],g=0;g<e.length;g++){for(i=e[g].x-1.5*e[g].width;c[d++]<i&&d<p;);for(i=e[g].x+1.5*e[g].width,o=[],a=[];c[d]<=i&&d<p;)o.push(c[d][0]),a.push(l[d][0]*f),d++;u=s([o,a],e[g],n),m.push(u?{x:u[0][0],y:u[1][0],width:u[2][0],opt:!0}:{x:e[g].x,y:e[g].y,width:e[g].width,opt:!1})}return m}},function(t,e,n){"use strict";t.exports=n(227),t.exports.Matrix=n(40),t.exports.Matrix.algebra=n(79)},function(t,e,n){"use strict";var r=n(40),i=n(79);t.exports={optimize:function(t,e,n,o,a,s,c,l,h,f){var d=0;if("object"!=typeof e[0])for(var p=0;p<e.length;p++)e[p]=[e[p]];var m=e.length,g=o.length,y=r.zeros(m,1),w=r.zeros(g,1),x=-2e-4,b=-2e-4,_=r.zeros(g,m);if(n.length==o.length){a=a||R((g-m+1)/i.multiply(i.transpose(o),o)),s=s||.001,c=c||i.multiply(u(e),-100),l=l||i.multiply(u(e),100),h=h||1;var S=(f=f||[3,10*m,.001,.001,.001,.01,.01,11,9,1])[1],E=f[2],T=f[5],A=f[6],C=f[7],k=f[8],O=f[9];if(!s.length||1==s.length){var P=Array(m);for(p=0;p<m;p++)P[p]=[s];s=P}var D=[];for(p=0;p<s.length;p++)0!=s[p][0]&&D.push(p);var L=D.length,N=!1,I=null;if(!a.length||a.length<g){var F=i.multiply(r.ones(g,1),a[0]);I=i.dotMultiply(F,F)}else I=i.dotMultiply(a,a);var z=this.lm_matx(t,n,y,w,1,_,e,o,I,s,h),U=z.JtWJ,j=z.JtWdy,V=(x=z.Chi_sq,z.y_hat);_=z.J,M(u(j))<E&&(console.log(" *** Your Initial Guess is Extremely Close to Optimal ***"),console.log(" *** epsilon_1 = ",E),N=!0),1===O?lambda=A:(lambda=A*M(i.diag(U)),nu=2),b=x;for(var B=null;!N&&d<=S;){++d,B=i.solve(i.add(U,i.multiply(1===O?i.diag(i.diag(U)):r.eye(m),lambda)),j);var H=Array(D.length);for($=0;$<D.length;$++)H[$]=B[D[$]];var G=i.add(e,H);for($=0;$<G.length;$++)G[$][0]=v(M(c[$][0],G[$][0]),l[$][0]);var q=i.subtract(o,t(n,G,h)),W=i.multiply(i.transpose(q),i.dotMultiply(q,I));if(2==O){var Y=i.multiply(i.transpose(j),B),X=i.multiply(Y,i.inv(i.add(i.multiply(i.subtract(W-x),.5)),i.multiply(Y,2)));B=i.multiply(X,B);for(var $=0;$<D.length;$++)H[$]=B[D[$]];G=i.add(e,H),G=i.min(i.max(c,G),l),q=i.subtract(o,t(n,G,h)),W=i.multiply(i.transpose(q),mat.dotMultiply(q,I))}var Q=(x-W)/i.multiply(i.multiply(i.transpose(B),2),i.add(i.multiply(lambda,B),j));Q>T?(dX2=x-b,b=x,y=e,e=G,U=(z=this.lm_matx(t,n,y,w=V,dX2,_,e,o,I,s,h)).JtWJ,j=z.JtWdy,x=z.Chi_sq,V=z.y_hat,_=z.J,1===O?lambda=M(lambda/k,1e-7):2===O?lambda=M(lambda/(1+X),1e-7):3===O&&(lambda=i.multiply(M(1/3,3^1-(2*Q-1)),lambda),nu=2)):(x=b,0==d%(2*m)&&(U=(z=this.lm_matx(t,n,y,w,-1,_,e,o,I,s,h)).JtWJ,j=z.JtWdy,dX2=z.Chi_sq,V=z.y_hat,_=z.J),1===O?lambda=v(lambda*C,1e7):2===O?lambda+=u((W-x)/2/X):3===O&&(lambda*=nu,nu*=2))}return(I=i.multiply(i.multiply(i.transpose(q),q),r.ones(g,1))).apply(function(t,e){I[t][e]=(g-L+1)/I[t][e]}),U=(z=this.lm_matx(t,n,y,w,-1,_,e,o,I,s,h)).JtWJ,j=z.JtWdy,V=z.y_hat,_=z.J,{p:e,X2:x=z.Chi_sq}}console.log("lm.m error: the length of t must equal the length of y_dat"),length_t=n.length,length_y_dat=o.length,x=0},lm_FD_J:function(t,e,n,o,a,s){var c=o.length,l=n.length;a=a||i.multiply(r.ones(l,1),.001);for(var h=n.clone(),f=new r(c,l),d=Array(l),p=0;p<l;p++){if(d[p]=a[p]*(1+u(n[p][0])),n[p]=[h[p][0]+d[p]],0!=d[p])if(y1=t(e,n,s),0>a[p][0])for(var m=i.dotDivide(i.subtract(y1,o),d[p]),g=0;g<c;g++)f[g][p]=m[g][0];else for(n[p][0]=h[p][0]-d[p],m=i.dotDivide(i.subtract(y1,t(e,n,s)),2*d[p]),g=0;g<c;g++)f[g][p]=m[g][0];n[p]=h[p]}return f},lm_Broyden_J:function(t,e,n,r,o){var a=i.subtract(r,t),s=i.transpose(a);return s.div(i.multiply(s,a)),i.add(n,i.multiply(i.subtract(o,i.add(e,i.multiply(n,a))),s))},lm_matx:function(t,e,n,o,a,s,u,c,l,h,f,d){var p=u.length;h=h||.001;var m=t(e,u,f);s=0==d%(2*p)||0<a?this.lm_FD_J(t,e,u,m,h,f):this.lm_Broyden_J(n,o,s,u,m);var g=i.subtract(c,m),v=i.multiply(i.transpose(g),i.dotMultiply(g,l)),y=i.transpose(s);return{JtWJ:i.multiply(y,i.dotMultiply(s,i.multiply(l,r.ones(1,p)))),JtWdy:i.multiply(y,i.dotMultiply(l,g)),Chi_sq:v,y_hat:m,J:s}}}},function(){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},function(t,e,n){"use strict";var r=n(17);t.exports=class extends r{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,n){"use strict";var r=n(17);t.exports=class extends r{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,n){"use strict";var r=n(17),i=n(26);t.exports=class extends r{constructor(t,e,n,r,o){i.checkRange(t,e,n,r,o),super(t,n-e+1,o-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,n){"use strict";var r=n(17),i=n(26);t.exports=class extends r{constructor(t,e,n){var r=i.checkIndices(t,e,n);super(t,r.row.length,r.column.length),this.rowIndices=r.row,this.columnIndices=r.column}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,n){"use strict";var r=n(17);t.exports=class extends r{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,n){"use strict";var r=n(17);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,n){"use strict";var r=n(17);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,n){"use strict";function r(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=n(7).Matrix,a=n(78),s=n(237),u=n(77),c=n(238),l=n(239);o.inverse=o.inv=r,o.prototype.inverse=o.prototype.inv=function(){return r(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:a,SVD:a,EigenvalueDecomposition:s,EVD:s,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:r,solve:i}},function(t,e,n){"use strict";function r(t,e){if(e=Object.assign({},p,e),!(this instanceof r))return new r(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");var n,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(n=0;n<c;n++)for(u=0;u<c;u++)h[n][u]=g.get(n,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(n=0;n<c;n++)v[n][u]=g.get(n,u);a(c,v,y,h),s(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,n,r){var i,o,a,s,c,l,h,f;for(c=0;c<t;c++)n[c]=r[t-1][c];for(s=t-1;0<s;s--){for(f=0,a=0,l=0;l<s;l++)f+=u(n[l]);if(0===f)for(e[s]=n[s-1],c=0;c<s;c++)n[c]=r[s-1][c],r[s][c]=0,r[c][s]=0;else{for(l=0;l<s;l++)n[l]/=f,a+=n[l]*n[l];for(i=n[s-1],o=R(a),0<i&&(o=-o),e[s]=f*o,a-=i*o,n[s-1]=i-o,c=0;c<s;c++)e[c]=0;for(c=0;c<s;c++){for(r[c][s]=i=n[c],o=e[c]+r[c][c]*i,l=c+1;l<=s-1;l++)o+=r[l][c]*n[l],e[l]+=r[l][c]*i;e[c]=o}for(i=0,c=0;c<s;c++)e[c]/=a,i+=e[c]*n[c];for(h=i/(a+a),c=0;c<s;c++)e[c]-=h*n[c];for(c=0;c<s;c++){for(i=n[c],o=e[c],l=c;l<=s-1;l++)r[l][c]-=i*e[l]+o*n[l];n[c]=r[s-1][c],r[s][c]=0}}n[s]=a}for(s=0;s<t-1;s++){if(r[t-1][s]=r[s][s],r[s][s]=1,0!==(a=n[s+1])){for(l=0;l<=s;l++)n[l]=r[l][s+1]/a;for(c=0;c<=s;c++){for(o=0,l=0;l<=s;l++)o+=r[l][s+1]*r[l][c];for(l=0;l<=s;l++)r[l][c]-=o*n[l]}}for(l=0;l<=s;l++)r[l][s+1]=0}for(c=0;c<t;c++)n[c]=r[t-1][c],r[t-1][c]=0;r[t-1][t-1]=1,e[0]=0}function o(t,e,n,r){var i,o,a,s,c,l,h,d,p,m,g,v,y,w,x,b;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(n[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(n[l+1]-(i=n[l]))/(2*e[l]),1),0>d&&(p=-p),n[l]=e[l]/(d+p),n[l+1]=e[l]*(d+p),m=n[l+1],o=i-n[l],a=l+2;a<t;a++)n[a]-=o;for(_+=o,d=n[h],v=g=1,y=g,w=e[l+1],x=0,b=0,a=h-1;a>=l;a--)for(y=v,v=g,b=x,i=g*e[a],o=g*d,p=f(d,e[a]),e[a+1]=x*p,d=(g=d/p)*n[a]-(x=e[a]/p)*i,n[a+1]=o+x*(g*i+x*n[a]),c=0;c<t;c++)r[c][a+1]=x*r[c][a]+g*(o=r[c][a+1]),r[c][a]=g*r[c][a]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),n[l]=g*d}while(u(e[l])>E*S);n[l]+=_,e[l]=0}for(a=0;a<t-1;a++){for(c=a,d=n[a],s=a+1;s<t;s++)n[s]<d&&(c=s,d=n[s]);if(c!==a)for(n[c]=n[a],n[a]=d,s=0;s<t;s++)d=r[s][a],r[s][a]=r[s][c],r[s][c]=d}}function a(t,e,n,r){var i,o,a,s,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,s=l;s<=f;s++)h+=u(e[s][l-1]);if(0!==h){for(a=0,s=f;s>=l;s--)n[s]=e[s][l-1]/h,a+=n[s]*n[s];for(o=R(a),0<n[l]&&(o=-o),a-=n[l]*o,n[l]-=o,c=l;c<t;c++){for(i=0,s=f;s>=l;s--)i+=n[s]*e[s][c];for(i/=a,s=l;s<=f;s++)e[s][c]-=i*n[s]}for(s=0;s<=f;s++){for(i=0,c=f;c>=l;c--)i+=n[c]*e[s][c];for(i/=a,c=l;c<=f;c++)e[s][c]-=i*n[c]}n[l]=h*n[l],e[l][l-1]=h*o}}for(s=0;s<t;s++)for(c=0;c<t;c++)r[s][c]=s===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(s=l+1;s<=f;s++)n[s]=e[s][l-1];for(c=l;c<=f;c++){for(o=0,s=l;s<=f;s++)o+=n[s]*r[s][c];for(o=o/n[l]/e[l][l-1],s=l;s<=f;s++)r[s][c]+=o*n[s]}}}function s(t,e,n,r,i){var o,a,s,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,C=0,k=0,O=0,P=0,D=0,L=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(n[o]=i[o][o],e[o]=0),a=M(o-1,0);a<t;a++)C+=u(i[o][a]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=C),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,n[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(L=R(u(O=(k=(i[S-1][S-1]-i[S][S])/2)*k+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=O){for(n[S-1]=p+(L=0<=k?k+L:k-L),n[S]=n[S-1],0!==L&&(n[S]=p-d/L),e[S-1]=0,e[S]=0,k=(p=i[S][S-1])/(D=u(p)+u(L)),k/=P=R(k*k+(O=L/D)*O),O/=P,a=S-1;a<t;a++)i[S-1][a]=O*(L=i[S-1][a])+k*i[S][a],i[S][a]=O*i[S][a]-k*L;for(o=0;o<=S;o++)i[o][S-1]=O*(L=i[o][S-1])+k*i[o][S],i[o][S]=O*i[o][S]-k*L;for(o=0;o<=E;o++)r[o][S-1]=O*(L=r[o][S-1])+k*r[o][S],r[o][S]=O*r[o][S]-k*L}else n[S-1]=p+k,n[S]=p+k,e[S-1]=L,e[S]=-L;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(k=((P=p-(L=i[h][h]))*(D=m-L)-d)/i[h+1][h]+i[h][h+1],O=i[h+1][h+1]-L-P-D,P=i[h+2][h+1],k/=D=u(k)+u(O)+u(P),O/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(O)+u(P))<T*(u(k)*(u(i[h-1][h-1])+u(L)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(s=h;s<=S-1&&(b=s!==S-1,s!==h&&(k=i[s][s-1],O=i[s+1][s-1],P=b?i[s+2][s-1]:0,0!==(p=u(k)+u(O)+u(P))&&(k/=p,O/=p,P/=p)),0!==p);s++)if(D=R(k*k+O*O+P*P),0>k&&(D=-D),0!==D){for(s===h?l!==h&&(i[s][s-1]=-i[s][s-1]):i[s][s-1]=-D*p,p=(k+=D)/D,m=O/D,L=P/D,O/=k,P/=k,a=s;a<t;a++)k=i[s][a]+O*i[s+1][a],b&&(i[s+2][a]=i[s+2][a]-(k+=P*i[s+2][a])*L),i[s][a]-=k*p,i[s+1][a]=i[s+1][a]-k*m;for(o=0;o<=v(S,s+3);o++)k=p*i[o][s]+m*i[o][s+1],b&&(i[o][s+2]=i[o][s+2]-(k+=L*i[o][s+2])*P),i[o][s]-=k,i[o][s+1]=i[o][s+1]-k*O;for(o=0;o<=E;o++)k=p*r[o][s]+m*r[o][s+1],b&&(r[o][s+2]=r[o][s+2]-(k+=L*r[o][s+2])*P),r[o][s]-=k,r[o][s+1]=r[o][s+1]-k*O}}}if(0!==C){for(S=t-1;0<=S;S--)if(k=n[S],0===(O=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-k,P=0,a=l;a<=S;a++)P+=i[o][a]*i[a][S];if(0>e[o])L=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*C):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-L*P)/(O=(n[o]-k)*(n[o]-k)+e[o]*e[o]),i[o+1][S]=u(p)>u(L)?(-P-d*f)/p:(-D-m*f)/L),1<T*(f=u(i[o][S]))*f)for(a=o;a<=S;a++)i[a][S]/=f}else if(0>O)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=O/i[S][S-1],i[S-1][S]=-(i[S][S]-k)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-k,O),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,a=l;a<=S;a++)g+=i[o][a]*i[a][S-1],y+=i[o][a]*i[a][S];if(d=i[o][o]-k,0>e[o])L=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,O),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(n[o]-k)*O,0==(w=(n[o]-k)*(n[o]-k)+e[o]*e[o]-O*O)&&0===x&&(w=T*C*(u(d)+u(O)+u(p)+u(m)+u(L))),_=c(p*P-L*g+O*y,p*D-L*y-O*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(L)+u(O)?(i[o+1][S-1]=(-g-d*i[o][S-1]+O*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-O*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],L,O),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(a=o;a<=S;a++)i[a][S-1]=i[a][S-1]/f,i[a][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(a=o;a<t;a++)r[o][a]=i[o][a];for(a=t-1;a>=0;a--)for(o=0;o<=E;o++){for(L=0,s=0;s<=v(a,E);s++)L+=r[o][s]*i[s][a];r[o][a]=L}}}function c(t,e,n,r){var i,o;return u(n)>u(r)?[(t+(i=r/n)*e)/(o=n+i*r),(e-i*t)/o]:[((i=n/r)*t+e)/(o=r+i*n),(i*e-t)/o]}var l=n(7).Matrix,h=n(41),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};r.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,n=this.n,r=this.e,i=this.d,o=new l(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)o[t][e]=0;o[t][t]=i[t],0<r[t]?o[t][t+1]=r[t]:0>r[t]&&(o[t][t-1]=r[t])}return o}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,a,s,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(a=0;a<l;a++){var f=0;for(e=a;e<c;e++)f=o(f,u[e][a]);if(0!==f){for(0>u[a][a]&&(f=-f),e=a;e<c;e++)u[e][a]/=f;for(u[a][a]+=1,n=a+1;n<l;n++){for(s=0,e=a;e<c;e++)s+=u[e][a]*u[e][n];for(s=-s/u[a][a],e=a;e<c;e++)u[e][n]+=s*u[e][a]}}h[a]=-f}this.QR=u,this.Rdiag=h}var i=n(7).Matrix,o=n(41).hypotenuse;r.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r,o,a,s,u=t.columns,c=t.clone(),l=e.columns;for(a=0;a<l;a++)for(o=0;o<u;o++){for(s=0,r=a;r<n;r++)s+=e[r][a]*c[r][o];for(s=-s/e[a][a],r=a;r<n;r++)c[r][o]+=s*e[r][a]}for(a=l-1;0<=a;a--){for(o=0;o<u;o++)c[a][o]/=this.Rdiag[a];for(r=0;r<a;r++)for(o=0;o<u;o++)c[r][o]-=c[a][o]*e[r][a]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,n=this.QR,r=n.columns,o=new i(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)o[t][e]=t<e?n[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,n,r,o=this.QR,a=o.rows,s=o.columns,u=new i(a,s);for(n=s-1;0<=n;n--){for(t=0;t<a;t++)u[t][n]=0;for(u[n][n]=1,e=n;e<s;e++)if(0!==o[n][n]){for(r=0,t=n;t<a;t++)r+=o[t][n]*u[t][e];for(r=-r/o[n][n],t=n;t<a;t++)u[t][e]+=r*o[t][n]}}return u}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var e,n,o,a=t,s=a.rows,u=new i(s,s),c=!0;for(n=0;n<s;n++){var l=u[n],h=0;for(o=0;o<n;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(a[n][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=a[n][n]-h),u[n][n]=R(M(h,0)),o=n+1;o<s;o++)u[n][o]=0}if(!c)throw new Error("Matrix is not positive definite");this.L=u}var i=n(7).Matrix;r.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");var r,o,a,s=t.columns,u=t.clone();for(a=0;a<n;a++)for(o=0;o<s;o++){for(r=0;r<a;r++)u[a][o]-=u[r][o]*e[a][r];u[a][o]/=e[a][a]}for(a=n-1;0<=a;a--)for(o=0;o<s;o++){for(r=a+1;r<n;r++)u[a][o]-=u[r][o]*e[r][a];u[a][o]/=e[a][a]}return u}},t.exports=r},function(t,e,n){"use strict";t.exports=n(8).Matrix,t.exports.Decompositions=t.exports.DC=n(249)},function(){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},function(t,e,n){"use strict";var r=n(18);t.exports=class extends r{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,n){"use strict";var r=n(18);t.exports=class extends r{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,n){"use strict";var r=n(18),i=n(27);t.exports=class extends r{constructor(t,e,n,r,o){i.checkRange(t,e,n,r,o),super(t,n-e+1,o-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,n){"use strict";var r=n(18),i=n(27);t.exports=class extends r{constructor(t,e,n){var r=i.checkIndices(t,e,n);super(t,r.row.length,r.column.length),this.rowIndices=r.row,this.columnIndices=r.column}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,n){"use strict";var r=n(18);t.exports=class extends r{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,n){"use strict";var r=n(18);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,n){"use strict";var r=n(18);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,n){"use strict";function r(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=n(8).Matrix,a=n(82),s=n(250),u=n(81),c=n(251),l=n(252);o.inverse=o.inv=r,o.prototype.inverse=o.prototype.inv=function(){return r(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:a,SVD:a,EigenvalueDecomposition:s,EVD:s,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:r,solve:i}},function(t,e,n){"use strict";function r(t,e){if(e=Object.assign({},p,e),!(this instanceof r))return new r(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");var n,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(n=0;n<c;n++)for(u=0;u<c;u++)h[n][u]=g.get(n,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(n=0;n<c;n++)v[n][u]=g.get(n,u);a(c,v,y,h),s(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,n,r){var i,o,a,s,c,l,h,f;for(c=0;c<t;c++)n[c]=r[t-1][c];for(s=t-1;0<s;s--){for(f=0,a=0,l=0;l<s;l++)f+=u(n[l]);if(0===f)for(e[s]=n[s-1],c=0;c<s;c++)n[c]=r[s-1][c],r[s][c]=0,r[c][s]=0;else{for(l=0;l<s;l++)n[l]/=f,a+=n[l]*n[l];for(i=n[s-1],o=R(a),0<i&&(o=-o),e[s]=f*o,a-=i*o,n[s-1]=i-o,c=0;c<s;c++)e[c]=0;for(c=0;c<s;c++){for(r[c][s]=i=n[c],o=e[c]+r[c][c]*i,l=c+1;l<=s-1;l++)o+=r[l][c]*n[l],e[l]+=r[l][c]*i;e[c]=o}for(i=0,c=0;c<s;c++)e[c]/=a,i+=e[c]*n[c];for(h=i/(a+a),c=0;c<s;c++)e[c]-=h*n[c];for(c=0;c<s;c++){for(i=n[c],o=e[c],l=c;l<=s-1;l++)r[l][c]-=i*e[l]+o*n[l];n[c]=r[s-1][c],r[s][c]=0}}n[s]=a}for(s=0;s<t-1;s++){if(r[t-1][s]=r[s][s],r[s][s]=1,0!==(a=n[s+1])){for(l=0;l<=s;l++)n[l]=r[l][s+1]/a;for(c=0;c<=s;c++){for(o=0,l=0;l<=s;l++)o+=r[l][s+1]*r[l][c];for(l=0;l<=s;l++)r[l][c]-=o*n[l]}}for(l=0;l<=s;l++)r[l][s+1]=0}for(c=0;c<t;c++)n[c]=r[t-1][c],r[t-1][c]=0;r[t-1][t-1]=1,e[0]=0}function o(t,e,n,r){var i,o,a,s,c,l,h,d,p,m,g,v,y,w,x,b;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(n[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(n[l+1]-(i=n[l]))/(2*e[l]),1),0>d&&(p=-p),n[l]=e[l]/(d+p),n[l+1]=e[l]*(d+p),m=n[l+1],o=i-n[l],a=l+2;a<t;a++)n[a]-=o;for(_+=o,d=n[h],v=g=1,y=g,w=e[l+1],x=0,b=0,a=h-1;a>=l;a--)for(y=v,v=g,b=x,i=g*e[a],o=g*d,p=f(d,e[a]),e[a+1]=x*p,d=(g=d/p)*n[a]-(x=e[a]/p)*i,n[a+1]=o+x*(g*i+x*n[a]),c=0;c<t;c++)r[c][a+1]=x*r[c][a]+g*(o=r[c][a+1]),r[c][a]=g*r[c][a]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),n[l]=g*d}while(u(e[l])>E*S);n[l]+=_,e[l]=0}for(a=0;a<t-1;a++){for(c=a,d=n[a],s=a+1;s<t;s++)n[s]<d&&(c=s,d=n[s]);if(c!==a)for(n[c]=n[a],n[a]=d,s=0;s<t;s++)d=r[s][a],r[s][a]=r[s][c],r[s][c]=d}}function a(t,e,n,r){var i,o,a,s,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,s=l;s<=f;s++)h+=u(e[s][l-1]);if(0!==h){for(a=0,s=f;s>=l;s--)n[s]=e[s][l-1]/h,a+=n[s]*n[s];for(o=R(a),0<n[l]&&(o=-o),a-=n[l]*o,n[l]-=o,c=l;c<t;c++){for(i=0,s=f;s>=l;s--)i+=n[s]*e[s][c];for(i/=a,s=l;s<=f;s++)e[s][c]-=i*n[s]}for(s=0;s<=f;s++){for(i=0,c=f;c>=l;c--)i+=n[c]*e[s][c];for(i/=a,c=l;c<=f;c++)e[s][c]-=i*n[c]}n[l]=h*n[l],e[l][l-1]=h*o}}for(s=0;s<t;s++)for(c=0;c<t;c++)r[s][c]=s===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(s=l+1;s<=f;s++)n[s]=e[s][l-1];for(c=l;c<=f;c++){for(o=0,s=l;s<=f;s++)o+=n[s]*r[s][c];for(o=o/n[l]/e[l][l-1],s=l;s<=f;s++)r[s][c]+=o*n[s]}}}function s(t,e,n,r,i){var o,a,s,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,C=0,k=0,O=0,P=0,D=0,L=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(n[o]=i[o][o],e[o]=0),a=M(o-1,0);a<t;a++)C+=u(i[o][a]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=C),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,n[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(L=R(u(O=(k=(i[S-1][S-1]-i[S][S])/2)*k+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=O){for(n[S-1]=p+(L=0<=k?k+L:k-L),n[S]=n[S-1],0!==L&&(n[S]=p-d/L),e[S-1]=0,e[S]=0,k=(p=i[S][S-1])/(D=u(p)+u(L)),k/=P=R(k*k+(O=L/D)*O),O/=P,a=S-1;a<t;a++)i[S-1][a]=O*(L=i[S-1][a])+k*i[S][a],i[S][a]=O*i[S][a]-k*L;for(o=0;o<=S;o++)i[o][S-1]=O*(L=i[o][S-1])+k*i[o][S],i[o][S]=O*i[o][S]-k*L;for(o=0;o<=E;o++)r[o][S-1]=O*(L=r[o][S-1])+k*r[o][S],r[o][S]=O*r[o][S]-k*L}else n[S-1]=p+k,n[S]=p+k,e[S-1]=L,e[S]=-L;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(k=((P=p-(L=i[h][h]))*(D=m-L)-d)/i[h+1][h]+i[h][h+1],O=i[h+1][h+1]-L-P-D,P=i[h+2][h+1],k/=D=u(k)+u(O)+u(P),O/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(O)+u(P))<T*(u(k)*(u(i[h-1][h-1])+u(L)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(s=h;s<=S-1&&(b=s!==S-1,s!==h&&(k=i[s][s-1],O=i[s+1][s-1],P=b?i[s+2][s-1]:0,0!==(p=u(k)+u(O)+u(P))&&(k/=p,O/=p,P/=p)),0!==p);s++)if(D=R(k*k+O*O+P*P),0>k&&(D=-D),0!==D){for(s===h?l!==h&&(i[s][s-1]=-i[s][s-1]):i[s][s-1]=-D*p,p=(k+=D)/D,m=O/D,L=P/D,O/=k,P/=k,a=s;a<t;a++)k=i[s][a]+O*i[s+1][a],b&&(i[s+2][a]=i[s+2][a]-(k+=P*i[s+2][a])*L),i[s][a]-=k*p,i[s+1][a]=i[s+1][a]-k*m;for(o=0;o<=v(S,s+3);o++)k=p*i[o][s]+m*i[o][s+1],b&&(i[o][s+2]=i[o][s+2]-(k+=L*i[o][s+2])*P),i[o][s]-=k,i[o][s+1]=i[o][s+1]-k*O;for(o=0;o<=E;o++)k=p*r[o][s]+m*r[o][s+1],b&&(r[o][s+2]=r[o][s+2]-(k+=L*r[o][s+2])*P),r[o][s]-=k,r[o][s+1]=r[o][s+1]-k*O}}}if(0!==C){for(S=t-1;0<=S;S--)if(k=n[S],0===(O=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-k,P=0,a=l;a<=S;a++)P+=i[o][a]*i[a][S];if(0>e[o])L=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*C):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-L*P)/(O=(n[o]-k)*(n[o]-k)+e[o]*e[o]),i[o+1][S]=u(p)>u(L)?(-P-d*f)/p:(-D-m*f)/L),1<T*(f=u(i[o][S]))*f)for(a=o;a<=S;a++)i[a][S]/=f}else if(0>O)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=O/i[S][S-1],i[S-1][S]=-(i[S][S]-k)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-k,O),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,a=l;a<=S;a++)g+=i[o][a]*i[a][S-1],y+=i[o][a]*i[a][S];if(d=i[o][o]-k,0>e[o])L=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,O),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(n[o]-k)*O,0==(w=(n[o]-k)*(n[o]-k)+e[o]*e[o]-O*O)&&0===x&&(w=T*C*(u(d)+u(O)+u(p)+u(m)+u(L))),_=c(p*P-L*g+O*y,p*D-L*y-O*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(L)+u(O)?(i[o+1][S-1]=(-g-d*i[o][S-1]+O*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-O*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],L,O),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(a=o;a<=S;a++)i[a][S-1]=i[a][S-1]/f,i[a][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(a=o;a<t;a++)r[o][a]=i[o][a];for(a=t-1;a>=0;a--)for(o=0;o<=E;o++){for(L=0,s=0;s<=v(a,E);s++)L+=r[o][s]*i[s][a];r[o][a]=L}}}function c(t,e,n,r){var i,o;return u(n)>u(r)?[(t+(i=r/n)*e)/(o=n+i*r),(e-i*t)/o]:[((i=n/r)*t+e)/(o=r+i*n),(i*e-t)/o]}var l=n(8).Matrix,h=n(42),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};r.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,n=this.n,r=this.e,i=this.d,o=new l(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)o[t][e]=0;o[t][t]=i[t],0<r[t]?o[t][t+1]=r[t]:0>r[t]&&(o[t][t-1]=r[t])}return o}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,a,s,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(a=0;a<l;a++){var f=0;for(e=a;e<c;e++)f=o(f,u[e][a]);if(0!==f){for(0>u[a][a]&&(f=-f),e=a;e<c;e++)u[e][a]/=f;for(u[a][a]+=1,n=a+1;n<l;n++){for(s=0,e=a;e<c;e++)s+=u[e][a]*u[e][n];for(s=-s/u[a][a],e=a;e<c;e++)u[e][n]+=s*u[e][a]}}h[a]=-f}this.QR=u,this.Rdiag=h}var i=n(8).Matrix,o=n(42).hypotenuse;r.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r,o,a,s,u=t.columns,c=t.clone(),l=e.columns;for(a=0;a<l;a++)for(o=0;o<u;o++){for(s=0,r=a;r<n;r++)s+=e[r][a]*c[r][o];for(s=-s/e[a][a],r=a;r<n;r++)c[r][o]+=s*e[r][a]}for(a=l-1;0<=a;a--){for(o=0;o<u;o++)c[a][o]/=this.Rdiag[a];for(r=0;r<a;r++)for(o=0;o<u;o++)c[r][o]-=c[a][o]*e[r][a]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,n=this.QR,r=n.columns,o=new i(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)o[t][e]=t<e?n[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,n,r,o=this.QR,a=o.rows,s=o.columns,u=new i(a,s);for(n=s-1;0<=n;n--){for(t=0;t<a;t++)u[t][n]=0;for(u[n][n]=1,e=n;e<s;e++)if(0!==o[n][n]){for(r=0,t=n;t<a;t++)r+=o[t][n]*u[t][e];for(r=-r/o[n][n],t=n;t<a;t++)u[t][e]+=r*o[t][n]}}return u}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var e,n,o,a=t,s=a.rows,u=new i(s,s),c=!0;for(n=0;n<s;n++){var l=u[n],h=0;for(o=0;o<n;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(a[n][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=a[n][n]-h),u[n][n]=R(M(h,0)),o=n+1;o<s;o++)u[n][o]=0}if(!c)throw new Error("Matrix is not positive definite");this.L=u}var i=n(8).Matrix;r.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");var r,o,a,s=t.columns,u=t.clone();for(a=0;a<n;a++)for(o=0;o<s;o++){for(r=0;r<a;r++)u[a][o]-=u[r][o]*e[a][r];u[a][o]/=e[a][a]}for(a=n-1;0<=a;a--)for(o=0;o<s;o++){for(r=a+1;r<n;r++)u[a][o]-=u[r][o]*e[r][a];u[a][o]/=e[a][a]}return u}},t.exports=r},function(t,e,n){"use strict";var r=n(254),i=n(255),o={damping:void 0,gradientDifference:.1,initialValues:void 0,maxIterations:100,errorTolerance:.01};t.exports=function(t,e,n){if(!n||!n.damping||0>=n.damping)throw new TypeError("The damping option should be a positive number");if(!(n=Object.assign({},o,n)).initialValues){n.initialValues=Array(e.length);for(var a=0;a<e.length;a++)n.initialValues[a]=1}if(!t.x||!t.y)throw new TypeError("The data parameter should have a x and y elements");if(t.x.constructor!==Array||2>t.x.length||t.y.constructor!==Array||2>t.y.length)throw new TypeError("The data parameter elements should be an array with more than 2 points");if(t.x.length!==t.y.length)throw new RangeError("The data parameter elements should have the same size");for(var s=n.initialValues,u=r(t,s,e),c=u<=n.errorTolerance,l=0;l<n.maxIterations&&!c;l++)s=i(t,s,n.damping,n.gradientDifference,e),c=(u=r(t,s,e))<=n.errorTolerance;return{parameterValues:s,parameterError:u,iterations:l}}},function(t){"use strict";t.exports=function(t,e,n){for(var r=0,i=n(...e),o=0;o<t.x.length;o++)r+=u(t.y[o]-i(t.x[o]));return r}},function(t,e,n){"use strict";var r=n(256);t.exports=function(t,e,n,i,o){var a=r.eye(o.length).mul(n*i*i),s=function(t,e,n,i){for(var o=i.length,a=t.x.length,s=Array(o),u=i(...e),c=0;c<o;c++){s[c]=Array(a);var l=e.concat();l[c]+=n;for(var h=i(...l),f=0;f<a;f++)s[c][f]=u(t.x[f])-h(t.x[f])}return new r(s)}(t,e,i,o),u=function(t,e,n){for(var i=t.x.length,o=Array(i),a=n(...e),s=0;s<i;s++)o[s]=t.y[s]-a(t.x[s]);return new r([o])}(t,e,o).transpose();e=new r([e]);var c=r.inv(a.add(s.mmul(s.transposeView())));return(e=e.sub(c.mmul(s).mmul(u).mul(i).transposeView())).to1DArray()}},function(t,e,n){"use strict";t.exports=n(9).Matrix,t.exports.Decompositions=t.exports.DC=n(265)},function(){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},function(t,e,n){"use strict";var r=n(19);t.exports=class extends r{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,n){"use strict";var r=n(19);t.exports=class extends r{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,n){"use strict";var r=n(19),i=n(28);t.exports=class extends r{constructor(t,e,n,r,o){i.checkRange(t,e,n,r,o),super(t,n-e+1,o-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,n){"use strict";var r=n(19),i=n(28);t.exports=class extends r{constructor(t,e,n){var r=i.checkIndices(t,e,n);super(t,r.row.length,r.column.length),this.rowIndices=r.row,this.columnIndices=r.column}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,n){"use strict";var r=n(19);t.exports=class extends r{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,n){"use strict";var r=n(19);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,n){"use strict";var r=n(19);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,n){"use strict";function r(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=n(9).Matrix,a=n(85),s=n(266),u=n(84),c=n(267),l=n(268);o.inverse=o.inv=r,o.prototype.inverse=o.prototype.inv=function(){return r(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:a,SVD:a,EigenvalueDecomposition:s,EVD:s,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:r,solve:i}},function(t,e,n){"use strict";function r(t,e){if(e=Object.assign({},p,e),!(this instanceof r))return new r(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");var n,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(n=0;n<c;n++)for(u=0;u<c;u++)h[n][u]=g.get(n,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(n=0;n<c;n++)v[n][u]=g.get(n,u);a(c,v,y,h),s(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,n,r){var i,o,a,s,c,l,h,f;for(c=0;c<t;c++)n[c]=r[t-1][c];for(s=t-1;0<s;s--){for(f=0,a=0,l=0;l<s;l++)f+=u(n[l]);if(0===f)for(e[s]=n[s-1],c=0;c<s;c++)n[c]=r[s-1][c],r[s][c]=0,r[c][s]=0;else{for(l=0;l<s;l++)n[l]/=f,a+=n[l]*n[l];for(i=n[s-1],o=R(a),0<i&&(o=-o),e[s]=f*o,a-=i*o,n[s-1]=i-o,c=0;c<s;c++)e[c]=0;for(c=0;c<s;c++){for(r[c][s]=i=n[c],o=e[c]+r[c][c]*i,l=c+1;l<=s-1;l++)o+=r[l][c]*n[l],e[l]+=r[l][c]*i;e[c]=o}for(i=0,c=0;c<s;c++)e[c]/=a,i+=e[c]*n[c];for(h=i/(a+a),c=0;c<s;c++)e[c]-=h*n[c];for(c=0;c<s;c++){for(i=n[c],o=e[c],l=c;l<=s-1;l++)r[l][c]-=i*e[l]+o*n[l];n[c]=r[s-1][c],r[s][c]=0}}n[s]=a}for(s=0;s<t-1;s++){if(r[t-1][s]=r[s][s],r[s][s]=1,0!==(a=n[s+1])){for(l=0;l<=s;l++)n[l]=r[l][s+1]/a;for(c=0;c<=s;c++){for(o=0,l=0;l<=s;l++)o+=r[l][s+1]*r[l][c];for(l=0;l<=s;l++)r[l][c]-=o*n[l]}}for(l=0;l<=s;l++)r[l][s+1]=0}for(c=0;c<t;c++)n[c]=r[t-1][c],r[t-1][c]=0;r[t-1][t-1]=1,e[0]=0}function o(t,e,n,r){var i,o,a,s,c,l,h,d,p,m,g,v,y,w,x,b;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(n[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(n[l+1]-(i=n[l]))/(2*e[l]),1),0>d&&(p=-p),n[l]=e[l]/(d+p),n[l+1]=e[l]*(d+p),m=n[l+1],o=i-n[l],a=l+2;a<t;a++)n[a]-=o;for(_+=o,d=n[h],v=g=1,y=g,w=e[l+1],x=0,b=0,a=h-1;a>=l;a--)for(y=v,v=g,b=x,i=g*e[a],o=g*d,p=f(d,e[a]),e[a+1]=x*p,d=(g=d/p)*n[a]-(x=e[a]/p)*i,n[a+1]=o+x*(g*i+x*n[a]),c=0;c<t;c++)r[c][a+1]=x*r[c][a]+g*(o=r[c][a+1]),r[c][a]=g*r[c][a]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),n[l]=g*d}while(u(e[l])>E*S);n[l]+=_,e[l]=0}for(a=0;a<t-1;a++){for(c=a,d=n[a],s=a+1;s<t;s++)n[s]<d&&(c=s,d=n[s]);if(c!==a)for(n[c]=n[a],n[a]=d,s=0;s<t;s++)d=r[s][a],r[s][a]=r[s][c],r[s][c]=d}}function a(t,e,n,r){var i,o,a,s,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,s=l;s<=f;s++)h+=u(e[s][l-1]);if(0!==h){for(a=0,s=f;s>=l;s--)n[s]=e[s][l-1]/h,a+=n[s]*n[s];for(o=R(a),0<n[l]&&(o=-o),a-=n[l]*o,n[l]-=o,c=l;c<t;c++){for(i=0,s=f;s>=l;s--)i+=n[s]*e[s][c];for(i/=a,s=l;s<=f;s++)e[s][c]-=i*n[s]}for(s=0;s<=f;s++){for(i=0,c=f;c>=l;c--)i+=n[c]*e[s][c];for(i/=a,c=l;c<=f;c++)e[s][c]-=i*n[c]}n[l]=h*n[l],e[l][l-1]=h*o}}for(s=0;s<t;s++)for(c=0;c<t;c++)r[s][c]=s===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(s=l+1;s<=f;s++)n[s]=e[s][l-1];for(c=l;c<=f;c++){for(o=0,s=l;s<=f;s++)o+=n[s]*r[s][c];for(o=o/n[l]/e[l][l-1],s=l;s<=f;s++)r[s][c]+=o*n[s]}}}function s(t,e,n,r,i){var o,a,s,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,C=0,k=0,O=0,P=0,D=0,L=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(n[o]=i[o][o],e[o]=0),a=M(o-1,0);a<t;a++)C+=u(i[o][a]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=C),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,n[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(L=R(u(O=(k=(i[S-1][S-1]-i[S][S])/2)*k+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=O){for(n[S-1]=p+(L=0<=k?k+L:k-L),n[S]=n[S-1],0!==L&&(n[S]=p-d/L),e[S-1]=0,e[S]=0,k=(p=i[S][S-1])/(D=u(p)+u(L)),k/=P=R(k*k+(O=L/D)*O),O/=P,a=S-1;a<t;a++)i[S-1][a]=O*(L=i[S-1][a])+k*i[S][a],i[S][a]=O*i[S][a]-k*L;for(o=0;o<=S;o++)i[o][S-1]=O*(L=i[o][S-1])+k*i[o][S],i[o][S]=O*i[o][S]-k*L;for(o=0;o<=E;o++)r[o][S-1]=O*(L=r[o][S-1])+k*r[o][S],r[o][S]=O*r[o][S]-k*L}else n[S-1]=p+k,n[S]=p+k,e[S-1]=L,e[S]=-L;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(k=((P=p-(L=i[h][h]))*(D=m-L)-d)/i[h+1][h]+i[h][h+1],O=i[h+1][h+1]-L-P-D,P=i[h+2][h+1],k/=D=u(k)+u(O)+u(P),O/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(O)+u(P))<T*(u(k)*(u(i[h-1][h-1])+u(L)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(s=h;s<=S-1&&(b=s!==S-1,s!==h&&(k=i[s][s-1],O=i[s+1][s-1],P=b?i[s+2][s-1]:0,0!==(p=u(k)+u(O)+u(P))&&(k/=p,O/=p,P/=p)),0!==p);s++)if(D=R(k*k+O*O+P*P),0>k&&(D=-D),0!==D){for(s===h?l!==h&&(i[s][s-1]=-i[s][s-1]):i[s][s-1]=-D*p,p=(k+=D)/D,m=O/D,L=P/D,O/=k,P/=k,a=s;a<t;a++)k=i[s][a]+O*i[s+1][a],b&&(i[s+2][a]=i[s+2][a]-(k+=P*i[s+2][a])*L),i[s][a]-=k*p,i[s+1][a]=i[s+1][a]-k*m;for(o=0;o<=v(S,s+3);o++)k=p*i[o][s]+m*i[o][s+1],b&&(i[o][s+2]=i[o][s+2]-(k+=L*i[o][s+2])*P),i[o][s]-=k,i[o][s+1]=i[o][s+1]-k*O;for(o=0;o<=E;o++)k=p*r[o][s]+m*r[o][s+1],b&&(r[o][s+2]=r[o][s+2]-(k+=L*r[o][s+2])*P),r[o][s]-=k,r[o][s+1]=r[o][s+1]-k*O}}}if(0!==C){for(S=t-1;0<=S;S--)if(k=n[S],0===(O=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-k,P=0,a=l;a<=S;a++)P+=i[o][a]*i[a][S];if(0>e[o])L=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*C):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-L*P)/(O=(n[o]-k)*(n[o]-k)+e[o]*e[o]),i[o+1][S]=u(p)>u(L)?(-P-d*f)/p:(-D-m*f)/L),1<T*(f=u(i[o][S]))*f)for(a=o;a<=S;a++)i[a][S]/=f}else if(0>O)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=O/i[S][S-1],i[S-1][S]=-(i[S][S]-k)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-k,O),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,a=l;a<=S;a++)g+=i[o][a]*i[a][S-1],y+=i[o][a]*i[a][S];if(d=i[o][o]-k,0>e[o])L=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,O),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(n[o]-k)*O,0==(w=(n[o]-k)*(n[o]-k)+e[o]*e[o]-O*O)&&0===x&&(w=T*C*(u(d)+u(O)+u(p)+u(m)+u(L))),_=c(p*P-L*g+O*y,p*D-L*y-O*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(L)+u(O)?(i[o+1][S-1]=(-g-d*i[o][S-1]+O*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-O*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],L,O),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(a=o;a<=S;a++)i[a][S-1]=i[a][S-1]/f,i[a][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(a=o;a<t;a++)r[o][a]=i[o][a];for(a=t-1;a>=0;a--)for(o=0;o<=E;o++){for(L=0,s=0;s<=v(a,E);s++)L+=r[o][s]*i[s][a];r[o][a]=L}}}function c(t,e,n,r){var i,o;return u(n)>u(r)?[(t+(i=r/n)*e)/(o=n+i*r),(e-i*t)/o]:[((i=n/r)*t+e)/(o=r+i*n),(i*e-t)/o]}var l=n(9).Matrix,h=n(43),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};r.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,n=this.n,r=this.e,i=this.d,o=new l(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)o[t][e]=0;o[t][t]=i[t],0<r[t]?o[t][t+1]=r[t]:0>r[t]&&(o[t][t-1]=r[t])}return o}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,a,s,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(a=0;a<l;a++){var f=0;for(e=a;e<c;e++)f=o(f,u[e][a]);if(0!==f){for(0>u[a][a]&&(f=-f),e=a;e<c;e++)u[e][a]/=f;for(u[a][a]+=1,n=a+1;n<l;n++){for(s=0,e=a;e<c;e++)s+=u[e][a]*u[e][n];for(s=-s/u[a][a],e=a;e<c;e++)u[e][n]+=s*u[e][a]}}h[a]=-f}this.QR=u,this.Rdiag=h}var i=n(9).Matrix,o=n(43).hypotenuse;r.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r,o,a,s,u=t.columns,c=t.clone(),l=e.columns;for(a=0;a<l;a++)for(o=0;o<u;o++){for(s=0,r=a;r<n;r++)s+=e[r][a]*c[r][o];for(s=-s/e[a][a],r=a;r<n;r++)c[r][o]+=s*e[r][a]}for(a=l-1;0<=a;a--){for(o=0;o<u;o++)c[a][o]/=this.Rdiag[a];for(r=0;r<a;r++)for(o=0;o<u;o++)c[r][o]-=c[a][o]*e[r][a]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,n=this.QR,r=n.columns,o=new i(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)o[t][e]=t<e?n[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,n,r,o=this.QR,a=o.rows,s=o.columns,u=new i(a,s);for(n=s-1;0<=n;n--){for(t=0;t<a;t++)u[t][n]=0;for(u[n][n]=1,e=n;e<s;e++)if(0!==o[n][n]){for(r=0,t=n;t<a;t++)r+=o[t][n]*u[t][e];for(r=-r/o[n][n],t=n;t<a;t++)u[t][e]+=r*o[t][n]}}return u}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var e,n,o,a=t,s=a.rows,u=new i(s,s),c=!0;for(n=0;n<s;n++){var l=u[n],h=0;for(o=0;o<n;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(a[n][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=a[n][n]-h),u[n][n]=R(M(h,0)),o=n+1;o<s;o++)u[n][o]=0}if(!c)throw new Error("Matrix is not positive definite");this.L=u}var i=n(9).Matrix;r.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");var r,o,a,s=t.columns,u=t.clone();for(a=0;a<n;a++)for(o=0;o<s;o++){for(r=0;r<a;r++)u[a][o]-=u[r][o]*e[a][r];u[a][o]/=e[a][a]}for(a=n-1;0<=a;a--)for(o=0;o<s;o++){for(r=a+1;r<n;r++)u[a][o]-=u[r][o]*e[r][a];u[a][o]/=e[a][a]}return u}},t.exports=r},function(t,e){"use strict";function n(t,e){var n=65535&(t>>>=0);return((t-n)*(e>>>=0)>>>0)+n*e>>>0}function r(t){var e=t.state[0];e^=e<<a,e^=e>>>s,e^=t.state[3]<<u,t.state[0]=t.state[1],t.state[1]=t.state[2],t.state[2]=t.state[3],t.state[3]=e}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){var e=0>=arguments.length||void 0===arguments[0]?Date.now():arguments[0];(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.state=new Uint32Array(4),this.init(e)}return i(t,[{key:"init",value:function(t){this.state[0]=t,this.state[1]=0,this.state[2]=0,this.state[3]=0;for(var e=1;e<8;e++)this.state[3&e]^=e+n(1812433253,this.state[3&e-1]^this.state[3&e-1]>>>30>>>0)>>>0;for(function(t){0===t.state[0]&&0===t.state[1]&&0===t.state[2]&&0===t.state[3]&&(t.state[0]=88,t.state[1]=83,t.state[2]=65,t.state[3]=68)}(this),e=0;e<8;e++)r(this)}},{key:"getUint32",value:function(){return r(this),this.state[3]+this.state[2]>>>0}},{key:"getFloat",value:function(){return(this.getUint32()>>>8)*(1/16777216)}},{key:"random",get:function(){return this._random||(this._random=this.getFloat.bind(this)),this._random}}]),t}();e.default=o;var a=15,s=18,u=11;t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if(t.length!==e.length)throw new Error("features and labels should have the same length")}function i(t,e){return Array(t).fill(0).map(()=>Array(e).fill(0))}function o(t){for(var e=new Set,n=0;n<t.length;n++)e.add(t[n]);return Array.from(e)}function a(t,e,n,r,i,o,a,s){var u,c=i.map(function(t){return e[t]}),l=o.map(function(t){return e[t]}),h=i.map(function(t){return n[t]}),f=o.map(function(t){return n[t]});t.prototype.train?(u=new t(r)).train(l,f):u=new t(l,f,r);for(var d=u.predict(c),p=0;p<d.length;p++)a[s.indexOf(h[p])][s.indexOf(d[p])]++}var s=n(86),u={},c=n(271);u.leaveOneOut=function(t,e,n,r){return u.leavePOut(t,e,n,r,1)},u.leavePOut=function(t,e,n,u,l){r(e,n);for(var h=o(n),f=i(h.length,h.length),d=e.length,p=c(l,d),m=Array(d),g=0;g<d;g++)m[g]=g;var v,y=!0,w=!1;try{for(var x,b=p[Symbol.iterator]();!(y=(x=b.next()).done);y=!0){for(var _=x.value,M=m.slice(),S=_.length-1;0<=S;S--)M.splice(_[S],1);a(t,e,n,u,_,M,f,h)}}catch(t){w=!0,v=t}finally{try{!y&&b.return&&b.return()}finally{if(w)throw v}}return new s(f,h)},u.kFold=function(t,e,n,u,c){r(e,n);for(var l=o(n),h=i(l.length,l.length),f=e.length,d=Array(f),p=0;p<f;p++)d[p]=p;for(var m=g(f/c),v=[],y=[];d.length;){var w=g(Math.random()*d.length);v.push(d[w]),d.splice(w,1),v.length===m&&(y.push(v),v=[])}for(v.length&&y.push(v),y=y.slice(0,c),p=0;p<y.length;p++){for(var x=y[p],b=[],_=0;_<y.length;_++)_!==p&&(b=b.concat(y[_]));a(t,e,n,u,x,b,h,l)}return new s(h,l)},t.exports=u},function(t){"use strict";var e={mode:"index"};t.exports=function*(t,n,r){function i(){var t,e,n;for(e=1;0>=h[e];)e++;if(0===h[e-1]){for(t=e-1;1!==t;t--)h[t]=-1;h[e]=0,o=s=0,h[1]=1,a=e-1}else{1<e&&(h[e-1]=0);do{e++}while(0<h[e]);for(n=e-1,t=e;0===h[t];)h[t++]=-1;if(-1===h[t])h[t]=h[n],s=h[n]-1,o=t-1,a=n-1,h[n]=-1;else{if(t===h[0])return 0;h[e]=h[t],s=h[t]-1,h[t]=0,o=e-1,a=t-1}}return 1}r=Object.assign({},e,r);for(var o,a,s,u=Array(n),c=Array(t),l=Array(n),h=Array(n+2),f=0;f<n;f++)u[f]=f,l[f]=f<n-t?0:1;for(f=0;f<t;f++)c[f]=n-t+f;for(f=0;f<h.length;f++)h[f]=0===f?n+1:f<=n-t?0:f<=n?f-n+t:-2;if("index"===r.mode)for(yield c.slice();i();)c[s]=u[o],yield c.slice();else{if("mask"!==r.mode)throw new Error("Invalid mode");for(yield l.slice();i();)l[o]=1,l[a]=0,yield l.slice()}}},function(t,e,n){"use strict";function r(t){this.options=Object.assign({},a,t),this.kernel=new i(this.options.kernel,this.options.kernelOptions),this.b=0}var i=n(37),o=n(2).array,a={C:1,tol:1e-4,maxPasses:10,maxIterations:1e4,kernel:"linear",alphaTol:1e-6,random:Math.random,whitening:!0};r.prototype.train=function(t,e){if(t.length!==e.length)throw new Error("Features and labels should have the same length");if(2>t.length)throw new Error("Cannot train with less than 2 observations");if(this._trained=!1,this._loaded=!1,this.N=e.length,this.D=t[0].length,this.options.whitening){this.X=Array(this.N);for(var n=0;n<this.N;n++)this.X[n]=Array(this.D);this.minMax=Array(this.D);for(var r,i=0;i<this.D;i++){for(r=Array(this.N),n=0;n<this.N;n++)r[n]=t[n][i];for(this.minMax[i]=o.minMax(r),n=0;n<this.N;n++)this.X[n][i]=(t[n][i]-this.minMax[i].min)/(this.minMax[i].max-this.minMax[i].min)}}else this.X=t;this.Y=e,this.b=0,this.W=void 0;var a=this.kernel.compute(this.X),s=e.length,c=Array(s).fill(0);this.alphas=c;for(var l=0;l<s;l++)c[l]=0;for(var h,f=0,d=0,p=0,m=0,y=0,w=0,x=0,b=0,_=0,S=0,E=0;m<this.options.maxPasses&&p<this.options.maxIterations;){for(h=0,n=0;n<s;n++)if(y=this._marginOnePrecomputed(n,a)-e[n],e[n]*y<-this.options.tol&&c[n]<this.options.C||e[n]*y>this.options.tol&&0<c[n]){for(i=n;i===n;)i=g(this.options.random()*s);if(w=this._marginOnePrecomputed(i,a)-e[i],x=c[n],b=c[i],e[n]===e[i]?(_=M(0,x+b-this.options.C),S=v(this.options.C,x+b)):(_=M(0,b-x),S=v(this.options.C,this.options.C+b+x)),1e-4>u(_-S))continue;if(0<=(E=2*a[n][i]-a[n][n]-a[i][i]))continue;var T=c[i]-e[i]*(y-w)/E;if(T>S?T=S:T<_&&(T=_),.001>u(b-T))continue;c[i]=T,c[n]+=e[n]*e[i]*(b-T),this.b=((f=this.b-y-e[n]*(c[n]-x)*a[n][n]-e[i]*(c[i]-b)*a[n][i])+(d=this.b-w-e[n]*(c[n]-x)*a[n][i]-e[i]*(c[i]-b)*a[i][i]))/2,c[n]<this.options.C&&0<c[n]&&(this.b=f),c[i]<this.options.C&&0<c[i]&&(this.b=d),h+=1}p++,0==h?m+=1:m=0}if(p===this.options.maxIterations)throw new Error("max iterations reached");if(this.iterations=p,"linear"===this.options.kernel){this.W=Array(this.D);for(var A=0;A<this.D;A++){this.W[A]=0;for(var C=0;C<s;C++)this.W[A]+=e[C]*c[C]*this.X[C][A]}}var k=[],R=[],O=[];for(this._supportVectorIdx=[],n=0;n<this.N;n++)this.alphas[n]>this.options.alphaTol&&(k.push(this.X[n]),R.push(e[n]),O.push(this.alphas[n]),this._supportVectorIdx.push(n));this.X=k,this.Y=R,this.N=k.length,this.alphas=O,this._trained=!0},r.prototype.predictOne=function(t){return 0<this.marginOne(t)?1:-1},r.prototype.predict=function(t){if(!this._trained&&!this._loaded)throw new Error("Cannot predict, you need to train the SVM first");return Array.isArray(t)&&Array.isArray(t[0])?t.map(this.predictOne.bind(this)):this.predictOne(t)},r.prototype.marginOne=function(t,e){this.options.whitening&&!e&&(t=this._applyWhitening(t));var n,r=this.b;if("linear"===this.options.kernel&&this.W)for(n=0;n<this.W.length;n++)r+=this.W[n]*t[n];else for(n=0;n<this.N;n++)r+=this.alphas[n]*this.Y[n]*this.kernel.compute([t],[this.X[n]])[0][0];return r},r.prototype._marginOnePrecomputed=function(t,e){var n,r=this.b;for(n=0;n<this.N;n++)r+=this.alphas[n]*this.Y[n]*e[t][n];return r},r.prototype.margin=function(t){return Array.isArray(t)?t.map(this.marginOne.bind(this)):this.marginOne(t)},r.prototype.supportVectors=function(){if(!this._trained&&!this._loaded)throw new Error("Cannot get support vectors, you need to train the SVM first");if(this._loaded&&"linear"===this.options.kernel)throw new Error("Cannot get support vectors from saved linear model, you need to train the SVM to have them");return this._supportVectorIdx},r.load=function(t){this._loaded=!0,this._trained=!1;var e=new r(t.options);return"linear"===t.options.kernel?(e.W=t.W.slice(),e.D=e.W.length):(e.X=t.X.slice(),e.Y=t.Y.slice(),e.alphas=t.alphas.slice(),e.N=e.X.length,e.D=e.X[0].length),e.minMax=t.minMax,e.b=t.b,e._loaded=!0,e._trained=!1,e},r.prototype.toJSON=function(){if(!this._trained&&!this._loaded)throw new Error("Cannot export, you need to train the SVM first");var t={};return t.options=Object.assign({},this.options),t.b=this.b,t.minMax=this.minMax,"linear"===t.options.kernel?t.W=this.W.slice():(t.X=this.X.slice(),t.Y=this.Y.slice(),t.alphas=this.alphas.slice()),t},r.prototype._applyWhitening=function(t){if(!this.minMax)throw new Error("Could not apply whitening");for(var e=Array(t.length),n=0;n<t.length;n++)e[n]=(t[n]-this.minMax[n].min)/(this.minMax[n].max-this.minMax[n].min);return e},t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=t.kdTree.nearest(e,t.k),r=Array(t.classes),i=-1,o=-1,a=n[0][0].length-1,s=0;s<r.length;++s)r[s]=0;for(s=0;s<n.length;++s){var u=n[s][0][a],c=++r[u];c>o&&(i=u,o=c)}return i}Object.defineProperty(e,"__esModule",{value:!0});var i=n(274),o=n(0),a=o&&o.__esModule?o:{default:o};class s{constructor(t,e,n={}){if(!0===t){var r=e;return this.kdTree=new i.kdTree(r.kdTree,n),this.k=r.k,this.classes=r.classes,void(this.isEuclidean=r.isEuclidean)}for(var o=n.distance,s=void 0===o?a.default:o,u=n.k,c=void 0===u?t[0].length+1:u,l=new Set(e).size,h=Array(t.length),f=0;f<h.length;++f)h[f]=t[f].slice();for(f=0;f<e.length;++f)h[f].push(e[f]);this.kdTree=new i.kdTree(h,s),this.k=c,this.classes=l,this.isEuclidean=s===a.default}static load(t,e=a.default){if("KNN"!==t.name)throw new Error("invalid model: "+t.name);if(!t.isEuclidean&&e===a.default)throw new Error("a custom distance function was used to create the model. Please provide it again");if(t.isEuclidean&&e!==a.default)throw new Error("the model was created with the default distance function. Do not load it with another one");return new s(!0,t,e)}toJSON(){return{name:"KNN",kdTree:this.kdTree.toJSON(),k:this.k,classes:this.classes,isEuclidean:this.isEuclidean}}predict(t){if(Array.isArray(t)){if("number"==typeof t[0])return r(this,t);if(Array.isArray(t[0])&&"number"==typeof t[0][0]){for(var e=Array(t.length),n=0;n<t.length;n++)e[n]=r(this,t[n]);return e}}throw new TypeError("dataset to predict must be an array or a matrix")}}e.default=s},function(t,e){"use strict";function n(t,e,n){this.obj=t,this.left=null,this.right=null,this.parent=n,this.dimension=e}function i(t){this.content=[],this.scoreFunction=t}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return 0<this.content.length&&(this.content[0]=e,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var e=this.content.length,n=0;n<e;n++)if(this.content[n]==t){var r=this.content.pop();return void(n!=e-1&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.bubbleUp(n):this.sinkDown(n)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];0<t;){var n=g((t+1)/2)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},sinkDown:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i=2*(t+1),o=i-1,a=null;if(o<e){var s=this.scoreFunction(this.content[o]);s<r&&(a=o)}if(i<e&&this.scoreFunction(this.content[i])<(null==a?r:s)&&(a=i),null==a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},e.kdTree=function(t,e){var o,a=this;if(Array.isArray(t)){o=Array(t[0].length);for(var s=0;s<o.length;++s)o[s]=s;this.root=function t(e,r,i){var a,s,u=r%o.length;return 0===e.length?null:1===e.length?new n(e[0],u,i):(e.sort(function(t,e){return t[o[u]]-e[o[u]]}),(s=new n(e[a=g(e.length/2)],u,i)).left=t(e.slice(0,a),r+1,s),s.right=t(e.slice(a+1),r+1,s),s)}(t,0,null)}else o=t.dimensions,function(t){a.root=t,function t(e){e.left&&(e.left.parent=e,t(e.left)),e.right&&(e.right.parent=e,t(e.right))}(a.root)}(t);this.toJSON=function(t,e=!0){t||(t=this.root);var r=new n(t.obj,t.dimension,null);return t.left&&(r.left=a.toJSON(t.left,!1)),t.right&&(r.right=a.toJSON(t.right,!1)),e&&(r.dimensions=o),r},this.insert=function(t){var e,r,i=function e(n,r){if(null===n)return r;var i=o[n.dimension];return e(t[i]<n.obj[i]?n.left:n.right,n)}(this.root,null);return null===i?void(this.root=new n(t,0,null)):(e=new n(t,(i.dimension+1)%o.length,i),void(t[r=o[i.dimension]]<i.obj[r]?i.left=e:i.right=e))},this.remove=function(t){var e=function e(n){if(null===n)return null;if(n.obj===t)return n;var r=o[n.dimension];return e(t[r]<n.obj[r]?n.left:n.right)}(a.root);null===e||function t(e){function n(t,e){var r,i,a,s,u;return null===t?null:(r=o[e],t.dimension===e?null===t.left?t:n(t.left,e):(i=t.obj[r],a=n(t.left,e),s=n(t.right,e),u=t,null!==a&&a.obj[r]<i&&(u=a),null!==s&&s.obj[r]<u.obj[r]&&(u=s),u))}var r,i,s;return null===e.left&&null===e.right?null===e.parent?void(a.root=null):void(e.obj[s=o[e.parent.dimension]]<e.parent.obj[s]?e.parent.left=null:e.parent.right=null):void(null===e.right?(r=n(e.left,e.dimension),i=r.obj,t(r),e.right=e.left,e.left=null,e.obj=i):(r=n(e.right,e.dimension),i=r.obj,t(r),e.obj=i))}(e)},this.nearest=function(t,n,r){var s,c,l;if(l=new i(function(t){return-t[1]}),r)for(s=0;s<n;s+=1)l.push([null,r]);for(a.root&&function r(i){function a(t,e){l.push([t,e]),l.size()>n&&l.pop()}var s,c,h,f,d=o[i.dimension],p=e(t,i.obj),m={};for(f=0;f<o.length;f+=1)m[o[f]]=f===i.dimension?t[o[f]]:i.obj[o[f]];return c=e(m,i.obj),null===i.right&&null===i.left?void((l.size()<n||p<l.peek()[1])&&a(i,p)):(r(s=null===i.right?i.left:null===i.left?i.right:t[d]<i.obj[d]?i.left:i.right),(l.size()<n||p<l.peek()[1])&&a(i,p),void((l.size()<n||u(c)<l.peek()[1])&&(h=s===i.left?i.right:i.left,null!==h&&r(h))))}(a.root),c=[],s=0;s<v(n,l.content.length);s+=1)l.content[s][0]&&c.push([l.content[s][0].obj,l.content[s][1]]);return c},this.balanceFactor=function(){return function t(e){return null===e?0:M(t(e.left),t(e.right))+1}(a.root)/(r(function t(e){return null===e?0:t(e.left)+t(e.right)+1}(a.root))/.6931471805599453)}},e.BinaryHeap=i},function(t,e,n){"use strict";t.exports=e=n(87).NaiveBayes,e.separateClasses=n(87).separateClasses},function(t,e,n){"use strict";t.exports=n(10).Matrix,t.exports.Decompositions=t.exports.DC=n(285)},function(){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},function(t,e,n){"use strict";var r=n(20);t.exports=class extends r{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,n){"use strict";var r=n(20);t.exports=class extends r{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,n){"use strict";var r=n(20),i=n(29);t.exports=class extends r{constructor(t,e,n,r,o){i.checkRange(t,e,n,r,o),super(t,n-e+1,o-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,n){"use strict";var r=n(20),i=n(29);t.exports=class extends r{constructor(t,e,n){var r=i.checkIndices(t,e,n);super(t,r.row.length,r.column.length),this.rowIndices=r.row,this.columnIndices=r.column}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,n){"use strict";var r=n(20);t.exports=class extends r{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,n){"use strict";var r=n(20);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,n){"use strict";var r=n(20);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,n){"use strict";function r(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=n(10).Matrix,a=n(90),s=n(286),u=n(89),c=n(287),l=n(288);o.inverse=o.inv=r,o.prototype.inverse=o.prototype.inv=function(){return r(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:a,SVD:a,EigenvalueDecomposition:s,EVD:s,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:r,solve:i}},function(t,e,n){"use strict";function r(t,e){if(e=Object.assign({},p,e),!(this instanceof r))return new r(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");var n,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(n=0;n<c;n++)for(u=0;u<c;u++)h[n][u]=g.get(n,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(n=0;n<c;n++)v[n][u]=g.get(n,u);a(c,v,y,h),s(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,n,r){var i,o,a,s,c,l,h,f;for(c=0;c<t;c++)n[c]=r[t-1][c];for(s=t-1;0<s;s--){for(f=0,a=0,l=0;l<s;l++)f+=u(n[l]);if(0===f)for(e[s]=n[s-1],c=0;c<s;c++)n[c]=r[s-1][c],r[s][c]=0,r[c][s]=0;else{for(l=0;l<s;l++)n[l]/=f,a+=n[l]*n[l];for(i=n[s-1],o=R(a),0<i&&(o=-o),e[s]=f*o,a-=i*o,n[s-1]=i-o,c=0;c<s;c++)e[c]=0;for(c=0;c<s;c++){for(r[c][s]=i=n[c],o=e[c]+r[c][c]*i,l=c+1;l<=s-1;l++)o+=r[l][c]*n[l],e[l]+=r[l][c]*i;e[c]=o}for(i=0,c=0;c<s;c++)e[c]/=a,i+=e[c]*n[c];for(h=i/(a+a),c=0;c<s;c++)e[c]-=h*n[c];for(c=0;c<s;c++){for(i=n[c],o=e[c],l=c;l<=s-1;l++)r[l][c]-=i*e[l]+o*n[l];n[c]=r[s-1][c],r[s][c]=0}}n[s]=a}for(s=0;s<t-1;s++){if(r[t-1][s]=r[s][s],r[s][s]=1,0!==(a=n[s+1])){for(l=0;l<=s;l++)n[l]=r[l][s+1]/a;for(c=0;c<=s;c++){for(o=0,l=0;l<=s;l++)o+=r[l][s+1]*r[l][c];for(l=0;l<=s;l++)r[l][c]-=o*n[l]}}for(l=0;l<=s;l++)r[l][s+1]=0}for(c=0;c<t;c++)n[c]=r[t-1][c],r[t-1][c]=0;r[t-1][t-1]=1,e[0]=0}function o(t,e,n,r){var i,o,a,s,c,l,h,d,p,m,g,v,y,w,x,b;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(n[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(n[l+1]-(i=n[l]))/(2*e[l]),1),0>d&&(p=-p),n[l]=e[l]/(d+p),n[l+1]=e[l]*(d+p),m=n[l+1],o=i-n[l],a=l+2;a<t;a++)n[a]-=o;for(_+=o,d=n[h],v=g=1,y=g,w=e[l+1],x=0,b=0,a=h-1;a>=l;a--)for(y=v,v=g,b=x,i=g*e[a],o=g*d,p=f(d,e[a]),e[a+1]=x*p,d=(g=d/p)*n[a]-(x=e[a]/p)*i,n[a+1]=o+x*(g*i+x*n[a]),c=0;c<t;c++)r[c][a+1]=x*r[c][a]+g*(o=r[c][a+1]),r[c][a]=g*r[c][a]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),n[l]=g*d}while(u(e[l])>E*S);n[l]+=_,e[l]=0}for(a=0;a<t-1;a++){for(c=a,d=n[a],s=a+1;s<t;s++)n[s]<d&&(c=s,d=n[s]);if(c!==a)for(n[c]=n[a],n[a]=d,s=0;s<t;s++)d=r[s][a],r[s][a]=r[s][c],r[s][c]=d}}function a(t,e,n,r){var i,o,a,s,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,s=l;s<=f;s++)h+=u(e[s][l-1]);if(0!==h){for(a=0,s=f;s>=l;s--)n[s]=e[s][l-1]/h,a+=n[s]*n[s];for(o=R(a),0<n[l]&&(o=-o),a-=n[l]*o,n[l]-=o,c=l;c<t;c++){for(i=0,s=f;s>=l;s--)i+=n[s]*e[s][c];for(i/=a,s=l;s<=f;s++)e[s][c]-=i*n[s]}for(s=0;s<=f;s++){for(i=0,c=f;c>=l;c--)i+=n[c]*e[s][c];for(i/=a,c=l;c<=f;c++)e[s][c]-=i*n[c]}n[l]=h*n[l],e[l][l-1]=h*o}}for(s=0;s<t;s++)for(c=0;c<t;c++)r[s][c]=s===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(s=l+1;s<=f;s++)n[s]=e[s][l-1];for(c=l;c<=f;c++){for(o=0,s=l;s<=f;s++)o+=n[s]*r[s][c];for(o=o/n[l]/e[l][l-1],s=l;s<=f;s++)r[s][c]+=o*n[s]}}}function s(t,e,n,r,i){var o,a,s,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,C=0,k=0,O=0,P=0,D=0,L=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(n[o]=i[o][o],e[o]=0),a=M(o-1,0);a<t;a++)C+=u(i[o][a]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=C),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,n[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(L=R(u(O=(k=(i[S-1][S-1]-i[S][S])/2)*k+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=O){for(n[S-1]=p+(L=0<=k?k+L:k-L),n[S]=n[S-1],0!==L&&(n[S]=p-d/L),e[S-1]=0,e[S]=0,k=(p=i[S][S-1])/(D=u(p)+u(L)),k/=P=R(k*k+(O=L/D)*O),O/=P,a=S-1;a<t;a++)i[S-1][a]=O*(L=i[S-1][a])+k*i[S][a],i[S][a]=O*i[S][a]-k*L;for(o=0;o<=S;o++)i[o][S-1]=O*(L=i[o][S-1])+k*i[o][S],i[o][S]=O*i[o][S]-k*L;for(o=0;o<=E;o++)r[o][S-1]=O*(L=r[o][S-1])+k*r[o][S],r[o][S]=O*r[o][S]-k*L}else n[S-1]=p+k,n[S]=p+k,e[S-1]=L,e[S]=-L;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(k=((P=p-(L=i[h][h]))*(D=m-L)-d)/i[h+1][h]+i[h][h+1],O=i[h+1][h+1]-L-P-D,P=i[h+2][h+1],k/=D=u(k)+u(O)+u(P),O/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(O)+u(P))<T*(u(k)*(u(i[h-1][h-1])+u(L)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(s=h;s<=S-1&&(b=s!==S-1,s!==h&&(k=i[s][s-1],O=i[s+1][s-1],P=b?i[s+2][s-1]:0,0!==(p=u(k)+u(O)+u(P))&&(k/=p,O/=p,P/=p)),0!==p);s++)if(D=R(k*k+O*O+P*P),0>k&&(D=-D),0!==D){for(s===h?l!==h&&(i[s][s-1]=-i[s][s-1]):i[s][s-1]=-D*p,p=(k+=D)/D,m=O/D,L=P/D,O/=k,P/=k,a=s;a<t;a++)k=i[s][a]+O*i[s+1][a],b&&(i[s+2][a]=i[s+2][a]-(k+=P*i[s+2][a])*L),i[s][a]-=k*p,i[s+1][a]=i[s+1][a]-k*m;for(o=0;o<=v(S,s+3);o++)k=p*i[o][s]+m*i[o][s+1],b&&(i[o][s+2]=i[o][s+2]-(k+=L*i[o][s+2])*P),i[o][s]-=k,i[o][s+1]=i[o][s+1]-k*O;for(o=0;o<=E;o++)k=p*r[o][s]+m*r[o][s+1],b&&(r[o][s+2]=r[o][s+2]-(k+=L*r[o][s+2])*P),r[o][s]-=k,r[o][s+1]=r[o][s+1]-k*O}}}if(0!==C){for(S=t-1;0<=S;S--)if(k=n[S],0===(O=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-k,P=0,a=l;a<=S;a++)P+=i[o][a]*i[a][S];if(0>e[o])L=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*C):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-L*P)/(O=(n[o]-k)*(n[o]-k)+e[o]*e[o]),i[o+1][S]=u(p)>u(L)?(-P-d*f)/p:(-D-m*f)/L),1<T*(f=u(i[o][S]))*f)for(a=o;a<=S;a++)i[a][S]/=f}else if(0>O)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=O/i[S][S-1],i[S-1][S]=-(i[S][S]-k)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-k,O),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,a=l;a<=S;a++)g+=i[o][a]*i[a][S-1],y+=i[o][a]*i[a][S];if(d=i[o][o]-k,0>e[o])L=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,O),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(n[o]-k)*O,0==(w=(n[o]-k)*(n[o]-k)+e[o]*e[o]-O*O)&&0===x&&(w=T*C*(u(d)+u(O)+u(p)+u(m)+u(L))),_=c(p*P-L*g+O*y,p*D-L*y-O*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(L)+u(O)?(i[o+1][S-1]=(-g-d*i[o][S-1]+O*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-O*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],L,O),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(a=o;a<=S;a++)i[a][S-1]=i[a][S-1]/f,i[a][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(a=o;a<t;a++)r[o][a]=i[o][a];for(a=t-1;a>=0;a--)for(o=0;o<=E;o++){for(L=0,s=0;s<=v(a,E);s++)L+=r[o][s]*i[s][a];r[o][a]=L}}}function c(t,e,n,r){var i,o;return u(n)>u(r)?[(t+(i=r/n)*e)/(o=n+i*r),(e-i*t)/o]:[((i=n/r)*t+e)/(o=r+i*n),(i*e-t)/o]}var l=n(10).Matrix,h=n(44),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};r.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,n=this.n,r=this.e,i=this.d,o=new l(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)o[t][e]=0;o[t][t]=i[t],0<r[t]?o[t][t+1]=r[t]:0>r[t]&&(o[t][t-1]=r[t])}return o}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,a,s,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(a=0;a<l;a++){var f=0;for(e=a;e<c;e++)f=o(f,u[e][a]);if(0!==f){for(0>u[a][a]&&(f=-f),e=a;e<c;e++)u[e][a]/=f;for(u[a][a]+=1,n=a+1;n<l;n++){for(s=0,e=a;e<c;e++)s+=u[e][a]*u[e][n];for(s=-s/u[a][a],e=a;e<c;e++)u[e][n]+=s*u[e][a]}}h[a]=-f}this.QR=u,this.Rdiag=h}var i=n(10).Matrix,o=n(44).hypotenuse;r.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r,o,a,s,u=t.columns,c=t.clone(),l=e.columns;for(a=0;a<l;a++)for(o=0;o<u;o++){for(s=0,r=a;r<n;r++)s+=e[r][a]*c[r][o];for(s=-s/e[a][a],r=a;r<n;r++)c[r][o]+=s*e[r][a]}for(a=l-1;0<=a;a--){for(o=0;o<u;o++)c[a][o]/=this.Rdiag[a];for(r=0;r<a;r++)for(o=0;o<u;o++)c[r][o]-=c[a][o]*e[r][a]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,n=this.QR,r=n.columns,o=new i(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)o[t][e]=t<e?n[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,n,r,o=this.QR,a=o.rows,s=o.columns,u=new i(a,s);for(n=s-1;0<=n;n--){for(t=0;t<a;t++)u[t][n]=0;for(u[n][n]=1,e=n;e<s;e++)if(0!==o[n][n]){for(r=0,t=n;t<a;t++)r+=o[t][n]*u[t][e];for(r=-r/o[n][n],t=n;t<a;t++)u[t][e]+=r*o[t][n]}}return u}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var e,n,o,a=t,s=a.rows,u=new i(s,s),c=!0;for(n=0;n<s;n++){var l=u[n],h=0;for(o=0;o<n;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(a[n][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=a[n][n]-h),u[n][n]=R(M(h,0)),o=n+1;o<s;o++)u[n][o]=0}if(!c)throw new Error("Matrix is not positive definite");this.L=u}var i=n(10).Matrix;r.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");var r,o,a,s=t.columns,u=t.clone();for(a=0;a<n;a++)for(o=0;o<s;o++){for(r=0;r<a;r++)u[a][o]-=u[r][o]*e[a][r];u[a][o]/=e[a][a]}for(a=n-1;0<=a;a--)for(o=0;o<s;o++){for(r=a+1;r<n;r++)u[a][o]-=u[r][o]*e[r][a];u[a][o]/=e[a][a]}return u}},t.exports=r},function(t,e,n){"use strict";t.exports=e=n(290),e.Utils=n(47),e.OPLS=n(303)},function(t,e,n){"use strict";function r(t,e){for(var n=0,r=0;r<t.rows;r++)n+=t[r][e];return n}function i(t){for(var e,n=0,i=-1/0,o=0;o<t.columns;++o)(e=r(t,o))>i&&(i=e,n=o);return n}var o=n(45),a=n(47);class s{constructor(t,e){if(!0===t){var n=e;this.meanX=n.meanX,this.stdDevX=n.stdDevX,this.meanY=n.meanY,this.stdDevY=n.stdDevY,this.PBQ=o.checkMatrix(n.PBQ),this.R2X=n.R2X}else{if(t.length!==e.length)throw new RangeError("The number of X rows must be equal to the number of Y rows");var r=a.featureNormalize(t);this.X=r.result,this.meanX=r.means,this.stdDevX=r.std;var i=a.featureNormalize(e);this.Y=i.result,this.meanY=i.means,this.stdDevY=i.std}}train(t){void 0===t&&(t={});var e=t.latentVectors;void 0===e&&(e=v(this.X.length-1,this.X[0].length));var n=t.tolerance;void 0===n&&(n=1e-5);for(var r=this.X,s=this.Y,u=r.rows,c=r.columns,l=s.rows,h=s.columns,f=r.clone().mul(r).sum(),d=s.clone().mul(s).sum(),p=e,m=o.zeros(u,p),g=o.zeros(c,p),y=o.zeros(l,p),w=o.zeros(h,p),x=o.zeros(p,p),b=g.clone(),_=0;a.norm(s)>n&&_<p;){for(var M=r.transpose(),S=s.transpose(),E=i(r.clone().mulM(r)),T=i(s.clone().mulM(s)),A=r.getColumnVector(E),C=s.getColumnVector(T),k=o.zeros(u,1);a.norm(A.clone().sub(k))>n;){var R=M.mmul(C);R.div(a.norm(R)),k=A,A=r.mmul(R);var O=S.mmul(A);O.div(a.norm(O)),C=s.mmul(O)}var P=M.mmul(k=A),D=k.transpose().mmul(k)[0][0],L=P.div(D),N=a.norm(L);L.div(N),k.mul(N),R.mul(N),P=C.transpose().mmul(k),D=k.transpose().mmul(k)[0][0];var I=P.div(D)[0][0];r.sub(k.mmul(L.transpose())),s.sub(k.clone().mul(I).mmul(O.transpose())),m.setColumn(_,k),g.setColumn(_,L),y.setColumn(_,C),w.setColumn(_,O),b.setColumn(_,R),x[_][_]=I,_++}m=m.subMatrix(0,m.rows-1,0,--_),g=g.subMatrix(0,g.rows-1,0,_),y=y.subMatrix(0,y.rows-1,0,_),w=w.subMatrix(0,w.rows-1,0,_),b=b.subMatrix(0,b.rows-1,0,_),x=x.subMatrix(0,_,0,_),this.ssqYcal=d,this.E=r,this.F=s,this.T=m,this.P=g,this.U=y,this.Q=w,this.W=b,this.B=x,this.PBQ=g.mmul(x).mmul(w.transpose()),this.R2X=k.transpose().mmul(k).mmul(L.transpose().mmul(L)).div(f)[0][0]}predict(t){var e=o.checkMatrix(t);return(e=e.subRowVector(this.meanX).divRowVector(this.stdDevX)).mmul(this.PBQ).mulRowVector(this.stdDevY).addRowVector(this.meanY)}getExplainedVariance(){return this.R2X}toJSON(){return{name:"PLS",R2X:this.R2X,meanX:this.meanX,stdDevX:this.stdDevX,meanY:this.meanY,stdDevY:this.stdDevY,PBQ:this.PBQ}}static load(t){if("PLS"!==t.name)throw new RangeError("Invalid model: "+t.name);return new s(!0,t)}}t.exports=s},function(){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},function(t,e,n){"use strict";var r=n(21);t.exports=class extends r{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,n){"use strict";var r=n(21);t.exports=class extends r{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,n){"use strict";var r=n(21),i=n(30);t.exports=class extends r{constructor(t,e,n,r,o){i.checkRange(t,e,n,r,o),super(t,n-e+1,o-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,n){"use strict";var r=n(21),i=n(30);t.exports=class extends r{constructor(t,e,n){var r=i.checkIndices(t,e,n);super(t,r.row.length,r.column.length),this.rowIndices=r.row,this.columnIndices=r.column}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,n){"use strict";var r=n(21);t.exports=class extends r{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,n){"use strict";var r=n(21);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,n){"use strict";var r=n(21);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,n){"use strict";function r(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=n(11).Matrix,a=n(93),s=n(300),u=n(92),c=n(301),l=n(302);o.inverse=o.inv=r,o.prototype.inverse=o.prototype.inv=function(){return r(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:a,SVD:a,EigenvalueDecomposition:s,EVD:s,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:r,solve:i}},function(t,e,n){"use strict";function r(t,e){if(e=Object.assign({},p,e),!(this instanceof r))return new r(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");var n,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(n=0;n<c;n++)for(u=0;u<c;u++)h[n][u]=g.get(n,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(n=0;n<c;n++)v[n][u]=g.get(n,u);a(c,v,y,h),s(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,n,r){var i,o,a,s,c,l,h,f;for(c=0;c<t;c++)n[c]=r[t-1][c];for(s=t-1;0<s;s--){for(f=0,a=0,l=0;l<s;l++)f+=u(n[l]);if(0===f)for(e[s]=n[s-1],c=0;c<s;c++)n[c]=r[s-1][c],r[s][c]=0,r[c][s]=0;else{for(l=0;l<s;l++)n[l]/=f,a+=n[l]*n[l];for(i=n[s-1],o=R(a),0<i&&(o=-o),e[s]=f*o,a-=i*o,n[s-1]=i-o,c=0;c<s;c++)e[c]=0;for(c=0;c<s;c++){for(r[c][s]=i=n[c],o=e[c]+r[c][c]*i,l=c+1;l<=s-1;l++)o+=r[l][c]*n[l],e[l]+=r[l][c]*i;e[c]=o}for(i=0,c=0;c<s;c++)e[c]/=a,i+=e[c]*n[c];for(h=i/(a+a),c=0;c<s;c++)e[c]-=h*n[c];for(c=0;c<s;c++){for(i=n[c],o=e[c],l=c;l<=s-1;l++)r[l][c]-=i*e[l]+o*n[l];n[c]=r[s-1][c],r[s][c]=0}}n[s]=a}for(s=0;s<t-1;s++){if(r[t-1][s]=r[s][s],r[s][s]=1,0!==(a=n[s+1])){for(l=0;l<=s;l++)n[l]=r[l][s+1]/a;for(c=0;c<=s;c++){for(o=0,l=0;l<=s;l++)o+=r[l][s+1]*r[l][c];for(l=0;l<=s;l++)r[l][c]-=o*n[l]}}for(l=0;l<=s;l++)r[l][s+1]=0}for(c=0;c<t;c++)n[c]=r[t-1][c],r[t-1][c]=0;r[t-1][t-1]=1,e[0]=0}function o(t,e,n,r){var i,o,a,s,c,l,h,d,p,m,g,v,y,w,x,b;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(n[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(n[l+1]-(i=n[l]))/(2*e[l]),1),0>d&&(p=-p),n[l]=e[l]/(d+p),n[l+1]=e[l]*(d+p),m=n[l+1],o=i-n[l],a=l+2;a<t;a++)n[a]-=o;for(_+=o,d=n[h],v=g=1,y=g,w=e[l+1],x=0,b=0,a=h-1;a>=l;a--)for(y=v,v=g,b=x,i=g*e[a],o=g*d,p=f(d,e[a]),e[a+1]=x*p,d=(g=d/p)*n[a]-(x=e[a]/p)*i,n[a+1]=o+x*(g*i+x*n[a]),c=0;c<t;c++)r[c][a+1]=x*r[c][a]+g*(o=r[c][a+1]),r[c][a]=g*r[c][a]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),n[l]=g*d}while(u(e[l])>E*S);n[l]+=_,e[l]=0}for(a=0;a<t-1;a++){for(c=a,d=n[a],s=a+1;s<t;s++)n[s]<d&&(c=s,d=n[s]);if(c!==a)for(n[c]=n[a],n[a]=d,s=0;s<t;s++)d=r[s][a],r[s][a]=r[s][c],r[s][c]=d}}function a(t,e,n,r){var i,o,a,s,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,s=l;s<=f;s++)h+=u(e[s][l-1]);if(0!==h){for(a=0,s=f;s>=l;s--)n[s]=e[s][l-1]/h,a+=n[s]*n[s];for(o=R(a),0<n[l]&&(o=-o),a-=n[l]*o,n[l]-=o,c=l;c<t;c++){for(i=0,s=f;s>=l;s--)i+=n[s]*e[s][c];for(i/=a,s=l;s<=f;s++)e[s][c]-=i*n[s]}for(s=0;s<=f;s++){for(i=0,c=f;c>=l;c--)i+=n[c]*e[s][c];for(i/=a,c=l;c<=f;c++)e[s][c]-=i*n[c]}n[l]=h*n[l],e[l][l-1]=h*o}}for(s=0;s<t;s++)for(c=0;c<t;c++)r[s][c]=s===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(s=l+1;s<=f;s++)n[s]=e[s][l-1];for(c=l;c<=f;c++){for(o=0,s=l;s<=f;s++)o+=n[s]*r[s][c];for(o=o/n[l]/e[l][l-1],s=l;s<=f;s++)r[s][c]+=o*n[s]}}}function s(t,e,n,r,i){var o,a,s,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,C=0,k=0,O=0,P=0,D=0,L=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(n[o]=i[o][o],e[o]=0),a=M(o-1,0);a<t;a++)C+=u(i[o][a]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=C),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,n[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(L=R(u(O=(k=(i[S-1][S-1]-i[S][S])/2)*k+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=O){for(n[S-1]=p+(L=0<=k?k+L:k-L),n[S]=n[S-1],0!==L&&(n[S]=p-d/L),e[S-1]=0,e[S]=0,k=(p=i[S][S-1])/(D=u(p)+u(L)),k/=P=R(k*k+(O=L/D)*O),O/=P,a=S-1;a<t;a++)i[S-1][a]=O*(L=i[S-1][a])+k*i[S][a],i[S][a]=O*i[S][a]-k*L;for(o=0;o<=S;o++)i[o][S-1]=O*(L=i[o][S-1])+k*i[o][S],i[o][S]=O*i[o][S]-k*L;for(o=0;o<=E;o++)r[o][S-1]=O*(L=r[o][S-1])+k*r[o][S],r[o][S]=O*r[o][S]-k*L}else n[S-1]=p+k,n[S]=p+k,e[S-1]=L,e[S]=-L;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(k=((P=p-(L=i[h][h]))*(D=m-L)-d)/i[h+1][h]+i[h][h+1],O=i[h+1][h+1]-L-P-D,P=i[h+2][h+1],k/=D=u(k)+u(O)+u(P),O/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(O)+u(P))<T*(u(k)*(u(i[h-1][h-1])+u(L)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(s=h;s<=S-1&&(b=s!==S-1,s!==h&&(k=i[s][s-1],O=i[s+1][s-1],P=b?i[s+2][s-1]:0,0!==(p=u(k)+u(O)+u(P))&&(k/=p,O/=p,P/=p)),0!==p);s++)if(D=R(k*k+O*O+P*P),0>k&&(D=-D),0!==D){for(s===h?l!==h&&(i[s][s-1]=-i[s][s-1]):i[s][s-1]=-D*p,p=(k+=D)/D,m=O/D,L=P/D,O/=k,P/=k,a=s;a<t;a++)k=i[s][a]+O*i[s+1][a],b&&(i[s+2][a]=i[s+2][a]-(k+=P*i[s+2][a])*L),i[s][a]-=k*p,i[s+1][a]=i[s+1][a]-k*m;for(o=0;o<=v(S,s+3);o++)k=p*i[o][s]+m*i[o][s+1],b&&(i[o][s+2]=i[o][s+2]-(k+=L*i[o][s+2])*P),i[o][s]-=k,i[o][s+1]=i[o][s+1]-k*O;for(o=0;o<=E;o++)k=p*r[o][s]+m*r[o][s+1],b&&(r[o][s+2]=r[o][s+2]-(k+=L*r[o][s+2])*P),r[o][s]-=k,r[o][s+1]=r[o][s+1]-k*O}}}if(0!==C){for(S=t-1;0<=S;S--)if(k=n[S],0===(O=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-k,P=0,a=l;a<=S;a++)P+=i[o][a]*i[a][S];if(0>e[o])L=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*C):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-L*P)/(O=(n[o]-k)*(n[o]-k)+e[o]*e[o]),i[o+1][S]=u(p)>u(L)?(-P-d*f)/p:(-D-m*f)/L),1<T*(f=u(i[o][S]))*f)for(a=o;a<=S;a++)i[a][S]/=f}else if(0>O)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=O/i[S][S-1],i[S-1][S]=-(i[S][S]-k)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-k,O),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,a=l;a<=S;a++)g+=i[o][a]*i[a][S-1],y+=i[o][a]*i[a][S];if(d=i[o][o]-k,0>e[o])L=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,O),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(n[o]-k)*O,0==(w=(n[o]-k)*(n[o]-k)+e[o]*e[o]-O*O)&&0===x&&(w=T*C*(u(d)+u(O)+u(p)+u(m)+u(L))),_=c(p*P-L*g+O*y,p*D-L*y-O*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(L)+u(O)?(i[o+1][S-1]=(-g-d*i[o][S-1]+O*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-O*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],L,O),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(a=o;a<=S;a++)i[a][S-1]=i[a][S-1]/f,i[a][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(a=o;a<t;a++)r[o][a]=i[o][a];for(a=t-1;a>=0;a--)for(o=0;o<=E;o++){for(L=0,s=0;s<=v(a,E);s++)L+=r[o][s]*i[s][a];r[o][a]=L}}}function c(t,e,n,r){var i,o;return u(n)>u(r)?[(t+(i=r/n)*e)/(o=n+i*r),(e-i*t)/o]:[((i=n/r)*t+e)/(o=r+i*n),(i*e-t)/o]}var l=n(11).Matrix,h=n(46),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};r.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,n=this.n,r=this.e,i=this.d,o=new l(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)o[t][e]=0;o[t][t]=i[t],0<r[t]?o[t][t+1]=r[t]:0>r[t]&&(o[t][t-1]=r[t])}return o}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,a,s,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(a=0;a<l;a++){var f=0;for(e=a;e<c;e++)f=o(f,u[e][a]);if(0!==f){for(0>u[a][a]&&(f=-f),e=a;e<c;e++)u[e][a]/=f;for(u[a][a]+=1,n=a+1;n<l;n++){for(s=0,e=a;e<c;e++)s+=u[e][a]*u[e][n];for(s=-s/u[a][a],e=a;e<c;e++)u[e][n]+=s*u[e][a]}}h[a]=-f}this.QR=u,this.Rdiag=h}var i=n(11).Matrix,o=n(46).hypotenuse;r.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r,o,a,s,u=t.columns,c=t.clone(),l=e.columns;for(a=0;a<l;a++)for(o=0;o<u;o++){for(s=0,r=a;r<n;r++)s+=e[r][a]*c[r][o];for(s=-s/e[a][a],r=a;r<n;r++)c[r][o]+=s*e[r][a]}for(a=l-1;0<=a;a--){for(o=0;o<u;o++)c[a][o]/=this.Rdiag[a];for(r=0;r<a;r++)for(o=0;o<u;o++)c[r][o]-=c[a][o]*e[r][a]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,n=this.QR,r=n.columns,o=new i(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)o[t][e]=t<e?n[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,n,r,o=this.QR,a=o.rows,s=o.columns,u=new i(a,s);for(n=s-1;0<=n;n--){for(t=0;t<a;t++)u[t][n]=0;for(u[n][n]=1,e=n;e<s;e++)if(0!==o[n][n]){for(r=0,t=n;t<a;t++)r+=o[t][n]*u[t][e];for(r=-r/o[n][n],t=n;t<a;t++)u[t][e]+=r*o[t][n]}}return u}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var e,n,o,a=t,s=a.rows,u=new i(s,s),c=!0;for(n=0;n<s;n++){var l=u[n],h=0;for(o=0;o<n;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(a[n][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=a[n][n]-h),u[n][n]=R(M(h,0)),o=n+1;o<s;o++)u[n][o]=0}if(!c)throw new Error("Matrix is not positive definite");this.L=u}var i=n(11).Matrix;r.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");var r,o,a,s=t.columns,u=t.clone();for(a=0;a<n;a++)for(o=0;o<s;o++){for(r=0;r<a;r++)u[a][o]-=u[r][o]*e[a][r];u[a][o]/=e[a][a]}for(a=n-1;0<=a;a--)for(o=0;o<s;o++){for(r=a+1;r<n;r++)u[a][o]-=u[r][o]*e[r][a];u[a][o]/=e[a][a]}return u}},t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r=new i(t),a=new i(e);r=o.featureNormalize(r).result,a=o.featureNormalize(a).result;var s=r.clone().mul(r).sum(),u=r.transpose().mmul(a);u.div(o.norm(u));for(var c=Array(n),l=Array(n),h=Array(n),f=0;f<n;f++){var d=r.mmul(u),p=r.transpose().mmul(d),m=d.transpose().mmul(d)[0][0],g=p.div(m);p=u.transpose().mmul(g)[0][0],m=u.transpose().mmul(u)[0][0];var v=g.sub(u.clone().mul(p/m));v.div(o.norm(v));var y=r.mmul(v);p=r.transpose().mmul(y),m=y.transpose().mmul(y)[0][0];var w=p.div(m);r.sub(y.mmul(w.transpose())),c[f]=v.getColumn(0),l[f]=y.getColumn(0),h[f]=w.getColumn(0)}this.Xosc=r;var x=this.Xosc.clone().mul(this.Xosc).sum();this.R2X=1-x/s,this.W=c,this.T=l,this.P=h,this.numberOSC=n}var i=n(45),o=n(47);t.exports=r,r.prototype.correctDataset=function(t){for(var e=new i(t),n=e.clone().mul(e).sum(),r=0;r<this.numberOSC;r++){var o=this.W.getColumnVector(r),a=this.P.getColumnVector(r),s=e.mmul(o);e.sub(s.mmul(a))}return{datasetOsc:e,R2Dataset:1-e.clone().mul(e).sum()/n}}},function(t,n,r){"use strict";function i(t,e,n,r,i,a){n=o.updateClusterID(e,t,n,i.distanceFunction);var u=o.updateCenters(e,n,r),c=o.converged(u,t,i.distanceFunction,i.tolerance);return new s(n,u,c,a,i.distanceFunction)}var o=r(94),a=r(306),s=r(308),u={maxIterations:100,tolerance:1e-6,withIterations:!1,initialization:"mostDistant",distanceFunction:r(0).squared};t.exports=function(t,n,r){if(r=Object.assign({},u,r),0>=n||n>t.length||!m(n))throw new Error("K should be a positive integer bigger than the number of points");var s;if(Array.isArray(r.initialization)){if(r.initialization.length!==n)throw new Error("The initial centers should have the same length as K");s=r.initialization}else switch(r.initialization){case"random":s=a.random(t,n);break;case"mostDistant":s=a.mostDistant(t,n,o.calculateDistanceMatrix(t,r.distanceFunction));break;default:throw new Error('Unknown initialization method: "'+r.initialization+'"')}0===r.maxIterations&&(r.maxIterations=e);var c=Array(t.length);if(r.withIterations)return function*(t,e,n,r,o){for(var a,s=!1,u=0;!s&&u<o.maxIterations;)yield(a=i(t,e,n,r,o,++u)).computeInformation(e),s=a.converged,t=a.centroids}(s,t,c,n,r);for(var l,h=!1,f=0;!h&&f<r.maxIterations;)h=(l=i(s,t,c,n,r,++f)).converged,s=l.centroids;return l.computeInformation(t)}},function(n,r,i){"use strict";var o={distanceFunction:i(0).squared,similarityFunction:!1,returnVector:!1};n.exports=function(n,r,i){var a=(i=i||o).distanceFunction||o.distanceFunction,s=i.similarityFunction||o.similarityFunction,u=i.returnVector||o.returnVector,c=-1;if("function"==typeof s)for(var l,h=t,f=0;f<n.length;f++)(l=s(r,n[f]))>h&&(h=l,c=f);else{if("function"!=typeof a)throw new Error("A similarity or distance function it's required");for(var d,p=e,m=0;m<n.length;m++)(d=a(r,n[m]))<p&&(p=d,c=m)}return u?n[c]:c}},function(t,n,r){"use strict";var i=r(307).Picker;n.random=function(t,e){for(var n=new i(t),r=Array(e),o=0;o<e;++o)r[o]=n.pick();return r},n.mostDistant=function(t,n,r){var i=Array(n);if(i[0]=g(Math.random()*t.length),1<n){for(var o={dist:-1,index:-1},a=0;a<t.length;++a)r[i[0]][a]>o.dist&&(o.dist=r[i[0]][a],o.index=a);if(i[1]=o.index,2<n)for(var s,u=2;u<n;++u){s={dist:-1,index:-1};for(var c,l=0;l<t.length;++l){c={dist:e,index:-1};for(var h=0;h<u;++h)r[h][l]<c.dist&&-1===i.indexOf(l)&&(c={dist:r[h][l],index:l});c.dist!==e&&c.dist>s.dist&&(s=Object.assign({},c))}i[u]=s.index}}return i.map(e=>t[e])}},function(t){"use strict";(function(){var e;(e="undefined"!=typeof t&&t.exports?t.exports:this.RandomSelection={}).Picker=function(t){this._originalOptions=t,this._remainingOptions=[]},e.Picker.prototype={pick:function(){0===this._remainingOptions.length&&(this._remainingOptions=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}(this._originalOptions));var t=g(Math.random()*this._remainingOptions.length);return this._remainingOptions.splice(t,1)[0]}}}).call(void 0)},function(t,e,n){"use strict";function r(t,e,n,r,i){this.clusters=t,this.centroids=e,this.converged=n,this.iterations=r,this[o]=i}var i=n(94),o=Symbol("distance");r.prototype.nearest=function(t){var e=Array(t.length),n=this.centroids.map(function(t){return t.centroid});return i.updateClusterID(t,n,e,this[o])},r.prototype.computeInformation=function(t){for(var e=this.centroids.map(function(t){return{centroid:t,error:0,size:0}}),n=0;n<t.length;n++)e[this.clusters[n]].error+=this[o](t[n],this.centroids[this.clusters[n]]),e[this.clusters[n]].size++;for(var i=0;i<this.centroids.length;i++)e[i].error/=e[i].size;return new r(this.clusters,e,this.converged,this.iterations,this[o])},t.exports=r},function(t,e,n){"use strict";e.agnes=n(310),e.diana=n(318)},function(t,e,n){"use strict";function r(t,e,n){for(var r=1e101,i=0;i<t.length;i++)for(var o=0;o<e.length;o++)r=v(n[t[i]][e[o]],r);return r}function i(t,e,n){for(var r=-1,i=0;i<t.length;i++)for(var o=0;o<e.length;o++)r=M(n[t[i]][e[o]],r);return r}function o(t,e,n){for(var r=0,i=0;i<t.length;i++)for(var o=0;o<e.length;o++)r+=n[t[i]][e[o]];return r/(t.length*e.length)}function a(t,e,n){for(var r=Array(t.length*e.length),i=0;i<t.length;i++)for(var o=0;o<e.length;o++)r[i*e.length+o]=n[t[i]][e[o]];return function(t,e){void 0===e&&(e=!1),e||(t=[].concat(t).sort(u));var n=t.length,r=g(n/2);return 0==n%2?.5*(t[r-1]+t[r]):t[r]}(r)}function s(t,e,n){return a(t,e,n)*t.length*e.length/(t.length+e.length)}function u(t,e){return t-e}var c=n(0),l=n(95),h=n(48),f=n(68),d={disFunc:c,kind:"single",isDistanceMatrix:!1};t.exports=function(t,e){e=Object.assign({},d,e);var n=t.length,u=t;if(e.isDistanceMatrix||(u=f(t,e.disFunc)),"string"==typeof e.kind)switch(e.kind){case"single":e.kind=r;break;case"complete":e.kind=i;break;case"average":e.kind=o;break;case"centroid":e.kind=a;break;case"ward":e.kind=s;break;default:throw new RangeError("Unknown kind of similarity")}else if("function"!=typeof e.kind)throw new TypeError("Undefined kind of similarity");for(var c=Array(n),p=0;p<u.length;p++)c[p]=new l(p);for(var m=1e6,g={},y=0;1<c.length;){g={},m=1e6;for(var w=0;w<c.length;w++)for(var x=w+1;x<c.length;x++){var b,_;if(c[w]instanceof l)b=[c[w].index];else{b=Array(c[w].index.length);for(var M=0;M<b.length;M++)b[M]=c[w].index[M].index}if(c[x]instanceof l)_=[c[x].index];else{_=Array(c[x].index.length);for(var S=0;S<_.length;S++)_[S]=c[x].index[S].index}(y=e.kind(b,_,u).toFixed(4))in g?g[y].push([c[w],c[x]]):g[y]=[[c[w],c[x]]],m=v(y,m)}for(var E,T=g[m.toFixed(4)],A=Array(T.length),C=0;0<T.length;){E=T.shift();for(var k=0;k<T.length;k++)if(0<T[k].filter(function(t){return-1!==E.indexOf(t)}).length){var R=T[k].filter(function(t){return-1===E.indexOf(t)});E=E.concat(R),T.splice(k--,1)}A[C++]=E}A.length=C;for(var O,P=0;P<A.length;P++){(O=new h).children=A[P].concat(),O.distance=m,O.index=Array(n);for(var D=0,L=0;L<A[P].length;L++)A[P][L]instanceof l?O.index[D++]=A[P][L]:(D+=A[P][L].index.length,O.index=A[P][L].index.concat(O.index)),c.splice(c.indexOf(A[P][L]),1);O.index.length=D,c.push(O)}}return c[0]}},function(t,e,n){"use strict";t.exports=n(312)},function(t,e){"use strict";var n,r;(function(){var i,o,a,s,u,c,l,h,f,d,p,m,y,w,x;a=g,d=v,o=function(t,e){return t<e?-1:t>e?1:0},f=function(t,e,n,r,i){var s;if(null==n&&(n=0),null==i&&(i=o),0>n)throw new Error("lo must be non-negative");for(null==r&&(r=t.length);n<r;)0>i(e,t[s=a((n+r)/2)])?r=s:n=s+1;return[].splice.apply(t,[n,n-n].concat(e)),e},c=function(t,e,n){return null==n&&(n=o),t.push(e),w(t,0,t.length-1,n)},u=function(t,e){var n,r;return null==e&&(e=o),n=t.pop(),t.length?(r=t[0],t[0]=n,x(t,0,e)):r=n,r},h=function(t,e,n){var r;return null==n&&(n=o),r=t[0],t[0]=e,x(t,0,n),r},l=function(t,e,n){var r;return null==n&&(n=o),t.length&&0>n(t[0],e)&&(e=(r=[t[0],e])[0],t[0]=r[1],x(t,0,n)),e},s=function(t,e){var n,r,i,s,u;for(null==e&&(e=o),i=(function(){u=[];for(var e=0,n=a(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)u.push(e);return u}).apply(this).reverse(),s=[],n=0,r=i.length;n<r;n++)s.push(x(t,i[n],e));return s},y=function(t,e,n){var r;if(null==n&&(n=o),-1!==(r=t.indexOf(e)))return w(t,0,r,n),x(t,r,n)},p=function(t,e,n){var r,i,a,u;if(null==n&&(n=o),!(r=t.slice(0,e)).length)return r;for(s(r,n),i=0,a=(u=t.slice(e)).length;i<a;i++)l(r,u[i],n);return r.sort(n).reverse()},m=function(t,e,n){var r,i,a,c,l,h,p,m,g;if(null==n&&(n=o),10*e<=t.length){if(!(a=t.slice(0,e).sort(n)).length)return a;for(i=a[a.length-1],c=0,h=(p=t.slice(e)).length;c<h;c++)0>n(r=p[c],i)&&(f(a,r,0,null,n),a.pop(),i=a[a.length-1]);return a}for(s(t,n),g=[],l=0,m=d(e,t.length);0<=m?l<m:l>m;0<=m?++l:--l)g.push(u(t,n));return g},w=function(t,e,n,r){var i,a,s;for(null==r&&(r=o),i=t[n];n>e&&0>r(i,a=t[s=n-1>>1]);)t[n]=a,n=s;return t[n]=i},x=function(t,e,n){var r,i,a,s,u;for(null==n&&(n=o),i=t.length,u=e,a=t[e],r=2*e+1;r<i;)(s=r+1)<i&&!(0>n(t[r],t[s]))&&(r=s),t[e]=t[r],r=2*(e=r)+1;return t[e]=a,w(t,u,e,n)},i=function(){function t(t){this.cmp=null==t?o:t,this.nodes=[]}return t.push=c,t.pop=u,t.replace=h,t.pushpop=l,t.heapify=s,t.updateItem=y,t.nlargest=p,t.nsmallest=m,t.prototype.push=function(t){return c(this.nodes,t,this.cmp)},t.prototype.pop=function(){return u(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return h(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return l(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return s(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return y(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),function(i,o){void 0!==(r="function"==typeof(n=o)?n.apply(e,[]):n)&&(t.exports=r)}(0,function(){return i})}).call(void 0)},function(t,e,n){"use strict";(function(t,r){function i(t,n){var r={seen:[],stylize:a};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&e._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),s(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"\x1b["+i.colors[n][0]+"m"+t+"\x1b["+i.colors[n][1]+"m":t}function a(t){return t}function s(t,n,r){if(t.customInspect&&n&&b(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return m(i)||(i=s(t,i,r)),i}var o=u(t,n);if(o)return o;var a=Object.keys(n),f=function(t){var e={};return a.forEach(function(t){e[t]=!0}),e}();if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),x(n)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return c(n);if(0===a.length){if(b(n))return t.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(v(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(x(n))return c(n)}var d,p="",g=!1,y=["{","}"];return h(n)&&(g=!0,y=["[","]"]),b(n)&&(p=" [Function"+(n.name?": "+n.name:"")+"]"),v(n)&&(p=" "+RegExp.prototype.toString.call(n)),w(n)&&(p=" "+Date.prototype.toUTCString.call(n)),x(n)&&(p=" "+c(n)),0!==a.length||g&&0!=n.length?0>r?v(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),d=g?function(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)S(e,a+"")?o.push(l(t,e,n,r,a+"",!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,e,n,r,i,!0))}),o}(t,n,r,f,a):a.map(function(e){return l(t,n,r,f,e,g)}),t.seen.pop(),function(t,e,n){return 60<t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(d,p,y)):y[0]+p+y[1]}function u(t,e){if(g(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return p(e)?t.stylize(""+e,"number"):f(e)?t.stylize(""+e,"boolean"):d(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,n,r,i,o){var a,u,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?u=t.stylize(c.set?"[Getter/Setter]":"[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),S(r,i)||(a="["+i+"]"),u||(0>t.seen.indexOf(c.value)?-1<(u=d(n)?s(t,c.value,null):s(t,c.value,n-1)).indexOf("\n")&&(u=o?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n")):u=t.stylize("[Circular]","special")),g(a)){if(o&&i.match(/^\d+$/))return u;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+u}function h(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function d(t){return null===t}function p(t){return"number"==typeof t}function m(t){return"string"==typeof t}function g(t){return void 0===t}function v(t){return y(t)&&"[object RegExp]"===_(t)}function y(t){return"object"==typeof t&&null!==t}function w(t){return y(t)&&"[object Date]"===_(t)}function x(t){return y(t)&&("[object Error]"===_(t)||t instanceof Error)}function b(t){return"function"==typeof t}function _(t){return Object.prototype.toString.call(t)}function M(t){return 10>t?"0"+t.toString(10):t.toString(10)}function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var E=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=(t+"").replace(E,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return r[n++]+"";case"%d":return+r[n++];case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),s=r[n];n<o;s=r[++n])a+=d(s)||!y(s)?" "+s:" "+i(s);return a},e.deprecate=function(n,i){if(g(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var T,A={};e.debuglog=function(t){if(g(T)&&(T=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!A[t])if(new RegExp("\\b"+t+"\\b","i").test(T)){var n=r.pid;A[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else A[t]=function(){};return A[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=f,e.isNull=d,e.isNullOrUndefined=function(t){return null==t},e.isNumber=p,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=g,e.isRegExp=v,e.isObject=y,e.isDate=w,e.isError=x,e.isFunction=b,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t},e.isBuffer=n(316);var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",function(){var t=new Date,e=[M(t.getHours()),M(t.getMinutes()),M(t.getSeconds())].join(":");return[t.getDate(),C[t.getMonth()],e].join(" ")}(),e.format.apply(e,arguments))},e.inherits=n(317),e._extend=function(t,e){if(!e||!y(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,n(314),n(315))},function(t){"use strict";var e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t){"use strict";function e(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(u===setTimeout)return setTimeout(t,0);if((u===e||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function i(){d&&h&&(d=!1,h.length?f=h.concat(f):p=-1,f.length&&o())}function o(){if(!d){var t=r(i);d=!0;for(var e=f.length;e;){for(h=f,f=[];++p<e;)h&&h[p].run();p=-1,e=f.length}h=null,d=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(t)}}function a(t,e){this.fun=t,this.array=e}function s(){}var u,c,l=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:e}catch(t){u=e}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(t){c=n}}();var h,f=[],d=!1,p=-1;l.nextTick=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new a(t,e)),1!==f.length||d||r(o)},a.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=s,l.addListener=s,l.once=s,l.off=s,l.removeListener=s,l.removeAllListeners=s,l.emit=s,l.prependListener=s,l.prependOnceListener=s,l.listeners=function(){return[]},l.binding=function(){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t){"use strict";t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t){"use strict";t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";function r(t,e,n){for(var r=1e101,i=0;i<t.length;i++)for(var o,a=i;a<e.length;a++)o=n(t[i],e[a]),r=v(o,r);return r}function i(t,e,n){for(var r=-1,i=0;i<t.length;i++)for(var o,a=i;a<e.length;a++)o=n(t[i],e[a]),r=M(o,r);return r}function o(t,e,n){for(var r=0,i=0;i<t.length;i++)for(var o=0;o<e.length;o++)r+=n(t[i],e[o]);return r/(t.length*e.length)}function a(t,e,n){for(var r=0,i=0,o=0,a=0,s=0;s<t.length;s++)r+=t[s][0],i+=t[s][1];for(var u=0;u<e.length;u++)o+=e[u][0],a+=e[u][1];return n([r/=t.length,i/=t.length],[o/=e.length,a/=e.length])}function s(t,e,n){for(var r=0,i=0,o=0,a=0,s=0;s<t.length;s++)r+=t[s][0],i+=t[s][1];for(var u=0;u<e.length;u++)o+=e[u][0],a+=e[u][1];return n([r/=t.length,i/=t.length],[o/=e.length,a/=e.length])*t.length*e.length/(t.length+e.length)}function u(t,e,n){for(var r={d:0,p:0},i=Array(t[0].length),o=0;o<t[0].length;o++)i[o]=e[t[0][o]];for(var a=Array(t[1].length),s=0;s<t[1].length;s++)a[s]=e[t[1][s]];for(var u,c,l=0;l<i.length;l++){u=0;for(var h=0;h<i.length;h++)l!==h&&(u+=n(i[l],i[h]));u/=i.length-1,c=0;for(var f=0;f<a.length;f++)c+=n(i[l],a[f]);u-(c/=a.length)>r.d&&(r.d=u-c,r.p=l)}return r}function c(t,e,n){for(var r=0,i=0,o=0;o<t.length;o++)for(var a=o;a<t.length;a++)r+=n(e[t[o].index],e[t[a].index]),i++;return r/i}var l=n(0),h=n(95),f=n(48),d={dist:l,kind:"single"};t.exports=function(t,e){if("string"==typeof(e=Object.assign({},d,e)).kind)switch(e.kind){case"single":e.kind=r;break;case"complete":e.kind=i;break;case"average":e.kind=o;break;case"centroid":e.kind=a;break;case"ward":e.kind=s;break;default:throw new RangeError("Unknown kind of similarity")}else if("function"!=typeof e.kind)throw new TypeError("Undefined kind of similarity");var n=new f;n.children=Array(t.length),n.index=Array(t.length);for(var l=0;l<t.length;l++)n.children[l]=new h(l),n.index[l]=new h(l);n.distance=c(n.index,t,e.dist);for(var p,m,g,v,y,w=[n];0<w.length;){m=0,g=0;for(var x=0;x<w.length;x++){p=0;for(var b=0;b<w[x].length;b++)for(var _=b+1;_<w[x].length;_++)p=M(e.dist(t[w[x].index[b].index],t[w[x].index[_].index]),p);p>m&&(m=p,g=x)}if(m=0,2===w[g].index.length)w[g].children=[w[g].index[0],w[g].index[1]],w[g].distance=e.dist(t[w[g].index[0].index],t[w[g].index[1].index]);else if(3===w[g].index.length){w[g].children=[w[g].index[0],w[g].index[1],w[g].index[2]];var S=[e.dist(t[w[g].index[0].index],t[w[g].index[1].index]),e.dist(t[w[g].index[1].index],t[w[g].index[2].index])];w[g].distance=(S[0]+S[1])/2}else{for(var E=new f,T=new f,A=[Array(w[g].index.length),[]],C=0;C<A[0].length;C++)A[0][C]=C;for(var k=0;k<A[0].length;k++){v=0;for(var R=0;R<A[0].length;R++)k!==R&&(v+=e.dist(t[w[g].index[A[0][R]].index],t[w[g].index[A[0][k]].index]));(v/=A[0].length-1)>m&&(m=v,y=k)}for(A[1]=[y],A[0].splice(y,1),v=u(A,t,e.dist);0<v.d;)A[1].push(A[0][v.p]),A[0].splice(v.p,1),v=u(A,t,e.dist);var O=Array(A[0].length);E.index=Array(A[0].length);for(var P=0;P<O.length;P++)O[P]=t[w[g].index[A[0][P]].index],E.index[P]=w[g].index[A[0][P]],E.children[P]=w[g].index[A[0][P]];var D=Array(A[1].length);T.index=Array(A[1].length);for(var L=0;L<D.length;L++)D[L]=t[w[g].index[A[1][L]].index],T.index[L]=w[g].index[A[1][L]],T.children[L]=w[g].index[A[1][L]];E.distance=c(E.index,t,e.dist),T.distance=c(T.index,t,e.dist),w.push(E),w.push(T),w[g].children=[E,T]}w.splice(g,1)}return n}},function(e,t,i){"use strict";function n(t,e,n,r){for(var i in this.x=t,this.y=e,n=n||{},this.options={},p)this.options[i]=n.hasOwnProperty(i)?n[i]:p[i];if("number"==typeof this.options.fields)this.numWeights=this.options.fields;else{if(!Array.isArray(this.options.fields))throw new Error("Invalid fields definition");this.numWeights=this.options.fields.length;var o=s(this.options.fields);this.extractor=o.extractor,this.creator=o.creator}if("rect"===this.options.gridType)this.nodeType=d,this.gridDim={x:t,y:e};else{this.nodeType=h;var a=this.x-g(this.y/2);this.gridDim={x:a,y:this.y,z:-(0-a-this.y)}}if(this.torus=this.options.torus,this.distanceMethod=this.torus?"getDistanceTorus":"getDistance",this.distance=this.options.distance,this.maxDistance=m(this.distance,this.numWeights),!0!==r){if(!(0<t&&0<e))throw new Error("x and y must be positive");this.times={findBMU:0,adjust:0},this.randomizer=this.options.randomizer,this.iterationCount=0,this.iterations=this.options.iterations,this.startLearningRate=this.learningRate=this.options.learningRate,this.mapRadius=g(M(t,e)/2),this.algorithmMethod=this.options.method,this._initNodes(),this.done=!1}else this.done=!0}function s(t){for(var e=t.length,n=Array(e),r=Array(e),i=0;i<e;i++)n[i]=a(t[i].range),r[i]=c(t[i].range);return{extractor:function(r){for(var i=Array(e),o=0;o<e;o++)i[o]=n[o](r[t[o].name]);return i},creator:function(n){for(var i={},o=0;o<e;o++)i[t[o].name]=r[o](n[o]);return i}}}function a(t){return function(e){return(e-t[0])/(t[1]-t[0])}}function c(t){return function(e){return t[0]+e*(t[1]-t[0])}}function l(t,e){for(var n=0,r=0,i=t.length;r<i;r++)n+=(t[r]-e[r])*(t[r]-e[r]);return n}function u(t,e){return t[g(e()*t.length)]}function m(t,e){for(var n=Array(e),r=Array(e),i=0;i<e;i++)n[i]=0,r[i]=1;return t(n,r)}var d=i(96),h=i(320),p={fields:3,randomizer:Math.random,distance:l,iterations:10,learningRate:.1,gridType:"rect",torus:!0,method:"random"};n.load=function(e,t){if("SOM"===e.name){var o=e.data.length,s=e.data[0].length;t?e.options.distance=t:e.options.distance&&(e.options.distance=eval("("+e.options.distance+")"));var r=new n(o,s,e.options,!0);r.nodes=Array(o);for(var a=0;a<o;a++){r.nodes[a]=Array(s);for(var i=0;i<s;i++)r.nodes[a][i]=new r.nodeType(a,i,e.data[a][i],r)}return r}throw new Error("expecting a SOM model")},n.prototype.export=function(t){if(!this.done)throw new Error("model is not ready yet");for(var e={name:"SOM",options:{fields:this.options.fields,gridType:this.options.gridType,torus:this.options.torus},data:Array(this.x)},n=0;n<this.x;n++){e.data[n]=Array(this.y);for(var r=0;r<this.y;r++)e.data[n][r]=this.nodes[n][r].weights}return t&&(e.options.distance=this.distance.toString()),e},n.prototype._initNodes=function(){var t,e,n,r=Date.now();for(this.nodes=Array(this.x),t=0;t<this.x;t++)for(this.nodes[t]=Array(this.y),e=0;e<this.y;e++){var i=Array(this.numWeights);for(n=0;n<this.numWeights;n++)i[n]=this.randomizer();this.nodes[t][e]=new this.nodeType(t,e,i,this)}this.times.initNodes=Date.now()-r},n.prototype.setTraining=function(t){if(this.trainingSet)throw new Error("training set has already been set");var e,n=Date.now(),i=t,o=t.length;if(this.extractor)for(i=Array(o),e=0;e<o;e++)i[e]=this.extractor(t[e]);this.numIterations=this.iterations*o,this.timeConstant="random"===this.algorithmMethod?this.numIterations/r(this.mapRadius):o/r(this.mapRadius),this.trainingSet=i,this.times.setTraining=Date.now()-n},n.prototype.trainOne=function(){return!this.done&&(0<this.numIterations--?("random"===this.algorithmMethod?(t=this.mapRadius*o(-this.iterationCount/this.timeConstant),e=u(this.trainingSet,this.randomizer),this._adjust(e,t),this.learningRate=this.startLearningRate*o(-this.iterationCount/this.numIterations)):(n=-g(this.iterationCount/this.trainingSet.length),t=this.mapRadius*o(n/this.timeConstant),this._adjust(e=this.trainingSet[this.iterationCount%this.trainingSet.length],t),0==(this.iterationCount+1)%this.trainingSet.length&&(this.learningRate=this.startLearningRate*o(n/g(this.numIterations/this.trainingSet.length)))),this.iterationCount++,!0):(this.done=!0,!1));var t,e,n},n.prototype._adjust=function(t,e){var n,r,i,a,s=Date.now(),u=this._findBestMatchingUnit(t),c=Date.now();this.times.findBMU+=c-s;var l=g(e),h=u.x+l,f=u.y-l,d=u.y+l;for(n=u.x-l;n<=h;n++){var p=n;for(0>n?p+=this.x:n>=this.x&&(p-=this.x),r=f;r<=d;r++){var m=r;0>r?m+=this.y:r>=this.y&&(m-=this.y),(i=u[this.distanceMethod](this.nodes[p][m]))<e&&(a=o(-i/(2*e)),this.nodes[p][m].adjustWeights(t,this.learningRate,a))}}this.times.adjust+=Date.now()-c},n.prototype.train=function(t){if(!this.done)for(this.setTraining(t);this.trainOne(););},n.prototype.getConvertedNodes=function(){for(var t=Array(this.x),e=0;e<this.x;e++){t[e]=Array(this.y);for(var n,r=0;r<this.y;r++)n=this.nodes[e][r],t[e][r]=this.creator?this.creator(n.weights):n.weights}return t},n.prototype._findBestMatchingUnit=function(t){for(var e,n,r=1/0,i=0;i<this.x;i++)for(var o=0;o<this.y;o++)(n=this.distance(this.nodes[i][o].weights,t))<r&&(r=n,e=this.nodes[i][o]);return e},n.prototype.predict=function(t,e){if("boolean"==typeof t&&(e=t,t=null),t||(t=this.trainingSet),Array.isArray(t)&&(Array.isArray(t[0])||"object"==typeof t[0])){var n=this;return t.map(function(t){return n._predict(t,e)})}return this._predict(t,e)},n.prototype._predict=function(t,e){Array.isArray(t)||(t=this.extractor(t));var n=this._findBestMatchingUnit(t),r=[n.x,n.y];return e&&(r[2]=n.getPosition(t)),r},n.prototype.getQuantizationError=function(){for(var t=this.getFit(),e=t.length,n=0,r=0;r<e;r++)n+=t[r];return n/e},n.prototype.getFit=function(t){t||(t=this.trainingSet);for(var e,n=t.length,r=Array(n),i=0;i<n;i++)e=this._findBestMatchingUnit(t[i]),r[i]=R(this.distance(t[i],e.weights));return r},e.exports=n},function(t,e,n){"use strict";function r(t,e,n,r){i.call(this,t,e,n,r),this.hX=t-g(e/2),this.z=0-this.hX-e}var i=n(96);(r.prototype=new i).constructor=r,r.prototype.getDistance=function(t){return M(u(this.hX-t.hX),u(this.y-t.y),u(this.z-t.z))},r.prototype.getDistanceTorus=function(t){var e=u(this.hX-t.hX),n=u(this.y-t.y),r=u(this.z-t.z);return M(v(e,this.som.gridDim.x-e),v(n,this.som.gridDim.y-n),v(r,this.som.gridDim.z-r))},r.prototype.getPosition=function(){throw new Error("Unimplemented : cannot get position of the points for hexagonal grid")},t.exports=r},function(t,e,n){"use strict";var r=n(49),i=n(100),o=n(334),a=n(101),s=n(102);class u{constructor(t){if((t=t||{}).model){this.hiddenLayers=t.hiddenLayers,this.iterations=t.iterations,this.learningRate=t.learningRate,this.regularization=t.regularization,this.dicts=t.dicts,this.activation=t.activation,this.activationParam=t.activationParam,this.model=Array(t.layers.length);for(var e=0;e<this.model.length-1;++e)this.model[e]=i.load(t.layers[e]);this.model[this.model.length-1]=o.load(t.layers[this.model.length-1])}else this.hiddenLayers=void 0===t.hiddenLayers?[10]:t.hiddenLayers,this.iterations=void 0===t.iterations?50:t.iterations,this.learningRate=void 0===t.learningRate?.01:t.learningRate,this.regularization=void 0===t.regularization?.01:t.regularization,this.activation=void 0===t.activation?"tanh":t.activation,this.activationParam=void 0===t.activationParam?1:t.activationParam,this.activation in Object.keys(s)||(this.activation="tanh")}buildNetwork(t,e){var n=this.hiddenLayers.length-1+2;this.model=Array(n),this.model[0]=new i({inputSize:t,outputSize:this.hiddenLayers[0],activation:this.activation,activationParam:this.activationParam,regularization:this.regularization,epsilon:this.learningRate});for(var r=1;r<this.hiddenLayers.length;++r)this.model[r]=new i({inputSize:this.hiddenLayers[r-1],outputSize:this.hiddenLayers[r],activation:this.activation,activationParam:this.activationParam,regularization:this.regularization,epsilon:this.learningRate});this.model[n-1]=new o({inputSize:this.hiddenLayers[this.hiddenLayers.length-1],outputSize:e,activation:this.activation,activationParam:this.activationParam,regularization:this.regularization,epsilon:this.learningRate})}train(t,e){t=r.checkMatrix(t),this.dicts=a.dictOutputs(e);var n=t.columns,i=Object.keys(this.dicts.inputs).length;this.buildNetwork(n,i);for(var o,s=0;s<this.iterations;++s)o=this.propagate(t),this.backpropagation(t,e,o)}propagate(t){for(var e=t,n=0;n<this.model.length;++n)e=this.model[n].forward(e);return e.divColumnVector(a.sumRow(e))}backpropagation(t,e,n){for(var r=0;r<n.length;++r)n[r][this.dicts.inputs[e[r]]]-=1;var i=n;for(r=this.model.length-1;0<=r;--r)i=this.model[r].backpropagation(i,0<r?this.model[r-1].a:t);for(r=0;r<this.model.length;++r)this.model[r].update()}predict(t){t=r.checkMatrix(t);for(var e=Array(t.rows),n=this.propagate(t),i=0;i<t.rows;++i)e[i]=this.dicts.outputs[n.maxRowIndex(i)[1]];return e}toJSON(){for(var t={model:"FNN",hiddenLayers:this.hiddenLayers,iterations:this.iterations,learningRate:this.learningRate,regularization:this.regularization,activation:this.activation,activationParam:this.activationParam,dicts:this.dicts,layers:Array(this.model.length)},e=0;e<this.model.length;++e)t.layers[e]=this.model[e].toJSON();return t}static load(t){if("FNN"!==t.model)throw new RangeError("the current model is not a feed forward network");return new u(t)}}t.exports=u},function(){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},function(t,e,n){"use strict";var r=n(22);t.exports=class extends r{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}},function(t,e,n){"use strict";var r=n(22);t.exports=class extends r{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}},function(t,e,n){"use strict";var r=n(22),i=n(31);t.exports=class extends r{constructor(t,e,n,r,o){i.checkRange(t,e,n,r,o),super(t,n-e+1,o-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}},function(t,e,n){"use strict";var r=n(22),i=n(31);t.exports=class extends r{constructor(t,e,n){var r=i.checkIndices(t,e,n);super(t,r.row.length,r.column.length),this.rowIndices=r.row,this.columnIndices=r.column}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}},function(t,e,n){"use strict";var r=n(22);t.exports=class extends r{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}},function(t,e,n){"use strict";var r=n(22);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}},function(t,e,n){"use strict";var r=n(22);t.exports=class extends r{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}},function(t,e,n){"use strict";function r(t){return i(t=o.checkMatrix(t),o.eye(t.rows))}function i(t,e){return t=o.checkMatrix(t),e=o.checkMatrix(e),t.isSquare()?new u(t).solve(e):new c(t).solve(e)}var o=n(12).Matrix,a=n(99),s=n(331),u=n(98),c=n(332),l=n(333);o.inverse=o.inv=r,o.prototype.inverse=o.prototype.inv=function(){return r(this)},o.solve=i,o.prototype.solve=function(t){return i(this,t)},t.exports={SingularValueDecomposition:a,SVD:a,EigenvalueDecomposition:s,EVD:s,LuDecomposition:u,LU:u,QrDecomposition:c,QR:c,CholeskyDecomposition:l,CHO:l,inverse:r,solve:i}},function(t,e,n){"use strict";function r(t,e){if(e=Object.assign({},p,e),!(this instanceof r))return new r(t,e);if(!(t=l.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");var n,u,c=t.columns,h=d(c,c,0),f=Array(c),m=Array(c),g=t;if(e.assumeSymmetric||t.isSymmetric()){for(n=0;n<c;n++)for(u=0;u<c;u++)h[n][u]=g.get(n,u);i(c,m,f,h),o(c,m,f,h)}else{var v=d(c,c,0),y=Array(c);for(u=0;u<c;u++)for(n=0;n<c;n++)v[n][u]=g.get(n,u);a(c,v,y,h),s(c,m,f,h,v)}this.n=c,this.e=m,this.d=f,this.V=h}function i(t,e,n,r){var i,o,a,s,c,l,h,f;for(c=0;c<t;c++)n[c]=r[t-1][c];for(s=t-1;0<s;s--){for(f=0,a=0,l=0;l<s;l++)f+=u(n[l]);if(0===f)for(e[s]=n[s-1],c=0;c<s;c++)n[c]=r[s-1][c],r[s][c]=0,r[c][s]=0;else{for(l=0;l<s;l++)n[l]/=f,a+=n[l]*n[l];for(i=n[s-1],o=R(a),0<i&&(o=-o),e[s]=f*o,a-=i*o,n[s-1]=i-o,c=0;c<s;c++)e[c]=0;for(c=0;c<s;c++){for(r[c][s]=i=n[c],o=e[c]+r[c][c]*i,l=c+1;l<=s-1;l++)o+=r[l][c]*n[l],e[l]+=r[l][c]*i;e[c]=o}for(i=0,c=0;c<s;c++)e[c]/=a,i+=e[c]*n[c];for(h=i/(a+a),c=0;c<s;c++)e[c]-=h*n[c];for(c=0;c<s;c++){for(i=n[c],o=e[c],l=c;l<=s-1;l++)r[l][c]-=i*e[l]+o*n[l];n[c]=r[s-1][c],r[s][c]=0}}n[s]=a}for(s=0;s<t-1;s++){if(r[t-1][s]=r[s][s],r[s][s]=1,0!==(a=n[s+1])){for(l=0;l<=s;l++)n[l]=r[l][s+1]/a;for(c=0;c<=s;c++){for(o=0,l=0;l<=s;l++)o+=r[l][s+1]*r[l][c];for(l=0;l<=s;l++)r[l][c]-=o*n[l]}}for(l=0;l<=s;l++)r[l][s+1]=0}for(c=0;c<t;c++)n[c]=r[t-1][c],r[t-1][c]=0;r[t-1][t-1]=1,e[0]=0}function o(t,e,n,r){var i,o,a,s,c,l,h,d,p,m,g,v,y,w,x,b;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;var _=0,S=0,E=2.220446049250313e-16;for(l=0;l<t;l++){for(S=M(S,u(n[l])+u(e[l])),h=l;h<t&&!(u(e[h])<=E*S);)h++;if(h>l)do{for(p=f(d=(n[l+1]-(i=n[l]))/(2*e[l]),1),0>d&&(p=-p),n[l]=e[l]/(d+p),n[l+1]=e[l]*(d+p),m=n[l+1],o=i-n[l],a=l+2;a<t;a++)n[a]-=o;for(_+=o,d=n[h],v=g=1,y=g,w=e[l+1],x=0,b=0,a=h-1;a>=l;a--)for(y=v,v=g,b=x,i=g*e[a],o=g*d,p=f(d,e[a]),e[a+1]=x*p,d=(g=d/p)*n[a]-(x=e[a]/p)*i,n[a+1]=o+x*(g*i+x*n[a]),c=0;c<t;c++)r[c][a+1]=x*r[c][a]+g*(o=r[c][a+1]),r[c][a]=g*r[c][a]-x*o;e[l]=x*(d=-x*b*y*w*e[l]/m),n[l]=g*d}while(u(e[l])>E*S);n[l]+=_,e[l]=0}for(a=0;a<t-1;a++){for(c=a,d=n[a],s=a+1;s<t;s++)n[s]<d&&(c=s,d=n[s]);if(c!==a)for(n[c]=n[a],n[a]=d,s=0;s<t;s++)d=r[s][a],r[s][a]=r[s][c],r[s][c]=d}}function a(t,e,n,r){var i,o,a,s,c,l,h,f=t-1;for(l=1;l<=f-1;l++){for(h=0,s=l;s<=f;s++)h+=u(e[s][l-1]);if(0!==h){for(a=0,s=f;s>=l;s--)n[s]=e[s][l-1]/h,a+=n[s]*n[s];for(o=R(a),0<n[l]&&(o=-o),a-=n[l]*o,n[l]-=o,c=l;c<t;c++){for(i=0,s=f;s>=l;s--)i+=n[s]*e[s][c];for(i/=a,s=l;s<=f;s++)e[s][c]-=i*n[s]}for(s=0;s<=f;s++){for(i=0,c=f;c>=l;c--)i+=n[c]*e[s][c];for(i/=a,c=l;c<=f;c++)e[s][c]-=i*n[c]}n[l]=h*n[l],e[l][l-1]=h*o}}for(s=0;s<t;s++)for(c=0;c<t;c++)r[s][c]=s===c?1:0;for(l=f-1;l>=1;l--)if(0!==e[l][l-1]){for(s=l+1;s<=f;s++)n[s]=e[s][l-1];for(c=l;c<=f;c++){for(o=0,s=l;s<=f;s++)o+=n[s]*r[s][c];for(o=o/n[l]/e[l][l-1],s=l;s<=f;s++)r[s][c]+=o*n[s]}}}function s(t,e,n,r,i){var o,a,s,l,h,f,d,p,m,g,y,w,x,b,_,S=t-1,E=t-1,T=2.220446049250313e-16,A=0,C=0,k=0,O=0,P=0,D=0,L=0,N=0;for(o=0;o<t;o++)for((o<0||o>E)&&(n[o]=i[o][o],e[o]=0),a=M(o-1,0);a<t;a++)C+=u(i[o][a]);for(;S>=0;){for(l=S;l>0&&(0===(D=u(i[l-1][l-1])+u(i[l][l]))&&(D=C),!(u(i[l][l-1])<T*D));)l--;if(l===S)i[S][S]+=A,n[S]=i[S][S],e[S]=0,S--,N=0;else if(l===S-1){if(L=R(u(O=(k=(i[S-1][S-1]-i[S][S])/2)*k+(d=i[S][S-1]*i[S-1][S]))),i[S][S]+=A,i[S-1][S-1]=i[S-1][S-1]+A,p=i[S][S],0<=O){for(n[S-1]=p+(L=0<=k?k+L:k-L),n[S]=n[S-1],0!==L&&(n[S]=p-d/L),e[S-1]=0,e[S]=0,k=(p=i[S][S-1])/(D=u(p)+u(L)),k/=P=R(k*k+(O=L/D)*O),O/=P,a=S-1;a<t;a++)i[S-1][a]=O*(L=i[S-1][a])+k*i[S][a],i[S][a]=O*i[S][a]-k*L;for(o=0;o<=S;o++)i[o][S-1]=O*(L=i[o][S-1])+k*i[o][S],i[o][S]=O*i[o][S]-k*L;for(o=0;o<=E;o++)r[o][S-1]=O*(L=r[o][S-1])+k*r[o][S],r[o][S]=O*r[o][S]-k*L}else n[S-1]=p+k,n[S]=p+k,e[S-1]=L,e[S]=-L;S-=2,N=0}else{if(p=i[S][S],m=0,d=0,l<S&&(m=i[S-1][S-1],d=i[S][S-1]*i[S-1][S]),10==N){for(A+=p,o=0;o<=S;o++)i[o][o]-=p;p=m=.75*(D=u(i[S][S-1])+u(i[S-1][S-2])),d=-.4375*D*D}if(30==N&&0<(D=(D=(m-p)/2)*D+d)){for(D=R(D),m<p&&(D=-D),D=p-d/((m-p)/2+D),o=0;o<=S;o++)i[o][o]-=D;A+=D,p=m=d=.964}for(++N,h=S-2;h>=l&&(k=((P=p-(L=i[h][h]))*(D=m-L)-d)/i[h+1][h]+i[h][h+1],O=i[h+1][h+1]-L-P-D,P=i[h+2][h+1],k/=D=u(k)+u(O)+u(P),O/=D,P/=D,h!==l)&&!(u(i[h][h-1])*(u(O)+u(P))<T*(u(k)*(u(i[h-1][h-1])+u(L)+u(i[h+1][h+1]))));)h--;for(o=h+2;o<=S;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(s=h;s<=S-1&&(b=s!==S-1,s!==h&&(k=i[s][s-1],O=i[s+1][s-1],P=b?i[s+2][s-1]:0,0!==(p=u(k)+u(O)+u(P))&&(k/=p,O/=p,P/=p)),0!==p);s++)if(D=R(k*k+O*O+P*P),0>k&&(D=-D),0!==D){for(s===h?l!==h&&(i[s][s-1]=-i[s][s-1]):i[s][s-1]=-D*p,p=(k+=D)/D,m=O/D,L=P/D,O/=k,P/=k,a=s;a<t;a++)k=i[s][a]+O*i[s+1][a],b&&(i[s+2][a]=i[s+2][a]-(k+=P*i[s+2][a])*L),i[s][a]-=k*p,i[s+1][a]=i[s+1][a]-k*m;for(o=0;o<=v(S,s+3);o++)k=p*i[o][s]+m*i[o][s+1],b&&(i[o][s+2]=i[o][s+2]-(k+=L*i[o][s+2])*P),i[o][s]-=k,i[o][s+1]=i[o][s+1]-k*O;for(o=0;o<=E;o++)k=p*r[o][s]+m*r[o][s+1],b&&(r[o][s+2]=r[o][s+2]-(k+=L*r[o][s+2])*P),r[o][s]-=k,r[o][s+1]=r[o][s+1]-k*O}}}if(0!==C){for(S=t-1;0<=S;S--)if(k=n[S],0===(O=e[S]))for(l=S,i[S][S]=1,o=S-1;0<=o;o--){for(d=i[o][o]-k,P=0,a=l;a<=S;a++)P+=i[o][a]*i[a][S];if(0>e[o])L=d,D=P;else if(l=o,0===e[o]?i[o][S]=0===d?-P/(T*C):-P/d:(m=i[o+1][o],i[o][S]=f=((p=i[o][o+1])*D-L*P)/(O=(n[o]-k)*(n[o]-k)+e[o]*e[o]),i[o+1][S]=u(p)>u(L)?(-P-d*f)/p:(-D-m*f)/L),1<T*(f=u(i[o][S]))*f)for(a=o;a<=S;a++)i[a][S]/=f}else if(0>O)for(l=S-1,u(i[S][S-1])>u(i[S-1][S])?(i[S-1][S-1]=O/i[S][S-1],i[S-1][S]=-(i[S][S]-k)/i[S][S-1]):(_=c(0,-i[S-1][S],i[S-1][S-1]-k,O),i[S-1][S-1]=_[0],i[S-1][S]=_[1]),i[S][S-1]=0,i[S][S]=1,o=S-2;0<=o;o--){for(g=0,y=0,a=l;a<=S;a++)g+=i[o][a]*i[a][S-1],y+=i[o][a]*i[a][S];if(d=i[o][o]-k,0>e[o])L=d,P=g,D=y;else if(l=o,0===e[o]?(_=c(-g,-y,d,O),i[o][S-1]=_[0],i[o][S]=_[1]):(p=i[o][o+1],m=i[o+1][o],x=2*(n[o]-k)*O,0==(w=(n[o]-k)*(n[o]-k)+e[o]*e[o]-O*O)&&0===x&&(w=T*C*(u(d)+u(O)+u(p)+u(m)+u(L))),_=c(p*P-L*g+O*y,p*D-L*y-O*g,w,x),i[o][S-1]=_[0],i[o][S]=_[1],u(p)>u(L)+u(O)?(i[o+1][S-1]=(-g-d*i[o][S-1]+O*i[o][S])/p,i[o+1][S]=(-y-d*i[o][S]-O*i[o][S-1])/p):(_=c(-P-m*i[o][S-1],-D-m*i[o][S],L,O),i[o+1][S-1]=_[0],i[o+1][S]=_[1])),1<T*(f=M(u(i[o][S-1]),u(i[o][S])))*f)for(a=o;a<=S;a++)i[a][S-1]=i[a][S-1]/f,i[a][S]/=f}for(o=0;o<t;o++)if(o<0||o>E)for(a=o;a<t;a++)r[o][a]=i[o][a];for(a=t-1;a>=0;a--)for(o=0;o<=E;o++){for(L=0,s=0;s<=v(a,E);s++)L+=r[o][s]*i[s][a];r[o][a]=L}}}function c(t,e,n,r){var i,o;return u(n)>u(r)?[(t+(i=r/n)*e)/(o=n+i*r),(e-i*t)/o]:[((i=n/r)*t+e)/(o=r+i*n),(i*e-t)/o]}var l=n(12).Matrix,h=n(50),f=h.hypotenuse,d=h.getFilled2DArray,p={assumeSymmetric:!1};r.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return l.isMatrix(this.V)||(this.V=new l(this.V)),this.V},get diagonalMatrix(){var t,e,n=this.n,r=this.e,i=this.d,o=new l(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)o[t][e]=0;o[t][t]=i[t],0<r[t]?o[t][t+1]=r[t]:0>r[t]&&(o[t][t-1]=r[t])}return o}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);var e,n,a,s,u=(t=i.checkMatrix(t)).clone(),c=t.rows,l=t.columns,h=Array(l);for(a=0;a<l;a++){var f=0;for(e=a;e<c;e++)f=o(f,u[e][a]);if(0!==f){for(0>u[a][a]&&(f=-f),e=a;e<c;e++)u[e][a]/=f;for(u[a][a]+=1,n=a+1;n<l;n++){for(s=0,e=a;e<c;e++)s+=u[e][a]*u[e][n];for(s=-s/u[a][a],e=a;e<c;e++)u[e][n]+=s*u[e][a]}}h[a]=-f}this.QR=u,this.Rdiag=h}var i=n(12).Matrix,o=n(50).hypotenuse;r.prototype={solve:function(t){t=i.checkMatrix(t);var e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r,o,a,s,u=t.columns,c=t.clone(),l=e.columns;for(a=0;a<l;a++)for(o=0;o<u;o++){for(s=0,r=a;r<n;r++)s+=e[r][a]*c[r][o];for(s=-s/e[a][a],r=a;r<n;r++)c[r][o]+=s*e[r][a]}for(a=l-1;0<=a;a--){for(o=0;o<u;o++)c[a][o]/=this.Rdiag[a];for(r=0;r<a;r++)for(o=0;o<u;o++)c[r][o]-=c[a][o]*e[r][a]}return c.subMatrix(0,l-1,0,u-1)},isFullRank:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0},get upperTriangularMatrix(){var t,e,n=this.QR,r=n.columns,o=new i(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)o[t][e]=t<e?n[t][e]:t===e?this.Rdiag[t]:0;return o},get orthogonalMatrix(){var t,e,n,r,o=this.QR,a=o.rows,s=o.columns,u=new i(a,s);for(n=s-1;0<=n;n--){for(t=0;t<a;t++)u[t][n]=0;for(u[n][n]=1,e=n;e<s;e++)if(0!==o[n][n]){for(r=0,t=n;t<a;t++)r+=o[t][n]*u[t][e];for(r=-r/o[n][n],t=n;t<a;t++)u[t][e]+=r*o[t][n]}}return u}},t.exports=r},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);if(!(t=i.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var e,n,o,a=t,s=a.rows,u=new i(s,s),c=!0;for(n=0;n<s;n++){var l=u[n],h=0;for(o=0;o<n;o++){var f=u[o],d=0;for(e=0;e<o;e++)d+=f[e]*l[e];l[o]=d=(a[n][o]-d)/u[o][o],h+=d*d}for(c&=0<(h=a[n][n]-h),u[n][n]=R(M(h,0)),o=n+1;o<s;o++)u[n][o]=0}if(!c)throw new Error("Matrix is not positive definite");this.L=u}var i=n(12).Matrix;r.prototype={get lowerTriangularMatrix(){return this.L},solve:function(t){t=i.checkMatrix(t);var e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");var r,o,a,s=t.columns,u=t.clone();for(a=0;a<n;a++)for(o=0;o<s;o++){for(r=0;r<a;r++)u[a][o]-=u[r][o]*e[a][r];u[a][o]/=e[a][a]}for(a=n-1;0<=a;a--)for(o=0;o<s;o++){for(r=a+1;r<n;r++)u[a][o]-=u[r][o]*e[r][a];u[a][o]/=e[a][a]}return u}},t.exports=r},function(t,e,n){"use strict";var r=n(100);class i extends r{constructor(t){super(t),this.activationFunction=function(t,e){this[t][e]=o(this[t][e])}}static load(t){if("Layer"!==t.model)throw new RangeError("the current model is not a Layer model");return new i(t)}}t.exports=i}])});